---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/the-fix-it-sample-application
title: 'Anhang: Der Fix It-Beispielanwendung (erstellen realer Cloud-Apps mit Azure) | Microsoft-Dokumentation'
author: MikeWasson
description: Die Building Real World Cloud Apps mit Azure-e-Book basiert auf einer Präsentation von Scott Guthrie entwickelt wurde. Es wird erläutert, 13 Muster und Vorgehensweisen, die er können...
ms.author: riande
ms.date: 06/12/2014
ms.assetid: 1bc333c5-f096-4ea7-b170-779accc21c1a
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/the-fix-it-sample-application
msc.type: authoredcontent
ms.openlocfilehash: de3c8ea29f2c271136f58d8165bb92f4ab28ce83
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/01/2019
ms.locfileid: "57034217"
---
<a name="appendix-the-fix-it-sample-application-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="65d1d-104">Anhang: Der Fix It-Beispielanwendung (erstellen realer Cloud-Apps mit Azure)</span><span class="sxs-lookup"><span data-stu-id="65d1d-104">Appendix: The Fix It Sample Application (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="65d1d-105">durch [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="65d1d-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="65d1d-106">Laden Sie das Update, das es Projekt</span><span class="sxs-lookup"><span data-stu-id="65d1d-106">Download The Fix It Project</span></span>](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4)

> <span data-ttu-id="65d1d-107">Die **Building Real World Cloud Apps mit Azure** e-Book basiert darauf, dass eine Präsentation von Scott Guthrie entwickelt wurde.</span><span class="sxs-lookup"><span data-stu-id="65d1d-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="65d1d-108">Es wird erläutert, 13 Muster und Methoden, die Ihnen helfen können, werden erfolgreiche Entwicklung von Web-apps für die Cloud.</span><span class="sxs-lookup"><span data-stu-id="65d1d-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="65d1d-109">Weitere Informationen zu e-Book, finden Sie unter [im ersten Kapitel](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="65d1d-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="65d1d-110">In diesem Anhang zu den Building Real World Cloud Apps mit Azure-e-Book enthält folgende Abschnitte, die zusätzliche Informationen zu den Fix It-beispielanwendung bereitstellen, die Sie herunterladen können:</span><span class="sxs-lookup"><span data-stu-id="65d1d-110">This appendix to the Building Real World Cloud Apps with Azure e-book contains the following sections that provide additional information about the Fix It sample application that you can download:</span></span>

- [<span data-ttu-id="65d1d-111">Bekannte Probleme</span><span class="sxs-lookup"><span data-stu-id="65d1d-111">Known issues</span></span>](#knownissues)
- [<span data-ttu-id="65d1d-112">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="65d1d-112">Best practices</span></span>](#bestpractices)
- [<span data-ttu-id="65d1d-113">Wie Sie die app in Visual Studio auf Ihrem lokalen Computer ausführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-113">How to run the app from Visual Studio on your local computer</span></span>](#run-in-vs)
- [<span data-ttu-id="65d1d-114">Die Basis-app in Azure App Service Web Apps bereitstellen, mithilfe der Windows PowerShell-Skripts</span><span class="sxs-lookup"><span data-stu-id="65d1d-114">How to deploy the base app to Azure App Service Web Apps by using the Windows PowerShell scripts</span></span>](#deploybase)
- [<span data-ttu-id="65d1d-115">Problembehandlung bei der Windows PowerShell-Skripts</span><span class="sxs-lookup"><span data-stu-id="65d1d-115">Troubleshooting the Windows PowerShell scripts</span></span>](#troubleshooting)
- [<span data-ttu-id="65d1d-116">Gewusst wie: Bereitstellen der app mit einer Warteschlange, die Verarbeitung von Azure App Service-Web-Apps und Azure-Clouddienst</span><span class="sxs-lookup"><span data-stu-id="65d1d-116">How to deploy the app with queue processing to Azure App Service Web Apps and an Azure Cloud Service</span></span>](#deployqueues)

<a id="knownissues"></a>
## <a name="known-issues"></a><span data-ttu-id="65d1d-117">Bekannte Probleme</span><span class="sxs-lookup"><span data-stu-id="65d1d-117">Known issues</span></span>

<span data-ttu-id="65d1d-118">Die Fix It-app wurde ursprünglich entwickelt, um zu veranschaulichen, so weit wie möglich einiger der Muster in diesem e-Book angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-118">The Fix It app was originally developed in order to illustrate as simply as possible some of the patterns presented in this e-book.</span></span> <span data-ttu-id="65d1d-119">Aber da e-Book ist über das Erstellen von WPF-Anwendungen, unterzogen werden wir den Code Fix It, eine Überprüfung und Testprozess ähnelt, was wir, für die veröffentlichte Software tun würde.</span><span class="sxs-lookup"><span data-stu-id="65d1d-119">However, since the e-book is about building real-world apps, we subjected the Fix It code to a review and testing process similar to what we'd do for released software.</span></span> <span data-ttu-id="65d1d-120">Wir haben festgestellt, dass eine Reihe von Problemen, und klicken Sie wie bei jeder Real-World-Anwendung, einige davon wurde behoben, und einige davon wir auf eine höhere Version verzögert.</span><span class="sxs-lookup"><span data-stu-id="65d1d-120">We found a number of issues, and as with any real-world application, some of them we fixed and some of them we deferred to a later release.</span></span>

<span data-ttu-id="65d1d-121">Die folgende Liste enthält Probleme, die berücksichtigt werden sollten, in einer produktionsanwendung, aber aus irgendeinem Grund eine andere, die wir uns, nicht auf die Adresse in der ersten Version von der Fix It-beispielanwendung entschieden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-121">The following list includes issues that should be addressed in a production application, but for one reason or another we decided not to address in the initial release of the Fix It sample application.</span></span>

### <a name="security"></a><span data-ttu-id="65d1d-122">Sicherheit</span><span class="sxs-lookup"><span data-stu-id="65d1d-122">Security</span></span>

- <span data-ttu-id="65d1d-123">Stellen Sie sicher, dass Sie können eine Aufgabe zu einem nicht vorhandenen Besitzer zuweisen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-123">Ensure that you can't assign a task to a non-existent owner.</span></span>
- <span data-ttu-id="65d1d-124">Stellen Sie sicher, dass nur Sie können anzeigen und ändern Sie die Aufgaben, die Sie erstellt haben oder Ihnen zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="65d1d-124">Ensure that you can only view and modify tasks that you created or are assigned to you.</span></span>
- <span data-ttu-id="65d1d-125">Verwenden Sie HTTPS für die Anmeldeseiten und Authentifizierungscookies an.</span><span class="sxs-lookup"><span data-stu-id="65d1d-125">Use HTTPS for sign-in pages and authentication cookies.</span></span>
- <span data-ttu-id="65d1d-126">Geben Sie ein Zeitlimit für den Authentifizierungs-Cookies.</span><span class="sxs-lookup"><span data-stu-id="65d1d-126">Specify a time limit for authentication cookies.</span></span>

### <a name="input-validation"></a><span data-ttu-id="65d1d-127">Eingabeüberprüfung</span><span class="sxs-lookup"><span data-stu-id="65d1d-127">Input validation</span></span>

<span data-ttu-id="65d1d-128">Im Allgemeinen eine Produktions-app dazu mehr eingabeüberprüfung wie bei der app zu beheben.</span><span class="sxs-lookup"><span data-stu-id="65d1d-128">In general, a production app would do more input validation than the Fix It app.</span></span> <span data-ttu-id="65d1d-129">Z. B. die Größe des Abbilds / image zulässige Dateigröße für Uploads beschränkt werden soll.</span><span class="sxs-lookup"><span data-stu-id="65d1d-129">For example, the image size / image file size allowed for upload should be limited.</span></span>

### <a name="administrator-functionality"></a><span data-ttu-id="65d1d-130">Administrator-Funktion</span><span class="sxs-lookup"><span data-stu-id="65d1d-130">Administrator functionality</span></span>

<span data-ttu-id="65d1d-131">Ein Administrator sollte den Besitz an vorhandenen Aufgaben ändern können.</span><span class="sxs-lookup"><span data-stu-id="65d1d-131">An administrator should be able to change ownership on existing tasks.</span></span> <span data-ttu-id="65d1d-132">Der Ersteller eines Tasks verbleiben z. B. möglicherweise das Unternehmen, sodass niemand Autorität für die Aufgabe darin, es sei denn, Sie administrativer Zugriff aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="65d1d-132">For example, the creator of a task might leave the company, leaving no one with authority to maintain the task unless administrative access is enabled.</span></span>

### <a name="queue-message-processing"></a><span data-ttu-id="65d1d-133">Die Verarbeitung von Warteschlangennachrichten</span><span class="sxs-lookup"><span data-stu-id="65d1d-133">Queue message processing</span></span>

<span data-ttu-id="65d1d-134">Warteschlangen-Nachricht, die in der Fix It-app verarbeiten soll einfach gehalten, damit das veranschaulichen des Musters warteschlangenorientierte mit einem minimum an Code verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-134">Queue message processing in the Fix It app was designed to be simple in order to illustrate the queue-centric work pattern with a minimum amount of code.</span></span> <span data-ttu-id="65d1d-135">Diesem einfache Code wäre nicht ausreichend für eine Anwendung für die eigentliche Produktion.</span><span class="sxs-lookup"><span data-stu-id="65d1d-135">This simple code would not be adequate for an actual production application.</span></span>

- <span data-ttu-id="65d1d-136">Der Code garantiert nicht, dass jede warteschlangennachricht höchstens einmal verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-136">The code does not guarantee that each queue message will be processed at most once.</span></span> <span data-ttu-id="65d1d-137">Wenn Sie aus der Warteschlange eine Nachricht erhalten, besteht ein Timeout, dem die Nachricht für andere warteschlangenlistener nicht mehr sichtbar ist.</span><span class="sxs-lookup"><span data-stu-id="65d1d-137">When you get a message from the queue, there is a timeout period, during which the message is invisible to other queue listeners.</span></span> <span data-ttu-id="65d1d-138">Wenn das Timeout abläuft, bevor die Nachricht gelöscht wird, wird die Nachricht erneut angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-138">If the timeout expires before the message is deleted, the message becomes visible again.</span></span> <span data-ttu-id="65d1d-139">Aus diesem Grund, wenn eine workerrolleninstanz sehr lange, die Verarbeitung einer Nachricht verbringt, ist es theoretisch möglich, dass die Nachricht zweimal verarbeitet, was zu einer doppelten Aufgabe in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65d1d-139">Therefore, if a worker role instance spends a long time processing a message, it is theoretically possible for the same message to get processed twice, resulting in a duplicate task in the database.</span></span> <span data-ttu-id="65d1d-140">Weitere Informationen zu diesem Problem finden Sie unter [mithilfe von Azure Storage-Warteschlangen](https://msdn.microsoft.com/library/ff803365.aspx#sec7).</span><span class="sxs-lookup"><span data-stu-id="65d1d-140">For more information about this issue, see [Using Azure Storage Queues](https://msdn.microsoft.com/library/ff803365.aspx#sec7).</span></span>
- <span data-ttu-id="65d1d-141">Die Warteschlange Abruflogik kostengünstiger, möglicherweise durch die Batchverarbeitung beim Abruf der Nachricht.</span><span class="sxs-lookup"><span data-stu-id="65d1d-141">The queue polling logic could be more cost-effective, by batching message retrieval.</span></span> <span data-ttu-id="65d1d-142">Jedes Mal, wenn Sie aufrufen [CloudQueue.GetMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessageasync.aspx), fallen Transaktionskosten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-142">Every time you call [CloudQueue.GetMessageAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessageasync.aspx), there is a transaction cost.</span></span> <span data-ttu-id="65d1d-143">Stattdessen rufen Sie [CloudQueue.GetMessagesAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessagesasync.aspx) (Beachten Sie die würfelvorgänge "), die mehrere Nachrichten in einer einzelnen Transaktion abruft.</span><span class="sxs-lookup"><span data-stu-id="65d1d-143">Instead, you can call [CloudQueue.GetMessagesAsync](https://msdn.microsoft.com/library/microsoft.windowsazure.storage.queue.cloudqueue.getmessagesasync.aspx) (note the plural 's'), which gets multiple messages in a single transaction.</span></span> <span data-ttu-id="65d1d-144">Die Transaktionskosten für Azure Storage-Warteschlangen sind sehr gering, daher die Auswirkungen auf die Kosten nicht wesentliche in den meisten Szenarien.</span><span class="sxs-lookup"><span data-stu-id="65d1d-144">The transaction costs for Azure Storage Queues are very low, so the impact on costs is not substantial in most scenarios.</span></span>
- <span data-ttu-id="65d1d-145">Der enge Schleife in der Warteschlange Nachrichtenverarbeitung Code bewirkt, dass CPU-Affinität, die nicht mit mehreren Kernen virtuelle Computer effizient verwenden wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-145">The tight loop in the queue message-processing code causes CPU affinity, which does not utilize multi-core VMs efficiently.</span></span> <span data-ttu-id="65d1d-146">Ein besseres Design würden Aufgabenparallelität verwenden, um mehrere asynchrone Aufgaben parallel auszuführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-146">A better design would use task parallelism to run several async tasks in parallel.</span></span>
- <span data-ttu-id="65d1d-147">Die Verarbeitung von Warteschlangennachrichten hat nur rudimentäre Ausnahmebehandlung.</span><span class="sxs-lookup"><span data-stu-id="65d1d-147">Queue message-processing has only rudimentary exception handling.</span></span> <span data-ttu-id="65d1d-148">Z. B. der Code nicht behandeln, [nicht verarbeitbare Nachrichten](https://msdn.microsoft.com/library/ms789028.aspx).</span><span class="sxs-lookup"><span data-stu-id="65d1d-148">For example, the code doesn't handle [poison messages](https://msdn.microsoft.com/library/ms789028.aspx).</span></span> <span data-ttu-id="65d1d-149">(Bei der Verarbeitung von Nachrichten eine Ausnahme auslöst, müssen Sie den Fehler protokollieren und die Nachricht, löschen oder versucht der Worker-Rolle, die erneute Verarbeitung und die Schleife wird auf unbestimmte Zeit fortgesetzt.)</span><span class="sxs-lookup"><span data-stu-id="65d1d-149">(When message processing causes an exception, you have to log the error and delete the message, or the worker role will try to process it again, and the loop will continue indefinitely.)</span></span>

### <a name="sql-queries-are-unbounded"></a><span data-ttu-id="65d1d-150">SQL-Abfragen sind nicht gebunden</span><span class="sxs-lookup"><span data-stu-id="65d1d-150">SQL queries are unbounded</span></span>

<span data-ttu-id="65d1d-151">Aktuelle Fix It-Code wird keine Beschränkung für wie viele Zeilen, die die Abfragen für Indexseiten zurückgeben können.</span><span class="sxs-lookup"><span data-stu-id="65d1d-151">Current Fix It code places no limit on how many rows the queries for Index pages might return.</span></span> <span data-ttu-id="65d1d-152">Die Größe der resultierenden Listen empfangen kann eine große Anzahl von Aufgaben in der Datenbank eingegeben wird, Leistungsprobleme auftreten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-152">If a large volume of tasks is entered into the database, the size of the resulting lists received could cause performance issues.</span></span> <span data-ttu-id="65d1d-153">Die Lösung besteht darin, Paging implementieren.</span><span class="sxs-lookup"><span data-stu-id="65d1d-153">The solution is to implement paging.</span></span> <span data-ttu-id="65d1d-154">Ein Beispiel finden Sie unter [sortieren, Filtern und Paging mit Entity Framework in einer ASP.NET MVC-Anwendung](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="65d1d-154">For an example, see [Sorting, Filtering, and Paging with the Entity Framework in an ASP.NET MVC Application](../../../../mvc/overview/getting-started/getting-started-with-ef-using-mvc/sorting-filtering-and-paging-with-the-entity-framework-in-an-asp-net-mvc-application.md).</span></span>

### <a name="view-models-recommended"></a><span data-ttu-id="65d1d-155">Anzeigemodelle, die empfohlen</span><span class="sxs-lookup"><span data-stu-id="65d1d-155">View models recommended</span></span>

<span data-ttu-id="65d1d-156">Die Fix It-app verwendet die Entitätsklasse FixItTask, um Informationen zwischen dem Controller und die Ansicht zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="65d1d-156">The Fix It app uses the FixItTask entity class to pass information between the controller and the view.</span></span> <span data-ttu-id="65d1d-157">Eine bewährte Methode ist die Verwendung der anzeigemodelle.</span><span class="sxs-lookup"><span data-stu-id="65d1d-157">A best practice is to use view models.</span></span> <span data-ttu-id="65d1d-158">Das Domänenmodell (z. B. die FixItTask Entity-Klasse) wurde entwickelt, um was für Dauerhaftigkeit von Daten benötigt wird, während ein Ansichtsmodell für die Darstellung von Daten entworfen werden kann.</span><span class="sxs-lookup"><span data-stu-id="65d1d-158">The domain model (e.g., the FixItTask entity class) is designed around what is needed for data persistence, while a view model can be designed for data presentation.</span></span> <span data-ttu-id="65d1d-159">Weitere Informationen finden Sie unter [12 bewährte Methoden für ASP.NET MVC](http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx).</span><span class="sxs-lookup"><span data-stu-id="65d1d-159">For more information, see [12 ASP.NET MVC Best Practices](http://codeclimber.net.nz/archive/2009/10/27/12-asp.net-mvc-best-practices.aspx).</span></span>

### <a name="secure-image-blob-recommended"></a><span data-ttu-id="65d1d-160">Empfohlen, sicheres Image-blob</span><span class="sxs-lookup"><span data-stu-id="65d1d-160">Secure image blob recommended</span></span>

<span data-ttu-id="65d1d-161">Den Fix It-app-Stores von hochgeladenen Bildern als öffentlich, was bedeutet, dass jemand auf die URL findet die Bilder zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="65d1d-161">The Fix It app stores uploaded images as public, meaning that anyone who finds the URL can access the images.</span></span> <span data-ttu-id="65d1d-162">Die Images können anstelle von öffentlichen gesichert werden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-162">The images could be secured instead of public.</span></span>

### <a name="no-powershell-automation-scripts-for-queues"></a><span data-ttu-id="65d1d-163">Keine PowerShell-Automation-Skripts für Warteschlangen</span><span class="sxs-lookup"><span data-stu-id="65d1d-163">No PowerShell automation scripts for queues</span></span>

<span data-ttu-id="65d1d-164">Beispiel-PowerShell-Automation-Skripts wurden nur für die Basisversion der Fix It geschrieben, die vollständig in Azure App Service-Web-Apps ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-164">Sample PowerShell automation scripts were written only for the base version of Fix It that runs entirely in Azure App Service Web Apps.</span></span> <span data-ttu-id="65d1d-165">Wir dies nicht getan haben Skripts bereitgestellt, für das Einrichten und Bereitstellen von für die Web-app sowie Cloud-Service-Umgebung für die Verarbeitung der Warteschlange erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="65d1d-165">We haven't provided scripts for setting up and deploying to the web app plus Cloud Service environment required for queue processing.</span></span>

### <a name="special-handling-for-html-codes-in-user-input"></a><span data-ttu-id="65d1d-166">Spezielle Behandlung für HTML-Codes in der Benutzereingabe</span><span class="sxs-lookup"><span data-stu-id="65d1d-166">Special handling for HTML codes in user input</span></span>

<span data-ttu-id="65d1d-167">ASP.NET wird automatisch verhindert, dass viele Möglichkeiten, die in denen böswillige Benutzer Cross-Site scripting-Angriffe versuchen möglicherweise, durch das Skript in Eingabefelder Benutzer eingeben.</span><span class="sxs-lookup"><span data-stu-id="65d1d-167">ASP.NET automatically prevents many ways in which malicious users might attempt cross-site scripting attacks by entering script in user input text boxes.</span></span> <span data-ttu-id="65d1d-168">Und die MVC `DisplayFor` -Hilfsprogramm zur Aufgabe anzuzeigen titles und Anmerkungen zu dieser automatisch HTML-codiert-Werte, die an den Browser gesendet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-168">And the MVC `DisplayFor` helper used to display task titles and notes automatically HTML-encodes values that it sends to the browser.</span></span> <span data-ttu-id="65d1d-169">Aber in einer Produktions-app möchten Sie möglicherweise zusätzliche Maßnahmen ergreifen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-169">But in a production app you might want to take additional measures.</span></span> <span data-ttu-id="65d1d-170">Weitere Informationen finden Sie unter [Anforderungsüberprüfung in ASP.NET](https://msdn.microsoft.com/library/hh882339.aspx).</span><span class="sxs-lookup"><span data-stu-id="65d1d-170">For more information, see [Request Validation in ASP.NET](https://msdn.microsoft.com/library/hh882339.aspx).</span></span>

<a id="bestpractices"></a>
## <a name="best-practices"></a><span data-ttu-id="65d1d-171">Bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="65d1d-171">Best practices</span></span>

<span data-ttu-id="65d1d-172">Es folgen einige Probleme, die nach einem behoben wurden, Code Review ermittelt und die ursprüngliche Version der Fix It-app testen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-172">Following are some issues that were fixed after being discovered in code review and testing of the original version of the Fix It app.</span></span> <span data-ttu-id="65d1d-173">Einige verursacht wurden, von dem ursprünglichen Programmierer, die nicht die Kenntnis der bestimmten wird empfohlen, einige einfach daran, dass der Code, schnell geschrieben wurde und wurde nicht für die veröffentlichte Software vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-173">Some were caused by the original coder not being aware of a particular best practice, some simply because the code was written quickly and wasn't intended for released software.</span></span> <span data-ttu-id="65d1d-174">Wir haben hier die Probleme aufgelistet, für den Fall, dass Sie etwas, die wir in diesem Review gelernt und Tests, die möglicherweise hilfreich für andere Personen, die auch Web-apps entwickeln.</span><span class="sxs-lookup"><span data-stu-id="65d1d-174">We're listing the issues here in case there's something we learned from this review and testing that might be helpful to others who are also developing web apps.</span></span>

### <a name="dispose-the-database-repository"></a><span data-ttu-id="65d1d-175">Löschen Sie die Datenbank-repository</span><span class="sxs-lookup"><span data-stu-id="65d1d-175">Dispose the database repository</span></span>

<span data-ttu-id="65d1d-176">Die `FixItTaskRepository` Klasse muss das Entity Framework freigeben `DbContext` Instanz.</span><span class="sxs-lookup"><span data-stu-id="65d1d-176">The `FixItTaskRepository` class must dispose the Entity Framework `DbContext` instance.</span></span> <span data-ttu-id="65d1d-177">Wir haben dies durch die Implementierung `IDisposable` in die `FixItTaskRepository` Klasse:</span><span class="sxs-lookup"><span data-stu-id="65d1d-177">We did this by implementing `IDisposable` in the `FixItTaskRepository` class:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample1.cs)]

<span data-ttu-id="65d1d-178">Beachten Sie, die AutoFac automatisch verworfen werden die `FixItTaskRepository` -Instanz, daher wir nicht explizit müssen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-178">Note that AutoFac will automatically dispose the `FixItTaskRepository` instance, so we don't need to explicitly dispose it.</span></span>

<span data-ttu-id="65d1d-179">Entfernen Sie eine andere Möglichkeit ist die `DbContext` Membervariable vom `FixItTaskRepository`, und erstellen Sie stattdessen einen lokalen `DbContext` Variable in einzelnen Repository-Methode, in eine `using` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="65d1d-179">Another option is to remove the `DbContext` member variable from `FixItTaskRepository`, and instead create a local `DbContext` variable within each repository method, inside a `using` statement.</span></span> <span data-ttu-id="65d1d-180">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="65d1d-180">For example:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample2.cs)]

### <a name="register-singletons-as-such-with-di"></a><span data-ttu-id="65d1d-181">Registrieren Sie Singletons als solche mit Dependency Injection</span><span class="sxs-lookup"><span data-stu-id="65d1d-181">Register singletons as such with DI</span></span>

<span data-ttu-id="65d1d-182">Da nur eine Instanz der `PhotoService` Klasse und `Logger` Klasse erforderlich ist, werden diese Klassen werden sollte [registriert als einzelne Instanzen für Dependency Injection](https://code.google.com/p/autofac/wiki/InstanceScope) in *DependenciesConfig.cs*:</span><span class="sxs-lookup"><span data-stu-id="65d1d-182">Since only one instance of the `PhotoService` class and `Logger` class is needed, these classes should be [registered as single instances for dependency injection](https://code.google.com/p/autofac/wiki/InstanceScope) in *DependenciesConfig.cs*:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample3.cs?highlight=1,3)]

### <a name="security-dont-show-error-details-to-users"></a><span data-ttu-id="65d1d-183">Sicherheit: Keine Fehlerdetails für Benutzer anzeigen</span><span class="sxs-lookup"><span data-stu-id="65d1d-183">Security: Don't show error details to users</span></span>

<span data-ttu-id="65d1d-184">Die ursprüngliche Fix It-app nicht haben eine generische Fehlerseite und können nur alle Ausnahmen Blase bis zu der Benutzeroberfläche aus, damit einige Ausnahmen wie z. B. Datenbankverbindungsfehler eine vollständige stapelüberwachung, die angezeigt wird, an den Browser führen können.</span><span class="sxs-lookup"><span data-stu-id="65d1d-184">The original Fix It app didn't have a generic error page and just let all exceptions bubble up to the UI, so some exceptions such as database connection errors could result in a full stack trace being displayed to the browser.</span></span> <span data-ttu-id="65d1d-185">Ausführliche Fehlerinformationen kann manchmal durch Angriffe böswilliger Benutzer vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-185">Detailed error information can sometimes facilitate attacks by malicious users.</span></span> <span data-ttu-id="65d1d-186">Die Lösung besteht, melden Sie sich die Details der Ausnahme und eine Fehlerseite für den Benutzer, der keine Fehlerdetails angezeigt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-186">The solution is to log the exception details and display an error page to the user that doesn't include error details.</span></span> <span data-ttu-id="65d1d-187">Die Fix It-app wurde bereits Protokollierung und damit eine Fehlerseite angezeigt, auch `<customErrors mode=On>` in der Datei "Web.config".</span><span class="sxs-lookup"><span data-stu-id="65d1d-187">The Fix It app was already logging, and in order to display an error page, we added `<customErrors mode=On>` in the Web.config file.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample4.xml?highlight=2)]

<span data-ttu-id="65d1d-188">Standardmäßig bewirkt dies, dass *Views\Shared\Error.cshtml* für Fehler angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="65d1d-188">By default this causes *Views\Shared\Error.cshtml* to be displayed for errors.</span></span> <span data-ttu-id="65d1d-189">Sie können anpassen, *Error.cshtml* oder erstellen Sie Ihre eigenen Fehler Seitenansicht und Hinzufügen einer `defaultRedirect` Attribut.</span><span class="sxs-lookup"><span data-stu-id="65d1d-189">You can customize *Error.cshtml* or create your own error page view and add a `defaultRedirect` attribute.</span></span> <span data-ttu-id="65d1d-190">Sie können auch andere Fehlerseiten nach bestimmten Fehlern angeben.</span><span class="sxs-lookup"><span data-stu-id="65d1d-190">You can also specify different error pages for specific errors.</span></span>

### <a name="security-only-allow-a-task-to-be-edited-by-its-creator"></a><span data-ttu-id="65d1d-191">Sicherheit: nur zulassen Sie eine Aufgabe bearbeitet werden, durch dessen Schöpfer</span><span class="sxs-lookup"><span data-stu-id="65d1d-191">Security: only allow a task to be edited by its creator</span></span>

<span data-ttu-id="65d1d-192">Die Indexseite des Dashboards zeigt nur die Aufgaben, die vom angemeldeten Benutzer erstellt, aber ein böswilliger Benutzer kann eine URL erstellen, mit der ID eines anderen Benutzers Aufgabe.</span><span class="sxs-lookup"><span data-stu-id="65d1d-192">The Dashboard Index page only shows tasks created by the logged-on user, but a malicious user could create a URL with an ID to another user's task.</span></span> <span data-ttu-id="65d1d-193">Wir haben Code hinzugefügt *DashboardController.cs* einen 404-Fehler in diesem Fall zurückgegeben:</span><span class="sxs-lookup"><span data-stu-id="65d1d-193">We added code in *DashboardController.cs* to return a 404 in that case:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample5.cs?highlight=9-14,24-29)]

### <a name="dont-swallow-exceptions"></a><span data-ttu-id="65d1d-194">Behalten Sie nicht Ausnahmen</span><span class="sxs-lookup"><span data-stu-id="65d1d-194">Don't swallow exceptions</span></span>

<span data-ttu-id="65d1d-195">Die ursprüngliche Fix It-app zurückgegeben nur nach der Anmeldung einer Ausnahme, die das Ergebnis einer SQL-Abfrage ist null:</span><span class="sxs-lookup"><span data-stu-id="65d1d-195">The original Fix It app just returned null after logging an exception that resulted from a SQL query:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample6.cs?highlight=4)]

<span data-ttu-id="65d1d-196">Dadurch würde, es dem Benutzer zu sehen, dass die Abfrage war erfolgreich, aber nicht nur Zeilen zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="65d1d-196">This would make it look to the user as if the query succeeded but just didn't return any rows.</span></span> <span data-ttu-id="65d1d-197">Lösung besteht darin, die Ausnahme nach dem Abfangen und Protokollierung erneut ausgelöst:</span><span class="sxs-lookup"><span data-stu-id="65d1d-197">Solution is to re-throw the exception after catching and logging:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample7.cs)]

### <a name="catch-all-exceptions-in-worker-roles"></a><span data-ttu-id="65d1d-198">Fangen Sie alle Ausnahmen in Workerrollen</span><span class="sxs-lookup"><span data-stu-id="65d1d-198">Catch all exceptions in worker roles</span></span>

<span data-ttu-id="65d1d-199">Nicht behandelten Ausnahmen in eine Worker-Rolle führt dazu, dass des virtuelle Computers neu gestartet werden, daher sollten Sie alle Elemente umschließen Sie in einem Try / Catch-Block und alle Ausnahmen behandeln.</span><span class="sxs-lookup"><span data-stu-id="65d1d-199">Any unhandled exceptions in a worker role will cause the VM to be recycled, so you want to wrap everything you do in a try-catch block and handle all exceptions.</span></span>

### <a name="specify-length-for-string-properties-in-entity-classes"></a><span data-ttu-id="65d1d-200">Geben Sie die Länge für Zeichenfolgeneigenschaften in Entitätsklassen</span><span class="sxs-lookup"><span data-stu-id="65d1d-200">Specify length for string properties in entity classes</span></span>

<span data-ttu-id="65d1d-201">Um einfacher Code anzuzeigen, die ursprüngliche Version der app Fix It Länge für die Felder der Entität FixItTask angegeben haben, und daher wurden sie als varchar(max) in der Datenbank definiert.</span><span class="sxs-lookup"><span data-stu-id="65d1d-201">In order to display simple code, the original version of the Fix It app didn't specify lengths for the fields of the FixItTask entity, and as a result they were defined as varchar(max) in the database.</span></span> <span data-ttu-id="65d1d-202">Die Benutzeroberfläche würde daher nahezu jede Menge der Eingabe akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="65d1d-202">As a result, the UI would accept almost any amount of input.</span></span> <span data-ttu-id="65d1d-203">Angabe Längen legt sowohl für Benutzer geltende Grenzwerte Geben Sie in der Webseite und die Größe der Spalte in der Datenbank:</span><span class="sxs-lookup"><span data-stu-id="65d1d-203">Specifying lengths sets limits that apply both to user input in the web page and column size in the database:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample8.cs?highlight=4,7,10,12,14)]

### <a name="mark-private-members-as-readonly-when-they-arent-expected-to-change"></a><span data-ttu-id="65d1d-204">Private Member als Readonly markiert wird, wenn sie sich erwartungsgemäß nicht ändern</span><span class="sxs-lookup"><span data-stu-id="65d1d-204">Mark private members as readonly when they aren't expected to change</span></span>

<span data-ttu-id="65d1d-205">Z. B. in der `DashboardController` eine Instanz der Klasse `FixItTaskRepository` wird erstellt und wird nicht erwartet, zu ändern, damit wir sie als definiert [Readonly](https://msdn.microsoft.com/library/acdd6hb7.aspx).</span><span class="sxs-lookup"><span data-stu-id="65d1d-205">For example, in the `DashboardController` class an instance of `FixItTaskRepository` is created and isn't expected to change, so we defined it as [readonly](https://msdn.microsoft.com/library/acdd6hb7.aspx).</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample9.cs?highlight=3)]

### <a name="use-listany-instead-of-listcount-gt-0"></a><span data-ttu-id="65d1d-206">Verwenden Sie die Liste. Any() statt Liste. Count() &gt; 0</span><span class="sxs-lookup"><span data-stu-id="65d1d-206">Use list.Any() instead of list.Count() &gt; 0</span></span>

<span data-ttu-id="65d1d-207">Verwenden, wenn Sie Sie interessiert ist, gibt an, ob ein oder mehrere Elemente in einer Liste mit die angegebenen Kriterien entsprechen, die [alle](https://msdn.microsoft.com/library/bb534972.aspx) -Methode, da wird als ein Element, das die Kriterien Anpassung gefunden wird, während die `Count` Methode immer durchlaufen muss jedes Element.</span><span class="sxs-lookup"><span data-stu-id="65d1d-207">If you all you care about is whether one or more items in a list fit the specified criteria, use the [Any](https://msdn.microsoft.com/library/bb534972.aspx) method, because it returns as soon as an item fitting the criteria is found, whereas the `Count` method always has to iterate through every item.</span></span> <span data-ttu-id="65d1d-208">Das Dashboard *"Index.cshtml"* Datei ursprünglich hatte den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="65d1d-208">The Dashboard *Index.cshtml* file originally had this code:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample10.cshtml)]

<span data-ttu-id="65d1d-209">Wir es so geändert:</span><span class="sxs-lookup"><span data-stu-id="65d1d-209">We changed it to this:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample11.cshtml?highlight=1)]

### <a name="generate-urls-in-mvc-views-using-mvc-helpers"></a><span data-ttu-id="65d1d-210">Generieren von URLs in MVC-Ansichten mithilfe von MVC-Hilfsprogrammen</span><span class="sxs-lookup"><span data-stu-id="65d1d-210">Generate URLs in MVC views using MVC helpers</span></span>

<span data-ttu-id="65d1d-211">Für die **erstellen Sie einen Fix It** Schaltfläche auf der Startseite, Fix It-app, die schwer codiert ein Anchor-Element:</span><span class="sxs-lookup"><span data-stu-id="65d1d-211">For the **Create a Fix It** button on the home page, the Fix It app hard coded an anchor element:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample12.cshtml)]

<span data-ttu-id="65d1d-212">Aktion/Links wie folgt ist es besser, verwenden Sie die [Url.Action](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.action.aspx) HTML-Hilfsobjekt, z.B.:</span><span class="sxs-lookup"><span data-stu-id="65d1d-212">For View/Action links like this it's better to use the [Url.Action](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.action.aspx) HTML helper, for example:</span></span>

[!code-cshtml[Main](the-fix-it-sample-application/samples/sample13.cshtml)]

### <a name="use-taskdelay-instead-of-threadsleep-in-worker-role"></a><span data-ttu-id="65d1d-213">Verwenden von Task.Delay anstelle von Thread.Sleep im Worker-Rolle</span><span class="sxs-lookup"><span data-stu-id="65d1d-213">Use Task.Delay instead of Thread.Sleep in worker role</span></span>

<span data-ttu-id="65d1d-214">Die neue Webprojektvorlage legt `Thread.Sleep` im Beispiel Code für eine Worker-Rolle, aber den Thread in den Standbymodus verursachen kann dazu führen, dass den Threadpool weitere unnötige Threads zu starten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-214">The new-project template puts `Thread.Sleep` in the sample code for a worker role, but causing the thread to sleep can cause the thread pool to spawn additional unnecessary threads.</span></span> <span data-ttu-id="65d1d-215">Sie können verhindern, indem [Task.Delay](https://msdn.microsoft.com/library/hh139096.aspx) stattdessen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-215">You can avoid that by using [Task.Delay](https://msdn.microsoft.com/library/hh139096.aspx) instead.</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample14.cs?highlight=11)]

### <a name="avoid-async-void"></a><span data-ttu-id="65d1d-216">Vermeiden von Async-void</span><span class="sxs-lookup"><span data-stu-id="65d1d-216">Avoid async void</span></span>

<span data-ttu-id="65d1d-217">Wenn eine asynchrone Methode einen Wert zurückgeben, nicht zurückgeben einer `Task` Typ statt `void`.</span><span class="sxs-lookup"><span data-stu-id="65d1d-217">If an async method doesn't need to return a value, return a `Task` type rather than `void`.</span></span>

<span data-ttu-id="65d1d-218">Dieses Beispiel stammt aus dem `FixItQueueManager` Klasse:</span><span class="sxs-lookup"><span data-stu-id="65d1d-218">This example is from the `FixItQueueManager` class:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample15.cs)]

<span data-ttu-id="65d1d-219">Verwenden Sie `async void` nur für den Ereignishandler der obersten Ebene.</span><span class="sxs-lookup"><span data-stu-id="65d1d-219">You should use `async void` only for top-level event handlers.</span></span> <span data-ttu-id="65d1d-220">Wenn Sie eine Methode als definieren `async void`, kann der Aufrufer nicht **"await"** die Methode oder die Methode löst Ausnahmen abgefangen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-220">If you define a method as `async void`, the caller cannot **await** the method or catch any exceptions the method throws.</span></span> <span data-ttu-id="65d1d-221">Weitere Informationen finden Sie unter [Best Practices bei der asynchronen Programmierung](https://msdn.microsoft.com/magazine/jj991977.aspx).</span><span class="sxs-lookup"><span data-stu-id="65d1d-221">For more information, see [Best Practices in Asynchronous Programming](https://msdn.microsoft.com/magazine/jj991977.aspx).</span></span>

### <a name="use-a-cancellation-token-to-break-from-worker-role-loop"></a><span data-ttu-id="65d1d-222">Verwenden Sie ein Abbruchtoken, um Worker-Rolle-Schleife zu unterbrechen</span><span class="sxs-lookup"><span data-stu-id="65d1d-222">Use a cancellation token to break from worker role loop</span></span>

<span data-ttu-id="65d1d-223">In der Regel die **ausführen** -Methode für eine workerrolle enthält eine Endlosschleife.</span><span class="sxs-lookup"><span data-stu-id="65d1d-223">Typically, the **Run** method on a worker role contains an infinite loop.</span></span> <span data-ttu-id="65d1d-224">Wenn die Worker-Rolle beendet wird, weist der [RoleEntryPoint.OnStop](https://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) Methode wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-224">When the worker role is stopping, the [RoleEntryPoint.OnStop](https://msdn.microsoft.com/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx) method is called.</span></span> <span data-ttu-id="65d1d-225">Sie sollten diese Methode verwenden, um die Arbeit abzubrechen, die in erfolgt die **ausführen** -Methode, und beenden ordnungsgemäß.</span><span class="sxs-lookup"><span data-stu-id="65d1d-225">You should use this method to cancel the work that is being done inside the **Run** method and exit gracefully.</span></span> <span data-ttu-id="65d1d-226">Andernfalls kann der Prozess während eines Vorgangs beendet werden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-226">Otherwise, the process might be terminated in the middle of an operation.</span></span>

### <a name="opt-out-of-automatic-mime-sniffing-procedure"></a><span data-ttu-id="65d1d-227">Deaktivieren der automatischen MIME-Ermittlung-Prozedur</span><span class="sxs-lookup"><span data-stu-id="65d1d-227">Opt out of Automatic MIME Sniffing Procedure</span></span>

<span data-ttu-id="65d1d-228">In einigen Fällen meldet Internet Explorer einen MIME-Typ, die vom Webserver angegebenen Typ unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-228">In some cases, Internet Explorer reports a MIME type different than the type specified by the web server.</span></span> <span data-ttu-id="65d1d-229">Beispielsweise, wenn Internet Explorer HTML in einer Datei mit dem HTTP-Antwort-Header Content-Type übermittelt Inhalt findet: Text/Plain über Internet Explorer ermittelt, dass der Inhalt als HTML gerendert werden soll.</span><span class="sxs-lookup"><span data-stu-id="65d1d-229">For instance, if Internet Explorer finds HTML content in a file delivered with the HTTP response header Content-Type: text/plain, Internet Explorer determines that the content should be rendered as HTML.</span></span> <span data-ttu-id="65d1d-230">Leider kann diese "MIME-Ermittlung" auch zu Sicherheitsproblemen für Server, die nicht vertrauenswürdige Inhalte hosten führen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-230">Unfortunately, this "MIME-sniffing" can also lead to security problems for servers hosting untrusted content.</span></span> <span data-ttu-id="65d1d-231">Um dieses Problem zu beheben, Internet Explorer 8, MIME-Typ Entscheidung Code eine Reihe von Änderungen vorgenommen hat, und bietet Anwendungsentwicklern [abwählen, MIME-Ermittlung](https://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx).</span><span class="sxs-lookup"><span data-stu-id="65d1d-231">To combat this problem, Internet Explorer 8 has made a number of changes to MIME-type determination code and allows application developers to [opt out of MIME-sniffing](https://blogs.msdn.com/b/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx).</span></span> <span data-ttu-id="65d1d-232">Der folgende Code wurde hinzugefügt, um die *"Web.config"* Datei.</span><span class="sxs-lookup"><span data-stu-id="65d1d-232">The following code was added to the *Web.config* file.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample16.xml?highlight=2-7)]

### <a name="enable-bundling-and-minification"></a><span data-ttu-id="65d1d-233">Aktivieren der Bündelung und Minimierung</span><span class="sxs-lookup"><span data-stu-id="65d1d-233">Enable bundling and minification</span></span>

<span data-ttu-id="65d1d-234">Wenn Visual Studio ein neues Webprojekt erstellt, ist Bündelung und Minimierung von JavaScript-Dateien nicht standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="65d1d-234">When Visual Studio creates a new web project, bundling and minification of JavaScript files is not enabled by default.</span></span> <span data-ttu-id="65d1d-235">Wir haben eine einzige Zeile Code in BundleConfig.cs hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="65d1d-235">We added a line of code in BundleConfig.cs:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample17.cs?highlight=9)]

### <a name="set-an-expiration-time-out-for-authentication-cookies"></a><span data-ttu-id="65d1d-236">Legen Sie ein Ablaufzeitlimit für Authentifizierungscookies</span><span class="sxs-lookup"><span data-stu-id="65d1d-236">Set an expiration time-out for authentication cookies</span></span>

<span data-ttu-id="65d1d-237">Standardmäßig werden Authentifizierungscookies sind zwei Wochen gültig.</span><span class="sxs-lookup"><span data-stu-id="65d1d-237">By default, authentication cookies expire in two weeks.</span></span> <span data-ttu-id="65d1d-238">Ein kürzeres Intervall ist sicherer.</span><span class="sxs-lookup"><span data-stu-id="65d1d-238">A shorter time is more secure.</span></span> <span data-ttu-id="65d1d-239">Sie können diese Einstellung in *StartupAuth.cs*:</span><span class="sxs-lookup"><span data-stu-id="65d1d-239">You can change this setting in *StartupAuth.cs*:</span></span>

[!code-csharp[Main](the-fix-it-sample-application/samples/sample18.cs?highlight=4-5)]

<a id="run-in-vs"></a>
## <a name="how-to-run-the-app-from-visual-studio-on-your-local-computer"></a><span data-ttu-id="65d1d-240">Wie Sie die app in Visual Studio auf Ihrem lokalen Computer ausführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-240">How to run the app from Visual Studio on your local computer</span></span>

<span data-ttu-id="65d1d-241">Es gibt zwei Möglichkeiten zum Ausführen der app zu beheben:</span><span class="sxs-lookup"><span data-stu-id="65d1d-241">There are two ways to run the Fix It app:</span></span>

- <span data-ttu-id="65d1d-242">Führen Sie die Basis-Anwendung, die neue Aufgaben direkt in der SQL-Datenbank schreibt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-242">Run the base application that writes new tasks directly to the SQL database.</span></span>
- <span data-ttu-id="65d1d-243">Führen Sie die Anwendung mithilfe einer Warteschlange und einem Back-End-Dienst Tasks erstellen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-243">Run the application using a queue plus a backend service to create tasks.</span></span> <span data-ttu-id="65d1d-244">Muster der Warteschlange finden Sie im Kapitel [Warteschlange-orientierte Arbeit Muster](queue-centric-work-pattern.md).</span><span class="sxs-lookup"><span data-stu-id="65d1d-244">The queue pattern is described in the chapter [Queue-Centric Work Pattern](queue-centric-work-pattern.md).</span></span>

<a id="runbase"></a>
### <a name="run-the-base-application"></a><span data-ttu-id="65d1d-245">Führen Sie die grundlegende Anwendung</span><span class="sxs-lookup"><span data-stu-id="65d1d-245">Run the base application</span></span>

1. <span data-ttu-id="65d1d-246">Installieren Sie [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017).</span><span class="sxs-lookup"><span data-stu-id="65d1d-246">Install [Visual Studio 2017](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017).</span></span>
2. <span data-ttu-id="65d1d-247">Installieren Sie die [Azure SDK für .NET für Visual Studio](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="65d1d-247">Install the [Azure SDK for .NET for Visual Studio](https://azure.microsoft.com/downloads/).</span></span>
3. <span data-ttu-id="65d1d-248">Laden Sie die ZIP-Datei aus dem [MSDN Code Gallery](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4).</span><span class="sxs-lookup"><span data-stu-id="65d1d-248">Download the .zip file from the [MSDN Code Gallery](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4).</span></span>
4. <span data-ttu-id="65d1d-249">Mit der rechten Maustaste in der ZIP-Datei im Datei-Explorer klicken Sie auf Eigenschaften, und klicken Sie im Fenster Eigenschaften auf zulassen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-249">In File Explorer, right-click the .zip file and click Properties, then in the Properties window click Unblock.</span></span>
5. <span data-ttu-id="65d1d-250">Entzippen Sie die Datei aus.</span><span class="sxs-lookup"><span data-stu-id="65d1d-250">Unzip the file.</span></span>
6. <span data-ttu-id="65d1d-251">Doppelklicken Sie auf der SLN-Datei, um Visual Studio zu starten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-251">Double-click the .sln file to launch Visual Studio.</span></span>
7. <span data-ttu-id="65d1d-252">Aus der **Tools** Menü klicken Sie auf **NuGet Paket-Manager**, dann **Paket-Manager Konsole**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-252">From the **Tools** menu, click **NuGet Package Manager**, then **Package Manager Console**.</span></span>
8. <span data-ttu-id="65d1d-253">Klicken Sie in der Paket-Manager-Konsole (PMC) auf wiederherstellen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-253">In the Package Manager Console (PMC), click Restore.</span></span>
9. <span data-ttu-id="65d1d-254">Beenden Sie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="65d1d-254">Exit Visual Studio.</span></span>
10. <span data-ttu-id="65d1d-255">Starten Sie den [Azure-Speicheremulator](/azure/storage/common/storage-use-emulator).</span><span class="sxs-lookup"><span data-stu-id="65d1d-255">Start the [Azure storage emulator](/azure/storage/common/storage-use-emulator).</span></span>
11. <span data-ttu-id="65d1d-256">Visual Studio neu starten, die Projektmappe öffnen Sie im vorherigen Schritt geschlossen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-256">Restart Visual Studio, opening the solution file you closed in the previous step.</span></span>
12. <span data-ttu-id="65d1d-257">Stellen Sie sicher, dass das FixIt-Projekt als Startprojekt festgelegt ist, und drücken Sie STRG + F5, um das Projekt auszuführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-257">Make sure the FixIt project is set as the startup project, and then press CTRL+F5 to run the project.</span></span>

<a id="queueslocal"></a>
### <a name="run-the-application-with-queue-processing"></a><span data-ttu-id="65d1d-258">Führen Sie die Anwendung mit der Verarbeitung der Warteschlange</span><span class="sxs-lookup"><span data-stu-id="65d1d-258">Run the application with queue processing</span></span>

1. <span data-ttu-id="65d1d-259">Befolgen Sie die Anweisungen für [führen Sie die grundlegende Anwendung](#runbase), und klicken Sie dann den Browser schließen, und schließen Sie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="65d1d-259">Follow the directions for [Run the base application](#runbase), and then close the browser and close Visual Studio.</span></span>
2. <span data-ttu-id="65d1d-260">Starten Sie Visual Studio mit Administratorrechten aus.</span><span class="sxs-lookup"><span data-stu-id="65d1d-260">Start Visual Studio with administrator privileges.</span></span> <span data-ttu-id="65d1d-261">(Verwenden Sie Azure-Serveremulator und, die Administratorrechte erforderlich.)</span><span class="sxs-lookup"><span data-stu-id="65d1d-261">(You'll be using the Azure compute emulator, and that requires administrator privileges.)</span></span>
3. <span data-ttu-id="65d1d-262">In der Anwendung *"Web.config"* Datei die *MyFixIt* Projekt (das Webprojekt), ändern Sie den Wert der `appSettings/UseQueues` auf "True":</span><span class="sxs-lookup"><span data-stu-id="65d1d-262">In the application *Web.config* file in the *MyFixIt* project (the web project), change the value of `appSettings/UseQueues` to "true":</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample19.cmd?highlight=3)]
4. <span data-ttu-id="65d1d-263">Wenn die [Azure-Speicheremulator](https://msdn.microsoft.com/library/windowsazure/hh403989.aspx) ist nicht immer noch ausgeführt, starten Sie ihn erneut.</span><span class="sxs-lookup"><span data-stu-id="65d1d-263">If the [Azure storage emulator](https://msdn.microsoft.com/library/windowsazure/hh403989.aspx) isn't still running, start it again.</span></span>
5. <span data-ttu-id="65d1d-264">Das Webprojekt für die FixIt und das Projekt MyFixItCloudService werden gleichzeitig ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-264">Run the FixIt web project and the MyFixItCloudService project simultaneously.</span></span>

    <span data-ttu-id="65d1d-265">Mithilfe von Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="65d1d-265">Using Visual Studio:</span></span>

   1. <span data-ttu-id="65d1d-266">Drücken Sie **F5** das FixIt-Projekt ausführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-266">Press **F5** to run the FixIt project.</span></span>
   2. <span data-ttu-id="65d1d-267">In **Projektmappen-Explorer**mit der rechten Maustaste auf das MyFixItCloudService-Projekt, und klicken Sie dann auf **Debuggen** > **neue Instanz starten**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-267">In **Solution Explorer**, right-click the MyFixItCloudService project, and then click **Debug** > **Start New Instance**.</span></span>

    <span data-ttu-id="65d1d-268">Verwenden von Visual Studio 2013 Express für Web:</span><span class="sxs-lookup"><span data-stu-id="65d1d-268">Using Visual Studio 2013 Express for Web:</span></span>

   3. <span data-ttu-id="65d1d-269">Klicken Sie im Projektmappen-Explorer mit der rechten Maustaste der FixIt-Projektmappe, und wählen **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-269">In Solution Explorer, right-click the FixIt solution and select **Properties**.</span></span>
   4. <span data-ttu-id="65d1d-270">Wählen Sie **mehrere Startprojekte**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-270">Select **Multiple Startup Projects**.</span></span>
   5. <span data-ttu-id="65d1d-271">In der **Aktion** wählen Sie die Dropdownliste unter MyFixIt und MyFixItCloudService, **starten**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-271">In the **Action** dropdown list under MyFixIt and MyFixItCloudService, select **Start**.</span></span>
   6. <span data-ttu-id="65d1d-272">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-272">Click **OK**.</span></span>
   7. <span data-ttu-id="65d1d-273">Drücken Sie **F5** um beide Projekte auszuführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-273">Press **F5** to run both projects.</span></span>

      <span data-ttu-id="65d1d-274">Wenn Sie das Projekt MyFixItCloudService ausführen, startet Visual Studio Azure-Serveremulator.</span><span class="sxs-lookup"><span data-stu-id="65d1d-274">When you run the MyFixItCloudService project, Visual Studio starts the Azure compute emulator.</span></span> <span data-ttu-id="65d1d-275">Abhängig von Ihrer Firewallkonfiguration müssen Sie den Emulator über die Firewall zulassen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-275">Depending on your firewall configuration, you might need to allow the emulator through the firewall.</span></span>

<a id="deploybase"></a>
## <a name="how-to-deploy-the-base-app-to-azure-app-service-web-apps-by-using-the-windows-powershell-scripts"></a><span data-ttu-id="65d1d-276">Die Basis-app in Azure App Service Web Apps bereitstellen, mithilfe der Windows PowerShell-Skripts</span><span class="sxs-lookup"><span data-stu-id="65d1d-276">How to deploy the base app to Azure App Service Web Apps by using the Windows PowerShell scripts</span></span>

<span data-ttu-id="65d1d-277">Zur Veranschaulichung der [automatisieren alles](automate-everything.md) der Fix It-app-Muster mit Skripts, die eine Umgebung in Azure einrichten und Bereitstellen des Projekts in der neuen Umgebung angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-277">To illustrate the [Automate Everything](automate-everything.md) pattern, the Fix It app is supplied with scripts that set up an environment in Azure and deploy the project to the new environment.</span></span> <span data-ttu-id="65d1d-278">Die folgenden Anweisungen wird erläutert, wie die Skripts verwenden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-278">The following instructions explain how to use the scripts.</span></span>

<span data-ttu-id="65d1d-279">Wenn Sie in Azure ausgeführt werden, ohne die Verwendung von Warteschlangen, und Sie die Änderungen lokal mit Warteschlangen, stellen Sie sicher, dass Sie wieder auf "false", bevor Sie mit den folgenden Anweisungen fortfahren den UseQueues AppSetting-Wert festgelegt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-279">If you want to run in Azure without using queues, and you made the changes to run locally with queues, make sure you set the UseQueues appSetting value back to false before proceeding with the following instructions.</span></span>

<span data-ttu-id="65d1d-280">Diesen Anweisungen wird vorausgesetzt, Sie haben bereits heruntergeladen und lokal ausgeführt wird die Fix It-Lösung, und dass Sie eine Azure-Konto oder Azure-Abonnement besitzen, die Sie zum Verwalten von autorisiert sind.</span><span class="sxs-lookup"><span data-stu-id="65d1d-280">These instructions assume you have already downloaded and run the Fix It solution locally, and that you have an Azure account or have an Azure subscription that you are authorized to manage.</span></span>

1. <span data-ttu-id="65d1d-281">Installieren Sie die **Azure PowerShell** Konsole.</span><span class="sxs-lookup"><span data-stu-id="65d1d-281">Install the **Azure PowerShell** console.</span></span> <span data-ttu-id="65d1d-282">Anweisungen hierzu finden Sie unter [installieren und Konfigurieren von Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.3.1).</span><span class="sxs-lookup"><span data-stu-id="65d1d-282">For instructions, see [How to install and configure Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.3.1).</span></span>

    <span data-ttu-id="65d1d-283">Diese benutzerdefinierte Konsole ist für die Arbeit mit Ihrem Azure-Abonnement konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="65d1d-283">This customized console is configured to work with your Azure subscription.</span></span> <span data-ttu-id="65d1d-284">Das Azure-Modul installiert ist, der *Programmdateien* Directory und wird automatisch bei jeder Verwendung der Azure PowerShell-Konsole importiert.</span><span class="sxs-lookup"><span data-stu-id="65d1d-284">The Azure module is installed in the *Program Files* directory and is automatically imported on every use of the Azure PowerShell console.</span></span>

    <span data-ttu-id="65d1d-285">Wenn Sie bevorzugt arbeiten in einem anderen Host-Programm, z. B. Windows PowerShell ISE, müssen Sie verwenden die [Import-Module](https://go.microsoft.com/fwlink/?LinkID=141553) Cmdlet, um das Azure-Modul zu importieren, oder verwenden Sie einen Befehl im Azure-Modul zum Auslösen der automatische Import des Moduls.</span><span class="sxs-lookup"><span data-stu-id="65d1d-285">If you prefer to work in a different host program, such as Windows PowerShell ISE, be sure to use the [Import-Module](https://go.microsoft.com/fwlink/?LinkID=141553) cmdlet to import the Azure module or use a command in the Azure module to trigger automatic importing of the module.</span></span>
2. <span data-ttu-id="65d1d-286">Starten Sie Azure PowerShell mit der **als Administrator ausführen** Option.</span><span class="sxs-lookup"><span data-stu-id="65d1d-286">Start Azure PowerShell with the **Run as administrator** option.</span></span>
3. <span data-ttu-id="65d1d-287">Führen Sie die [Set-ExecutionPolicy](https://go.microsoft.com/fwlink/p/?linkid=293941) Cmdlet, um die Azure PowerShell-Ausführungsrichtlinie auf `RemoteSigned`.</span><span class="sxs-lookup"><span data-stu-id="65d1d-287">Run the [Set-ExecutionPolicy](https://go.microsoft.com/fwlink/p/?linkid=293941) cmdlet to set the Azure PowerShell execution policy to `RemoteSigned`.</span></span> <span data-ttu-id="65d1d-288">Geben Sie **Y** (für Ja) um die Änderung der Richtlinie abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-288">Enter **Y** (for Yes) to complete the policy change.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample20.cmd)]

    <span data-ttu-id="65d1d-289">Mit dieser Einstellung können Sie lokale Skripts ausführen, die nicht digital signiert.</span><span class="sxs-lookup"><span data-stu-id="65d1d-289">This setting enables you to run local scripts that aren't digitally signed.</span></span> <span data-ttu-id="65d1d-290">(Sie können auch die Ausführungsrichtlinie festlegen, um `Unrestricted`, das würde entfällt die Notwendigkeit der zulassen-Schritt später noch Mal, aber dies wird nicht empfohlen aus Sicherheitsgründen.)</span><span class="sxs-lookup"><span data-stu-id="65d1d-290">(You can also set the execution policy to `Unrestricted`, which would eliminate the need for the unblock step later, but this is not recommended for security reasons.)</span></span>
4. <span data-ttu-id="65d1d-291">Führen Sie die `Add-AzureAccount` -Cmdlet zum Einrichten von PowerShell mit den Anmeldeinformationen für Ihr Konto.</span><span class="sxs-lookup"><span data-stu-id="65d1d-291">Run the `Add-AzureAccount` cmdlet to set up PowerShell with credentials for your account.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample21.cmd)]

    <span data-ttu-id="65d1d-292">Diese Anmeldeinformationen laufen nach einiger Zeit ab und muss erneut ausgeführt werden. die `Add-AzureAccount` Cmdlet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-292">These credentials expire after a period of time and you have to re-run the `Add-AzureAccount` cmdlet.</span></span> <span data-ttu-id="65d1d-293">Während dieses e-Book geschrieben wird, beträgt das Zeitlimit, bevor die Anmeldeinformationen ablaufen 12 Stunden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-293">As this e-book is being written, the time limit before credentials expire is 12 hours.</span></span>
5. <span data-ttu-id="65d1d-294">Wenn Sie mehrere Abonnements verfügen, verwenden Sie das Select-AzureSubscription-Cmdlet, das Abonnement angeben, in die Test-Umgebung erstellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="65d1d-294">If you have multiple subscriptions, use the Select-AzureSubscription cmdlet to specify the subscription you want to create the test environment in.</span></span>
6. <span data-ttu-id="65d1d-295">Importieren Sie ein Verwaltungszertifikat für das gleiche Azure-Abonnement mithilfe der `Get-AzurePublishSettingsFile` und `Import-AzurePublishSettingsFile` Cmdlets.</span><span class="sxs-lookup"><span data-stu-id="65d1d-295">Import a management certificate for the same Azure subscription by using the `Get-AzurePublishSettingsFile` and `Import-AzurePublishSettingsFile` cmdlets.</span></span> <span data-ttu-id="65d1d-296">Die erste dieser Cmdlets eine Zertifikatsdatei heruntergeladen und in der zweiten Geben Sie den Speicherort der Datei, um es zu importieren.</span><span class="sxs-lookup"><span data-stu-id="65d1d-296">The first of these cmdlets downloads a certificate file, and in the second one you specify the location of that file in order to import it.</span></span> > [!IMPORTANT]
   > <span data-ttu-id="65d1d-297">Behalten Sie die heruntergeladene Datei an einem sicheren Ort oder löschen Sie, wenn Sie damit fertig sind, da es sich um ein Zertifikat enthält, die zum Verwalten Ihrer Azure-Dienste verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="65d1d-297">Keep the downloaded file in a safe location or delete it when you're done with it, because it contains a certificate that can be used to manage your Azure services.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample22.cmd)]

    <span data-ttu-id="65d1d-298">Das Zertifikat wird verwendet, für einen REST-API-Aufruf, der dem Entwicklungscomputer IP-Adresse erkennt, um eine Firewallregel auf dem SQL-Datenbank-Server festlegen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-298">The certificate is used for a REST API call that detects the development machine's IP address in order to set a firewall rule on the SQL Database server.</span></span>
7. <span data-ttu-id="65d1d-299">Führen Sie die [Set-Location](https://go.microsoft.com/fwlink/p/?linkid=293912) Cmdlet (Aliase werden `cd`, `chdir`, und `sl`), navigieren zu dem Verzeichnis, die die Skripts enthält.</span><span class="sxs-lookup"><span data-stu-id="65d1d-299">Run the [Set-Location](https://go.microsoft.com/fwlink/p/?linkid=293912) cmdlet (aliases are `cd`, `chdir`, and `sl`) to navigate to the directory that contains the scripts.</span></span> <span data-ttu-id="65d1d-300">(sie sind im Verzeichnis der *Automation* im Ordner "der Fix It-Lösung".) Setzen Sie den Pfad in Anführungszeichen ein, wenn die Namen der Verzeichnisse Leerzeichen enthalten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-300">(They're located in the *Automation* folder in the Fix It solution folder.) Put the path in quotes if any of the directory names contain spaces.</span></span> <span data-ttu-id="65d1d-301">Um beispielsweise zu navigieren die `c:\Sample Apps\FixIt\Automation` Directory könnten Sie den folgenden Befehl eingeben:</span><span class="sxs-lookup"><span data-stu-id="65d1d-301">For example, to navigate to the `c:\Sample Apps\FixIt\Automation` directory you could enter the following command:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample23.cmd)]
8. <span data-ttu-id="65d1d-302">Um Windows PowerShell zum Ausführen dieser Skripts zu ermöglichen, verwenden die [Unblock-File](https://go.microsoft.com/fwlink/p/?linkid=294021) Cmdlet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-302">To allow Windows PowerShell to run these scripts, use the [Unblock-File](https://go.microsoft.com/fwlink/p/?linkid=294021) cmdlet.</span></span> <span data-ttu-id="65d1d-303">(Die Skripts werden blockiert, da sie aus dem Internet heruntergeladen wurden.)</span><span class="sxs-lookup"><span data-stu-id="65d1d-303">(The scripts are blocked because they were downloaded from the Internet.)</span></span>

    > [!WARNING]
    > <span data-ttu-id="65d1d-304">Sicherheit – vor der Ausführung `Unblock-File` auf Skripts oder ausführbare Datei, öffnen Sie die Datei in Editor, überprüfen Sie die Befehle und stellen Sie sicher, dass sie keine bösartigen Code enthalten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-304">Security - Before running `Unblock-File` on any script or executable file, open the file in Notepad, examine the commands, and verify that they do not contain any malicious code.</span></span>

    <span data-ttu-id="65d1d-305">Beispielsweise der folgende Befehl führt die `Unblock-File` -Cmdlet für alle Skripts im aktuellen Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="65d1d-305">For example, the following command runs the `Unblock-File` cmdlet on all scripts in the current directory.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample24.cmd)]
9. <span data-ttu-id="65d1d-306">Klicken Sie zum Erstellen der Web-app für die Basis (keine Warteschlangen verarbeiten) beheben Sie app, führen Sie das Skript zum Erstellen der Umgebung.</span><span class="sxs-lookup"><span data-stu-id="65d1d-306">To create the web app for the base (no queues processing) Fix It app, run the environment creation script.</span></span>

    <span data-ttu-id="65d1d-307">Die erforderlichen `Name` Parameter gibt den Namen der Datenbank und wird auch verwendet werden, für das Speicherkonto, das das Skript erstellt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-307">The required `Name` parameter specifies the name of the database and is also used for the storage account that the script creates.</span></span> <span data-ttu-id="65d1d-308">Der Name muss innerhalb der Domäne azurewebsites.NET global eindeutig sein.</span><span class="sxs-lookup"><span data-stu-id="65d1d-308">The name must be globally unique within the azurewebsites.net domain.</span></span> <span data-ttu-id="65d1d-309">Wenn Sie einen Namen angeben, die nicht eindeutig ist, wie z. B. Fixit oder Test (oder auch wie im Beispiel Fixitdemo) ist die `New-AzureWebsite` tritt ein interner Fehler, die einen Konflikt meldet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-309">If you specify a name that is not unique, like Fixit or Test (or even as in the example, fixitdemo), the `New-AzureWebsite` cmdlet fails with an Internal Error that reports a conflict.</span></span> <span data-ttu-id="65d1d-310">Das Skript konvertiert den Namen in Kleinbuchstaben zur Einhaltung der Anforderungen an die für die Web-apps, Speicherkonten und Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="65d1d-310">The script converts the name to all lower-case to comply with name requirements for web apps, storage accounts, and databases.</span></span>

    <span data-ttu-id="65d1d-311">Die erforderlichen `SqlDatabasePassword` Parameter gibt das Kennwort für das Administratorkonto ein, die für SQL-Datenbank erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="65d1d-311">The required `SqlDatabasePassword` parameter specifies the password for the admin account that will be created for SQL Database.</span></span> <span data-ttu-id="65d1d-312">Keine XML-Sonderzeichen im Kennwort enthalten (&amp; &lt; &gt; ;).</span><span class="sxs-lookup"><span data-stu-id="65d1d-312">Don't include special XML characters in the password (&amp; &lt; &gt; ;).</span></span> <span data-ttu-id="65d1d-313">Dies ist eine Einschränkung der Art und Weise, in die Skripts geschrieben wurden, nicht um eine Einschränkung von Azure.</span><span class="sxs-lookup"><span data-stu-id="65d1d-313">This is a limitation of the way the scripts were written, not a limitation of Azure.</span></span>

    <span data-ttu-id="65d1d-314">Wenn Sie mit dem Namen "Fixitdemo" Web-app erstellen und eine SQL Server-Administratorkennwort der "Passw0rd1" verwenden möchten, können Sie z. B. den folgenden Befehl eingeben:</span><span class="sxs-lookup"><span data-stu-id="65d1d-314">For example, if you want to create a web app named "fixitdemo" and use a SQL Server administrator password of "Passw0rd1", you could enter the following command:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample25.cmd)]

    <span data-ttu-id="65d1d-315">Der Name muss eindeutig sein, in der Domäne azurewebsites.net, und das Kennwort muss die SQL-Datenbank-Anforderungen für die Kennwortrichtlinie zur Komplexität erfüllen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-315">The name must be unique in the azurewebsites.net domain, and the password must meet SQL Database requirements for password complexity.</span></span> <span data-ttu-id="65d1d-316">(Im Beispiel Passw0rd1 erfüllt die Anforderungen.)</span><span class="sxs-lookup"><span data-stu-id="65d1d-316">(The example Passw0rd1 does meet the requirements.)</span></span>

    <span data-ttu-id="65d1d-317">Beachten Sie, der mit der Befehl ". \".</span><span class="sxs-lookup"><span data-stu-id="65d1d-317">Note that the command begins with ".\".</span></span> <span data-ttu-id="65d1d-318">Um zu verhindern, dass böswillige Ausführung von Skripts, müssen Windows PowerShell, dass Sie den vollqualifizierten Pfad zur Skriptdatei angeben, wenn Sie ein Skript ausführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-318">To help prevent malicious execution of scripts, Windows PowerShell requires that you provide the fully qualified path to the script file when you run a script.</span></span> <span data-ttu-id="65d1d-319">Sie können einen Punkt verwenden, um das aktuelle Verzeichnis anzugeben (".\") oder geben Sie den vollqualifizierten Pfad, z.B.:</span><span class="sxs-lookup"><span data-stu-id="65d1d-319">You can use a dot to indicate the current directory (".\") or provide the fully qualified path, such as:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample26.cmd)]

    <span data-ttu-id="65d1d-320">Weitere Informationen zum Skript zur Verwendung der `Get-Help` Cmdlet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-320">For more information about the script, use the `Get-Help` cmdlet.</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample27.cmd)]

    <span data-ttu-id="65d1d-321">Sie können die `Detailed`, `Full`, `Parameters`, und `Examples` Parameter des Cmdlets Get-Help die Hilfe zu filtern, die zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-321">You can use the `Detailed`, `Full`, `Parameters`, and `Examples` parameters of the Get-Help cmdlet to filter the help that is returned.</span></span>

    <span data-ttu-id="65d1d-322">Wenn das Skript ein Fehler auftritt oder Fehler auftreten, z. B. generiert "New-AzureWebsite: Rufen Sie zuerst, Set-AzureSubscription und Select-AzureSubscription"Sie möglicherweise nicht die Konfiguration von Azure PowerShell abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-322">If the script fails or generates errors, such as "New-AzureWebsite : Call Set-AzureSubscription and Select-AzureSubscription first," you might not have completed the configuration of Azure PowerShell.</span></span>

    <span data-ttu-id="65d1d-323">Nachdem das Skript abgeschlossen ist, können Sie im Azure-Verwaltungsportal auf die Ressourcen, die erstellt wurden, finden Sie unter, siehe die [automatisieren alles](automate-everything.md) Kapitel.</span><span class="sxs-lookup"><span data-stu-id="65d1d-323">After the script finishes, you can use the Azure Management Portal to see the resources that were created, as shown in the [Automate Everything](automate-everything.md) chapter.</span></span>
10. <span data-ttu-id="65d1d-324">Verwenden Sie zum Bereitstellen des FixIt-Projekts in die neue Azure-Umgebung die *AzureWebsite.ps1* Skript.</span><span class="sxs-lookup"><span data-stu-id="65d1d-324">To deploy the FixIt project to the new Azure environment, use the *AzureWebsite.ps1* script.</span></span> <span data-ttu-id="65d1d-325">Zum Beispiel:</span><span class="sxs-lookup"><span data-stu-id="65d1d-325">For example:</span></span>

    [!code-console[Main](the-fix-it-sample-application/samples/sample28.cmd)]

    <span data-ttu-id="65d1d-326">Wenn die Bereitstellung abgeschlossen ist, öffnet sich der Browser mit Fix It in Azure ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-326">When deployment is done, the browser opens with Fix It running in Azure.</span></span>

<a id="troubleshooting"></a>
## <a name="troubleshooting-the-windows-powershell-scripts"></a><span data-ttu-id="65d1d-327">Problembehandlung bei der Windows PowerShell-Skripts</span><span class="sxs-lookup"><span data-stu-id="65d1d-327">Troubleshooting the Windows PowerShell scripts</span></span>

<span data-ttu-id="65d1d-328">Die häufigsten Fehler bei der Ausführung dieser Skripts auftreten werden im Zusammenhang mit Berechtigungen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-328">The most common errors encountered when running these scripts are related to permissions.</span></span> <span data-ttu-id="65d1d-329">Stellen Sie sicher, dass `Add-AzureAccount` und `Import-AzurePublishSettingsFile` war erfolgreich, und, die Sie für das gleiche Azure-Abonnement verwendet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-329">Make sure that `Add-AzureAccount` and `Import-AzurePublishSettingsFile` were successful and that you used them for the same Azure subscription.</span></span> <span data-ttu-id="65d1d-330">Auch wenn `Add-AzureAccount` wurde erfolgreich Sie möglicherweise erneut ausführen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-330">Even if `Add-AzureAccount` was successful you might have to run it again.</span></span> <span data-ttu-id="65d1d-331">Die Berechtigungen hinzugefügt, indem `Add-AzureAccount` sind 12 Stunden gültig.</span><span class="sxs-lookup"><span data-stu-id="65d1d-331">The permissions added by `Add-AzureAccount` expire in 12 hours.</span></span>

### <a name="object-reference-not-set-to-an-instance-of-an-object"></a><span data-ttu-id="65d1d-332">Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-332">Object reference not set to an instance of an object.</span></span>

<span data-ttu-id="65d1d-333">Wenn das Skript Fehler zurückgibt, wie z. B. "Objektverweis nicht auf eine Instanz eines Objekts festgelegt" das bedeutet, dass Windows PowerShell ein Objekt an (Dies ist ein null-Verweisausnahme auftreten) Prozess kann nicht gefunden werden, führen Sie die `Add-AzureAccount` Cmdlet, und wiederholen Sie das Skript.</span><span class="sxs-lookup"><span data-stu-id="65d1d-333">If the script returns errors, such as "Object reference not set to an instance of an object," which means that Windows PowerShell can't find an object to process (this is a null reference exception), run the `Add-AzureAccount` cmdlet and try the script again.</span></span>

[!code-console[Main](the-fix-it-sample-application/samples/sample29.cmd)]

### <a name="internalerror-the-server-encountered-an-internal-error"></a><span data-ttu-id="65d1d-334">InternalError: Der Server ist einen internen Fehler aufgetreten.</span><span class="sxs-lookup"><span data-stu-id="65d1d-334">InternalError: The server encountered an internal error.</span></span>

<span data-ttu-id="65d1d-335">Die `New-AzureWebsite` Cmdlet gibt einen internen Fehler zurück, wenn der Zugriff auf der Namen in der Domäne azurewebsites.net nicht eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="65d1d-335">The `New-AzureWebsite` cmdlet returns an internal error when the name is not unique in the azurewebsites.net domain.</span></span> <span data-ttu-id="65d1d-336">Um den Fehler zu beheben, verwenden Sie einen anderen Wert für den Namen in der die Name-Parameter von *New-AzureWebsiteEnv.ps1*.</span><span class="sxs-lookup"><span data-stu-id="65d1d-336">To resolve the error, use a different value for the name, which is in the Name parameter of *New-AzureWebsiteEnv.ps1*.</span></span>

[!code-console[Main](the-fix-it-sample-application/samples/sample30.cmd)]

### <a name="restarting-the-script"></a><span data-ttu-id="65d1d-337">Neustarten des Skripts</span><span class="sxs-lookup"><span data-stu-id="65d1d-337">Restarting the script</span></span>

<span data-ttu-id="65d1d-338">Wenn Sie neu starten müssen die *New-AzureWebsiteEnv.ps1* Skript, da sie Fehler, bevor er die Nachricht "Skript ist abgeschlossen" gedruckt, möchten Sie möglicherweise Ressourcen zu löschen, die vom Skript erstellt wurden, bevor sie beendet.</span><span class="sxs-lookup"><span data-stu-id="65d1d-338">If you need to restart the *New-AzureWebsiteEnv.ps1* script because it failed before it printed the "Script is complete" message, you might want to delete resources that the script created before it stopped.</span></span> <span data-ttu-id="65d1d-339">Wenn das Skript bereits ContosoFixItDemo Web-app, und Sie das Skript erneut ausführen, mit dem gleichen Namen erstellt, wird z. B. das Skript fehl, da der Name verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="65d1d-339">For example, if the script already created the ContosoFixItDemo web app and you run the script again with the same name, the script will fail because the name is in use.</span></span>

<span data-ttu-id="65d1d-340">Um zu bestimmen, welche Ressourcen vom Skript erstellt wurden, bevor er angehalten wird, verwenden Sie die folgenden Cmdlets:</span><span class="sxs-lookup"><span data-stu-id="65d1d-340">To determine which resources the script created before it stopped, use the following cmdlets:</span></span>

- `Get-AzureWebsite`
- `Get-AzureSqlDatabaseServer`
- <span data-ttu-id="65d1d-341">`Get-AzureSqlDatabase`: Um dieses Cmdlet auszuführen, übergeben Sie den Namen der Datenbank-Server an `Get-AzureSqlDatabase`:   `Get-AzureSqlDatabaseServer | Get-AzureSqlDatabase.`</span><span class="sxs-lookup"><span data-stu-id="65d1d-341">`Get-AzureSqlDatabase`: To run this cmdlet, pipe the database server name to `Get-AzureSqlDatabase`:   `Get-AzureSqlDatabaseServer | Get-AzureSqlDatabase.`</span></span>

<span data-ttu-id="65d1d-342">Um diese Ressourcen zu löschen, verwenden Sie die folgenden Befehle aus.</span><span class="sxs-lookup"><span data-stu-id="65d1d-342">To delete these resources, use the following commands.</span></span> <span data-ttu-id="65d1d-343">Beachten Sie, wenn Sie den Datenbankserver löschen, werden automatisch mit dem Server zugeordneten Datenbanken gelöscht.</span><span class="sxs-lookup"><span data-stu-id="65d1d-343">Note that if you delete the database server, you automatically delete the databases associated with the server.</span></span>

- `Get-AzureWebsite -Name <WebsiteName> | Remove-AzureWebsite`
- `Get-AzureSqlDatabase -Name <DatabaseName> -ServerName <DatabaseServerName> | Remove-SqlAzureDatabase`
- `Get-AzureSqlDatabaseServer | Remove-AzureSqlDatabaseServer`

<a id="deployqueues"></a>
## <a name="how-to-deploy-the-app-with-queue-processing-to-azure-app-service-web-apps-and-an-azure-cloud-service"></a><span data-ttu-id="65d1d-344">Gewusst wie: Bereitstellen der app mit einer Warteschlange, die Verarbeitung von Azure App Service-Web-Apps und Azure-Clouddienst</span><span class="sxs-lookup"><span data-stu-id="65d1d-344">How to deploy the app with queue processing to Azure App Service Web Apps and an Azure Cloud Service</span></span>

<span data-ttu-id="65d1d-345">Um Warteschlangen zu aktivieren, stellen Sie die folgende Änderung in der Datei MyFixIt\Web.config aus.</span><span class="sxs-lookup"><span data-stu-id="65d1d-345">To enable queues, make the following change in the MyFixIt\Web.config file.</span></span> <span data-ttu-id="65d1d-346">Klicken Sie unter `appSettings`, ändern Sie den Wert der `UseQueues` auf "True":</span><span class="sxs-lookup"><span data-stu-id="65d1d-346">Under `appSettings`, change the value of `UseQueues` to "true":</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample31.xml)]

<span data-ttu-id="65d1d-347">Klicken Sie dann die MVC-Anwendung in eine Web-app in Azure App Service bereitstellen, wie beschrieben [früheren](#deploybase).</span><span class="sxs-lookup"><span data-stu-id="65d1d-347">Then deploy the MVC application to an web app in Azure App Service, as described [earlier](#deploybase).</span></span>

<span data-ttu-id="65d1d-348">Als Nächstes erstellen Sie einen neuen Azure-Cloud-Dienst.</span><span class="sxs-lookup"><span data-stu-id="65d1d-348">Next, create a new Azure cloud service.</span></span> <span data-ttu-id="65d1d-349">Die Skripts enthalten, mit der Fix It-app erstellen und Sie keine Cloud-Diensts bereitstellen, damit Sie für dieses Azure-Portal verwenden müssen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-349">The scripts included with the Fix It app do not create or deploy the cloud service, so you must use Azure portal for this.</span></span> <span data-ttu-id="65d1d-350">Klicken Sie im Portal auf **neu** -- **Compute** – **Clouddienst** -- **Schnellerfassung**, und geben Sie dann eine URL und einen Speicherort im Rechenzentrum.</span><span class="sxs-lookup"><span data-stu-id="65d1d-350">In the portal, click **New** -- **Compute** – **Cloud Service** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="65d1d-351">Verwenden Sie das Rechenzentrum, in dem Sie die Web-app bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="65d1d-351">Use the same data center where you deployed the web app.</span></span>

![](the-fix-it-sample-application/_static/image1.png)

<span data-ttu-id="65d1d-352">Bevor Sie den Cloud-Dienst bereitstellen können, müssen Sie einige der Konfigurationsdateien zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="65d1d-352">Before you can deploy the cloud service, you need to update some of the configuration files.</span></span>

<span data-ttu-id="65d1d-353">In MyFixIt.WorkerRoler\app.config unter `connectionStrings`, ersetzen Sie den Wert der `appdb` Verbindungszeichenfolge durch die tatsächliche Verbindungszeichenfolge für die SQL-Datenbank.</span><span class="sxs-lookup"><span data-stu-id="65d1d-353">In MyFixIt.WorkerRoler\app.config, under `connectionStrings`, replace the value of the `appdb` connection string with the actual connection string for the SQL Database.</span></span> <span data-ttu-id="65d1d-354">Sie können die Verbindungszeichenfolge aus dem Portal abrufen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-354">You can get the connection string from the portal.</span></span> <span data-ttu-id="65d1d-355">Klicken Sie im Portal auf **SQL-Datenbanken** - **Appdb** - **Ansicht SQL-Datenbank-Verbindungszeichenfolgen für ADO .NET, ODBC, PHP und JDBC**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-355">In the portal, click **SQL Databases** - **appdb** - **View SQL Database connection strings for ADO .Net, ODBC, PHP, and JDBC**.</span></span> <span data-ttu-id="65d1d-356">Kopieren Sie die ADO.NET-Verbindungszeichenfolge aus, und fügen Sie den Wert in der Datei "App.config".</span><span class="sxs-lookup"><span data-stu-id="65d1d-356">Copy the ADO.NET connection string and paste the value into the app.config file.</span></span> <span data-ttu-id="65d1d-357">Ersetzen Sie "{Ihr\_Kennwort\_hier}" mit dem Datenbankkennwort.</span><span class="sxs-lookup"><span data-stu-id="65d1d-357">Replace "{your\_password\_here}" with your database password.</span></span> <span data-ttu-id="65d1d-358">(Wenn Sie die Skripts verwendet, um die MVC-app bereitzustellen, das Datenbankkennwort angegebene die `SqlDatabasePassword` Skript Parameter.)</span><span class="sxs-lookup"><span data-stu-id="65d1d-358">(Assuming you used the scripts to deploy the MVC app, you specified the database password in the `SqlDatabasePassword` script parameter.)</span></span>

<span data-ttu-id="65d1d-359">Das Ergebnis sollte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="65d1d-359">The result should look like the following:</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample32.xml)]

<span data-ttu-id="65d1d-360">In der gleichen Datei MyFixIt.WorkerRoler\app.config unter `appSettings`, ersetzen Sie die beiden Platzhalterwerte für die Azure Storage-Konto.</span><span class="sxs-lookup"><span data-stu-id="65d1d-360">In the same MyFixIt.WorkerRoler\app.config file, under `appSettings`, replace the two placeholder values for the Azure storage account.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample33.xml?highlight=2-3)]

<span data-ttu-id="65d1d-361">Sie können den Zugriffsschlüssel aus dem Portal abrufen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-361">You can get the access key from the portal.</span></span> <span data-ttu-id="65d1d-362">Finden Sie unter [Gewusst wie: Verwalten von Speicherkonten](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account).</span><span class="sxs-lookup"><span data-stu-id="65d1d-362">See [How To Manage Storage Accounts](https://docs.microsoft.com/azure/storage/common/storage-create-storage-account).</span></span>

<span data-ttu-id="65d1d-363">Ersetzen Sie in MyFixItCloudService\ServiceConfiguration.Cloud.cscfg die gleichen zwei Platzhalter-Werte für die Azure Storage-Konto aus.</span><span class="sxs-lookup"><span data-stu-id="65d1d-363">In MyFixItCloudService\ServiceConfiguration.Cloud.cscfg, replace the same two placeholders values for the Azure storage account.</span></span>

[!code-xml[Main](the-fix-it-sample-application/samples/sample34.xml?highlight=3)]

<span data-ttu-id="65d1d-364">Jetzt können Sie den Cloud-Dienst bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="65d1d-364">Now you are ready to deploy the cloud service.</span></span> <span data-ttu-id="65d1d-365">Klicken Sie im Projektmappen-Explorer mit der rechten Maustaste in des MyFixItCloudService-Projekts, und wählen **veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="65d1d-365">In Solution Explore, right-click the MyFixItCloudService project and select **Publish**.</span></span> <span data-ttu-id="65d1d-366">Weitere Informationen finden Sie unter "[Bereitstellen der Anwendung in Azure](https://www.windowsazure.com/develop/net/tutorials/multi-tier-web-site/2-download-and-run/#deployAz)", d.h. in Teil 2 des [in diesem Tutorial](https://code.msdn.microsoft.com/Windows-Azure-Multi-Tier-eadceb36).</span><span class="sxs-lookup"><span data-stu-id="65d1d-366">For more information, see "[Deploy the Application to Azure](https://www.windowsazure.com/develop/net/tutorials/multi-tier-web-site/2-download-and-run/#deployAz)", which is in part 2 of [this tutorial](https://code.msdn.microsoft.com/Windows-Azure-Multi-Tier-eadceb36).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="65d1d-367">Vorherige</span><span class="sxs-lookup"><span data-stu-id="65d1d-367">Previous</span></span>](more-patterns-and-guidance.md)
