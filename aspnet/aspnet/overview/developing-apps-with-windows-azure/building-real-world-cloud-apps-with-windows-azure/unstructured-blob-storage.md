---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
title: Unstrukturierte BLOB Storage (entwickeln realer Cloud-apps mit Azure) | Microsoft-Dokumentation
author: MikeWasson
description: Die Building Real World Cloud Apps mit Azure-e-Book basiert auf einer Präsentation von Scott Guthrie entwickelt wurde. Es wird erläutert, 13 Muster und Vorgehensweisen, die er können...
ms.author: riande
ms.date: 03/30/2015
ms.assetid: 9f05ccb1-2004-4661-ad8b-c370e6c09c8e
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
msc.type: authoredcontent
ms.openlocfilehash: f48b2be755b84dff9b2672bd348c73107602c6dd
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/19/2020
ms.locfileid: "77456790"
---
# <a name="unstructured-blob-storage-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="b9e99-104">Unstrukturierte BLOB Storage (entwickeln realer Cloud-apps mit Azure)</span><span class="sxs-lookup"><span data-stu-id="b9e99-104">Unstructured Blob Storage (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="b9e99-105">von [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="b9e99-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson](https://twitter.com/RickAndMSFT), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="b9e99-106">[Herunterladen des IT-Projekts](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) oder [herunterladen des E-Books](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="b9e99-106">[Download Fix It Project](https://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](https://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="b9e99-107">Das e-Book zur Entwicklung **realer Cloud-apps mit Azure** basiert auf einer Präsentation von Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="b9e99-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="b9e99-108">Es wird erläutert, 13 Muster und Methoden, die Ihnen helfen können, werden erfolgreiche Entwicklung von Web-apps für die Cloud.</span><span class="sxs-lookup"><span data-stu-id="b9e99-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="b9e99-109">Informationen zum e-Book finden Sie [im ersten Kapitel](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="b9e99-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="b9e99-110">Im vorherigen Kapitel haben wir uns mit den Partitionierungs Schemas beschäftigt und erläutert, wie die Korrektur der IT-App Images im Azure Storage BLOB Dienst und andere Aufgaben Daten in Azure SQL-Datenbank speichert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-110">In the previous chapter we looked at partitioning schemes and explained how the Fix It app stores images in the Azure Storage Blob service, and other task data in Azure SQL Database.</span></span> <span data-ttu-id="b9e99-111">In diesem Kapitel wird der BLOB-Dienst ausführlicher beschrieben, und es wird gezeigt, wie er in Korrektur von IT-Projekt Code implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="b9e99-111">In this chapter we go deeper into the Blob service and show how it's implemented in Fix It project code.</span></span>

## <a name="what-is-blob-storage"></a><span data-ttu-id="b9e99-112">Was ist Blobspeicher?</span><span class="sxs-lookup"><span data-stu-id="b9e99-112">What is Blob storage?</span></span>

<span data-ttu-id="b9e99-113">Der Azure Storage BLOB-Dienst bietet eine Möglichkeit zum Speichern von Dateien in der Cloud.</span><span class="sxs-lookup"><span data-stu-id="b9e99-113">The Azure Storage Blob service provides a way to store files in the cloud.</span></span> <span data-ttu-id="b9e99-114">Der BLOB-Dienst bietet eine Reihe von Vorteilen gegenüber der Speicherung von Dateien in einem lokalen Netzwerkdatei System:</span><span class="sxs-lookup"><span data-stu-id="b9e99-114">The Blob service has a number of advantages over storing files in a local network file system:</span></span>

- <span data-ttu-id="b9e99-115">Es ist hochgradig skalierbar.</span><span class="sxs-lookup"><span data-stu-id="b9e99-115">It's highly scalable.</span></span> <span data-ttu-id="b9e99-116">In einem einzelnen Speicherkonto können [Hunderte von Terabyte](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx)gespeichert werden, und Sie können über mehrere Speicher Konten verfügen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-116">A single Storage account can store [hundreds of terabytes](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), and you can have multiple Storage accounts.</span></span> <span data-ttu-id="b9e99-117">Einige der größten Azure-Kunden speichern Hunderte von Peer Tabellen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-117">Some of the biggest Azure customers store hundreds of petabytes.</span></span> <span data-ttu-id="b9e99-118">Microsoft SkyDrive verwendet BLOB Storage.</span><span class="sxs-lookup"><span data-stu-id="b9e99-118">Microsoft SkyDrive uses blob storage.</span></span>
- <span data-ttu-id="b9e99-119">Es ist dauerhaft.</span><span class="sxs-lookup"><span data-stu-id="b9e99-119">It's durable.</span></span> <span data-ttu-id="b9e99-120">Alle Dateien, die Sie im BLOB-Dienst speichern, werden automatisch gesichert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-120">Every file you store in the Blob service is automatically backed up.</span></span>
- <span data-ttu-id="b9e99-121">Sie bietet hohe Verfügbarkeit.</span><span class="sxs-lookup"><span data-stu-id="b9e99-121">It provides high availability.</span></span> <span data-ttu-id="b9e99-122">Die [SLA für Speicher verspricht eine](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) Betriebszeit von 99,9% oder 99,99%, je nachdem, welche georedundanz Sie auswählen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-122">The [SLA for Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promises 99.9% or 99.99% uptime, depending on which geo-redundancy option you choose.</span></span>
- <span data-ttu-id="b9e99-123">Dabei handelt es sich um eine Platform-as-a-Service-Funktion (Platform-as-a-Service, PAS) von Azure, was bedeutet, dass Sie nur Dateien speichern und abrufen, nur für die tatsächliche Menge an Speicherplatz bezahlen, die Sie verwenden, und Azure übernimmt automatisch die Einrichtung und Verwaltung aller VMS und Laufwerke, die für die Leistungs.</span><span class="sxs-lookup"><span data-stu-id="b9e99-123">It's a platform-as-a-service (PaaS) feature of Azure, which means you just store and retrieve files, paying only for the actual amount of storage you use, and Azure automatically takes care of setting up and managing all of the VMs and disk drives required for the service.</span></span>
- <span data-ttu-id="b9e99-124">Sie können auf den BLOB-Dienst zugreifen, indem Sie eine Rest-API oder eine Programmiersprachen-API verwenden.</span><span class="sxs-lookup"><span data-stu-id="b9e99-124">You can access the Blob service by using a REST API or by using a programming language API.</span></span> <span data-ttu-id="b9e99-125">Sdert sind für .net, Java, Ruby und andere verfügbar.</span><span class="sxs-lookup"><span data-stu-id="b9e99-125">SDKs are available for .NET, Java, Ruby, and others.</span></span>
- <span data-ttu-id="b9e99-126">Wenn Sie eine Datei im BLOB-Dienst speichern, können Sie Sie auf einfache Weise über das Internet öffentlich verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-126">When you store a file in the Blob service, you can easily make it publicly available over the Internet.</span></span>
- <span data-ttu-id="b9e99-127">Sie können Dateien im BLOB-Dienst schützen, sodass nur autorisierte Benutzer darauf zugreifen können, oder Sie können temporäre Zugriffs Token bereitstellen, die Sie nur für einen begrenzten Zeitraum verfügbar machen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-127">You can secure files in the Blob service so they can accessed only by authorized users, or you can provide temporary access tokens that makes them available to someone only for a limited period of time.</span></span>

<span data-ttu-id="b9e99-128">Jedes Mal, wenn Sie eine APP für Azure entwickeln und viele Daten speichern möchten, die in einer lokalen Umgebung in Dateien (z. b. Bilder, Videos, PDF-Dateien, Kalkulations Tabellen usw.) gespeichert werden, sollten Sie den BLOB-Dienst in Erwägung gezogen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-128">Anytime you're building an app for Azure and you want to store a lot of data that in an on-premises environment would go in files -- such as images, videos, PDFs, spreadsheets, etc. -- consider the Blob service.</span></span>

## <a name="creating-a-storage-account"></a><span data-ttu-id="b9e99-129">Erstellen eines Speicher Kontos</span><span class="sxs-lookup"><span data-stu-id="b9e99-129">Creating a Storage account</span></span>

<span data-ttu-id="b9e99-130">Für den Einstieg in den BLOB-Dienst erstellen Sie ein Speicherkonto in Azure.</span><span class="sxs-lookup"><span data-stu-id="b9e99-130">To get started with the Blob service you create a Storage account in Azure.</span></span> <span data-ttu-id="b9e99-131">Klicken Sie im Portal auf **neu** -- **Data Services** -- **Speicher** -- **schneller**Fassung, und geben Sie dann eine URL und einen Speicherort für den Daten Center ein.</span><span class="sxs-lookup"><span data-stu-id="b9e99-131">In the portal, click **New** -- **Data Services** -- **Storage** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="b9e99-132">Der Speicherort des Rechenzentrums sollte mit Ihrer Web-App identisch sein.</span><span class="sxs-lookup"><span data-stu-id="b9e99-132">The data center location should be the same as your web app.</span></span>

![Erstellen eines Speicherzugriffs](unstructured-blob-storage/_static/image1.png)

<span data-ttu-id="b9e99-134">Sie wählen die primäre Region aus, in der der Inhalt gespeichert werden soll. Wenn Sie die [georeplikationsoption](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) auswählen, erstellt Azure Replikate aller Ihrer Daten in einem anderen Rechenzentrum in einer anderen Region des Landes.</span><span class="sxs-lookup"><span data-stu-id="b9e99-134">You pick the primary region where you want to store the content, and if you choose the [geo-replication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure creates replicas of all your data in a different data center in another region of the country.</span></span> <span data-ttu-id="b9e99-135">Wenn Sie z. b. das Rechenzentrum "USA, Westen" auswählen, wird es beim Speichern einer Datei in das Daten Center "USA, Westen" kopiert, aber Azure kopiert es im Hintergrund auch in eines der anderen Rechenzentren in den USA.</span><span class="sxs-lookup"><span data-stu-id="b9e99-135">For example, if you choose the Western US data center, when you store a file it goes to the Western US data center, but in the background Azure also copies it to one of the other US data centers.</span></span> <span data-ttu-id="b9e99-136">Wenn ein Notfall in einer Region des Landes auftritt, sind Ihre Daten immer noch sicher.</span><span class="sxs-lookup"><span data-stu-id="b9e99-136">If a disaster happens in one region of the country, your data is still safe.</span></span>

<span data-ttu-id="b9e99-137">Azure repliziert Daten nicht über Grenzen hinweg: Wenn sich Ihr primärer Standort in der USA befindet, werden die Dateien nur in einer anderen Region in den USA repliziert. Wenn Ihr primärer Standort in Australien ist, werden die Dateien nur in einem anderen Rechenzentrum in Australien repliziert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-137">Azure won't replicate data across geo-political boundaries: if your primary location is in the U.S., your files are only replicated to another region within the U.S.; if your primary location is Australia, your files are only replicated to another data center in Australia.</span></span>

<span data-ttu-id="b9e99-138">Selbstverständlich können Sie auch ein Speicherkonto erstellen, indem Sie wie zuvor gesehen Befehle aus einem Skript ausführen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-138">Of course, you can also create a Storage account by executing commands from a script, as we saw earlier.</span></span> <span data-ttu-id="b9e99-139">Hier ist ein Windows PowerShell-Befehl zum Erstellen eines Speicher Kontos:</span><span class="sxs-lookup"><span data-stu-id="b9e99-139">Here's a Windows PowerShell command to create a Storage account:</span></span>

[!code-powershell[Main](unstructured-blob-storage/samples/sample1.ps1)]

<span data-ttu-id="b9e99-140">Sobald Sie über ein Speicherkonto verfügen, können Sie sofort mit dem Speichern von Dateien im BLOB-Dienst beginnen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-140">Once you have a Storage account, you can immediately start storing files in the Blob service.</span></span>

## <a name="using-blob-storage-in-the-fix-it-app"></a><span data-ttu-id="b9e99-141">Verwenden von BLOB Storage in der Korrektur der IT-App</span><span class="sxs-lookup"><span data-stu-id="b9e99-141">Using Blob storage in the Fix It app</span></span>

<span data-ttu-id="b9e99-142">Die Korrektur der IT-App ermöglicht Ihnen das Hochladen von Fotos.</span><span class="sxs-lookup"><span data-stu-id="b9e99-142">The Fix It app enables you to upload photos.</span></span>

![Erstellen einer Korrektur](unstructured-blob-storage/_static/image2.png)

<span data-ttu-id="b9e99-144">Wenn Sie auf **Create the fxit**klicken, lädt die Anwendung die angegebene Bilddatei hoch und speichert Sie im BLOB-Dienst.</span><span class="sxs-lookup"><span data-stu-id="b9e99-144">When you click **Create the FixIt**, the application uploads the specified image file and stores it in the Blob service.</span></span>

### <a name="set-up-the-blob-container"></a><span data-ttu-id="b9e99-145">Einrichten des BLOB-Containers</span><span class="sxs-lookup"><span data-stu-id="b9e99-145">Set up the Blob container</span></span>

<span data-ttu-id="b9e99-146">Um eine Datei im BLOB-Dienst speichern zu können, benötigen Sie einen *Container* , in dem Sie gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="b9e99-146">In order to store a file in the Blob service you need a *container* to store it in.</span></span> <span data-ttu-id="b9e99-147">Ein BLOB-Dienst Container entspricht einem Dateisystem Ordner.</span><span class="sxs-lookup"><span data-stu-id="b9e99-147">A Blob service container corresponds to a file system folder.</span></span> <span data-ttu-id="b9e99-148">Mit den Umgebungs Erstellungs Skripts, die wir im [Kapitel Automatisieren von alles](automate-everything.md) überprüft haben, wird das Speicherkonto erstellt, aber es wird kein Container erstellt.</span><span class="sxs-lookup"><span data-stu-id="b9e99-148">The environment creation scripts that we reviewed in the [Automate Everything chapter](automate-everything.md) create the Storage account, but they don't create a container.</span></span> <span data-ttu-id="b9e99-149">Der Zweck der `CreateAndConfigure`-Methode der `PhotoService`-Klasse besteht darin, einen Container zu erstellen, wenn er nicht bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="b9e99-149">So the purpose of the `CreateAndConfigure` method of the `PhotoService` class is to create a container if it doesn't already exist.</span></span> <span data-ttu-id="b9e99-150">Diese Methode wird von der `Application_Start`-Methode in " *Global. asax*" aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-150">This method is called from the `Application_Start` method in *Global.asax*.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample2.cs)]

<span data-ttu-id="b9e99-151">Der Speicherkonto Name und der Zugriffsschlüssel werden in der `appSettings`-Sammlung der Datei " *Web. config* " gespeichert, und der Code in der `StorageUtils.StorageAccount`-Methode verwendet diese Werte, um eine Verbindungs Zeichenfolge zu erstellen und eine Verbindung herzustellen:</span><span class="sxs-lookup"><span data-stu-id="b9e99-151">The storage account name and access key are stored in the `appSettings` collection of the *Web.config* file, and code in the `StorageUtils.StorageAccount` method uses those values to build a connection string and establish a connection:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample3.cs)]

<span data-ttu-id="b9e99-152">Die `CreateAndConfigureAsync`-Methode erstellt dann ein-Objekt, das den BLOB-Dienst darstellt, und ein-Objekt, das einen Container (Ordner) mit dem Namen "Images" im BLOB-Dienst darstellt:</span><span class="sxs-lookup"><span data-stu-id="b9e99-152">The `CreateAndConfigureAsync` method then creates an object that represents the Blob service, and an object that represents a container (folder) named "images" in the Blob service:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample4.cs)]

<span data-ttu-id="b9e99-153">Wenn ein Container mit dem Namen "Images" noch nicht vorhanden ist, was wahr ist, wenn Sie die APP zum ersten Mal für ein neues Speicherkonto ausführen, erstellt der Code den Container und legt die Berechtigungen fest, um ihn öffentlich zu machen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-153">If a container named "images" doesn't exist yet -- which will be true the first time you run the app against a new storage account -- the code creates the container and sets permissions to make it public.</span></span> <span data-ttu-id="b9e99-154">(Standardmäßig sind neue BLOB-Container Privat und können nur für Benutzer zugänglich sein, die über die Berechtigung zum Zugreifen auf Ihr Speicherkonto verfügen.)</span><span class="sxs-lookup"><span data-stu-id="b9e99-154">(By default, new blob containers are private and are accessible only to users who have permission to access your storage account.)</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample5.cs)]

### <a name="store-the-uploaded-photo-in-blob-storage"></a><span data-ttu-id="b9e99-155">Speichern des hochgeladenen Fotos im BLOB-Speicher</span><span class="sxs-lookup"><span data-stu-id="b9e99-155">Store the uploaded photo in Blob storage</span></span>

<span data-ttu-id="b9e99-156">Um die Bilddatei hochzuladen und zu speichern, verwendet die APP eine `IPhotoService`-Schnittstelle und eine Implementierung der-Schnittstelle in der `PhotoService`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="b9e99-156">To upload and save the image file, the app uses an `IPhotoService` interface and an implementation of the interface in the `PhotoService` class.</span></span> <span data-ttu-id="b9e99-157">Die *Photoservice.cs* -Datei enthält den gesamten Code in der Fix-it-APP, die mit dem BLOB-Dienst kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-157">The *PhotoService.cs* file contains all of the code in the Fix It app that communicates with the Blob service.</span></span>

<span data-ttu-id="b9e99-158">Die folgende MVC-Controller Methode wird aufgerufen, wenn der Benutzer auf **Create the fxit**klickt.</span><span class="sxs-lookup"><span data-stu-id="b9e99-158">The following MVC controller method is called when the user clicks **Create the FixIt**.</span></span> <span data-ttu-id="b9e99-159">In diesem Code verweist `photoService` auf eine Instanz der `PhotoService`-Klasse, und `fixittask` verweist auf eine Instanz der `FixItTask` Entitäts Klasse, die Daten für eine neue Aufgabe speichert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-159">In this code, `photoService` refers to an instance of the `PhotoService` class, and `fixittask` refers to an instance of the `FixItTask` entity class that stores data for a new task.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample6.cs?highlight=8)]

<span data-ttu-id="b9e99-160">Die `UploadPhotoAsync`-Methode in der `PhotoService`-Klasse speichert die hochgeladene Datei im BLOB-Dienst und gibt eine URL zurück, die auf das neue BLOB verweist.</span><span class="sxs-lookup"><span data-stu-id="b9e99-160">The `UploadPhotoAsync` method in the `PhotoService` class stores the uploaded file in the Blob service and returns a URL that points to the new blob.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample7.cs)]

<span data-ttu-id="b9e99-161">Wie bei der `CreateAndConfigure`-Methode stellt der Code eine Verbindung mit dem Speicherkonto her und erstellt ein Objekt, das den BLOB-Container "Images" darstellt. es wird jedoch davon ausgegangen, dass der Container bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="b9e99-161">As in the `CreateAndConfigure` method, the code connects to the storage account and creates an object that represents the "images" blob container, except here it assumes the container already exists.</span></span>

<span data-ttu-id="b9e99-162">Anschließend wird ein eindeutiger Bezeichner für das hoch zuladende Bild erstellt, indem ein neuer GUID-Wert mit der Dateierweiterung verkettet wird:</span><span class="sxs-lookup"><span data-stu-id="b9e99-162">Then it creates a unique identifier for the image about to be uploaded, by concatenating a new GUID value with the file extension:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample8.cs)]

<span data-ttu-id="b9e99-163">Der Code verwendet dann das blobcontainerobjekt und den neuen eindeutigen Bezeichner zum Erstellen eines BLOB-Objekts, legt ein Attribut für das Objekt fest, das angibt, welche Art von Datei es ist, und verwendet dann das BLOB-Objekt, um die Datei im BLOB-Speicher zu speichern.</span><span class="sxs-lookup"><span data-stu-id="b9e99-163">The code then uses the blob container object and the new unique identifier to create a blob object, sets an attribute on that object indicating what kind of file it is, and then uses the blob object to store the file in blob storage.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample9.cs)]

<span data-ttu-id="b9e99-164">Schließlich wird eine URL abgerufen, die auf das BLOB verweist.</span><span class="sxs-lookup"><span data-stu-id="b9e99-164">Finally, it gets a URL that references the blob.</span></span> <span data-ttu-id="b9e99-165">Diese URL wird in der-Datenbank gespeichert und kann zur Behebung von IT-Webseiten verwendet werden, um das hochgeladene Bild anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-165">This URL will be stored in the database and can be used in Fix It web pages to display the uploaded image.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample10.cs)]

<span data-ttu-id="b9e99-166">Diese URL wird in der Datenbank als eine der Spalten der Tabelle "fixttask" gespeichert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-166">This URL is stored in the database as one of the columns of the FixItTask table.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample11.cs?highlight=10)]

<span data-ttu-id="b9e99-167">Wenn nur die URL in der Datenbank und Images im BLOB-Speicher vorliegen, hält die Korrektur der IT-APP die Datenbank gering, skalierbar und kostengünstig an, während die Images gespeichert werden, wo Speicherkosten günstig sind und Terabyte oder Peer-Tabellen verarbeiten können.</span><span class="sxs-lookup"><span data-stu-id="b9e99-167">With only the URL in the database, and images in Blob storage, the Fix It app keeps the database small, scalable, and inexpensive, while the images are stored where storage is cheap and capable of handling terabytes or petabytes.</span></span> <span data-ttu-id="b9e99-168">Ein Speicherkonto kann Hunderte von Terabyte an Korrektur-Fotos speichern, und Sie zahlen nur für das, was Sie nutzen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-168">One storage account can store hundreds of terabytes of Fix It photos, and you only pay for what you use.</span></span> <span data-ttu-id="b9e99-169">Sie können also mit einer kleinen Zahlung von 9 Cent für das erste Gigabyte beginnen und weitere Abbilder für die pro-GB-Anzahl hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-169">So you can start off small paying 9 cents for the first gigabyte, and add more images for pennies per additional gigabyte.</span></span>

### <a name="display-the-uploaded-file"></a><span data-ttu-id="b9e99-170">Anzeigen der hochgeladenen Datei</span><span class="sxs-lookup"><span data-stu-id="b9e99-170">Display the uploaded file</span></span>

<span data-ttu-id="b9e99-171">Die Korrektur der IT-Anwendung zeigt die hochgeladene Bilddatei an, wenn Details für eine Aufgabe angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="b9e99-171">The Fix It application displays the uploaded image file when it displays details for a task.</span></span>

![Details zur IT-Aufgabe mit Foto korrigieren](unstructured-blob-storage/_static/image3.png)

<span data-ttu-id="b9e99-173">Um das Bild anzuzeigen, muss die gesamte MVC-Ansicht den `PhotoUrl` Wert in den an den Browser gesendeten HTML-Code einschließen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-173">To display the image, all the MVC view has to do is include the `PhotoUrl` value in the HTML sent to the browser.</span></span> <span data-ttu-id="b9e99-174">Der Webserver und die Datenbank verwenden keine Zyklen zum Anzeigen des Bilds, sondern nur einige Bytes für die Bild-URL.</span><span class="sxs-lookup"><span data-stu-id="b9e99-174">The web server and the database are not using cycles to display the image, they are only serving up a few bytes to the image URL.</span></span> <span data-ttu-id="b9e99-175">Im folgenden Razor-Code verweist `Model` auf eine Instanz der `FixItTask` Entitäts Klasse.</span><span class="sxs-lookup"><span data-stu-id="b9e99-175">In the following Razor code, `Model` refers to an instance of the `FixItTask` entity class.</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample12.cshtml?highlight=11)]

<span data-ttu-id="b9e99-176">Wenn Sie sich den HTML-Code der angezeigten Seite ansehen, sehen Sie, dass die URL direkt auf das Bild im BLOB-Speicher zeigt, etwa wie folgt:</span><span class="sxs-lookup"><span data-stu-id="b9e99-176">If you look at the HTML of the page that displays, you see the URL pointing directly to the image in blob storage, something like this:</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample13.cshtml?highlight=11)]

## <a name="summary"></a><span data-ttu-id="b9e99-177">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="b9e99-177">Summary</span></span>

<span data-ttu-id="b9e99-178">Sie haben gesehen, wie die Korrektur der IT-App Images im BLOB-Dienst und nur Bild-URLs in der SQL-Datenbank speichert.</span><span class="sxs-lookup"><span data-stu-id="b9e99-178">You've seen how the Fix It app stores images in the Blob service and only image URLs in the SQL database.</span></span> <span data-ttu-id="b9e99-179">Wenn Sie den BLOB-Dienst verwenden, ist die SQL-Datenbank viel kleiner, als andernfalls. dadurch ist es möglich, eine Skalierung auf eine fast unbegrenzte Anzahl von Aufgaben durchzusetzen, ohne viel Code schreiben zu müssen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-179">Using the Blob service keeps the SQL database much smaller than it otherwise would be, makes it possible to scale up to an almost unlimited number of tasks, and can be done without writing a lot of code.</span></span>

<span data-ttu-id="b9e99-180">Sie können Hunderte von Terabyte in einem Speicherkonto haben, und die Speicherkosten sind viel kostengünstiger als SQL-Daten Bank Speicher, beginnend bei ungefähr 3 Cent pro Gigabyte pro Monat zuzüglich einer geringen Transaktionsgebühr.</span><span class="sxs-lookup"><span data-stu-id="b9e99-180">You can have hundreds of terabytes in a storage account, and the storage cost is much less expensive than SQL Database storage, starting at about 3 cents per gigabyte per month plus a small transaction charge.</span></span> <span data-ttu-id="b9e99-181">Denken Sie daran, dass Sie nicht für die maximale Kapazität bezahlen, sondern nur für den Betrag, den Sie tatsächlich speichern, sodass Ihre APP skaliert werden kann, Sie aber nicht für die gesamte zusätzliche Kapazität bezahlen.</span><span class="sxs-lookup"><span data-stu-id="b9e99-181">And keep in mind that you're not paying for the maximum capacity but only for the amount you actually store, so your app is ready to scale but you're not paying for all that extra capacity.</span></span>

<span data-ttu-id="b9e99-182">Im [nächsten Kapitel](design-to-survive-failures.md) wird erläutert, wie wichtig es ist, dass eine Cloud-App fehlerhafte Fehlerbehandlung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="b9e99-182">In the [next chapter](design-to-survive-failures.md) we'll talk about the importance of making a cloud app capable of gracefully handling failures.</span></span>

## <a name="resources"></a><span data-ttu-id="b9e99-183">Ressourcen</span><span class="sxs-lookup"><span data-stu-id="b9e99-183">Resources</span></span>

<span data-ttu-id="b9e99-184">Weitere Informationen finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="b9e99-184">For more information see the following resources:</span></span>

- <span data-ttu-id="b9e99-185">[Eine Einführung in Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span><span class="sxs-lookup"><span data-stu-id="b9e99-185">[An Introduction to Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span></span> <span data-ttu-id="b9e99-186">Blog von Mike Wood.</span><span class="sxs-lookup"><span data-stu-id="b9e99-186">Blog by Mike Wood.</span></span>
- <span data-ttu-id="b9e99-187">[Verwenden des Azure BLOB Storage-Dienstanbieter in .net](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span><span class="sxs-lookup"><span data-stu-id="b9e99-187">[How to use the Azure Blob Storage Service in .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span></span> <span data-ttu-id="b9e99-188">Offizielle Dokumentation auf der MicrosoftAzure.com-Website.</span><span class="sxs-lookup"><span data-stu-id="b9e99-188">Official documentation on the MicrosoftAzure.com site.</span></span> <span data-ttu-id="b9e99-189">Eine kurze Einführung in BLOB Storage, gefolgt von Codebeispielen, die zeigen, wie Sie eine Verbindung mit BLOB Storage herstellen, Container erstellen, BLOBs hochladen und herunterladen usw.</span><span class="sxs-lookup"><span data-stu-id="b9e99-189">A brief introduction to blob storage followed by code examples showing how to connect to blob storage, create containers, upload and download blobs, etc.</span></span>
- <span data-ttu-id="b9e99-190">[Failsafe: aufbauen skalierbarer, robuster Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="b9e99-190">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="b9e99-191">Neun teilige Videoreihe von Ulrich Homann, Marc Mercuri und Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="b9e99-191">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="b9e99-192">Stellt allgemeine Konzepte und architektonische Prinzipien in einer sehr zugänglichen und interessanten Weise vor, wobei Storys von der Benutzerfreundlichkeit von Microsoft Customer Advisory Team (CAT) mit tatsächlichen Kunden erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="b9e99-192">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="b9e99-193">Eine Erläuterung zu Azure Storage-Dienst und blobblobvorschauen finden Sie in Episode 5 ab 35:13.</span><span class="sxs-lookup"><span data-stu-id="b9e99-193">For a discussion of Azure Storage service and blobs, see episode 5 starting at 35:13.</span></span>
- <span data-ttu-id="b9e99-194">[Microsoft Patterns and Practices: Azure-Leitfaden](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9e99-194">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="b9e99-195">Siehe Valet-Schlüssel Muster.</span><span class="sxs-lookup"><span data-stu-id="b9e99-195">See Valet Key pattern.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b9e99-196">[Zurück](data-partitioning-strategies.md)
> [Weiter](design-to-survive-failures.md)</span><span class="sxs-lookup"><span data-stu-id="b9e99-196">[Previous](data-partitioning-strategies.md)
[Next](design-to-survive-failures.md)</span></span>
