---
uid: aspnet/overview/developing-apps-with-windows-azure/maintainable-azure-websites-managing-change-and-scale
title: 'Praktische Übungseinheit: wart bare Azure-Websites: Verwalten von Änderungen und Skalierungen | Microsoft-Dokumentation'
author: rick-anderson
description: In dieser Übungseinheit erfahren Sie, wie Microsoft Azure das Erstellen und Bereitstellen von Websites in der Produktion erleichtert.
ms.author: riande
ms.date: 07/16/2014
ms.assetid: ecfd0eb4-c4ad-44e6-9db9-a2a66611ff6a
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/maintainable-azure-websites-managing-change-and-scale
msc.type: authoredcontent
ms.openlocfilehash: c88bae40a8aa092037c0b359ee391acaf161cf10
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78506373"
---
# <a name="hands-on-lab-maintainable-azure-websites-managing-change-and-scale"></a><span data-ttu-id="31443-103">Praktische Übungseinheit: wart bare Azure-Websites: Verwalten von Änderungen und Skalierungen</span><span class="sxs-lookup"><span data-stu-id="31443-103">Hands on Lab: Maintainable Azure Websites: Managing Change and Scale</span></span>

<span data-ttu-id="31443-104">vom [Web Camps-Team](https://twitter.com/webcamps)</span><span class="sxs-lookup"><span data-stu-id="31443-104">by [Web Camps Team](https://twitter.com/webcamps)</span></span>

[<span data-ttu-id="31443-105">Webcamps-Trainingskit herunterladen</span><span class="sxs-lookup"><span data-stu-id="31443-105">Download Web Camps Training Kit</span></span>](https://aka.ms/webcamps-training-kit)

> <span data-ttu-id="31443-106">Microsoft Azure erleichtert das Erstellen und Bereitstellen von Websites in der Produktion.</span><span class="sxs-lookup"><span data-stu-id="31443-106">Microsoft Azure makes it easy to build and deploy websites to production.</span></span> <span data-ttu-id="31443-107">Sie sind jedoch nicht fertig, wenn Ihre Anwendung Live ist. Sie werden erst gestartet.</span><span class="sxs-lookup"><span data-stu-id="31443-107">But you're not done when your application is live, you're just getting started!</span></span> <span data-ttu-id="31443-108">Sie müssen sich ändernde Anforderungen, Datenbankaktualisierungen, Skalierungen und vieles mehr kümmern.</span><span class="sxs-lookup"><span data-stu-id="31443-108">You'll need to handle changing requirements, database updates, scale, and more.</span></span> <span data-ttu-id="31443-109">Glücklicherweise haben Sie Azure App Service mit vielen Features abgedeckt, die Ihnen helfen, ihre Websites reibungslos zu betreiben.</span><span class="sxs-lookup"><span data-stu-id="31443-109">Fortunately, Azure App Service has you covered, with plenty of features to help you keep your sites running smoothly.</span></span>
>
> <span data-ttu-id="31443-110">Azure bietet sichere und flexible Entwicklungs-, Bereitstellungs-und Skalierungs Optionen für Webanwendungen jeder Größe.</span><span class="sxs-lookup"><span data-stu-id="31443-110">Azure offers secure and flexible development, deployment and scaling options for any size web application.</span></span> <span data-ttu-id="31443-111">Nutzen Sie Ihre vorhandenen Tools, um Anwendungen zu erstellen und bereitzustellen, ohne die Infrastruktur zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="31443-111">Leverage your existing tools to create and deploy applications without the hassle of managing infrastructure.</span></span>
>
> <span data-ttu-id="31443-112">Stellen Sie in wenigen Minuten eine produktionsweb Anwendung bereit, indem Sie problemlos Inhalte bereitstellen, die mit Ihrem bevorzugten Entwicklungs Tool erstellt wurden</span><span class="sxs-lookup"><span data-stu-id="31443-112">Provision a production web application yourself in minutes by easily deploying content created using your favorite development tool.</span></span> <span data-ttu-id="31443-113">Sie können eine vorhandene Site direkt aus der Quell Code Verwaltung mit Unterstützung für **git**, **GitHub**, **Bitbucket**, **TFS**und sogar **Dropbox**bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="31443-113">You can deploy an existing site directly from source control with support for **Git**, **GitHub**, **Bitbucket**, **TFS**, and even **DropBox**.</span></span> <span data-ttu-id="31443-114">Stellen Sie direkt über Ihre bevorzugte IDE oder mithilfe von **PowerShell** in Windows oder **CLI** -Tools, die unter einem beliebigen Betriebssystem ausgeführt werden, bereit.</span><span class="sxs-lookup"><span data-stu-id="31443-114">Deploy directly from your favorite IDE or from scripts using **PowerShell** in Windows or **CLI** tools running on any OS.</span></span> <span data-ttu-id="31443-115">Behalten Sie nach der Bereitstellung ihre Websites ständig auf dem neuesten Stand, und Unterstützung für Continuous Deployment.</span><span class="sxs-lookup"><span data-stu-id="31443-115">Once deployed, keep your sites constantly up-to-date with support for continuous deployment.</span></span>
>
> <span data-ttu-id="31443-116">Azure bietet skalierbare, dauerhafte cloudspeicher-, Sicherungs-und Wiederherstellungs Lösungen für beliebige Daten, groß oder klein.</span><span class="sxs-lookup"><span data-stu-id="31443-116">Azure provides scalable, durable cloud storage, backup, and recovery solutions for any data, big or small.</span></span> <span data-ttu-id="31443-117">Beim Bereitstellen von Anwendungen in einer Produktionsumgebung können Sie mithilfe von Speicherdiensten wie Tabellen, BLOB-und SQL-Datenbanken Ihre Anwendung in der Cloud skalieren.</span><span class="sxs-lookup"><span data-stu-id="31443-117">When deploying applications to a production environment, storage services such as Tables, Blobs and SQL Databases, help you scale your application in the cloud.</span></span>
>
> <span data-ttu-id="31443-118">Bei SQL-Datenbanken ist es wichtig, dass ihre produktive Datenbank immer auf dem neuesten Stand ist, wenn Sie neue Versionen der Anwendung bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="31443-118">With SQL Databases, it is important to keep your productive database up-to-date when deploying new versions of your application.</span></span> <span data-ttu-id="31443-119">Dank der **Entity Framework Code First-Migrationen**wurde die Entwicklung und Bereitstellung Ihres Datenmodells vereinfacht, um Ihre Umgebungen innerhalb weniger Minuten zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="31443-119">Thanks to **Entity Framework Code First Migrations**, the development and deployment of your data model has been simplified to update your environments in minutes.</span></span> <span data-ttu-id="31443-120">Diese praktische Übungseinheit zeigt Ihnen die verschiedenen Themen, die bei der Bereitstellung Ihrer Web-App in Produktionsumgebungen in Microsoft Azure auftreten können.</span><span class="sxs-lookup"><span data-stu-id="31443-120">This hands-on lab will show you the different topics you could encounter when deploying your web app to production environments in Microsoft Azure.</span></span>
>
> <span data-ttu-id="31443-121">Der gesamte Beispielcode und die Code Ausschnitte sind im Web Camps-Trainingskit enthalten, das unter [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit)verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="31443-121">All sample code and snippets are included in the Web Camps Training Kit, available at [https://aka.ms/webcamps-training-kit](https://aka.ms/webcamps-training-kit).</span></span>
>
> <span data-ttu-id="31443-122">Ausführlichere Informationen zu diesem Thema finden [Sie im e-Book zum Aufbauen von realen Cloud-apps mit Azure](building-real-world-cloud-apps-with-windows-azure/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="31443-122">For more in-depth coverage of this topic, see the [Building Real-World Cloud Apps with Azure e-book](building-real-world-cloud-apps-with-windows-azure/introduction.md).</span></span>

<a id="Overview"></a>
## <a name="overview"></a><span data-ttu-id="31443-123">Übersicht</span><span class="sxs-lookup"><span data-stu-id="31443-123">Overview</span></span>

<a id="Objectives"></a>
### <a name="objectives"></a><span data-ttu-id="31443-124">Ziele</span><span class="sxs-lookup"><span data-stu-id="31443-124">Objectives</span></span>

<span data-ttu-id="31443-125">In dieser praktischen Übungseinheit erfahren Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="31443-125">In this hands-on lab, you will learn how to:</span></span>

- <span data-ttu-id="31443-126">Aktivieren von Entity Framework Migrationen mit einem vorhandenen Modell</span><span class="sxs-lookup"><span data-stu-id="31443-126">Enable Entity Framework Migrations with an existing model</span></span>
- <span data-ttu-id="31443-127">Aktualisieren des Objektmodells und der Datenbank entsprechend mithilfe Entity Framework Migrationen</span><span class="sxs-lookup"><span data-stu-id="31443-127">Update the object model and database accordingly using Entity Framework Migrations</span></span>
- <span data-ttu-id="31443-128">Bereitstellen in Azure App Service mithilfe von git</span><span class="sxs-lookup"><span data-stu-id="31443-128">Deploy to Azure App Service using Git</span></span>
- <span data-ttu-id="31443-129">Zurücksetzen auf eine vorherige Bereitstellung mithilfe des Azure-Verwaltungs Portals</span><span class="sxs-lookup"><span data-stu-id="31443-129">Rollback to a previous deployment using the Azure Management portal</span></span>
- <span data-ttu-id="31443-130">Verwenden von Azure Storage zum Skalieren einer Web-App</span><span class="sxs-lookup"><span data-stu-id="31443-130">Use Azure Storage to scale a web app</span></span>
- <span data-ttu-id="31443-131">Konfigurieren der automatischen Skalierung für eine Web-App mithilfe des Azure-Verwaltungsportal</span><span class="sxs-lookup"><span data-stu-id="31443-131">Configure auto-scaling for a web app using the Azure Management Portal</span></span>
- <span data-ttu-id="31443-132">Erstellen und Konfigurieren eines Auslastungs Testprojekts in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="31443-132">Create and configure a load test project in Visual Studio</span></span>

<a id="Prerequisites"></a>
### <a name="prerequisites"></a><span data-ttu-id="31443-133">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="31443-133">Prerequisites</span></span>

<span data-ttu-id="31443-134">Zum Durchführen dieser praktischen Übungseinheit ist Folgendes erforderlich:</span><span class="sxs-lookup"><span data-stu-id="31443-134">The following is required to complete this hands-on lab:</span></span>

- <span data-ttu-id="31443-135">[Visual Studio Express 2013 für Web](https://www.microsoft.com/visualstudio/) oder höher</span><span class="sxs-lookup"><span data-stu-id="31443-135">[Visual Studio Express 2013 for Web](https://www.microsoft.com/visualstudio/) or greater</span></span>
- [<span data-ttu-id="31443-136">Azure SDK für .NET 2,2</span><span class="sxs-lookup"><span data-stu-id="31443-136">Azure SDK for .NET 2.2</span></span>](https://www.microsoft.com/windowsazure/sdk/)
- [<span data-ttu-id="31443-137">GIT-Versionskontrollsystem</span><span class="sxs-lookup"><span data-stu-id="31443-137">GIT Version Control System</span></span>](http://git-scm.com/download)
- <span data-ttu-id="31443-138">Ein Microsoft Azure-Abonnement</span><span class="sxs-lookup"><span data-stu-id="31443-138">A Microsoft Azure subscription</span></span>

    - <span data-ttu-id="31443-139">Registrieren Sie sich für eine [Kostenlose Testversion](https://aka.ms/watk-freetrial)</span><span class="sxs-lookup"><span data-stu-id="31443-139">Sign up for a [Free Trial](https://aka.ms/watk-freetrial)</span></span>
    - <span data-ttu-id="31443-140">Wenn Sie Visual Studio Professional, Test Professional, Premium oder Ultimate mit MSDN oder MSDN Platforms Abonnent sind, aktivieren Sie Ihren [MSDN-Vorteil](https://aka.ms/watk-msdn) nun, um mit der Entwicklung und dem Testen in Azure zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="31443-140">If you are a Visual Studio Professional, Test Professional, Premium or Ultimate with MSDN or MSDN Platforms subscriber, activate your [MSDN benefit](https://aka.ms/watk-msdn) now to start developing and testing on Azure</span></span>
    - <span data-ttu-id="31443-141">[BizSpark](https://aka.ms/watk-bizspark) -Mitglieder erhalten den Azure-Vorteil automatisch über Ihre Visual Studio Ultimate mit MSDN-Abonnements</span><span class="sxs-lookup"><span data-stu-id="31443-141">[BizSpark](https://aka.ms/watk-bizspark) members automatically receive the Azure benefit through their Visual Studio Ultimate with MSDN subscriptions</span></span>
    - <span data-ttu-id="31443-142">Mitglieder des [Microsoft Partner Network](https://aka.ms/watk-mpn) Cloud Essentials-Programms erhalten monatliche Azure-Gutschriften kostenlos.</span><span class="sxs-lookup"><span data-stu-id="31443-142">Members of the [Microsoft Partner Network](https://aka.ms/watk-mpn) Cloud Essentials program receive monthly Azure credits at no charge</span></span>

<a id="Setup"></a>
### <a name="setup"></a><span data-ttu-id="31443-143">Einrichten</span><span class="sxs-lookup"><span data-stu-id="31443-143">Setup</span></span>

<span data-ttu-id="31443-144">Um die Übungen in dieser praktischen Übungseinheit auszuführen, müssen Sie zuerst Ihre Umgebung einrichten.</span><span class="sxs-lookup"><span data-stu-id="31443-144">In order to run the exercises in this hands-on lab, you will need to set up your environment first.</span></span>

1. <span data-ttu-id="31443-145">Öffnen Sie Windows-Explorer, und navigieren Sie zum **Quell** Ordner des Labs.</span><span class="sxs-lookup"><span data-stu-id="31443-145">Open Windows Explorer and browse to the lab's **Source** folder.</span></span>
2. <span data-ttu-id="31443-146">Klicken Sie mit der rechten Maustaste auf **Setup. cmd** , und wählen Sie **als Administrator ausführen** aus, um den Setup Vorgang zu starten, mit dem die Umgebung konfiguriert wird, und die Visual Studio-Code Ausschnitte für diese Übungseinheit</span><span class="sxs-lookup"><span data-stu-id="31443-146">Right-click on **Setup.cmd** and select **Run as administrator** to launch the setup process that will configure your environment and install the Visual Studio code snippets for this lab.</span></span>
3. <span data-ttu-id="31443-147">Wenn das Dialogfeld "Benutzerkontensteuerung" angezeigt wird, bestätigen Sie die Aktion, um fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="31443-147">If the User Account Control dialog is shown, confirm the action to proceed.</span></span>

> [!NOTE]
> <span data-ttu-id="31443-148">Vergewissern Sie sich, dass Sie vor dem Ausführen des Setups alle Abhängigkeiten für dieses Lab geprüft haben.</span><span class="sxs-lookup"><span data-stu-id="31443-148">Make sure you have checked all the dependencies for this lab before running the setup.</span></span>

<a id="CodeSnippets"></a>
### <a name="using-the-code-snippets"></a><span data-ttu-id="31443-149">Verwenden der Code Ausschnitte</span><span class="sxs-lookup"><span data-stu-id="31443-149">Using the Code Snippets</span></span>

<span data-ttu-id="31443-150">Im gesamten Lab-Dokument werden Sie angewiesen, Code Blöcke einzufügen.</span><span class="sxs-lookup"><span data-stu-id="31443-150">Throughout the lab document, you will be instructed to insert code blocks.</span></span> <span data-ttu-id="31443-151">Der größte Teil dieses Codes wird zur einfacheren Verwendung als Visual Studio Code Ausschnitte bereitgestellt, auf die Sie in Visual Studio 2013 zugreifen können, um das manuelle Hinzufügen zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="31443-151">For your convenience, most of this code is provided as Visual Studio Code Snippets, which you can access from within Visual Studio 2013 to avoid having to add it manually.</span></span>

> [!NOTE]
> <span data-ttu-id="31443-152">Jede Übung wird von einer Start Lösung begleitet, die sich im Ordner " **Begin** " der Übung befindet und Ihnen ermöglicht, die einzelnen Übungen unabhängig von den anderen zu befolgen.</span><span class="sxs-lookup"><span data-stu-id="31443-152">Each exercise is accompanied by a starting solution located in the **Begin** folder of the exercise that allows you to follow each exercise independently of the others.</span></span> <span data-ttu-id="31443-153">Beachten Sie, dass die während einer Übung hinzugefügten Code Ausschnitte in diesen Projektmappen fehlen und möglicherweise erst nach Abschluss der Übung funktionieren.</span><span class="sxs-lookup"><span data-stu-id="31443-153">Please be aware that the code snippets that are added during an exercise are missing from these starting solutions and may not work until you have completed the exercise.</span></span> <span data-ttu-id="31443-154">Innerhalb des Quellcodes für eine Übung finden Sie auch einen **endordner** mit einer Visual Studio-Projekt Mappe mit dem Code, der aus der Ausführung der Schritte in der entsprechenden Übung resultiert.</span><span class="sxs-lookup"><span data-stu-id="31443-154">Inside the source code for an exercise, you will also find an **End** folder containing a Visual Studio solution with the code that results from completing the steps in the corresponding exercise.</span></span> <span data-ttu-id="31443-155">Sie können diese Lösungen als Leitfaden verwenden, wenn Sie zusätzliche Hilfe benötigen, während Sie diese praktische Übungseinheit durcharbeiten.</span><span class="sxs-lookup"><span data-stu-id="31443-155">You can use these solutions as guidance if you need additional help as you work through this hands-on lab.</span></span>

---

<a id="Exercises"></a>
## <a name="exercises"></a><span data-ttu-id="31443-156">Exerzitien</span><span class="sxs-lookup"><span data-stu-id="31443-156">Exercises</span></span>

<span data-ttu-id="31443-157">Diese praktische Übungseinheit umfasst die folgenden Übungen:</span><span class="sxs-lookup"><span data-stu-id="31443-157">This hands-on lab includes the following exercises:</span></span>

1. [<span data-ttu-id="31443-158">Verwenden von Entity Framework Migrationen</span><span class="sxs-lookup"><span data-stu-id="31443-158">Using Entity Framework Migrations</span></span>](#Exercise1)
2. [<span data-ttu-id="31443-159">Bereitstellen einer Web-App für die Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="31443-159">Deploying a Web App to Staging</span></span>](#Exercise2)
3. [<span data-ttu-id="31443-160">Ausführen eines Bereitstellungs Rollbacks in der Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="31443-160">Performing Deployment Rollback in Production</span></span>](#Exercise3)
4. [<span data-ttu-id="31443-161">Skalieren mithilfe Azure Storage</span><span class="sxs-lookup"><span data-stu-id="31443-161">Scaling Using Azure Storage</span></span>](#Exercise4)
5. <span data-ttu-id="31443-162">[Verwenden der automatischen Skalierung für Web-Apps](#Exercise5) (optional für Visual Studio 2013 Ultimate Edition)</span><span class="sxs-lookup"><span data-stu-id="31443-162">[Using Autoscale for Web Apps](#Exercise5) (Optional for Visual Studio 2013 Ultimate edition)</span></span>

<span data-ttu-id="31443-163">Geschätzte Zeit bis zum Abschluss dieses Labs: **75 Minuten**</span><span class="sxs-lookup"><span data-stu-id="31443-163">Estimated time to complete this lab: **75 minutes**</span></span>

> [!NOTE]
> <span data-ttu-id="31443-164">Wenn Sie Visual Studio zum ersten Mal starten, müssen Sie eine der vordefinierten Einstellungs Sammlungen auswählen.</span><span class="sxs-lookup"><span data-stu-id="31443-164">When you first start Visual Studio, you must select one of the predefined settings collections.</span></span> <span data-ttu-id="31443-165">Jede vordefinierte Sammlung ist so konzipiert, dass Sie einem bestimmten Entwicklungsstil entspricht, und bestimmt Fensterlayouts, das Editor-Verhalten, IntelliSense-Code Ausschnitte und Dialogfeld Optionen.</span><span class="sxs-lookup"><span data-stu-id="31443-165">Each predefined collection is designed to match a particular development style and determines window layouts, editor behavior, IntelliSense code snippets, and dialog box options.</span></span> <span data-ttu-id="31443-166">In den Prozeduren in dieser Übungseinheit werden die Aktionen beschrieben, die zum Ausführen einer bestimmten Aufgabe in Visual Studio bei Verwendung der **allgemeinen Entwicklungs Einstellungs** Auflistung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="31443-166">The procedures in this lab describe the actions necessary to accomplish a given task in Visual Studio when using the **General Development Settings** collection.</span></span> <span data-ttu-id="31443-167">Wenn Sie eine andere Einstellungs Sammlung für Ihre Entwicklungsumgebung auswählen, kann es Unterschiede in den Schritten geben, die Sie berücksichtigen sollten.</span><span class="sxs-lookup"><span data-stu-id="31443-167">If you choose a different settings collection for your development environment, there may be differences in the steps that you should take into account.</span></span>

<a id="Exercise1"></a>
### <a name="exercise-1-using-entity-framework-migrations"></a><span data-ttu-id="31443-168">Übung 1: Verwenden von Entity Framework Migrationen</span><span class="sxs-lookup"><span data-stu-id="31443-168">Exercise 1: Using Entity Framework Migrations</span></span>

<span data-ttu-id="31443-169">Wenn Sie eine Anwendung entwickeln, kann sich das Datenmodell im Laufe der Zeit ändern.</span><span class="sxs-lookup"><span data-stu-id="31443-169">When you are developing an application, your data model might change over time.</span></span> <span data-ttu-id="31443-170">Diese Änderungen können sich auf das vorhandene Modell in der Datenbank auswirken (wenn Sie eine neue Version erstellen), und es ist wichtig, die Datenbank auf dem neuesten Stand zu halten, um Fehler zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="31443-170">These changes could affect the existing model in your database (if you are creating a new version) and it is important to keep your database up-to-date to prevent errors.</span></span>

<span data-ttu-id="31443-171">Um die Nachverfolgung dieser Änderungen im Modell zu vereinfachen, erkennen **Entity Framework Code First-Migrationen** automatisch Änderungen, die das Modell mit dem Datenbankschema vergleichen, und generieren spezifischen Code zum Aktualisieren der Datenbank, wodurch neue *Versionen* der Datenbank erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-171">To simplify the tracking of these changes in your model, **Entity Framework Code First Migrations** automatically detect changes comparing your model with the database schema and generates specific code to update your database, creating new *versions* of your database.</span></span>

<span data-ttu-id="31443-172">Diese Übung zeigt Ihnen, wie **Migrationen** für Ihre Anwendung aktiviert werden und wie Sie mühelos Änderungen zum Aktualisieren Ihrer Datenbanken erkennen und generieren können.</span><span class="sxs-lookup"><span data-stu-id="31443-172">This exercise shows you how to enable **Migrations** for your application and how you can easily detect and generate changes to update your databases.</span></span>

<a id="Ex1Task1"></a>
#### <a name="task-1--enabling-migrations"></a><span data-ttu-id="31443-173">Aufgabe 1 – Aktivieren von Migrationen</span><span class="sxs-lookup"><span data-stu-id="31443-173">Task 1 – Enabling Migrations</span></span>

<span data-ttu-id="31443-174">In dieser Aufgabe durchlaufen Sie die Schritte zum Aktivieren von **Entity Framework Code First-Migrationen** für die **Geek-Quiz** Datenbank, zum Ändern des Modells und zum Verständnis der Art und Weise, wie diese Änderungen in der Datenbank widergespiegelt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-174">In this task, you will go through the steps of enabling **Entity Framework Code First Migrations** to the **Geek Quiz** database, changing the model and understanding how those changes are reflected in the database.</span></span>

1. <span data-ttu-id="31443-175">Öffnen Sie Visual Studio, und öffnen Sie die **Projekt Mappe geekquiz. sln** von **source\ex1-usingentityframeworkmigrations\begin**.</span><span class="sxs-lookup"><span data-stu-id="31443-175">Open Visual Studio and open the **GeekQuiz.sln** solution file from **Source\Ex1-UsingEntityFrameworkMigrations\Begin**.</span></span>
2. <span data-ttu-id="31443-176">Erstellen Sie die Projekt Mappe, um die **nuget** -Paketabhängigkeiten herunterzuladen und zu installieren.</span><span class="sxs-lookup"><span data-stu-id="31443-176">Build the solution in order to download and install the **NuGet** package dependencies.</span></span> <span data-ttu-id="31443-177">Klicken Sie hierzu mit der rechten Maustaste auf die Projekt Mappe, und klicken Sie auf Projekt Mappe **Erstellen** , oder drücken Sie **STRG + UMSCHALT + B**.</span><span class="sxs-lookup"><span data-stu-id="31443-177">To do this, right-click the solution and click **Build Solution** or press **Ctrl + Shift + B**.</span></span>
3. <span data-ttu-id="31443-178">Wählen Sie **im Menü Extras** in Visual Studio den **nuget-Paket-Manager**aus, und klicken Sie dann auf Paket-Manager- **Konsole**.</span><span class="sxs-lookup"><span data-stu-id="31443-178">From the **Tools** menu in Visual Studio, select **NuGet Package Manager**, and then click **Package Manager Console**.</span></span>
4. <span data-ttu-id="31443-179">Geben Sie in der **Paket-Manager-Konsole**den folgenden Befehl ein, und drücken Sie dann die **Eingabe**Taste.</span><span class="sxs-lookup"><span data-stu-id="31443-179">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span> <span data-ttu-id="31443-180">Eine anfängliche Migration basierend auf dem vorhandenen Modell wird erstellt.</span><span class="sxs-lookup"><span data-stu-id="31443-180">An initial migration based on the existing model will be created.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample1.ps1)]

    <span data-ttu-id="31443-181">![Aktivieren von Migrationen](maintainable-azure-websites-managing-change-and-scale/_static/image1.png "Aktivieren von Migrationen")</span><span class="sxs-lookup"><span data-stu-id="31443-181">![Enabling Migrations](maintainable-azure-websites-managing-change-and-scale/_static/image1.png "Enabling Migrations")</span></span>

    <span data-ttu-id="31443-182">*Aktivieren von Migrationen*</span><span class="sxs-lookup"><span data-stu-id="31443-182">*Enabling Migrations*</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-183">Mit diesem Befehl wird ein **Migrations** Ordner zum Geek Quiz Project hinzugefügt, das eine Datei namens **Configuration.cs**enthält.</span><span class="sxs-lookup"><span data-stu-id="31443-183">This command adds a **Migrations** folder to Geek Quiz project that contains a file called **Configuration.cs**.</span></span> <span data-ttu-id="31443-184">Mit der- **Konfigurations** Klasse können Sie konfigurieren, wie Migrationen für den Kontext Verhalten.</span><span class="sxs-lookup"><span data-stu-id="31443-184">The **Configuration** class allows you to configure how Migrations behaves for your context.</span></span>
5. <span data-ttu-id="31443-185">Wenn Migrationen aktiviert sind, müssen Sie die **Konfigurations** Klasse aktualisieren, um die Datenbank mit den anfänglichen Daten aufzufüllen, die für den **Geek-Quiz** erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="31443-185">With Migrations enabled, you need to update the **Configuration** class to populate the database with the initial data that **Geek Quiz** requires.</span></span> <span data-ttu-id="31443-186">Ersetzen Sie unter **Migrationen**die Datei **Configuration.cs** durch die Datei, die sich im Ordner **source\assets** dieses Labs befindet.</span><span class="sxs-lookup"><span data-stu-id="31443-186">Under **Migrations**, replace the **Configuration.cs** file with the one located in the **Source\Assets** folder of this lab.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-187">Da **Migrationen** die **Seed** -Methode bei jedem Datenbankupdate aufruft, müssen Sie sicherstellen, dass die Datensätze nicht in der Datenbank dupliziert werden.</span><span class="sxs-lookup"><span data-stu-id="31443-187">Since **Migrations** will call the **Seed** method with every database update, you need to be sure that records are not duplicated in the database.</span></span> <span data-ttu-id="31443-188">Mithilfe der **addorupdate** -Methode können doppelte Daten verhindert werden.</span><span class="sxs-lookup"><span data-stu-id="31443-188">The **AddOrUpdate** method will help to prevent duplicate data.</span></span>
6. <span data-ttu-id="31443-189">Um eine anfängliche Migration hinzuzufügen, geben Sie den folgenden Befehl ein, und drücken Sie dann die **Eingabe**Taste.</span><span class="sxs-lookup"><span data-stu-id="31443-189">To add an initial migration, enter the following command and then press **Enter**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-190">Stellen Sie sicher, dass in ihrer localdb-Instanz keine Datenbank mit dem Namen &quot;geekquiz Prod&quot; vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="31443-190">Make sure that there is no database named &quot;GeekQuizProd&quot; in your LocalDB instance.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample2.ps1)]

    <span data-ttu-id="31443-191">![Hinzufügen der Basis Schema Migration](maintainable-azure-websites-managing-change-and-scale/_static/image2.png "Hinzufügen der Basis Schema Migration")</span><span class="sxs-lookup"><span data-stu-id="31443-191">![Adding base schema migration](maintainable-azure-websites-managing-change-and-scale/_static/image2.png "Adding base schema migration")</span></span>

    <span data-ttu-id="31443-192">*Hinzufügen der Basis Schema Migration*</span><span class="sxs-lookup"><span data-stu-id="31443-192">*Adding base schema migration*</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-193">Durch **Hinzufügen der Migration** wird das Gerüst der nächsten Migration basierend auf den Änderungen, die Sie seit der letzten Migration an Ihrem Modell vorgenommen haben, gebildet.</span><span class="sxs-lookup"><span data-stu-id="31443-193">**Add-Migration** will scaffold the next migration based on changes you have made to your model since the last migration was created.</span></span> <span data-ttu-id="31443-194">In diesem Fall werden die Skripts zum Erstellen aller Tabellen hinzugefügt, die in der **triviacontext** -Klasse definiert sind, da es sich hierbei um die erste Migration des Projekts handelt.</span><span class="sxs-lookup"><span data-stu-id="31443-194">In this case, as it is the first migration of the project, it will add the scripts to create all the tables defined in the **TriviaContext** class.</span></span>
7. <span data-ttu-id="31443-195">Führen Sie die Migration aus, um die Datenbank zu aktualisieren, indem Sie den folgenden Befehl ausführen.</span><span class="sxs-lookup"><span data-stu-id="31443-195">Execute the migration to update the database by running the following command.</span></span> <span data-ttu-id="31443-196">Für diesen Befehl geben Sie das Flag " **verbose** " an, um die SQL-Anweisungen anzuzeigen, die auf die Zieldatenbank angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="31443-196">For this command you will specify the **Verbose** flag to view the SQL statements being applied to the target database.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample3.ps1)]

    <span data-ttu-id="31443-197">![Anfängliche Datenbank wird erstellt](maintainable-azure-websites-managing-change-and-scale/_static/image3.png "Anfängliche Datenbank wird erstellt")</span><span class="sxs-lookup"><span data-stu-id="31443-197">![Creating initial database](maintainable-azure-websites-managing-change-and-scale/_static/image3.png "Creating initial database")</span></span>

    <span data-ttu-id="31443-198">*Anfängliche Datenbank wird erstellt*</span><span class="sxs-lookup"><span data-stu-id="31443-198">*Creating initial database*</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-199">**Update-Database** wendet alle ausstehenden Migrationen auf die Datenbank an.</span><span class="sxs-lookup"><span data-stu-id="31443-199">**Update-Database** will apply any pending migrations to the database.</span></span> <span data-ttu-id="31443-200">In diesem Fall wird die Datenbank mithilfe der Verbindungs Zeichenfolge erstellt, die in der Datei "Web. config" definiert ist.</span><span class="sxs-lookup"><span data-stu-id="31443-200">In this case, it will create the database using the connection string defined in your web.config file.</span></span>
8. <span data-ttu-id="31443-201">Wechseln Sie zum Menü **Ansicht** , und öffnen Sie **SQL Server-Objekt-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="31443-201">Go to **View** menu and open **SQL Server Object Explorer**.</span></span>

    <span data-ttu-id="31443-202">![In SQL Server-Objekt-Explorer öffnen](maintainable-azure-websites-managing-change-and-scale/_static/image4.png "In SQL Server-Objekt-Explorer öffnen")</span><span class="sxs-lookup"><span data-stu-id="31443-202">![Open in SQL Server Object Explorer](maintainable-azure-websites-managing-change-and-scale/_static/image4.png "Open in SQL Server Object Explorer")</span></span>

    <span data-ttu-id="31443-203">*In SQL Server-Objekt-Explorer öffnen*</span><span class="sxs-lookup"><span data-stu-id="31443-203">*Open in SQL Server Object Explorer*</span></span>
9. <span data-ttu-id="31443-204">Stellen Sie im **SQL Server-Objekt-Explorer** Fenster eine Verbindung mit ihrer localdb-Instanz her, indem Sie mit der rechten Maustaste auf den Knoten **SQL Server** klicken und **SQL Server hinzufügen** auswählen.</span><span class="sxs-lookup"><span data-stu-id="31443-204">In the **SQL Server Object Explorer** window, connect to your LocalDB instance by right-clicking the **SQL Server** node and selecting **Add SQL Server...** option.</span></span>

    <span data-ttu-id="31443-205">![Hinzufügen einer SQL Server Instanz](maintainable-azure-websites-managing-change-and-scale/_static/image5.png "Hinzufügen einer SQL Server Instanz")</span><span class="sxs-lookup"><span data-stu-id="31443-205">![Adding a SQL Server Instance](maintainable-azure-websites-managing-change-and-scale/_static/image5.png "Adding a SQL Server Instance")</span></span>

    <span data-ttu-id="31443-206">*Hinzufügen einer SQL Server Instanz zu SQL Server-Objekt-Explorer*</span><span class="sxs-lookup"><span data-stu-id="31443-206">*Adding a SQL Server instance to SQL Server Object Explorer*</span></span>
10. <span data-ttu-id="31443-207">Legen Sie den **Servernamen** auf *(localdb) \v11.0* fest, und lassen Sie **Windows-Authentifizierung** als Authentifizierungsmodus fest.</span><span class="sxs-lookup"><span data-stu-id="31443-207">Set the **server name** to *(localdb)\v11.0* and leave **Windows Authentication** as your authentication mode.</span></span> <span data-ttu-id="31443-208">Klicken Sie auf **Verbinden** , um den Vorgang fortzusetzen.</span><span class="sxs-lookup"><span data-stu-id="31443-208">Click **Connect** to continue.</span></span>

    <span data-ttu-id="31443-209">![Herstellen einer Verbindung mit localdb](maintainable-azure-websites-managing-change-and-scale/_static/image6.png "Herstellen einer Verbindung mit localdb")</span><span class="sxs-lookup"><span data-stu-id="31443-209">![Connecting to LocalDB](maintainable-azure-websites-managing-change-and-scale/_static/image6.png "Connecting to LocalDB")</span></span>

    <span data-ttu-id="31443-210">*Herstellen einer Verbindung mit localdb*</span><span class="sxs-lookup"><span data-stu-id="31443-210">*Connecting to LocalDB*</span></span>
11. <span data-ttu-id="31443-211">Öffnen Sie die Datenbank **geekquiz Prod** , und erweitern Sie den Knoten **Tabellen** .</span><span class="sxs-lookup"><span data-stu-id="31443-211">Open the **GeekQuizProd** database and expand the **Tables** node.</span></span> <span data-ttu-id="31443-212">Wie Sie sehen, hat der **Update-Database-** Befehl alle in der **triviacontext** -Klasse definierten Tabellen generiert.</span><span class="sxs-lookup"><span data-stu-id="31443-212">As you can see, the **Update-Database** command generated all the tables defined in the **TriviaContext** class.</span></span> <span data-ttu-id="31443-213">Suchen Sie nach dem **dbo. Triviaquestions** -Tabelle, und öffnen Sie den Knoten Spalten.</span><span class="sxs-lookup"><span data-stu-id="31443-213">Locate the **dbo.TriviaQuestions** table and open the columns node.</span></span> <span data-ttu-id="31443-214">In der nächsten Aufgabe fügen Sie dieser Tabelle eine neue Spalte hinzu und aktualisieren die Datenbank mithilfe von **Migrationen**.</span><span class="sxs-lookup"><span data-stu-id="31443-214">In the next task, you will add a new column to this table and update the database using **Migrations**.</span></span>

    <span data-ttu-id="31443-215">![Spalten mit Trivia-Fragen](maintainable-azure-websites-managing-change-and-scale/_static/image7.png "Spalten mit Trivia-Fragen")</span><span class="sxs-lookup"><span data-stu-id="31443-215">![Trivia Questions Columns](maintainable-azure-websites-managing-change-and-scale/_static/image7.png "Trivia Questions Columns")</span></span>

    <span data-ttu-id="31443-216">*Spalten mit Trivia-Fragen*</span><span class="sxs-lookup"><span data-stu-id="31443-216">*Trivia Questions Columns*</span></span>

<a id="Ex1Task2"></a>
#### <a name="task-2--updating-database-schema-using-migrations"></a><span data-ttu-id="31443-217">Aufgabe 2 – Aktualisieren des Datenbankschemas mit Migrationen</span><span class="sxs-lookup"><span data-stu-id="31443-217">Task 2 – Updating Database Schema Using Migrations</span></span>

<span data-ttu-id="31443-218">In dieser Aufgabe verwenden Sie **Entity Framework Code First-Migrationen** , um eine Änderung im Modell zu erkennen und den erforderlichen Code zum Aktualisieren der Datenbank zu generieren.</span><span class="sxs-lookup"><span data-stu-id="31443-218">In this task, you will use **Entity Framework Code First Migrations** to detect a change in your model and generate the necessary code to update the database.</span></span> <span data-ttu-id="31443-219">Sie aktualisieren die Entität " **triviaquestions** ", indem Sie Ihr eine neue Eigenschaft hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="31443-219">You will update the **TriviaQuestions** entity by adding a new property to it.</span></span> <span data-ttu-id="31443-220">Anschließend führen Sie-Befehle aus, um eine neue Migration zum Einschließen der neuen Spalte in die Tabelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="31443-220">Then you will run commands to create a new Migration to include the new column in the table.</span></span>

1. <span data-ttu-id="31443-221">Doppelklicken Sie in **Projektmappen-Explorer**auf die Datei " **TriviaQuestion.cs** ", die sich im Ordner " **Models** " befindet.</span><span class="sxs-lookup"><span data-stu-id="31443-221">In **Solution Explorer**, double-click the **TriviaQuestion.cs** file located inside the **Models** folder.</span></span>
2. <span data-ttu-id="31443-222">Fügen Sie eine neue Eigenschaft mit dem Namen **Hint**hinzu, wie im folgenden Code Ausschnitt gezeigt.</span><span class="sxs-lookup"><span data-stu-id="31443-222">Add a new property named **Hint**, as shown in the following code snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample4.cs)]
3. <span data-ttu-id="31443-223">Geben Sie in der **Paket-Manager-Konsole**den folgenden Befehl ein, und drücken Sie dann die **Eingabe**Taste.</span><span class="sxs-lookup"><span data-stu-id="31443-223">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span> <span data-ttu-id="31443-224">Eine neue Migration wird erstellt, die die Änderung in unserem Modell widerspiegelt.</span><span class="sxs-lookup"><span data-stu-id="31443-224">A new migration will be created reflecting the change in our model.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample5.ps1)]

    <span data-ttu-id="31443-225">![Migration hinzufügen](maintainable-azure-websites-managing-change-and-scale/_static/image8.png "Migration hinzufügen")</span><span class="sxs-lookup"><span data-stu-id="31443-225">![Add-Migration](maintainable-azure-websites-managing-change-and-scale/_static/image8.png "Add-Migration")</span></span>

    <span data-ttu-id="31443-226">*Migration hinzufügen*</span><span class="sxs-lookup"><span data-stu-id="31443-226">*Add-Migration*</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-227">Eine Migrations Datei besteht aus zwei Methoden (nach **oben** und **unten**).</span><span class="sxs-lookup"><span data-stu-id="31443-227">A Migration file is composed of two methods, **Up** and **Down**.</span></span>
    >
    > - <span data-ttu-id="31443-228">Die **up** -Methode wird verwendet, um anzugeben, welche Änderungen die aktuelle Version der Anwendung auf die Datenbank anwenden muss.</span><span class="sxs-lookup"><span data-stu-id="31443-228">The **Up** method will be used to specify what changes the current version of our application need to apply to the database.</span></span>
    > - <span data-ttu-id="31443-229">Die **down** -Methode wird verwendet, um die Änderungen umzukehren, die der **up** -Methode hinzugefügt wurden.</span><span class="sxs-lookup"><span data-stu-id="31443-229">The **Down** is used to reverse the changes we have added to the **Up** method.</span></span>
    >
    > <span data-ttu-id="31443-230">Wenn die Datenbank durch die Daten Bank Migration aktualisiert wird, werden alle Migrationen in der Zeitstempel Reihenfolge ausgeführt, und nur diejenigen, die seit dem letzten Update nicht verwendet wurden (in der \_migrationhistory-Tabelle wird nachverfolgt, welche Migrationen angewendet wurden).</span><span class="sxs-lookup"><span data-stu-id="31443-230">When the Database Migration updates the database, it will run all migrations in the timestamp order, and only those that have not been used since the last update (The \_MigrationHistory table keeps track of which migrations have been applied).</span></span> <span data-ttu-id="31443-231">Die **up** -Methode aller Migrationen wird aufgerufen, und die von uns angegebenen Änderungen werden an die Datenbank übernehmen.</span><span class="sxs-lookup"><span data-stu-id="31443-231">The **Up** method of all migrations will be called and will make the changes we have specified to the database.</span></span> <span data-ttu-id="31443-232">Wenn wir uns für eine frühere Migration entscheiden, wird die **down** -Methode aufgerufen, um die Änderungen in umgekehrter Reihenfolge wiederholen.</span><span class="sxs-lookup"><span data-stu-id="31443-232">If we decide to go back to a previous migration, the **Down** method will be called to redo the changes in a reverse order.</span></span>
4. <span data-ttu-id="31443-233">Geben Sie in der **Paket-Manager-Konsole**den folgenden Befehl ein, und drücken Sie dann die **Eingabe**Taste.</span><span class="sxs-lookup"><span data-stu-id="31443-233">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample6.ps1)]
5. <span data-ttu-id="31443-234">Die Ausgabe des **Update-Database-** Befehls hat eine **ALTER TABLE** SQL-Anweisung generiert, um der Tabelle **triviaquestions** eine neue Spalte hinzuzufügen, wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="31443-234">The output of the **Update-Database** command generated an **Alter Table** SQL statement to add a new column to the **TriviaQuestions** table, as shown in the image below.</span></span>

    <span data-ttu-id="31443-235">![SQL-Anweisung für Spalte hinzufügen generiert](maintainable-azure-websites-managing-change-and-scale/_static/image9.png "SQL-Anweisung für Spalte hinzufügen generiert")</span><span class="sxs-lookup"><span data-stu-id="31443-235">![Add column SQL statement generated](maintainable-azure-websites-managing-change-and-scale/_static/image9.png "Add column SQL statement generated")</span></span>

    <span data-ttu-id="31443-236">*SQL-Anweisung für Spalte hinzufügen generiert*</span><span class="sxs-lookup"><span data-stu-id="31443-236">*Add column SQL statement generated*</span></span>
6. <span data-ttu-id="31443-237">Aktualisieren Sie in **SQL Server-Objekt-Explorer**den **dbo. Triviaquestions** -Tabelle, und überprüfen Sie, ob die neue **Hinweis** Spalte angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="31443-237">In **SQL Server Object Explorer**, refresh the **dbo.TriviaQuestions** table and check that the new **Hint** column is displayed.</span></span>

    <span data-ttu-id="31443-238">![Die neue Hinweis Spalte wird angezeigt.](maintainable-azure-websites-managing-change-and-scale/_static/image10.png "Die neue Hinweis Spalte wird angezeigt.")</span><span class="sxs-lookup"><span data-stu-id="31443-238">![Showing the new Hint Column](maintainable-azure-websites-managing-change-and-scale/_static/image10.png "Showing the new Hint Column")</span></span>

    <span data-ttu-id="31443-239">*Die neue Hinweis Spalte wird angezeigt.*</span><span class="sxs-lookup"><span data-stu-id="31443-239">*Showing the new Hint Column*</span></span>
7. <span data-ttu-id="31443-240">Fügen Sie im **TriviaQuestion.cs** -Editor der *Hint* -Eigenschaft eine **StringLength** -Einschränkung hinzu, wie im folgenden Code Ausschnitt gezeigt.</span><span class="sxs-lookup"><span data-stu-id="31443-240">Back in the **TriviaQuestion.cs** editor, add a **StringLength** constraint to the *Hint* property, as shown in the following code snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample7.cs)]
8. <span data-ttu-id="31443-241">Geben Sie in der **Paket-Manager-Konsole**den folgenden Befehl ein, und drücken Sie dann die **Eingabe**Taste.</span><span class="sxs-lookup"><span data-stu-id="31443-241">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample8.ps1)]
9. <span data-ttu-id="31443-242">Geben Sie in der **Paket-Manager-Konsole**den folgenden Befehl ein, und drücken Sie dann die **Eingabe**Taste.</span><span class="sxs-lookup"><span data-stu-id="31443-242">In the **Package Manager Console**, enter the following command and then press **Enter**.</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample9.ps1)]
10. <span data-ttu-id="31443-243">Die Ausgabe des **Update-Database-** Befehls hat eine **ALTER TABLE** SQL-Anweisung generiert, um den *Hinweis* Spaltentyp der Tabelle " **triviaquestions** " zu aktualisieren, wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="31443-243">The output of the **Update-Database** command generated an **Alter Table** SQL statement to update the *hint* column type of the **TriviaQuestions** table, as shown in the image below.</span></span>

    <span data-ttu-id="31443-244">![Alter Column-SQL-Anweisung generiert](maintainable-azure-websites-managing-change-and-scale/_static/image11.png "Alter Column-SQL-Anweisung generiert")</span><span class="sxs-lookup"><span data-stu-id="31443-244">![Alter column SQL statement generated](maintainable-azure-websites-managing-change-and-scale/_static/image11.png "Alter column SQL statement generated")</span></span>

    <span data-ttu-id="31443-245">*Alter Column-SQL-Anweisung generiert*</span><span class="sxs-lookup"><span data-stu-id="31443-245">*Alter column SQL statement generated*</span></span>
11. <span data-ttu-id="31443-246">Aktualisieren Sie in **SQL Server-Objekt-Explorer**den **dbo. Triviaquestions** -Tabelle, und überprüfen Sie, ob der **Hinweis** Spaltentyp **nvarchar (150)** ist.</span><span class="sxs-lookup"><span data-stu-id="31443-246">In **SQL Server Object Explorer**, refresh the **dbo.TriviaQuestions** table and check that the **Hint** column type is **nvarchar(150)**.</span></span>

    <span data-ttu-id="31443-247">![Die neue Einschränkung wird angezeigt.](maintainable-azure-websites-managing-change-and-scale/_static/image12.png "Die neue Einschränkung wird angezeigt.")</span><span class="sxs-lookup"><span data-stu-id="31443-247">![Showing the new constraint](maintainable-azure-websites-managing-change-and-scale/_static/image12.png "Showing the new constraint")</span></span>

    <span data-ttu-id="31443-248">*Die neue Einschränkung wird angezeigt.*</span><span class="sxs-lookup"><span data-stu-id="31443-248">*Showing the new constraint*</span></span>

<a id="Exercise2"></a>
### <a name="exercise-2-deploying-a-web-app-to-staging"></a><span data-ttu-id="31443-249">Übung 2: Bereitstellen einer Web-App für die Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="31443-249">Exercise 2: Deploying a Web App to Staging</span></span>

<span data-ttu-id="31443-250">Mit **Web-Apps in Azure App Service** können Sie eine gestaffelte Veröffentlichung durchführen.</span><span class="sxs-lookup"><span data-stu-id="31443-250">**Web Apps in Azure App Service** enables you to perform staged publishing.</span></span> <span data-ttu-id="31443-251">Die gestaffelte Veröffentlichung erstellt einen stagingsiteslot für jede Standard Produktions Site und ermöglicht es Ihnen, diese Slots ohne Ausfallzeit auszutauschen.</span><span class="sxs-lookup"><span data-stu-id="31443-251">Staged publishing creates a staging site slot for each default production site and enables you to swap these slots with no down time.</span></span> <span data-ttu-id="31443-252">Dies ist sehr nützlich, um Änderungen vor der Veröffentlichung in der Öffentlichkeit zu überprüfen, Website Inhalte inkrementell zu integrieren und einen Rollback auszuführen, wenn die Änderungen nicht erwartungsgemäß funktionieren.</span><span class="sxs-lookup"><span data-stu-id="31443-252">This is really useful to validate changes before releasing to the public, incrementally integrate site content, and roll back if changes are not working as expected.</span></span>

<span data-ttu-id="31443-253">In dieser Übung stellen Sie die Anwendung " **Geek Quiz** " mithilfe der git-Quell Code Verwaltung in der Stagingumgebung Ihrer Web-App bereit.</span><span class="sxs-lookup"><span data-stu-id="31443-253">In this exercise, you will deploy the **Geek Quiz** application to the staging environment of your web app using Git source control.</span></span> <span data-ttu-id="31443-254">Zu diesem Zweck erstellen Sie die Web-App und stellen die erforderlichen Komponenten im Verwaltungs Portal bereit. Konfigurieren Sie ein **git** -Repository, und verschieben Sie den Quellcode der Anwendung vom lokalen Computer in den stagingslot.</span><span class="sxs-lookup"><span data-stu-id="31443-254">To do this, you will create the web app and provision the required components at the management portal, configure a **Git** repository and push the application source code from your local computer to the staging slot.</span></span> <span data-ttu-id="31443-255">Außerdem aktualisieren Sie die Produktionsdatenbank mit dem **Code First-Migrationen** , den Sie in der vorherigen Übung erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="31443-255">You will also update your production database with the **Code First Migrations** you created in the previous exercise.</span></span> <span data-ttu-id="31443-256">Anschließend führen Sie die Anwendung in dieser Testumgebung aus, um den Vorgang zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="31443-256">You will then execute the application in this test environment to verify its operation.</span></span> <span data-ttu-id="31443-257">Wenn Sie zufrieden sind, dass Sie gemäß Ihren Erwartungen funktioniert, werden Sie die Anwendung auf die Produktion herauf Stufen.</span><span class="sxs-lookup"><span data-stu-id="31443-257">Once you are satisfied that it is working according to your expectations, you will promote the application to production.</span></span>

> [!NOTE]
> <span data-ttu-id="31443-258">Zum Aktivieren der stagingveröffentlichung muss sich die Web-App im **Standard Modus**befinden.</span><span class="sxs-lookup"><span data-stu-id="31443-258">To enable staged publishing, the web app must be in **Standard mode**.</span></span> <span data-ttu-id="31443-259">Beachten Sie, dass zusätzliche Gebühren anfallen, wenn Sie Ihre Web-App in den Standard Modus ändern.</span><span class="sxs-lookup"><span data-stu-id="31443-259">Note that additional charges will be incurred if you change your web app to Standard mode.</span></span> <span data-ttu-id="31443-260">Weitere Informationen zu den Preisen finden Sie unter [App Service Preise](https://azure.microsoft.com/pricing/details/app-service/).</span><span class="sxs-lookup"><span data-stu-id="31443-260">For more information about pricing, see [App Service Pricing](https://azure.microsoft.com/pricing/details/app-service/).</span></span>

<a id="Ex2Task1"></a>
#### <a name="task-1--creating-a-web-app-in-azure-app-service"></a><span data-ttu-id="31443-261">Aufgabe 1 – Erstellen einer Web-App in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="31443-261">Task 1 – Creating a Web App in Azure App Service</span></span>

<span data-ttu-id="31443-262">In dieser Aufgabe erstellen Sie eine Web-App in **Azure App Service** aus dem Verwaltungs Portal.</span><span class="sxs-lookup"><span data-stu-id="31443-262">In this task, you will create a web app in **Azure App Service** from the management portal.</span></span> <span data-ttu-id="31443-263">Außerdem konfigurieren Sie eine **SQL-Datenbank** , um die Anwendungsdaten beizubehalten, und konfigurieren ein lokales git-Repository für die Quell Code Verwaltung.</span><span class="sxs-lookup"><span data-stu-id="31443-263">You will also configure a **SQL Database** to persist the application data, and configure a local Git repository for source control.</span></span>

1. <span data-ttu-id="31443-264">Wechseln Sie zum [Azure-Verwaltungs Portal](https://manage.windowsazure.com) , und melden Sie sich mit der Microsoft-Konto an, die Ihrem Abonnement zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="31443-264">Go to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>

    ![Melden Sie sich beim Azure-Verwaltungs Portal an.](maintainable-azure-websites-managing-change-and-scale/_static/image13.png)

    <span data-ttu-id="31443-266">*Melden Sie sich beim Azure-Verwaltungs Portal an.*</span><span class="sxs-lookup"><span data-stu-id="31443-266">*Sign in to the Azure management portal*</span></span>
2. <span data-ttu-id="31443-267">Klicken Sie in der Befehlsleiste unten auf der Seite auf **neu** .</span><span class="sxs-lookup"><span data-stu-id="31443-267">Click **New** in the command bar at the bottom of the page.</span></span>

    <span data-ttu-id="31443-268">![Erstellen einer neuen Web-App](maintainable-azure-websites-managing-change-and-scale/_static/image14.png "Erstellen einer neuen Web-App")</span><span class="sxs-lookup"><span data-stu-id="31443-268">![Creating a new web app](maintainable-azure-websites-managing-change-and-scale/_static/image14.png "Creating a new web app")</span></span>

    <span data-ttu-id="31443-269">*Erstellen einer neuen Web-App*</span><span class="sxs-lookup"><span data-stu-id="31443-269">*Creating a new web app*</span></span>
3. <span data-ttu-id="31443-270">Klicken Sie auf **Compute**, **Website** und dann auf **Benutzer definiert erstellen**.</span><span class="sxs-lookup"><span data-stu-id="31443-270">Click **Compute**, **Website** and then **Custom Create**.</span></span>

    <span data-ttu-id="31443-271">![Erstellen einer neuen Web-App mit benutzerdefiniertem erstellen](maintainable-azure-websites-managing-change-and-scale/_static/image15.png "Erstellen einer neuen Web-App mit benutzerdefiniertem erstellen")</span><span class="sxs-lookup"><span data-stu-id="31443-271">![Creating a new web app using Custom Create](maintainable-azure-websites-managing-change-and-scale/_static/image15.png "Creating a new web app using Custom Create")</span></span>

    <span data-ttu-id="31443-272">*Erstellen einer neuen Web-App mit benutzerdefiniertem erstellen*</span><span class="sxs-lookup"><span data-stu-id="31443-272">*Creating a new web app using Custom Create*</span></span>
4. <span data-ttu-id="31443-273">Geben Sie im Dialogfeld **neue Website-benutzerdefiniertes erstellen** eine verfügbare **URL** an (z. b. " *Geek-Quiz*"), wählen Sie einen Speicherort in der Dropdown Liste **Region** aus, und wählen Sie in der Dropdown Liste **Datenbank** die Option **neue SQL-Datenbank erstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="31443-273">In the **New Website - Custom Create** dialog box, provide an available **URL** (e.g. *geek-quiz*), select a location in the **Region** drop-down list, and select **Create a new SQL database** in the **Database** drop-down list.</span></span> <span data-ttu-id="31443-274">Wählen Sie abschließend das Kontrollkästchen **aus Quell Code Verwaltung veröffentlichen aus** , und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-274">Finally, select the **Publish from source control** check box and click **Next**.</span></span>

    ![Anpassen der neuen Web-App](maintainable-azure-websites-managing-change-and-scale/_static/image16.png)

    <span data-ttu-id="31443-276">*Anpassen der neuen Web-App*</span><span class="sxs-lookup"><span data-stu-id="31443-276">*Customizing the new web app*</span></span>
5. <span data-ttu-id="31443-277">Geben Sie die folgenden Informationen für die Datenbankeinstellungen an:</span><span class="sxs-lookup"><span data-stu-id="31443-277">Specify the following information for the database settings:</span></span>

   - <span data-ttu-id="31443-278">Geben Sie im Textfeld **Name** einen Datenbanknamen ein (z. b. *geekquiz\_DB*).</span><span class="sxs-lookup"><span data-stu-id="31443-278">In the **Name** text box, enter a database name (e.g. *geekquiz\_db*)</span></span>
   - <span data-ttu-id="31443-279">Wählen Sie in der **Dropdown** Liste Server die Option **neuer SQL-Daten Bank Server**aus.</span><span class="sxs-lookup"><span data-stu-id="31443-279">In the Server **drop-down** list, select **New SQL database server**.</span></span> <span data-ttu-id="31443-280">Wahlweise können Sie auch einen vorhandenen Server auswählen.</span><span class="sxs-lookup"><span data-stu-id="31443-280">Alternatively, you can select an existing server.</span></span>
   - <span data-ttu-id="31443-281">Geben Sie in den Feldern **Datenbank-Benutzername** und **Daten Bank Kennwort** den Benutzernamen und das Kennwort für den SQL-Datenbankserver ein</span><span class="sxs-lookup"><span data-stu-id="31443-281">In the **Database username** and **Database password** boxes, enter the administrator username and password for the SQL database server.</span></span> <span data-ttu-id="31443-282">Wenn Sie einen Server auswählen, den Sie bereits erstellt haben, werden Sie zur Eingabe des Kennworts aufgefordert.</span><span class="sxs-lookup"><span data-stu-id="31443-282">If you select a server you have already created, you will be prompted for the password.</span></span>

     ![Angeben der Datenbankeinstellungen](maintainable-azure-websites-managing-change-and-scale/_static/image17.png)

     <span data-ttu-id="31443-284">*Angeben der Datenbankeinstellungen*</span><span class="sxs-lookup"><span data-stu-id="31443-284">*Specifying the database settings*</span></span>
6. <span data-ttu-id="31443-285">Klicken Sie auf **Weiter**, um fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="31443-285">Click **Next** to continue.</span></span>
7. <span data-ttu-id="31443-286">Wählen Sie **Lokales git-Repository** für die Quell Code Verwaltung aus, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-286">Select **Local Git repository** for the source control to use and click **Next**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-287">Möglicherweise werden Sie zur Eingabe der Anmelde Informationen für die Bereitstellung aufgefordert (Benutzername und Kennwort).</span><span class="sxs-lookup"><span data-stu-id="31443-287">You may be prompted for the deployment credentials (a username and password).</span></span>

    ![Erstellen des git-Repository](maintainable-azure-websites-managing-change-and-scale/_static/image18.png)

    <span data-ttu-id="31443-289">*Erstellen des git-Repository*</span><span class="sxs-lookup"><span data-stu-id="31443-289">*Creating the Git repository*</span></span>
8. <span data-ttu-id="31443-290">Warten Sie, bis die neue Web-App erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="31443-290">Wait until the new web app is created.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-291">Standardmäßig stellt Azure Domänen unter *azurewebsites.net* bereit, bietet Ihnen jedoch auch die Möglichkeit, benutzerdefinierte Domänen mithilfe des Azure-Verwaltungs Portals festzulegen.</span><span class="sxs-lookup"><span data-stu-id="31443-291">By default, Azure provides domains at *azurewebsites.net* but also gives you the possibility to set custom domains using the Azure management portal.</span></span> <span data-ttu-id="31443-292">Sie können jedoch nur benutzerdefinierte Domänen verwalten, wenn Sie bestimmte Azure App Service Modi verwenden.</span><span class="sxs-lookup"><span data-stu-id="31443-292">However, you can only manage custom domains if you are using certain Azure App Service modes.</span></span>
    >
    > <span data-ttu-id="31443-293">Azure App Service ist in den Editionen Free, Shared, Basic, Standard und Premium verfügbar.</span><span class="sxs-lookup"><span data-stu-id="31443-293">Azure App Service is available in Free, Shared, Basic, Standard, and Premium editions.</span></span> <span data-ttu-id="31443-294">Im Modus "kostenlos" und "freigegeben" werden alle Web-Apps in einer mehr Instanzen fähigen Umgebung ausgeführt und verfügen über Kontingente für die CPU-, Arbeitsspeicher-und Netzwerk Auslastung.</span><span class="sxs-lookup"><span data-stu-id="31443-294">In Free and Shared mode, all web apps run in a multi-tenant environment and have quotas for CPU, Memory, and Network usage.</span></span> <span data-ttu-id="31443-295">Die maximale Anzahl von kostenlosen Apps kann mit Ihrem Plan variieren.</span><span class="sxs-lookup"><span data-stu-id="31443-295">The maximum number of free apps may vary with your plan.</span></span> <span data-ttu-id="31443-296">Im Standard Modus wählen Sie aus, welche apps auf dedizierten virtuellen Computern ausgeführt werden, die den Standard mäßigen Azure-Compute-Ressourcen entsprechen.</span><span class="sxs-lookup"><span data-stu-id="31443-296">In Standard mode, you choose which apps run on dedicated virtual machines that correspond to the standard Azure compute resources.</span></span> <span data-ttu-id="31443-297">Sie finden die Konfiguration des Web-App-Modus im Menü **skalieren** Ihrer Web-App.</span><span class="sxs-lookup"><span data-stu-id="31443-297">You can find the web app mode configuration in the **Scale** menu of your web app.</span></span>
    >
    > <span data-ttu-id="31443-298">![Azure App Service Modi](maintainable-azure-websites-managing-change-and-scale/_static/image19.png "Azure App Service Modi")</span><span class="sxs-lookup"><span data-stu-id="31443-298">![Azure App Service Modes](maintainable-azure-websites-managing-change-and-scale/_static/image19.png "Azure App Service Modes")</span></span>
    >
    > <span data-ttu-id="31443-299">Wenn Sie den Modus "frei **gegeben** " oder " **Standard** " verwenden, können Sie benutzerdefinierte Domänen für Ihre Web-App verwalten, indem Sie zum Menü **Konfigurieren** der App wechseln und Unterdomänen *Namen*auf **Domänen verwalten** klicken.</span><span class="sxs-lookup"><span data-stu-id="31443-299">If you are using **Shared** or **Standard** mode, you will be able to manage custom domains for your web app by going to your app's **Configure** menu and clicking **Manage Domains** under *domain names*.</span></span>
    >
    > <span data-ttu-id="31443-300">![Verwalten von Domänen](maintainable-azure-websites-managing-change-and-scale/_static/image20.png "Verwalten von Domänen")</span><span class="sxs-lookup"><span data-stu-id="31443-300">![Manage Domains](maintainable-azure-websites-managing-change-and-scale/_static/image20.png "Manage Domains")</span></span>
    >
    > <span data-ttu-id="31443-301">![Benutzerdefinierte Domänen verwalten](maintainable-azure-websites-managing-change-and-scale/_static/image21.png "Benutzerdefinierte Domänen verwalten")</span><span class="sxs-lookup"><span data-stu-id="31443-301">![Manage Custom Domains](maintainable-azure-websites-managing-change-and-scale/_static/image21.png "Manage Custom Domains")</span></span>
9. <span data-ttu-id="31443-302">Nachdem die Web-App erstellt wurde, klicken Sie auf den Link unter der Spalte **URL** , um zu überprüfen, ob die neue Web-App ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="31443-302">Once the web app is created, click the link under the **URL** column to check that the new web app is running.</span></span>

    ![Navigieren zur neuen Web-App](maintainable-azure-websites-managing-change-and-scale/_static/image22.png)

    <span data-ttu-id="31443-304">*Navigieren zur neuen Web-App*</span><span class="sxs-lookup"><span data-stu-id="31443-304">*Browsing to the new web app*</span></span>

    ![Ausführung der Web-App](maintainable-azure-websites-managing-change-and-scale/_static/image23.png)

    <span data-ttu-id="31443-306">*Ausführung der Web-App*</span><span class="sxs-lookup"><span data-stu-id="31443-306">*web app running*</span></span>

<a id="Ex2Task2"></a>
#### <a name="task-2--creating-the-production-sql-database"></a><span data-ttu-id="31443-307">Aufgabe 2 – Erstellen der SQL-Produktionsdatenbank</span><span class="sxs-lookup"><span data-stu-id="31443-307">Task 2 – Creating the Production SQL Database</span></span>

<span data-ttu-id="31443-308">In dieser Aufgabe verwenden Sie die **Entity Framework Code First-Migrationen** , um die Datenbank für die **Azure SQL-Daten Bank** Instanz zu erstellen, die Sie in der vorherigen Aufgabe erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="31443-308">In this task, you will use the **Entity Framework Code First Migrations** to create the database targeting the **Azure SQL Database** instance you created in the previous task.</span></span>

1. <span data-ttu-id="31443-309">Navigieren Sie in der Verwaltungsportal zu der Web-App, die Sie in der vorherigen Aufgabe erstellt haben, und wechseln Sie zum **Dashboard**.</span><span class="sxs-lookup"><span data-stu-id="31443-309">In the Management Portal, navigate to the web app you created in the previous task and go to its **Dashboard**.</span></span>
2. <span data-ttu-id="31443-310">Klicken Sie auf der Seite **Dashboard** im Abschnitt **kurzer Blick** auf den Link Verbindungs Zeichenfolgen **anzeigen** .</span><span class="sxs-lookup"><span data-stu-id="31443-310">In the **Dashboard** page, click **View connection strings** link under the **quick glance** section.</span></span>

    <span data-ttu-id="31443-311">![Verbindungs Zeichenfolgen anzeigen](maintainable-azure-websites-managing-change-and-scale/_static/image24.png "Verbindungs Zeichenfolgen anzeigen")</span><span class="sxs-lookup"><span data-stu-id="31443-311">![View connection strings](maintainable-azure-websites-managing-change-and-scale/_static/image24.png "View connection strings")</span></span>

    <span data-ttu-id="31443-312">*Verbindungs Zeichenfolgen anzeigen*</span><span class="sxs-lookup"><span data-stu-id="31443-312">*View connection strings*</span></span>
3. <span data-ttu-id="31443-313">Kopieren Sie den Wert der **Verbindungs Zeichenfolge** und schließen Sie das Dialogfeld.</span><span class="sxs-lookup"><span data-stu-id="31443-313">Copy the **connection string** value and close the dialog box.</span></span>

    <span data-ttu-id="31443-314">![Verbindungs Zeichenfolge in Azure Verwaltungsportal](maintainable-azure-websites-managing-change-and-scale/_static/image25.png "Verbindungs Zeichenfolge in Azure Verwaltungsportal")</span><span class="sxs-lookup"><span data-stu-id="31443-314">![Connection String in Azure Management Portal](maintainable-azure-websites-managing-change-and-scale/_static/image25.png "Connection String in Azure Management Portal")</span></span>

    <span data-ttu-id="31443-315">*Verbindungs Zeichenfolge in Azure Verwaltungsportal*</span><span class="sxs-lookup"><span data-stu-id="31443-315">*Connection String in Azure Management Portal*</span></span>
4. <span data-ttu-id="31443-316">Klicken Sie auf **SQL-Datenbanken** , um die Liste der SQL-Datenbanken in Azure</span><span class="sxs-lookup"><span data-stu-id="31443-316">Click **SQL Databases** to see the list of SQL databases in Azure</span></span>

    <span data-ttu-id="31443-317">![SQL-Datenbank-Menü](maintainable-azure-websites-managing-change-and-scale/_static/image26.png "SQL-Datenbank-Menü")</span><span class="sxs-lookup"><span data-stu-id="31443-317">![SQL Database menu](maintainable-azure-websites-managing-change-and-scale/_static/image26.png "SQL Database menu")</span></span>

    <span data-ttu-id="31443-318">*SQL-Datenbank-Menü*</span><span class="sxs-lookup"><span data-stu-id="31443-318">*SQL Database menu*</span></span>
5. <span data-ttu-id="31443-319">Suchen Sie die Datenbank, die Sie in der vorherigen Aufgabe erstellt haben, und klicken Sie auf den Server.</span><span class="sxs-lookup"><span data-stu-id="31443-319">Locate the database you created in the previous task and click on the Server.</span></span>

    <span data-ttu-id="31443-320">![SQL-Datenbankserver](maintainable-azure-websites-managing-change-and-scale/_static/image27.png "SQL-Datenbank-Server")</span><span class="sxs-lookup"><span data-stu-id="31443-320">![SQL Database server](maintainable-azure-websites-managing-change-and-scale/_static/image27.png "SQL Database server")</span></span>

    <span data-ttu-id="31443-321">*SQL-Datenbankserver*</span><span class="sxs-lookup"><span data-stu-id="31443-321">*SQL Database server*</span></span>
6. <span data-ttu-id="31443-322">Klicken Sie auf der Seite **Schnellstart** des Servers auf **Konfigurieren**.</span><span class="sxs-lookup"><span data-stu-id="31443-322">In the **Quick Start** page of the server, click on **Configure**.</span></span>

    <span data-ttu-id="31443-323">![Menü konfigurieren](maintainable-azure-websites-managing-change-and-scale/_static/image28.png "Menü konfigurieren")</span><span class="sxs-lookup"><span data-stu-id="31443-323">![Configure menu](maintainable-azure-websites-managing-change-and-scale/_static/image28.png "Configure menu")</span></span>

    <span data-ttu-id="31443-324">*Menü konfigurieren*</span><span class="sxs-lookup"><span data-stu-id="31443-324">*Configure menu*</span></span>
7. <span data-ttu-id="31443-325">Klicken Sie im Abschnitt **zulässige IP-Adressen** auf **Hinzufügen zum Link zulässige IP-Adressen** , um die IP-Adresse für die Verbindung mit dem SQL-Datenbankserver zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="31443-325">In the **Allowed IP addresses** section, click on **Add to the allowed IP addresses** link to enable your IP to connect to the SQL Database server.</span></span>

    <span data-ttu-id="31443-326">![Zulässige IP-Adressen](maintainable-azure-websites-managing-change-and-scale/_static/image29.png "Zulässige IP-Adressen")</span><span class="sxs-lookup"><span data-stu-id="31443-326">![Allowed IP addresses](maintainable-azure-websites-managing-change-and-scale/_static/image29.png "Allowed IP addresses")</span></span>

    <span data-ttu-id="31443-327">*Zulässige IP-Adressen*</span><span class="sxs-lookup"><span data-stu-id="31443-327">*Allowed IP addresses*</span></span>
8. <span data-ttu-id="31443-328">Klicken Sie unten auf der Seite auf **Save** , um den Schritt abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="31443-328">Click **Save** at the bottom of the page to complete the step.</span></span>
9. <span data-ttu-id="31443-329">Wechseln Sie zurück zu Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="31443-329">Switch back to Visual Studio.</span></span>
10. <span data-ttu-id="31443-330">Führen Sie in der **Paket-Manager-Konsole**den folgenden Befehl aus, indem Sie den Platzhalter *[Your-Connection-String]* durch die aus Azure kopierte Verbindungs Zeichenfolge ersetzen.</span><span class="sxs-lookup"><span data-stu-id="31443-330">In the **Package Manager Console**, execute the following command replacing *[YOUR-CONNECTION-STRING]* placeholder with the connection string you copied from Azure</span></span>

    [!code-powershell[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample10.ps1)]

    <span data-ttu-id="31443-331">![Aktualisieren der Datenbank für die Windows Azure SQL-Datenbank](maintainable-azure-websites-managing-change-and-scale/_static/image30.png "Aktualisieren der Datenbank für die Windows Azure SQL-Datenbank")</span><span class="sxs-lookup"><span data-stu-id="31443-331">![Update database targeting Windows Azure SQL Database](maintainable-azure-websites-managing-change-and-scale/_static/image30.png "Update database targeting Windows Azure SQL Database")</span></span>

    <span data-ttu-id="31443-332">*Aktualisieren der Datenbank für die Azure SQL-Datenbank*</span><span class="sxs-lookup"><span data-stu-id="31443-332">*Update database targeting Azure SQL Database*</span></span>

<a id="Ex2Task3"></a>
#### <a name="task-3--deploying-geek-quiz-to-staging-using-git"></a><span data-ttu-id="31443-333">Aufgabe 3 – Bereitstellen von Geek Quiz für Staging mithilfe von git</span><span class="sxs-lookup"><span data-stu-id="31443-333">Task 3 – Deploying Geek Quiz to Staging Using Git</span></span>

<span data-ttu-id="31443-334">In dieser Aufgabe aktivieren Sie die gestaffelte Veröffentlichung in Ihrer Web-App.</span><span class="sxs-lookup"><span data-stu-id="31443-334">In this task, you will enable staged publishing in your web app.</span></span> <span data-ttu-id="31443-335">Anschließend verwenden Sie git, um die Geek-Quiz Anwendung direkt von Ihrem lokalen Computer in der Stagingumgebung Ihrer Web-App zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="31443-335">Then, you will use Git to publish the Geek Quiz application directly from your local computer to the staging environment of your web app.</span></span>

1. <span data-ttu-id="31443-336">Wechseln Sie zurück zum Portal, und klicken Sie auf den Namen der Web-App unter der Spalte **Name** , um die Verwaltungs Seiten anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="31443-336">Go back to the portal and click the name of the web app under the **Name** column to display the management pages.</span></span>

    ![Öffnen der Web-App-Verwaltungs Seiten](maintainable-azure-websites-managing-change-and-scale/_static/image31.png)

    <span data-ttu-id="31443-338">*Öffnen der Web-App-Verwaltungs Seiten*</span><span class="sxs-lookup"><span data-stu-id="31443-338">*Opening the web app management pages*</span></span>
2. <span data-ttu-id="31443-339">Navigieren Sie zur Seite **skalieren** .</span><span class="sxs-lookup"><span data-stu-id="31443-339">Navigate to the **Scale** page.</span></span> <span data-ttu-id="31443-340">Wählen Sie im Abschnitt **Allgemein** die Option **Standard** für die Konfiguration aus, und klicken Sie auf der Befehlsleiste auf **Speichern** .</span><span class="sxs-lookup"><span data-stu-id="31443-340">Under the **general** section, select **Standard** for the configuration and click **Save** in the command bar.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-341">Wenn Sie alle Web-Apps in der aktuellen Region und im **Standard** Modus ausführen möchten, lassen Sie das Kontrollkästchen **Alle auswählen** in der Konfiguration **Websites auswählen** aktiviert.</span><span class="sxs-lookup"><span data-stu-id="31443-341">To run all web apps in the current region and subscription in **Standard** mode, leave the **Select All** check box selected in the **Choose Sites** configuration.</span></span> <span data-ttu-id="31443-342">Deaktivieren Sie andernfalls das Kontrollkästchen **Alles auswählen** .</span><span class="sxs-lookup"><span data-stu-id="31443-342">Otherwise, clear the **Select All** check box.</span></span>

    <span data-ttu-id="31443-343">![Aktualisieren der Web-App auf den Standard Modus](maintainable-azure-websites-managing-change-and-scale/_static/image32.png "Aktualisieren der Web-App auf den Standard Modus")</span><span class="sxs-lookup"><span data-stu-id="31443-343">![Upgrading the web app to Standard mode](maintainable-azure-websites-managing-change-and-scale/_static/image32.png "Upgrading the web app to Standard mode")</span></span>

    <span data-ttu-id="31443-344">*Aktualisieren der Web-App auf den Standard Modus*</span><span class="sxs-lookup"><span data-stu-id="31443-344">*Upgrading the Web App to Standard mode*</span></span>
3. <span data-ttu-id="31443-345">Klicken Sie auf **Ja** , um die Änderungen zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="31443-345">Click **Yes** to confirm the changes.</span></span>

    <span data-ttu-id="31443-346">![Bestätigen der Änderung am Standard Modus](maintainable-azure-websites-managing-change-and-scale/_static/image33.png "Fortsetzen der Änderung des Web-App-Modus")</span><span class="sxs-lookup"><span data-stu-id="31443-346">![Confirming the change to Standard mode](maintainable-azure-websites-managing-change-and-scale/_static/image33.png "Continuing with the changing of the web app mode")</span></span>

    <span data-ttu-id="31443-347">*Bestätigen der Änderung am Standard Modus*</span><span class="sxs-lookup"><span data-stu-id="31443-347">*Confirming the change to Standard mode*</span></span>
4. <span data-ttu-id="31443-348">Wechseln Sie zur Seite **Dashboard** , und klicken Sie im Abschnitt **kurzer Blick** auf bereitgestellte **Veröffentlichung aktivieren** .</span><span class="sxs-lookup"><span data-stu-id="31443-348">Go to the **Dashboard** page and click **Enable staged publishing** under the **quick glance** section.</span></span>

    <span data-ttu-id="31443-349">![Aktivieren der gestaffelten Veröffentlichung](maintainable-azure-websites-managing-change-and-scale/_static/image34.png "Aktivieren der gestaffelten Veröffentlichung")</span><span class="sxs-lookup"><span data-stu-id="31443-349">![Enabling staged publishing](maintainable-azure-websites-managing-change-and-scale/_static/image34.png "Enabling staged publishing")</span></span>

    <span data-ttu-id="31443-350">*Aktivieren der gestaffelten Veröffentlichung*</span><span class="sxs-lookup"><span data-stu-id="31443-350">*Enabling staged publishing*</span></span>
5. <span data-ttu-id="31443-351">Klicken Sie zum Aktivieren der stagingveröffentlichung auf **Ja** .</span><span class="sxs-lookup"><span data-stu-id="31443-351">Click **Yes** to enable staged publishing.</span></span>

    <span data-ttu-id="31443-352">![Bestätigung der gestaffelten Veröffentlichung](maintainable-azure-websites-managing-change-and-scale/_static/image35.png "Klicken Sie zum Aktivieren der stagingveröffentlichung auf Ja")</span><span class="sxs-lookup"><span data-stu-id="31443-352">![Confirming staged publishing](maintainable-azure-websites-managing-change-and-scale/_static/image35.png "Clicking Yes to enable staged publishing")</span></span>

    <span data-ttu-id="31443-353">*Bestätigung der gestaffelten Veröffentlichung*</span><span class="sxs-lookup"><span data-stu-id="31443-353">*Confirming staged publishing*</span></span>
6. <span data-ttu-id="31443-354">Erweitern Sie in der Liste der Web-Apps die Markierung links neben Ihrem Web-App-Namen, um den stagingsiteslot anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="31443-354">In the list of web apps, expand the mark to the left of your web app name to display the staging site slot.</span></span> <span data-ttu-id="31443-355">Sie hat den Namen Ihrer Web-App gefolgt von ***(Staging)***.</span><span class="sxs-lookup"><span data-stu-id="31443-355">It has the name of your web app followed by ***(staging)***.</span></span> <span data-ttu-id="31443-356">Klicken Sie auf die Stagingsite, um zur Verwaltungsseite zu gelangen.</span><span class="sxs-lookup"><span data-stu-id="31443-356">Click the staging site to go to the management page.</span></span>

    <span data-ttu-id="31443-357">![Navigieren zur Staging-Web-App](maintainable-azure-websites-managing-change-and-scale/_static/image36.png "Navigieren zur Staging-Web-App")</span><span class="sxs-lookup"><span data-stu-id="31443-357">![Navigating to the staging web app](maintainable-azure-websites-managing-change-and-scale/_static/image36.png "Navigating to the staging web app")</span></span>

    <span data-ttu-id="31443-358">*Navigieren zur Staging-App*</span><span class="sxs-lookup"><span data-stu-id="31443-358">*Navigating to the staging app*</span></span>
7. <span data-ttu-id="31443-359">Beachten Sie, dass die Verwaltungsseite wie jede andere Verwaltungsseite der Web-App aussieht.</span><span class="sxs-lookup"><span data-stu-id="31443-359">Notice that he management page looks like any other web app's management page.</span></span> <span data-ttu-id="31443-360">Navigieren Sie zur Seite bereit **Stellungen** , und kopieren Sie den Wert der **git-URL** .</span><span class="sxs-lookup"><span data-stu-id="31443-360">Navigate to the **Deployments** page and copy the **Git URL** value.</span></span> <span data-ttu-id="31443-361">Sie werden Sie später in dieser Übung verwenden.</span><span class="sxs-lookup"><span data-stu-id="31443-361">You will use it later in this exercise.</span></span>

    ![Kopieren des git-URL-Werts](maintainable-azure-websites-managing-change-and-scale/_static/image37.png)

    <span data-ttu-id="31443-363">*Kopieren des git-URL-Werts*</span><span class="sxs-lookup"><span data-stu-id="31443-363">*Copying the Git URL value*</span></span>
8. <span data-ttu-id="31443-364">Öffnen Sie eine neue **git bash** -Konsole, und führen Sie die folgenden Befehle aus.</span><span class="sxs-lookup"><span data-stu-id="31443-364">Open a new **Git Bash** console and execute the following commands.</span></span> <span data-ttu-id="31443-365">Aktualisieren Sie den Platzhalter *[your-application-path]* mit dem Pfad zur **geekquiz-Projekt** Mappe, die sich im Ordner **source\ex1-deployingwebsitedestaging\begin** dieses Labs befindet.</span><span class="sxs-lookup"><span data-stu-id="31443-365">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution, located in the **Source\Ex1-DeployingWebSiteToStaging\Begin** folder of this lab.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample11.cmd)]

    ![Git-Initialisierung und erster Commit](maintainable-azure-websites-managing-change-and-scale/_static/image38.png)

    <span data-ttu-id="31443-367">*Git-Initialisierung und erster Commit*</span><span class="sxs-lookup"><span data-stu-id="31443-367">*Git initialization and first commit*</span></span>
9. <span data-ttu-id="31443-368">Führen Sie den folgenden Befehl aus, um Ihre Web-App an das **git** -Remote Repository zu überführen.</span><span class="sxs-lookup"><span data-stu-id="31443-368">Run the following command to push your web app to the remote **Git** repository.</span></span> <span data-ttu-id="31443-369">Ersetzen Sie den Platzhalter durch die URL, die Sie aus dem Verwaltungs Portal abgerufen haben.</span><span class="sxs-lookup"><span data-stu-id="31443-369">Replace the placeholder with the URL you obtained from the management portal.</span></span> <span data-ttu-id="31443-370">Sie werden zur Eingabe Ihres Bereitstellungs Kennworts aufgefordert.</span><span class="sxs-lookup"><span data-stu-id="31443-370">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample12.cmd)]

    ![Pushübertragung an Windows Azure](maintainable-azure-websites-managing-change-and-scale/_static/image39.png)

    <span data-ttu-id="31443-372">*Pushübertragung an Azure*</span><span class="sxs-lookup"><span data-stu-id="31443-372">*Pushing to Azure*</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-373">Wenn Sie Inhalte auf dem FTP-Host oder im git-Repository einer Web-App bereitstellen, müssen Sie sich mit den Anmelde Informationen für die **Bereitstellung** authentifizieren, die Sie auf den Verwaltungs Seiten **Schnellstart** oder **Dashboard** der Web-App erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="31443-373">When you deploy content to the FTP host or GIT repository of a web app, you must authenticate using the **deployment credentials** that you created from the web app's **Quick Start** or **Dashboard** management pages.</span></span> <span data-ttu-id="31443-374">Wenn Sie Ihre Anmelde Informationen für die Bereitstellung nicht kennen, können Sie Sie problemlos mithilfe des Verwaltungs Portals zurücksetzen.</span><span class="sxs-lookup"><span data-stu-id="31443-374">If you do not know your deployment credentials you can easily reset them using the management portal.</span></span> <span data-ttu-id="31443-375">Öffnen Sie die Seite Web-App- **Dashboard** , und klicken Sie auf den Link zur **Bereitstellung der Anmelde** Informationen</span><span class="sxs-lookup"><span data-stu-id="31443-375">Open the web app **Dashboard** page and click the **Reset your deployment credentials** link.</span></span> <span data-ttu-id="31443-376">Geben **Sie ein**neues Kennwort ein, und klicken Sie auf</span><span class="sxs-lookup"><span data-stu-id="31443-376">Provide a new password and click **OK**.</span></span> <span data-ttu-id="31443-377">Anmelde Informationen für die Bereitstellung können für alle Web-Apps verwendet werden, die Ihrem Abonnement zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="31443-377">Deployment credentials are valid for use with all web apps associated with your subscription.</span></span>
10. <span data-ttu-id="31443-378">Wechseln Sie zurück zum Verwaltungs Portal, und klicken Sie auf **Websites**, um zu überprüfen, ob die Web-App erfolgreich in Azure übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="31443-378">In order to verify the web app was successfully pushed to Azure, go back to the management portal and click **Websites**.</span></span>
11. <span data-ttu-id="31443-379">Suchen Sie Ihre Web-App, und erweitern Sie den Eintrag, um den stagingsiteslot anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="31443-379">Locate your web app and expand the entry to display the staging site slot.</span></span> <span data-ttu-id="31443-380">Klicken Sie auf den **Namen** , um zur Verwaltungsseite zu gelangen.</span><span class="sxs-lookup"><span data-stu-id="31443-380">Click its **Name** to go to the management page.</span></span>
12. <span data-ttu-id="31443-381">Klicken Sie auf bereit **Stellungen** , um den **Bereitstellungs Verlauf**anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="31443-381">Click **Deployments** to see the **deployment history**.</span></span> <span data-ttu-id="31443-382">Vergewissern Sie sich, dass eine **aktive Bereitstellung** mit Ihrem *&quot;anfänglichen Commit-&quot;* vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="31443-382">Verify that there is an **Active Deployment** with your *&quot;Initial Commit&quot;*.</span></span>

    ![Aktive Bereitstellung](maintainable-azure-websites-managing-change-and-scale/_static/image40.png)

    <span data-ttu-id="31443-384">*Aktive Bereitstellung*</span><span class="sxs-lookup"><span data-stu-id="31443-384">*Active deployment*</span></span>
13. <span data-ttu-id="31443-385">Klicken Sie abschließend in der Befehlsleiste auf **Durchsuchen** , um zur Web-App zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="31443-385">Finally, click **Browse** in the command bar to go to the web app.</span></span>

    ![Web-App durchsuchen](maintainable-azure-websites-managing-change-and-scale/_static/image41.png)

    <span data-ttu-id="31443-387">*Web-App durchsuchen*</span><span class="sxs-lookup"><span data-stu-id="31443-387">*Browse web app*</span></span>
14. <span data-ttu-id="31443-388">Wenn die Anwendung erfolgreich bereitgestellt wurde, wird die Anmeldeseite für den Geek-Quiz angezeigt.</span><span class="sxs-lookup"><span data-stu-id="31443-388">If the application is successfully deployed, you will see the Geek Quiz login page.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-389">Die Adress-URL der bereitgestellten Anwendung enthält den Namen Ihrer Web-App gefolgt von *-Staging*.</span><span class="sxs-lookup"><span data-stu-id="31443-389">The address URL of the deployed application contains the name of your web app followed by *-staging*.</span></span>

    ![Anwendung, die in der Stagingumgebung ausgeführt wird](maintainable-azure-websites-managing-change-and-scale/_static/image42.png)

    <span data-ttu-id="31443-391">*Anwendung, die in der Stagingumgebung ausgeführt wird*</span><span class="sxs-lookup"><span data-stu-id="31443-391">*Application running in the staging environment*</span></span>
15. <span data-ttu-id="31443-392">Wenn Sie die Anwendung untersuchen möchten, klicken Sie auf **registrieren** , um einen neuen Benutzer zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="31443-392">If you wish to explore the application, click **Register** to register a new user.</span></span> <span data-ttu-id="31443-393">Vervollständigen Sie die Konto Details, indem Sie Benutzername, e-Mail-Adresse und Kennwort eingeben.</span><span class="sxs-lookup"><span data-stu-id="31443-393">Complete the account details by entering a user name, email address and password.</span></span> <span data-ttu-id="31443-394">Im nächsten Schritt zeigt die Anwendung die erste Frage des Quiz.</span><span class="sxs-lookup"><span data-stu-id="31443-394">Next, the application shows the first question of the quiz.</span></span> <span data-ttu-id="31443-395">Beantworten Sie einige Fragen, um sicherzustellen, dass Sie erwartungsgemäß funktioniert.</span><span class="sxs-lookup"><span data-stu-id="31443-395">Answer a few questions to make sure it is working as expected.</span></span>

    ![Die Anwendung kann verwendet werden.](maintainable-azure-websites-managing-change-and-scale/_static/image43.png)

    <span data-ttu-id="31443-397">*Die Anwendung kann verwendet werden.*</span><span class="sxs-lookup"><span data-stu-id="31443-397">*Application ready to be used*</span></span>

<a id="Ex2Task4"></a>
#### <a name="task-4--promoting-the-web-app-to-production"></a><span data-ttu-id="31443-398">Aufgabe 4 – herauf Stufen der Web-App zur Produktion</span><span class="sxs-lookup"><span data-stu-id="31443-398">Task 4 – Promoting the Web App to Production</span></span>

<span data-ttu-id="31443-399">Nachdem Sie überprüft haben, dass die Web-App in der Stagingumgebung ordnungsgemäß funktioniert, können Sie Sie in die Produktion herauf Stufen.</span><span class="sxs-lookup"><span data-stu-id="31443-399">Now that you have verified that the web app is working correctly in the staging environment, you are ready to promote it to production.</span></span> <span data-ttu-id="31443-400">In dieser Aufgabe tauschen Sie den stagingsiteslot mit dem Produktionsstandort Slot aus.</span><span class="sxs-lookup"><span data-stu-id="31443-400">In this task, you will swap the staging site slot with the production site slot.</span></span>

1. <span data-ttu-id="31443-401">Wechseln Sie zurück zum Verwaltungs Portal, und wählen Sie den Slot der Stagingsite aus.</span><span class="sxs-lookup"><span data-stu-id="31443-401">Go back to the management portal and select the staging site slot.</span></span> <span data-ttu-id="31443-402">Klicken Sie in der Befehlsleiste auf **austauschen** .</span><span class="sxs-lookup"><span data-stu-id="31443-402">Click **Swap** in the command bar.</span></span>

    ![In Produktionsumgebungen austauschen](maintainable-azure-websites-managing-change-and-scale/_static/image44.png)

    <span data-ttu-id="31443-404">*In Produktionsumgebungen austauschen*</span><span class="sxs-lookup"><span data-stu-id="31443-404">*Swap to production*</span></span>
2. <span data-ttu-id="31443-405">Klicken Sie im Bestätigungs Dialogfeld auf **Ja** , um mit dem Austausch Vorgang fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="31443-405">Click **Yes** in the confirmation dialog box to proceed with the swap operation.</span></span> <span data-ttu-id="31443-406">Azure tauscht den Inhalt der Produktions Website sofort mit dem Inhalt der Stagingsite aus.</span><span class="sxs-lookup"><span data-stu-id="31443-406">Azure will immediately swap the content of the production site with the content of the staging site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-407">Einige Einstellungen der gestaffelten Version werden automatisch in die Produktionsversion kopiert (z. b. außer Kraft setzungen für Verbindungs Zeichenfolgen, Handlerzuordnungen usw.), andere Einstellungen werden jedoch nicht geändert (z. b. DNS-Endpunkte, SSL-Bindungen usw.).</span><span class="sxs-lookup"><span data-stu-id="31443-407">Some settings from the staged version will automatically be copied to the production version (e.g. connection string overrides, handler mappings, etc.) but other settings will not change (e.g. DNS endpoints, SSL bindings, etc.).</span></span>

    ![Bestätigen des Swap-Vorgangs](maintainable-azure-websites-managing-change-and-scale/_static/image45.png)

    <span data-ttu-id="31443-409">*Bestätigen des Swap-Vorgangs*</span><span class="sxs-lookup"><span data-stu-id="31443-409">*Confirming swap operation*</span></span>
3. <span data-ttu-id="31443-410">Wählen Sie nach Abschluss des Austauschs den Produktions Slot aus, und klicken Sie in der Befehlsleiste auf **Durchsuchen** , um die Produktions Website zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="31443-410">Once the swap is complete, select the production slot and click **Browse** in the command bar to open the production site.</span></span> <span data-ttu-id="31443-411">Beachten Sie die URL in der Adressleiste.</span><span class="sxs-lookup"><span data-stu-id="31443-411">Notice the URL in the address bar.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-412">Möglicherweise müssen Sie Ihren Browser aktualisieren, um den Cache zu löschen.</span><span class="sxs-lookup"><span data-stu-id="31443-412">You might need to refresh your browser to clear cache.</span></span> <span data-ttu-id="31443-413">In Internet Explorer können Sie dazu **STRG + R**drücken.</span><span class="sxs-lookup"><span data-stu-id="31443-413">In Internet Explorer, you can do this by pressing **CTRL+R**.</span></span>

    ![Ausführung der Web-App in der Produktionsumgebung](maintainable-azure-websites-managing-change-and-scale/_static/image46.png)
4. <span data-ttu-id="31443-415">Aktualisieren Sie in der **gitbash** -Konsole die Remote-URL für das lokale git-Repository auf den Produktions Slot.</span><span class="sxs-lookup"><span data-stu-id="31443-415">In the **GitBash** console, update the remote URL for the local Git repository to target the production slot.</span></span> <span data-ttu-id="31443-416">Führen Sie hierzu den folgenden Befehl aus, und ersetzen Sie die Platzhalter durch Ihren Benutzernamen für die Bereitstellung und den Namen Ihrer Web-App.</span><span class="sxs-lookup"><span data-stu-id="31443-416">To do this, run the following command replacing the placeholders with your deployment username and the name of your web app.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-417">In den folgenden Übungen verschieben Sie die Änderungen an die Produktions Website, anstatt Sie nur für die Einfachheit des Labs zu Staging.</span><span class="sxs-lookup"><span data-stu-id="31443-417">In the following exercises, you will push changes to the production site instead of staging just for the simplicity of the lab.</span></span> <span data-ttu-id="31443-418">In einem realen Szenario empfiehlt es sich, die Änderungen in der Stagingumgebung vor der herauf Stufung in die Produktion zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="31443-418">In a real-world scenario, it is recommended to verify the changes in the staging environment before promoting to production.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample13.cmd)]

<a id="Exercise3"></a>
### <a name="exercise-3-performing-deployment-rollback-in-production"></a><span data-ttu-id="31443-419">Übung 3: Ausführen eines Rollbacks für die Bereitstellung in der Produktion</span><span class="sxs-lookup"><span data-stu-id="31443-419">Exercise 3: Performing Deployment Rollback in Production</span></span>

<span data-ttu-id="31443-420">Es gibt Szenarien, in denen Sie keinen stagingslot haben, um einen aktiven Austausch zwischen Staging und Produktion auszuführen, z. b. Wenn Sie mit dem Modus " **Free** " oder " **Shared** " arbeiten.</span><span class="sxs-lookup"><span data-stu-id="31443-420">There are scenarios where you do not have a staging slot to perform hot swap between staging and production, for example, if you are working with **Free** or **Shared** mode.</span></span> <span data-ttu-id="31443-421">In diesen Szenarien sollten Sie Ihre Anwendung in einer Testumgebung testen – entweder lokal oder an einem Remote Standort – vor der Bereitstellung in der Produktion.</span><span class="sxs-lookup"><span data-stu-id="31443-421">In those scenarios, you should test your application in a testing environment –either locally or in a remote site– before deploying to production.</span></span> <span data-ttu-id="31443-422">Es ist jedoch möglich, dass ein während der Testphase nicht erkanntes Problem am Produktionsstandort auftritt.</span><span class="sxs-lookup"><span data-stu-id="31443-422">However, it is possible that an issue not detected during the testing phase may arise in the production site.</span></span> <span data-ttu-id="31443-423">In diesem Fall ist es wichtig, dass Sie über einen Mechanismus verfügen, um so schnell wie möglich zu einer früheren und stabileren Version der Anwendung zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="31443-423">In this case, it is important to have a mechanism to easily switch to a previous and more stable version of the application as quickly as possible.</span></span>

<span data-ttu-id="31443-424">In **Azure App Service**ermöglicht Continuous Deployment der Quell Code Verwaltung dies dank der Aktion " **erneut** bereitstellen", die im Verwaltungs Portal verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="31443-424">In **Azure App Service**, continuous deployment from source control makes this possible thanks to the **redeploy** action available in the management portal.</span></span> <span data-ttu-id="31443-425">Azure verfolgt die bereit Stellungen, die den Commits zugeordnet sind, die an das Repository übermittelt wurden, und bietet eine Option zum erneuten Bereitstellen Ihrer Anwendung mithilfe Ihrer vorherigen bereit Stellungen.</span><span class="sxs-lookup"><span data-stu-id="31443-425">Azure keeps track of the deployments associated with the commits pushed to the repository and provides an option to redeploy your application using any of your previous deployments, at any time.</span></span>

<span data-ttu-id="31443-426">In dieser Übung führen Sie eine Änderung am Code in der Anwendung " **Geek Quiz** " aus, die absichtlich einen *Fehler*einfügt.</span><span class="sxs-lookup"><span data-stu-id="31443-426">In this exercise you will perform a change to the code in the **Geek Quiz** application that intentionally injects a *bug*.</span></span> <span data-ttu-id="31443-427">Sie stellen die Anwendung in der Produktionsumgebung bereit, um den Fehler anzuzeigen, und dann nutzen Sie die Funktion zum erneuten bereitstellen, um zum vorherigen Zustand zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="31443-427">You will deploy the application to production to see the error, and then you will take advantage of the redeploy feature to go back to the previous state.</span></span>

<a id="Ex3Task1"></a>
#### <a name="task-1--updating-the-geek-quiz-application"></a><span data-ttu-id="31443-428">Aufgabe 1 – Aktualisieren der Anwendung "Geek Quiz"</span><span class="sxs-lookup"><span data-stu-id="31443-428">Task 1 – Updating the Geek Quiz Application</span></span>

<span data-ttu-id="31443-429">In dieser Aufgabe gestalten Sie einen kleinen Teil des Codes der **triviacontroller** -Klasse um, um einen Teil der Logik zu extrahieren, der die ausgewählte Quiz Option aus der Datenbank in eine neue Methode abruft.</span><span class="sxs-lookup"><span data-stu-id="31443-429">In this task, you will refactor a small piece of code of the **TriviaController** class to extract part of the logic that retrieves the selected quiz option from the database into a new method.</span></span>

1. <span data-ttu-id="31443-430">Wechseln Sie in der vorherigen Übung zur Visual Studio-Instanz mit der **geekquiz** -Lösung.</span><span class="sxs-lookup"><span data-stu-id="31443-430">Switch to the Visual Studio instance with the **GeekQuiz** solution from the previous exercise.</span></span>
2. <span data-ttu-id="31443-431">Öffnen Sie in **Projektmappen-Explorer**die Datei **TriviaController.cs** im Ordner **Controllers** .</span><span class="sxs-lookup"><span data-stu-id="31443-431">In **Solution Explorer**, open the **TriviaController.cs** file inside the **Controllers** folder.</span></span>
3. <span data-ttu-id="31443-432">Suchen Sie nach der **storeasync** -Methode, und wählen Sie den in der folgenden Abbildung markierten Code aus.</span><span class="sxs-lookup"><span data-stu-id="31443-432">Locate the **StoreAsync** method and select the code highlighted in the following figure.</span></span>

    ![Auswählen des Codes](maintainable-azure-websites-managing-change-and-scale/_static/image47.png)

    <span data-ttu-id="31443-434">*Auswählen des Codes*</span><span class="sxs-lookup"><span data-stu-id="31443-434">*Selecting the code*</span></span>
4. <span data-ttu-id="31443-435">Klicken Sie mit der rechten Maustaste auf den ausgewählten Code, erweitern Sie das Menü **umgestalten** , und wählen Sie **Methode extrahieren...** aus.</span><span class="sxs-lookup"><span data-stu-id="31443-435">Right-click the selected code, expand the **Refactor** menu and select **Extract Method...**.</span></span>

    ![Extrahieren des Codes als neue Methode](maintainable-azure-websites-managing-change-and-scale/_static/image48.png)

    <span data-ttu-id="31443-437">*Auswählen der Methode extrahieren*</span><span class="sxs-lookup"><span data-stu-id="31443-437">*Selecting Extract Method*</span></span>
5. <span data-ttu-id="31443-438">Benennen Sie im Dialogfeld **Methode extrahieren** die neue Methode *matchesoption* , und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="31443-438">In the **Extract Method** dialog box, name the new method *MatchesOption* and click **OK**.</span></span>

    ![Angeben des Methoden namens](maintainable-azure-websites-managing-change-and-scale/_static/image49.png)

    <span data-ttu-id="31443-440">*Angeben des Namens für die extrahierte Methode*</span><span class="sxs-lookup"><span data-stu-id="31443-440">*Specifying the name for the extracted method*</span></span>
6. <span data-ttu-id="31443-441">Der ausgewählte Code wird dann in die **matchesoption** -Methode extrahiert.</span><span class="sxs-lookup"><span data-stu-id="31443-441">The selected code is then extracted into the **MatchesOption** method.</span></span> <span data-ttu-id="31443-442">Der resultierende Code wird im folgenden Code Ausschnitt gezeigt.</span><span class="sxs-lookup"><span data-stu-id="31443-442">The resulting code is shown in the following snippet.</span></span>

    [!code-csharp[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample14.cs)]
7. <span data-ttu-id="31443-443">Drücken Sie **STRG + S** , um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="31443-443">Press **CTRL + S** to save the changes.</span></span>

<a id="Ex3Task2"></a>
#### <a name="task-2--redeploying-the-geek-quiz-application"></a><span data-ttu-id="31443-444">Aufgabe 2 – ernedas erneute Bereitstellen der Anwendung "Geek Quiz"</span><span class="sxs-lookup"><span data-stu-id="31443-444">Task 2 – Redeploying the Geek Quiz Application</span></span>

<span data-ttu-id="31443-445">Sie schieben nun die Änderungen, die Sie in der vorherigen Aufgabe vorgenommen haben, an das Repository, das eine neue Bereitstellung in der Produktionsumgebung auslöst.</span><span class="sxs-lookup"><span data-stu-id="31443-445">You will now push the changes you made in the previous task to the repository, which will trigger a new deployment to the production environment.</span></span> <span data-ttu-id="31443-446">Dann beheben Sie ein Problem mithilfe der von Internet Explorer bereitgestellten **F12-Entwicklungs Tools** und führen dann ein Rollback zur vorherigen Bereitstellung über das Azure-Verwaltungs Portal aus.</span><span class="sxs-lookup"><span data-stu-id="31443-446">Then, you will troubleshot an issue using the **F12 development tools** provided by Internet Explorer, and then perform a rollback to the previous deployment from the Azure management portal.</span></span>

1. <span data-ttu-id="31443-447">Öffnen Sie eine neue **git-bash** -Konsole, um die aktualisierte Anwendung für Azure App Service bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="31443-447">Open a new **Git Bash** console to deploy the updated application to Azure App Service.</span></span>
2. <span data-ttu-id="31443-448">Führen Sie die folgenden Befehle aus, um die Änderungen an Azure zu überführen.</span><span class="sxs-lookup"><span data-stu-id="31443-448">Execute the following commands to push the changes to Azure.</span></span> <span data-ttu-id="31443-449">Aktualisieren Sie den Platzhalter *[your-application-path]* mit dem Pfad zur **geekquiz-Projekt** Mappe.</span><span class="sxs-lookup"><span data-stu-id="31443-449">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution.</span></span> <span data-ttu-id="31443-450">Sie werden zur Eingabe Ihres Bereitstellungs Kennworts aufgefordert.</span><span class="sxs-lookup"><span data-stu-id="31443-450">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample15.cmd)]

    ![Übertragen von umgestalteten Code in Azure per Push](maintainable-azure-websites-managing-change-and-scale/_static/image50.png)

    <span data-ttu-id="31443-452">*Übertragen von umgestalteten Code in Azure per Push*</span><span class="sxs-lookup"><span data-stu-id="31443-452">*Pushing refactored code to Azure*</span></span>
3. <span data-ttu-id="31443-453">Öffnen Sie Internet Explorer, und navigieren Sie zu Ihrer Web-App (z. b. `http://<your-web-site>.azurewebsites.net`).</span><span class="sxs-lookup"><span data-stu-id="31443-453">Open Internet Explorer and navigate to your web app (e.g. `http://<your-web-site>.azurewebsites.net`).</span></span> <span data-ttu-id="31443-454">Melden Sie sich mit den zuvor erstellten Anmelde Informationen an.</span><span class="sxs-lookup"><span data-stu-id="31443-454">Log in using the previously created credentials.</span></span>
4. <span data-ttu-id="31443-455">Drücken Sie **F12** , um die Entwicklungs Tools zu starten, wählen Sie die Registerkarte **Netzwerk** aus, und klicken Sie dann auf **die Schaltfläche** wiedergeben</span><span class="sxs-lookup"><span data-stu-id="31443-455">Press **F12** to launch the development tools, select the **Network** tab and click the **Play** button to start recording.</span></span>

    <span data-ttu-id="31443-456">![Netzwerk Aufzeichnung wird gestartet](maintainable-azure-websites-managing-change-and-scale/_static/image51.png "Netzwerk Aufzeichnung wird gestartet")</span><span class="sxs-lookup"><span data-stu-id="31443-456">![Starting network recording](maintainable-azure-websites-managing-change-and-scale/_static/image51.png "Starting network recording")</span></span>

    <span data-ttu-id="31443-457">*Netzwerk Aufzeichnung wird gestartet*</span><span class="sxs-lookup"><span data-stu-id="31443-457">*Starting network recording*</span></span>
5. <span data-ttu-id="31443-458">Wählen Sie eine beliebige Option des Quiz aus.</span><span class="sxs-lookup"><span data-stu-id="31443-458">Select any option of the quiz.</span></span> <span data-ttu-id="31443-459">Sie werden festzustellen, dass nichts passiert.</span><span class="sxs-lookup"><span data-stu-id="31443-459">You will see that nothing happens.</span></span>
6. <span data-ttu-id="31443-460">Im Fenster **F12** zeigt der Eintrag, der der HTTP-Anforderung Post entspricht, ein HTTP **500** -Ergebnis an.</span><span class="sxs-lookup"><span data-stu-id="31443-460">In the **F12** window, the entry corresponding to the POST HTTP request shows an HTTP **500** result.</span></span>

    ![HTTP 500-Fehler](maintainable-azure-websites-managing-change-and-scale/_static/image52.png)

    <span data-ttu-id="31443-462">*HTTP 500-Fehler*</span><span class="sxs-lookup"><span data-stu-id="31443-462">*HTTP 500 error*</span></span>
7. <span data-ttu-id="31443-463">Wählen Sie die Registerkarte **Konsole** aus. Ein Fehler wird mit den Details der Ursache protokolliert.</span><span class="sxs-lookup"><span data-stu-id="31443-463">Select the **Console** tab. An error is logged with the details of the cause.</span></span>

    ![Protokollierter Fehler](maintainable-azure-websites-managing-change-and-scale/_static/image53.png)

    <span data-ttu-id="31443-465">*Protokollierter Fehler*</span><span class="sxs-lookup"><span data-stu-id="31443-465">*Logged error*</span></span>
8. <span data-ttu-id="31443-466">Suchen Sie den Abschnitt "Details" des Fehlers.</span><span class="sxs-lookup"><span data-stu-id="31443-466">Locate the details part of the error.</span></span> <span data-ttu-id="31443-467">Dieser Fehler wird eindeutig durch den Code umgestaltet, den Sie in den vorherigen Schritten committet haben.</span><span class="sxs-lookup"><span data-stu-id="31443-467">Clearly, this error is caused by the code refactoring you committed in the previous steps.</span></span>

    <span data-ttu-id="31443-468">[https://login.microsoftonline.com/consumers/](`Details: LINQ to Entities does not recognize the method 'Boolean MatchesOption ...`).</span><span class="sxs-lookup"><span data-stu-id="31443-468">`Details: LINQ to Entities does not recognize the method 'Boolean MatchesOption ...`.</span></span>
9. <span data-ttu-id="31443-469">Schließen Sie den Browser nicht.</span><span class="sxs-lookup"><span data-stu-id="31443-469">Do not close the browser.</span></span>
10. <span data-ttu-id="31443-470">Navigieren Sie in einer neuen Browser Instanz zum [Azure-Verwaltungs Portal](https://manage.windowsazure.com) , und melden Sie sich mit der Microsoft-Konto an, die Ihrem Abonnement zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="31443-470">In a new browser instance, navigate to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>
11. <span data-ttu-id="31443-471">Wählen Sie **Websites** aus, und klicken Sie auf die in Übung 2 erstellte Web-App.</span><span class="sxs-lookup"><span data-stu-id="31443-471">Select **Websites** and click the web app you created in Exercise 2.</span></span>
12. <span data-ttu-id="31443-472">Navigieren Sie zur Seite bereit **Stellungen** .</span><span class="sxs-lookup"><span data-stu-id="31443-472">Navigate to the **Deployments** page.</span></span> <span data-ttu-id="31443-473">Beachten Sie, dass alle ausgeführten Commits im Bereitstellungs Verlauf aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="31443-473">Notice that all the commits performed are listed in the deployment history.</span></span>

    ![Liste vorhandener bereit Stellungen](maintainable-azure-websites-managing-change-and-scale/_static/image54.png)

    <span data-ttu-id="31443-475">*Liste vorhandener bereit Stellungen*</span><span class="sxs-lookup"><span data-stu-id="31443-475">*List of existing deployments*</span></span>
13. <span data-ttu-id="31443-476">Wählen Sie den vorherigen Commit aus, und klicken Sie auf der Befehlsleiste auf **erneut** bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="31443-476">Select the previous commit and click **Redeploy** on the command bar.</span></span>

    ![Der vorherige Commit wird erneut bereitgestellt.](maintainable-azure-websites-managing-change-and-scale/_static/image55.png)

    <span data-ttu-id="31443-478">*Der vorherige Commit wird erneut bereitgestellt.*</span><span class="sxs-lookup"><span data-stu-id="31443-478">*Redeploying the previous commit*</span></span>
14. <span data-ttu-id="31443-479">Wenn Sie aufgefordert werden, die Auswahl zu bestätigen, klicken Sie auf **Ja**.</span><span class="sxs-lookup"><span data-stu-id="31443-479">When prompted to confirm, click **Yes**.</span></span>

    ![Bestätigung der erneuten Bereitstellung](maintainable-azure-websites-managing-change-and-scale/_static/image56.png)
15. <span data-ttu-id="31443-481">Wenn die Bereitstellung abgeschlossen ist, wechseln Sie zurück zur Browser Instanz mit Ihrer Web-App, und drücken Sie **STRG + F5**.</span><span class="sxs-lookup"><span data-stu-id="31443-481">When the deployment completes, switch back to the browser instance with your web app and press **CTRL + F5**.</span></span>
16. <span data-ttu-id="31443-482">Klicken Sie auf eine der Optionen.</span><span class="sxs-lookup"><span data-stu-id="31443-482">Click any of the options.</span></span> <span data-ttu-id="31443-483">Die Flip-Animation wird jetzt durchgeführt, und das Ergebnis (*richtig/falsch*) wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="31443-483">The flip animation will now take place and the result (*correct/incorrect*) will be displayed.</span></span>
17. <span data-ttu-id="31443-484">Optionale Wechseln Sie zur **git-bash** -Konsole, und führen Sie die folgenden Befehle aus, um zum vorherigen Commit zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="31443-484">(Optional) Switch to the **Git Bash** console and execute the following commands to revert to the previous commit.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-485">Mit diesen Befehlen wird ein neuer Commit erstellt, mit dem alle Änderungen im git-Repository, die im ungültigen Commit vorgenommen wurden, übernommen werden.</span><span class="sxs-lookup"><span data-stu-id="31443-485">These commands create a new commit that undoes all changes in the Git repository that were made in the bad commit.</span></span> <span data-ttu-id="31443-486">Azure stellt die Anwendung dann mit dem neuen Commit erneut bereit.</span><span class="sxs-lookup"><span data-stu-id="31443-486">Azure will then redeploy the application using the new commit.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample16.cmd)]

<a id="Exercise4"></a>
### <a name="exercise-4-scaling-using-azure-storage"></a><span data-ttu-id="31443-487">Übung 4: Skalierung mithilfe Azure Storage</span><span class="sxs-lookup"><span data-stu-id="31443-487">Exercise 4: Scaling Using Azure Storage</span></span>

<span data-ttu-id="31443-488">**BLOB** sind die einfachste Möglichkeit zum Speichern großer Mengen unstrukturierter Text-oder Binärdaten, z. b. Videos, Audiodateien und Bilder.</span><span class="sxs-lookup"><span data-stu-id="31443-488">**Blobs** are the simplest way to store large amounts of unstructured text or binary data such as video, audio and images.</span></span> <span data-ttu-id="31443-489">Wenn Sie den statischen Inhalt der Anwendung in den Speicher verschieben, ist es hilfreich, Ihre Anwendung zu skalieren, indem Sie Images oder Dokumente direkt im Browser reservieren.</span><span class="sxs-lookup"><span data-stu-id="31443-489">Moving the static content of your application to Storage, helps to scale your application by serving images or documents directly to the browser.</span></span>

<span data-ttu-id="31443-490">In dieser Übung verschieben Sie den statischen Inhalt der Anwendung in einen BLOB-Container.</span><span class="sxs-lookup"><span data-stu-id="31443-490">In this exercise, you will move the static content of your application to a Blob container.</span></span> <span data-ttu-id="31443-491">Anschließend konfigurieren Sie die Anwendung so, dass Sie eine **ASP.net URL Rewrite-Regel** in der Datei " **Web. config** " hinzufügt, um Ihre Inhalte in den BlobContainer umzuleiten.</span><span class="sxs-lookup"><span data-stu-id="31443-491">Then you will configure your application to add an **ASP.NET URL rewrite rule** in the **Web.config** to redirect your content to the Blob container.</span></span>

<a id="Ex4Task1"></a>
#### <a name="task-1--creating-an-azure-storage-account"></a><span data-ttu-id="31443-492">Aufgabe 1 – Erstellen eines Azure Storage Kontos</span><span class="sxs-lookup"><span data-stu-id="31443-492">Task 1 – Creating an Azure Storage Account</span></span>

<span data-ttu-id="31443-493">In dieser Aufgabe erfahren Sie, wie Sie ein neues Speicherkonto mithilfe des Verwaltungs Portals erstellen.</span><span class="sxs-lookup"><span data-stu-id="31443-493">In this task you will learn how to create a new storage account using the management portal.</span></span>

1. <span data-ttu-id="31443-494">Navigieren Sie zum [Azure-Verwaltungs Portal](https://manage.windowsazure.com) , und melden Sie sich mit der Microsoft-Konto an, die Ihrem Abonnement zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="31443-494">Navigate to the [Azure management portal](https://manage.windowsazure.com) and sign in using the Microsoft account associated with your subscription.</span></span>
2. <span data-ttu-id="31443-495">**Neu auswählen | Data Services | Speicher | Schneller** Fassung, um mit der Erstellung eines neuen Speicher Kontos zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="31443-495">Select **New | Data Services | Storage | Quick Create** to start creating a new storage account.</span></span> <span data-ttu-id="31443-496">Geben Sie einen eindeutigen Namen für das Konto ein, und wählen Sie eine **Region** aus der Liste aus.</span><span class="sxs-lookup"><span data-stu-id="31443-496">Enter a unique name for the account and select a **Region** from the list.</span></span> <span data-ttu-id="31443-497">Klicken Sie auf **Speicherkonto erstellen** , um fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="31443-497">Click **Create Storage Account** to continue.</span></span>

    <span data-ttu-id="31443-498">![Erstellen eines neuen Speicher Kontos](maintainable-azure-websites-managing-change-and-scale/_static/image57.png "Erstellen eines neuen Speicher Kontos")</span><span class="sxs-lookup"><span data-stu-id="31443-498">![Creating a new Storage Account](maintainable-azure-websites-managing-change-and-scale/_static/image57.png "Creating a new Storage Account")</span></span>

    <span data-ttu-id="31443-499">*Erstellen eines neuen Speicher Kontos*</span><span class="sxs-lookup"><span data-stu-id="31443-499">*Creating a new storage account*</span></span>
3. <span data-ttu-id="31443-500">Warten Sie im Abschnitt **Speicher** , bis der Status des neuen Speicher Kontos in *Online* geändert wird, um mit dem folgenden Schritt fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="31443-500">In the **Storage** section, wait until the status of the new storage account changes to *Online* in order to continue with the following step.</span></span>

    <span data-ttu-id="31443-501">![Speicherkonto erstellt](maintainable-azure-websites-managing-change-and-scale/_static/image58.png "Speicherkonto erstellt")</span><span class="sxs-lookup"><span data-stu-id="31443-501">![Storage Account created](maintainable-azure-websites-managing-change-and-scale/_static/image58.png "Storage Account created")</span></span>

    <span data-ttu-id="31443-502">*Speicherkonto erstellt*</span><span class="sxs-lookup"><span data-stu-id="31443-502">*Storage Account created*</span></span>
4. <span data-ttu-id="31443-503">Klicken Sie auf den Namen des Speicher Kontos, und klicken Sie dann oben auf der Seite auf den Link **Dashboard** .</span><span class="sxs-lookup"><span data-stu-id="31443-503">Click on the storage account name and then click the **Dashboard** link at the top of the page.</span></span> <span data-ttu-id="31443-504">Auf der Seite **Dashboard** finden Sie Informationen über den Status des Kontos und die Dienst Endpunkte, die in Ihren Anwendungen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="31443-504">The **Dashboard** page provides you with information about the status of the account and the service endpoints that can be used within your applications.</span></span>

    <span data-ttu-id="31443-505">![Anzeigen des Speicherkonto-Dashboards](maintainable-azure-websites-managing-change-and-scale/_static/image59.png "Anzeigen des Speicherkonto-Dashboards")</span><span class="sxs-lookup"><span data-stu-id="31443-505">![Displaying the Storage Account Dashboard](maintainable-azure-websites-managing-change-and-scale/_static/image59.png "Displaying the Storage Account Dashboard")</span></span>

    <span data-ttu-id="31443-506">*Anzeigen des Speicherkonto-Dashboards*</span><span class="sxs-lookup"><span data-stu-id="31443-506">*Displaying the Storage Account Dashboard*</span></span>
5. <span data-ttu-id="31443-507">Klicken Sie in der Navigationsleiste auf die Schaltfläche **Zugriffsschlüssel verwalten** .</span><span class="sxs-lookup"><span data-stu-id="31443-507">Click the **Manage Access Keys** button in the navigation bar.</span></span>

    <span data-ttu-id="31443-508">![Schaltfläche zum Verwalten von Zugriffs Schlüsseln](maintainable-azure-websites-managing-change-and-scale/_static/image60.png "Schaltfläche zum Verwalten von Zugriffs Schlüsseln")</span><span class="sxs-lookup"><span data-stu-id="31443-508">![Manage Access Keys button](maintainable-azure-websites-managing-change-and-scale/_static/image60.png "Manage Access Keys button")</span></span>

    <span data-ttu-id="31443-509">*Schaltfläche zum Verwalten von Zugriffs Schlüsseln*</span><span class="sxs-lookup"><span data-stu-id="31443-509">*Manage Access Keys button*</span></span>
6. <span data-ttu-id="31443-510">Kopieren Sie im Dialogfeld **Zugriffsschlüssel verwalten** den **Speicherkonto Namen** und den **primären Zugriffsschlüssel** , da Sie ihn in der folgenden Übung benötigen.</span><span class="sxs-lookup"><span data-stu-id="31443-510">In the **Manage Access Keys** dialog box, copy the **Storage Account Name** and **Primary Access Key** as you will need them in the following exercise.</span></span> <span data-ttu-id="31443-511">Schließen Sie anschließend das Dialogfeld.</span><span class="sxs-lookup"><span data-stu-id="31443-511">Then, close the dialog box.</span></span>

    <span data-ttu-id="31443-512">![Dialogfeld "Zugriffsschlüssel verwalten"](maintainable-azure-websites-managing-change-and-scale/_static/image61.png "Dialogfeld "Zugriffsschlüssel verwalten"")</span><span class="sxs-lookup"><span data-stu-id="31443-512">![Manage Access Key dialog box](maintainable-azure-websites-managing-change-and-scale/_static/image61.png "Manage Access Key dialog box")</span></span>

    <span data-ttu-id="31443-513">*Dialogfeld "Zugriffsschlüssel verwalten"*</span><span class="sxs-lookup"><span data-stu-id="31443-513">*Manage Access Key dialog box*</span></span>

<a id="Ex4Task2"></a>
#### <a name="task-2--uploading-an-asset-to-azure-blob-storage"></a><span data-ttu-id="31443-514">Aufgabe 2 – Hochladen eines Assets in Azure BLOB Storage</span><span class="sxs-lookup"><span data-stu-id="31443-514">Task 2 – Uploading an Asset to Azure Blob Storage</span></span>

<span data-ttu-id="31443-515">In dieser Aufgabe verwenden Sie das Server-Explorer Fenster in Visual Studio, um eine Verbindung mit Ihrem Speicherkonto herzustellen.</span><span class="sxs-lookup"><span data-stu-id="31443-515">In this task, you will use the Server Explorer window from Visual Studio to connect to your storage account.</span></span> <span data-ttu-id="31443-516">Anschließend erstellen Sie einen BLOB-Container und laden eine Datei mit dem Geek-Quiz-Logo in den Container hoch.</span><span class="sxs-lookup"><span data-stu-id="31443-516">You will then create a blob container and upload a file with the Geek Quiz logo to the container.</span></span>

1. <span data-ttu-id="31443-517">Wechseln Sie in der vorherigen Übung zur Visual Studio-Instanz mit der **geekquiz** -Lösung.</span><span class="sxs-lookup"><span data-stu-id="31443-517">Switch to the Visual Studio instance with the **GeekQuiz** solution from the previous exercise.</span></span>
2. <span data-ttu-id="31443-518">Wählen Sie in der Menüleiste **Ansicht** aus, und klicken Sie dann auf **Server-Explorer**.</span><span class="sxs-lookup"><span data-stu-id="31443-518">From the menu bar, select **View** and then click **Server Explorer**.</span></span>
3. <span data-ttu-id="31443-519">Klicken Sie in **Server-Explorer**mit der rechten Maustaste auf den Knoten **Azure** , und wählen Sie **mit Azure verbinden...** aus. Melden Sie sich mit dem Microsoft-Konto an, der Ihrem Abonnement zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="31443-519">In **Server Explorer**, right-click the **Azure** node and select **Connect to Azure...**. Sign in using the Microsoft account associated with your subscription.</span></span>

    ![Herstellen einer Verbindung mit Windows Azure](maintainable-azure-websites-managing-change-and-scale/_static/image62.png)

    <span data-ttu-id="31443-521">*Herstellen einer Verbindung mit Azure*</span><span class="sxs-lookup"><span data-stu-id="31443-521">*Connect to Azure*</span></span>
4. <span data-ttu-id="31443-522">Erweitern Sie den Knoten **Azure** , klicken Sie mit der rechten Maustaste auf **Speicher** , und wählen Sie **externen Speicher anfügen**aus.</span><span class="sxs-lookup"><span data-stu-id="31443-522">Expand the **Azure** node, right-click **Storage** and select **Attach External Storage...**.</span></span>
5. <span data-ttu-id="31443-523">Geben Sie im Dialogfeld **Neues Speicherkonto hinzufügen** den **Kontonamen** und den **Kontoschlüssel** ein, die Sie in der vorherigen Aufgabe abgerufen haben, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="31443-523">In the **Add New Storage Account** dialog box, enter the **Account name** and **Account key** you obtained in the previous task and click **OK**.</span></span>

    ![Dialogfeld "neues Speicherkonto hinzufügen"](maintainable-azure-websites-managing-change-and-scale/_static/image63.png)

    <span data-ttu-id="31443-525">*Dialogfeld "neues Speicherkonto hinzufügen"*</span><span class="sxs-lookup"><span data-stu-id="31443-525">*Add New Storage Account dialog box*</span></span>
6. <span data-ttu-id="31443-526">Ihr Speicherkonto sollte unter dem Knoten **Speicher** angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-526">Your storage account should appear under the **Storage** node.</span></span> <span data-ttu-id="31443-527">Erweitern Sie das Speicherkonto, klicken Sie mit der rechten Maustaste auf **BLOBs** , und wählen Sie **BlobContainer erstellen...** aus.</span><span class="sxs-lookup"><span data-stu-id="31443-527">Expand your storage account, right-click **Blobs** and select **Create Blob Container...**.</span></span>

    <span data-ttu-id="31443-528">![BLOB-Container erstellen](maintainable-azure-websites-managing-change-and-scale/_static/image64.png "BLOB-Container erstellen")</span><span class="sxs-lookup"><span data-stu-id="31443-528">![Create Blob Container](maintainable-azure-websites-managing-change-and-scale/_static/image64.png "Create Blob Container")</span></span>

    <span data-ttu-id="31443-529">*BLOB-Container erstellen*</span><span class="sxs-lookup"><span data-stu-id="31443-529">*Create Blob Container*</span></span>
7. <span data-ttu-id="31443-530">Geben Sie im Dialogfeld **BLOB-Container erstellen** einen Namen für den BlobContainer ein, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="31443-530">In the **Create Blob Container** dialog box, enter a name for the blob container and click **OK**.</span></span>

    <span data-ttu-id="31443-531">![Dialogfeld "BLOB-Container erstellen"](maintainable-azure-websites-managing-change-and-scale/_static/image65.png "Dialogfeld "BLOB-Container erstellen"")</span><span class="sxs-lookup"><span data-stu-id="31443-531">![Create Blob Container dialog box](maintainable-azure-websites-managing-change-and-scale/_static/image65.png "Create Blob Container dialog box")</span></span>

    <span data-ttu-id="31443-532">*Dialogfeld "BLOB-Container erstellen"*</span><span class="sxs-lookup"><span data-stu-id="31443-532">*Create Blob Container dialog box*</span></span>
8. <span data-ttu-id="31443-533">Der neue BLOB-Container sollte dem Knoten **BLOBs** hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-533">The new blob container should be added to the **Blobs** node.</span></span> <span data-ttu-id="31443-534">Ändern Sie die Zugriffsberechtigungen im Container, um den Container als öffentlich zu gestalten.</span><span class="sxs-lookup"><span data-stu-id="31443-534">Change the access permissions in the container to make the container public.</span></span> <span data-ttu-id="31443-535">Klicken Sie hierzu mit der rechten Maustaste auf den Container **Images** , und wählen Sie **Eigenschaften**aus.</span><span class="sxs-lookup"><span data-stu-id="31443-535">To do this, right-click the **images** container and select **Properties**.</span></span>

    <span data-ttu-id="31443-536">![Bild Container Eigenschaften](maintainable-azure-websites-managing-change-and-scale/_static/image66.png "Bild Container Eigenschaften")</span><span class="sxs-lookup"><span data-stu-id="31443-536">![images container properties](maintainable-azure-websites-managing-change-and-scale/_static/image66.png "images container properties")</span></span>

    <span data-ttu-id="31443-537">*Bild Container Eigenschaften*</span><span class="sxs-lookup"><span data-stu-id="31443-537">*Images container properties*</span></span>
9. <span data-ttu-id="31443-538">Legen Sie im Fenster **Eigenschaften** den **öffentlichen Lesezugriff** auf **Container**fest.</span><span class="sxs-lookup"><span data-stu-id="31443-538">In the **Properties** window, set the **Public Read Access** to **Container**.</span></span>

    <span data-ttu-id="31443-539">![Ändern der Eigenschaft für den öffentlichen Lesezugriff](maintainable-azure-websites-managing-change-and-scale/_static/image67.png "Ändern der Eigenschaft für den öffentlichen Lesezugriff")</span><span class="sxs-lookup"><span data-stu-id="31443-539">![Changing public read access property](maintainable-azure-websites-managing-change-and-scale/_static/image67.png "Changing public read access property")</span></span>

    <span data-ttu-id="31443-540">*Ändern der Eigenschaft für den öffentlichen Lesezugriff*</span><span class="sxs-lookup"><span data-stu-id="31443-540">*Changing public read access property*</span></span>
10. <span data-ttu-id="31443-541">Wenn Sie gefragt werden, ob Sie die öffentliche Zugriffs Eigenschaft ändern möchten, klicken Sie auf **Ja**.</span><span class="sxs-lookup"><span data-stu-id="31443-541">When prompted if you are sure you want to change the public access property, click **Yes**.</span></span>

    <span data-ttu-id="31443-542">![Microsoft Visual Studio Warnung](maintainable-azure-websites-managing-change-and-scale/_static/image68.png "Microsoft Visual Studio Warnung")</span><span class="sxs-lookup"><span data-stu-id="31443-542">![Microsoft Visual Studio warning](maintainable-azure-websites-managing-change-and-scale/_static/image68.png "Microsoft Visual Studio warning")</span></span>

    <span data-ttu-id="31443-543">*Microsoft Visual Studio Warnung*</span><span class="sxs-lookup"><span data-stu-id="31443-543">*Microsoft Visual Studio warning*</span></span>
11. <span data-ttu-id="31443-544">Klicken Sie in **Server-Explorer**mit der rechten Maustaste in den BlobContainer **Images** , und wählen Sie **BlobContainer anzeigen**aus.</span><span class="sxs-lookup"><span data-stu-id="31443-544">In **Server Explorer**, right-click in the **images** blob container and select **View Blob Container**.</span></span>

    <span data-ttu-id="31443-545">![BLOB-Container anzeigen](maintainable-azure-websites-managing-change-and-scale/_static/image69.png "BLOB-Container anzeigen")</span><span class="sxs-lookup"><span data-stu-id="31443-545">![View Blob Container](maintainable-azure-websites-managing-change-and-scale/_static/image69.png "View Blob Container")</span></span>

    <span data-ttu-id="31443-546">*BLOB-Container anzeigen*</span><span class="sxs-lookup"><span data-stu-id="31443-546">*View Blob Container*</span></span>
12. <span data-ttu-id="31443-547">Der Container Images sollte in einem neuen Fenster geöffnet werden, und eine Legende ohne Einträge sollte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-547">The images container should open in a new window and a legend with no entries should be shown.</span></span> <span data-ttu-id="31443-548">Klicken Sie auf das Symbol **hochladen** , um eine Datei in den BLOB-Container hochzuladen.</span><span class="sxs-lookup"><span data-stu-id="31443-548">Click the **upload** icon to upload a file to the blob container.</span></span>

    <span data-ttu-id="31443-549">![Bild Container ohne Einträge](maintainable-azure-websites-managing-change-and-scale/_static/image70.png "Bild Container ohne Einträge")</span><span class="sxs-lookup"><span data-stu-id="31443-549">![Images container with no entries](maintainable-azure-websites-managing-change-and-scale/_static/image70.png "Images container with no entries")</span></span>

    <span data-ttu-id="31443-550">*Bild Container ohne Einträge*</span><span class="sxs-lookup"><span data-stu-id="31443-550">*Images container with no entries*</span></span>
13. <span data-ttu-id="31443-551">Navigieren Sie im Dialogfeld **BLOB hochladen** zum Ordner **Assets** des Labs.</span><span class="sxs-lookup"><span data-stu-id="31443-551">In the **Upload Blob** dialog box, navigate to the **Assets** folder of the lab.</span></span> <span data-ttu-id="31443-552">Wählen Sie die Datei **Logo-Big. png** aus, und klicken Sie auf **Öffnen**.</span><span class="sxs-lookup"><span data-stu-id="31443-552">Select the **logo-big.png** file and click **Open**.</span></span>
14. <span data-ttu-id="31443-553">Warten Sie, bis die Datei hochgeladen wurde.</span><span class="sxs-lookup"><span data-stu-id="31443-553">Wait until the file is uploaded.</span></span> <span data-ttu-id="31443-554">Wenn der Upload abgeschlossen ist, sollte die Datei im Container Images aufgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-554">When the upload completes, the file should be listed in the images container.</span></span> <span data-ttu-id="31443-555">Klicken Sie mit der rechten Maustaste auf den Datei Eintrag, und wählen Sie **URL kopieren**</span><span class="sxs-lookup"><span data-stu-id="31443-555">Right-click the file entry and select **Copy URL**.</span></span>

    <span data-ttu-id="31443-556">![BLOB-URL kopieren](maintainable-azure-websites-managing-change-and-scale/_static/image71.png "Kopieren der BLOB-Datei-URL")</span><span class="sxs-lookup"><span data-stu-id="31443-556">![Copy blob URL](maintainable-azure-websites-managing-change-and-scale/_static/image71.png "Copy blob file URL")</span></span>

    <span data-ttu-id="31443-557">*BLOB-URL kopieren*</span><span class="sxs-lookup"><span data-stu-id="31443-557">*Copy blob URL*</span></span>
15. <span data-ttu-id="31443-558">Öffnen Sie Internet Explorer, und fügen Sie die URL ein.</span><span class="sxs-lookup"><span data-stu-id="31443-558">Open Internet Explorer and paste the URL.</span></span> <span data-ttu-id="31443-559">Das folgende Bild sollte im Browser angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-559">The following image should be shown in the browser.</span></span>

    <span data-ttu-id="31443-560">![Logo-Big. png-Bild von Windows BLOB Storage](maintainable-azure-websites-managing-change-and-scale/_static/image72.png "Logo-Big. png-Bild aus Storage")</span><span class="sxs-lookup"><span data-stu-id="31443-560">![logo-big.png image from Windows Blob Storage](maintainable-azure-websites-managing-change-and-scale/_static/image72.png "logo-big.png image from storage")</span></span>

    <span data-ttu-id="31443-561">*Logo-Big. png-Bild von Azure BLOB Storage*</span><span class="sxs-lookup"><span data-stu-id="31443-561">*logo-big.png image from Azure Blob Storage*</span></span>

<a id="Ex4Task3"></a>
#### <a name="task-3--updating-the-solution-to-consume-static-content-from-azure-blob-storage"></a><span data-ttu-id="31443-562">Aufgabe 3 – Aktualisieren der Lösung zur Nutzung statischer Inhalte aus Azure BLOB Storage</span><span class="sxs-lookup"><span data-stu-id="31443-562">Task 3 – Updating the Solution to Consume Static Content from Azure Blob Storage</span></span>

<span data-ttu-id="31443-563">In dieser Aufgabe konfigurieren Sie die **geekquiz-Projekt** Mappe so, dass das Bild, das in Azure BLOB Storage (anstelle des Bilds in der Web-App) hochgeladen wird, durch Hinzufügen einer ASP.net-URL-Rewrite-Regel in der **Web. config** -Datei verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="31443-563">In this task, you will configure the **GeekQuiz** solution to consume the image uploaded to Azure Blob Storage (instead of the image located in the web app) by adding an ASP.NET URL rewrite rule in the **web.config** file.</span></span>

1. <span data-ttu-id="31443-564">Öffnen Sie in Visual Studio die Datei **Web. config** im **geekquiz** -Projekt, und suchen Sie nach dem **&lt;System. Webserver&gt;** -Element.</span><span class="sxs-lookup"><span data-stu-id="31443-564">In Visual Studio, open the **Web.config** file inside the **GeekQuiz** project and locate the **&lt;system.webServer&gt;** element.</span></span>
2. <span data-ttu-id="31443-565">Fügen Sie den folgenden Code hinzu, um eine URL-Rewrite-Regel hinzuzufügen, und aktualisieren Sie den Platzhalter mit Ihrem Speicherkonto Namen.</span><span class="sxs-lookup"><span data-stu-id="31443-565">Add the following code to add an URL rewrite rule, updating the placeholder with your storage account name.</span></span>

    <span data-ttu-id="31443-566">(Code Ausschnitt- *websitesinproduction-Ex4-urlreschreiterule*)</span><span class="sxs-lookup"><span data-stu-id="31443-566">(Code Snippet - *WebSitesInProduction - Ex4 - UrlRewriteRule*)</span></span>

    [!code-xml[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample17.xml)]

    > [!NOTE]
    > <span data-ttu-id="31443-567">Das Umschreiben von URLs ist der Prozess, bei dem eine eingehende Webanforderung abgefangen und die Anforderung an eine andere Ressource umgeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="31443-567">URL rewriting is the process of intercepting an incoming Web request and redirecting the request to a different resource.</span></span> <span data-ttu-id="31443-568">Die URL-Umschreib Regeln weisen die Umschreib-Engine an, wenn eine Anforderung umgeleitet werden muss, und wohin Sie umgeleitet werden soll.</span><span class="sxs-lookup"><span data-stu-id="31443-568">The URL rewriting rules tells the rewriting engine when a request needs to be redirected, and where should they be redirected.</span></span> <span data-ttu-id="31443-569">Eine Umschreib Regel besteht aus zwei Zeichen folgen: dem Muster, nach dem in der angeforderten URL gesucht werden soll (normalerweise mithilfe regulärer Ausdrücke), und der Zeichenfolge, mit der das Muster ersetzt werden soll, sofern gefunden.</span><span class="sxs-lookup"><span data-stu-id="31443-569">A rewriting rule is composed of two strings: the pattern to look for in the requested URL (usually, using regular expressions), and the string to replace the pattern with, if found.</span></span> <span data-ttu-id="31443-570">Weitere Informationen finden Sie unter [URL-Umschreibung in ASP.net](https://msdn.microsoft.com/library/ms972974.aspx).</span><span class="sxs-lookup"><span data-stu-id="31443-570">For more information, see [URL Rewriting in ASP.NET](https://msdn.microsoft.com/library/ms972974.aspx).</span></span>
3. <span data-ttu-id="31443-571">Drücken Sie **STRG + S** , um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="31443-571">Press **CTRL + S** to save the changes.</span></span>
4. <span data-ttu-id="31443-572">Öffnen Sie eine neue **git-bash** -Konsole, um die aktualisierte Anwendung für Azure App Service bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="31443-572">Open a new **Git Bash** console to deploy the updated application to Azure App Service.</span></span>
5. <span data-ttu-id="31443-573">Führen Sie die folgenden Befehle aus, um die Änderungen an Azure zu überführen.</span><span class="sxs-lookup"><span data-stu-id="31443-573">Execute the following commands to push the changes to Azure.</span></span> <span data-ttu-id="31443-574">Aktualisieren Sie den Platzhalter *[your-application-path]* mit dem Pfad zur **geekquiz-Projekt** Mappe.</span><span class="sxs-lookup"><span data-stu-id="31443-574">Update the *[YOUR-APPLICATION-PATH]* placeholder with the path to the **GeekQuiz** solution.</span></span> <span data-ttu-id="31443-575">Sie werden zur Eingabe Ihres Bereitstellungs Kennworts aufgefordert.</span><span class="sxs-lookup"><span data-stu-id="31443-575">You will be prompted for your deployment password.</span></span>

    [!code-console[Main](maintainable-azure-websites-managing-change-and-scale/samples/sample18.cmd)]

    ![Bereitstellen von Updates in Azure](maintainable-azure-websites-managing-change-and-scale/_static/image73.png)

    <span data-ttu-id="31443-577">*Bereitstellen von Updates in Azure*</span><span class="sxs-lookup"><span data-stu-id="31443-577">*Deploying update to Azure*</span></span>

<a id="Ex4Task4"></a>
#### <a name="task-4--verification"></a><span data-ttu-id="31443-578">Aufgabe 4 – Überprüfung</span><span class="sxs-lookup"><span data-stu-id="31443-578">Task 4 – Verification</span></span>

<span data-ttu-id="31443-579">In dieser Aufgabe verwenden Sie **Internet Explorer** , um die Anwendung " **Geek Quiz** " zu durchsuchen und zu überprüfen, ob die URL-Rewrite-Regel für Images funktioniert und Sie zu dem auf **Azure BLOB Storage**gehosteten Image umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="31443-579">In this task you will use **Internet Explorer** to browse the **Geek Quiz** application and check that the URL rewrite rule for images works and you are redirected to the image hosted on **Azure Blob Storage**.</span></span>

1. <span data-ttu-id="31443-580">Öffnen Sie Internet Explorer, und navigieren Sie zu Ihrer Web-App (z. b. `http://<your-web-site>.azurewebsites.net`).</span><span class="sxs-lookup"><span data-stu-id="31443-580">Open Internet Explorer and navigate to your web app (e.g. `http://<your-web-site>.azurewebsites.net`).</span></span> <span data-ttu-id="31443-581">Melden Sie sich mit den zuvor erstellten Anmelde Informationen an.</span><span class="sxs-lookup"><span data-stu-id="31443-581">Log in using the previously created credentials.</span></span>

    <span data-ttu-id="31443-582">![Anzeige der Geek Quiz-Web-App mit dem Image](maintainable-azure-websites-managing-change-and-scale/_static/image74.png "Anzeige der Geek Quiz-Web-App mit dem Image")</span><span class="sxs-lookup"><span data-stu-id="31443-582">![Showing the Geek Quiz web app with the image](maintainable-azure-websites-managing-change-and-scale/_static/image74.png "Showing the Geek Quiz web app with the image")</span></span>

    <span data-ttu-id="31443-583">*Anzeige der Geek Quiz-Web-App mit dem Image*</span><span class="sxs-lookup"><span data-stu-id="31443-583">*Showing the Geek Quiz web app with the image*</span></span>
2. <span data-ttu-id="31443-584">Drücken Sie **F12** , um die Entwicklungs Tools zu starten, wählen Sie die Registerkarte **Netzwerk** und dann Aufzeichnung starten aus.</span><span class="sxs-lookup"><span data-stu-id="31443-584">Press **F12** to launch the development tools, select the **Network** tab and start recording.</span></span>

    <span data-ttu-id="31443-585">![Netzwerk Aufzeichnung wird gestartet](maintainable-azure-websites-managing-change-and-scale/_static/image75.png "Netzwerk Aufzeichnung wird gestartet")</span><span class="sxs-lookup"><span data-stu-id="31443-585">![Starting network recording](maintainable-azure-websites-managing-change-and-scale/_static/image75.png "Starting network recording")</span></span>

    <span data-ttu-id="31443-586">*Netzwerk Aufzeichnung wird gestartet*</span><span class="sxs-lookup"><span data-stu-id="31443-586">*Starting network recording*</span></span>
3. <span data-ttu-id="31443-587">Drücken Sie **STRG + F5** , um die Webseite zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="31443-587">Press **CTRL + F5** to refresh the web page.</span></span>
4. <span data-ttu-id="31443-588">Nachdem die Seite geladen wurde, sollten Sie eine HTTP-Anforderung für die **/IMG/Logo-Big.png** -URL mit einem HTTP **301** -Ergebnis (Redirect) und eine weitere Anforderung für `http://[YOUR-STORAGE-ACCOUNT].blob.core.windows.net/images/logo-big.png`-URL mit einem HTTP **200** -Ergebnis sehen.</span><span class="sxs-lookup"><span data-stu-id="31443-588">Once the page has finished loading, you should see an HTTP request for the **/img/logo-big.png** URL with an HTTP **301** result (redirect) and another request for `http://[YOUR-STORAGE-ACCOUNT].blob.core.windows.net/images/logo-big.png` URL with a HTTP **200** result.</span></span>

    <span data-ttu-id="31443-589">![Überprüfen der URL-Umleitung](maintainable-azure-websites-managing-change-and-scale/_static/image76.png "Die Umleitung in Entwicklungs Tools wird angezeigt.")</span><span class="sxs-lookup"><span data-stu-id="31443-589">![Verifying the URL redirect](maintainable-azure-websites-managing-change-and-scale/_static/image76.png "Showing the redirect in Dev Tools")</span></span>

    <span data-ttu-id="31443-590">*Überprüfen der URL-Umleitung*</span><span class="sxs-lookup"><span data-stu-id="31443-590">*Verifying the URL redirect*</span></span>

<a id="Exercise5"></a>
### <a name="exercise-5-using-autoscale-for-web-apps"></a><span data-ttu-id="31443-591">Übung 5: Verwenden der automatischen Skalierung für Web-Apps</span><span class="sxs-lookup"><span data-stu-id="31443-591">Exercise 5: Using Autoscale for Web Apps</span></span>

> [!NOTE]
> <span data-ttu-id="31443-592">Diese Übung ist optional, da Sie Unterstützung für Web Load &amp; Leistungstests erfordert, die nur für **Visual Studio 2013 Ultimate Edition**verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="31443-592">This exercise is optional, since it requires support for Web Load &amp; Performance Testing which is only available for **Visual Studio 2013 Ultimate Edition**.</span></span> <span data-ttu-id="31443-593">Weitere Informationen zu bestimmten Visual Studio 2013 Funktionen [finden Sie hier](https://www.microsoft.com/visualstudio/eng/products/compare).</span><span class="sxs-lookup"><span data-stu-id="31443-593">For more information on specific Visual Studio 2013 features, compare versions [here](https://www.microsoft.com/visualstudio/eng/products/compare).</span></span>

<span data-ttu-id="31443-594">**Azure App Service-Web-Apps** bietet die Funktion für die automatische Skalierung für Web-Apps im **Standard Modus**.</span><span class="sxs-lookup"><span data-stu-id="31443-594">**Azure App Service Web Apps** provides the Autoscale feature for web apps running in **Standard Mode**.</span></span> <span data-ttu-id="31443-595">Die automatische Skalierung ermöglicht es Azure, die Anzahl der Instanzen Ihrer Web-App abhängig von der Auslastung automatisch zu skalieren.</span><span class="sxs-lookup"><span data-stu-id="31443-595">Autoscale lets Azure automatically scale the instance count of your web app depending on the load.</span></span> <span data-ttu-id="31443-596">Wenn die automatische Skalierung aktiviert ist, überprüft Azure alle fünf Minuten die CPU Ihrer Web-App und fügt zu diesem Zeitpunkt Instanzen nach Bedarf hinzu.</span><span class="sxs-lookup"><span data-stu-id="31443-596">When Autoscale is enabled, Azure checks the CPU of your web app once every five minutes and adds instances as needed at that point in time.</span></span> <span data-ttu-id="31443-597">Wenn die CPU-Auslastung gering ist, entfernt Azure alle zwei Stunden Instanzen, um sicherzustellen, dass die Leistung Ihrer Web-App nicht beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="31443-597">If the CPU usage is low, Azure will remove instances once every two hours to ensure that the performance of your web app is not degraded.</span></span>

<span data-ttu-id="31443-598">In dieser Übung führen Sie die Schritte aus, die zum Konfigurieren des Features für die **Automatische Skalierung** für die **Geek Quiz** -Web-App erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="31443-598">In this exercise you will go through the steps required to configure the **Autoscale** feature for the **Geek Quiz** web app.</span></span> <span data-ttu-id="31443-599">Sie überprüfen dieses Feature, indem Sie einen Visual Studio-Auslastungs Test ausführen, um eine ausreichende CPU-Auslastung für die Anwendung zu generieren und ein instanzupgrade auslösen</span><span class="sxs-lookup"><span data-stu-id="31443-599">You will verify this feature by running a Visual Studio load test to generate enough CPU load on the application to trigger an instance upgrade.</span></span>

<a id="Ex5Task1"></a>
#### <a name="task-1--configuring-autoscale-based-on-the-cpu-metric"></a><span data-ttu-id="31443-600">Aufgabe 1 – Konfigurieren der automatischen Skalierung basierend auf der CPU-Metrik</span><span class="sxs-lookup"><span data-stu-id="31443-600">Task 1 – Configuring Autoscale Based on the CPU Metric</span></span>

<span data-ttu-id="31443-601">In dieser Aufgabe verwenden Sie das Azure-Verwaltungs Portal, um die Funktion für die automatische Skalierung für die Web-App zu aktivieren, die Sie in Übung 2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="31443-601">In this task you will use the Azure management portal to enable the Autoscale feature for the web app you created in Exercise 2.</span></span>

1. <span data-ttu-id="31443-602">Wählen Sie im [Azure-Verwaltungs Portal](https://manage.windowsazure.com/) **Websites** aus, und klicken Sie auf die Web-App, die Sie in Übung 2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="31443-602">In the [Azure management portal](https://manage.windowsazure.com/), select **Websites** and click the web app you created in Exercise 2.</span></span>
2. <span data-ttu-id="31443-603">Navigieren Sie zur Seite **skalieren** .</span><span class="sxs-lookup"><span data-stu-id="31443-603">Navigate to the **Scale** page.</span></span> <span data-ttu-id="31443-604">Wählen Sie im Abschnitt **Kapazität** für die Konfiguration **nach Metrik skalieren** die Option **CPU** aus.</span><span class="sxs-lookup"><span data-stu-id="31443-604">Under the **capacity** section, select **CPU** for the **Scale by Metric** configuration.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-605">Bei der Skalierung nach CPU passt Azure die Anzahl der von der APP verwendeten Instanzen dynamisch an, wenn sich die CPU-Auslastung ändert.</span><span class="sxs-lookup"><span data-stu-id="31443-605">When scaling by CPU, Azure dynamically adjusts the number of instances that the app uses if the CPU usage changes.</span></span>

    <span data-ttu-id="31443-606">![Auswählen der Skalierung nach CPU](maintainable-azure-websites-managing-change-and-scale/_static/image77.png "Auswählen der CPU-Metrik für die automatische Skalierung")</span><span class="sxs-lookup"><span data-stu-id="31443-606">![Selecting to scale by CPU](maintainable-azure-websites-managing-change-and-scale/_static/image77.png "Selecting the CPU metric for auto scaling")</span></span>

    <span data-ttu-id="31443-607">*Auswählen der Skalierung nach CPU*</span><span class="sxs-lookup"><span data-stu-id="31443-607">*Selecting to scale by CPU*</span></span>
3. <span data-ttu-id="31443-608">Ändern Sie die **Ziel-CPU** -Konfiguration in **20**-**40** Prozent.</span><span class="sxs-lookup"><span data-stu-id="31443-608">Change the **Target CPU** configuration to **20**-**40** percent.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-609">Dieser Bereich stellt die durchschnittliche CPU-Auslastung für Ihre Web-App dar.</span><span class="sxs-lookup"><span data-stu-id="31443-609">This range represents the average CPU usage for your web app.</span></span> <span data-ttu-id="31443-610">Azure wird Instanzen hinzufügen oder entfernen, um Ihre Web-App in diesem Bereich zu speichern.</span><span class="sxs-lookup"><span data-stu-id="31443-610">Azure will add or remove instances to keep your web app in this range.</span></span> <span data-ttu-id="31443-611">Die minimale und maximale Anzahl von Instanzen, die für die Skalierung verwendet werden, wird in der **Instanzanzahl** konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="31443-611">The minimum and maximum number of instances used for scaling is specified in the **Instance Count** configuration.</span></span> <span data-ttu-id="31443-612">Azure geht nie über diesen Grenzwert hinaus.</span><span class="sxs-lookup"><span data-stu-id="31443-612">Azure will never go above or beyond that limit.</span></span>
    >
    > <span data-ttu-id="31443-613">Die standardmäßigen **CPU-Ziel** Werte werden nur für die Zwecke dieses Labs geändert.</span><span class="sxs-lookup"><span data-stu-id="31443-613">The default **Target CPU** values are modified just for the purposes of this lab.</span></span> <span data-ttu-id="31443-614">Wenn Sie den CPU-Bereich mit kleinen Werten konfigurieren, erhöhen Sie die Wahrscheinlichkeit, dass die automatische Skalierung auslöst, wenn eine mittlere Auslastung in der Anwendung erfolgt.</span><span class="sxs-lookup"><span data-stu-id="31443-614">By configuring the CPU range with small values, you are increasing the chances to trigger Autoscale when a moderate load is placed on the application.</span></span>

    <span data-ttu-id="31443-615">![Ändern der Ziel-CPU zwischen 20 und 40 Prozent](maintainable-azure-websites-managing-change-and-scale/_static/image78.png "Ändern der Ziel-CPU zwischen 20 und 40 Prozent")</span><span class="sxs-lookup"><span data-stu-id="31443-615">![Changing the target CPU to be between 20 and 40 percent](maintainable-azure-websites-managing-change-and-scale/_static/image78.png "Changing the target CPU to be between 20 and 40 percent")</span></span>

    <span data-ttu-id="31443-616">*Ändern der Ziel-CPU zwischen 20 und 40 Prozent*</span><span class="sxs-lookup"><span data-stu-id="31443-616">*Changing the Target CPU to be between 20 and 40 percent*</span></span>
4. <span data-ttu-id="31443-617">Klicken Sie in der Befehlsleiste auf **Speichern** , um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="31443-617">Click **Save** in the command bar to save the changes.</span></span>

<a id="Ex5Task2"></a>
#### <a name="task-2--load-testing-with-visual-studio"></a><span data-ttu-id="31443-618">Aufgabe 2 – Auslastungs Tests mit Visual Studio</span><span class="sxs-lookup"><span data-stu-id="31443-618">Task 2 – Load Testing with Visual Studio</span></span>

<span data-ttu-id="31443-619">Nachdem die **Automatische Skalierung** konfiguriert wurde, erstellen Sie ein **webleistungs-und Auslastungs Test Projekt** in Visual Studio, um eine CPU-Auslastung für Ihre Web-App zu generieren.</span><span class="sxs-lookup"><span data-stu-id="31443-619">Now that **Autoscale** has been configured, you will create a **Web Performance and Load Test Project** in Visual Studio to generate some CPU load on your web app.</span></span>

1. <span data-ttu-id="31443-620">Öffnen Sie **Visual Studio Ultimate 2013** , und wählen Sie Datei aus.  **Neu | Projekt...** , um eine neue Projekt Mappe zu starten.</span><span class="sxs-lookup"><span data-stu-id="31443-620">Open **Visual Studio Ultimate 2013** and select **File | New | Project...** to start a new solution.</span></span>

    <span data-ttu-id="31443-621">![Erstellen eines neuen Projekts](maintainable-azure-websites-managing-change-and-scale/_static/image79.png "Erstellen eines neuen Projekts")</span><span class="sxs-lookup"><span data-stu-id="31443-621">![Creating a new project](maintainable-azure-websites-managing-change-and-scale/_static/image79.png "Creating a new project")</span></span>

    <span data-ttu-id="31443-622">*Erstellen eines neuen Projekts*</span><span class="sxs-lookup"><span data-stu-id="31443-622">*Creating a new project*</span></span>
2. <span data-ttu-id="31443-623">Wählen Sie im Dialogfeld **Neues Projekt** unter dem visuellen **C# Element die Option webleistungs-und Auslastungs Test Projekt aus.** Registerkarte "Test". Stellen Sie sicher, dass **.NET Framework 4,5** ausgewählt ist, nennen Sie das Projekt *webandloadtestproject*, **Wählen Sie einen** **Speicherort** aus, und klicken</span><span class="sxs-lookup"><span data-stu-id="31443-623">In the **New Project** dialog box, select **Web Performance and Load Test Project** under the **Visual C# | Test** tab. Make sure **.NET Framework 4.5** is selected, name the project *WebAndLoadTestProject*, choose a **Location** and click **OK**.</span></span>

    <span data-ttu-id="31443-624">![Erstellen eines neuen Web-und Auslastungs Test Projekts](maintainable-azure-websites-managing-change-and-scale/_static/image80.png "Erstellen eines neuen Web-und Auslastungs Test Projekts")</span><span class="sxs-lookup"><span data-stu-id="31443-624">![Creating a new Web and Load Test project](maintainable-azure-websites-managing-change-and-scale/_static/image80.png "Creating a new Web and Load Test project")</span></span>

    <span data-ttu-id="31443-625">*Erstellen eines neuen Web-und Auslastungs Test Projekts*</span><span class="sxs-lookup"><span data-stu-id="31443-625">*Creating a new Web and Load Test project*</span></span>
3. <span data-ttu-id="31443-626">Klicken Sie im **WebTest1. Webtest** mit der rechten Maustaste auf den Knoten **WebTest1** , und klicken Sie auf **Anforderung hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="31443-626">In the **WebTest1.webtest** Right-click the **WebTest1** node and click **Add Request**.</span></span>

    <span data-ttu-id="31443-627">![Hinzufügen einer Anforderung zu WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image81.png "Hinzufügen einer Anforderung zu WebTest1")</span><span class="sxs-lookup"><span data-stu-id="31443-627">![Adding a request to WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image81.png "Adding a request to WebTest1")</span></span>

    <span data-ttu-id="31443-628">*Hinzufügen einer Anforderung zu WebTest1*</span><span class="sxs-lookup"><span data-stu-id="31443-628">*Adding a request to WebTest1*</span></span>
4. <span data-ttu-id="31443-629">Aktualisieren Sie im Fenster **Eigenschaften** des Knotens neue Anforderung die **URL** -Eigenschaft so, dass Sie auf die URL Ihrer Web-App verweist (z. b. *[http://geek-quiz.azurewebsites.net/](http://geek-quiz.azurewebsites.net/)* ).</span><span class="sxs-lookup"><span data-stu-id="31443-629">In the **Properties** window of the new request node, update the **Url** property to point to the URL of your web app (e.g. *[http://geek-quiz.azurewebsites.net/](http://geek-quiz.azurewebsites.net/)*).</span></span>

    <span data-ttu-id="31443-630">![Ändern der URL-Eigenschaft](maintainable-azure-websites-managing-change-and-scale/_static/image82.png "Ändern der URL-Eigenschaft")</span><span class="sxs-lookup"><span data-stu-id="31443-630">![Changing the Url property](maintainable-azure-websites-managing-change-and-scale/_static/image82.png "Changing the Url property")</span></span>

    <span data-ttu-id="31443-631">*Ändern der URL-Eigenschaft*</span><span class="sxs-lookup"><span data-stu-id="31443-631">*Changing the Url property*</span></span>
5. <span data-ttu-id="31443-632">Klicken Sie im Fenster **WebTest1. Webtest** mit der rechten Maustaste auf **WebTest1** , und klicken Sie auf **Schleife hinzufügen...** .</span><span class="sxs-lookup"><span data-stu-id="31443-632">In the **WebTest1.webtest** window, right-click **WebTest1** and click **Add Loop...**.</span></span>

    <span data-ttu-id="31443-633">![Hinzufügen einer Schleife zu WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image83.png "Hinzufügen einer Schleife zu WebTest1")</span><span class="sxs-lookup"><span data-stu-id="31443-633">![Adding a loop to WebTest1](maintainable-azure-websites-managing-change-and-scale/_static/image83.png "Adding a loop to WebTest1")</span></span>

    <span data-ttu-id="31443-634">*Hinzufügen einer Schleife zu WebTest1*</span><span class="sxs-lookup"><span data-stu-id="31443-634">*Adding a loop to WebTest1*</span></span>
6. <span data-ttu-id="31443-635">Wählen Sie im Dialogfeld **bedingte Regel und Elemente zu Schleife hinzufügen** die **for-Schleifen Regel aus** , und ändern Sie die folgenden Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="31443-635">In the **Add Conditional Rule and Items to Loop** dialog box, select the **For Loop** rule and modify the following properties.</span></span>

   1. <span data-ttu-id="31443-636">**Terminierender Wert:** 1000</span><span class="sxs-lookup"><span data-stu-id="31443-636">**Terminating value:** 1000</span></span>
   2. <span data-ttu-id="31443-637">**Kontext Parameter Name:** Iterator</span><span class="sxs-lookup"><span data-stu-id="31443-637">**Context Parameter Name:** Iterator</span></span>
   3. <span data-ttu-id="31443-638">**Inkrement-Wert:** 1</span><span class="sxs-lookup"><span data-stu-id="31443-638">**Increment Value:** 1</span></span>

      <span data-ttu-id="31443-639">![Auswählen der for-Schleifen Regel und Aktualisieren der Eigenschaften](maintainable-azure-websites-managing-change-and-scale/_static/image84.png "Auswählen der for-Schleifen Regel und Aktualisieren der Eigenschaften")</span><span class="sxs-lookup"><span data-stu-id="31443-639">![Selecting the For Loop rule and updating the properties](maintainable-azure-websites-managing-change-and-scale/_static/image84.png "Selecting the For Loop rule and updating the properties")</span></span>

      <span data-ttu-id="31443-640">*Auswählen der for-Schleifen Regel und Aktualisieren der Eigenschaften*</span><span class="sxs-lookup"><span data-stu-id="31443-640">*Selecting the For Loop rule and updating the properties*</span></span>
7. <span data-ttu-id="31443-641">Wählen Sie im Abschnitt **Elemente in der Schleife** die zuvor erstellte Anforderung als erstes und letztes Element für die Schleife aus.</span><span class="sxs-lookup"><span data-stu-id="31443-641">Under the **Items in loop** section, select the request you created previously to be the first and last item for the loop.</span></span> <span data-ttu-id="31443-642">Klicken Sie zum Fortsetzen des Vorgangs auf **OK** .</span><span class="sxs-lookup"><span data-stu-id="31443-642">Click **OK** to continue.</span></span>

    <span data-ttu-id="31443-643">![Auswählen der ersten und letzten Elemente für die Schleife](maintainable-azure-websites-managing-change-and-scale/_static/image85.png "Auswählen der ersten und letzten Elemente für die Schleife")</span><span class="sxs-lookup"><span data-stu-id="31443-643">![Selecting the first and last items for the loop](maintainable-azure-websites-managing-change-and-scale/_static/image85.png "Selecting the first and last items for the loop")</span></span>

    <span data-ttu-id="31443-644">*Auswählen der ersten und letzten Elemente für die Schleife*</span><span class="sxs-lookup"><span data-stu-id="31443-644">*Selecting the first and last items for the loop*</span></span>
8. <span data-ttu-id="31443-645">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt **webandloadtestproject** , erweitern Sie das Menü **Hinzufügen** , und wählen Sie **Auslastungs Test**aus.</span><span class="sxs-lookup"><span data-stu-id="31443-645">In **Solution Explorer**, right-click the **WebAndLoadTestProject** project, expand the **Add** menu and select **Load Test...**.</span></span>

    <span data-ttu-id="31443-646">![Hinzufügen eines Auslastungs Tests zum Projekt "webandloadtestproject"](maintainable-azure-websites-managing-change-and-scale/_static/image86.png "Hinzufügen eines Auslastungs Tests zum Projekt "webandloadtestproject"")</span><span class="sxs-lookup"><span data-stu-id="31443-646">![Adding a Load Test to the WebAndLoadTestProject project](maintainable-azure-websites-managing-change-and-scale/_static/image86.png "Adding a Load Test to the WebAndLoadTestProject project")</span></span>

    <span data-ttu-id="31443-647">*Hinzufügen eines Auslastungs Tests zum Projekt "webandloadtestproject"*</span><span class="sxs-lookup"><span data-stu-id="31443-647">*Adding a Load Test to the WebAndLoadTestProject project*</span></span>
9. <span data-ttu-id="31443-648">Klicken Sie im Dialogfeld **neue Auslastungstest-Assistent** auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-648">In the **New Load Test Wizard** dialog box, click **Next**.</span></span>

    <span data-ttu-id="31443-649">![Neue Auslastungstest-Assistent](maintainable-azure-websites-managing-change-and-scale/_static/image87.png "Neue Auslastungstest-Assistent")</span><span class="sxs-lookup"><span data-stu-id="31443-649">![New Load Test Wizard](maintainable-azure-websites-managing-change-and-scale/_static/image87.png "New Load Test Wizard")</span></span>

    <span data-ttu-id="31443-650">*Neue Auslastungstest-Assistent*</span><span class="sxs-lookup"><span data-stu-id="31443-650">*New Load Test Wizard*</span></span>
10. <span data-ttu-id="31443-651">Wählen Sie auf der Seite **Szenario** die Option **keine Gedanken Zeiten verwenden** aus, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-651">In the **Scenario** page, select **Do not use think times** and click **Next**.</span></span>

    <span data-ttu-id="31443-652">![Auswählen von "nicht für die Verwendung von"](maintainable-azure-websites-managing-change-and-scale/_static/image88.png "Auswählen von "nicht für die Verwendung von"")</span><span class="sxs-lookup"><span data-stu-id="31443-652">![Selecting not to use think times](maintainable-azure-websites-managing-change-and-scale/_static/image88.png "Selecting not to use think times")</span></span>

    <span data-ttu-id="31443-653">*Auswählen von "nicht für die Verwendung von"*</span><span class="sxs-lookup"><span data-stu-id="31443-653">*Selecting not to use think times*</span></span>
11. <span data-ttu-id="31443-654">Vergewissern Sie sich auf der Seite **Auslastungs Muster** , dass die Option **konstantes laden** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="31443-654">In the **Load Pattern** page, make sure that the **Constant Load** option is selected.</span></span> <span data-ttu-id="31443-655">Ändern Sie die Einstellung **Benutzer Anzahl** in **250** Benutzer, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-655">Change the **User Count** setting to **250** users and click **Next**.</span></span>

    <span data-ttu-id="31443-656">![Ändern der Benutzer Anzahl in 250](maintainable-azure-websites-managing-change-and-scale/_static/image89.png "Ändern der Benutzer Anzahl in 250")</span><span class="sxs-lookup"><span data-stu-id="31443-656">![Changing the user count to 250](maintainable-azure-websites-managing-change-and-scale/_static/image89.png "Changing the user count to 250")</span></span>

    <span data-ttu-id="31443-657">*Ändern der Benutzer Anzahl in 250*</span><span class="sxs-lookup"><span data-stu-id="31443-657">*Changing the user count to 250*</span></span>
12. <span data-ttu-id="31443-658">Wählen Sie auf der Seite **Test Mischungs Modell** die Option **basierend auf sequenzieller Test Reihenfolge** , **und klicken Sie**</span><span class="sxs-lookup"><span data-stu-id="31443-658">In the **Test Mix Model** page, select **Based on sequential test order** and click **Next**.</span></span>

    <span data-ttu-id="31443-659">![Auswählen des Test Mischungs Modells](maintainable-azure-websites-managing-change-and-scale/_static/image90.png "Auswählen des Test Mischungs Modells")</span><span class="sxs-lookup"><span data-stu-id="31443-659">![Selecting the test mix model](maintainable-azure-websites-managing-change-and-scale/_static/image90.png "Selecting the test mix model")</span></span>

    <span data-ttu-id="31443-660">*Auswählen des Test Mischungs Modells*</span><span class="sxs-lookup"><span data-stu-id="31443-660">*Selecting the test mix model*</span></span>
13. <span data-ttu-id="31443-661">Klicken Sie auf der Seite **Test Mischungs Modell** auf **hinzufügen...** , um der Mischung einen Test hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="31443-661">In the **Test Mix Model** page, click **Add...** to add a test to the mix.</span></span>

    <span data-ttu-id="31443-662">![Hinzufügen eines Tests zur Test Mischung](maintainable-azure-websites-managing-change-and-scale/_static/image91.png "Hinzufügen eines Tests zur Test Mischung")</span><span class="sxs-lookup"><span data-stu-id="31443-662">![Adding a test to the test mix](maintainable-azure-websites-managing-change-and-scale/_static/image91.png "Adding a test to the test mix")</span></span>

    <span data-ttu-id="31443-663">*Hinzufügen eines Tests zur Test Mischung*</span><span class="sxs-lookup"><span data-stu-id="31443-663">*Adding a test to the test mix*</span></span>
14. <span data-ttu-id="31443-664">Doppelklicken Sie im Dialogfeld **Tests hinzufügen** auf **WebTest1** , um den Test der Liste **Ausgewählte Tests** hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="31443-664">In the **Add Tests** dialog box, double-click **WebTest1** to add the test to the **Selected tests** list.</span></span> <span data-ttu-id="31443-665">Klicken Sie zum Fortsetzen des Vorgangs auf **OK** .</span><span class="sxs-lookup"><span data-stu-id="31443-665">Click **OK** to continue.</span></span>

    <span data-ttu-id="31443-666">![Hinzufügen des WebTest1-Tests](maintainable-azure-websites-managing-change-and-scale/_static/image92.png "Hinzufügen des WebTest1-Tests")</span><span class="sxs-lookup"><span data-stu-id="31443-666">![Adding the WebTest1 test](maintainable-azure-websites-managing-change-and-scale/_static/image92.png "Adding the WebTest1 test")</span></span>

    <span data-ttu-id="31443-667">*Hinzufügen des WebTest1-Tests*</span><span class="sxs-lookup"><span data-stu-id="31443-667">*Adding the WebTest1 test*</span></span>
15. <span data-ttu-id="31443-668">Klicken Sie auf der Seite " **Test Mischung** " auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-668">Back in the **Test Mix** page, click **Next**.</span></span>

    <span data-ttu-id="31443-669">![Fertigstellen der Seite "Test Mischung"](maintainable-azure-websites-managing-change-and-scale/_static/image93.png "Fertigstellen der Seite "Test Mischung"")</span><span class="sxs-lookup"><span data-stu-id="31443-669">![Completing the Test Mix page](maintainable-azure-websites-managing-change-and-scale/_static/image93.png "Completing the Test Mix page")</span></span>

    <span data-ttu-id="31443-670">*Fertigstellen der Seite "Test Mischung"*</span><span class="sxs-lookup"><span data-stu-id="31443-670">*Completing the Test Mix page*</span></span>
16. <span data-ttu-id="31443-671">Klicken Sie auf der Seite **Netzwerk Mischung** auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-671">In the **Network Mix** page, click **Next**.</span></span>

    <span data-ttu-id="31443-672">![Klicken auf "weiter" auf der Seite "Netzwerk Mischung"](maintainable-azure-websites-managing-change-and-scale/_static/image94.png "Klicken auf "weiter" auf der Seite "Netzwerk Mischung"")</span><span class="sxs-lookup"><span data-stu-id="31443-672">![Clicking next in the Network Mix page](maintainable-azure-websites-managing-change-and-scale/_static/image94.png "Clicking next in the Network Mix page")</span></span>

    <span data-ttu-id="31443-673">*Klicken auf "weiter" auf der Seite "Netzwerk Mischung"*</span><span class="sxs-lookup"><span data-stu-id="31443-673">*Clicking next in the Network Mix page*</span></span>
17. <span data-ttu-id="31443-674">Wählen Sie auf der Seite **Browser Mischung** **Internet Explorer 10,0** als Browsertyp aus, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-674">In the **Browser Mix** page, select **Internet Explorer 10.0** as the browser type and click **Next**.</span></span>

    <span data-ttu-id="31443-675">![Auswählen des Browsertyps](maintainable-azure-websites-managing-change-and-scale/_static/image95.png "Auswählen des Browsertyps")</span><span class="sxs-lookup"><span data-stu-id="31443-675">![Selecting the browser type](maintainable-azure-websites-managing-change-and-scale/_static/image95.png "Selecting the browser type")</span></span>

    <span data-ttu-id="31443-676">*Auswählen des Browsertyps*</span><span class="sxs-lookup"><span data-stu-id="31443-676">*Selecting the browser type*</span></span>
18. <span data-ttu-id="31443-677">Klicken Sie auf der Seite **Indikatorensätze** auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="31443-677">In the **Counter Sets** page, click **Next**.</span></span>

    <span data-ttu-id="31443-678">![Klicken auf der Seite Indikatorensätze auf weiter](maintainable-azure-websites-managing-change-and-scale/_static/image96.png "Klicken auf der Seite Indikatorensätze auf weiter")</span><span class="sxs-lookup"><span data-stu-id="31443-678">![Clicking Next in the Counter Sets page](maintainable-azure-websites-managing-change-and-scale/_static/image96.png "Clicking Next in the Counter Sets page")</span></span>

    <span data-ttu-id="31443-679">*Klicken auf der Seite Indikatorensätze auf weiter*</span><span class="sxs-lookup"><span data-stu-id="31443-679">*Clicking Next in the Counter Sets page*</span></span>
19. <span data-ttu-id="31443-680">Legen Sie auf der Seite Test **Lauf Einstellungen** den **Auslastungs Test** auf **5 Minuten** fest, und klicken Sie auf **Fertig**stellen.</span><span class="sxs-lookup"><span data-stu-id="31443-680">In the **Run Settings** page, set the **Load test duration** to **5 minutes** and click **Finish**.</span></span>

    <span data-ttu-id="31443-681">![Festlegen der Dauer des Auslastungs Tests auf 5 Minuten](maintainable-azure-websites-managing-change-and-scale/_static/image97.png "Festlegen der Dauer des Auslastungs Tests auf 5 Minuten")</span><span class="sxs-lookup"><span data-stu-id="31443-681">![Setting the load test duration to 5 minutes](maintainable-azure-websites-managing-change-and-scale/_static/image97.png "Setting the load test duration to 5 minutes")</span></span>

    <span data-ttu-id="31443-682">*Festlegen der Dauer des Auslastungs Tests auf 5 Minuten*</span><span class="sxs-lookup"><span data-stu-id="31443-682">*Setting the load test duration to 5 minutes*</span></span>
20. <span data-ttu-id="31443-683">Doppelklicken Sie in **Projektmappen-Explorer**auf die Datei **local. Settings** , um die Testeinstellungen zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="31443-683">In **Solution Explorer**, double-click the **Local.settings** file to explore the test settings.</span></span> <span data-ttu-id="31443-684">Standardmäßig verwendet Visual Studio den lokalen Computer, um die Tests auszuführen.</span><span class="sxs-lookup"><span data-stu-id="31443-684">By default, Visual Studio uses your local computer to run the tests.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-685">Alternativ können Sie das Testprojekt so konfigurieren, dass die Auslastungs Tests in der Cloud mit **Azure Test Plans**ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="31443-685">Alternatively, you can configure your test project to run the load tests in the cloud using **Azure Test Plans**.</span></span> <span data-ttu-id="31443-686">Azure Test Plans bietet einen cloudbasierten Auslastungs Test Dienst, der eine realistischere Last simuliert, sodass Einschränkungen in der lokalen Umgebung wie CPU-Kapazität, verfügbarer Arbeitsspeicher und Netzwerkbandbreite vermieden werden.</span><span class="sxs-lookup"><span data-stu-id="31443-686">Azure Test Plans provides a cloud-based load testing service that simulates a more realistic load, avoiding local environment constraints like CPU capacity, available memory, and network bandwidth.</span></span> <span data-ttu-id="31443-687">Weitere Informationen zum Verwenden von Azure Test Plans zum Ausführen von Auslastungs Tests finden Sie unter [Auslastungs Testszenarien](/azure/devops/test/load-test/overview?view=vsts).</span><span class="sxs-lookup"><span data-stu-id="31443-687">For more information about using Azure Test Plans to run load tests, see [Load testing scenarios](/azure/devops/test/load-test/overview?view=vsts).</span></span>

    ![Testeinstellungen](maintainable-azure-websites-managing-change-and-scale/_static/image98.png)

<a id="Ex5Task3"></a>
#### <a name="task-3--autoscale-verification"></a><span data-ttu-id="31443-689">Aufgabe 3 – automatische Skalierungs Überprüfung</span><span class="sxs-lookup"><span data-stu-id="31443-689">Task 3 – Autoscale Verification</span></span>

<span data-ttu-id="31443-690">Nun führen Sie den Auslastungs Test aus, den Sie in der vorherigen Aufgabe erstellt haben, und sehen, wie sich Ihre Web-App unter Last verhält.</span><span class="sxs-lookup"><span data-stu-id="31443-690">You will now execute the load test you created in the previous task and see how your web app behaves under load.</span></span>

1. <span data-ttu-id="31443-691">Doppelklicken Sie in **Projektmappen-Explorer**auf **loadtest1. LoadTest** , um den Auslastungs Test zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="31443-691">In **Solution Explorer**, double-click **LoadTest1.loadtest** to open the load test.</span></span>

    <span data-ttu-id="31443-692">![Öffnen von "loadtest1. LoadTest"](maintainable-azure-websites-managing-change-and-scale/_static/image99.png "Öffnen von "loadtest1. LoadTest"")</span><span class="sxs-lookup"><span data-stu-id="31443-692">![Opening LoadTest1.loadtest](maintainable-azure-websites-managing-change-and-scale/_static/image99.png "Opening LoadTest1.loadtest")</span></span>

    <span data-ttu-id="31443-693">*Öffnen von "loadtest1. LoadTest"*</span><span class="sxs-lookup"><span data-stu-id="31443-693">*Opening LoadTest1.loadtest*</span></span>
2. <span data-ttu-id="31443-694">Klicken Sie im Fenster **loadtest1. LoadTest** auf die erste Schaltfläche in der Toolbox, um den Auslastungs Test auszuführen.</span><span class="sxs-lookup"><span data-stu-id="31443-694">In the **LoadTest1.loadtest** window, click the first button in the toolbox to run the load test.</span></span>

    <span data-ttu-id="31443-695">![Ausführen des Auslastungs Tests](maintainable-azure-websites-managing-change-and-scale/_static/image100.png "Ausführen des Auslastungs Tests")</span><span class="sxs-lookup"><span data-stu-id="31443-695">![Running the load test](maintainable-azure-websites-managing-change-and-scale/_static/image100.png "Running the load test")</span></span>

    <span data-ttu-id="31443-696">*Ausführen des Auslastungs Tests*</span><span class="sxs-lookup"><span data-stu-id="31443-696">*Running the load test*</span></span>
3. <span data-ttu-id="31443-697">Warten Sie, bis der Auslastungs Test abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="31443-697">Wait until the load test completes.</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-698">Mit dem Auslastungs Test werden mehrere Benutzer simuliert, die gleichzeitig Anforderungen an die Web-App senden.</span><span class="sxs-lookup"><span data-stu-id="31443-698">The load test simulates multiple users that send requests to the web app simultaneously.</span></span> <span data-ttu-id="31443-699">Wenn der Test ausgeführt wird, können Sie die verfügbaren Leistungsindikatoren überwachen, um Fehler, Warnungen oder andere Informationen im Zusammenhang mit dem Auslastungs Testlauf zu erkennen.</span><span class="sxs-lookup"><span data-stu-id="31443-699">When the test is running, you can monitor the available counters to detect any errors, warnings or other information related to your load test run.</span></span>

    <span data-ttu-id="31443-700">![Auslastungs Test ausgeführt](maintainable-azure-websites-managing-change-and-scale/_static/image101.png "Warten, bis der Auslastungs Test abgeschlossen ist")</span><span class="sxs-lookup"><span data-stu-id="31443-700">![Load test running](maintainable-azure-websites-managing-change-and-scale/_static/image101.png "Waiting until the load test completes")</span></span>

    <span data-ttu-id="31443-701">*Auslastungs Test ausgeführt*</span><span class="sxs-lookup"><span data-stu-id="31443-701">*Load test running*</span></span>
4. <span data-ttu-id="31443-702">Nachdem der Test abgeschlossen ist, wechseln Sie zurück zum Verwaltungs Portal, und navigieren Sie zur Seite **skalieren** Ihrer Web-App.</span><span class="sxs-lookup"><span data-stu-id="31443-702">Once the test completes, go back to the management portal and navigate to the **Scale** page of your web app.</span></span> <span data-ttu-id="31443-703">Im Abschnitt **Kapazität** sollte im Diagramm angezeigt werden, dass eine neue Instanz automatisch bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="31443-703">Under the **capacity** section, you should see in the graph that a new instance was automatically deployed.</span></span>

    ![Neue Instanz automatisch bereitgestellt](maintainable-azure-websites-managing-change-and-scale/_static/image102.png)

    <span data-ttu-id="31443-705">*Neue Instanz automatisch bereitgestellt*</span><span class="sxs-lookup"><span data-stu-id="31443-705">*New instance automatically deployed*</span></span>

    > [!NOTE]
    > <span data-ttu-id="31443-706">Es kann einige Minuten dauern, bis die Änderungen im Diagramm angezeigt werden (drücken Sie in regelmäßigen Abständen **STRG + F5** , um die Seite zu aktualisieren).</span><span class="sxs-lookup"><span data-stu-id="31443-706">It may take several minutes for the changes to appear in the graph (press **CTRL + F5** periodically to refresh the page).</span></span> <span data-ttu-id="31443-707">Wenn keine Änderungen angezeigt werden, können Sie Folgendes versuchen:</span><span class="sxs-lookup"><span data-stu-id="31443-707">If you do not see any changes, you can try the following:</span></span>
    >
    > - <span data-ttu-id="31443-708">Dauer des Auslastungs Tests erhöhen (z. b. auf **10 Minuten**)</span><span class="sxs-lookup"><span data-stu-id="31443-708">Increase the duration of the load test (e.g. to **10 minutes**)</span></span>
    > - <span data-ttu-id="31443-709">Reduzieren Sie die maximalen und minimalen Werte für den **Ziel-CPU** -Bereich in der Konfiguration für die automatische Skalierung Ihrer Web-App.</span><span class="sxs-lookup"><span data-stu-id="31443-709">Reduce the maximum and minimum values of the **Target CPU** range in the Autoscale configuration of your web app</span></span>
    > - <span data-ttu-id="31443-710">Führen Sie den Auslastungs Test in der Cloud mit **Azure Test Plans**aus.</span><span class="sxs-lookup"><span data-stu-id="31443-710">Run the load test in the cloud with **Azure Test Plans**.</span></span> <span data-ttu-id="31443-711">Weitere Informationen finden Sie [hier](/azure/devops/test/load-test/index?view=vsts).</span><span class="sxs-lookup"><span data-stu-id="31443-711">More information [here](/azure/devops/test/load-test/index?view=vsts)</span></span>

---

<a id="Summary"></a>
## <a name="summary"></a><span data-ttu-id="31443-712">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="31443-712">Summary</span></span>

<span data-ttu-id="31443-713">In dieser praktischen Übungseinheit haben Sie erfahren, wie Sie Ihre Anwendung in Produktions-Web-Apps in Azure einrichten und bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="31443-713">In this hands-on lab, you learned how to set up and deploy your application to production web apps in Azure.</span></span> <span data-ttu-id="31443-714">Sie haben damit begonnen, die Datenbanken mithilfe **Entity Framework Code First-Migrationen**zu erkennen und zu aktualisieren. Anschließend haben Sie die Bereitstellung neuer Versionen Ihres Standorts mithilfe von **git** und die Durchführung von Rollbacks auf die neueste stabile Version Ihres Standorts fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="31443-714">You started by detecting and updating your databases using **Entity Framework Code First Migrations**, then continued by deploying new versions of your site using **Git** and performing rollbacks to the latest stable version of your site.</span></span> <span data-ttu-id="31443-715">Außerdem haben Sie erfahren, wie Sie Ihre App mithilfe von Speicher skalieren, um statische Inhalte in einen BLOB-Container zu verschieben.</span><span class="sxs-lookup"><span data-stu-id="31443-715">Additionally, you learned how to scale your app using Storage to move your static content to a Blob container.</span></span>
