---
uid: config-builder
title: Konfigurations-Generatoren für ASP.net
author: rick-anderson
description: Erfahren Sie, wie Sie Konfigurationsdaten aus anderen Quellen als Web. config-Werte aus externen Quellen erhalten.
ms.author: riande
ms.date: 10/29/2018
msc.type: content
ms.openlocfilehash: 5299d9ab057c3096773955a7461e77a80673ebfe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78472305"
---
# <a name="configuration-builders-for-aspnet"></a><span data-ttu-id="6d9f3-103">Konfigurations-Generatoren für ASP.net</span><span class="sxs-lookup"><span data-stu-id="6d9f3-103">Configuration builders for ASP.NET</span></span>

<span data-ttu-id="6d9f3-104">Von [Stephen Molloy](https://github.com/StephenMolloy) und [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="6d9f3-104">By [Stephen Molloy](https://github.com/StephenMolloy) and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="6d9f3-105">Konfigurations-Generatoren stellen einen modernen und agilen Mechanismus für ASP.net-apps bereit, um Konfigurationswerte aus externen Quellen zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-105">Configuration builders provide a modern and agile mechanism for ASP.NET apps to get configuration values from external sources.</span></span>

<span data-ttu-id="6d9f3-106">Konfigurations-Generatoren:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-106">Configuration builders:</span></span>

* <span data-ttu-id="6d9f3-107">Sind in .NET Framework 4.7.1 und höher verfügbar.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-107">Are available in .NET Framework 4.7.1 and later.</span></span>
* <span data-ttu-id="6d9f3-108">Stellen Sie einen flexiblen Mechanismus zum Lesen von Konfigurations Werten bereit.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-108">Provide a flexible mechanism for reading configuration values.</span></span>
* <span data-ttu-id="6d9f3-109">Berücksichtigen Sie einige der grundlegenden Anforderungen von apps, die in einen Container und eine in der Cloud fokussierte Umgebung verschoben werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-109">Address some of the basic needs of apps as they move into a container and cloud focused environment.</span></span>
* <span data-ttu-id="6d9f3-110">Kann verwendet werden, um den Schutz von Konfigurationsdaten durch das Zeichnen aus Quellen zu verbessern, die zuvor nicht verfügbar waren (z. b. Azure Key Vault und Umgebungsvariablen) im .NET-Konfigurationssystem.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-110">Can be used to improve protection of configuration data by drawing from sources previously unavailable (for example, Azure Key Vault and environment variables) in the .NET configuration system.</span></span>

## <a name="keyvalue-configuration-builders"></a><span data-ttu-id="6d9f3-111">Schlüssel-Wert-Konfigurations-Generatoren</span><span class="sxs-lookup"><span data-stu-id="6d9f3-111">Key/value configuration builders</span></span>

<span data-ttu-id="6d9f3-112">Ein häufiges Szenario, das von Configuration Builder behandelt werden kann, ist die Bereitstellung eines grundlegenden Schlüssel-Wert-ersatzmechanismus für Konfigurations Abschnitte, die einem Schlüssel-Wert-Muster folgen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-112">A common scenario that can be handled by configuration builders is to provide a basic key/value replacement mechanism for configuration sections that follow a key/value pattern.</span></span> <span data-ttu-id="6d9f3-113">Das .NET Framework Konzept von configurationbuilder ist nicht auf bestimmte Konfigurations Abschnitte oder Muster beschränkt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-113">The .NET Framework concept of ConfigurationBuilders is not limited to specific configuration sections or patterns.</span></span> <span data-ttu-id="6d9f3-114">Viele der Konfigurations-Generatoren in `Microsoft.Configuration.ConfigurationBuilders` ([GitHub](https://github.com/aspnet/MicrosoftConfigurationBuilders), [nuget](https://www.nuget.org/packages?q=Microsoft.Configuration.ConfigurationBuilders)) funktionieren jedoch innerhalb des Schlüssel-Wert-Musters.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-114">However, many of the configuration builders in `Microsoft.Configuration.ConfigurationBuilders` ([github](https://github.com/aspnet/MicrosoftConfigurationBuilders), [NuGet](https://www.nuget.org/packages?q=Microsoft.Configuration.ConfigurationBuilders)) work within the key/value pattern.</span></span>

## <a name="keyvalue-configuration-builders-settings"></a><span data-ttu-id="6d9f3-115">Einstellungen für die Schlüssel-/wertkonfigurationsbuilder</span><span class="sxs-lookup"><span data-stu-id="6d9f3-115">Key/value configuration builders settings</span></span>

<span data-ttu-id="6d9f3-116">Die folgenden Einstellungen gelten für alle Schlüssel-Wert-Konfigurations-Generatoren in `Microsoft.Configuration.ConfigurationBuilders`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-116">The following settings apply to all key/value configuration builders in `Microsoft.Configuration.ConfigurationBuilders`.</span></span>

### <a name="mode"></a><span data-ttu-id="6d9f3-117">Modus</span><span class="sxs-lookup"><span data-stu-id="6d9f3-117">Mode</span></span>

<span data-ttu-id="6d9f3-118">Die Konfigurations-Generatoren verwenden eine externe Quelle von Schlüssel-Wert-Informationen, um die ausgewählten Schlüssel-Wert-Elemente des Konfigurations Systems aufzufüllen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-118">The configuration builders use an external source of key/value information to populate selected key/value elements of the configuration system.</span></span> <span data-ttu-id="6d9f3-119">Insbesondere die Abschnitte "`<appSettings/>`" und "`<connectionStrings/>`" werden von den Konfigurations-Generatoren besonders behandelt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-119">Specifically, the `<appSettings/>` and `<connectionStrings/>` sections receive special treatment from the configuration builders.</span></span> <span data-ttu-id="6d9f3-120">Die Generatoren funktionieren in drei Modi:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-120">The builders work in three modes:</span></span>

* <span data-ttu-id="6d9f3-121">`Strict`: der Standardmodus.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-121">`Strict` - The default mode.</span></span> <span data-ttu-id="6d9f3-122">In diesem Modus arbeitet der Konfigurations-Generator nur mit bekannten Schlüssel/Wert-zentrierten Konfigurations Abschnitten.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-122">In this mode, the configuration builder only operates on well-known key/value-centric configuration sections.</span></span> <span data-ttu-id="6d9f3-123">im `Strict` Modus werden die einzelnen Schlüssel im-Abschnitt aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-123">`Strict` mode enumerates each key in the section.</span></span> <span data-ttu-id="6d9f3-124">Wenn ein übereinstimmender Schlüssel in der externen Quelle gefunden wird:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-124">If a matching key is found in the external source:</span></span>

   * <span data-ttu-id="6d9f3-125">Die Konfigurations-Generatoren ersetzen den Wert im resultierenden Konfigurations Abschnitt durch den Wert aus der externen Quelle.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-125">The configuration builders replace the value in the resulting configuration section with the value from the external source.</span></span>
* <span data-ttu-id="6d9f3-126">`Greedy`: Dieser Modus ist eng mit `Strict` Modus verknüpft.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-126">`Greedy` - This mode is closely related to `Strict` mode.</span></span> <span data-ttu-id="6d9f3-127">Anstatt auf Schlüssel beschränkt zu sein, die in der ursprünglichen Konfiguration bereits vorhanden sind:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-127">Rather than being limited to keys that already exist in the original configuration:</span></span>

  * <span data-ttu-id="6d9f3-128">Die Konfigurations-Generatoren fügen alle Schlüssel-Wert-Paare aus der externen Quelle dem sich ergebenden Konfigurations Abschnitt hinzu.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-128">The configuration builders adds all key/value pairs from the external source into the resulting configuration section.</span></span>

* <span data-ttu-id="6d9f3-129">`Expand`-für die unformatierte XML-Datei vor dem analysieren in ein Konfigurations Abschnitts Objekt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-129">`Expand` - Operates on the raw XML before it's parsed into a configuration section object.</span></span> <span data-ttu-id="6d9f3-130">Dies kann sich als Erweiterung von Token in einer Zeichenfolge vorstellen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-130">It can be thought of as an expansion of tokens in a string.</span></span> <span data-ttu-id="6d9f3-131">Jeder Teil der unformatierten XML-Zeichenfolge, die dem Muster `${token}` entspricht, ist ein Kandidat für die Tokenerweiterung.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-131">Any part of the raw XML string that matches the pattern `${token}` is a candidate for token expansion.</span></span> <span data-ttu-id="6d9f3-132">Wenn kein entsprechender Wert in der externen Quelle gefunden wird, wird das Token nicht geändert.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-132">If no corresponding value is found in the external source, then the token is not changed.</span></span> <span data-ttu-id="6d9f3-133">Generatoren in diesem Modus sind nicht auf die Abschnitte `<appSettings/>` und `<connectionStrings/>` beschränkt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-133">Builders in this mode are not limited to the `<appSettings/>` and `<connectionStrings/>` sections.</span></span>

<span data-ttu-id="6d9f3-134">Mit dem folgenden Markup aus *Web. config* wird der [Umgebungs](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Environment/) -Generator im `Strict` Modus aktiviert:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-134">The following markup from *web.config* enables the [EnvironmentConfigBuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Environment/) in `Strict` mode:</span></span>

[!code-xml[Main](config-builder/MyConfigBuilders/WebDefault.config?name=snippet)]

<span data-ttu-id="6d9f3-135">Der folgende Code liest die `<appSettings/>` und `<connectionStrings/>`, die in der vorherigen *Web. config* -Datei angezeigt werden:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-135">The following code reads the `<appSettings/>` and `<connectionStrings/>` shown in the preceding *web.config* file:</span></span>

[!code-csharp[Main](config-builder/MyConfigBuilders/About.aspx.cs)]

<span data-ttu-id="6d9f3-136">Im vorangehenden Code werden die Eigenschaftswerte auf festgelegt:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-136">The preceding code will set the property values to:</span></span>

* <span data-ttu-id="6d9f3-137">Die Werte in der Datei " *Web. config* ", wenn die Schlüssel nicht in Umgebungsvariablen festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-137">The values in the *web.config* file if the keys are not set in environment variables.</span></span>
* <span data-ttu-id="6d9f3-138">Die Werte der Umgebungsvariablen, sofern festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-138">The values of the environment variable, if set.</span></span>

<span data-ttu-id="6d9f3-139">`ServiceID` enthalten beispielsweise Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-139">For example, `ServiceID` will contain:</span></span>

* <span data-ttu-id="6d9f3-140">"Serviceid value from Web. config", wenn die Umgebungsvariable `ServiceID` nicht festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-140">"ServiceID value from web.config", if the environment variable `ServiceID` is not set.</span></span>
* <span data-ttu-id="6d9f3-141">Der Wert der `ServiceID` Umgebungsvariablen, sofern festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-141">The value of the `ServiceID` environment variable, if set.</span></span>

<span data-ttu-id="6d9f3-142">Die folgende Abbildung zeigt die `<appSettings/>` Schlüssel/Werte aus der vorherigen Datei *Web. config* , die im Umgebungs-Editor festgelegt wurde:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-142">The following image shows the `<appSettings/>` keys/values from the preceding *web.config* file set in the environment editor:</span></span>

![Umgebungs-Editor](config-builder/static/env.png)

<span data-ttu-id="6d9f3-144">Hinweis: möglicherweise müssen Sie Visual Studio beenden und neu starten, um Änderungen in Umgebungsvariablen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-144">Note: You might need to exit and restart Visual Studio to see changes in environment variables.</span></span>

### <a name="prefix-handling"></a><span data-ttu-id="6d9f3-145">Präfix Behandlung</span><span class="sxs-lookup"><span data-stu-id="6d9f3-145">Prefix handling</span></span>

<span data-ttu-id="6d9f3-146">Wichtige Präfixe können das Festlegen von Schlüsseln vereinfachen:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-146">Key prefixes can simplify setting keys because:</span></span>

* <span data-ttu-id="6d9f3-147">Die .NET Framework Konfiguration ist komplex und wird nicht eingefügt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-147">The .NET Framework configuration is complex and nested.</span></span>
* <span data-ttu-id="6d9f3-148">Externe Schlüssel-/Wertquellen sind im allgemeinen grundlegend und flach.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-148">External key/value sources are commonly basic and flat by nature.</span></span> <span data-ttu-id="6d9f3-149">Umgebungsvariablen sind z. b. nicht vollständig.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-149">For example, environment variables are not nested.</span></span>

<span data-ttu-id="6d9f3-150">Verwenden Sie einen der folgenden Ansätze, um mithilfe von Umgebungsvariablen sowohl `<appSettings/>` als auch `<connectionStrings/>` in die Konfiguration einzufügen:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-150">Use any of the following approaches to inject both `<appSettings/>` and `<connectionStrings/>` into the configuration via environment variables:</span></span>

* <span data-ttu-id="6d9f3-151">Mit dem `EnvironmentConfigBuilder` im Standard `Strict` Modus und den entsprechenden Schlüsselnamen in der Konfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-151">With the `EnvironmentConfigBuilder` in the default `Strict` mode and the appropriate key names in the configuration file.</span></span> <span data-ttu-id="6d9f3-152">Der vorangehende Code und das Markup haben diese Vorgehensweise.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-152">The preceding code and markup takes this approach.</span></span> <span data-ttu-id="6d9f3-153">Wenn Sie diesen Ansatz verwenden, können Sie in `<appSettings/>` und `<connectionStrings/>`**nicht** identisch benannte Schlüssel haben.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-153">Using this approach you can **not** have identically named keys in both `<appSettings/>` and `<connectionStrings/>`.</span></span>
* <span data-ttu-id="6d9f3-154">Verwenden Sie im `Greedy` Modus zwei `EnvironmentConfigBuilder`s mit unterschiedlichen Präfixen und `stripPrefix`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-154">Use two `EnvironmentConfigBuilder`s in `Greedy` mode with distinct prefixes and `stripPrefix`.</span></span> <span data-ttu-id="6d9f3-155">Bei diesem Ansatz kann die APP `<appSettings/>` und `<connectionStrings/>` lesen, ohne die Konfigurationsdatei aktualisieren zu müssen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-155">With this approach, the app can read `<appSettings/>` and `<connectionStrings/>` without needing to update the configuration file.</span></span> <span data-ttu-id="6d9f3-156">Der nächste Abschnitt, [stripprefix](#stripprefix), zeigt, wie dies geschieht.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-156">The next section,  [stripPrefix](#stripprefix),  shows how to do this.</span></span>
* <span data-ttu-id="6d9f3-157">Verwenden Sie im `Greedy` Modus zwei `EnvironmentConfigBuilder`s mit unterschiedlichen Präfixen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-157">Use two `EnvironmentConfigBuilder`s in `Greedy` mode with distinct prefixes.</span></span> <span data-ttu-id="6d9f3-158">Bei dieser Vorgehensweise können keine doppelten Schlüsselnamen vorhanden sein, da Schlüsselnamen sich durch das Präfix unterscheiden müssen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-158">With this approach you can't have duplicate key names as key names must differ by prefix.</span></span>  <span data-ttu-id="6d9f3-159">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-159">For example:</span></span>

[!code-xml[Main](config-builder/MyConfigBuilders/WebPrefix.config?name=snippet&highlight=11-99)]

<span data-ttu-id="6d9f3-160">Mit dem vorangehenden Markup kann die gleiche flatkey/Value-Quelle verwendet werden, um die Konfiguration für zwei verschiedene Abschnitte aufzufüllen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-160">With the preceding markup, the same flat key/value source can be used to populate configuration for two different sections.</span></span>

<span data-ttu-id="6d9f3-161">In der folgenden Abbildung werden die `<appSettings/>`-und `<connectionStrings/>` Schlüssel/Werte aus der vorherigen Datei *Web. config* im Umgebungs-Editor angezeigt:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-161">The following image shows the `<appSettings/>` and `<connectionStrings/>` keys/values from the preceding *web.config* file set in the environment editor:</span></span>

![Umgebungs-Editor](config-builder/static/prefix.png)

<span data-ttu-id="6d9f3-163">Der folgende Code liest die `<appSettings/>`-und `<connectionStrings/>` Schlüssel/-Werte, die in der vorherigen *Web. config* -Datei enthalten sind:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-163">The following code reads the `<appSettings/>` and `<connectionStrings/>` keys/values contained in the preceding *web.config* file:</span></span>

[!code-csharp[Main](config-builder/MyConfigBuilders/Contact.aspx.cs?name=snippet)]

<span data-ttu-id="6d9f3-164">Im vorangehenden Code werden die Eigenschaftswerte auf festgelegt:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-164">The preceding code will set the property values to:</span></span>

* <span data-ttu-id="6d9f3-165">Die Werte in der Datei " *Web. config* ", wenn die Schlüssel nicht in Umgebungsvariablen festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-165">The values in the *web.config* file if the keys are not set in environment variables.</span></span>
* <span data-ttu-id="6d9f3-166">Die Werte der Umgebungsvariablen, sofern festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-166">The values of the environment variable, if set.</span></span>

<span data-ttu-id="6d9f3-167">Beispielsweise werden die folgenden Werte festgelegt, indem Sie die vorherige *Web. config* -Datei, die Schlüssel/Werte im vorherigen Bild des Umgebungs-Editors und den vorherigen Code verwenden:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-167">For example, using the previous *web.config* file, the keys/values in the previous  environment editor image, and the previous code, the following values are set:</span></span>

|  <span data-ttu-id="6d9f3-168">Key</span><span class="sxs-lookup"><span data-stu-id="6d9f3-168">Key</span></span>              | <span data-ttu-id="6d9f3-169">value</span><span class="sxs-lookup"><span data-stu-id="6d9f3-169">Value</span></span> |
| ----------------- | ------------ |
|     <span data-ttu-id="6d9f3-170">AppSetting_ServiceID</span><span class="sxs-lookup"><span data-stu-id="6d9f3-170">AppSetting_ServiceID</span></span>           | <span data-ttu-id="6d9f3-171">AppSetting_ServiceID von "dev"-Variablen</span><span class="sxs-lookup"><span data-stu-id="6d9f3-171">AppSetting_ServiceID from env variables</span></span>|
|    <span data-ttu-id="6d9f3-172">AppSetting_default</span><span class="sxs-lookup"><span data-stu-id="6d9f3-172">AppSetting_default</span></span>            | <span data-ttu-id="6d9f3-173">AppSetting_default Wert aus der enumerationsdatei</span><span class="sxs-lookup"><span data-stu-id="6d9f3-173">AppSetting_default value from env</span></span> |
|       <span data-ttu-id="6d9f3-174">ConnStr_default</span><span class="sxs-lookup"><span data-stu-id="6d9f3-174">ConnStr_default</span></span>         | <span data-ttu-id="6d9f3-175">ConnStr_default Val von der Gesamt Version</span><span class="sxs-lookup"><span data-stu-id="6d9f3-175">ConnStr_default val from env</span></span>|

### <a name="stripprefix"></a><span data-ttu-id="6d9f3-176">stripprefix</span><span class="sxs-lookup"><span data-stu-id="6d9f3-176">stripPrefix</span></span>

<span data-ttu-id="6d9f3-177">`stripPrefix`: Boolescher Wert ist standardmäßig `false`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-177">`stripPrefix`: boolean, defaults to `false`.</span></span> 

<span data-ttu-id="6d9f3-178">Das vorangehende XML-Markup trennt App-Einstellungen von Verbindungs Zeichenfolgen, erfordert jedoch, dass alle Schlüssel in der Datei " *Web. config* " das angegebene Präfix verwenden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-178">The preceding XML markup separates app settings from connection strings but requires all the keys in the *web.config* file to use the specified prefix.</span></span> <span data-ttu-id="6d9f3-179">Beispielsweise muss das Präfix `AppSetting` dem `ServiceID` Schlüssel ("AppSetting_ServiceID") hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-179">For example, the prefix `AppSetting` must be added to the `ServiceID` key ("AppSetting_ServiceID").</span></span> <span data-ttu-id="6d9f3-180">Bei `stripPrefix`wird das Präfix nicht in der Datei " *Web. config* " verwendet.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-180">With `stripPrefix`, the prefix is not used in the *web.config* file.</span></span> <span data-ttu-id="6d9f3-181">Das Präfix ist in der Configuration Builder-Quelle erforderlich (z. b. in der-Umgebung). Wir erwarten, dass die meisten Entwickler `stripPrefix`verwenden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-181">The prefix is required in the configuration builder source (for example, in the environment.) We anticipate most developers will use `stripPrefix`.</span></span>

<span data-ttu-id="6d9f3-182">Anwendungen entfernen in der Regel das Präfix.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-182">Applications typically strip off the prefix.</span></span> <span data-ttu-id="6d9f3-183">Mit der folgenden *Web. config* -Datei wird das Präfix entfernt:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-183">The following *web.config* strips the prefix:</span></span>

[!code-xml[Main](config-builder/MyConfigBuilders/WebPrefixStrip.config?name=snippet&highlight=14,19)]

<span data-ttu-id="6d9f3-184">In der vorherigen *Web. config* -Datei befindet sich der `default` Schlüssel sowohl in der `<appSettings/>` als auch in der `<connectionStrings/>`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-184">In the preceding *web.config* file, the `default` key is in both the `<appSettings/>` and `<connectionStrings/>`.</span></span>

<span data-ttu-id="6d9f3-185">In der folgenden Abbildung werden die `<appSettings/>`-und `<connectionStrings/>` Schlüssel/Werte aus der vorherigen Datei *Web. config* im Umgebungs-Editor angezeigt:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-185">The following image shows the `<appSettings/>` and `<connectionStrings/>` keys/values from the preceding *web.config* file set in the environment editor:</span></span>

![Umgebungs-Editor](config-builder/static/prefix.png)

<span data-ttu-id="6d9f3-187">Der folgende Code liest die `<appSettings/>`-und `<connectionStrings/>` Schlüssel/-Werte, die in der vorherigen *Web. config* -Datei enthalten sind:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-187">The following code reads the `<appSettings/>` and `<connectionStrings/>` keys/values contained in the preceding *web.config* file:</span></span>

[!code-csharp[Main](config-builder/MyConfigBuilders/About2.aspx.cs?name=snippet)]

<span data-ttu-id="6d9f3-188">Im vorangehenden Code werden die Eigenschaftswerte auf festgelegt:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-188">The preceding code will set the property values to:</span></span>

* <span data-ttu-id="6d9f3-189">Die Werte in der Datei " *Web. config* ", wenn die Schlüssel nicht in Umgebungsvariablen festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-189">The values in the *web.config* file if the keys are not set in environment variables.</span></span>
* <span data-ttu-id="6d9f3-190">Die Werte der Umgebungsvariablen, sofern festgelegt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-190">The values of the environment variable, if set.</span></span>

<span data-ttu-id="6d9f3-191">Beispielsweise werden die folgenden Werte festgelegt, indem Sie die vorherige *Web. config* -Datei, die Schlüssel/Werte im vorherigen Bild des Umgebungs-Editors und den vorherigen Code verwenden:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-191">For example, using the previous *web.config* file, the keys/values in the previous  environment editor image, and the previous code, the following values are set:</span></span>

|  <span data-ttu-id="6d9f3-192">Key</span><span class="sxs-lookup"><span data-stu-id="6d9f3-192">Key</span></span>              | <span data-ttu-id="6d9f3-193">value</span><span class="sxs-lookup"><span data-stu-id="6d9f3-193">Value</span></span> |
| ----------------- | ------------ |
|     <span data-ttu-id="6d9f3-194">ServiceID</span><span class="sxs-lookup"><span data-stu-id="6d9f3-194">ServiceID</span></span>           | <span data-ttu-id="6d9f3-195">AppSetting_ServiceID von "dev"-Variablen</span><span class="sxs-lookup"><span data-stu-id="6d9f3-195">AppSetting_ServiceID from env variables</span></span>|
|    <span data-ttu-id="6d9f3-196">default</span><span class="sxs-lookup"><span data-stu-id="6d9f3-196">default</span></span>            | <span data-ttu-id="6d9f3-197">AppSetting_default Wert aus der enumerationsdatei</span><span class="sxs-lookup"><span data-stu-id="6d9f3-197">AppSetting_default value from env</span></span> |
|    <span data-ttu-id="6d9f3-198">default</span><span class="sxs-lookup"><span data-stu-id="6d9f3-198">default</span></span>         | <span data-ttu-id="6d9f3-199">ConnStr_default Val von der Gesamt Version</span><span class="sxs-lookup"><span data-stu-id="6d9f3-199">ConnStr_default val from env</span></span>|

### <a name="tokenpattern"></a><span data-ttu-id="6d9f3-200">tokenpattern</span><span class="sxs-lookup"><span data-stu-id="6d9f3-200">tokenPattern</span></span>

<span data-ttu-id="6d9f3-201">`tokenPattern`: String, standardmäßig `@"\$\{(\w+)\}"`</span><span class="sxs-lookup"><span data-stu-id="6d9f3-201">`tokenPattern`: String, defaults to `@"\$\{(\w+)\}"`</span></span>

<span data-ttu-id="6d9f3-202">Das `Expand` Verhalten der Generatoren durchsucht die unformatierten XML-Daten nach Token, die wie `${token}`aussehen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-202">The `Expand` behavior of the builders searches the raw XML for tokens that look like `${token}`.</span></span> <span data-ttu-id="6d9f3-203">Die Suche erfolgt mit dem standardmäßigen regulären Ausdruck `@"\$\{(\w+)\}"`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-203">Searching is done with the default regular expression `@"\$\{(\w+)\}"`.</span></span> <span data-ttu-id="6d9f3-204">Der Zeichensatz, der `\w` entspricht, ist strenger als XML, und viele Konfigurations Quellen erlauben.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-204">The set of characters that matches `\w` is more strict than XML and many configuration sources allow.</span></span> <span data-ttu-id="6d9f3-205">Verwenden Sie `tokenPattern`, wenn im Tokennamen mehr Zeichen als `@"\$\{(\w+)\}"` erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-205">Use `tokenPattern` when more characters than `@"\$\{(\w+)\}"` are required in the token name.</span></span>

<span data-ttu-id="6d9f3-206">`tokenPattern`: Zeichenfolge:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-206">`tokenPattern`: String:</span></span>

* <span data-ttu-id="6d9f3-207">Ermöglicht es Entwicklern, den Regex zu ändern, der für die Tokenübereinstimmung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-207">Allows developers to change the regex that is used for token matching.</span></span>
* <span data-ttu-id="6d9f3-208">Es wird keine Validierung durchgeführt, um sicherzustellen, dass es sich um einen wohlgeformten, nicht gefährlichen Regex handelt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-208">No validation is done to make sure it is a well-formed, non-dangerous regex.</span></span>
* <span data-ttu-id="6d9f3-209">Es muss eine Erfassungs Gruppe enthalten.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-209">It must contain a capture group.</span></span> <span data-ttu-id="6d9f3-210">Der gesamte regex muss mit dem gesamten Token identisch sein.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-210">The entire regex must match the entire token.</span></span> <span data-ttu-id="6d9f3-211">Die erste Erfassung muss der Tokenname sein, der in der Konfigurations Quelle gesucht werden soll.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-211">The first capture must be the token name to look up in the configuration source.</span></span>

## <a name="configuration-builders-in-microsoftconfigurationconfigurationbuilders"></a><span data-ttu-id="6d9f3-212">Configuration Builder in Microsoft. Configuration. configurationbuilder</span><span class="sxs-lookup"><span data-stu-id="6d9f3-212">Configuration builders in Microsoft.Configuration.ConfigurationBuilders</span></span>

### <a name="environmentconfigbuilder"></a><span data-ttu-id="6d9f3-213">Umgebungs-Generator</span><span class="sxs-lookup"><span data-stu-id="6d9f3-213">EnvironmentConfigBuilder</span></span>

```xml
<add name="Environment"
    [mode|prefix|stripPrefix|tokenPattern] 
    type="Microsoft.Configuration.ConfigurationBuilders.EnvironmentConfigBuilder,
    Microsoft.Configuration.ConfigurationBuilders.Environment" />
```

<span data-ttu-id="6d9f3-214">[Umgebungs](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Environment/)Konfigurations Generator:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-214">The [EnvironmentConfigBuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Environment/):</span></span>

* <span data-ttu-id="6d9f3-215">Ist die einfachste der Configuration Builder.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-215">Is the simplest of the configuration builders.</span></span>
* <span data-ttu-id="6d9f3-216">Liest Werte aus der Umgebung.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-216">Reads values from the environment.</span></span>
* <span data-ttu-id="6d9f3-217">Verfügt über keine zusätzlichen Konfigurationsoptionen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-217">Does not have any additional configuration options.</span></span>
* <span data-ttu-id="6d9f3-218">Der `name` Attribut Wert ist willkürlich.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-218">The `name` attribute value is arbitrary.</span></span>

<span data-ttu-id="6d9f3-219">**Hinweis:** In einer Windows-Container Umgebung werden Variablen, die zur Laufzeit festgelegt werden, nur in die EntryPoint-Prozessumgebung eingefügt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-219">**Note:** In a Windows container environment, variables set at run time are only injected into the EntryPoint process environment.</span></span> <span data-ttu-id="6d9f3-220">Apps, die als Dienst oder Non-EntryPoint-Prozess ausgeführt werden, nehmen diese Variablen nur dann entgegen, wenn Sie anderweitig über einen Mechanismus im Container eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-220">Apps that run as a service or a non-EntryPoint process do not pick up these variables unless they are otherwise injected through a mechanism in the container.</span></span> <span data-ttu-id="6d9f3-221">Bei [IIS](https://github.com/Microsoft/iis-docker/pull/41) -/[ASP.net](https://github.com/Microsoft/aspnet-docker)-basierten Containern behandelt die aktuelle Version von [Servicemonitor. exe](https://github.com/Microsoft/iis-docker/pull/41) dies nur im *DefaultAppPool* .</span><span class="sxs-lookup"><span data-stu-id="6d9f3-221">For [IIS](https://github.com/Microsoft/iis-docker/pull/41)/[ASP.NET](https://github.com/Microsoft/aspnet-docker)-based containers, the current version of [ServiceMonitor.exe](https://github.com/Microsoft/iis-docker/pull/41) handles this in the *DefaultAppPool* only.</span></span> <span data-ttu-id="6d9f3-222">Andere Windows-basierte containervarianten müssen möglicherweise Ihren eigenen einschleusungs Mechanismus für nicht-EntryPoint-Prozesse entwickeln.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-222">Other Windows-based container variants may need to develop their own injection mechanism for non-EntryPoint processes.</span></span>

### <a name="usersecretsconfigbuilder"></a><span data-ttu-id="6d9f3-223">UserSecretsConfigBuilder</span><span class="sxs-lookup"><span data-stu-id="6d9f3-223">UserSecretsConfigBuilder</span></span>

> [!WARNING]
> <span data-ttu-id="6d9f3-224">Speichern Sie niemals Kenn Wörter, sensible Verbindungs Zeichenfolgen oder andere sensible Daten im Quellcode.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-224">Never store passwords, sensitive connection strings, or other sensitive data in source code.</span></span> <span data-ttu-id="6d9f3-225">Produktionsgeheimnisse sollten nicht für Entwicklungs-oder Testzwecke verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-225">Production secrets should not be used for development or test.</span></span>

```xml
<add name="UserSecrets"
    [mode|prefix|stripPrefix|tokenPattern]
    (userSecretsId="{secret string, typically a GUID}" | userSecretsFile="~\secrets.file")
    [optional="true"]
    type="Microsoft.Configuration.ConfigurationBuilders.UserSecretsConfigBuilder,
    Microsoft.Configuration.ConfigurationBuilders.UserSecrets" />
```

<span data-ttu-id="6d9f3-226">Dieser Konfigurations-Generator stellt eine ähnliche Funktion wie [ASP.net Core Secret Manager](/aspnet/core/security/app-secrets)bereit.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-226">This configuration builder provides a feature similar to [ASP.NET Core Secret Manager](/aspnet/core/security/app-secrets).</span></span>

<span data-ttu-id="6d9f3-227">[Usersecretyconfigbuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.UserSecrets/) kann in .NET Framework Projekten verwendet werden, aber es muss eine geheime Datei angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-227">The [UserSecretsConfigBuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.UserSecrets/) can be used in .NET Framework projects, but a secrets file must be specified.</span></span> <span data-ttu-id="6d9f3-228">Alternativ können Sie die `UserSecretsId`-Eigenschaft in der Projektdatei definieren und die Datei mit den unformatierten Geheimnissen am richtigen Speicherort für den Lesevorgang erstellen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-228">Alternatively, you can define the `UserSecretsId` property in the project file and create the raw secrets file in the correct location for reading.</span></span> <span data-ttu-id="6d9f3-229">Um externe Abhängigkeiten aus dem Projekt herauszuhalten, ist die geheime Datei XML-formatiert.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-229">To keep external dependencies out of your project, the secret file is XML formatted.</span></span> <span data-ttu-id="6d9f3-230">Die XML-Formatierung ist ein Implementierungsdetail, und das Format sollte nicht verlassen werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-230">The XML formatting is an implementation detail, and the format should not be relied upon.</span></span> <span data-ttu-id="6d9f3-231">Wenn Sie eine Datei " *Secrets. JSON* " für .net Core-Projekte freigeben müssen, sollten Sie die Verwendung von " [simplejsonconfigbuilder](#simplejsonconfigbuilder)" in Erwägung gezogen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-231">If you need to share a *secrets.json* file with .NET Core projects, consider using the [SimpleJsonConfigBuilder](#simplejsonconfigbuilder).</span></span> <span data-ttu-id="6d9f3-232">Das `SimpleJsonConfigBuilder`-Format für .net Core sollte auch als Implementierungsdetails angesehen werden, die geändert werden können.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-232">The `SimpleJsonConfigBuilder` format for .NET Core should also be considered an implementation detail subject to change.</span></span>

<span data-ttu-id="6d9f3-233">Konfigurations Attribute für `UserSecretsConfigBuilder`:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-233">Configuration attributes for `UserSecretsConfigBuilder`:</span></span>

* <span data-ttu-id="6d9f3-234">`userSecretsId`: Dies ist die bevorzugte Methode zum Identifizieren einer XML-Geheimnis Datei.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-234">`userSecretsId` - This is the preferred method for identifying an XML secrets file.</span></span> <span data-ttu-id="6d9f3-235">Es funktioniert ähnlich wie .net Core, das eine `UserSecretsId` Project-Eigenschaft verwendet, um diesen Bezeichner zu speichern.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-235">It works similar to .NET Core, which uses a `UserSecretsId` project property to store this identifier.</span></span> <span data-ttu-id="6d9f3-236">Die Zeichenfolge muss eindeutig sein, es muss sich nicht um eine GUID handeln.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-236">The string must be unique, it doesn't need to be a GUID.</span></span> <span data-ttu-id="6d9f3-237">Mit diesem Attribut untersuchen die `UserSecretsConfigBuilder` einen bekannten lokalen Speicherort (`%APPDATA%\Microsoft\UserSecrets\<UserSecrets Id>\secrets.xml`) für eine geheime Datei, die zu diesem Bezeichner gehört.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-237">With this attribute, the `UserSecretsConfigBuilder` look in a well-known local location (`%APPDATA%\Microsoft\UserSecrets\<UserSecrets Id>\secrets.xml`) for a secrets file belonging to this identifier.</span></span>
* <span data-ttu-id="6d9f3-238">`userSecretsFile`: ein optionales Attribut, das die Datei mit den geheimen Schlüsseln angibt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-238">`userSecretsFile` - An optional attribute specifying the file containing the secrets.</span></span> <span data-ttu-id="6d9f3-239">Das `~` Zeichen kann am Anfang verwendet werden, um auf den Anwendungs Stamm zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-239">The `~` character can be used at the start to reference the application root.</span></span> <span data-ttu-id="6d9f3-240">Entweder dieses Attribut oder das `userSecretsId` Attribut ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-240">Either this attribute or the `userSecretsId` attribute is required.</span></span> <span data-ttu-id="6d9f3-241">Wenn beide angegeben sind, hat `userSecretsFile` Vorrang.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-241">If both are specified, `userSecretsFile` takes precedence.</span></span>
* <span data-ttu-id="6d9f3-242">`optional`: Boolescher Wert, der Standardwert `true`-verhindert eine Ausnahme, wenn die geheime Datei nicht gefunden werden kann.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-242">`optional`: boolean, default value `true` - Prevents an exception if the secrets file cannot be found.</span></span> 
* <span data-ttu-id="6d9f3-243">Der `name` Attribut Wert ist willkürlich.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-243">The `name` attribute value is arbitrary.</span></span>

<span data-ttu-id="6d9f3-244">Die Geheimnis Datei hat das folgende Format:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-244">The secrets file has the following format:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<root>
  <secrets ver="1.0">
    <secret name="secret key name" value="secret value" />
  </secrets>
</root>
```

### <a name="azurekeyvaultconfigbuilder"></a><span data-ttu-id="6d9f3-245">AzureKeyVaultConfigBuilder</span><span class="sxs-lookup"><span data-stu-id="6d9f3-245">AzureKeyVaultConfigBuilder</span></span>

```xml
<add name="AzureKeyVault"
    [mode|prefix|stripPrefix|tokenPattern]
    (vaultName="MyVaultName" |
     uri="https:/MyVaultName.vault.azure.net")
    [connectionString="connection string"]
    [version="secrets version"]
    [preloadSecretNames="true"]
    type="Microsoft.Configuration.ConfigurationBuilders.AzureKeyVaultConfigBuilder,
    Microsoft.Configuration.ConfigurationBuilders.Azure" />
```

<span data-ttu-id="6d9f3-246">[Azurekeyvaultconfigbuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Azure/) liest Werte, die in der [Azure Key Vault](/azure/key-vault/key-vault-whatis)gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-246">The [AzureKeyVaultConfigBuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Azure/) reads values stored in the [Azure Key Vault](/azure/key-vault/key-vault-whatis).</span></span>

<span data-ttu-id="6d9f3-247">`vaultName` ist erforderlich (entweder der Name des Tresors oder ein URI für den Tresor).</span><span class="sxs-lookup"><span data-stu-id="6d9f3-247">`vaultName` is required (either the name of the vault or a URI to the vault).</span></span> <span data-ttu-id="6d9f3-248">Mit den anderen Attributen können Sie steuern, mit welchem Tresor eine Verbindung hergestellt werden soll. Dies ist jedoch nur erforderlich, wenn die Anwendung nicht in einer Umgebung ausgeführt wird, die mit `Microsoft.Azure.Services.AppAuthentication`arbeitet.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-248">The other attributes allow control about which vault to connect to, but are only necessary if the application is not running in an environment that works with `Microsoft.Azure.Services.AppAuthentication`.</span></span> <span data-ttu-id="6d9f3-249">Die Authentifizierungs Bibliothek für Azure-Dienste wird verwendet, um nach Möglichkeit automatisch Verbindungsinformationen aus der Ausführungsumgebung auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-249">The Azure Services Authentication library is used to automatically pick up connection information from the execution environment if possible.</span></span> <span data-ttu-id="6d9f3-250">Sie können die automatische Erfassung von Verbindungsinformationen überschreiben, indem Sie eine Verbindungs Zeichenfolge angeben.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-250">You can override automatically pick up of connection information by providing a connection string.</span></span>

* <span data-ttu-id="6d9f3-251">`vaultName`: erforderlich, wenn `uri` nicht angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-251">`vaultName` - Required if `uri` in not provided.</span></span> <span data-ttu-id="6d9f3-252">Gibt den Namen des Tresors in Ihrem Azure-Abonnement an, aus dem Schlüssel-Wert-Paare gelesen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-252">Specifies the name of the vault in your Azure subscription from which to read key/value pairs.</span></span>
* <span data-ttu-id="6d9f3-253">`connectionString`-eine Verbindungs Zeichenfolge, die von [azureservicestokenprovider](https://docs.microsoft.com/azure/key-vault/service-to-service-authentication#connection-string-support) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-253">`connectionString` - A connection string usable by [AzureServiceTokenProvider](https://docs.microsoft.com/azure/key-vault/service-to-service-authentication#connection-string-support)</span></span>
* <span data-ttu-id="6d9f3-254">`uri`: stellt eine Verbindung mit anderen Key Vault Anbietern mit dem angegebenen `uri` Wert her.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-254">`uri` - Connects to other Key Vault providers with the specified `uri` value.</span></span> <span data-ttu-id="6d9f3-255">Wenn nicht angegeben, ist Azure (`vaultName`) der Tresor Anbieter.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-255">If not specified, Azure (`vaultName`) is the vault provider.</span></span>
* <span data-ttu-id="6d9f3-256">`version`-Azure Key Vault bietet eine Versions Verwaltungsfunktion für Geheimnisse.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-256">`version` - Azure Key Vault provides a versioning feature for secrets.</span></span> <span data-ttu-id="6d9f3-257">Wenn `version` angegeben wird, ruft der Generator nur die geheimen Schlüssel ab, die mit dieser Version übereinstimmen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-257">If `version` is specified, the builder only retrieves secrets matching this version.</span></span>
* <span data-ttu-id="6d9f3-258">`preloadSecretNames`: Standardmäßig fragt dieser Generator **alle** Schlüsselnamen im Schlüssel Tresor ab, wenn er initialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-258">`preloadSecretNames` - By default, this builder querys **all** key names in the key vault when it is initialized.</span></span> <span data-ttu-id="6d9f3-259">Um zu verhindern, dass alle Schlüsselwerte gelesen werden, legen Sie dieses Attribut auf `false`fest.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-259">To prevent reading all key values, set this attribute to `false`.</span></span> <span data-ttu-id="6d9f3-260">Wenn diese Einstellung auf `false` festgelegt wird, werden die geheimen Schlüssel einzeln gelesen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-260">Setting this to `false` reads secrets one at a time.</span></span> <span data-ttu-id="6d9f3-261">Das Lesen von geheimen Schlüsseln kann nützlich sein, wenn der Tresor den Zugriff auf "abrufen", aber nicht auf "auflisten" zulässt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-261">Reading secrets one at a time can useful if the vault allows "Get" access but not "List" access.</span></span> <span data-ttu-id="6d9f3-262">**Hinweis:** Wenn Sie `Greedy` Modus verwenden, müssen `preloadSecretNames` `true` (Standard) sein.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-262">**Note:** When using `Greedy` mode, `preloadSecretNames` must be `true` (the default.)</span></span>

### <a name="keyperfileconfigbuilder"></a><span data-ttu-id="6d9f3-263">Keyperfileconfigbuilder</span><span class="sxs-lookup"><span data-stu-id="6d9f3-263">KeyPerFileConfigBuilder</span></span>

```xml
<add name="KeyPerFile"
    [mode|prefix|stripPrefix|tokenPattern]
    (directoryPath="PathToSourceDirectory")
    [ignorePrefix="ignore."]
    [keyDelimiter=":"]
    [optional="false"]
    type="Microsoft.Configuration.ConfigurationBuilders.KeyPerFileConfigBuilder,
    Microsoft.Configuration.ConfigurationBuilders.KeyPerFile" />
```

<span data-ttu-id="6d9f3-264">[Keyperfileconfigbuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.KeyPerFile/) ist ein grundlegender Konfigurations-Generator, der die Dateien eines Verzeichnisses als Quelle von Werten verwendet.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-264">[KeyPerFileConfigBuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.KeyPerFile/) is a basic configuration builder that uses a directory's files as a source of values.</span></span> <span data-ttu-id="6d9f3-265">Der Name einer Datei ist der Schlüssel, und der Inhalt ist der Wert.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-265">A file's name is the key, and the contents are the value.</span></span> <span data-ttu-id="6d9f3-266">Dieser Konfigurations-Generator kann nützlich sein, wenn er in einer orchestrierten Container Umgebung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-266">This configuration builder can be useful when running in an orchestrated container environment.</span></span> <span data-ttu-id="6d9f3-267">Systeme wie docker Swarm und Kubernetes bieten `secrets` ihren orchestrierten Windows-Containern in dieser Schlüssel-pro-Datei-Weise.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-267">Systems like Docker Swarm and Kubernetes provide `secrets` to their orchestrated windows containers in this key-per-file manner.</span></span>

<span data-ttu-id="6d9f3-268">Attribut Details:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-268">Attribute details:</span></span>

* <span data-ttu-id="6d9f3-269">`directoryPath` – Erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-269">`directoryPath` - Required.</span></span> <span data-ttu-id="6d9f3-270">Gibt einen Pfad an, in dem nach Werten gesucht werden soll.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-270">Specifies a path to look in for values.</span></span> <span data-ttu-id="6d9f3-271">Docker für Windows geheimen Schlüssel werden standardmäßig im Verzeichnis " *c:\programdata\docker\secrets* " gespeichert.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-271">Docker for Windows secrets are stored in the *C:\ProgramData\Docker\secrets* directory by default.</span></span>
* <span data-ttu-id="6d9f3-272">`ignorePrefix` Dateien, die mit diesem Präfix beginnen, werden ausgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-272">`ignorePrefix` - Files that start with this prefix are excluded.</span></span> <span data-ttu-id="6d9f3-273">Der Standardwert ist „ignore“ (ignorieren).</span><span class="sxs-lookup"><span data-stu-id="6d9f3-273">Defaults to "ignore.".</span></span>
* <span data-ttu-id="6d9f3-274">`keyDelimiter`-Standardwert ist `null`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-274">`keyDelimiter` - Default value is `null`.</span></span> <span data-ttu-id="6d9f3-275">Wenn dieser Wert angegeben ist, durchläuft der Konfigurations-Generator mehrere Ebenen des Verzeichnisses und erstellt Schlüsselnamen mit diesem Trennzeichen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-275">If specified, the configuration builder traverses multiple levels of the directory, building up key names with this delimiter.</span></span> <span data-ttu-id="6d9f3-276">Wenn dieser Wert `null`ist, untersucht der Konfigurations-Generator nur die oberste Verzeichnisebene.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-276">If this value is `null`, the configuration builder only looks at the top level of the directory.</span></span>
* <span data-ttu-id="6d9f3-277">`optional`-Standardwert ist `false`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-277">`optional` -  Default value is `false`.</span></span> <span data-ttu-id="6d9f3-278">Gibt an, ob der Konfigurations-Generator Fehler verursachen soll, wenn das Quellverzeichnis nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-278">Specifies whether the configuration builder should cause errors if the source directory doesn't exist.</span></span>

### <a name="simplejsonconfigbuilder"></a><span data-ttu-id="6d9f3-279">SimpleJsonConfigBuilder</span><span class="sxs-lookup"><span data-stu-id="6d9f3-279">SimpleJsonConfigBuilder</span></span>

> [!WARNING]
> <span data-ttu-id="6d9f3-280">Speichern Sie niemals Kenn Wörter, sensible Verbindungs Zeichenfolgen oder andere sensible Daten im Quellcode.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-280">Never store passwords, sensitive connection strings, or other sensitive data in source code.</span></span> <span data-ttu-id="6d9f3-281">Produktionsgeheimnisse sollten nicht für Entwicklungs-oder Testzwecke verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-281">Production secrets should not be used for development or test.</span></span>

```xml
<add name="SimpleJson"
    [mode|prefix|stripPrefix|tokenPattern]
    jsonFile="~\config.json"
    [optional="true"]
    [jsonMode="(Flat|Sectional)"]
    type="Microsoft.Configuration.ConfigurationBuilders.SimpleJsonConfigBuilder,
    Microsoft.Configuration.ConfigurationBuilders.Json" />
```

<span data-ttu-id="6d9f3-282">.Net Core-Projekte verwenden häufig JSON-Dateien für die Konfiguration.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-282">.NET Core projects frequently use JSON files for configuration.</span></span> <span data-ttu-id="6d9f3-283">Der [simplejsonconfigbuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Json/) -Generator ermöglicht die Verwendung von .net Core-JSON-Dateien in der .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-283">The [SimpleJsonConfigBuilder](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Json/) builder allows .NET Core JSON files to be used in the .NET Framework.</span></span> <span data-ttu-id="6d9f3-284">Dieser Konfigurations-Generator stellt eine einfache Zuordnung von einer flachen Schlüssel-/Wert-Quelle zu bestimmten Schlüssel-Wert-Bereichen .NET Framework Konfiguration bereit.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-284">This configuration builder is provides a basic mapping from a flat key/value source into specific key/value areas of .NET Framework configuration.</span></span> <span data-ttu-id="6d9f3-285">Dieser Konfigurations-Generator bietet **keine** hierarchischen Konfigurationen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-285">This configuration builder does **not** provide for hierarchical configurations.</span></span> <span data-ttu-id="6d9f3-286">Die JSON-Unterstützungs Datei ähnelt einem Wörterbuch, nicht einem komplexen hierarchischen Objekt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-286">The JSON backing file is similar to a dictionary, not a complex hierarchical object.</span></span> <span data-ttu-id="6d9f3-287">Eine hierarchische Datei mit mehreren Ebenen kann verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-287">A multi-level hierarchical file can be used.</span></span> <span data-ttu-id="6d9f3-288">Dieser Anbieter `flatten`die Tiefe, indem er den Eigenschaftsnamen auf jeder Ebene anfügt, wobei `:` als Trennzeichen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-288">This provider `flatten`s the depth by appending the property name at each level using `:` as a delimiter.</span></span>

<span data-ttu-id="6d9f3-289">Attribut Details:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-289">Attribute details:</span></span>

* <span data-ttu-id="6d9f3-290">`jsonFile` – Erforderlich.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-290">`jsonFile` - Required.</span></span> <span data-ttu-id="6d9f3-291">Gibt die JSON-Datei an, aus der gelesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-291">Specifies the JSON file to read from.</span></span> <span data-ttu-id="6d9f3-292">Das `~` Zeichen kann am Anfang verwendet werden, um auf den Stamm der APP zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-292">The `~` character can be used at the start to reference the app root.</span></span>
* <span data-ttu-id="6d9f3-293">`optional` boolescher Wert, der Standardwert ist `true`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-293">`optional` - Boolean,  default value is `true`.</span></span> <span data-ttu-id="6d9f3-294">Verhindert das Auslösen von Ausnahmen, wenn die JSON-Datei nicht gefunden werden kann.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-294">Prevents throwing exceptions if the JSON file cannot be found.</span></span>
* <span data-ttu-id="6d9f3-295">`jsonMode` - `[Flat|Sectional]`.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-295">`jsonMode` - `[Flat|Sectional]`.</span></span> <span data-ttu-id="6d9f3-296">`Flat` ist die Standardeinstellung.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-296">`Flat` is the default.</span></span> <span data-ttu-id="6d9f3-297">Wenn `jsonMode` `Flat`ist, ist die JSON-Datei eine einzelne flatkey/Wert-Quelle.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-297">When `jsonMode` is `Flat`, the JSON file is a single flat key/value source.</span></span> <span data-ttu-id="6d9f3-298">Die `EnvironmentConfigBuilder` und `AzureKeyVaultConfigBuilder` sind auch einzelne flatkey-/Wert-Quellen.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-298">The `EnvironmentConfigBuilder` and `AzureKeyVaultConfigBuilder` are also single flat key/value sources.</span></span> <span data-ttu-id="6d9f3-299">Wenn die `SimpleJsonConfigBuilder` im `Sectional` Modus konfiguriert ist:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-299">When the `SimpleJsonConfigBuilder` is configured in `Sectional` mode:</span></span>

  * <span data-ttu-id="6d9f3-300">Die JSON-Datei wird konzeptionell direkt auf der obersten Ebene in mehrere Wörterbücher aufgeteilt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-300">The JSON file is conceptually divided just at the top level into multiple dictionaries.</span></span>
  * <span data-ttu-id="6d9f3-301">Jedes der Wörterbücher wird nur auf den Konfigurations Abschnitt angewendet, der mit dem an Sie angefügten Eigenschaftsnamen der obersten Ebene übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-301">Each of the dictionaries is only applied to the configuration section that matches the top-level property name attached to them.</span></span> <span data-ttu-id="6d9f3-302">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-302">For example:</span></span>

```json
    {
        "appSettings" : {
            "setting1" : "value1",
            "setting2" : "value2",
            "complex" : {
                "setting1" : "complex:value1",
                "setting2" : "complex:value2",
            }
        }
    }
```

## <a name="implementing-a-custom-keyvalue-configuration-builder"></a><span data-ttu-id="6d9f3-303">Implementieren eines benutzerdefinierten Schlüssel-Wert-Konfigurations-Generators</span><span class="sxs-lookup"><span data-stu-id="6d9f3-303">Implementing a custom key/value configuration builder</span></span>

<span data-ttu-id="6d9f3-304">Wenn die Konfigurations-Generatoren Ihren Anforderungen nicht entsprechen, können Sie ein benutzerdefiniertes schreiben.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-304">If the configuration builders don't meet your needs, you can write a custom one.</span></span> <span data-ttu-id="6d9f3-305">Die `KeyValueConfigBuilder` Basisklasse behandelt Ersetzungs Modi und die meisten Präfix Probleme.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-305">The `KeyValueConfigBuilder` base class handles substitution modes and most prefix concerns.</span></span> <span data-ttu-id="6d9f3-306">Ein Implementierungsprojekt benötigt nur:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-306">An implementing project need only:</span></span>

* <span data-ttu-id="6d9f3-307">Erben Sie von der Basisklasse, und implementieren Sie mithilfe der `GetValue` und `GetAllValues`eine grundlegende Quelle von Schlüssel-Wert-Paaren:</span><span class="sxs-lookup"><span data-stu-id="6d9f3-307">Inherit from the base class and implement a basic source of key/value pairs through the `GetValue` and `GetAllValues`:</span></span>
* <span data-ttu-id="6d9f3-308">Fügen Sie [Microsoft. Configuration. configurationbuilder. Base](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Base/) dem Projekt hinzu.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-308">Add the [Microsoft.Configuration.ConfigurationBuilders.Base](https://www.nuget.org/packages/Microsoft.Configuration.ConfigurationBuilders.Base/) to the project.</span></span>

[!code-csharp[Main](config-builder/MyConfigBuilders/MyCustomConfigBuilder.cs)]

<span data-ttu-id="6d9f3-309">Die `KeyValueConfigBuilder`-Basisklasse stellt einen Großteil der Arbeit und das konsistente Verhalten für Schlüssel-Wert-Konfigurations-Generatoren bereit.</span><span class="sxs-lookup"><span data-stu-id="6d9f3-309">The `KeyValueConfigBuilder` base class provides much of the work and consistent behavior across key/value configuration builders.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="6d9f3-310">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="6d9f3-310">Additional resources</span></span>

* [<span data-ttu-id="6d9f3-311">GitHub-Repository für Konfigurations-Generatoren</span><span class="sxs-lookup"><span data-stu-id="6d9f3-311">Configuration Builders GitHub repository</span></span>](https://github.com/aspnet/MicrosoftConfigurationBuilders)
* [<span data-ttu-id="6d9f3-312">Dienst-zu-Dienst-Authentifizierung für Azure Key Vault mithilfe von .net</span><span class="sxs-lookup"><span data-stu-id="6d9f3-312">Service-to-service authentication to Azure Key Vault using .NET</span></span>](/azure/key-vault/service-to-service-authentication#connection-string-support)
