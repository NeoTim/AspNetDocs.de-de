---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Iteration #6 – Verwenden der testgesteuerten Entwicklung (c#) | Microsoft-Dokumentation'
author: microsoft
description: In dieser Iteration sechsten fügen wir neue Funktionen zu unserer Anwendung zuerst Schreiben von Komponententests und Code für die Komponententests schreiben hinzu. In dieser Iteration...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: d456952bea9a1933247382f4786809b0b2f32034
ms.sourcegitcommit: 62db31596a7da029263cf06335aff12236fb3186
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/26/2019
ms.locfileid: "58440325"
---
<a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="11e83-104">Iteration #6 – Verwenden der testgesteuerten Entwicklung (c#)</span><span class="sxs-lookup"><span data-stu-id="11e83-104">Iteration #6 – Use test-driven development (C#)</span></span>
====================
<span data-ttu-id="11e83-105">by [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="11e83-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="11e83-106">Code herunterladen</span><span class="sxs-lookup"><span data-stu-id="11e83-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="11e83-107">In dieser Iteration sechsten fügen wir neue Funktionen zu unserer Anwendung zuerst Schreiben von Komponententests und Code für die Komponententests schreiben hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="11e83-108">In dieser Iteration fügen wir wenden Sie sich an Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="11e83-109">Erstellen einer Kontaktverwaltung ASP.NET MVC-Anwendung (c#)</span><span class="sxs-lookup"><span data-stu-id="11e83-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="11e83-110">In dieser Reihe von Tutorials erstellen wir eine gesamte Anwendung Kontaktverwaltung ab Beginn um den Vorgang abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="11e83-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="11e83-111">Die Contact Manager-Anwendung können Sie zum Speichern von Kontaktinformationen - Namen, Telefonnummern und e-Mail-Adressen – eine Liste der Personen an.</span><span class="sxs-lookup"><span data-stu-id="11e83-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="11e83-112">Wir erstellen die Anwendung über mehrere Iterationen.</span><span class="sxs-lookup"><span data-stu-id="11e83-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="11e83-113">Bei jeder Iteration verbessern wir nach und nach der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="11e83-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="11e83-114">Das Ziel dieses mehrere Iteration-Ansatzes ist, um den Grund für jede Änderung verstehen können.</span><span class="sxs-lookup"><span data-stu-id="11e83-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="11e83-115">Iteration #1 – Erstellen der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="11e83-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="11e83-116">In der ersten Iteration wir der Contact Manager in der einfachsten maximal möglicher Größe erstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="11e83-117">Wir haben Unterstützung für grundlegender Datenbankvorgänge hinzugefügt: Erstellen Sie, lesen Sie, aktualisieren Sie und löschen Sie (CRUD).</span><span class="sxs-lookup"><span data-stu-id="11e83-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="11e83-118">Iteration #2 – Optimieren der Anwendung gut.</span><span class="sxs-lookup"><span data-stu-id="11e83-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="11e83-119">In dieser Iteration verbessern wir die Darstellung der Anwendung durch Ändern der Standard-Masterseite für ASP.NET MVC-Ansicht und cascading Stylesheet.</span><span class="sxs-lookup"><span data-stu-id="11e83-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="11e83-120">Iteration #3 – Hinzufügen der formularüberprüfung.</span><span class="sxs-lookup"><span data-stu-id="11e83-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="11e83-121">In der dritten Iteration fügen wir grundlegende formularvalidierung hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="11e83-122">Es wird verhindert, dass Personen senden eines Formulars ohne erforderlichen Felder des Formulars abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="11e83-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="11e83-123">Wir überprüfen auch die e-Mail-Adressen und Telefonnummern.</span><span class="sxs-lookup"><span data-stu-id="11e83-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="11e83-124">Stellen Sie Iteration #4 – lose koppeln der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="11e83-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="11e83-125">In dieser vierten Iteration nutzen wir einige Entwurfsmuster für Software zu verwalten und ändern Sie die Kontakt-Manager-Anwendung zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="11e83-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="11e83-126">Z. B. gestalten wir unsere Anwendung, die dem Repositorymuster und dem Dependency Injection-Muster verwenden.</span><span class="sxs-lookup"><span data-stu-id="11e83-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="11e83-127">Iteration #5 – Erstellen von Komponententests.</span><span class="sxs-lookup"><span data-stu-id="11e83-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="11e83-128">In der fünften Iteration stellen wir unsere Anwendung einfacher zu verwalten und zu ändern, indem Sie die Komponententests hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="11e83-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="11e83-129">Wir unsere Data Model-Klassen modellieren und erstellen Sie Komponententests für unseren Controller und die Validierungslogik.</span><span class="sxs-lookup"><span data-stu-id="11e83-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="11e83-130">Iteration #6 – Verwenden der testgesteuerten Entwicklung.</span><span class="sxs-lookup"><span data-stu-id="11e83-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="11e83-131">In dieser Iteration sechsten fügen wir neue Funktionen zu unserer Anwendung zuerst Schreiben von Komponententests und Code für die Komponententests schreiben hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="11e83-132">In dieser Iteration fügen wir wenden Sie sich an Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="11e83-133">Iteration #7 - Ajax-Funktionen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="11e83-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="11e83-134">In der siebten Iteration verbessern wir die Reaktionsfähigkeit und Leistung der Anwendung durch Hinzufügen von Unterstützung für Ajax.</span><span class="sxs-lookup"><span data-stu-id="11e83-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="11e83-135">Diese Iteration</span><span class="sxs-lookup"><span data-stu-id="11e83-135">This Iteration</span></span>

<span data-ttu-id="11e83-136">In vorherigen Iterationen der Contact Manager-Anwendung haben wir die Komponententests um ein Sicherheitsnetz für unser Code bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="11e83-137">Die Motivation für die Erstellung eines Komponententests war unser Code ändern zu gewährleisten.</span><span class="sxs-lookup"><span data-stu-id="11e83-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="11e83-138">Bei Komponententests vorhanden können wir Glücklicherweise keine Änderungen an unseren Code und wissen sofort, ob wir die vorhandene Funktionalität unterbrochen wurde.</span><span class="sxs-lookup"><span data-stu-id="11e83-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="11e83-139">In dieser Iteration verwenden wir die Komponententests für einen ganz anderen Zweck.</span><span class="sxs-lookup"><span data-stu-id="11e83-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="11e83-140">In dieser Iteration, verwenden wir Komponententests als Teil des Namens Entwurfsphilosophie von einer Anwendung *testgesteuerte Entwicklung*.</span><span class="sxs-lookup"><span data-stu-id="11e83-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="11e83-141">Wenn Sie Test-driven Development, üben Sie zuerst Tests schreiben, und klicken Sie dann Code für die Tests zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="11e83-142">Genauer gesagt, bei der testgesteuerten Entwicklung eignen, sind drei Schritte, die Sie abschließen, wenn Sie Code erstellen (Rot / Grün/refaktorieren):</span><span class="sxs-lookup"><span data-stu-id="11e83-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="11e83-143">Schreiben Sie einen Komponententest, der nicht (Rot)</span><span class="sxs-lookup"><span data-stu-id="11e83-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="11e83-144">Schreiben von Code, übergeben den Komponententest (Grün)</span><span class="sxs-lookup"><span data-stu-id="11e83-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="11e83-145">Gestalten Sie Ihren Code (Refactoring)</span><span class="sxs-lookup"><span data-stu-id="11e83-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="11e83-146">Zunächst schreiben Sie den Komponententest.</span><span class="sxs-lookup"><span data-stu-id="11e83-146">First, you write the unit test.</span></span> <span data-ttu-id="11e83-147">Der Komponententest sollten Ihre möchte, wie Sie Ihren Code erwarten Verhalten express.</span><span class="sxs-lookup"><span data-stu-id="11e83-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="11e83-148">Wenn Sie zuerst den Komponententest erstellen, sollte der Komponententest fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="11e83-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="11e83-149">Der Test sollte fehlschlagen, da Sie noch nicht Anwendungscode geschrieben haben, der den Test erfüllt.</span><span class="sxs-lookup"><span data-stu-id="11e83-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="11e83-150">Als Nächstes schreiben Sie die gerade genug Code in der Reihenfolge für den Komponententest übergeben.</span><span class="sxs-lookup"><span data-stu-id="11e83-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="11e83-151">Das Ziel ist, auf die Weise laziest, sloppiest und schnellste Möglichkeit den Code zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="11e83-152">Sie sollten nicht nachgedacht über die Architektur Ihrer Anwendung verschwendet.</span><span class="sxs-lookup"><span data-stu-id="11e83-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="11e83-153">Stattdessen konzentrieren sollten, Sie schreiben die minimale Menge Code erforderlich, um die Absicht, die vom Komponententest ausgedrückt zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="11e83-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="11e83-154">Nach dem Sie viel Code geschrieben haben, können Sie schließlich Schritt zurück und betrachten Sie die allgemeine Architektur Ihrer Anwendung.</span><span class="sxs-lookup"><span data-stu-id="11e83-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="11e83-155">In diesem Schritt haben Sie (Refactoring) schreiben Sie Ihren Code durch die Nutzung des Softwareentwurfs Muster – z. B. das Repository-Muster, damit Ihr Code besser verwaltbar ist.</span><span class="sxs-lookup"><span data-stu-id="11e83-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="11e83-156">Sie können den Code in diesem Schritt spielerverwaltung umschreiben, da der Code von Komponententests abgedeckt ist.</span><span class="sxs-lookup"><span data-stu-id="11e83-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="11e83-157">Es gibt viele Vorteile, die aus eignen, die testgesteuerte Entwicklung entstehen.</span><span class="sxs-lookup"><span data-stu-id="11e83-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="11e83-158">Erste, testgesteuerte Entwicklung erzwingt, dass Sie sich auf Code zu konzentrieren, die tatsächlich geschrieben werden muss.</span><span class="sxs-lookup"><span data-stu-id="11e83-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="11e83-159">Da Sie ständig auf das Schreiben von Code übergeben Sie einen bestimmten Test konzentrieren möchten, können Sie nicht mehr Firma noch wandering in die schädlicher Pflanzen und Schreiben große Mengen von Code, die Sie niemals verwenden.</span><span class="sxs-lookup"><span data-stu-id="11e83-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="11e83-160">Andererseits eine designmethodik "zuerst testen" sind Sie gezwungen, Schreiben Sie Code aus der Perspektive des wie Ihr Code verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="11e83-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="11e83-161">Das heißt, sind bei der testgesteuerten Entwicklung eignen, Sie ständig Ihre Tests aus der Benutzerperspektive schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="11e83-162">Aus diesem Grund kann die testgesteuerte Entwicklung zu klarer und verständlicher-APIs führen.</span><span class="sxs-lookup"><span data-stu-id="11e83-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="11e83-163">Schließlich erzwingt testgesteuerte Entwicklung Sie Komponententests im Rahmen des normalen Prozesses des Schreibens von einer Anwendung zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="11e83-164">Wenn ein Projektstichtag nähert, ist das Testen in der Regel als erstes, die aus dem Fenster gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="11e83-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="11e83-165">Wenn eignen, die testgesteuerte Entwicklung, können Sie auf der anderen Seite eher virtuous zum Schreiben von Komponententests, da testgesteuerte Entwicklung Komponententests an den Prozess der Erstellung einer Anwendung zentrale wird.</span><span class="sxs-lookup"><span data-stu-id="11e83-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="11e83-166">Weitere Informationen zu Test-driven Development, ich empfehle die Lektüre von Michael Feathers Buch **Working Effectively with Legacy Code**.</span><span class="sxs-lookup"><span data-stu-id="11e83-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="11e83-167">In dieser Iteration hinzugefügt unsere Contact Manager-Anwendung ein neues Feature.</span><span class="sxs-lookup"><span data-stu-id="11e83-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="11e83-168">Wir fügen Unterstützung für wenden Sie sich an Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-168">We add support for Contact Groups.</span></span> <span data-ttu-id="11e83-169">Sie können Gruppen von wenden Sie sich an Ihre Kontakte in Kategorien wie Business zu organisieren und Friend verwenden.</span><span class="sxs-lookup"><span data-stu-id="11e83-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="11e83-170">Wir werden unsere Anwendung folgt ein Vorgang der testgesteuerten Entwicklung dieser neuen Funktionalität hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="11e83-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="11e83-171">Wir zuerst unsere Komponententests schreiben, und wir alle unsere Code für diese Tests schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="11e83-172">Ruft ab, was getestet</span><span class="sxs-lookup"><span data-stu-id="11e83-172">What Gets Tested</span></span>

<span data-ttu-id="11e83-173">Wie in vorherigen Iterationen erläutert, in der Regel nicht Schreiben von Komponententests für die Logik für den Datenzugriff oder Logik anzeigen.</span><span class="sxs-lookup"><span data-stu-id="11e83-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="11e83-174">Da beim Zugriff auf eine Datenbank als relativ langsamer Vorgang ist Einbau t Schreiben von Komponententests für Datenzugriffslogik zusätzlichen.</span><span class="sxs-lookup"><span data-stu-id="11e83-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="11e83-175">Da der Zugriff auf eine Ansicht bedeutet das Einrichten eines Webservers erforderlich ist, die als relativ langsamer Vorgang ist Einbau t Schreiben von Komponententests für ansichtslogik zusätzlichen.</span><span class="sxs-lookup"><span data-stu-id="11e83-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="11e83-176">Sie sollten keinen Komponententest schreiben, es sei denn, der Test immer wieder sehr schnell ausgeführt werden kann</span><span class="sxs-lookup"><span data-stu-id="11e83-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="11e83-177">Da die testgesteuerte Entwicklung von Komponententests gesteuert wird, konzentrieren wir uns zunächst auf Controller und Geschäftslogik zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="11e83-178">Wir vermeiden, verändern die Datenbank oder Sichten.</span><span class="sxs-lookup"><span data-stu-id="11e83-178">We avoid touching the database or views.</span></span> <span data-ttu-id="11e83-179">Wir nicht die Datenbank ändern oder die Ansichten zu erstellen, bis das Ende des in diesem Tutorial.</span><span class="sxs-lookup"><span data-stu-id="11e83-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="11e83-180">Wir beginnen mit, was getestet werden kann.</span><span class="sxs-lookup"><span data-stu-id="11e83-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="11e83-181">Erstellung von User Storys</span><span class="sxs-lookup"><span data-stu-id="11e83-181">Creating User Stories</span></span>

<span data-ttu-id="11e83-182">Bei der testgesteuerten Entwicklung eignen, zunächst Sie immer einen Test zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="11e83-183">Dies führt sofort die Frage: Wie entscheiden Sie, welcher Test zuerst schreiben?</span><span class="sxs-lookup"><span data-stu-id="11e83-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="11e83-184">Um diese Frage zu beantworten, sollten Sie einen Satz von schreiben [ **User Storys**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="11e83-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="11e83-185">Eine User Story ist eine sehr kurze (in der Regel einen Satz) Beschreibung der Software erforderlich.</span><span class="sxs-lookup"><span data-stu-id="11e83-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="11e83-186">Es sollte eine technische Beschreibung einer Anforderung aus der Perspektive des Benutzers geschrieben sein.</span><span class="sxs-lookup"><span data-stu-id="11e83-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="11e83-187">Hier ist s den Satz von User Storys, die die durch die neue Gruppe Kontakt-Funktion erforderlichen Funktionen zu beschreiben:</span><span class="sxs-lookup"><span data-stu-id="11e83-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="11e83-188">Benutzer kann eine Liste der Kontakt Gruppen anzeigen.</span><span class="sxs-lookup"><span data-stu-id="11e83-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="11e83-189">Benutzer kann eine neue Gruppe von Kontakte erstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="11e83-190">Der Benutzer kann es sich um eine vorhandene Gruppe von Kontakten löschen.</span><span class="sxs-lookup"><span data-stu-id="11e83-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="11e83-191">Benutzer kann eine Gruppe von Kontakte auswählen, wenn Sie einen neuen Kontakt erstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="11e83-192">Benutzer kann eine Gruppe von Kontakte wählen Sie beim Bearbeiten eines vorhandenen Kontakts.</span><span class="sxs-lookup"><span data-stu-id="11e83-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="11e83-193">Eine Liste der Kontakt Gruppen wird in der Ansicht "Index" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="11e83-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="11e83-194">Klickt ein Benutzer eine Gruppe von Kontakte, wird eine Liste der übereinstimmenden Kontakte angezeigt.</span><span class="sxs-lookup"><span data-stu-id="11e83-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="11e83-195">Beachten Sie, dass diese Liste von User Stories von einem Kunden vollkommen verständlich ist.</span><span class="sxs-lookup"><span data-stu-id="11e83-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="11e83-196">Es gibt keine Erwähnung von Details zur technischen Implementierung.</span><span class="sxs-lookup"><span data-stu-id="11e83-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="11e83-197">Während im Prozess der Erstellung Ihrer Anwendung, kann die Zusammenstellung von User Stories besser optimiert werden.</span><span class="sxs-lookup"><span data-stu-id="11e83-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="11e83-198">Sie können zur funktionsunfähigkeit einer User Story in mehrere Storys (Anforderungen).</span><span class="sxs-lookup"><span data-stu-id="11e83-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="11e83-199">Sie könnten z. B., dass das Erstellen einer neuen Kontakten Gruppenstatus Validierung beinhalten soll.</span><span class="sxs-lookup"><span data-stu-id="11e83-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="11e83-200">Senden eine Gruppe von Kontakte ohne Name sollte ein Überprüfungsfehler zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="11e83-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="11e83-201">Nachdem Sie eine Liste von User Storys erstellt haben, können Sie Ihre erste Komponententest schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="11e83-202">Wir beginnen, erstellen Sie einen Komponententest für die Anzeige der Liste der Kontakt-Gruppen.</span><span class="sxs-lookup"><span data-stu-id="11e83-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="11e83-203">Wenden Sie sich an Gruppen auflisten</span><span class="sxs-lookup"><span data-stu-id="11e83-203">Listing Contact Groups</span></span>

<span data-ttu-id="11e83-204">Unsere erste Benutzertextabschnitt ist, dass ein Benutzer eine Liste der Kontakt Gruppen anzeigen kann sollen.</span><span class="sxs-lookup"><span data-stu-id="11e83-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="11e83-205">Sie müssen diese Story mit einem Test express.</span><span class="sxs-lookup"><span data-stu-id="11e83-205">We need to express this story with a test.</span></span>

<span data-ttu-id="11e83-206">Erstellen ein neuen Komponententests durch Rechtsklick auf den Ordner "Controllers" im Projekt ContactManager.Tests auswählen **hinzufügen "," Neuer Test**, und wählen die **Komponententest** Vorlage (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="11e83-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="11e83-207">Name die neue Einheit GroupControllerTest.cs zu testen, und klicken Sie auf die **OK** Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="11e83-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="11e83-208">[![Hinzufügen der GroupControllerTest-Komponententests](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="11e83-209">**Abbildung 01**: Hinzufügen des Komponententests GroupControllerTest ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="11e83-210">Der erste Komponententest ist in Codebeispiel 1 enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="11e83-211">Dieser Test überprüft, ob die Index()-Methode des Controllers Gruppe einen Satz von Gruppen zurück.</span><span class="sxs-lookup"><span data-stu-id="11e83-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="11e83-212">Der Test überprüft, dass die Daten in der Ansicht in eine Auflistung der Gruppen zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="11e83-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="11e83-213">**1 – Controllers\GroupControllerTest.cs auflisten**</span><span class="sxs-lookup"><span data-stu-id="11e83-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="11e83-214">Wenn Sie zuerst den Code in Codebeispiel 1 in Visual Studio eingeben, erhalten Sie einen Großteil der roten Wellenlinien.</span><span class="sxs-lookup"><span data-stu-id="11e83-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="11e83-215">Wir haben nicht die Klassen GroupController oder eine Gruppe erstellt.</span><span class="sxs-lookup"><span data-stu-id="11e83-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="11e83-216">An diesem Punkt können wir sogar t-Build die Anwendung dazu t ausführen, der erste Komponententest.</span><span class="sxs-lookup"><span data-stu-id="11e83-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="11e83-217">Gute s.</span><span class="sxs-lookup"><span data-stu-id="11e83-217">That s good.</span></span> <span data-ttu-id="11e83-218">Die zählt als einen fehlgeschlagenen Test.</span><span class="sxs-lookup"><span data-stu-id="11e83-218">That counts as a failing test.</span></span> <span data-ttu-id="11e83-219">Aus diesem Grund haben wir jetzt über die Berechtigung zum Starten der Anwendungscode schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="11e83-220">Wir müssen genug Code zum Ausführen von unserem Test schreiben.</span><span class="sxs-lookup"><span data-stu-id="11e83-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="11e83-221">Die Gruppe Controllerklasse in Liste 2 enthält das absolute Minimum von Code erforderlich, um den Komponententest zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="11e83-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="11e83-222">Die Index()-Aktion gibt eine statisch codierte Liste der Gruppen, die (in Programmausdruck 3 ist die Gruppe-Klasse definiert) zurück.</span><span class="sxs-lookup"><span data-stu-id="11e83-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="11e83-223">**Codebeispiel 2 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="11e83-224">**Codebeispiel 3 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="11e83-225">Nachdem wir unser Projekt Klassen GroupController und -Gruppe hinzugefügt haben, wird der erste Komponententest erfolgreich abgeschlossen (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="11e83-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="11e83-226">Wir haben die Arbeitsschritte, die mindestens erforderlich, um der Test erfolgreich durchgeführt.</span><span class="sxs-lookup"><span data-stu-id="11e83-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="11e83-227">Es ist Zeit zu feiern.</span><span class="sxs-lookup"><span data-stu-id="11e83-227">It is time to celebrate.</span></span>


<span data-ttu-id="11e83-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="11e83-229">**Abbildung 02**: Success! ([Klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="11e83-230">Wenden Sie sich an Gruppen erstellen</span><span class="sxs-lookup"><span data-stu-id="11e83-230">Creating Contact Groups</span></span>

<span data-ttu-id="11e83-231">Jetzt können wir mit dem zweiten Benutzertextabschnitt fortfahren.</span><span class="sxs-lookup"><span data-stu-id="11e83-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="11e83-232">Wir müssen neue wenden Sie sich an Gruppen erstellen können.</span><span class="sxs-lookup"><span data-stu-id="11e83-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="11e83-233">Wir müssen dies in einem Test express.</span><span class="sxs-lookup"><span data-stu-id="11e83-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="11e83-234">Der Test in Listing 4 überprüft, die die Methode mit einer neuen Gruppe die Gruppe zur Liste der Gruppen, die von der Index()-Methode zurückgegebene fügt Create() aufruft.</span><span class="sxs-lookup"><span data-stu-id="11e83-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="11e83-235">Das heißt, wenn ich eine neue Gruppe erstellen sollte dann ich die neue Gruppe aus der Liste der Gruppen, die von der Index()-Methode zurückgegebene zurückkehren.</span><span class="sxs-lookup"><span data-stu-id="11e83-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="11e83-236">**Programmausdruck 4 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="11e83-237">Der Test in Listing 4 wird den Controller Gruppe Create()-Methode mit einer neuen Kontakt Gruppe aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="11e83-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="11e83-238">Als Nächstes überprüft der Test an, dass die neue Gruppe den Gruppe Controller Index()-Methode aufrufen in Ansichtsdaten zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="11e83-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="11e83-239">Der geänderte Gruppe Controller in Listing 5 enthält das absolute Minimum erforderlichen Änderungen an der neuen Test erfolgreich abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="11e83-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="11e83-240">**Programmausdruck 5 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="11e83-241">Die Gruppe Controller in Listing 5 hat es sich um eine neue Create()-Aktion.</span><span class="sxs-lookup"><span data-stu-id="11e83-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="11e83-242">Diese Aktion wird eine Auflistung von Gruppen eine Gruppe hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="11e83-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="11e83-243">Beachten Sie, dass die Aktion Index() geändert wurde, um den Inhalt der Auflistung der Gruppen zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="11e83-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="11e83-244">Auch hier haben wir das absolute Minimum der erforderlich ist, übergeben den Komponententest ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="11e83-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="11e83-245">Nachdem wir diese Änderungen an dem Controller für die Gruppe vornehmen, alle unsere Komponententests wurden bestanden.</span><span class="sxs-lookup"><span data-stu-id="11e83-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="11e83-246">Hinzufügen der Validierung</span><span class="sxs-lookup"><span data-stu-id="11e83-246">Adding Validation</span></span>

<span data-ttu-id="11e83-247">Diese Anforderung wurde in der User Story nicht explizit angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="11e83-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="11e83-248">Allerdings ist es sinnvoll, die erfordern, dass eine Gruppe einen Namen haben.</span><span class="sxs-lookup"><span data-stu-id="11e83-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="11e83-249">Andernfalls würde Kontakte in Gruppen organisieren nicht sehr nützlich sein.</span><span class="sxs-lookup"><span data-stu-id="11e83-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="11e83-250">Codebeispiel 6 enthält einen neuen Test, der die Absicht ausdrückt.</span><span class="sxs-lookup"><span data-stu-id="11e83-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="11e83-251">Dieser Test überprüft, die versuchen, eine Gruppe zu erstellen, ohne Angabe von einem Namen führt eine Überprüfungsfehlermeldung in Modellstatus.</span><span class="sxs-lookup"><span data-stu-id="11e83-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="11e83-252">**Codebeispiel 6: Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="11e83-253">Um diesen Test erfüllen zu können, müssen wir eine Name-Eigenschaft unserer Gruppe-Klasse (siehe Codebeispiel 7) hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="11e83-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="11e83-254">Darüber hinaus müssen wir unsere Gruppe Controller s Create() Aktion (siehe Codebeispiel 8) einen kleinen Teil der Validierungslogik hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="11e83-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="11e83-255">**Auflisten von 7 – Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="11e83-256">**Auflisten von 8 – Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="11e83-257">Beachten Sie, dass der Controller Gruppe Create() Aktion jetzt die Validierung und die Datenbank Logik enthält.</span><span class="sxs-lookup"><span data-stu-id="11e83-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="11e83-258">Derzeit besteht aus die Datenbank, die vom Controller Gruppe nicht mehr als eine in-Memory-Auflistung.</span><span class="sxs-lookup"><span data-stu-id="11e83-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="11e83-259">Zeit für das Umgestalten</span><span class="sxs-lookup"><span data-stu-id="11e83-259">Time to Refactor</span></span>

<span data-ttu-id="11e83-260">Der dritte Schritt im Rot/Grün/refaktorieren ist der Teil der Umgestaltung.</span><span class="sxs-lookup"><span data-stu-id="11e83-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="11e83-261">An diesem Punkt müssen wir einen Schritt zurück in unserem Code, und erwägen, wie wir unsere Anwendung zur Verbesserung der entsprechenden Entwurfs Umgestalten können.</span><span class="sxs-lookup"><span data-stu-id="11e83-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="11e83-262">Die Refactor-Phase ist die Phase, an der wir über die beste Möglichkeit der Implementierung von Prinzipien der Softwareentwicklung und Muster vorstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="11e83-263">Wir können unseren Code in irgendeiner Weise zu ändern, die wir wählen, um den Entwurf des Codes zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="11e83-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="11e83-264">Wir haben ein Sicherheitsnetz bereitstellen, der Komponententests, die verhindert, vorhandene Funktionalität zu beschädigen.</span><span class="sxs-lookup"><span data-stu-id="11e83-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="11e83-265">Moment, der Controller für die Gruppe ist ein Chaos aus der Perspektive des guten Software-Entwurf.</span><span class="sxs-lookup"><span data-stu-id="11e83-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="11e83-266">Der Controller für die Gruppe enthält ein verworrenes Chaos überprüfungs-und Datenzugriffscode.</span><span class="sxs-lookup"><span data-stu-id="11e83-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="11e83-267">Um zu vermeiden, gegen das Prinzip der einzigen Verantwortung, müssen wir diese Probleme in verschiedene Klassen trennen.</span><span class="sxs-lookup"><span data-stu-id="11e83-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="11e83-268">Unsere umgestaltete Gruppe Controllerklasse ist im Codebeispiel 9 enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="11e83-269">Der Controller wurde geändert, um die ContactManager-Dienstebene verwenden.</span><span class="sxs-lookup"><span data-stu-id="11e83-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="11e83-270">Dies ist die gleiche Dienstebene, die wir mit der Contact-Controller verwenden.</span><span class="sxs-lookup"><span data-stu-id="11e83-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="11e83-271">Codebeispiel 10 enthält die neuen Methoden hinzugefügt, um die Dienstebene "ContactManager" zu überprüfen, auflisten und Erstellen von Gruppen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="11e83-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="11e83-272">Die IContactManagerService-Schnittstelle wurde aktualisiert, um die neuen Methoden enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="11e83-273">Codebeispiel 11 enthält eine neue FakeContactManagerRepository-Klasse, die die IContactManagerRepository-Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="11e83-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="11e83-274">Im Gegensatz zu den EntityContactManagerRepository-Klasse, die auch die IContactManagerRepository-Schnittstelle implementiert, wird unsere neue FakeContactManagerRepository-Klasse nicht mit der Datenbank kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="11e83-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="11e83-275">Die FakeContactManagerRepository-Klasse verwendet eine speicherinterne Auflistung als Proxy für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="11e83-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="11e83-276">Wir verwenden diese Klasse in unserer Komponententests als eine gefälschte Repository-Ebene.</span><span class="sxs-lookup"><span data-stu-id="11e83-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="11e83-277">**Codebeispiel 9 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="11e83-278">**Auflisten von 10 – Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="11e83-279">**Codebeispiel 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="11e83-280">Ändern die Schnittstelle erfordert IContactManagerRepository verwenden, um die CreateGroup() und ListGroups()-Methode in der EntityContactManagerRepository-Klasse zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="11e83-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="11e83-281">Die laziest und schnellste Möglichkeit hierzu besteht darin die Stubmethoden hinzufügen, die wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="11e83-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="11e83-282">Zum Schluss uns dazu auffordern, diese Änderungen am Entwurf der Anwendung einige Änderungen an unseren Komponententests vornehmen.</span><span class="sxs-lookup"><span data-stu-id="11e83-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="11e83-283">Nun müssen wir die FakeContactManagerRepository zu verwenden, wenn die Komponententests ausführen.</span><span class="sxs-lookup"><span data-stu-id="11e83-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="11e83-284">Die aktualisierte GroupControllerTest-Klasse ist im Codebeispiel 12 enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="11e83-285">**Codebeispiel 12 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="11e83-286">Nachdem wir immer ändert sich, auch hier alle unsere Komponententests bestanden.</span><span class="sxs-lookup"><span data-stu-id="11e83-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="11e83-287">Wir haben den gesamten Rot/Grün/refaktorieren-Zyklus abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="11e83-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="11e83-288">Wir haben die ersten beiden User Stories implementiert.</span><span class="sxs-lookup"><span data-stu-id="11e83-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="11e83-289">Wir haben jetzt die Unterstützung von Komponententests für die Anforderungen, die in die User Stories ausgedrückt.</span><span class="sxs-lookup"><span data-stu-id="11e83-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="11e83-290">Zur Implementierung des Rest der User Storys müssen die wiederholen denselben Zyklus der Rot/Grün/refaktorieren.</span><span class="sxs-lookup"><span data-stu-id="11e83-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="11e83-291">Ändern der Datenbank</span><span class="sxs-lookup"><span data-stu-id="11e83-291">Modifying our Database</span></span>

<span data-ttu-id="11e83-292">Leider, obwohl wir alle unsere Komponententests ausgedrückt Anforderungen erfüllt haben, unsere Arbeit erfolgt nicht.</span><span class="sxs-lookup"><span data-stu-id="11e83-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="11e83-293">Wir müssen noch unsere Datenbank ändern.</span><span class="sxs-lookup"><span data-stu-id="11e83-293">We still need to modify our database.</span></span>

<span data-ttu-id="11e83-294">Wir müssen eine neue Datenbanktabelle für die Gruppe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-294">We need to create a new Group database table.</span></span> <span data-ttu-id="11e83-295">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="11e83-295">Follow these steps:</span></span>

1. <span data-ttu-id="11e83-296">Klicken Sie im Server-Explorer-Fenster, mit der rechten Maustaste in den Ordner "Tabellen", und wählen Sie die Menüoption **neue Tabelle hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="11e83-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="11e83-297">Geben Sie unten im Tabellen-Designer zwei Spalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="11e83-298">Markieren Sie die Id-Spalte als Primärschlüssel und Identity-Spalte.</span><span class="sxs-lookup"><span data-stu-id="11e83-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="11e83-299">Speichern Sie die neue Tabelle mit den Namen Gruppen durch Klicken auf das Symbol für die Diskette an.</span><span class="sxs-lookup"><span data-stu-id="11e83-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="11e83-300">**Name der Spalte**</span><span class="sxs-lookup"><span data-stu-id="11e83-300">**Column Name**</span></span> | <span data-ttu-id="11e83-301">**Datentyp**</span><span class="sxs-lookup"><span data-stu-id="11e83-301">**Data Type**</span></span> | <span data-ttu-id="11e83-302">**NULL-Werte zulassen**</span><span class="sxs-lookup"><span data-stu-id="11e83-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="11e83-303">Id</span><span class="sxs-lookup"><span data-stu-id="11e83-303">Id</span></span> | <span data-ttu-id="11e83-304">int</span><span class="sxs-lookup"><span data-stu-id="11e83-304">int</span></span> | <span data-ttu-id="11e83-305">False</span><span class="sxs-lookup"><span data-stu-id="11e83-305">False</span></span> |
| <span data-ttu-id="11e83-306">Name</span><span class="sxs-lookup"><span data-stu-id="11e83-306">Name</span></span> | <span data-ttu-id="11e83-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="11e83-307">nvarchar(50)</span></span> | <span data-ttu-id="11e83-308">False</span><span class="sxs-lookup"><span data-stu-id="11e83-308">False</span></span> |


<span data-ttu-id="11e83-309">Als Nächstes müssen wir alle Daten aus der Contacts-Tabelle löschen (andernfalls wir nicht möglich, eine Beziehung zwischen den Tabellen Kontakte und Gruppen zu erstellen).</span><span class="sxs-lookup"><span data-stu-id="11e83-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="11e83-310">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="11e83-310">Follow these steps:</span></span>

1. <span data-ttu-id="11e83-311">Mit der rechten Maustaste der Contacts-Tabelle, und wählen Sie die Menüoption **Tabellendaten anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="11e83-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="11e83-312">Löschen Sie alle Zeilen aus.</span><span class="sxs-lookup"><span data-stu-id="11e83-312">Delete all of the rows.</span></span>

<span data-ttu-id="11e83-313">Als Nächstes müssen wir eine Beziehung zwischen der Tabelle der Datenbank Gruppen und die vorhandene Datenbanktabelle für die Kontakte zu definieren.</span><span class="sxs-lookup"><span data-stu-id="11e83-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="11e83-314">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="11e83-314">Follow these steps:</span></span>

1. <span data-ttu-id="11e83-315">Doppelklicken Sie auf die Tabelle "Contacts" im Server-Explorer-Fenster zu den Tabellen-Designer zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="11e83-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="11e83-316">Fügen Sie eine neue Spalte mit ganzen Zahlen, die Contacts-Tabelle, die mit dem Namen GroupId hinzu.</span><span class="sxs-lookup"><span data-stu-id="11e83-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="11e83-317">Klicken Sie auf die Schaltfläche "Beziehung", um das Dialogfeld "Fremdschlüsselbeziehungen" zu öffnen (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="11e83-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="11e83-318">Klicken Sie auf die Schaltfläche "hinzufügen".</span><span class="sxs-lookup"><span data-stu-id="11e83-318">Click the Add button.</span></span>
5. <span data-ttu-id="11e83-319">Klicken Sie auf die Schaltfläche mit den Auslassungszeichen neben der Schaltfläche, Tabellen- und Spaltenspezifikation.</span><span class="sxs-lookup"><span data-stu-id="11e83-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="11e83-320">Wählen Sie Tabellen und Spalten im Dialogfeld Gruppen als die Primärschlüsseltabelle und die Id als primäre Schlüsselspalte.</span><span class="sxs-lookup"><span data-stu-id="11e83-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="11e83-321">Kontakte als Fremdschlüsseltabelle und Gruppen-ID der foreign Key-Spalte auswählen (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="11e83-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="11e83-322">Klicken Sie auf die Schaltfläche "OK".</span><span class="sxs-lookup"><span data-stu-id="11e83-322">Click the OK button.</span></span>
7. <span data-ttu-id="11e83-323">Klicken Sie unter **INSERT- und UPDATE-Spezifikation**, wählen Sie den Wert **Cascade** für **Regel löschen**.</span><span class="sxs-lookup"><span data-stu-id="11e83-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="11e83-324">Klicken Sie auf die Schaltfläche "Schließen", um das Dialogfeld "Fremdschlüsselbeziehungen" zu schließen.</span><span class="sxs-lookup"><span data-stu-id="11e83-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="11e83-325">Klicken Sie auf die Schaltfläche "Speichern", um die Änderungen an der Contacts-Tabelle speichern.</span><span class="sxs-lookup"><span data-stu-id="11e83-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="11e83-326">[![Erstellen einer Beziehung der Datenbank-Tabelle](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="11e83-327">**Abbildung 03**: Erstellen einer Datenbank-Tabelle-Beziehung ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="11e83-328">[![Angeben von tabellenbeziehungen](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="11e83-329">**Abbildung 04**: Angeben von tabellenbeziehungen ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="11e83-330">Unser Datenmodell aktualisieren</span><span class="sxs-lookup"><span data-stu-id="11e83-330">Updating our Data Model</span></span>

<span data-ttu-id="11e83-331">Als Nächstes müssen wir aktualisieren unsere Datenmodell, um die neue Datenbanktabelle darstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="11e83-332">Führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="11e83-332">Follow these steps:</span></span>

1. <span data-ttu-id="11e83-333">Doppelklicken Sie auf die ContactManagerModel.edmx-Datei im Ordner "Models", die Entity-Designer zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="11e83-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="11e83-334">Mit der rechten Maustaste in die Oberfläche des Designers, und wählen Sie die Menüoption **Modell aus der Datenbank aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="11e83-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="11e83-335">Im Update-Assistenten auf die Schaltfläche auswählen, die Gruppen, Tabelle, und klicken Sie auf das Beenden (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="11e83-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="11e83-336">Mit der rechten Maustaste in der Gruppen-Entität, und wählen Sie die Menüoption **umbenennen**.</span><span class="sxs-lookup"><span data-stu-id="11e83-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="11e83-337">Ändern des Namens der *Gruppen* Entität *Gruppe* (im singular).</span><span class="sxs-lookup"><span data-stu-id="11e83-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="11e83-338">Mit der rechten Maustaste in der Gruppen-Navigationseigenschaft, die am unteren Rand der Entität "Contact" angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="11e83-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="11e83-339">Ändern des Namens der *Gruppen* Navigationseigenschaft *Gruppe* (im singular).</span><span class="sxs-lookup"><span data-stu-id="11e83-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="11e83-340">[![Aktualisieren eines Entity Framework-Modells aus der Datenbank](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="11e83-341">**Abbildung 05**: Aktualisieren eines Entity Framework-Modells aus der Datenbank ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="11e83-342">Nachdem Sie diese Schritte abgeschlossen haben, wird Ihr Datenmodell der Kontakte und Gruppen darstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="11e83-343">Der Entity Designer sollten beide Entitäten angezeigt (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="11e83-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="11e83-344">[![Entity-Designer zum Anzeigen von Gruppe, und wenden Sie sich an](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="11e83-345">**Abbildung 06**: Anzeigen von Gruppen- und wenden Sie sich an Entity-Designer ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="11e83-346">Erstellen die Repositoryklassen</span><span class="sxs-lookup"><span data-stu-id="11e83-346">Creating our Repository Classes</span></span>

<span data-ttu-id="11e83-347">Als Nächstes müssen wir unsere "Repository"-Klasse zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="11e83-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="11e83-348">Im Verlauf dieser Iteration haben wir mehrere neue Methoden der Schnittstelle IContactManagerRepository beim Schreiben von Code zum erfüllen unserer Komponententests hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="11e83-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="11e83-349">Die endgültige Version der IContactManagerRepository-Schnittstelle ist im Codebeispiel 14 enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="11e83-350">**Codebeispiel 14 - Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="11e83-351">Einer der Methoden für die Arbeit mit wenden Sie sich an Gruppen nicht getan haben wir tatsächlich implementiert.</span><span class="sxs-lookup"><span data-stu-id="11e83-351">We haven't actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="11e83-352">Derzeit enthält die EntityContactManagerRepository-Klasse Stubmethoden für jede Gruppe von Kontakten Methoden aufgeführt, die in der IContactManagerRepository-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="11e83-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="11e83-353">Beispielsweise sieht die Methode ListGroups() derzeit folgendermaßen aus:</span><span class="sxs-lookup"><span data-stu-id="11e83-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="11e83-354">Die Stubmethoden ermöglicht, uns auf unserer Anwendung zu kompilieren, und übergeben die Komponententests.</span><span class="sxs-lookup"><span data-stu-id="11e83-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="11e83-355">Jetzt ist es jedoch Zeit, diese Methoden implementieren.</span><span class="sxs-lookup"><span data-stu-id="11e83-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="11e83-356">Die endgültige Version der EntityContactManagerRepository-Klasse ist im Codebeispiel 13 enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="11e83-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="11e83-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="11e83-358">Erstellen von Ansichten</span><span class="sxs-lookup"><span data-stu-id="11e83-358">Creating the Views</span></span>

<span data-ttu-id="11e83-359">ASP.NET MVC-Anwendung, wenn Sie die ASP.NET standardansichts-Engine verwenden.</span><span class="sxs-lookup"><span data-stu-id="11e83-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="11e83-360">Also, Sie Ich möchte Ansichten als Reaktion auf einen bestimmten Komponententest erstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="11e83-361">Da eine Anwendung ohne Ansichten unbrauchbar wäre, wir können jedoch t dieser Iteration abschließen, ohne erstellen und ändern die Ansichten, die in der Contact Manager-Anwendung enthalten.</span><span class="sxs-lookup"><span data-stu-id="11e83-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="11e83-362">Wir müssen die folgenden neuen Ansichten zum Verwalten von Gruppen von wenden Sie sich an, der (siehe Abbildung 7) zu erstellen:</span><span class="sxs-lookup"><span data-stu-id="11e83-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="11e83-363">Views\Group\Index.aspx - zeigt eine Liste der Kontakt-Gruppen</span><span class="sxs-lookup"><span data-stu-id="11e83-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="11e83-364">Views\Group\Delete.aspx - zeigt Bestätigungsformular für das Löschen einer Gruppenstatus von Kontakten</span><span class="sxs-lookup"><span data-stu-id="11e83-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="11e83-365">[![Die Gruppe Indexansicht](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="11e83-366">**Abbildung 07**: Die Gruppe Indexansicht ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="11e83-367">Wir müssen die folgenden vorhandenen Ansichten zu ändern, sodass sie wenden Sie sich an Gruppen enthalten:</span><span class="sxs-lookup"><span data-stu-id="11e83-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="11e83-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="11e83-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="11e83-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="11e83-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="11e83-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="11e83-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="11e83-371">Sie sehen die geänderten Ansichten anhand der Visual Studio-Anwendung, die in diesem Lernprogramm begleitet.</span><span class="sxs-lookup"><span data-stu-id="11e83-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="11e83-372">Abbildung 8 veranschaulicht beispielsweise die Ansicht "Wenden Sie sich an Index".</span><span class="sxs-lookup"><span data-stu-id="11e83-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="11e83-373">[![Ansicht "Wenden Sie sich an Index"](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="11e83-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="11e83-374">**Abbildung 08**: Ansicht "Wenden Sie sich an Index" ([klicken Sie, um das Bild in voller Größe anzeigen](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="11e83-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="11e83-375">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="11e83-375">Summary</span></span>

<span data-ttu-id="11e83-376">In dieser Iteration haben wir neue Funktionen zu unserer Contact Manager-Anwendung anhand von designmethodik eine testgesteuerte Entwicklung-Anwendung hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="11e83-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="11e83-377">Da fingen wir durch eine Reihe von User Stories zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="11e83-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="11e83-378">Es erstellt einen Satz von Komponententests, der die die Anforderungen, die durch die User Stories ausgedrückt entspricht.</span><span class="sxs-lookup"><span data-stu-id="11e83-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="11e83-379">Schließlich haben wir gerade genug Code zum Erfüllen der Anforderungen von den Komponententests ausgedrückt geschrieben.</span><span class="sxs-lookup"><span data-stu-id="11e83-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="11e83-380">Nachdem wir das Schreiben von Code erfüllen die Anforderungen von den Komponententests ausgedrückt haben, aktualisiert es Ihre Datenbank und die Ansichten.</span><span class="sxs-lookup"><span data-stu-id="11e83-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="11e83-381">Wir unsere Datenbank eine neue Gruppentabelle hinzugefügt und aktualisiert das Entity Framework Data Model.</span><span class="sxs-lookup"><span data-stu-id="11e83-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="11e83-382">Wir können auch erstellt und einen Satz von Ansichten geändert.</span><span class="sxs-lookup"><span data-stu-id="11e83-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="11e83-383">In der nächsten Iteration: die letzte Iteration – schreiben wir unsere Anwendung Ajax nutzen.</span><span class="sxs-lookup"><span data-stu-id="11e83-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="11e83-384">Durch die Nutzung von Ajax, werden wir die Reaktionsfähigkeit und Leistung der Contact Manager-Anwendung verbessern.</span><span class="sxs-lookup"><span data-stu-id="11e83-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="11e83-385">[Zurück](iteration-5-create-unit-tests-cs.md)
> [Weiter](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="11e83-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
