---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: 'Iteration #6 – Testgesteuerte Entwicklung (VB) verwenden | Microsoft Docs'
author: rick-anderson
description: In dieser sechsten Iteration fügen wir unserer Anwendung neue Funktionen hinzu, indem wir zuerst Komponententests schreiben und Code für die Komponententests schreiben. In dieser Iteration,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: 8464f4cdee673ef75d561e4cf89613fdca2c16af
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/17/2020
ms.locfileid: "81542806"
---
# <a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="ef781-104">Iteration 6 – Verwenden der testgesteuerten Entwicklung (VB)</span><span class="sxs-lookup"><span data-stu-id="ef781-104">Iteration #6 – Use test-driven development (VB)</span></span>

<span data-ttu-id="ef781-105">von [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="ef781-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="ef781-106">Code herunterladen</span><span class="sxs-lookup"><span data-stu-id="ef781-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="ef781-107">In dieser sechsten Iteration fügen wir unserer Anwendung neue Funktionen hinzu, indem wir zuerst Komponententests schreiben und Code für die Komponententests schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="ef781-108">In dieser Iteration fügen wir Kontaktgruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="ef781-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="ef781-109">Erstellen einer Kontaktverwaltungs- ASP.NET MVC-Anwendung (VB)</span><span class="sxs-lookup"><span data-stu-id="ef781-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="ef781-110">In dieser Reihe von Tutorials erstellen wir eine gesamte Contact Management-Anwendung von Anfang bis Ende.</span><span class="sxs-lookup"><span data-stu-id="ef781-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="ef781-111">Mit der Kontakt-Manager-Anwendung können Sie Kontaktinformationen - Namen, Telefonnummern und E-Mail-Adressen - für eine Personenliste speichern.</span><span class="sxs-lookup"><span data-stu-id="ef781-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="ef781-112">Wir erstellen die Anwendung über mehrere Iterationen.</span><span class="sxs-lookup"><span data-stu-id="ef781-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="ef781-113">Mit jeder Iteration verbessern wir die Anwendung schrittweise.</span><span class="sxs-lookup"><span data-stu-id="ef781-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="ef781-114">Das Ziel dieses Ansatzes mit mehreren Iterationen besteht darin, den Grund für jede Änderung zu verstehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="ef781-115">Iteration #1 - Erstellen Sie die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ef781-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="ef781-116">In der ersten Iteration erstellen wir den Contact Manager auf einfachste Weise.</span><span class="sxs-lookup"><span data-stu-id="ef781-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="ef781-117">Wir fügen Unterstützung für grundlegende Datenbankvorgänge hinzu: Erstellen, Lesen, Aktualisieren und Löschen (CRUD).</span><span class="sxs-lookup"><span data-stu-id="ef781-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="ef781-118">Iteration #2 - Machen Sie die Anwendung schön aussehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="ef781-119">In dieser Iteration verbessern wir das Erscheinungsbild der Anwendung, indem wir die Standard-ASP.NET MVC-Ansichtsmasterseite und des kaskadierenden Stylesheets ändern.</span><span class="sxs-lookup"><span data-stu-id="ef781-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="ef781-120">Iteration #3 - Formularüberprüfung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ef781-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="ef781-121">In der dritten Iteration fügen wir eine grundlegende Formularvalidierung hinzu.</span><span class="sxs-lookup"><span data-stu-id="ef781-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="ef781-122">Wir verhindern, dass Personen ein Formular einreichen, ohne die erforderlichen Formularfelder ausfüllen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="ef781-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="ef781-123">Wir validieren auch E-Mail-Adressen und Telefonnummern.</span><span class="sxs-lookup"><span data-stu-id="ef781-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="ef781-124">Iteration #4 - Machen Sie die Anwendung lose gekoppelt.</span><span class="sxs-lookup"><span data-stu-id="ef781-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="ef781-125">In dieser vierten Iteration nutzen wir mehrere Softwareentwurfsmuster, um die Wartung und Änderung der Contact Manager-Anwendung zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="ef781-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="ef781-126">Beispielsweise gestalten wir unsere Anwendung so um, dass sie das Repository-Muster und das Abhängigkeitsinjektionsmuster verwendet.</span><span class="sxs-lookup"><span data-stu-id="ef781-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="ef781-127">Iteration #5 - Erstellen von Komponententests.</span><span class="sxs-lookup"><span data-stu-id="ef781-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="ef781-128">In der fünften Iteration erleichtern wir die Wartung und Änderung unserer Anwendung durch Hinzufügen von Komponententests.</span><span class="sxs-lookup"><span data-stu-id="ef781-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="ef781-129">Wir verspotten unsere Datenmodellklassen und erstellen Komponententests für unsere Controller und Validierungslogik.</span><span class="sxs-lookup"><span data-stu-id="ef781-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="ef781-130">Iteration #6 - Verwenden Sie die testgesteuerte Entwicklung.</span><span class="sxs-lookup"><span data-stu-id="ef781-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="ef781-131">In dieser sechsten Iteration fügen wir unserer Anwendung neue Funktionen hinzu, indem wir zuerst Komponententests schreiben und Code für die Komponententests schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="ef781-132">In dieser Iteration fügen wir Kontaktgruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="ef781-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="ef781-133">Iteration #7 - Ajax-Funktionalität hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ef781-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="ef781-134">In der siebten Iteration verbessern wir die Reaktionsfähigkeit und Leistung unserer Anwendung, indem wir Unterstützung für Ajax hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ef781-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="ef781-135">Diese Iteration</span><span class="sxs-lookup"><span data-stu-id="ef781-135">This Iteration</span></span>

<span data-ttu-id="ef781-136">In der vorherigen Iteration der Contact Manager-Anwendung haben wir Komponententests erstellt, um ein Sicherheitsnetz für unseren Code bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ef781-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="ef781-137">Die Motivation für die Erstellung der Komponententests war, unseren Code widerstandsfähiger gegen Veränderungen zu machen.</span><span class="sxs-lookup"><span data-stu-id="ef781-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="ef781-138">Mit den Komponententests können wir gerne Änderungen an unserem Code vornehmen und sofort wissen, ob wir bestehende Funktionen gebrochen haben.</span><span class="sxs-lookup"><span data-stu-id="ef781-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="ef781-139">In dieser Iteration verwenden wir Komponententests für einen ganz anderen Zweck.</span><span class="sxs-lookup"><span data-stu-id="ef781-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="ef781-140">In dieser Iteration verwenden wir Komponententests als Teil einer Anwendungsdesign-Philosophie namens *testgesteuerte Entwicklung*.</span><span class="sxs-lookup"><span data-stu-id="ef781-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="ef781-141">Wenn Sie die testgesteuerte Entwicklung üben, schreiben Sie zuerst Tests und dann Code für die Tests.</span><span class="sxs-lookup"><span data-stu-id="ef781-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="ef781-142">Genauer gesagt, wenn Sie testgesteuerte Entwicklung üben, gibt es drei Schritte, die Sie beim Erstellen von Code ausführen (Rot/ Grün/Refaktor):</span><span class="sxs-lookup"><span data-stu-id="ef781-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="ef781-143">Schreiben eines Komponententests, der fehlschlägt (Rot)</span><span class="sxs-lookup"><span data-stu-id="ef781-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="ef781-144">Schreibcode, der den Komponententest besteht (Grün)</span><span class="sxs-lookup"><span data-stu-id="ef781-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="ef781-145">Refaktorieren Sie Ihren Code (Refactor)</span><span class="sxs-lookup"><span data-stu-id="ef781-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="ef781-146">Zuerst schreiben Sie den Komponententest.</span><span class="sxs-lookup"><span data-stu-id="ef781-146">First, you write the unit test.</span></span> <span data-ttu-id="ef781-147">Der Komponententest sollte Ihre Absicht zum Ausdruck bringen, wie Sie sich von Ihrem Code verhalten.</span><span class="sxs-lookup"><span data-stu-id="ef781-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="ef781-148">Wenn Sie den Komponententest zum ersten Mal erstellen, sollte der Komponententest fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="ef781-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="ef781-149">Der Test sollte fehlschlagen, da Sie noch keinen Anwendungscode geschrieben haben, der den Test erfüllt.</span><span class="sxs-lookup"><span data-stu-id="ef781-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="ef781-150">Als Nächstes schreiben Sie gerade genug Code, damit der Komponententest bestanden werden kann.</span><span class="sxs-lookup"><span data-stu-id="ef781-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="ef781-151">Das Ziel ist es, den Code auf die faulste, schlampigste und schnellstmögliche Weise zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="ef781-152">Sie sollten keine Zeit damit verschwenden, über die Architektur Ihrer Anwendung nachzudenken.</span><span class="sxs-lookup"><span data-stu-id="ef781-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="ef781-153">Stattdessen sollten Sie sich darauf konzentrieren, die minimale Menge an Code zu schreiben, die erforderlich ist, um die durch den Komponententest ausgedrückte Absicht zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="ef781-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="ef781-154">Nachdem Sie genügend Code geschrieben haben, können Sie zurücktreten und die Gesamtarchitektur Ihrer Anwendung berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="ef781-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="ef781-155">In diesem Schritt schreiben Sie Ihren Code um (umgestalten), indem Sie Softwareentwurfsmuster -- wie das Repository-Muster -- nutzen, damit Ihr Code sicherer ist.</span><span class="sxs-lookup"><span data-stu-id="ef781-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="ef781-156">Sie können Ihren Code in diesem Schritt furchtlos umschreiben, da Ihr Code von Komponententests abgedeckt wird.</span><span class="sxs-lookup"><span data-stu-id="ef781-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="ef781-157">Es gibt viele Vorteile, die sich aus der Praxis der testgesteuerten Entwicklung ergeben.</span><span class="sxs-lookup"><span data-stu-id="ef781-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="ef781-158">Erstens zwingt Sie die testgesteuerte Entwicklung dazu, sich auf Code zu konzentrieren, der eigentlich geschrieben werden muss.</span><span class="sxs-lookup"><span data-stu-id="ef781-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="ef781-159">Da Sie sich ständig darauf konzentrieren, nur genug Code zu schreiben, um einen bestimmten Test zu bestehen, werden Sie daran gehindert, in das Unkraut zu wandern und riesige Mengen an Code zu schreiben, den Sie nie verwenden werden.</span><span class="sxs-lookup"><span data-stu-id="ef781-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="ef781-160">Zweitens zwingt Sie eine "Test First"-Entwurfsmethodik dazu, Code aus der Perspektive der Verwendung des Codes zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="ef781-161">Mit anderen Worten, wenn Sie testgesteuerte Entwicklung praktizieren, schreiben Sie Ihre Tests ständig aus Benutzersicht.</span><span class="sxs-lookup"><span data-stu-id="ef781-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="ef781-162">Daher kann eine testgesteuerte Entwicklung zu saubereren und verständlicheren APIs führen.</span><span class="sxs-lookup"><span data-stu-id="ef781-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="ef781-163">Schließlich zwingt Sie die testgesteuerte Entwicklung dazu, Komponententests als Teil des normalen Prozesses des Schreibens einer Anwendung zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="ef781-164">Wenn ein Projekttermin näher rückt, ist das Testen in der Regel das erste, was aus dem Fenster geht.</span><span class="sxs-lookup"><span data-stu-id="ef781-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="ef781-165">Wenn Sie testgesteuerte Entwicklung praktizieren, sind Sie dagegen eher tugendhaft beim Schreiben von Komponententests, da die testgesteuerte Entwicklung Komponententests für den Prozess des Erstellens einer Anwendung von zentraler Bedeutung macht.</span><span class="sxs-lookup"><span data-stu-id="ef781-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="ef781-166">Um mehr über die testgesteuerte Entwicklung zu erfahren, empfehle ich Ihnen, Michael Feathers Buch **Working Effectively with Legacy Code**zu lesen.</span><span class="sxs-lookup"><span data-stu-id="ef781-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="ef781-167">In dieser Iteration fügen wir unserer Contact Manager-Anwendung eine neue Funktion hinzu.</span><span class="sxs-lookup"><span data-stu-id="ef781-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="ef781-168">Wir unterstützen Kontaktgruppen.</span><span class="sxs-lookup"><span data-stu-id="ef781-168">We add support for Contact Groups.</span></span> <span data-ttu-id="ef781-169">Sie können Kontaktgruppen verwenden, um Ihre Kontakte in Kategorien wie Geschäfts- und Freundesgruppen zu organisieren.</span><span class="sxs-lookup"><span data-stu-id="ef781-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="ef781-170">Wir fügen diese neue Funktionalität zu unserer Anwendung hinzu, indem wir einen Prozess der testgesteuerten Entwicklung verfolgen.</span><span class="sxs-lookup"><span data-stu-id="ef781-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="ef781-171">Wir schreiben zuerst unsere Komponententests und wir schreiben unseren gesamten Code für diese Tests.</span><span class="sxs-lookup"><span data-stu-id="ef781-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="ef781-172">Was getestet wird</span><span class="sxs-lookup"><span data-stu-id="ef781-172">What Gets Tested</span></span>

<span data-ttu-id="ef781-173">Wie wir in der vorherigen Iteration erläutert haben, schreiben Sie in der Regel keine Komponententests für Datenzugriffslogik oder Ansichtslogik.</span><span class="sxs-lookup"><span data-stu-id="ef781-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="ef781-174">Sie schreiben keine Komponententests für die Datenzugriffslogik, da der Zugriff auf eine Datenbank ein relativ langsamer Vorgang ist.</span><span class="sxs-lookup"><span data-stu-id="ef781-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="ef781-175">Sie schreiben keine Komponententests für die Ansichtslogik, da für den Zugriff auf eine Ansicht ein Relativ langsamer Vorgang erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="ef781-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="ef781-176">Sie sollten keinen Komponententest schreiben, es sei denn, der Test kann immer wieder sehr schnell ausgeführt werden</span><span class="sxs-lookup"><span data-stu-id="ef781-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="ef781-177">Da die testgesteuerte Entwicklung von Komponententests angetrieben wird, konzentrieren wir uns zunächst auf das Schreiben von Controllern und Geschäftslogik.</span><span class="sxs-lookup"><span data-stu-id="ef781-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="ef781-178">Wir vermeiden es, die Datenbank oder Ansichten zu berühren.</span><span class="sxs-lookup"><span data-stu-id="ef781-178">We avoid touching the database or views.</span></span> <span data-ttu-id="ef781-179">Wir werden die Datenbank nicht bis zum Ende dieses Tutorials ändern oder unsere Ansichten erstellen.</span><span class="sxs-lookup"><span data-stu-id="ef781-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="ef781-180">Wir beginnen mit dem, was getestet werden kann.</span><span class="sxs-lookup"><span data-stu-id="ef781-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="ef781-181">Erstellen von User Stories</span><span class="sxs-lookup"><span data-stu-id="ef781-181">Creating User Stories</span></span>

<span data-ttu-id="ef781-182">Wenn Sie eine testgesteuerte Entwicklung praktizieren, beginnen Sie immer mit dem Schreiben eines Tests.</span><span class="sxs-lookup"><span data-stu-id="ef781-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="ef781-183">Das wirft sofort die Frage auf: Wie entscheidet man, welchen Test zuerst geschrieben werden soll?</span><span class="sxs-lookup"><span data-stu-id="ef781-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="ef781-184">Um diese Frage zu beantworten, sollten Sie eine Reihe von [*User Storys*](http://en.wikipedia.org/wiki/User_stories)schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="ef781-185">Eine User Story ist eine sehr kurze (in der Regel ein Satz) Beschreibung einer Softwareanforderung.</span><span class="sxs-lookup"><span data-stu-id="ef781-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="ef781-186">Es sollte sich um eine nicht technische Beschreibung einer Anforderung handelt, die aus DerErspektiersicht geschrieben wurde.</span><span class="sxs-lookup"><span data-stu-id="ef781-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="ef781-187">Hier ist der Satz von User Storys, die die Funktionen beschreiben, die für die neue Kontaktgruppenfunktionalität erforderlich sind:</span><span class="sxs-lookup"><span data-stu-id="ef781-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="ef781-188">Der Benutzer kann eine Liste der Kontaktgruppen anzeigen.</span><span class="sxs-lookup"><span data-stu-id="ef781-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="ef781-189">Der Benutzer kann eine neue Kontaktgruppe erstellen.</span><span class="sxs-lookup"><span data-stu-id="ef781-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="ef781-190">Der Benutzer kann eine vorhandene Kontaktgruppe löschen.</span><span class="sxs-lookup"><span data-stu-id="ef781-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="ef781-191">Der Benutzer kann beim Erstellen eines neuen Kontakts eine Kontaktgruppe auswählen.</span><span class="sxs-lookup"><span data-stu-id="ef781-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="ef781-192">Der Benutzer kann beim Bearbeiten eines vorhandenen Kontakts eine Kontaktgruppe auswählen.</span><span class="sxs-lookup"><span data-stu-id="ef781-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="ef781-193">Eine Liste der Kontaktgruppen wird in der Indexansicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ef781-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="ef781-194">Wenn ein Benutzer auf eine Kontaktgruppe klickt, wird eine Liste mit übereinstimmenden Kontakten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ef781-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="ef781-195">Beachten Sie, dass diese Liste von User Storys für einen Kunden vollständig verständlich ist.</span><span class="sxs-lookup"><span data-stu-id="ef781-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="ef781-196">Von technischen Umsetzungsdetails ist nicht die Rede.</span><span class="sxs-lookup"><span data-stu-id="ef781-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="ef781-197">Während Sie Ihre Anwendung erstellen, können die Benutzerstorys verfeinert werden.</span><span class="sxs-lookup"><span data-stu-id="ef781-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="ef781-198">Sie können eine User Story in mehrere Storys (Anforderungen) aufteilen.</span><span class="sxs-lookup"><span data-stu-id="ef781-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="ef781-199">Sie können z. B. entscheiden, dass das Erstellen einer neuen Kontaktgruppe eine Validierung umfassen sollte.</span><span class="sxs-lookup"><span data-stu-id="ef781-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="ef781-200">Das Senden einer Kontaktgruppe ohne Namen sollte einen Validierungsfehler zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="ef781-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="ef781-201">Nachdem Sie eine Liste von User Storys erstellt haben, können Sie den ersten Komponententest schreiben.</span><span class="sxs-lookup"><span data-stu-id="ef781-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="ef781-202">Zunächst erstellen wir einen Komponententest zum Anzeigen der Liste der Kontaktgruppen.</span><span class="sxs-lookup"><span data-stu-id="ef781-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="ef781-203">Auflisten von Kontaktgruppen</span><span class="sxs-lookup"><span data-stu-id="ef781-203">Listing Contact Groups</span></span>

<span data-ttu-id="ef781-204">Unsere erste User Story ist, dass ein Benutzer in der Lage sein sollte, eine Liste von Kontaktgruppen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ef781-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="ef781-205">Wir müssen diese Geschichte mit einem Test ausdrücken.</span><span class="sxs-lookup"><span data-stu-id="ef781-205">We need to express this story with a test.</span></span>

<span data-ttu-id="ef781-206">Erstellen Sie einen neuen Komponententest, indem Sie im ContactManager.Tests-Projekt mit der rechten Maustaste auf den Ordner Controller klicken, **Hinzufügen, Neuer Test**auswählen und die **Komponententestvorlage** auswählen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="ef781-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="ef781-207">Benennen Sie den neuen Komponententest GroupControllerTest.vb, und klicken Sie auf die Schaltfläche **OK.**</span><span class="sxs-lookup"><span data-stu-id="ef781-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>

<span data-ttu-id="ef781-208">[![Hinzufügen des GroupControllerTest-Komponententests](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="ef781-209">**Abbildung 01**: Hinzufügen des GroupControllerTest-Komponententests ([Klicken Sie hier, um das Bild in voller Größe anzuzeigen](iteration-6-use-test-driven-development-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="ef781-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>

<span data-ttu-id="ef781-210">Unser erster Komponententest ist in Listing 1 enthalten.</span><span class="sxs-lookup"><span data-stu-id="ef781-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="ef781-211">Dieser Test überprüft, ob die Index()-Methode des Gruppencontrollers eine Gruppe von Gruppen zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="ef781-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="ef781-212">Der Test überprüft, ob eine Auflistung von Gruppen in Ansichtsdaten zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="ef781-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="ef781-213">**Auflisten 1 - Controller-GruppeControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="ef781-214">Wenn Sie den Code zum ersten Mal in Liste 1 in Visual Studio eingeben, erhalten Sie viele rote Squiggly-Linien.</span><span class="sxs-lookup"><span data-stu-id="ef781-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="ef781-215">Wir haben die GroupController- oder Group-Klassen nicht erstellt.</span><span class="sxs-lookup"><span data-stu-id="ef781-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="ef781-216">An diesem Punkt können wir nicht einmal unsere Anwendung erstellen, so dass wir nicht unseren ersten Komponententest ausführen können.</span><span class="sxs-lookup"><span data-stu-id="ef781-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="ef781-217">Das ist gut.</span><span class="sxs-lookup"><span data-stu-id="ef781-217">That s good.</span></span> <span data-ttu-id="ef781-218">Das gilt als Fehltest.</span><span class="sxs-lookup"><span data-stu-id="ef781-218">That counts as a failing test.</span></span> <span data-ttu-id="ef781-219">Daher haben wir jetzt die Berechtigung, mit dem Schreiben von Anwendungscode zu beginnen.</span><span class="sxs-lookup"><span data-stu-id="ef781-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="ef781-220">Wir müssen genügend Code schreiben, um unseren Test auszuführen.</span><span class="sxs-lookup"><span data-stu-id="ef781-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="ef781-221">Die Gruppencontrollerklasse in Liste 2 enthält das absolute Minimum an Code, das erforderlich ist, um den Komponententest zu bestehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="ef781-222">Die Index()-Aktion gibt eine statisch codierte Liste von Gruppen zurück (die Gruppenklasse ist in Liste 3 definiert).</span><span class="sxs-lookup"><span data-stu-id="ef781-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="ef781-223">**Auflisten 2 - Controller-GruppeController.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="ef781-224">**Auflisten 3 - Models-Gruppe.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="ef781-225">Nachdem wir die Klassen GroupController und Group zu unserem Projekt hinzugefügt haben, wird unser erster Komponententest erfolgreich abgeschlossen (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="ef781-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="ef781-226">Wir haben die minimale Arbeit geleistet, die erforderlich ist, um den Test zu bestehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="ef781-227">Es ist Zeit zu feiern.</span><span class="sxs-lookup"><span data-stu-id="ef781-227">It is time to celebrate.</span></span>

<span data-ttu-id="ef781-228">[![Erfolg!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="ef781-229">**Abbildung 02**: Erfolg! ([Klicken Sie hier, um das Bild in voller Größe anzuzeigen](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="ef781-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="ef781-230">Erstellen von Kontaktgruppen</span><span class="sxs-lookup"><span data-stu-id="ef781-230">Creating Contact Groups</span></span>

<span data-ttu-id="ef781-231">Nun können wir zur zweiten User Story übergehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="ef781-232">Wir müssen in der Lage sein, neue Kontaktgruppen zu schaffen.</span><span class="sxs-lookup"><span data-stu-id="ef781-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="ef781-233">Wir müssen diese Absicht mit einem Test zum Ausdruck bringen.</span><span class="sxs-lookup"><span data-stu-id="ef781-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="ef781-234">Der Test in Listing 4 überprüft, ob das Aufrufen der Create()-Methode mit einer neuen Gruppe die Gruppe zur Liste der Gruppen hinzufügt, die von der Index()-Methode zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="ef781-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="ef781-235">Mit anderen Worten, wenn ich eine neue Gruppe erstelle, dann sollte ich in der Lage sein, die neue Gruppe aus der Liste der Gruppen zurückzubekommen, die von der Index()-Methode zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="ef781-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="ef781-236">**Auflisten 4 - Controller-GruppeControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="ef781-237">Der Test in Listing 4 ruft die Group Controller Create()-Methode mit einer neuen Kontaktgruppe auf.</span><span class="sxs-lookup"><span data-stu-id="ef781-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="ef781-238">Als Nächstes überprüft der Test, ob der Aufruf der Group Controller Index()-Methode die neue Gruppe in Ansichtsdaten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="ef781-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="ef781-239">Der geänderte Gruppencontroller in Listing 5 enthält das absolute Minimum an Änderungen, die erforderlich sind, um den neuen Test zu bestehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="ef781-240">**Auflisten 5 - Controller-GruppeController.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="ef781-241">Der Gruppencontroller in Listing 5 verfügt über eine neue Create()-Aktion.</span><span class="sxs-lookup"><span data-stu-id="ef781-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="ef781-242">Durch diese Aktion wird eine Gruppe zu einer Auflistung von Gruppen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="ef781-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="ef781-243">Beachten Sie, dass die Aktion Index() geändert wurde, um den Inhalt der Auflistung von Gruppen zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="ef781-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="ef781-244">Wieder einmal haben wir die minimale Menge an Arbeit geleistet, die erforderlich ist, um den Komponententest zu bestehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="ef781-245">Nachdem wir diese Änderungen am Gruppencontroller vorgenommen haben, sind alle unsere Komponententests erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="ef781-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="ef781-246">Hinzufügen der Validierung</span><span class="sxs-lookup"><span data-stu-id="ef781-246">Adding Validation</span></span>

<span data-ttu-id="ef781-247">Diese Anforderung wurde in der User Story nicht explizit angegeben.</span><span class="sxs-lookup"><span data-stu-id="ef781-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="ef781-248">Es ist jedoch vernünftig, von einer Gruppe einen Namen zu verlangen.</span><span class="sxs-lookup"><span data-stu-id="ef781-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="ef781-249">Andernfalls wäre das Organisieren von Kontakten in Gruppen nicht sehr nützlich.</span><span class="sxs-lookup"><span data-stu-id="ef781-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="ef781-250">Liste 6 enthält einen neuen Test, der diese Absicht zum Ausdruck bringt.</span><span class="sxs-lookup"><span data-stu-id="ef781-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="ef781-251">Dieser Test überprüft, ob der Versuch, eine Gruppe zu erstellen, ohne einen Namen anzugeben, zu einer Validierungsfehlermeldung im Modellstatus führt.</span><span class="sxs-lookup"><span data-stu-id="ef781-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="ef781-252">**Auflisten 6 - Controller-GruppeControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="ef781-253">Um diesen Test zu erfüllen, müssen wir unserer Gruppeklasse eine Name-Eigenschaft hinzufügen (siehe Liste 7).</span><span class="sxs-lookup"><span data-stu-id="ef781-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="ef781-254">Darüber hinaus müssen wir unserer Create()-Aktion des Gruppencontrollers ein kleines bisschen Validierungslogik hinzufügen (siehe Liste 8).</span><span class="sxs-lookup"><span data-stu-id="ef781-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="ef781-255">**Auflisten 7 - Models-Gruppe.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="ef781-256">**Auflisten 8 - Controller-GruppeController.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="ef781-257">Beachten Sie, dass die Aktion Gruppencontroller Create() jetzt sowohl Validierung als auch Datenbanklogik enthält.</span><span class="sxs-lookup"><span data-stu-id="ef781-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="ef781-258">Derzeit besteht die vom Gruppencontroller verwendete Datenbank aus nichts weiter als einer In-Memory-Auflistung.</span><span class="sxs-lookup"><span data-stu-id="ef781-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="ef781-259">Zeit für die Umgestaltung</span><span class="sxs-lookup"><span data-stu-id="ef781-259">Time to Refactor</span></span>

<span data-ttu-id="ef781-260">Der dritte Schritt in Rot/Grün/Refaktor ist der Refactor-Teil.</span><span class="sxs-lookup"><span data-stu-id="ef781-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="ef781-261">An dieser Stelle müssen wir von unserem Code zurücktreten und überlegen, wie wir unsere Anwendung umgestalten können, um ihr Design zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="ef781-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="ef781-262">Die Refactor-Phase ist die Phase, in der wir intensiv über die beste Art und Weise der Implementierung von Software-Design-Prinzipien und -Mustern nachdenken.</span><span class="sxs-lookup"><span data-stu-id="ef781-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="ef781-263">Es steht uns frei, unseren Code in jeder Weise zu ändern, die wir wählen, um das Design des Codes zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="ef781-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="ef781-264">Wir verfügen über ein Sicherheitsnetz von Komponententests, die verhindern, dass wir bestehende Funktionen brechen.</span><span class="sxs-lookup"><span data-stu-id="ef781-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="ef781-265">Im Moment ist unser Group Controller ein Durcheinander aus der Perspektive eines guten Software-Designs.</span><span class="sxs-lookup"><span data-stu-id="ef781-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="ef781-266">Der Gruppencontroller enthält ein verworrenes Durcheinander von Validierungs- und Datenzugriffscode.</span><span class="sxs-lookup"><span data-stu-id="ef781-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="ef781-267">Um zu vermeiden, dass gegen das Prinzip der einheitlichen Verantwortung verstoßen wird, müssen wir diese Bedenken in verschiedene Klassen unterteilen.</span><span class="sxs-lookup"><span data-stu-id="ef781-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="ef781-268">Unsere umgesierte Gruppencontrollerklasse ist in Listing 9 enthalten.</span><span class="sxs-lookup"><span data-stu-id="ef781-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="ef781-269">Der Controller wurde geändert, um die ContactManager-Dienstschicht zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="ef781-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="ef781-270">Dies ist die gleiche Dienstebene, die wir mit dem Contact-Controller verwenden.</span><span class="sxs-lookup"><span data-stu-id="ef781-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="ef781-271">Liste 10 enthält die neuen Methoden, die dem ContactManager-Dienst-Layer hinzugefügt wurden, um das Überprüfen, Auflisten und Erstellen von Gruppen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="ef781-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="ef781-272">Die IContactManagerService-Schnittstelle wurde aktualisiert, um die neuen Methoden einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="ef781-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="ef781-273">Listing 11 enthält eine neue FakeContactManagerRepository-Klasse, die die IContactManagerRepository-Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="ef781-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="ef781-274">Im Gegensatz zur EntityContactManagerRepository-Klasse, die auch die IContactManagerRepository-Schnittstelle implementiert, kommuniziert unsere neue FakeContactManagerRepository-Klasse nicht mit der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="ef781-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="ef781-275">Die FakeContactManagerRepository-Klasse verwendet eine In-Memory-Auflistung als Proxy für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="ef781-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="ef781-276">Wir verwenden diese Klasse in unseren Komponententests als gefälschte Repository-Schicht.</span><span class="sxs-lookup"><span data-stu-id="ef781-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="ef781-277">**Auflisten 9 - Controller-GruppeController.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="ef781-278">**Auflisten 10 - Controller-KontaktManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="ef781-279">**Auflisten 11 - Controller-FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]

<span data-ttu-id="ef781-280">Das Ändern der IContactManagerRepository-Schnittstelle erfordert die Verwendung zum Implementieren der Methoden CreateGroup() und ListGroups() in der EntityContactManagerRepository-Klasse.</span><span class="sxs-lookup"><span data-stu-id="ef781-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="ef781-281">Der faulste und schnellste Weg, dies zu tun, ist Stub-Methoden hinzuzufügen, die wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="ef781-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]

<span data-ttu-id="ef781-282">Schließlich erfordern diese Änderungen am Design unserer Anwendung, dass wir einige Änderungen an unseren Komponententests vornehmen müssen.</span><span class="sxs-lookup"><span data-stu-id="ef781-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="ef781-283">Wir müssen nun das FakeContactManagerRepository verwenden, wenn wir die Komponententests durchführen.</span><span class="sxs-lookup"><span data-stu-id="ef781-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="ef781-284">Die aktualisierte GroupControllerTest-Klasse ist in Liste 12 enthalten.</span><span class="sxs-lookup"><span data-stu-id="ef781-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="ef781-285">**Auflisten 12 - Controller-GruppeControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="ef781-286">Nachdem wir all diese Änderungen vorgenommen haben, sind alle unsere Komponententests noch einmal erfolgreich.</span><span class="sxs-lookup"><span data-stu-id="ef781-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="ef781-287">Wir haben den gesamten Zyklus von Rot/Grün/Refactor abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="ef781-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="ef781-288">Wir haben die ersten beiden User Storys implementiert.</span><span class="sxs-lookup"><span data-stu-id="ef781-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="ef781-289">Wir haben jetzt unterstützende Komponententests für die Anforderungen, die in den User Storys ausgedrückt werden.</span><span class="sxs-lookup"><span data-stu-id="ef781-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="ef781-290">Die Implementierung der restlichen User Storys beinhaltet die Wiederholung des gleichen Zyklus von Rot/Grün/Refactor.</span><span class="sxs-lookup"><span data-stu-id="ef781-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="ef781-291">Ändern unserer Datenbank</span><span class="sxs-lookup"><span data-stu-id="ef781-291">Modifying our Database</span></span>

<span data-ttu-id="ef781-292">Obwohl wir alle Anforderungen unserer Komponententests erfüllt haben, ist unsere Arbeit leider nicht getan.</span><span class="sxs-lookup"><span data-stu-id="ef781-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="ef781-293">Wir müssen unsere Datenbank noch ändern.</span><span class="sxs-lookup"><span data-stu-id="ef781-293">We still need to modify our database.</span></span>

<span data-ttu-id="ef781-294">Wir müssen eine neue Gruppendatenbanktabelle erstellen.</span><span class="sxs-lookup"><span data-stu-id="ef781-294">We need to create a new Group database table.</span></span> <span data-ttu-id="ef781-295">Folgen Sie diesen Schritten:</span><span class="sxs-lookup"><span data-stu-id="ef781-295">Follow these steps:</span></span>

1. <span data-ttu-id="ef781-296">Klicken Sie im Fenster Server-Explorer mit der rechten Maustaste auf den Ordner Tabellen, und wählen Sie die Menüoption **Neue Tabelle hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="ef781-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="ef781-297">Geben Sie die beiden unten im Tabellen-Designer beschriebenen Spalten ein.</span><span class="sxs-lookup"><span data-stu-id="ef781-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="ef781-298">Markieren Sie die ID-Spalte als Primärschlüssel und Identitätsspalte.</span><span class="sxs-lookup"><span data-stu-id="ef781-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="ef781-299">Speichern Sie die neue Tabelle mit dem Namen Gruppen, indem Sie auf das Symbol der Diskette klicken.</span><span class="sxs-lookup"><span data-stu-id="ef781-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>

| <span data-ttu-id="ef781-300">**Spaltenname**</span><span class="sxs-lookup"><span data-stu-id="ef781-300">**Column Name**</span></span> | <span data-ttu-id="ef781-301">**Datentyp**</span><span class="sxs-lookup"><span data-stu-id="ef781-301">**Data Type**</span></span> | <span data-ttu-id="ef781-302">**Nullen zulassen**</span><span class="sxs-lookup"><span data-stu-id="ef781-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ef781-303">Id</span><span class="sxs-lookup"><span data-stu-id="ef781-303">Id</span></span> | <span data-ttu-id="ef781-304">INT</span><span class="sxs-lookup"><span data-stu-id="ef781-304">int</span></span> | <span data-ttu-id="ef781-305">False</span><span class="sxs-lookup"><span data-stu-id="ef781-305">False</span></span> |
| <span data-ttu-id="ef781-306">Name</span><span class="sxs-lookup"><span data-stu-id="ef781-306">Name</span></span> | <span data-ttu-id="ef781-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="ef781-307">nvarchar(50)</span></span> | <span data-ttu-id="ef781-308">False</span><span class="sxs-lookup"><span data-stu-id="ef781-308">False</span></span> |

<span data-ttu-id="ef781-309">Als Nächstes müssen wir alle Daten aus der Tabelle Kontakte löschen (sonst können wir keine Beziehung zwischen den Tabellen Kontakte und Gruppen erstellen).</span><span class="sxs-lookup"><span data-stu-id="ef781-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="ef781-310">Folgen Sie diesen Schritten:</span><span class="sxs-lookup"><span data-stu-id="ef781-310">Follow these steps:</span></span>

1. <span data-ttu-id="ef781-311">Klicken Sie mit der rechten Maustaste auf die Tabelle Kontakte, und wählen Sie die Menüoption **Tabellendaten anzeigen**aus.</span><span class="sxs-lookup"><span data-stu-id="ef781-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="ef781-312">Löschen Sie alle Zeilen.</span><span class="sxs-lookup"><span data-stu-id="ef781-312">Delete all of the rows.</span></span>

<span data-ttu-id="ef781-313">Als Nächstes müssen wir eine Beziehung zwischen der Datenbanktabelle Gruppen und der vorhandenen Kontakte-Datenbanktabelle definieren.</span><span class="sxs-lookup"><span data-stu-id="ef781-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="ef781-314">Folgen Sie diesen Schritten:</span><span class="sxs-lookup"><span data-stu-id="ef781-314">Follow these steps:</span></span>

1. <span data-ttu-id="ef781-315">Doppelklicken Sie im Fenster Server-Explorer auf die Tabelle Kontakte, um den Tabellen-Designer zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="ef781-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="ef781-316">Fügen Sie der Tabelle Contacts mit dem Namen GroupId eine neue Ganzzahlspalte hinzu.</span><span class="sxs-lookup"><span data-stu-id="ef781-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="ef781-317">Klicken Sie auf die Schaltfläche Beziehung, um das Dialogfeld Fremdschlüsselbeziehungen zu öffnen (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="ef781-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="ef781-318">Klicken Sie auf die Schaltfläche Hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="ef781-318">Click the Add button.</span></span>
5. <span data-ttu-id="ef781-319">Klicken Sie auf die Schaltfläche Auslassung, die neben der Schaltfläche Tabellen- und Spaltenspezifikation angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ef781-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="ef781-320">Wählen Sie im Dialogfeld Tabellen und Spalten Gruppen als Primärschlüsseltabelle und ID als Primärschlüsselspalte aus.</span><span class="sxs-lookup"><span data-stu-id="ef781-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="ef781-321">Wählen Sie Kontakte als Fremdschlüsseltabelle und GroupId als Fremdschlüsselspalte aus (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="ef781-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="ef781-322">Klicken Sie auf die Schaltfläche "OK".</span><span class="sxs-lookup"><span data-stu-id="ef781-322">Click the OK button.</span></span>
7. <span data-ttu-id="ef781-323">Wählen Sie unter **INSERT und UPDATE Specification**den Wert **Kaskadierung** für **Löschregel**aus.</span><span class="sxs-lookup"><span data-stu-id="ef781-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="ef781-324">Klicken Sie auf die Schaltfläche Schließen, um das Dialogfeld Fremdschlüsselbeziehungen zu schließen.</span><span class="sxs-lookup"><span data-stu-id="ef781-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="ef781-325">Klicken Sie auf die Schaltfläche Speichern, um die Änderungen in der Tabelle Kontakte zu speichern.</span><span class="sxs-lookup"><span data-stu-id="ef781-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="ef781-326">[![Erstellen einer Datenbanktabellenbeziehung](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="ef781-327">**Abbildung 03**: Erstellen einer Datenbanktabellenbeziehung ([Klicken Sie hier, um das Bild in voller Größe anzuzeigen](iteration-6-use-test-driven-development-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="ef781-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>

<span data-ttu-id="ef781-328">[![Angeben von Tabellenbeziehungen](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="ef781-329">**Abbildung 04**: Angeben von Tabellenbeziehungen([Klicken Sie hier, um das Bild in voller Größe anzuzeigen)](iteration-6-use-test-driven-development-vb/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="ef781-330">Aktualisieren unseres Datenmodells</span><span class="sxs-lookup"><span data-stu-id="ef781-330">Updating our Data Model</span></span>

<span data-ttu-id="ef781-331">Als Nächstes müssen wir unser Datenmodell aktualisieren, um die neue Datenbanktabelle darzustellen.</span><span class="sxs-lookup"><span data-stu-id="ef781-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="ef781-332">Folgen Sie diesen Schritten:</span><span class="sxs-lookup"><span data-stu-id="ef781-332">Follow these steps:</span></span>

1. <span data-ttu-id="ef781-333">Doppelklicken Sie im Ordner "Modelle", um den Entitäts-Designer zu öffnen, doppelklicken Sie auf die Datei ContactManagerModel.edmx.</span><span class="sxs-lookup"><span data-stu-id="ef781-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="ef781-334">Klicken Sie mit der rechten Maustaste auf die Designer-Oberfläche, und wählen Sie die Menüoption **Modell aus Datenbank aktualisieren**aus.</span><span class="sxs-lookup"><span data-stu-id="ef781-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="ef781-335">Wählen Sie im Update-Assistenten die Tabelle Gruppen aus, und klicken Sie auf die Schaltfläche Fertig stellen (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="ef781-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="ef781-336">Klicken Sie mit der rechten Maustaste auf die Entität Gruppen, und wählen Sie die Menüoption **Umbenennen**aus.</span><span class="sxs-lookup"><span data-stu-id="ef781-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="ef781-337">Ändern Sie den Namen der *Entität Gruppen* in *Gruppe* (Singular).</span><span class="sxs-lookup"><span data-stu-id="ef781-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="ef781-338">Klicken Sie mit der rechten Maustaste auf die Navigationseigenschaft Gruppen, die am unteren Rand der Kontaktentität angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ef781-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="ef781-339">Ändern Sie den Namen der *Navigationseigenschaft Gruppen* in *Gruppe* (Singular).</span><span class="sxs-lookup"><span data-stu-id="ef781-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="ef781-340">[![Aktualisieren eines Entity Framework-Modells aus der Datenbank](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="ef781-341">**Abbildung 05**: Aktualisieren eines Entity[Framework-Modells](iteration-6-use-test-driven-development-vb/_static/image10.png)aus der Datenbank (Klicken Sie hier, um das Bild in voller Größe anzuzeigen )</span><span class="sxs-lookup"><span data-stu-id="ef781-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>

<span data-ttu-id="ef781-342">Nachdem Sie diese Schritte ausgeführt haben, stellt das Datenmodell sowohl die Tabellen Kontakte als auch Gruppen dar.</span><span class="sxs-lookup"><span data-stu-id="ef781-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="ef781-343">Der Entitäts-Designer sollte beide Entitäten anzeigen (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="ef781-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="ef781-344">[![Entity Designer zeigt Gruppe und Kontakt an](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="ef781-345">**Abbildung 06**: Entity Designer zeigt Gruppe und Kontakt an ([Klicken Sie hier, um das Bild in voller Größe anzuzeigen](iteration-6-use-test-driven-development-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="ef781-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="ef781-346">Erstellen unserer Repository-Klassen</span><span class="sxs-lookup"><span data-stu-id="ef781-346">Creating our Repository Classes</span></span>

<span data-ttu-id="ef781-347">Als Nächstes müssen wir unsere Repository-Klasse implementieren.</span><span class="sxs-lookup"><span data-stu-id="ef781-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="ef781-348">Im Laufe dieser Iteration haben wir der IContactManagerRepository-Schnittstelle mehrere neue Methoden hinzugefügt, während wir Code geschrieben haben, um unsere Komponententests zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="ef781-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="ef781-349">Die endgültige Version der IContactManagerRepository-Schnittstelle ist in Liste 14 enthalten.</span><span class="sxs-lookup"><span data-stu-id="ef781-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="ef781-350">**Auflisten 14 - Modelle-IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="ef781-351">Wir haben keine der Methoden implementiert, die mit Kontaktgruppen in unserer echten EntityContactManagerRepository-Klasse arbeiten.</span><span class="sxs-lookup"><span data-stu-id="ef781-351">We haven't actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="ef781-352">Derzeit verfügt die EntityContactManagerRepository-Klasse über Stubmethoden für jede der Kontaktgruppenmethoden, die in der IContactManagerRepository-Schnittstelle aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="ef781-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="ef781-353">Die ListGroups()-Methode sieht z. B. derzeit wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="ef781-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="ef781-354">Die Stub-Methoden ermöglichten es uns, unsere Anwendung zu kompilieren und die Komponententests zu bestehen.</span><span class="sxs-lookup"><span data-stu-id="ef781-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="ef781-355">Jetzt ist es jedoch an der Zeit, diese Methoden tatsächlich umzusetzen.</span><span class="sxs-lookup"><span data-stu-id="ef781-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="ef781-356">Die endgültige Version der EntityContactManagerRepository-Klasse ist in Liste 13 enthalten.</span><span class="sxs-lookup"><span data-stu-id="ef781-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="ef781-357">**Auflisten 13 - Modelle-EntityContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="ef781-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="ef781-358">Erstellen der Ansichten</span><span class="sxs-lookup"><span data-stu-id="ef781-358">Creating the Views</span></span>

<span data-ttu-id="ef781-359">ASP.NET MVC-Anwendung, wenn Sie das standardmäßige ASP.NET-Ansichtsmodul verwenden.</span><span class="sxs-lookup"><span data-stu-id="ef781-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="ef781-360">Sie erstellen also keine Ansichten als Reaktion auf einen bestimmten Komponententest.</span><span class="sxs-lookup"><span data-stu-id="ef781-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="ef781-361">Da eine Anwendung jedoch ohne Ansichten nutzlos wäre, können wir diese Iteration nicht abschließen, ohne die in der Contact Manager-Anwendung enthaltenen Ansichten zu erstellen und zu ändern.</span><span class="sxs-lookup"><span data-stu-id="ef781-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="ef781-362">Wir müssen die folgenden neuen Ansichten für die Verwaltung von Kontaktgruppen erstellen (siehe Abbildung 7):</span><span class="sxs-lookup"><span data-stu-id="ef781-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="ef781-363">Ansichten- & Gruppen-Index.aspx - Zeigt liste der Kontaktgruppen an</span><span class="sxs-lookup"><span data-stu-id="ef781-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="ef781-364">Ansichten- "Gruppe" –Bestätigungsformular zum Löschen einer Kontaktgruppe an</span><span class="sxs-lookup"><span data-stu-id="ef781-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="ef781-365">[![Die Gruppenindexansicht](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="ef781-366">**Abbildung 07**: Die Gruppenindexansicht ([Klicken Sie hier, um das Bild in voller Größe anzuzeigen](iteration-6-use-test-driven-development-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ef781-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>

<span data-ttu-id="ef781-367">Wir müssen die folgenden vorhandenen Ansichten so ändern, dass sie Kontaktgruppen enthalten:</span><span class="sxs-lookup"><span data-stu-id="ef781-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="ef781-368">Ansichten, Home, Create.aspx</span><span class="sxs-lookup"><span data-stu-id="ef781-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="ef781-369">Ansichten, Home, Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="ef781-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="ef781-370">Ansichten, Home, Index.aspx</span><span class="sxs-lookup"><span data-stu-id="ef781-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="ef781-371">Sie können die geänderten Ansichten anzeigen, indem Sie sich die Visual Studio-Anwendung ansehen, die diesem Tutorial beiliegt.</span><span class="sxs-lookup"><span data-stu-id="ef781-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="ef781-372">Abbildung 8 zeigt z. B. die Kontaktindexansicht.</span><span class="sxs-lookup"><span data-stu-id="ef781-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="ef781-373">[![Die Kontaktindexansicht](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ef781-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="ef781-374">**Abbildung 08**: Die Kontaktindex-Ansicht([Klicken Sie hier, um das Bild in voller Größe anzuzeigen](iteration-6-use-test-driven-development-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="ef781-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="ef781-375">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="ef781-375">Summary</span></span>

<span data-ttu-id="ef781-376">In dieser Iteration haben wir unserer Contact Manager-Anwendung neue Funktionen hinzugefügt, indem wir einer testgesteuerten Entwicklungsanwendungsentwurfsmethode folgen.</span><span class="sxs-lookup"><span data-stu-id="ef781-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="ef781-377">Wir begannen mit der Erstellung einer Reihe von User Storys.</span><span class="sxs-lookup"><span data-stu-id="ef781-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="ef781-378">Wir haben eine Reihe von Komponententests erstellt, die den Anforderungen der User Storys entsprechen.</span><span class="sxs-lookup"><span data-stu-id="ef781-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="ef781-379">Schließlich haben wir gerade genug Code geschrieben, um die Anforderungen der Komponententests zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="ef781-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="ef781-380">Nachdem wir mit dem Schreiben von genügend Code fertig waren, um die Anforderungen der Komponententests zu erfüllen, haben wir unsere Datenbank und Unsere Ansichten aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="ef781-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="ef781-381">Wir haben unserer Datenbank eine neue Gruppentabelle hinzugefügt und unser Entity Framework-Datenmodell aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="ef781-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="ef781-382">Wir haben auch eine Reihe von Ansichten erstellt und geändert.</span><span class="sxs-lookup"><span data-stu-id="ef781-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="ef781-383">In der nächsten Iteration -- der letzten Iteration -- schreiben wir unsere Anwendung neu, um die Vorteile von Ajax zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="ef781-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="ef781-384">Durch die Nutzung von Ajax verbessern wir die Reaktionsfähigkeit und Leistung der Contact Manager-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="ef781-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ef781-385">[Zurück](iteration-5-create-unit-tests-vb.md)
> [Weiter](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="ef781-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>
