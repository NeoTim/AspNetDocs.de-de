---
uid: mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
title: Hinzufügen einer Create-Methode und CREATE VIEW | Microsoft-Dokumentation
author: shanselman
description: Dies ist ein Einsteiger-Tutorial, in dem die Grundlagen von ASP.NET MVC vorgestellt werden. Erstellen Sie eine einfache Webanwendung, die Daten aus einer Datenbank liest und in diese schreibt.
ms.author: riande
ms.date: 08/14/2010
ms.assetid: a3a90963-0286-4fa0-9b3d-c230cc18b0a3
msc.legacyurl: /mvc/overview/older-versions-1/getting-started-with-mvc/getting-started-with-mvc-part6
msc.type: authoredcontent
ms.openlocfilehash: 05a281720f76b107fe8d902ef60d5d2e72af3ef5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78437289"
---
# <a name="adding-a-create-method-and-create-view"></a><span data-ttu-id="8681d-104">Hinzufügen einer Create-Methode und -Ansicht</span><span class="sxs-lookup"><span data-stu-id="8681d-104">Adding a Create Method and Create View</span></span>

<span data-ttu-id="8681d-105">von [Scott Hanselman](https://github.com/shanselman)</span><span class="sxs-lookup"><span data-stu-id="8681d-105">by [Scott Hanselman](https://github.com/shanselman)</span></span>

> <span data-ttu-id="8681d-106">Dies ist ein Einsteiger-Tutorial, in dem die Grundlagen von ASP.NET MVC vorgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="8681d-106">This is a beginner tutorial that introduces the basics of ASP.NET MVC.</span></span> <span data-ttu-id="8681d-107">Sie erstellen eine einfache Webanwendung, die Daten aus einer Datenbank liest und in diese schreibt.</span><span class="sxs-lookup"><span data-stu-id="8681d-107">You'll create a simple web application that reads and writes from a database.</span></span> <span data-ttu-id="8681d-108">Besuchen Sie das [ASP.NET MVC Learning Center](../../../index.md) , um weitere ASP.NET MVC-Tutorials und-Beispiele zu finden.</span><span class="sxs-lookup"><span data-stu-id="8681d-108">Visit the [ASP.NET MVC learning center](../../../index.md) to find other ASP.NET MVC tutorials and samples.</span></span>

<span data-ttu-id="8681d-109">In diesem Abschnitt implementieren wir die erforderliche Unterstützung, damit Benutzer neue Filme in unserer Datenbank erstellen können.</span><span class="sxs-lookup"><span data-stu-id="8681d-109">In this section we are going to implement the support necessary to enable users to create new movies in our database.</span></span> <span data-ttu-id="8681d-110">Dies wird durch Implementieren der/Movies/Create-URL-Aktion durchführen.</span><span class="sxs-lookup"><span data-stu-id="8681d-110">We'll do this by implementing the /Movies/Create URL action.</span></span>

<span data-ttu-id="8681d-111">Das Implementieren der/Movies/Create-URL ist ein zweistufiger Prozess.</span><span class="sxs-lookup"><span data-stu-id="8681d-111">Implementing the /Movies/Create URL is a two step process.</span></span> <span data-ttu-id="8681d-112">Wenn ein Benutzer die/Movies/Create-URL zum ersten Mal besucht, möchten wir Ihnen ein HTML-Formular anzeigen, das Sie ausfüllen können, um einen neuen Film einzugeben.</span><span class="sxs-lookup"><span data-stu-id="8681d-112">When a user first visits the /Movies/Create URL we want to show them an HTML form that they can fill out to enter a new movie.</span></span> <span data-ttu-id="8681d-113">Wenn der Benutzer dann das Formular sendet und die Daten an den Server zurücksendet, möchten wir die übermittelten Inhalte abrufen und in der Datenbank speichern.</span><span class="sxs-lookup"><span data-stu-id="8681d-113">Then, when the user submits the form and posts the data back to the server, we want to retrieve the posted contents and save it into our database.</span></span>

<span data-ttu-id="8681d-114">Wir implementieren diese beiden Schritte innerhalb von zwei Create ()-Methoden innerhalb der Klasse "moviescontroller".</span><span class="sxs-lookup"><span data-stu-id="8681d-114">We'll implement these two steps within two Create() methods within our MoviesController class.</span></span> <span data-ttu-id="8681d-115">Eine Methode zeigt das &lt;Formular&gt; an, das der Benutzer ausfüllen sollte, um einen neuen Film zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="8681d-115">One method will show the &lt;form&gt; that the user should fill out to create a new movie.</span></span> <span data-ttu-id="8681d-116">Die zweite Methode verarbeitet die Verarbeitung der gesendeten Daten, wenn der Benutzer das &lt;Formular&gt; an den Server zurücksendet und einen neuen Film in der Datenbank speichert.</span><span class="sxs-lookup"><span data-stu-id="8681d-116">The second method will handle processing the posted data when the user submits the &lt;form&gt; back to the server, and save a new Movie within our database.</span></span>

<span data-ttu-id="8681d-117">Im folgenden finden Sie den Code, den wir zur Klasse "moviescontroller" hinzufügen, um dies zu implementieren:</span><span class="sxs-lookup"><span data-stu-id="8681d-117">Below is the code we'll add to our MoviesController class to implement this:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample1.cs)]

<span data-ttu-id="8681d-118">Der obige Code enthält den gesamten Code, den wir in unserem Controller benötigen.</span><span class="sxs-lookup"><span data-stu-id="8681d-118">The above code contains all of the code that we'll need within our Controller.</span></span>

<span data-ttu-id="8681d-119">Nun implementieren wir die CREATE VIEW-Vorlage, mit der Sie dem Benutzer ein Formular anzeigen.</span><span class="sxs-lookup"><span data-stu-id="8681d-119">Let's now implement the Create View template that we'll use to display a form to the user.</span></span> <span data-ttu-id="8681d-120">Klicken Sie mit der rechten Maustaste auf die erste Create-Methode, und wählen Sie "Add View" (Ansicht hinzufügen) aus, um die Ansichts Vorlage für das</span><span class="sxs-lookup"><span data-stu-id="8681d-120">We'll right click in the first Create method and select "Add View" to create the view template for our Movie form.</span></span>

<span data-ttu-id="8681d-121">Wir legen fest, dass die Ansichts Vorlage "Movie" als Ansichts Datenklasse übergeben wird, und geben an, dass wir eine "Create"-Vorlage erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="8681d-121">We'll select that we are going to pass the view template a "Movie" as its view data class, and indicate that we want to "scaffold" a "Create" template.</span></span>

<span data-ttu-id="8681d-122">[![Ansicht hinzufügen](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8681d-122">[![Add View](getting-started-with-mvc-part6/_static/image2.png)](getting-started-with-mvc-part6/_static/image1.png)</span></span>

<span data-ttu-id="8681d-123">Nachdem Sie auf die Schaltfläche Hinzufügen geklickt haben, wird die Vorlage \movies\ansichts Vorlage für Sie erstellt.</span><span class="sxs-lookup"><span data-stu-id="8681d-123">After you click the Add button, \Movies\Create.aspx View template will be created for you.</span></span> <span data-ttu-id="8681d-124">Da wir in der Dropdown Liste "Inhalt anzeigen" die Option "erstellen" ausgewählt haben, wird im Dialogfeld "Ansicht hinzufügen" automatisch ein Standard Inhalt für uns "gerügt" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8681d-124">Because we selected "Create" from the "view content" dropdown, the Add View dialog automatically "scaffolded" some default content for us.</span></span> <span data-ttu-id="8681d-125">Der Gerüstbau hat ein HTML-&lt;Formular&gt;erstellt, einen Speicherort für Validierungs Fehlermeldungen, und da der Gerüstbau über Filme weiß, hat er Bezeichnung und Felder für jede Eigenschaft der Klasse erstellt.</span><span class="sxs-lookup"><span data-stu-id="8681d-125">The scaffolding created an HTML &lt;form&gt;, a place for validation error messages to go, and since scaffolding knows about Movies, it created Label and Fields for each property of our class.</span></span>

[!code-aspx[Main](getting-started-with-mvc-part6/samples/sample2.aspx)]

<span data-ttu-id="8681d-126">Da unsere Datenbank automatisch eine ID erhält, entfernen wir nun die Felder, die auf das Modell verweisen. ID aus unserer Create-Sicht.</span><span class="sxs-lookup"><span data-stu-id="8681d-126">Since our database automatically gives a Movie an ID, let's remove those fields that reference model.Id from our Create View.</span></span> <span data-ttu-id="8681d-127">Entfernen Sie die 7 Zeilen nach &lt;Legenden&gt;Felder&lt;/Legend&gt;, da Sie das gewünschte ID-Feld anzeigen.</span><span class="sxs-lookup"><span data-stu-id="8681d-127">Remove the 7 lines after &lt;legend&gt;Fields&lt;/legend&gt; as they show the ID field that we don't want.</span></span>

<span data-ttu-id="8681d-128">Nun erstellen wir einen neuen Film und fügen ihn der Datenbank hinzu.</span><span class="sxs-lookup"><span data-stu-id="8681d-128">Let's now create a new movie and add it to the database.</span></span> <span data-ttu-id="8681d-129">Dies geschieht, indem Sie die Anwendung erneut ausführen und die URL "/Movies" aufrufen und auf den Link "erstellen" klicken, um einen neuen Film hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="8681d-129">We'll do this by running the application again and visit the "/Movies" URL and click the "Create" link to add a new Movie.</span></span>

<span data-ttu-id="8681d-130">[![erstellen-Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="8681d-130">[![Create - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image4.png)](getting-started-with-mvc-part6/_static/image3.png)</span></span>

<span data-ttu-id="8681d-131">Wenn Sie auf die Schaltfläche "erstellen" klicken, werden die Daten in diesem Formular (über HTTP Post) an die soeben erstellte/Movies/Create-Methode zurückgesendet.</span><span class="sxs-lookup"><span data-stu-id="8681d-131">When we click the Create button, we'll be posting back (via HTTP POST) the data on this form to the /Movies/Create method that we just created.</span></span> <span data-ttu-id="8681d-132">Ebenso wie wenn das System automatisch den Parameter "numtimes" und "Name" aus der URL herausgenommen hat und diese den Parametern einer Methode zuvor zugeordnet hat, übernimmt das System automatisch die Formularfelder aus einem Post und ordnet diese einem Objekt zu.</span><span class="sxs-lookup"><span data-stu-id="8681d-132">Just like when the system automatically took the "numTimes" and "name " parameter out of the URL and mapped them to parameters on a method earlier, the system will automatically take the Form Fields from a POST and map them to an object.</span></span> <span data-ttu-id="8681d-133">In diesem Fall werden Werte aus Feldern in HTML, wie z. b. "ReleaseDate" und "Title", automatisch in die richtigen Eigenschaften einer neuen Instanz eines Films eingefügt.</span><span class="sxs-lookup"><span data-stu-id="8681d-133">In this case, values from fields in HTML like "ReleaseDate" and "Title" will automatically be put into the correct properties of a new instance of a Movie.</span></span>

<span data-ttu-id="8681d-134">Sehen wir uns erneut die zweite Create-Methode aus unserem "moviescontroller" an.</span><span class="sxs-lookup"><span data-stu-id="8681d-134">Let's look at the second Create method from our MoviesController again.</span></span> <span data-ttu-id="8681d-135">Beachten Sie, wie es ein "Movie"-Objekt als Argument annimmt:</span><span class="sxs-lookup"><span data-stu-id="8681d-135">Notice how it takes a "Movie" object as an argument:</span></span>

[!code-csharp[Main](getting-started-with-mvc-part6/samples/sample3.cs)]

<span data-ttu-id="8681d-136">Dieses Movie-Objekt wurde dann an die [HttpPost]-Version der Create Action-Methode übergeben, und wir haben es in der Datenbank gespeichert und dann wieder an die Index ()-Aktionsmethode umgeleitet, die das gespeicherte Ergebnis in der Filmliste anzeigt:</span><span class="sxs-lookup"><span data-stu-id="8681d-136">This Movie object was then passed to the [HttpPost] version of our Create action method, and we saved it in the database and then redirected the user back to the Index() action method which will show the saved result in the movie list:</span></span>

<span data-ttu-id="8681d-137">[![Movie List-Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="8681d-137">[![Movie List - Windows Internet Explorer](getting-started-with-mvc-part6/_static/image6.png)](getting-started-with-mvc-part6/_static/image5.png)</span></span>

<span data-ttu-id="8681d-138">Wir überprüfen nicht, ob die Filme richtig sind, und die Datenbank lässt nicht zu, dass wir einen Film ohne Titel speichern.</span><span class="sxs-lookup"><span data-stu-id="8681d-138">We aren't checking if our movies are correct, though, and the database won't allow us to save a movie with no Title.</span></span> <span data-ttu-id="8681d-139">Es wäre schön, wenn wir dem Benutzer mitteilen könnten, dass ein Fehler aufgetreten ist, bevor die Datenbank einen Fehler ausgelöst hat.</span><span class="sxs-lookup"><span data-stu-id="8681d-139">It'd be nice if we could tell the user that before the database threw an error.</span></span> <span data-ttu-id="8681d-140">Wir werden dies als nächstes durchführen, indem wir der Anwendung Validierungs Unterstützung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8681d-140">We'll do this next by adding validation support to our application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8681d-141">[Zurück](getting-started-with-mvc-part5.md)
> [Weiter](getting-started-with-mvc-part7.md)</span><span class="sxs-lookup"><span data-stu-id="8681d-141">[Previous](getting-started-with-mvc-part5.md)
[Next](getting-started-with-mvc-part7.md)</span></span>
