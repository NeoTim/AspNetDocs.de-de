---
uid: mvc/overview/older-versions-1/security/authenticating-users-with-forms-authentication-vb
title: Authentifizieren von Benutzern mit der Formular Authentifizierung (VB) | Microsoft-Dokumentation
author: microsoft
description: Erfahren Sie, wie Sie das Attribut [autorisieren] zum Kenn Wort Schutz bestimmter Seiten in ihrer MVC-Anwendung verwenden. Sie erfahren, wie Sie auch die Website Verwaltung verwenden...
ms.author: riande
ms.date: 01/27/2009
ms.assetid: 4341f5b1-6fe5-44c5-8b8a-18fa84f80177
msc.legacyurl: /mvc/overview/older-versions-1/security/authenticating-users-with-forms-authentication-vb
msc.type: authoredcontent
ms.openlocfilehash: a2c2140631d59a7f8b21aa73613a92ea5c7a91d0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78498933"
---
# <a name="authenticating-users-with-forms-authentication-vb"></a><span data-ttu-id="5f5b1-104">Authentifizieren von Benutzern bei der Formularauthentifizierung (VB)</span><span class="sxs-lookup"><span data-stu-id="5f5b1-104">Authenticating Users with Forms Authentication (VB)</span></span>

<span data-ttu-id="5f5b1-105">von [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="5f5b1-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="5f5b1-106">Erfahren Sie, wie Sie das Attribut [autorisieren] zum Kenn Wort Schutz bestimmter Seiten in ihrer MVC-Anwendung verwenden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-106">Learn how to use the [Authorize] attribute to password protect particular pages in your MVC application.</span></span> <span data-ttu-id="5f5b1-107">Sie erfahren, wie Sie das Websiteverwaltungs-Tool zum Erstellen und Verwalten von Benutzern und Rollen verwenden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-107">You learn how to use the Web Site Administration Tool to create and manage users and roles.</span></span> <span data-ttu-id="5f5b1-108">Außerdem erfahren Sie, wie Sie konfigurieren, wo Benutzerkonto-und Rollen Informationen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-108">You also learn how to configure where user account and role information is stored.</span></span>

<span data-ttu-id="5f5b1-109">In diesem Tutorial wird erläutert, wie Sie die Formular Authentifizierung verwenden können, um die Ansichten in Ihren ASP.NET-MVC-Anwendungen per Kennwort zu schützen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-109">The goal of this tutorial is to explain how you can use Forms authentication to password protect the views in your ASP.NET MVC applications.</span></span> <span data-ttu-id="5f5b1-110">Sie erfahren, wie Sie das Websiteverwaltungs-Tool verwenden, um Benutzer und Rollen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-110">You learn how to use the Web Site Administration Tool to create users and roles.</span></span> <span data-ttu-id="5f5b1-111">Außerdem erfahren Sie, wie Sie verhindern können, dass nicht autorisierte Benutzer Controller Aktionen aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-111">You also learn how to prevent unauthorized users from invoking controller actions.</span></span> <span data-ttu-id="5f5b1-112">Schließlich erfahren Sie, wie Sie konfigurieren, wo Benutzernamen und Kenn Wörter gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-112">Finally, you learn how to configure where user names and passwords are stored.</span></span>

#### <a name="using-the-web-site-administration-tool"></a><span data-ttu-id="5f5b1-113">Verwenden des Websiteverwaltungs-Tools</span><span class="sxs-lookup"><span data-stu-id="5f5b1-113">Using the Web Site Administration Tool</span></span>

<span data-ttu-id="5f5b1-114">Bevor wir etwas anderes tun, sollten wir zunächst einige Benutzer und Rollen erstellen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-114">Before we do anything else, we should start by creating some users and roles.</span></span> <span data-ttu-id="5f5b1-115">Die einfachste Möglichkeit zum Erstellen neuer Benutzer und Rollen ist die Nutzung des Visual Studio 2008-Websiteverwaltungs-Tools.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-115">The easiest way to create new users and roles is to take advantage of the Visual Studio 2008 Web Site Administration Tool.</span></span> <span data-ttu-id="5f5b1-116">Sie können dieses Tool starten, indem Sie die Menüoption **Project, ASP.net Configuration**auswählen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-116">You can launch this tool by selecting the menu option **Project, ASP.NET Configuration**.</span></span> <span data-ttu-id="5f5b1-117">Alternativ dazu können Sie das Websiteverwaltungs-Tool starten, indem Sie auf das Symbol (etwas beängstigend) des Hammers klicken, der auf die Welt trifft, die am oberen Rand des Projektmappen-Explorer Fensters angezeigt wird (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-117">Alternatively, you can launch the Web Site Administration Tool by clicking the (somewhat scary) icon of the hammer hitting the world that appears at the top of the Solution Explorer window (see Figure 1).</span></span>

<span data-ttu-id="5f5b1-118">**Abbildung 1 – Starten des Websiteverwaltungs-Tools**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-118">**Figure 1 – Launching the Web Site Administration Tool**</span></span>

![clip_image002[4]](authenticating-users-with-forms-authentication-vb/_static/image1.jpg)

<span data-ttu-id="5f5b1-120">Im Websiteverwaltungs-Tool erstellen Sie neue Benutzer und Rollen, indem Sie die Registerkarte Sicherheit auswählen. Klicken Sie auf den Link **Create User (Benutzer erstellen** ), um einen neuen Benutzernamens Stephen zu erstellen (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-120">Within the Web Site Administration Tool, you create new users and roles by selecting the Security tab. Click the **Create user** link to create a new user named Stephen (see Figure 2).</span></span> <span data-ttu-id="5f5b1-121">Geben Sie dem Stephen-Benutzer ein beliebiges Kennwort (z. b. *geheimer*Schlüssel).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-121">Provide the Stephen user with any password that you want (for example, *secret*).</span></span>

<span data-ttu-id="5f5b1-122">**Abbildung 2 – Erstellen eines neuen Benutzers**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-122">**Figure 2 – Creating a new user**</span></span>

![clip_image004[4]](authenticating-users-with-forms-authentication-vb/_static/image2.jpg)

<span data-ttu-id="5f5b1-124">Sie erstellen neue Rollen, indem Sie zunächst Rollen aktivieren und eine oder mehrere Rollen definieren.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-124">You create new roles by first enabling roles and defining one or more roles.</span></span> <span data-ttu-id="5f5b1-125">Aktivieren Sie Rollen, indem Sie auf den Link **Rollen aktivieren** klicken.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-125">Enable roles by clicking the **Enable roles** link.</span></span> <span data-ttu-id="5f5b1-126">Erstellen Sie als nächstes eine Rolle mit dem Namen *Administratoren* , indem Sie auf den Link **Rollen erstellen oder verwalten** klicken (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-126">Next, create a role named *Administrators* by clicking the **Create or Manage roles** link (see Figure 3).</span></span>

<span data-ttu-id="5f5b1-127">**Abbildung 3 – Erstellen einer neuen Rolle**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-127">**Figure 3 – Creating a new role**</span></span>

![clip_image006[4]](authenticating-users-with-forms-authentication-vb/_static/image3.jpg)

<span data-ttu-id="5f5b1-129">Erstellen Sie abschließend einen neuen Benutzer mit dem Namen "Sally", und ordnen Sie die Rolle "Administratoren" zu, indem Sie auf den Link "Benutzer erstellen" klicken und "Administratoren" auswählen (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-129">Finally, create a new user named Sally and associate Sally with the Administrators role by clicking the Create User link and selecting Administrators when creating Sally (see Figure 4).</span></span>

<span data-ttu-id="5f5b1-130">**Abbildung 4 – Hinzufügen eines Benutzers zu einer Rolle**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-130">**Figure 4 – Adding a user to a role**</span></span>

![clip_image008[4]](authenticating-users-with-forms-authentication-vb/_static/image4.jpg)

<span data-ttu-id="5f5b1-132">Wenn alles gesagt und abgeschlossen ist, sollten Sie über zwei neue Benutzer mit den Namen Stephen und Sally verfügen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-132">When all is said and done, you should have two new users named Stephen and Sally.</span></span> <span data-ttu-id="5f5b1-133">Sie sollten auch über eine neue Rolle mit dem Namen Administratoren verfügen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-133">You should also have a new role named Administrators.</span></span> <span data-ttu-id="5f5b1-134">Sally ist ein Mitglied der Administrator Rolle, und Stephen ist nicht.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-134">Sally is a member of the Administrators role and Stephen is not.</span></span>

#### <a name="requiring-authorization"></a><span data-ttu-id="5f5b1-135">Autorisierung erforderlich</span><span class="sxs-lookup"><span data-stu-id="5f5b1-135">Requiring Authorization</span></span>

<span data-ttu-id="5f5b1-136">Sie können festlegen, dass ein Benutzer authentifiziert werden muss, bevor der Benutzer eine Controller Aktion aufruft, indem er der Aktion das Attribut [autorisieren] hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-136">You can require a user to be authenticated before the user invokes a controller action by adding the [Authorize] attribute to the action.</span></span> <span data-ttu-id="5f5b1-137">Sie können das Attribut [autorisieren] auf eine einzelne Controller Aktion anwenden, oder Sie können dieses Attribut auf eine gesamte Controller Klasse anwenden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-137">You can apply the [Authorize] attribute to an individual controller action or you can apply this attribute to an entire controller class.</span></span>

<span data-ttu-id="5f5b1-138">Der Controller in der Liste 1 macht beispielsweise eine Aktion mit dem Namen companysecrets () verfügbar.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-138">For example, the controller in Listing 1 exposes an action named CompanySecrets().</span></span> <span data-ttu-id="5f5b1-139">Da diese Aktion mit dem Attribut [autorisieren] ergänzt wird, kann diese Aktion nur aufgerufen werden, wenn ein Benutzer authentifiziert ist.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-139">Because this action is decorated with the [Authorize] attribute, this action cannot be invoked unless a user is authenticated.</span></span>

<span data-ttu-id="5f5b1-140">**Codebeispiel 1 – controllers\homecontroller.vb**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-140">**Listing 1 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](authenticating-users-with-forms-authentication-vb/samples/sample1.vb)]

<span data-ttu-id="5f5b1-141">Wenn Sie die Aktion companysecrets () aufrufen, indem Sie die URL/Home/CompanySecrets in der Adressleiste Ihres Browsers eingeben und Sie kein authentifizierter Benutzer sind, werden Sie automatisch zur Anmelde Ansicht umgeleitet (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-141">If you invoke the CompanySecrets() action by entering the URL /Home/CompanySecrets in the address bar of your browser, and you are not an authenticated user, then you will be redirected to the Login view automatically (see Figure 5).</span></span>

<span data-ttu-id="5f5b1-142">**Abbildung 5 – die Anmeldungs Ansicht**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-142">**Figure 5 – The Login view**</span></span>

![clip_image010[4]](authenticating-users-with-forms-authentication-vb/_static/image5.jpg)

<span data-ttu-id="5f5b1-144">Sie können die Anmelde Ansicht verwenden, um Ihren Benutzernamen und Ihr Kennwort einzugeben.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-144">You can use the Login view to enter your user name and password.</span></span> <span data-ttu-id="5f5b1-145">Wenn Sie kein registrierter Benutzer sind, können Sie auf den Link **registrieren** klicken, um zur Register Ansicht zu navigieren (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-145">If you are not a registered user then you can click the **register** link to navigate to the Register view (see Figure 6).</span></span> <span data-ttu-id="5f5b1-146">Mithilfe der Register Ansicht können Sie ein neues Benutzerkonto erstellen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-146">You can use the Register view to create a new user account.</span></span>

<span data-ttu-id="5f5b1-147">**Abbildung 6 – die Register Ansicht**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-147">**Figure 6 – The Register view**</span></span>

![clip_image012](authenticating-users-with-forms-authentication-vb/_static/image6.jpg)

<span data-ttu-id="5f5b1-149">Nachdem Sie sich erfolgreich angemeldet haben, wird die Ansicht "Unternehmensgeheimnisse" angezeigt (siehe Abbildung 7).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-149">After you successfully log in, you can see the CompanySecrets view (see Figure 7).</span></span> <span data-ttu-id="5f5b1-150">Standardmäßig werden Sie weiterhin angemeldet, bis Sie das Browserfenster schließen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-150">By default, you will continue to be logged in until you close your browser window.</span></span>

<span data-ttu-id="5f5b1-151">**Abbildung 7 – die Ansicht "Unternehmensgeheimnisse"**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-151">**Figure 7 – The CompanySecrets view**</span></span>

![clip_image014](authenticating-users-with-forms-authentication-vb/_static/image7.jpg)

#### <a name="authorizing-by-user-name-or-user-role"></a><span data-ttu-id="5f5b1-153">Autorisierungs nach Benutzer Name oder Benutzerrolle</span><span class="sxs-lookup"><span data-stu-id="5f5b1-153">Authorizing by User Name or User Role</span></span>

<span data-ttu-id="5f5b1-154">Sie können das Attribut [autorisieren] verwenden, um den Zugriff auf eine Controller Aktion auf eine bestimmte Gruppe von Benutzern oder einen bestimmten Satz von Benutzer Rollen zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-154">You can use the [Authorize] attribute to restrict access to a controller action to a particular set of users or a particular set of user roles.</span></span> <span data-ttu-id="5f5b1-155">Der geänderte Home-Controller in der Liste 2 enthält z. b. zwei neue Aktionen mit den Namen "stephensecrets ()" und "AdministratorSecrets ()".</span><span class="sxs-lookup"><span data-stu-id="5f5b1-155">For example, the modified Home controller in Listing 2 contains two new actions named StephenSecrets() and AdministratorSecrets().</span></span>

<span data-ttu-id="5f5b1-156">**Codebeispiel 2 – controllers\homecontroller.vb**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-156">**Listing 2 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](authenticating-users-with-forms-authentication-vb/samples/sample2.vb)]

<span data-ttu-id="5f5b1-157">Nur ein Benutzer mit dem Benutzernamen Stephen kann die Aktion stephensecrets () aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-157">Only a user with the user name Stephen can invoke the StephenSecrets() action.</span></span> <span data-ttu-id="5f5b1-158">Alle anderen Benutzer werden zur Anmelde Ansicht umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-158">All other users get redirected to the Login view.</span></span> <span data-ttu-id="5f5b1-159">Die Users-Eigenschaft akzeptiert eine durch Trennzeichen getrennte Liste von Benutzerkonto Namen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-159">The Users property accepts a comma separated list of user account names.</span></span>

<span data-ttu-id="5f5b1-160">Nur Benutzer in der Administrator Rolle können die AdministratorSecrets ()-Aktion aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-160">Only users in the Administrators role can invoke the AdministratorSecrets() action.</span></span> <span data-ttu-id="5f5b1-161">Da Sally z. b. ein Mitglied der Gruppe "Administratoren" ist, kann Sie die Aktion "AdministratorSecrets ()" aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-161">For example, because Sally is a member of the Administrators group, she can invoke the AdministratorSecrets() action.</span></span> <span data-ttu-id="5f5b1-162">Alle anderen Benutzer werden zur Anmelde Ansicht umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-162">All other users get redirected to the Login view.</span></span> <span data-ttu-id="5f5b1-163">Die Role-Eigenschaft akzeptiert eine durch Trennzeichen getrennte Liste von Rollennamen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-163">The Roles property accepts a comma separated list of role names.</span></span>

#### <a name="configuring-authentication"></a><span data-ttu-id="5f5b1-164">Konfigurieren der Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="5f5b1-164">Configuring Authentication</span></span>

<span data-ttu-id="5f5b1-165">An diesem Punkt Fragen Sie sich vielleicht, wo das Benutzerkonto und die Rollen Informationen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-165">At this point, you might be wondering where the user account and role information is being stored.</span></span> <span data-ttu-id="5f5b1-166">Standardmäßig werden die Informationen in einer SQL Express-Datenbank (RANU) mit dem Namen "aspnetdb. mdf" gespeichert, die sich in der APP\_Daten Ordners ihrer MVC-Anwendung befindet.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-166">By default, the information is stored in a (RANU) SQL Express database named ASPNETDB.mdf located in your MVC application's App\_Data folder.</span></span> <span data-ttu-id="5f5b1-167">Diese Datenbank wird von ASP.NET Framework automatisch generiert, wenn Sie mit der Mitgliedschaft beginnen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-167">This database is generated by the ASP.NET framework automatically when you start using membership.</span></span>

<span data-ttu-id="5f5b1-168">Um die aspnetdb. mdf-Datenbank im Projektmappen-Explorer Fenster anzuzeigen, müssen Sie zuerst die Menüoption Projekt, alle Dateien anzeigen auswählen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-168">In order to see the ASPNETDB.mdf database in the Solution Explorer window, you first need to select the menu option Project, Show All Files.</span></span>

<span data-ttu-id="5f5b1-169">Die Verwendung der SQL Express-Standarddatenbank ist in Ordnung, wenn Sie eine Anwendung entwickeln.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-169">Using the default SQL Express database is fine when developing an application.</span></span> <span data-ttu-id="5f5b1-170">Wahrscheinlich möchten Sie jedoch nicht die aspnetdb. mdf-Standarddatenbank für eine Produktionsanwendung verwenden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-170">Most likely, however, you won't want to use the default ASPNETDB.mdf database for a production application.</span></span> <span data-ttu-id="5f5b1-171">In diesem Fall können Sie den Speicherort der Benutzerkontoinformationen ändern, indem Sie die folgenden zwei Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="5f5b1-171">In that case, you can change where user account information is stored by completing the following two steps:</span></span>

1. <span data-ttu-id="5f5b1-172">Hinzufügen der Anwendungsdienste Datenbankobjekte zur Produktionsdatenbank: Ändern Sie die Anwendungs Verbindungs Zeichenfolge so, dass Sie auf Ihre Produktionsdatenbank verweist.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-172">Add the Application Services database objects to your production database - Change your application connection string to point to your production database</span></span>

<span data-ttu-id="5f5b1-173">Der erste Schritt besteht darin, alle erforderlichen Datenbankobjekte (Tabellen und gespeicherte Prozeduren) der Produktionsdatenbank hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-173">The first step is to add all of the necessary database objects (tables and stored procedures) to your production database.</span></span> <span data-ttu-id="5f5b1-174">Die einfachste Möglichkeit, diese Objekte zu einer neuen Datenbank hinzuzufügen, besteht darin, den ASP.NET SQL Server Setup-Assistenten zu nutzen (siehe Abbildung 8).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-174">The easiest way to add these objects to a new database is to take advantage of the ASP.NET SQL Server Setup Wizard (see Figure 8).</span></span> <span data-ttu-id="5f5b1-175">Sie können dieses Tool starten, indem Sie die Visual Studio 2008-Eingabeaufforderung in der Gruppe Microsoft Visual Studio 2008 öffnen und den folgenden Befehl an der Eingabeaufforderung ausführen:</span><span class="sxs-lookup"><span data-stu-id="5f5b1-175">You can launch this tool by opening the Visual Studio 2008 Command Prompt from the Microsoft Visual Studio 2008 program group and executing the following command from the command prompt:</span></span>

<span data-ttu-id="5f5b1-176">ASPNET\_RegSql</span><span class="sxs-lookup"><span data-stu-id="5f5b1-176">aspnet\_regsql</span></span>

<span data-ttu-id="5f5b1-177">**Abbildung 8 – Setup-Assistent für ASP.NET-SQL Server**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-177">**Figure 8 – The ASP.NET SQL Server Setup Wizard**</span></span>

![clip_image016](authenticating-users-with-forms-authentication-vb/_static/image8.jpg)

<span data-ttu-id="5f5b1-179">Der Setup-Assistent für ASP.NET SQL Server ermöglicht es Ihnen, eine SQL Server-Datenbank im Netzwerk auszuwählen und alle Datenbankobjekte zu installieren, die für die ASP.NET-Anwendungsdienste erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-179">The ASP.NET SQL Server Setup Wizard enables you to select a SQL Server database on your network and install all of the database objects required by the ASP.NET application services.</span></span> <span data-ttu-id="5f5b1-180">Der Datenbankserver muss sich nicht auf dem lokalen Computer befinden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-180">The database server is not required to be located on your local machine.</span></span>

> [!NOTE]
> <span data-ttu-id="5f5b1-181">Wenn Sie den Setup-Assistenten für ASP.NET SQL Server nicht verwenden möchten, können Sie SQL-Skripts zum Hinzufügen der Anwendungsdienste-Datenbankobjekte im folgenden Ordner finden:</span><span class="sxs-lookup"><span data-stu-id="5f5b1-181">If you don't want to use the ASP.NET SQL Server Setup Wizard, then you can find SQL scripts for adding the application services database objects in the following folder:</span></span>
> 
> 
> <span data-ttu-id="5f5b1-182">C:\Windows\Microsoft.NET\Framework\v2.0.50727</span><span class="sxs-lookup"><span data-stu-id="5f5b1-182">C:\Windows\Microsoft.NET\Framework\v2.0.50727</span></span>

<span data-ttu-id="5f5b1-183">Nachdem Sie die erforderlichen Datenbankobjekte erstellt haben, müssen Sie die Datenbankverbindung ändern, die von der MVC-Anwendung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-183">After you create the necessary database objects, you need to modify the database connection used by your MVC application.</span></span> <span data-ttu-id="5f5b1-184">Ändern Sie die ApplicationServices-Verbindungs Zeichenfolge in der Webkonfigurationsdatei (Web. config), sodass Sie auf die Produktionsdatenbank verweist.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-184">Modify the ApplicationServices connection string in your web configuration (web.config) file so that it points to the production database.</span></span> <span data-ttu-id="5f5b1-185">Beispielsweise verweist die geänderte Verbindung in Auflistung 3 auf eine Datenbank mit dem Namen myproductiondb (die ursprüngliche ApplicationServices-Verbindungs Zeichenfolge wurde auskommentiert).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-185">For example, the modified connection in Listing 3 points to a database named MyProductionDB (the original ApplicationServices connection string has been commented out).</span></span>

<span data-ttu-id="5f5b1-186">**Codebeispiel 3 – Web. config**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-186">**Listing 3 – Web.config**</span></span>

[!code-xml[Main](authenticating-users-with-forms-authentication-vb/samples/sample3.xml)]

#### <a name="configuring-database-permissions"></a><span data-ttu-id="5f5b1-187">Konfigurieren von Daten Bank Berechtigungen</span><span class="sxs-lookup"><span data-stu-id="5f5b1-187">Configuring Database Permissions</span></span>

<span data-ttu-id="5f5b1-188">Wenn Sie die integrierte Sicherheit verwenden, um eine Verbindung mit Ihrer Datenbank herzustellen, müssen Sie das korrekte Windows-Benutzerkonto als Anmelde Namen zur Datenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-188">If you use Integrated Security to connect to your database then you will need to add the correct Windows user account as a login to your database.</span></span> <span data-ttu-id="5f5b1-189">Welches Konto richtig ist, hängt davon ab, ob Sie die ASP.NET Development Server oder Internetinformationsdienste als Webserver verwenden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-189">The correct account depends on whether you are using the ASP.NET Development Server or Internet Information Services as your web server.</span></span> <span data-ttu-id="5f5b1-190">Das richtige Benutzerkonto ist auch abhängig von Ihrem Betriebssystem.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-190">The correct user account also depends on your operating system.</span></span>

<span data-ttu-id="5f5b1-191">Wenn Sie die ASP.NET Development Server (der von Visual Studio verwendete Standard Webserver) verwenden, wird Ihre Anwendung im Kontext des Windows-Benutzerkontos ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-191">If you are using the ASP.NET Development Server (the default web server used by Visual Studio) then your application executes within the context of your Windows user account.</span></span> <span data-ttu-id="5f5b1-192">In diesem Fall müssen Sie das Windows-Benutzerkonto als Anmelde Namen für den Datenbankserver hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-192">In that case, you need to add your Windows user account as a database server login.</span></span>

<span data-ttu-id="5f5b1-193">Wenn Sie Internetinformationsdienste verwenden, müssen Sie alternativ entweder das ASPNET-Konto oder das NT-Autorität-/Netzwerkdienstkonto als Anmelde Namen für den Datenbankserver hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-193">Alternatively, if you are using Internet Information Services then you need to add either the ASPNET account or the NT AUTHORITY/NETWORK SERVICE account as a database server login.</span></span> <span data-ttu-id="5f5b1-194">Wenn Sie Windows XP verwenden, fügen Sie das ASPNET-Konto als Anmelde Namen zur Datenbank hinzu.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-194">If you are using Windows XP then add the ASPNET account as a login to your database.</span></span> <span data-ttu-id="5f5b1-195">Wenn Sie ein aktuelleres Betriebssystem verwenden, wie z. b. Windows Vista oder Windows Server 2008, fügen Sie das NT-Autorität-/Netzwerkdienstkonto als Daten Bank Anmeldung hinzu.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-195">If you are using a more recent operating system, such as Windows Vista or Windows Server 2008, then add the NT AUTHORITY/NETWORK SERVICE account as the database login.</span></span>

<span data-ttu-id="5f5b1-196">Sie können der Datenbank ein neues Benutzerkonto hinzufügen, indem Sie Microsoft SQL Server Management Studio verwenden (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-196">You can add a new user account to your database by using Microsoft SQL Server Management Studio (see Figure 9).</span></span>

<span data-ttu-id="5f5b1-197">**Abbildung 9 – Erstellen einer neuen Microsoft SQL Server Anmeldung**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-197">**Figure 9 – Creating a new Microsoft SQL Server login**</span></span>

![clip_image018](authenticating-users-with-forms-authentication-vb/_static/image9.jpg)

<span data-ttu-id="5f5b1-199">Nachdem Sie die erforderliche Anmeldung erstellt haben, müssen Sie die Anmeldung einem Datenbankbenutzer mit den richtigen Daten bankrollen zuordnen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-199">After you create the required login, you need to map the login to a database user with the right database roles.</span></span> <span data-ttu-id="5f5b1-200">Doppelklicken Sie auf die Anmeldung, und wählen Sie die Registerkarte Benutzer Zuordnung aus. Wählen Sie mindestens eine Anwendungs Dienst-Daten Bank Rolle aus.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-200">Double-click the login and select the User Mapping tab. Select one or more application services database roles.</span></span> <span data-ttu-id="5f5b1-201">Um z. b. Benutzer zu authentifizieren, müssen Sie die ASPNET-\_Mitgliedschaft\_der Daten Bank Rolle "BasicAccess" aktivieren.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-201">For example, in order to authenticate users, you need to enable the aspnet\_Membership\_BasicAccess database role.</span></span> <span data-ttu-id="5f5b1-202">Um neue Benutzer zu erstellen, müssen Sie die ASPNET-\_Mitgliedschaft\_Daten Bank Rolle "FullAccess" aktivieren (siehe Abbildung 10).</span><span class="sxs-lookup"><span data-stu-id="5f5b1-202">In order to create new users, you need to enable the aspnet\_Membership\_FullAccess database role (see Figure 10).</span></span>

<span data-ttu-id="5f5b1-203">**Abbildung 10 – Hinzufügen von Anwendungsdienste Daten bankrollen**</span><span class="sxs-lookup"><span data-stu-id="5f5b1-203">**Figure 10 – Adding Application Services database roles**</span></span>

![clip_image020](authenticating-users-with-forms-authentication-vb/_static/image10.jpg)

#### <a name="summary"></a><span data-ttu-id="5f5b1-205">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="5f5b1-205">Summary</span></span>

<span data-ttu-id="5f5b1-206">In diesem Tutorial haben Sie erfahren, wie Sie die Formular Authentifizierung verwenden, wenn Sie eine ASP.NET MVC-Anwendung entwickeln.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-206">In this tutorial, you learned how to use Forms authentication when building an ASP.NET MVC application.</span></span> <span data-ttu-id="5f5b1-207">Zuerst haben Sie erfahren, wie Sie neue Benutzer und Rollen erstellen, indem Sie das Websiteverwaltungs-Tool nutzen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-207">First, you learned how to create new users and roles by taking advantage of the Web Site Administration Tool.</span></span> <span data-ttu-id="5f5b1-208">Als nächstes haben Sie erfahren, wie Sie das Attribut [autorisieren] verwenden, um zu verhindern, dass nicht autorisierte Benutzer Controller Aktionen aufrufen.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-208">Next, you learned how to use the [Authorize] attribute to prevent unauthorized users from invoking controller actions.</span></span> <span data-ttu-id="5f5b1-209">Schließlich haben Sie erfahren, wie Sie Ihre MVC-Anwendung so konfigurieren, dass Benutzer-und Rollen Informationen in einer Produktionsdatenbank gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="5f5b1-209">Finally, you learned how to configure your MVC application to store user and role information in a production database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5f5b1-210">[Zurück](preventing-javascript-injection-attacks-cs.md)
> [Weiter](authenticating-users-with-windows-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5f5b1-210">[Previous](preventing-javascript-injection-attacks-cs.md)
[Next](authenticating-users-with-windows-authentication-vb.md)</span></span>
