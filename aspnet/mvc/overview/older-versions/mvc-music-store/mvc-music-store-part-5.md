---
uid: mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-5
title: 'Teil 5: Bearbeiten von Formularen und Vorlagen | Microsoft-Dokumentation'
author: jongalloway
description: Dieser tutorialreihe werden alle Schritte ausgeführt, um die ASP.NET MVC Music Store-beispielanwendung zu erstellen. Teil 5 behandelt das von Bearbeitungsformularen und Vorlagen.
ms.author: riande
ms.date: 04/21/2011
ms.assetid: 6b09413a-6d6a-425a-87c9-629f91b91b28
msc.legacyurl: /mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-5
msc.type: authoredcontent
ms.openlocfilehash: 20b99cbe57b5dfa623205838a5929733a6c2d70d
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65112984"
---
# <a name="part-5-edit-forms-and-templating"></a><span data-ttu-id="2627a-104">Teil 5: Bearbeiten von Formularen und Vorlagen</span><span class="sxs-lookup"><span data-stu-id="2627a-104">Part 5: Edit Forms and Templating</span></span>

<span data-ttu-id="2627a-105">durch [Jon Galloway](https://github.com/jongalloway)</span><span class="sxs-lookup"><span data-stu-id="2627a-105">by [Jon Galloway](https://github.com/jongalloway)</span></span>

> <span data-ttu-id="2627a-106">Die MVC Music Store ist ein lernprogrammanwendung, die eingeführt und erläutert Schritt für Schritt, wie ASP.NET MVC und Visual Studio für die Webentwicklung verwenden.</span><span class="sxs-lookup"><span data-stu-id="2627a-106">The MVC Music Store is a tutorial application that introduces and explains step-by-step how to use ASP.NET MVC and Visual Studio for web development.</span></span>  
>   
> <span data-ttu-id="2627a-107">Die MVC Music Store ist eine Implementierung eines einfachen Beispiels die Alben online verkauft und implementiert grundlegende Verwaltung, Benutzeranmeldung und shopping Cart-Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="2627a-107">The MVC Music Store is a lightweight sample store implementation which sells music albums online, and implements basic site administration, user sign-in, and shopping cart functionality.</span></span>
> 
> <span data-ttu-id="2627a-108">Dieser tutorialreihe werden alle Schritte ausgeführt, um die ASP.NET MVC Music Store-beispielanwendung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2627a-108">This tutorial series details all of the steps taken to build the ASP.NET MVC Music Store sample application.</span></span> <span data-ttu-id="2627a-109">Teil 5 behandelt das von Bearbeitungsformularen und Vorlagen.</span><span class="sxs-lookup"><span data-stu-id="2627a-109">Part 5 covers Edit Forms and Templating.</span></span>

<span data-ttu-id="2627a-110">Im letzten Kapitel waren wir Laden von Daten aus der Datenbank und anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="2627a-110">In the past chapter, we were loading data from our database and displaying it.</span></span> <span data-ttu-id="2627a-111">In diesem Kapitel werden wir auch aktivieren, Bearbeiten der Daten.</span><span class="sxs-lookup"><span data-stu-id="2627a-111">In this chapter, we'll also enable editing the data.</span></span>

## <a name="creating-the-storemanagercontroller"></a><span data-ttu-id="2627a-112">Erstellen die StoreManagerController</span><span class="sxs-lookup"><span data-stu-id="2627a-112">Creating the StoreManagerController</span></span>

<span data-ttu-id="2627a-113">Wir erstellen Sie zunächst einen neuen Controller namens **StoreManagerController**.</span><span class="sxs-lookup"><span data-stu-id="2627a-113">We'll begin by creating a new controller called **StoreManagerController**.</span></span> <span data-ttu-id="2627a-114">Für diesen Controller werden wir die Gerüstbau-Funktionen, die von der ASP.NET MVC 3 Tools Update nutzen.</span><span class="sxs-lookup"><span data-stu-id="2627a-114">For this controller, we will be taking advantage of the Scaffolding features available in the ASP.NET MVC 3 Tools Update.</span></span> <span data-ttu-id="2627a-115">Legen Sie die Optionen für das Dialogfeld "Controller hinzufügen" aus, wie unten dargestellt.</span><span class="sxs-lookup"><span data-stu-id="2627a-115">Set the options for the Add Controller dialog as shown below.</span></span>

![](mvc-music-store-part-5/_static/image1.png)

<span data-ttu-id="2627a-116">Wenn Sie die Schaltfläche "hinzufügen" klicken, sehen Sie sich, dass der ASP.NET MVC 3-Gerüstbau eine gute Menge an Arbeit für Sie übernimmt:</span><span class="sxs-lookup"><span data-stu-id="2627a-116">When you click the Add button, you'll see that the ASP.NET MVC 3 scaffolding mechanism does a good amount of work for you:</span></span>

- <span data-ttu-id="2627a-117">Erstellen der neuen StoreManagerController mit einer lokalen Variablen von Entity Framework</span><span class="sxs-lookup"><span data-stu-id="2627a-117">It creates the new StoreManagerController with a local Entity Framework variable</span></span>
- <span data-ttu-id="2627a-118">Ordner "Views" des Projekts hinzugefügt einen Ordner StoreManager</span><span class="sxs-lookup"><span data-stu-id="2627a-118">It adds a StoreManager folder to the project's Views folder</span></span>
- <span data-ttu-id="2627a-119">Es fügt Create.cshtml, Delete.cshtml, Details.cshtml, Edit.cshtml und "Index.cshtml" Ansicht stark typisiert auf die Album-Klasse</span><span class="sxs-lookup"><span data-stu-id="2627a-119">It adds Create.cshtml, Delete.cshtml, Details.cshtml, Edit.cshtml, and Index.cshtml view, strongly typed to the Album class</span></span>

![](mvc-music-store-part-5/_static/image2.png)

<span data-ttu-id="2627a-120">Die neue Controller-Klasse für den StoreManager enthält CRUD (erstellen, lesen, aktualisieren und löschen) Controlleraktionen, die weiß, wie das Album zusammenarbeiten Modellklasse und unsere Entity Framework-Kontext für den Datenbankzugriff verwendet.</span><span class="sxs-lookup"><span data-stu-id="2627a-120">The new StoreManager controller class includes CRUD (create, read, update, delete) controller actions which know how to work with the Album model class and use our Entity Framework context for database access.</span></span>

## <a name="modifying-a-scaffolded-view"></a><span data-ttu-id="2627a-121">Das Ändern einer erstellten Sicht</span><span class="sxs-lookup"><span data-stu-id="2627a-121">Modifying a Scaffolded View</span></span>

<span data-ttu-id="2627a-122">Es ist wichtig zu beachten, dass während dieser Code für Sie generiert wurde, ist es ASP.NET MVC-Standardcode, wie wir in diesem Tutorial geschrieben haben.</span><span class="sxs-lookup"><span data-stu-id="2627a-122">It's important to remember that, while this code was generated for us, it's standard ASP.NET MVC code, just like we've been writing throughout this tutorial.</span></span> <span data-ttu-id="2627a-123">Es sollen Sie sparen Zeit damit, würde Controller Codebausteine schreiben und erstellen manuell die stark typisierten Ansichten, dies ist jedoch die Art des generierten Codes Sie sicherlich bemerkt haben, die Voranstellung ernsthafte Warnungen in Kommentaren, wie Sie ändern darf nicht das Code.</span><span class="sxs-lookup"><span data-stu-id="2627a-123">It's intended to save you the time you'd spend on writing boilerplate controller code and creating the strongly typed views manually, but this isn't the kind of generated code you may have seen prefaced with dire warnings in comments about how you mustn't change the code.</span></span> <span data-ttu-id="2627a-124">Dies ist Ihr Code ein, und Ihnen wird erwartet, um ihn zu ändern.</span><span class="sxs-lookup"><span data-stu-id="2627a-124">This is your code, and you're expected to change it.</span></span>

<span data-ttu-id="2627a-125">Also, wir beginnen mit der eine schnelle Änderung an den StoreManager Index (/ Views/StoreManager/Index.cshtml).</span><span class="sxs-lookup"><span data-stu-id="2627a-125">So, let's start with a quick edit to the StoreManager Index view (/Views/StoreManager/Index.cshtml).</span></span> <span data-ttu-id="2627a-126">Diese Ansicht zeigt eine Tabelle die Alben in unseres neuen Speichers mit bearbeiten listet / Details / Löschen von Verknüpfungen und öffentlichen Eigenschaften des Albums enthält.</span><span class="sxs-lookup"><span data-stu-id="2627a-126">This view will display a table which lists the Albums in our store with Edit / Details / Delete links, and includes the Album's public properties.</span></span> <span data-ttu-id="2627a-127">Wir entfernen das Feld AlbumArtUrl, da er nicht in dieser Anzeige sehr nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="2627a-127">We'll remove the AlbumArtUrl field, as it's not very useful in this display.</span></span> <span data-ttu-id="2627a-128">In &lt;Tabelle&gt; Abschnitt des Codes Ansicht Entfernen der &lt;th&gt; und &lt;td&gt; AlbumArtUrl Verweise, um, wie durch die hervorgehobenen Zeilen, die folgenden Elemente:</span><span class="sxs-lookup"><span data-stu-id="2627a-128">In &lt;table&gt; section of the view code, remove the &lt;th&gt; and &lt;td&gt; elements surrounding AlbumArtUrl references, as indicated by the highlighted lines below:</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample1.cshtml)]

<span data-ttu-id="2627a-129">Der Code für die veränderten wird wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="2627a-129">The modified view code will appear as follows:</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample2.cshtml)]

## <a name="a-first-look-at-the-store-manager"></a><span data-ttu-id="2627a-130">Ein erster Blick auf die Store Manager</span><span class="sxs-lookup"><span data-stu-id="2627a-130">A first look at the Store Manager</span></span>

<span data-ttu-id="2627a-131">Nun führen Sie die Anwendung aus, und navigieren Sie zu/StoreManager /.</span><span class="sxs-lookup"><span data-stu-id="2627a-131">Now run the application and browse to /StoreManager/.</span></span> <span data-ttu-id="2627a-132">Der Store Manager-Index nur mit einer Liste der Alben im Store mit Links zu bearbeiten, Details, und Löschen von geändert, wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-132">This displays the Store Manager Index we just modified, showing a list of the albums in the store with links to Edit, Details, and Delete.</span></span>

![](mvc-music-store-part-5/_static/image3.png)

<span data-ttu-id="2627a-133">Klicken Sie auf den Link "Bearbeiten" zeigt ein Formular zum Bearbeiten mit Feldern für das Album, einschließlich der Dropdownmenüs für "Genre" und Künstler diese geändert hat.</span><span class="sxs-lookup"><span data-stu-id="2627a-133">Clicking the Edit link displays an edit form with fields for the Album, including dropdowns for Genre and Artist.</span></span>

![](mvc-music-store-part-5/_static/image4.png)

<span data-ttu-id="2627a-134">Klicken Sie auf den Link "Zurück zur Liste" am unteren Rand, und klicken Sie dann auf den Link "Details" für ein Album.</span><span class="sxs-lookup"><span data-stu-id="2627a-134">Click the "Back to List" link at the bottom, then click on the Details link for an Album.</span></span> <span data-ttu-id="2627a-135">Dies zeigt detaillierte Informationen für ein einzelner Album.</span><span class="sxs-lookup"><span data-stu-id="2627a-135">This displays the detail information for an individual Album.</span></span>

![](mvc-music-store-part-5/_static/image5.png)

<span data-ttu-id="2627a-136">In diesem Fall klicken Sie auf der Rückseite Liste-Link, und klicken Sie dann auf einen Link "löschen".</span><span class="sxs-lookup"><span data-stu-id="2627a-136">Again, click the Back to List link, then click on a Delete link.</span></span> <span data-ttu-id="2627a-137">Dies zeigt ein Bestätigungsdialogfeld mit genaueren Informationen Album und gefragt, ob wir sind Sie sicher, dass wir sie löschen möchten.</span><span class="sxs-lookup"><span data-stu-id="2627a-137">This displays a confirmation dialog, showing the album details and asking if we're sure we want to delete it.</span></span>

![](mvc-music-store-part-5/_static/image6.png)

<span data-ttu-id="2627a-138">Klicken Sie auf die Schaltfläche "löschen" im unteren Bereich wird das Album zu löschen und gelangen Sie wieder in die Indexseite, die das Album gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="2627a-138">Clicking the Delete button at the bottom will delete the album and return you to the Index page, which shows the album deleted.</span></span>

<span data-ttu-id="2627a-139">Fertig nicht mit dem Store-Manager, aber wir über eine funktionierende Controller und Ansichtscode für die CRUD-Vorgänge zum Starten von verfügen.</span><span class="sxs-lookup"><span data-stu-id="2627a-139">We're not done with the Store Manager, but we have working controller and view code for the CRUD operations to start from.</span></span>

## <a name="looking-at-the-store-manager-controller-code"></a><span data-ttu-id="2627a-140">Der Store Manager-controllercode ansehen</span><span class="sxs-lookup"><span data-stu-id="2627a-140">Looking at the Store Manager Controller code</span></span>

<span data-ttu-id="2627a-141">Der Store Manager-Controller enthält eine gute Menge an Code.</span><span class="sxs-lookup"><span data-stu-id="2627a-141">The Store Manager Controller contains a good amount of code.</span></span> <span data-ttu-id="2627a-142">Schauen Sie wir dies von oben nach unten.</span><span class="sxs-lookup"><span data-stu-id="2627a-142">Let's go through this from top to bottom.</span></span> <span data-ttu-id="2627a-143">Der Controller enthält einige standard-Namespaces für einen MVC-Controller als auch einen Verweis auf unsere Modelle-Namespace.</span><span class="sxs-lookup"><span data-stu-id="2627a-143">The controller includes some standard namespaces for an MVC controller, as well as a reference to our Models namespace.</span></span> <span data-ttu-id="2627a-144">Der Controller hat eine private Instanz des MusicStoreEntities, für den Datenzugriff von jedem der Controlleraktionen verwendet.</span><span class="sxs-lookup"><span data-stu-id="2627a-144">The controller has a private instance of MusicStoreEntities, used by each of the controller actions for data access.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample3.cs)]

### <a name="store-manager-index-and-details-actions"></a><span data-ttu-id="2627a-145">Store Manager-Index und Details-Aktionen</span><span class="sxs-lookup"><span data-stu-id="2627a-145">Store Manager Index and Details actions</span></span>

<span data-ttu-id="2627a-146">Ansicht "Index" Ruft eine Liste der Alben, einschließlich des Albums auf die verwiesen wird "Genre" und Interpreten, wie wir bereits gesehen haben, bei der Arbeit an den Store durchsuchen-Methode ab.</span><span class="sxs-lookup"><span data-stu-id="2627a-146">The index view retrieves a list of Albums, including each album's referenced Genre and Artist information, as we previously saw when working on the Store Browse method.</span></span> <span data-ttu-id="2627a-147">Ansicht "Index" folgt, damit sie jedes Album der Name des Genres und Namen der Interpreten, anzeigen kann, damit der Controller effizienter und Abfragen dieser Informationen in der ursprünglichen Anforderung wird die Verweise auf die verknüpften Objekte.</span><span class="sxs-lookup"><span data-stu-id="2627a-147">The Index view is following the references to the linked objects so that it can display each album's Genre name and Artist name, so the controller is being efficient and querying for this information in the original request.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample4.cs)]

<span data-ttu-id="2627a-148">Details-Controlleraktion des Controllers StoreManager funktioniert genauso wie die Details der Store-Controller-Aktion, die wir geschrieben bislang haben - Abfragen für das Album durch die ID, die mit der Find()-Methode, sendet Sie dann zurück zur Ansicht.</span><span class="sxs-lookup"><span data-stu-id="2627a-148">The StoreManager Controller's Details controller action works exactly the same as the Store Controller Details action we wrote previously - it queries for the Album by ID using the Find() method, then returns it to the view.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample5.cs)]

### <a name="the-create-action-methods"></a><span data-ttu-id="2627a-149">Das Erstellen von Aktionsmethoden</span><span class="sxs-lookup"><span data-stu-id="2627a-149">The Create Action Methods</span></span>

<span data-ttu-id="2627a-150">Die erstellen-Aktionsmethoden sind etwas anders aus, die wir bisher gesehen haben, da sie die Formulareingabe behandeln.</span><span class="sxs-lookup"><span data-stu-id="2627a-150">The Create action methods are a little different from ones we've seen so far, because they handle form input.</span></span> <span data-ttu-id="2627a-151">Wenn ein Benutzer zuerst /StoreManager/erstellen/besucht werden sie ein leeres Formular angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-151">When a user first visits /StoreManager/Create/ they will be shown an empty form.</span></span> <span data-ttu-id="2627a-152">Diese HTML-Seite enthält eine &lt;Formular&gt; -Element, das Dropdownfeld und das Textfeld enthält Eingabeelement in dem sie das Album Details eingeben können.</span><span class="sxs-lookup"><span data-stu-id="2627a-152">This HTML page will contain a &lt;form&gt; element that contains dropdown and textbox input elements where they can enter the album's details.</span></span>

<span data-ttu-id="2627a-153">Nachdem der Benutzer die Formularwerte Album ausfüllt, können sie die Schaltfläche "Speichern" zu senden, dass diese Änderungen für unsere Anwendung, die in der Datenbank speichern zurück drücken.</span><span class="sxs-lookup"><span data-stu-id="2627a-153">After the user fills in the Album form values, they can press the "Save" button to submit these changes back to our application to save within the database.</span></span> <span data-ttu-id="2627a-154">Wenn der Benutzer drückt die Schaltfläche "Speichern" die &lt;Formular&gt; führt eine HTTP-POST an die /StoreManager/erstellen/URL aus und übermitteln der &lt;Formular&gt; Werte als Teil der HTTP-POST-Anforderung.</span><span class="sxs-lookup"><span data-stu-id="2627a-154">When the user presses the "save" button the &lt;form&gt; will perform an HTTP-POST back to the /StoreManager/Create/ URL and submit the &lt;form&gt; values as part of the HTTP-POST.</span></span>

<span data-ttu-id="2627a-155">ASP.NET MVC ermöglicht uns, die die Logik dieser beiden Szenarien der URL-Aufruf problemlos aufteilen, indem ermöglicht uns, implementieren Sie zwei separate "Erstellen" Aktionsmethoden in unserem StoreManagerController-Klasse: eine zum Verarbeiten der anfänglichen HTTP-GET navigieren Sie zu der /StoreManager/Create / URL, und die andere zum Verarbeiten von HTTP-POST für die übermittelten Änderungen.</span><span class="sxs-lookup"><span data-stu-id="2627a-155">ASP.NET MVC allows us to easily split up the logic of these two URL invocation scenarios by enabling us to implement two separate "Create" action methods within our StoreManagerController class – one to handle the initial HTTP-GET browse to the /StoreManager/Create/ URL, and the other to handle the HTTP-POST of the submitted changes.</span></span>

### <a name="passing-information-to-a-view-using-viewbag"></a><span data-ttu-id="2627a-156">Übergeben von Informationen zu einer Ansicht mithilfe von "ViewBag"</span><span class="sxs-lookup"><span data-stu-id="2627a-156">Passing information to a View using ViewBag</span></span>

<span data-ttu-id="2627a-157">Wir haben die ViewBag-Klasse weiter oben in diesem Tutorial verwendet, aber noch nicht viel darüber gesprochen.</span><span class="sxs-lookup"><span data-stu-id="2627a-157">We've used the ViewBag earlier in this tutorial, but haven't talked much about it.</span></span> <span data-ttu-id="2627a-158">Die ViewBag-Klasse ermöglicht uns, die Informationen an die Ansicht zu übergeben, ohne Verwendung eines stark typisierten Model-Objekts.</span><span class="sxs-lookup"><span data-stu-id="2627a-158">The ViewBag allows us to pass information to the view without using a strongly typed model object.</span></span> <span data-ttu-id="2627a-159">In diesem Fall unsere Bearbeiten von HTTP-GET-Controlleraktion sowohl eine Liste der Genres und Interpreten auf das Formular aus, um die aufzufüllen übergeben muss, und die einfachste Möglichkeit hierzu ist, um als "ViewBag" Elemente zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="2627a-159">In this case, our Edit HTTP-GET controller action needs to pass both a list of Genres and Artists to the form to populate the dropdowns, and the simplest way to do that is to return them as ViewBag items.</span></span>

<span data-ttu-id="2627a-160">Die ViewBag-Klasse ist ein dynamisches Objekt, was bedeutet, dass Sie ViewBag.Foo oder ViewBag.YourNameHere eingeben können, ohne das Schreiben von Code, um diese Eigenschaften zu definieren.</span><span class="sxs-lookup"><span data-stu-id="2627a-160">The ViewBag is a dynamic object, meaning that you can type ViewBag.Foo or ViewBag.YourNameHere without writing code to define those properties.</span></span> <span data-ttu-id="2627a-161">In diesem Fall verwendet der controllercode ViewBag.GenreId und ViewBag.ArtistId, damit die Dropdown-Werte, die mit dem Formular übermittelt werden, GenreId und ArtistId, sind die Album-Eigenschaften, die sie festlegen.</span><span class="sxs-lookup"><span data-stu-id="2627a-161">In this case, the controller code uses ViewBag.GenreId and ViewBag.ArtistId so that the dropdown values submitted with the form will be GenreId and ArtistId, which are the Album properties they will be setting.</span></span>

<span data-ttu-id="2627a-162">Diese Dropdownliste Werte werden zurückgegeben, auf das Formular unter Verwendung der SelectList-Objekts, die nur für diesen Zweck erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="2627a-162">These dropdown values are returned to the form using the SelectList object, which is built just for that purpose.</span></span> <span data-ttu-id="2627a-163">Dies erfolgt mithilfe von Code wie folgt:</span><span class="sxs-lookup"><span data-stu-id="2627a-163">This is done using code like this:</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample6.cs)]

<span data-ttu-id="2627a-164">Wie Sie aus Code der Aktion sehen können, sind drei Parameter verwendet wird, dieses Objekt erstellt:</span><span class="sxs-lookup"><span data-stu-id="2627a-164">As you can see from the action method code, three parameters are being used to create this object:</span></span>

- <span data-ttu-id="2627a-165">Die Liste der Elemente aus die Dropdownliste anzeigen lassen.</span><span class="sxs-lookup"><span data-stu-id="2627a-165">The list of items the dropdown will be displaying.</span></span> <span data-ttu-id="2627a-166">Beachten Sie, dass dies nicht bloß eine Zeichenfolge ist: eine Liste der Genres übergeben.</span><span class="sxs-lookup"><span data-stu-id="2627a-166">Note that this isn't just a string - we're passing a list of Genres.</span></span>
- <span data-ttu-id="2627a-167">Der nächste Parameter, die an die SelectList übergeben werden, ist der Wert der ausgewählten.</span><span class="sxs-lookup"><span data-stu-id="2627a-167">The next parameter being passed to the SelectList is the Selected Value.</span></span> <span data-ttu-id="2627a-168">Dieser wie der SelectList weiß, wie ein Element in der Liste vorab ausgewählt werden kann.</span><span class="sxs-lookup"><span data-stu-id="2627a-168">This how the SelectList knows how to pre-select an item in the list.</span></span> <span data-ttu-id="2627a-169">Dies ist einfacher zu verstehen, wenn wir das Bearbeitungsformular handelt es sich recht ähnlich betrachten wird.</span><span class="sxs-lookup"><span data-stu-id="2627a-169">This will be easier to understand when we look at the Edit form, which is pretty similar.</span></span>
- <span data-ttu-id="2627a-170">Der letzte Parameter ist die Eigenschaft, die angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2627a-170">The final parameter is the property to be displayed.</span></span> <span data-ttu-id="2627a-171">In diesem Fall ist dies an, dass die Genre.Name-Eigenschaft ist, was dem Benutzer angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="2627a-171">In this case, this is indicating that the Genre.Name property is what will be shown to the user.</span></span>

<span data-ttu-id="2627a-172">Mit Denken Sie daran, klicken Sie dann die Aktion zum Erstellen von HTTP-GET ist ziemlich einfach: zwei SelectLists die ViewBag-Klasse hinzugefügt werden, und kein Modellobjekt ist (da sie noch nicht erstellt wurde) an das Formular übergeben.</span><span class="sxs-lookup"><span data-stu-id="2627a-172">With that in mind, then, the HTTP-GET Create action is pretty simple - two SelectLists are added to the ViewBag, and no model object is passed to the form (since it hasn't been created yet).</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample7.cs)]

### <a name="html-helpers-to-display-the-drop-downs-in-the-create-view"></a><span data-ttu-id="2627a-173">HTML-Hilfsprogramme, die Drop-Elemente in der Create View angezeigt</span><span class="sxs-lookup"><span data-stu-id="2627a-173">HTML Helpers to display the Drop Downs in the Create View</span></span>

<span data-ttu-id="2627a-174">Da wir eingegangen sind, zu wie das Dropdown-Werte an die Ansicht übergeben werden, werfen wir einen kurzen Blick auf die Ansicht, um herauszufinden, wie diese Werte angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="2627a-174">Since we've talked about how the drop down values are passed to the view, let's take a quick look at the view to see how those values are displayed.</span></span> <span data-ttu-id="2627a-175">In den Anzeigecode (/ Views/StoreManager/Create.cshtml), sehen Sie den folgende Aufruf erfolgt, zum Anzeigen der Dropdownliste "Genre" nach unten.</span><span class="sxs-lookup"><span data-stu-id="2627a-175">In the view code (/Views/StoreManager/Create.cshtml), you'll see the following call is made to display the Genre drop down.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample8.cshtml)]

<span data-ttu-id="2627a-176">Dies wird als eine HTML-Hilfsobjekt - eine Utility-Methode bezeichnet, die eine häufige Aufgabe für die Sicht ausführt.</span><span class="sxs-lookup"><span data-stu-id="2627a-176">This is known as an HTML Helper - a utility method which performs a common view task.</span></span> <span data-ttu-id="2627a-177">HTML-Hilfsmethoden sind hilfreich beim Schutz von unserem Anzeigecode, präziser und besser lesbar.</span><span class="sxs-lookup"><span data-stu-id="2627a-177">HTML Helpers are very useful in keeping our view code concise and readable.</span></span> <span data-ttu-id="2627a-178">Das Hilfsprogramm Html.DropDownList wird von ASP.NET MVC bereitgestellt, wie wir später sehen werden es ist jedoch möglich, eigene Hilfsprogramme für Ansichtscode zu erstellen, die wir in unserer Anwendung wiederverwendet werden.</span><span class="sxs-lookup"><span data-stu-id="2627a-178">The Html.DropDownList helper is provided by ASP.NET MVC, but as we'll see later it's possible to create our own helpers for view code we'll reuse in our application.</span></span>

<span data-ttu-id="2627a-179">Der Aufruf Html.DropDownList muss lediglich zwei Dinge: mitgeteilt werden, wenn zum Abrufen der Liste aus, um anzuzeigen, und welchen Nutzen (sofern vorhanden) vorab ausgewählt werden soll.</span><span class="sxs-lookup"><span data-stu-id="2627a-179">The Html.DropDownList call just needs to be told two things - where to get the list to display, and what value (if any) should be pre-selected.</span></span> <span data-ttu-id="2627a-180">Der erste Parameter, GenreId, teilt der Dropdownliste einen Wert, der mit dem Namen GenreId im Modell oder "ViewBag" gesucht.</span><span class="sxs-lookup"><span data-stu-id="2627a-180">The first parameter, GenreId, tells the DropDownList to look for a value named GenreId in either the model or ViewBag.</span></span> <span data-ttu-id="2627a-181">Der zweite Parameter wird verwendet, an den Wert aus, um anzuzeigen, wie es ursprünglich in der Dropdownliste ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="2627a-181">The second parameter is used to indicate the value to show as initially selected in the drop down list.</span></span> <span data-ttu-id="2627a-182">Da diese Form einen erstellen-Form ist, wird kein Wert vorab ausgewählten sein, und es wird String.Empty übergeben.</span><span class="sxs-lookup"><span data-stu-id="2627a-182">Since this form is a Create form, there's no value to be preselected and String.Empty is passed.</span></span>

### <a name="handling-the-posted-form-values"></a><span data-ttu-id="2627a-183">Umgang mit den Werten Formular gesendet</span><span class="sxs-lookup"><span data-stu-id="2627a-183">Handling the Posted Form values</span></span>

<span data-ttu-id="2627a-184">Wie bereits erwähnt, gibt es zwei Aktionsmethoden, die jedes Formular zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="2627a-184">As we discussed before, there are two action methods associated with each form.</span></span> <span data-ttu-id="2627a-185">Der erste verarbeitet die HTTP-GET-Anforderung und zeigt das Formular.</span><span class="sxs-lookup"><span data-stu-id="2627a-185">The first handles the HTTP-GET request and displays the form.</span></span> <span data-ttu-id="2627a-186">Die zweite behandelt, die HTTP-POST-Anforderung, die die übermittelten Formularwerte enthält.</span><span class="sxs-lookup"><span data-stu-id="2627a-186">The second handles the HTTP-POST request, which contains the submitted form values.</span></span> <span data-ttu-id="2627a-187">Beachten Sie, dass die Controlleraktion verfügt über ein [HttpPost]-Attribut, das ASP.NET MVC teilt mit, dass es nur auf HTTP-POST-Anforderungen reagieren soll.</span><span class="sxs-lookup"><span data-stu-id="2627a-187">Notice that controller action has an [HttpPost] attribute, which tells ASP.NET MVC that it should only respond to HTTP-POST requests.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample9.cs)]

<span data-ttu-id="2627a-188">Diese Aktion hat vier Aufgaben:</span><span class="sxs-lookup"><span data-stu-id="2627a-188">This action has four responsibilities:</span></span>

- 1. <span data-ttu-id="2627a-189">Lesen Sie die Formularwerte</span><span class="sxs-lookup"><span data-stu-id="2627a-189">Read the form values</span></span>
- 2. <span data-ttu-id="2627a-190">Überprüfen Sie, ob die Formularwerte alle Überprüfungsregeln zu erfüllen</span><span class="sxs-lookup"><span data-stu-id="2627a-190">Check if the form values pass any validation rules</span></span>
- 3. <span data-ttu-id="2627a-191">Wenn die Übermittlung des Formulars gültig ist, speichern Sie die Daten, und zeigen Sie die aktualisierte Liste</span><span class="sxs-lookup"><span data-stu-id="2627a-191">If the form submission is valid, save the data and display the updated list</span></span>
- 4. <span data-ttu-id="2627a-192">Wenn die Übermittlung des Formulars nicht gültig ist, erneut anzuzeigen Sie das Formular mit Validierungsfehlern.</span><span class="sxs-lookup"><span data-stu-id="2627a-192">If the form submission is not valid, redisplay the form with validation errors</span></span>

#### <a name="reading-form-values-with-model-binding"></a><span data-ttu-id="2627a-193">Lesen der Formularwerte mit Modellbindung</span><span class="sxs-lookup"><span data-stu-id="2627a-193">Reading Form Values with Model Binding</span></span>

<span data-ttu-id="2627a-194">Die Controlleraktion wird eine formularübertragung verarbeitet, die Werte für GenreId und ArtistId (aus der Dropdown-Liste) und Textbox-Werte für Titel, Preis und AlbumArtUrl enthält.</span><span class="sxs-lookup"><span data-stu-id="2627a-194">The controller action is processing a form submission that includes values for GenreId and ArtistId (from the drop down list) and textbox values for Title, Price, and AlbumArtUrl.</span></span> <span data-ttu-id="2627a-195">Es ist, zwar möglich, direkt auf Formularwerte zugreifen ist ein besserer Ansatz zum Verwenden der Modellbindung-Funktionen in ASP.NET MVC integriert.</span><span class="sxs-lookup"><span data-stu-id="2627a-195">While it's possible to directly access form values, a better approach is to use the Model Binding capabilities built into ASP.NET MVC.</span></span> <span data-ttu-id="2627a-196">Wenn eine Controlleraktion einen Modelltyp als Parameter akzeptiert, versucht ASP.NET MVC, ein Objekt dieses Typs mit formeingaben (sowie Routen- und Querystring-Werte) zu füllen.</span><span class="sxs-lookup"><span data-stu-id="2627a-196">When a controller action takes a model type as a parameter, ASP.NET MVC will attempt to populate an object of that type using form inputs (as well as route and querystring values).</span></span> <span data-ttu-id="2627a-197">Dies geschieht durch die Suche nach Werten, deren Namen entsprechen die Eigenschaften des Model-Objekts, z. B. Wenn Sie den neuen Albums Wert des Objekts GenreId festlegen zu können, sieht Sie für eine Eingabe mit dem Namen GenreId.</span><span class="sxs-lookup"><span data-stu-id="2627a-197">It does this by looking for values whose names match properties of the model object, e.g. when setting the new Album object's GenreId value, it looks for an input with the name GenreId.</span></span> <span data-ttu-id="2627a-198">Beim Erstellen von Ansichten, die mit den standard-Methoden in ASP.NET MVC, werden die Formulare immer mithilfe von Eigenschaftsnamen als Eingabe Feldnamen, daher dies die Feldnamen nur, Sie überein werden gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="2627a-198">When you create views using the standard methods in ASP.NET MVC, the forms will always be rendered using property names as input field names, so this the field names will just match up.</span></span>

#### <a name="validating-the-model"></a><span data-ttu-id="2627a-199">Beim Validieren des Modells</span><span class="sxs-lookup"><span data-stu-id="2627a-199">Validating the Model</span></span>

<span data-ttu-id="2627a-200">Das Modell wird durch einen einfachen Aufruf ModelState.IsValid überprüft.</span><span class="sxs-lookup"><span data-stu-id="2627a-200">The model is validated with a simple call to ModelState.IsValid.</span></span> <span data-ttu-id="2627a-201">Wir noch keine Validierungsregeln auf unsere Klasse Album hinzugefügt noch - machen wir, die in ein wenig – also jetzt diese Überprüfung viel zu tun haben nicht.</span><span class="sxs-lookup"><span data-stu-id="2627a-201">We haven't added any validation rules to our Album class yet - we'll do that in a bit - so right now this check doesn't have much to do.</span></span> <span data-ttu-id="2627a-202">Wichtig ist, dass diese Überprüfung ModelStat.IsValid den Validierungsregeln anpassen, den wir in unserem Modell ein, damit zukünftige Änderungen an der Validierungsregeln keine Updates für den Controller Aktionscode erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="2627a-202">What's important is that this ModelStat.IsValid check will adapt to the validation rules we put on our model, so future changes to validation rules won't require any updates to the controller action code.</span></span>

#### <a name="saving-the-submitted-values"></a><span data-ttu-id="2627a-203">Speichern die übermittelten Werten</span><span class="sxs-lookup"><span data-stu-id="2627a-203">Saving the submitted values</span></span>

<span data-ttu-id="2627a-204">Wenn die Übermittlung des Formulars die Validierung erfolgreich war, ist es Zeit, die Werte in der Datenbank zu speichern.</span><span class="sxs-lookup"><span data-stu-id="2627a-204">If the form submission passes validation, it's time to save the values to the database.</span></span> <span data-ttu-id="2627a-205">Mit Entity Framework erfordert, dass nur das Modell der Alben-Auflistung hinzugefügt und "SaveChanges" aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="2627a-205">With Entity Framework, that just requires adding the model to the Albums collection and calling SaveChanges.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample10.cs)]

<span data-ttu-id="2627a-206">Entitätsframework generiert die entsprechenden SQL-Befehle aus, den Wert persistent speichern.</span><span class="sxs-lookup"><span data-stu-id="2627a-206">Entity Framework generates the appropriate SQL commands to persist the value.</span></span> <span data-ttu-id="2627a-207">Nach dem Speichern der das, leiten wir zurück zur Liste der Alben, damit wir unsere Update sehen können.</span><span class="sxs-lookup"><span data-stu-id="2627a-207">After saving the data, we redirect back to the list of Albums so we can see our update.</span></span> <span data-ttu-id="2627a-208">Dies erfolgt durch RedirectToAction zurückgeben, mit dem Namen der Controlleraktion, die wir angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="2627a-208">This is done by returning RedirectToAction with the name of the controller action we want displayed.</span></span> <span data-ttu-id="2627a-209">In diesem Fall ist, die Index-Methode.</span><span class="sxs-lookup"><span data-stu-id="2627a-209">In this case, that's the Index method.</span></span>

#### <a name="displaying-invalid-form-submissions-with-validation-errors"></a><span data-ttu-id="2627a-210">Ungültige Formularübermittlung mit Validierungsfehlern anzeigen</span><span class="sxs-lookup"><span data-stu-id="2627a-210">Displaying invalid form submissions with Validation Errors</span></span>

<span data-ttu-id="2627a-211">Im Fall von ungültigen Eingaben die Dropdownliste Werte hinzugefügt, die ViewBag-Klasse (wie im Fall des HTTP-GET), und die gebundene Modell-Werte werden zurück an die Ansicht übergeben, für die Anzeige.</span><span class="sxs-lookup"><span data-stu-id="2627a-211">In the case of invalid form input, the dropdown values are added to the ViewBag (as in the HTTP-GET case) and the bound model values are passed back to the view for display.</span></span> <span data-ttu-id="2627a-212">Validierungsfehler werden automatisch angezeigt, mit der @Html.ValidationMessageFor HTML-Hilfsobjekt.</span><span class="sxs-lookup"><span data-stu-id="2627a-212">Validation errors are automatically displayed using the @Html.ValidationMessageFor HTML Helper.</span></span>

#### <a name="testing-the-create-form"></a><span data-ttu-id="2627a-213">Testen das Formular erstellen</span><span class="sxs-lookup"><span data-stu-id="2627a-213">Testing the Create Form</span></span>

<span data-ttu-id="2627a-214">Dies out, führen Sie testen die Anwendung und navigieren Sie zu /StoreManager/erstellen / - zeigt leere Formular an, der von der StoreController erstellen HTTP-GET-Methode zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="2627a-214">To test this out, run the application and browse to /StoreManager/Create/ - this will show you the blank form which was returned by the StoreController Create HTTP-GET method.</span></span>

<span data-ttu-id="2627a-215">Geben Sie einige Werte aus, und klicken Sie auf die Schaltfläche "erstellen", um das Formular übermitteln.</span><span class="sxs-lookup"><span data-stu-id="2627a-215">Fill in some values and click the Create button to submit the form.</span></span>

![](mvc-music-store-part-5/_static/image7.png)

![](mvc-music-store-part-5/_static/image8.png)

### <a name="handling-edits"></a><span data-ttu-id="2627a-216">Behandeln von Änderungen</span><span class="sxs-lookup"><span data-stu-id="2627a-216">Handling Edits</span></span>

<span data-ttu-id="2627a-217">Das Bearbeiten-Aktion-Paar (HTTP-GET und HTTP-POST) sind sehr ähnlich ist, auf die Aktionsmethoden erstellen, die, denen wir uns gerade angesehen haben.</span><span class="sxs-lookup"><span data-stu-id="2627a-217">The Edit action pair (HTTP-GET and HTTP-POST) are very similar to the Create action methods we just looked at.</span></span> <span data-ttu-id="2627a-218">Da das Szenario bearbeiten, arbeiten mit einem vorhandenen Album, den bearbeiten HTTP-GET umfasst Methode das Album auf Grundlage des Parameters "Id" lädt übergebenen über die Route.</span><span class="sxs-lookup"><span data-stu-id="2627a-218">Since the edit scenario involves working with an existing album, the Edit HTTP-GET method loads the Album based on the "id" parameter, passed in via the route.</span></span> <span data-ttu-id="2627a-219">Dieser Code zum Abrufen eines Albums von AlbumId entspricht dem wir zuvor in die Details-Controlleraktion erläutert habe.</span><span class="sxs-lookup"><span data-stu-id="2627a-219">This code for retrieving an album by AlbumId is the same as we've previously looked at in the Details controller action.</span></span> <span data-ttu-id="2627a-220">Wie bei der Create / HTTP-GET-Methode, die Dropdown-Werte werden über die ViewBag-Klasse zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="2627a-220">As with the Create / HTTP-GET method, the drop down values are returned via the ViewBag.</span></span> <span data-ttu-id="2627a-221">Dadurch können wir ein Album als unsere Model-Objekts an die Ansicht zurückgegeben (die auf dem Album-Klasse stark typisiert ist) beim Übergeben von zusätzlicher Daten (z. B. eine Liste der Genres) über die ViewBag-Klasse.</span><span class="sxs-lookup"><span data-stu-id="2627a-221">This allows us to return an Album as our model object to the view (which is strongly typed to the Album class) while passing additional data (e.g. a list of Genres) via the ViewBag.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample11.cs)]

<span data-ttu-id="2627a-222">Die Bearbeiten von HTTP-POST-Aktion ist sehr ähnlich ist, auf die Aktion des HTTP-POST erstellen.</span><span class="sxs-lookup"><span data-stu-id="2627a-222">The Edit HTTP-POST action is very similar to the Create HTTP-POST action.</span></span> <span data-ttu-id="2627a-223">Der einzige Unterschied ist, die anstelle der Datenbank ein neues Album hinzugefügt. Sammlung von Alben, wir die aktuelle Instanz des Albums schwierigkeiten mit Db. Entry(Album) und seinen Zustand auf "geändert".</span><span class="sxs-lookup"><span data-stu-id="2627a-223">The only difference is that instead of adding a new album to the db.Albums collection, we're finding the current instance of the Album using db.Entry(album) and setting its state to Modified.</span></span> <span data-ttu-id="2627a-224">Dies weist Entity Framework, dass wir zum Ändern eines vorhandenen Albums statt einen neuen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2627a-224">This tells Entity Framework that we are modifying an existing album as opposed to creating a new one.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample12.cs)]

<span data-ttu-id="2627a-225">Wir können dies sich durch Ausführen der Anwendung zu/StoreManger/navigieren, und klicken Sie auf den Link "Bearbeiten" für ein Album testen.</span><span class="sxs-lookup"><span data-stu-id="2627a-225">We can test this out by running the application and browsing to /StoreManger/, then clicking the Edit link for an album.</span></span>

![](mvc-music-store-part-5/_static/image9.png)

<span data-ttu-id="2627a-226">Dadurch werden das Bearbeitungsformular angezeigt, indem Sie das Bearbeiten von HTTP-GET-Methode angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-226">This displays the Edit form shown by the Edit HTTP-GET method.</span></span> <span data-ttu-id="2627a-227">Geben Sie einige Werte aus, und klicken Sie auf die Schaltfläche "Speichern".</span><span class="sxs-lookup"><span data-stu-id="2627a-227">Fill in some values and click the Save button.</span></span>

![](mvc-music-store-part-5/_static/image10.png)

<span data-ttu-id="2627a-228">Dies das Formular sendet, speichert die Werte und gibt uns zur Album-Liste angezeigt, dass die Werte aktualisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="2627a-228">This posts the form, saves the values, and returns us to the Album list, showing that the values were updated.</span></span>

![](mvc-music-store-part-5/_static/image11.png)

### <a name="handling-deletion"></a><span data-ttu-id="2627a-229">Löschung verarbeiten</span><span class="sxs-lookup"><span data-stu-id="2627a-229">Handling Deletion</span></span>

<span data-ttu-id="2627a-230">Löschen von folgt demselben Muster wie bearbeiten und erstellen, verwenden eine Controlleraktion auf das Bestätigungsformular zur anzuzeigen, und einer anderen Controlleraktion, die Übermittlung des Formulars zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="2627a-230">Deletion follows the same pattern as Edit and Create, using one controller action to display the confirmation form, and another controller action to handle the form submission.</span></span>

<span data-ttu-id="2627a-231">Die Delete HTTP-GET-Controlleraktion entspricht genau unseren vorherigen zu der Store Manager-Controlleraktion.</span><span class="sxs-lookup"><span data-stu-id="2627a-231">The HTTP-GET Delete controller action is exactly the same as our previous Store Manager Details controller action.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample13.cs)]

<span data-ttu-id="2627a-232">Ein Formular, das stark typisiert ist auf einen Album-Typ, der mit den Inhalt der Vorlage löschen Ansicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-232">We display a form that's strongly typed to an Album type, using the Delete view content template.</span></span>

![](mvc-music-store-part-5/_static/image12.png)

<span data-ttu-id="2627a-233">Die Delete-Vorlage zeigt alle Felder für das Modell, aber wir können diese nach unten etwas vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="2627a-233">The Delete template shows all the fields for the model, but we can simplify that down quite a bit.</span></span> <span data-ttu-id="2627a-234">Ändern Sie den Anzeigen von Code in /Views/StoreManager/Delete.cshtml folgt.</span><span class="sxs-lookup"><span data-stu-id="2627a-234">Change the view code in /Views/StoreManager/Delete.cshtml to the following.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample14.cshtml)]

<span data-ttu-id="2627a-235">Eine vereinfachte Delete-Bestätigung wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-235">This displays a simplified Delete confirmation.</span></span>

![](mvc-music-store-part-5/_static/image13.png)

<span data-ttu-id="2627a-236">Klicken Sie auf die Schaltfläche "löschen" bewirkt, dass das Formular wieder an den Server bereitgestellt werden, führt die Aktion "deleteconfirmed".</span><span class="sxs-lookup"><span data-stu-id="2627a-236">Clicking the Delete button causes the form to be posted back to the server, which executes the DeleteConfirmed action.</span></span>

[!code-csharp[Main](mvc-music-store-part-5/samples/sample15.cs)]

<span data-ttu-id="2627a-237">Unsere HTTP-POST löschen Controlleraktion führt die folgenden Aktionen:</span><span class="sxs-lookup"><span data-stu-id="2627a-237">Our HTTP-POST Delete Controller Action takes the following actions:</span></span>

- 1. <span data-ttu-id="2627a-238">Lädt das Album nach ID</span><span class="sxs-lookup"><span data-stu-id="2627a-238">Loads the Album by ID</span></span>
- 2. <span data-ttu-id="2627a-239">Das Album gelöscht, und Speichern von Änderungen</span><span class="sxs-lookup"><span data-stu-id="2627a-239">Deletes it the album and save changes</span></span>
- 3. <span data-ttu-id="2627a-240">Umleitungen auf den Index, der anzeigt, dass das Album aus der Liste entfernt wurde</span><span class="sxs-lookup"><span data-stu-id="2627a-240">Redirects to the Index, showing that the Album was removed from the list</span></span>

<span data-ttu-id="2627a-241">Um dies zu testen, führen Sie die Anwendung aus, und navigieren Sie zu /StoreManager.</span><span class="sxs-lookup"><span data-stu-id="2627a-241">To test this, run the application and browse to /StoreManager.</span></span> <span data-ttu-id="2627a-242">Wählen Sie ein Album aus der Liste aus, und klicken Sie auf den Link "löschen".</span><span class="sxs-lookup"><span data-stu-id="2627a-242">Select an album from the list and click the Delete link.</span></span>

![](mvc-music-store-part-5/_static/image14.png)

<span data-ttu-id="2627a-243">Dadurch werden unsere löschen Bestätigungsbildschirm angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-243">This displays our Delete confirmation screen.</span></span>

![](mvc-music-store-part-5/_static/image15.png)

<span data-ttu-id="2627a-244">Klicken Sie auf die Schaltfläche "löschen" das Album entfernt und zu dem die Store Manager-Indexseite, der anzeigt, dass das Album gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="2627a-244">Clicking the Delete button removes the album and returns us to the Store Manager Index page, which shows that the album has been deleted.</span></span>

![](mvc-music-store-part-5/_static/image16.png)

### <a name="using-a-custom-html-helper-to-truncate-text"></a><span data-ttu-id="2627a-245">Verwenden einer benutzerdefinierten HTML-Hilfsmethoden zum Abschneiden von text</span><span class="sxs-lookup"><span data-stu-id="2627a-245">Using a custom HTML Helper to truncate text</span></span>

<span data-ttu-id="2627a-246">Wir haben ein mögliches Problem mit unserem Store Manager-Indexseite.</span><span class="sxs-lookup"><span data-stu-id="2627a-246">We've got one potential issue with our Store Manager Index page.</span></span> <span data-ttu-id="2627a-247">Unsere Albumtitel und Namen der Interpreten Eigenschaften können sowohl lang genug sein, dass sie aus unseren tabellenformatierung auslösen könnte.</span><span class="sxs-lookup"><span data-stu-id="2627a-247">Our Album Title and Artist Name properties can both be long enough that they could throw off our table formatting.</span></span> <span data-ttu-id="2627a-248">Wir erstellen eine benutzerdefinierte HTML-Hilfsfunktion, um uns diese und andere Eigenschaften in unserem Ansichten problemlos Abschneiden zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="2627a-248">We'll create a custom HTML Helper to allow us to easily truncate these and other properties in our Views.</span></span>

![](mvc-music-store-part-5/_static/image17.png)

<span data-ttu-id="2627a-249">Razor @helper Syntax hat es recht einfach, Ihre eigenen Hilfsfunktionen für die Verwendung in Ihren Ansichten zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="2627a-249">Razor's @helper syntax has made it pretty easy to create your own helper functions for use in your views.</span></span> <span data-ttu-id="2627a-250">Öffnen Sie die Ansicht /Views/StoreManager/Index.cshtml, und fügen Sie den folgenden Code direkt nach der @model Zeile.</span><span class="sxs-lookup"><span data-stu-id="2627a-250">Open the /Views/StoreManager/Index.cshtml view and add the following code directly after the @model line.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample16.cshtml)]

<span data-ttu-id="2627a-251">Diese Hilfsmethode akzeptiert eine Zeichenfolge und einer maximalen Länge, um zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="2627a-251">This helper method takes a string and a maximum length to allow.</span></span> <span data-ttu-id="2627a-252">Wenn der angegebene Text kürzer als die Länge angegeben ist, das Hilfsprogramm gibt es als-ist.</span><span class="sxs-lookup"><span data-stu-id="2627a-252">If the text supplied is shorter than the length specified, the helper outputs it as-is.</span></span> <span data-ttu-id="2627a-253">Wenn es länger ist, klicken Sie dann kürzt den Text und rendert "...", für den Rest.</span><span class="sxs-lookup"><span data-stu-id="2627a-253">If it is longer, then it truncates the text and renders "…" for the remainder.</span></span>

<span data-ttu-id="2627a-254">Jetzt können wir unsere Truncate-Hilfsprogramm verwenden, um sicherzustellen, dass die Albumtitel und den Namen der Interpreten Eigenschaften weniger als 25 Zeichen sind.</span><span class="sxs-lookup"><span data-stu-id="2627a-254">Now we can use our Truncate helper to ensure that both the Album Title and Artist Name properties are less than 25 characters.</span></span> <span data-ttu-id="2627a-255">Die vollständige Ansichtscode mit unserem neuen Truncate-Hilfe wird unten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-255">The complete view code using our new Truncate helper appears below.</span></span>

[!code-cshtml[Main](mvc-music-store-part-5/samples/sample17.cshtml)]

<span data-ttu-id="2627a-256">Jetzt Wenn wir die /StoreManager/ URL navigieren, werden die Alben und Titel unten unsere maximale Länge gespeichert.</span><span class="sxs-lookup"><span data-stu-id="2627a-256">Now when we browse the /StoreManager/ URL, the albums and titles are kept below our maximum lengths.</span></span>

![](mvc-music-store-part-5/_static/image18.png)

<span data-ttu-id="2627a-257">Hinweis: Erstellen und Verwenden eines Hilfsprogramms in einer Ansicht ein einfachen Vorgang angezeigt.</span><span class="sxs-lookup"><span data-stu-id="2627a-257">Note: This shows the simple case of creating and using a helper in one view.</span></span> <span data-ttu-id="2627a-258">Weitere Informationen finden Sie Informationen zum Erstellen von Hilfsprogrammen, die Sie innerhalb der gesamten Website verwenden können, finden Sie in meinem Blogbeitrag: [http://bit.ly/mvc3-helper-options](http://bit.ly/mvc3-helper-options)</span><span class="sxs-lookup"><span data-stu-id="2627a-258">To learn more about creating helpers that you can use throughout your site, see my blog post: [http://bit.ly/mvc3-helper-options](http://bit.ly/mvc3-helper-options)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="2627a-259">[Zurück](mvc-music-store-part-4.md)
> [Weiter](mvc-music-store-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="2627a-259">[Previous](mvc-music-store-part-4.md)
[Next](mvc-music-store-part-6.md)</span></span>
