---
uid: signalr/overview/guide-to-the-api/working-with-groups
title: Arbeiten mit Gruppen in signalr | Microsoft-Dokumentation
author: bradygaster
description: In diesem Thema wird beschrieben, wie Sie Gruppen Mitgliedschafts Informationen mit der Hub-API beibehalten.
ms.author: bradyg
ms.date: 06/10/2014
ms.assetid: cd378ecd-3e9e-4236-b902-65916d85a048
msc.legacyurl: /signalr/overview/guide-to-the-api/working-with-groups
msc.type: authoredcontent
ms.openlocfilehash: 46dd952fc4902b37c981a111dfa344dad79bb668
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78450081"
---
# <a name="working-with-groups-in-signalr"></a><span data-ttu-id="f4265-103">Arbeiten mit Gruppen in SignalR</span><span class="sxs-lookup"><span data-stu-id="f4265-103">Working with Groups in SignalR</span></span>

<span data-ttu-id="f4265-104">von [Patrick Fletcher](https://github.com/pfletcher), [Tom fitzmacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="f4265-104">by [Patrick Fletcher](https://github.com/pfletcher), [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> <span data-ttu-id="f4265-105">In diesem Thema wird beschrieben, wie Benutzer zu Gruppen hinzugefügt und Gruppen Mitgliedschafts Informationen persistent gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="f4265-105">This topic describes how to add users to groups and persist group membership information.</span></span>
>
> ## <a name="software-versions-used-in-this-topic"></a><span data-ttu-id="f4265-106">In diesem Thema verwendete Software Versionen</span><span class="sxs-lookup"><span data-stu-id="f4265-106">Software versions used in this topic</span></span>
>
>
> - [<span data-ttu-id="f4265-107">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="f4265-107">Visual Studio 2013</span></span>](https://my.visualstudio.com/Downloads?q=visual%20studio%202013)
> - <span data-ttu-id="f4265-108">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="f4265-108">.NET 4.5</span></span>
> - <span data-ttu-id="f4265-109">Signalr Version 2</span><span class="sxs-lookup"><span data-stu-id="f4265-109">SignalR version 2</span></span>
>
>
>
> ## <a name="previous-versions-of-this-topic"></a><span data-ttu-id="f4265-110">Vorherige Versionen dieses Themas</span><span class="sxs-lookup"><span data-stu-id="f4265-110">Previous versions of this topic</span></span>
>
> <span data-ttu-id="f4265-111">Informationen zu früheren Versionen von signalr finden Sie unter [signalr ältere Versionen](../older-versions/index.md).</span><span class="sxs-lookup"><span data-stu-id="f4265-111">For information about earlier versions of SignalR, see [SignalR Older Versions](../older-versions/index.md).</span></span>
>
> ## <a name="questions-and-comments"></a><span data-ttu-id="f4265-112">Fragen und Kommentare</span><span class="sxs-lookup"><span data-stu-id="f4265-112">Questions and comments</span></span>
>
> <span data-ttu-id="f4265-113">Bitte informieren Sie sich darüber, wie Ihnen dieses Tutorial gefallen hat und was wir in den Kommentaren unten auf der Seite verbessern konnten.</span><span class="sxs-lookup"><span data-stu-id="f4265-113">Please leave feedback on how you liked this tutorial and what we could improve in the comments at the bottom of the page.</span></span> <span data-ttu-id="f4265-114">Wenn Sie Fragen haben, die nicht direkt mit dem Tutorial zusammenhängen, können Sie Sie im [ASP.net signalr-Forum](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) oder in [StackOverflow.com](http://stackoverflow.com/)veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="f4265-114">If you have questions that are not directly related to the tutorial, you can post them to the [ASP.NET SignalR forum](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) or [StackOverflow.com](http://stackoverflow.com/).</span></span>

## <a name="overview"></a><span data-ttu-id="f4265-115">Übersicht</span><span class="sxs-lookup"><span data-stu-id="f4265-115">Overview</span></span>

<span data-ttu-id="f4265-116">Gruppen in signalr bieten eine Methode zum Senden von Nachrichten an bestimmte Teilmengen verbundener Clients.</span><span class="sxs-lookup"><span data-stu-id="f4265-116">Groups in SignalR provide a method for broadcasting messages to specified subsets of connected clients.</span></span> <span data-ttu-id="f4265-117">Eine Gruppe kann über eine beliebige Anzahl von Clients verfügen, und ein Client kann Mitglied einer beliebigen Anzahl von Gruppen sein.</span><span class="sxs-lookup"><span data-stu-id="f4265-117">A group can have any number of clients, and a client can be a member of any number of groups.</span></span> <span data-ttu-id="f4265-118">Sie müssen nicht explizit Gruppen erstellen.</span><span class="sxs-lookup"><span data-stu-id="f4265-118">You don't have to explicitly create groups.</span></span> <span data-ttu-id="f4265-119">Eine Gruppe wird automatisch erstellt, wenn Sie Ihren Namen zum ersten Mal in einem Aufruf von Gruppen angeben. hinzufügen. Sie wird gelöscht, wenn Sie die letzte Verbindung aus der Mitgliedschaft entfernen.</span><span class="sxs-lookup"><span data-stu-id="f4265-119">In effect, a group is automatically created the first time you specify its name in a call to Groups.Add, and it is deleted when you remove the last connection from membership in it.</span></span> <span data-ttu-id="f4265-120">Eine Einführung in die Verwendung von Gruppen finden Sie unter [Verwalten der Gruppenmitgliedschaft von der Hub-Klasse](hubs-api-guide-server.md#groupsfromhub) im Leitfaden "Hubs API-Server".</span><span class="sxs-lookup"><span data-stu-id="f4265-120">For an introduction to using groups, see [How to manage group membership from the Hub class](hubs-api-guide-server.md#groupsfromhub) in the Hubs API - Server Guide.</span></span>

<span data-ttu-id="f4265-121">Es ist keine API zum erhalten einer Gruppen Mitgliedschafts Liste oder einer Liste von Gruppen vorhanden.</span><span class="sxs-lookup"><span data-stu-id="f4265-121">There is no API for getting a group membership list or a list of groups.</span></span> <span data-ttu-id="f4265-122">Signalr sendet Nachrichten auf der Grundlage eines Pub/Sub-Modells an Clients und Gruppen, und der Server verwaltet keine Listen mit Gruppen oder Gruppenmitgliedschaften.</span><span class="sxs-lookup"><span data-stu-id="f4265-122">SignalR sends messages to clients and groups based on a pub/sub model, and the server does not maintain lists of groups or group memberships.</span></span> <span data-ttu-id="f4265-123">Dadurch wird die Skalierbarkeit maximiert, denn wenn Sie einer Webfarm einen Knoten hinzufügen, muss jeder Status, den signalr beibehält, an den neuen Knoten weitergegeben werden.</span><span class="sxs-lookup"><span data-stu-id="f4265-123">This helps maximize scalability, because whenever you add a node to a web farm, any state that SignalR maintains has to be propagated to the new node.</span></span>

<span data-ttu-id="f4265-124">Wenn Sie mit der `Groups.Add`-Methode einen Benutzer zu einer Gruppe hinzufügen, empfängt der Benutzer die Nachrichten, die für die Dauer der aktuellen Verbindung an diese Gruppe weitergeleitet werden. die Mitgliedschaft der Benutzer in dieser Gruppe wird jedoch nicht über die aktuelle Verbindung hinaus beibehalten.</span><span class="sxs-lookup"><span data-stu-id="f4265-124">When you add a user to a group using the `Groups.Add` method, the user receives messages directed to that group for the duration of the current connection, but the user's membership in that group is not persisted beyond the current connection.</span></span> <span data-ttu-id="f4265-125">Wenn Sie Informationen zu Gruppen und Gruppenmitgliedschaften dauerhaft beibehalten möchten, müssen Sie diese Daten in einem Repository speichern, z. b. in einer Datenbank oder in einem Azure-Tabellen Speicher.</span><span class="sxs-lookup"><span data-stu-id="f4265-125">If you want to permanently retain information about groups and group membership, you must store that data in a repository such as a database or Azure table storage.</span></span> <span data-ttu-id="f4265-126">Jedes Mal, wenn ein Benutzer eine Verbindung mit der Anwendung herstellt, rufen Sie aus dem Repository ab, zu dem der Benutzer gehört, und fügen diesen Benutzer manuell zu diesen Gruppen hinzu.</span><span class="sxs-lookup"><span data-stu-id="f4265-126">Then, each time a user connects to your application, you retrieve from the repository which groups the user belongs to, and manually add that user to those groups.</span></span>

<span data-ttu-id="f4265-127">Wenn die Verbindung nach einer temporären Unterbrechung wieder hergestellt wird, wird der Benutzer automatisch erneut mit den zuvor zugewiesenen Gruppen verbunden.</span><span class="sxs-lookup"><span data-stu-id="f4265-127">When reconnecting after a temporary disruption, the user automatically re-joins the previously-assigned groups.</span></span> <span data-ttu-id="f4265-128">Das automatische erneute beitreten zu einer Gruppe gilt nur beim erneuten Herstellen der Verbindung, nicht beim Herstellen einer neuen Verbindung.</span><span class="sxs-lookup"><span data-stu-id="f4265-128">Automatically rejoining a group only applies when reconnecting, not when establishing a new connection.</span></span> <span data-ttu-id="f4265-129">Ein digital signiertes Token wird vom Client übermittelt, der die Liste der zuvor zugewiesenen Gruppen enthält.</span><span class="sxs-lookup"><span data-stu-id="f4265-129">A digitally-signed token is passed from the client that contains the list of previously-assigned groups.</span></span> <span data-ttu-id="f4265-130">Wenn Sie überprüfen möchten, ob der Benutzer zu den angeforderten Gruppen gehört, können Sie das Standardverhalten überschreiben.</span><span class="sxs-lookup"><span data-stu-id="f4265-130">If you want to verify whether the user belongs to the requested groups, you can override the default behavior.</span></span>

<span data-ttu-id="f4265-131">Dieses Thema enthält die folgenden Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="f4265-131">This topic includes the following sections:</span></span>

- [<span data-ttu-id="f4265-132">Hinzufügen und Entfernen von Benutzern</span><span class="sxs-lookup"><span data-stu-id="f4265-132">Adding and removing users</span></span>](#add)
- [<span data-ttu-id="f4265-133">Aufrufen von Mitgliedern einer Gruppe</span><span class="sxs-lookup"><span data-stu-id="f4265-133">Calling members of a group</span></span>](#call)
- [<span data-ttu-id="f4265-134">Speichern von Gruppenmitgliedschaften in einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="f4265-134">Storing group membership in a database</span></span>](#storedatabase)
- [<span data-ttu-id="f4265-135">Speichern der Gruppenmitgliedschaft in Azure Table Storage</span><span class="sxs-lookup"><span data-stu-id="f4265-135">Storing group membership in Azure table storage</span></span>](#storeazuretable)
- [<span data-ttu-id="f4265-136">Überprüfen der Gruppenmitgliedschaft beim erneuten Herstellen der Verbindung</span><span class="sxs-lookup"><span data-stu-id="f4265-136">Verifying group membership when reconnecting</span></span>](#verify)

<a id="add"></a>

## <a name="adding-and-removing-users"></a><span data-ttu-id="f4265-137">Hinzufügen und Entfernen von Benutzern</span><span class="sxs-lookup"><span data-stu-id="f4265-137">Adding and removing users</span></span>

<span data-ttu-id="f4265-138">Um Benutzer zu einer Gruppe hinzuzufügen oder daraus zu entfernen, müssen Sie die Methoden zum [Hinzufügen](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.igroupmanager.add(v=vs.111).aspx) oder [Entfernen](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.igroupmanager.remove(v=vs.111).aspx) aufzurufen und die Verbindungs-ID und den Gruppennamen des Benutzers als Parameter übergeben.</span><span class="sxs-lookup"><span data-stu-id="f4265-138">To add or remove users from a group, you call the [Add](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.igroupmanager.add(v=vs.111).aspx) or [Remove](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.igroupmanager.remove(v=vs.111).aspx) methods, and pass in the user's connection id and group's name as parameters.</span></span> <span data-ttu-id="f4265-139">Sie müssen einen Benutzer nicht manuell aus einer Gruppe entfernen, wenn die Verbindung beendet wird.</span><span class="sxs-lookup"><span data-stu-id="f4265-139">You do not need to manually remove a user from a group when the connection ends.</span></span>

<span data-ttu-id="f4265-140">Das folgende Beispiel zeigt die `Groups.Add`-und `Groups.Remove` Methoden, die in hubmethoden verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f4265-140">The following example shows the `Groups.Add` and `Groups.Remove` methods used in Hub methods.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample1.cs?highlight=5,10)]

<span data-ttu-id="f4265-141">Die Methoden `Groups.Add` und `Groups.Remove` werden asynchron ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f4265-141">The `Groups.Add` and `Groups.Remove` methods execute asynchronously.</span></span>

<span data-ttu-id="f4265-142">Wenn Sie einer Gruppe einen Client hinzufügen und sofort mithilfe der Gruppe eine Nachricht an den Client senden möchten, müssen Sie sicherstellen, dass die Methode "Groups. Add" zuerst abgeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="f4265-142">If you want to add a client to a group and immediately send a message to the client by using the group, you have to make sure that the Groups.Add method finishes first.</span></span> <span data-ttu-id="f4265-143">In den folgenden Codebeispielen wird gezeigt, wie dies geschieht.</span><span class="sxs-lookup"><span data-stu-id="f4265-143">The following code examples show how to do that.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample2.cs?highlight=1,3)]

<span data-ttu-id="f4265-144">Im Allgemeinen sollten Sie `await` nicht einschließen, wenn Sie die `Groups.Remove`-Methode aufrufen, weil die Verbindungs-ID, die Sie entfernen möchten, möglicherweise nicht mehr verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="f4265-144">In general, you should not include `await` when calling the `Groups.Remove` method because the connection id that you are trying to remove might no longer be available.</span></span> <span data-ttu-id="f4265-145">In diesem Fall wird `TaskCanceledException` nach einem Timeout der Anforderung ausgelöst. Wenn die Anwendung sicherstellen muss, dass der Benutzer vor dem Senden einer Nachricht aus der Gruppe entfernt wurde, können Sie `await` vor `Groups.Remove`hinzufügen und dann die `TaskCanceledException` Ausnahme abfangen, die möglicherweise ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="f4265-145">In that case, `TaskCanceledException` is thrown after the request times out. If your application must ensure that the user has been removed from the group before sending a message to the group, you can add `await` before `Groups.Remove`, and then catch the `TaskCanceledException` exception that might be thrown.</span></span>

<a id="call"></a>

## <a name="calling-members-of-a-group"></a><span data-ttu-id="f4265-146">Aufrufen von Mitgliedern einer Gruppe</span><span class="sxs-lookup"><span data-stu-id="f4265-146">Calling members of a group</span></span>

<span data-ttu-id="f4265-147">Sie können Nachrichten an alle Mitglieder einer Gruppe oder nur an bestimmte Mitglieder der Gruppe senden, wie in den folgenden Beispielen gezeigt.</span><span class="sxs-lookup"><span data-stu-id="f4265-147">You can send messages to all of the members of a group or only specified members of the group, as shown in the following examples.</span></span>

- <span data-ttu-id="f4265-148">**Alle** verbundenen Clients in einer bestimmten Gruppe.</span><span class="sxs-lookup"><span data-stu-id="f4265-148">**All** connected clients in a specified group.</span></span>

    [!code-css[Main](working-with-groups/samples/sample3.css)]
- <span data-ttu-id="f4265-149">Alle verbundenen Clients in einer angegebenen Gruppe **mit Ausnahme der angegebenen Clients**, identifiziert durch die Verbindungs-ID.</span><span class="sxs-lookup"><span data-stu-id="f4265-149">All connected clients in a specified group **except the specified clients**, identified by connection ID.</span></span>

    [!code-csharp[Main](working-with-groups/samples/sample4.cs)]
- <span data-ttu-id="f4265-150">Alle verbundenen Clients in einer angegebenen Gruppe **mit Ausnahme des aufrufenden Clients**.</span><span class="sxs-lookup"><span data-stu-id="f4265-150">All connected clients in a specified group **except the calling client**.</span></span>

    [!code-css[Main](working-with-groups/samples/sample5.css)]

<a id="storedatabase"></a>

## <a name="storing-group-membership-in-a-database"></a><span data-ttu-id="f4265-151">Speichern von Gruppenmitgliedschaften in einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="f4265-151">Storing group membership in a database</span></span>

<span data-ttu-id="f4265-152">In den folgenden Beispielen wird gezeigt, wie Gruppen-und Benutzerinformationen in einer-Datenbank beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="f4265-152">The following examples show how to retain group and user information in a database.</span></span> <span data-ttu-id="f4265-153">Sie können beliebige Datenzugriffs Technologien verwenden; Das folgende Beispiel zeigt jedoch, wie Modelle mithilfe von Entity Framework definiert werden.</span><span class="sxs-lookup"><span data-stu-id="f4265-153">You can use any data access technology; however, the example below shows how to define models using Entity Framework.</span></span> <span data-ttu-id="f4265-154">Diese Entitäts Modelle entsprechen Datenbanktabellen und-Feldern.</span><span class="sxs-lookup"><span data-stu-id="f4265-154">These entity models correspond to database tables and fields.</span></span> <span data-ttu-id="f4265-155">Abhängig von den Anforderungen Ihrer Anwendung kann die Datenstruktur erheblich variieren.</span><span class="sxs-lookup"><span data-stu-id="f4265-155">Your data structure could vary considerably depending on the requirements of your application.</span></span> <span data-ttu-id="f4265-156">Dieses Beispiel enthält eine Klasse mit dem Namen `ConversationRoom`, die für eine Anwendung eindeutig ist, die es Benutzern ermöglicht, Konversationen über verschiedene Themen wie Sport oder Gärtnerei beizutreten.</span><span class="sxs-lookup"><span data-stu-id="f4265-156">This example includes a class named `ConversationRoom` which would be unique to an application that enables users to join conversations about different subjects, such as sports or gardening.</span></span> <span data-ttu-id="f4265-157">Dieses Beispiel enthält auch eine-Klasse für die-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="f4265-157">This example also includes a class for the connections.</span></span> <span data-ttu-id="f4265-158">Die Verbindungs Klasse ist für die Überwachung der Gruppenmitgliedschaft nicht unbedingt erforderlich, ist jedoch häufig Teil der robusten Lösung für die Nachverfolgung von Benutzern.</span><span class="sxs-lookup"><span data-stu-id="f4265-158">The connection class is not absolutely required for tracking group membership but is frequently part of robust solution to tracking users.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample6.cs)]

<span data-ttu-id="f4265-159">Anschließend können Sie im Hub die Gruppen-und Benutzerinformationen aus der Datenbank abrufen und den Benutzer manuell zu den entsprechenden Gruppen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="f4265-159">Then, in the hub, you can retrieve the group and user information from the database and manually add the user to the appropriate groups.</span></span> <span data-ttu-id="f4265-160">Das Beispiel enthält keinen Code zum Nachverfolgen der Benutzer Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="f4265-160">The example does not include code for tracking the user connections.</span></span> <span data-ttu-id="f4265-161">In diesem Beispiel wird das `await`-Schlüsselwort nicht vor `Groups.Add` angewendet, da eine Nachricht nicht sofort an Mitglieder der Gruppe gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="f4265-161">In this example, the `await` keyword is not applied before `Groups.Add` because a message is not immediately sent to members of the group.</span></span> <span data-ttu-id="f4265-162">Wenn Sie sofort nach dem Hinzufügen des neuen Members eine Nachricht an alle Mitglieder der Gruppe senden möchten, sollten Sie das `await`-Schlüsselwort anwenden, um sicherzustellen, dass der asynchrone Vorgang abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="f4265-162">If you want to send a message to all members of the group immediately after adding the new member, you would want to apply the `await` keyword to make sure the asynchronous operation has completed.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample7.cs)]

<a id="storeazuretable"></a>

## <a name="storing-group-membership-in-azure-table-storage"></a><span data-ttu-id="f4265-163">Speichern der Gruppenmitgliedschaft in Azure Table Storage</span><span class="sxs-lookup"><span data-stu-id="f4265-163">Storing group membership in Azure table storage</span></span>

<span data-ttu-id="f4265-164">Die Verwendung von Azure Table Storage zum Speichern von Gruppen-und Benutzerinformationen ähnelt der Verwendung einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="f4265-164">Using Azure table storage to store group and user information is similar to using a database.</span></span> <span data-ttu-id="f4265-165">Das folgende Beispiel zeigt eine Tabellen Entität, in der der Benutzername und der Gruppenname gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="f4265-165">The following example shows a table entity that stores the user name and group name.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample8.cs)]

<span data-ttu-id="f4265-166">Im Hub rufen Sie die zugewiesenen Gruppen ab, wenn der Benutzer eine Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="f4265-166">In the hub, you retrieve the assigned groups when the user connects.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample9.cs)]

<a id="verify"></a>

## <a name="verifying-group-membership-when-reconnecting"></a><span data-ttu-id="f4265-167">Überprüfen der Gruppenmitgliedschaft beim erneuten Herstellen der Verbindung</span><span class="sxs-lookup"><span data-stu-id="f4265-167">Verifying group membership when reconnecting</span></span>

<span data-ttu-id="f4265-168">Standardmäßig weist signalr einen Benutzer automatisch den entsprechenden Gruppen zu, wenn eine Verbindung mit einer vorübergehenden Unterbrechung wieder hergestellt wird, z. b. Wenn eine Verbindung gelöscht und wieder hergestellt wird, bevor das Timeout der Verbindung auftritt. Die Gruppeninformationen des Benutzers werden beim erneuten Herstellen einer Verbindung in ein Token übermittelt, und dieses Token wird auf dem Server überprüft.</span><span class="sxs-lookup"><span data-stu-id="f4265-168">By default, SignalR automatically re-assigns a user to the appropriate groups when reconnecting from a temporary disruption, such as when a connection is dropped and re-established before the connection times out. The user's group information is passed in a token when reconnecting, and that token is verified on the server.</span></span> <span data-ttu-id="f4265-169">Informationen zum Überprüfungs Vorgang für das erneute Hinzufügen von Benutzern zu Gruppen finden Sie unter [Wiederherstellen von Gruppen beim erneuten Herstellen der Verbindung](../security/introduction-to-security.md#rejoingroup).</span><span class="sxs-lookup"><span data-stu-id="f4265-169">For information about the verification process for rejoining users to groups, see [Rejoining groups when reconnecting](../security/introduction-to-security.md#rejoingroup).</span></span>

<span data-ttu-id="f4265-170">Im Allgemeinen sollten Sie das Standardverhalten verwenden, wenn Gruppen bei der erneuten Verbindungs Herstellung automatisch erneut beitreten.</span><span class="sxs-lookup"><span data-stu-id="f4265-170">In general, you should use the default behavior of automatically rejoining groups on reconnect.</span></span> <span data-ttu-id="f4265-171">Signalr-Gruppen sind nicht als Sicherheitsmechanismus zum Einschränken des Zugriffs auf sensible Daten vorgesehen.</span><span class="sxs-lookup"><span data-stu-id="f4265-171">SignalR groups are not intended as a security mechanism for restricting access to sensitive data.</span></span> <span data-ttu-id="f4265-172">Wenn Ihre Anwendung jedoch die Gruppenmitgliedschaft eines Benutzers überprüfen muss, wenn die Verbindung wieder hergestellt wird, können Sie das Standardverhalten überschreiben.</span><span class="sxs-lookup"><span data-stu-id="f4265-172">However, if your application must double-check a user's group membership when reconnecting, you can override the default behavior.</span></span> <span data-ttu-id="f4265-173">Wenn Sie das Standardverhalten ändern, kann dies zu einer Belastung der Datenbank hinzugefügt werden, da die Gruppenmitgliedschaft eines Benutzers für jede erneute Verbindung abgerufen werden muss, und nicht nur, wenn der Benutzer eine Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="f4265-173">Changing the default behavior can add a burden to your database because a user's group membership must be retrieved for each reconnection rather than just when the user connects.</span></span>

<span data-ttu-id="f4265-174">Wenn Sie die Gruppenmitgliedschaft bei der erneuten Verbindungs Herstellung überprüfen müssen, erstellen Sie ein neues Hub-Pipeline Modul, das eine Liste der zugewiesenen Gruppen zurückgibt, wie unten gezeigt.</span><span class="sxs-lookup"><span data-stu-id="f4265-174">If you must verify group membership on reconnect, create a new hub pipeline module that returns a list of assigned groups, as shown below.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample10.cs)]

<span data-ttu-id="f4265-175">Fügen Sie dieses Modul dann der Hub-Pipeline hinzu, wie unten gezeigt.</span><span class="sxs-lookup"><span data-stu-id="f4265-175">Then, add that module to the hub pipeline, as highlighted below.</span></span>

[!code-csharp[Main](working-with-groups/samples/sample11.cs?highlight=4)]
