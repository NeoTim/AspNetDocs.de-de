---
uid: signalr/overview/performance/scaleout-in-signalr
title: Einführung in horizontales hochskalieren in signalr | Microsoft-Dokumentation
author: bradygaster
description: In den in diesem Thema verwendeten Software Versionen Visual Studio 2013 .NET 4,5 signalr Version 2 in früheren Versionen dieses Themas Informationen zu früheren Versionen von...
ms.author: bradyg
ms.date: 06/10/2014
ms.assetid: 7e781fc1-1c1f-45a8-bc1d-338e96dbe9c9
msc.legacyurl: /signalr/overview/performance/scaleout-in-signalr
msc.type: authoredcontent
ms.openlocfilehash: 14dc22f99a43b566903c59fb23b7d419350f4a25
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78467781"
---
# <a name="introduction-to-scaleout-in-signalr"></a><span data-ttu-id="b571f-103">Einführung zur horizontalen Skalierung in SignalR</span><span class="sxs-lookup"><span data-stu-id="b571f-103">Introduction to Scaleout in SignalR</span></span>

<span data-ttu-id="b571f-104">von [Mike Wasson](https://github.com/MikeWasson), [Patrick Fletcher](https://github.com/pfletcher)</span><span class="sxs-lookup"><span data-stu-id="b571f-104">by [Mike Wasson](https://github.com/MikeWasson), [Patrick Fletcher](https://github.com/pfletcher)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> ## <a name="software-versions-used-in-this-topic"></a><span data-ttu-id="b571f-105">In diesem Thema verwendete Software Versionen</span><span class="sxs-lookup"><span data-stu-id="b571f-105">Software versions used in this topic</span></span>
>
>
> - [<span data-ttu-id="b571f-106">Visual Studio 2013</span><span class="sxs-lookup"><span data-stu-id="b571f-106">Visual Studio 2013</span></span>](https://my.visualstudio.com/Downloads?q=visual%20studio%202013)
> - <span data-ttu-id="b571f-107">.NET 4.5</span><span class="sxs-lookup"><span data-stu-id="b571f-107">.NET 4.5</span></span>
> - <span data-ttu-id="b571f-108">Signalr Version 2</span><span class="sxs-lookup"><span data-stu-id="b571f-108">SignalR version 2</span></span>
>
>
>
> ## <a name="previous-versions-of-this-topic"></a><span data-ttu-id="b571f-109">Vorherige Versionen dieses Themas</span><span class="sxs-lookup"><span data-stu-id="b571f-109">Previous versions of this topic</span></span>
>
> <span data-ttu-id="b571f-110">Informationen zu früheren Versionen von signalr finden Sie unter [signalr ältere Versionen](../older-versions/index.md).</span><span class="sxs-lookup"><span data-stu-id="b571f-110">For information about earlier versions of SignalR, see [SignalR Older Versions](../older-versions/index.md).</span></span>
>
> ## <a name="questions-and-comments"></a><span data-ttu-id="b571f-111">Fragen und Kommentare</span><span class="sxs-lookup"><span data-stu-id="b571f-111">Questions and comments</span></span>
>
> <span data-ttu-id="b571f-112">Bitte informieren Sie sich darüber, wie Ihnen dieses Tutorial gefallen hat und was wir in den Kommentaren unten auf der Seite verbessern konnten.</span><span class="sxs-lookup"><span data-stu-id="b571f-112">Please leave feedback on how you liked this tutorial and what we could improve in the comments at the bottom of the page.</span></span> <span data-ttu-id="b571f-113">Wenn Sie Fragen haben, die nicht direkt mit dem Tutorial zusammenhängen, können Sie Sie im [ASP.net signalr-Forum](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) oder in [StackOverflow.com](http://stackoverflow.com/)veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="b571f-113">If you have questions that are not directly related to the tutorial, you can post them to the [ASP.NET SignalR forum](https://forums.asp.net/1254.aspx/1?ASP+NET+SignalR) or [StackOverflow.com](http://stackoverflow.com/).</span></span>

<span data-ttu-id="b571f-114">Im Allgemeinen gibt es zwei Möglichkeiten zum Skalieren einer Webanwendung: zentrales *hoch* -und herunter *skalieren*.</span><span class="sxs-lookup"><span data-stu-id="b571f-114">In general, there are two ways to scale a web application: *scale up* and *scale out*.</span></span>

- <span data-ttu-id="b571f-115">Zentrales hochskalieren bedeutet, dass Sie einen größeren Server (oder einen größeren virtuellen Computer) mit mehr RAM, CPUs usw. verwenden.</span><span class="sxs-lookup"><span data-stu-id="b571f-115">Scale up means using a larger server (or a larger VM) with more RAM, CPUs, etc.</span></span>
- <span data-ttu-id="b571f-116">Durch horizontales hochskalieren werden weitere Server zum Verarbeiten der Last hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="b571f-116">Scale out means adding more servers to handle the load.</span></span>

<span data-ttu-id="b571f-117">Das Problem beim zentralen hochskalieren besteht darin, dass Sie schnell eine Beschränkung für die Größe des Computers erreichen.</span><span class="sxs-lookup"><span data-stu-id="b571f-117">The problem with scaling up is that you quickly hit a limit on the size of the machine.</span></span> <span data-ttu-id="b571f-118">Darüber hinaus müssen Sie horizontal hochskalieren. Wenn Sie jedoch horizontal hochskalieren, können Clients an andere Server weitergeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="b571f-118">Beyond that, you need to scale out. However, when you scale out, clients can get routed to different servers.</span></span> <span data-ttu-id="b571f-119">Ein Client, der mit einem Server verbunden ist, empfängt keine Nachrichten, die von einem anderen Server gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="b571f-119">A client that is connected to one server will not receive messages sent from another server.</span></span>

![](scaleout-in-signalr/_static/image1.png)

<span data-ttu-id="b571f-120">Eine Lösung besteht darin, Nachrichten zwischen Servern mithilfe einer Komponente weiterzuleiten, die als *Rückwand*bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="b571f-120">One solution is to forward messages between servers, using a component called a *backplane*.</span></span> <span data-ttu-id="b571f-121">Wenn eine Rückwand aktiviert ist, sendet jede Anwendungs Instanz Nachrichten an die Rückwand, und die Rückwand leitet Sie an die anderen Anwendungs Instanzen weiter.</span><span class="sxs-lookup"><span data-stu-id="b571f-121">With a backplane enabled, each application instance sends messages to the backplane, and the backplane forwards them to the other application instances.</span></span> <span data-ttu-id="b571f-122">(In der Elektronik ist eine Rückwand eine Gruppe paralleler Connectors.</span><span class="sxs-lookup"><span data-stu-id="b571f-122">(In electronics, a backplane is a group of parallel connectors.</span></span> <span data-ttu-id="b571f-123">Analog dazu verbindet eine signalr-Rückwand mehrere Server.)</span><span class="sxs-lookup"><span data-stu-id="b571f-123">By analogy, a SignalR backplane connects multiple servers.)</span></span>

![](scaleout-in-signalr/_static/image2.png)

<span data-ttu-id="b571f-124">Signalr bietet zurzeit drei Backplane:</span><span class="sxs-lookup"><span data-stu-id="b571f-124">SignalR currently provides three backplanes:</span></span>

- <span data-ttu-id="b571f-125">**Azure Service Bus**</span><span class="sxs-lookup"><span data-stu-id="b571f-125">**Azure Service Bus**.</span></span> <span data-ttu-id="b571f-126">Service Bus ist eine Messaging Infrastruktur, die es Komponenten ermöglicht, Nachrichten in einer lose gekoppelten Weise zu senden.</span><span class="sxs-lookup"><span data-stu-id="b571f-126">Service Bus is a messaging infrastructure that allows components to send messages in a loosely coupled way.</span></span>
- <span data-ttu-id="b571f-127">**Redis**.</span><span class="sxs-lookup"><span data-stu-id="b571f-127">**Redis**.</span></span> <span data-ttu-id="b571f-128">Redis ist ein Schlüssel-Wert-Speicher im Arbeitsspeicher.</span><span class="sxs-lookup"><span data-stu-id="b571f-128">Redis is an in-memory key-value store.</span></span> <span data-ttu-id="b571f-129">Redis unterstützt ein Veröffentlichen/Abonnieren-Muster ("Pub/Sub") zum Senden von Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="b571f-129">Redis supports a publish/subscribe ("pub/sub") pattern for sending messages.</span></span>
- <span data-ttu-id="b571f-130">**SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="b571f-130">**SQL Server**.</span></span> <span data-ttu-id="b571f-131">Die SQL Server Rückwand schreibt Nachrichten in SQL-Tabellen.</span><span class="sxs-lookup"><span data-stu-id="b571f-131">The SQL Server backplane writes messages to SQL tables.</span></span> <span data-ttu-id="b571f-132">Die Rückwand verwendet Service Broker für effizientes Messaging.</span><span class="sxs-lookup"><span data-stu-id="b571f-132">The backplane uses Service Broker for efficient messaging.</span></span> <span data-ttu-id="b571f-133">Es funktioniert jedoch auch, wenn Service Broker nicht aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="b571f-133">However, it also works if Service Broker is not enabled.</span></span>

<span data-ttu-id="b571f-134">Wenn Sie Ihre Anwendung in Azure bereitstellen, sollten Sie die redis-Rückwand mithilfe von [Azure redis Cache](https://azure.microsoft.com/services/cache/)verwenden.</span><span class="sxs-lookup"><span data-stu-id="b571f-134">If you deploy your application on Azure, consider using the Redis backplane using [Azure Redis Cache](https://azure.microsoft.com/services/cache/).</span></span> <span data-ttu-id="b571f-135">Wenn Sie in ihrer eigenen Serverfarm bereitstellen, sollten Sie die SQL Server-oder redis-Backplane in Erwägung gezogen.</span><span class="sxs-lookup"><span data-stu-id="b571f-135">If you are deploying to your own server farm, consider the SQL Server or Redis backplanes.</span></span>

<span data-ttu-id="b571f-136">Die folgenden Themen enthalten Schritt-für-Schritt-Tutorials für jede Backplane:</span><span class="sxs-lookup"><span data-stu-id="b571f-136">The following topics contain step-by-step tutorials for each backplane:</span></span>

- [<span data-ttu-id="b571f-137">Horizontale Skalierung in SignalR mit dem Azure Service Bus</span><span class="sxs-lookup"><span data-stu-id="b571f-137">SignalR Scaleout with Azure Service Bus</span></span>](scaleout-with-windows-azure-service-bus.md)
- [<span data-ttu-id="b571f-138">Horizontale Skalierung in SignalR mit Redis</span><span class="sxs-lookup"><span data-stu-id="b571f-138">SignalR Scaleout with Redis</span></span>](scaleout-with-redis.md)
- [<span data-ttu-id="b571f-139">Horizontale Skalierung in SignalR mit SQL Server</span><span class="sxs-lookup"><span data-stu-id="b571f-139">SignalR Scaleout with SQL Server</span></span>](scaleout-with-sql-server.md)

## <a name="implementation"></a><span data-ttu-id="b571f-140">Implementierung</span><span class="sxs-lookup"><span data-stu-id="b571f-140">Implementation</span></span>

<span data-ttu-id="b571f-141">In signalr wird jede Nachricht über einen Nachrichtenbus gesendet.</span><span class="sxs-lookup"><span data-stu-id="b571f-141">In SignalR, every message is sent through a message bus.</span></span> <span data-ttu-id="b571f-142">Ein Nachrichtenbus implementiert die [imessagebus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) -Schnittstelle, die eine Veröffentlichung/Abonnement-Abstraktion bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="b571f-142">A message bus implements the [IMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.messaging.imessagebus(v=vs.100).aspx) interface, which provides a publish/subscribe abstraction.</span></span> <span data-ttu-id="b571f-143">Die Rückstände funktionieren, indem Sie den standardmäßigen **imessagebus** durch einen Bus ersetzen, der für diese Backplane konzipiert ist.</span><span class="sxs-lookup"><span data-stu-id="b571f-143">The backplanes work by replacing the default **IMessageBus** with a bus designed for that backplane.</span></span> <span data-ttu-id="b571f-144">Der Nachrichtenbus für redis lautet beispielsweise [redismessagebus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx)und verwendet den redis [-Pub/Sub-](http://redis.io/topics/pubsub) Mechanismus, um Nachrichten zu senden und zu empfangen.</span><span class="sxs-lookup"><span data-stu-id="b571f-144">For example, the message bus for Redis is [RedisMessageBus](https://msdn.microsoft.com/library/microsoft.aspnet.signalr.redis.redismessagebus(v=vs.100).aspx), and it uses the Redis [pub/sub](http://redis.io/topics/pubsub) mechanism to send and receive messages.</span></span>

<span data-ttu-id="b571f-145">Jede Serverinstanz stellt über den Bus eine Verbindung mit der Rückwand her.</span><span class="sxs-lookup"><span data-stu-id="b571f-145">Each server instance connects to the backplane through the bus.</span></span> <span data-ttu-id="b571f-146">Wenn eine Nachricht gesendet wird, wird Sie an die Rückwand gesendet, und die Rückwand sendet Sie an jeden Server.</span><span class="sxs-lookup"><span data-stu-id="b571f-146">When a message is sent, it goes to the backplane, and the backplane sends it to every server.</span></span> <span data-ttu-id="b571f-147">Wenn ein Server eine Nachricht von der Backplane erhält, wird die Nachricht in den lokalen Cache eingefügt.</span><span class="sxs-lookup"><span data-stu-id="b571f-147">When a server gets a message from the backplane, it puts the message in its local cache.</span></span> <span data-ttu-id="b571f-148">Der Server übergibt dann Nachrichten aus seinem lokalen Cache an Clients.</span><span class="sxs-lookup"><span data-stu-id="b571f-148">The server then delivers messages to clients from its local cache.</span></span>

<span data-ttu-id="b571f-149">Für jede Client Verbindung wird der Fortschritt des Clients beim Lesen des Nachrichten Datenstroms mithilfe eines Cursors nachverfolgt.</span><span class="sxs-lookup"><span data-stu-id="b571f-149">For each client connection, the client's progress in reading the message stream is tracked using a cursor.</span></span> <span data-ttu-id="b571f-150">(Ein Cursor stellt eine Position im Nachrichtenstream dar.) Wenn ein Client die Verbindung trennt und dann erneut eine Verbindung herstellt, fragt er den Bus nach Nachrichten ab, die nach dem Cursor Wert des Clients eingetroffen sind.</span><span class="sxs-lookup"><span data-stu-id="b571f-150">(A cursor represents a position in the message stream.) If a client disconnects and then reconnects, it asks the bus for any messages that arrived after the client's cursor value.</span></span> <span data-ttu-id="b571f-151">Dasselbe passiert, wenn eine Verbindung eine [lange](../getting-started/introduction-to-signalr.md#transports)Abfrage verwendet.</span><span class="sxs-lookup"><span data-stu-id="b571f-151">The same thing happens when a connection uses [long polling](../getting-started/introduction-to-signalr.md#transports).</span></span> <span data-ttu-id="b571f-152">Nachdem eine lange Abruf Anforderung abgeschlossen wurde, öffnet der Client eine neue Verbindung und fragt nach Nachrichten, die nach dem Cursor eingetroffen sind.</span><span class="sxs-lookup"><span data-stu-id="b571f-152">After a long poll request completes, the client opens a new connection and asks for messages that arrived after the cursor.</span></span>

<span data-ttu-id="b571f-153">Der Cursor Mechanismus funktioniert auch dann, wenn ein Client bei der erneuten Verbindungs Herstellung an einen anderen Server weitergeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="b571f-153">The cursor mechanism works even if a client is routed to a different server on reconnect.</span></span> <span data-ttu-id="b571f-154">Die Rückwand kennt alle Server, und es spielt keine Rolle, mit welchem Server ein Client eine Verbindung herstellt.</span><span class="sxs-lookup"><span data-stu-id="b571f-154">The backplane is aware of all the servers, and it doesn't matter which server a client connects to.</span></span>

## <a name="limitations"></a><span data-ttu-id="b571f-155">Einschränkungen</span><span class="sxs-lookup"><span data-stu-id="b571f-155">Limitations</span></span>

<span data-ttu-id="b571f-156">Bei Verwendung einer Backplane ist der maximale Nachrichten Durchsatz niedriger als der, wenn Clients direkt mit einem einzelnen Server Knoten kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="b571f-156">Using a backplane, the maximum message throughput is lower than it is when clients talk directly to a single server node.</span></span> <span data-ttu-id="b571f-157">Das liegt daran, dass die Rück Ebene jede Nachricht an jeden Knoten weiterleitet, sodass die Rückwand zu einem Engpass werden kann.</span><span class="sxs-lookup"><span data-stu-id="b571f-157">That's because the backplane forwards every message to every node, so the backplane can become a bottleneck.</span></span> <span data-ttu-id="b571f-158">Ob diese Einschränkung ein Problem ist, hängt von der Anwendung ab.</span><span class="sxs-lookup"><span data-stu-id="b571f-158">Whether this limitation is a problem depends on the application.</span></span> <span data-ttu-id="b571f-159">Im folgenden finden Sie einige typische signalr-Szenarien:</span><span class="sxs-lookup"><span data-stu-id="b571f-159">For example, here are some typical SignalR scenarios:</span></span>

- <span data-ttu-id="b571f-160">[Server Broadcast](../getting-started/tutorial-server-broadcast-with-signalr.md) (z. b. Börsen Ticker): Backplane funktionieren für dieses Szenario gut, da der Server die Rate steuert, mit der Nachrichten gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="b571f-160">[Server broadcast](../getting-started/tutorial-server-broadcast-with-signalr.md) (e.g., stock ticker): Backplanes work well for this scenario, because the server controls the rate at which messages are sent.</span></span>
- <span data-ttu-id="b571f-161">[Client-zu-Client](../getting-started/tutorial-getting-started-with-signalr.md) (z. b. Chat): in diesem Szenario kann die Rückwand einen Engpass darstellen, wenn die Anzahl der Nachrichten mit der Anzahl der Clients skaliert wird. Das heißt, wenn die Rate der Nachrichten proportional zunimmt, wenn mehr Clients beitreten.</span><span class="sxs-lookup"><span data-stu-id="b571f-161">[Client-to-client](../getting-started/tutorial-getting-started-with-signalr.md) (e.g., chat): In this scenario, the backplane might be a bottleneck if the number of messages scales with the number of clients; that is, if the rate of messages grows proportionally as more clients join.</span></span>
- <span data-ttu-id="b571f-162">[Hochfrequenz in Echtzeit](../getting-started/tutorial-high-frequency-realtime-with-signalr.md) (z. b. Echt Zeit Spiele): für dieses Szenario wird keine Rückwand empfohlen.</span><span class="sxs-lookup"><span data-stu-id="b571f-162">[High-frequency realtime](../getting-started/tutorial-high-frequency-realtime-with-signalr.md) (e.g., real-time games): A backplane is not recommended for this scenario.</span></span>

## <a name="enabling-tracing-for-signalr-scaleout"></a><span data-ttu-id="b571f-163">Aktivieren der Ablauf Verfolgung für die horizontale Skalierung von signalr</span><span class="sxs-lookup"><span data-stu-id="b571f-163">Enabling Tracing For SignalR Scaleout</span></span>

<span data-ttu-id="b571f-164">Fügen Sie der Datei "Web. config" unter dem Stamm **Konfigurations** Element die folgenden Abschnitte hinzu, um die Ablauf Verfolgung für die Rück Ebenen zu aktivieren:</span><span class="sxs-lookup"><span data-stu-id="b571f-164">To enable tracing for the backplanes, add the following sections to the web.config file, under the root **configuration** element:</span></span>

[!code-html[Main](scaleout-in-signalr/samples/sample1.html)]
