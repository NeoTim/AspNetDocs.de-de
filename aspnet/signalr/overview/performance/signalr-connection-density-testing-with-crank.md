---
uid: signalr/overview/performance/signalr-connection-density-testing-with-crank
title: Verbindungs-Dichte SignalR mit Crank testen | Microsoft-Dokumentation
author: bradygaster
description: Testen der Verbindungsdichte in SignalR mit Crank
ms.author: bradyg
ms.date: 02/22/2015
ms.assetid: 148d9ca7-1af1-44b6-a9fb-91e261b9b463
msc.legacyurl: /signalr/overview/performance/signalr-connection-density-testing-with-crank
msc.type: authoredcontent
ms.openlocfilehash: 901e039fbb81651ed18d560c99745b7e7f716e01
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65116089"
---
# <a name="signalr-connection-density-testing-with-crank"></a><span data-ttu-id="71bae-103">Testen der Verbindungsdichte in SignalR mit Crank</span><span class="sxs-lookup"><span data-stu-id="71bae-103">SignalR Connection Density Testing with Crank</span></span>

<span data-ttu-id="71bae-104">durch [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="71bae-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> <span data-ttu-id="71bae-105">Dieser Artikel beschreibt, wie das Crank-Tool zum Testen einer Anwendung mit mehreren simulierten Clients.</span><span class="sxs-lookup"><span data-stu-id="71bae-105">This article describes how to use the Crank tool to test an application with multiple simulated clients.</span></span>

<span data-ttu-id="71bae-106">Sobald Ihre Anwendung in der hostumgebung (entweder eine Azure web-Rolle, IIS, oder für selbst gehostete Einsatz von Owin) ausgeführt wird, können Sie die Antwort der Anwendung auf ein hohes Maß an Verbindung Dichte, die mit dem Tool Crank testen.</span><span class="sxs-lookup"><span data-stu-id="71bae-106">Once your application is running in its hosting environment (either an Azure web role, IIS, or self-hosted using Owin), you can test application's response to a high level of connection density using the Crank tool.</span></span> <span data-ttu-id="71bae-107">Die Hostingumgebung kann ein Server (Internet Information Services, IIS), einem Owin-Host oder einer Azure-Webrolle sein.</span><span class="sxs-lookup"><span data-stu-id="71bae-107">The hosting environment can be an Internet Information Services (IIS) server, an Owin host, or an Azure web role.</span></span> <span data-ttu-id="71bae-108">(Hinweis: Leistungsindikatoren sind nicht verfügbar auf Azure App Service-Web-Apps, sodass Sie nicht um ein Dichte Verbindungstest Leistungsdaten erhalten.)</span><span class="sxs-lookup"><span data-stu-id="71bae-108">(Note: Performance counters are not available on Azure App Service Web Apps, so you will not be able to get performance data from a connection density test.)</span></span>

<span data-ttu-id="71bae-109">Verbindung Dichte bezieht sich auf die Anzahl der gleichzeitigen TCP-Verbindungen, die auf einem Server hergestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="71bae-109">Connection Density refers to the number of simultaneous TCP connections that can be established on a server.</span></span> <span data-ttu-id="71bae-110">Jede TCP-Verbindung eine eigene Rechenaufwand, und Öffnen einer großen Anzahl von Verbindungen im Leerlauf werden schließlich einen Speicherengpass erstellen.</span><span class="sxs-lookup"><span data-stu-id="71bae-110">Each TCP connection incurs its own overhead, and opening a large number of idle connections will eventually create a memory bottleneck.</span></span>

<span data-ttu-id="71bae-111">[SignalR-Codebasis](https://github.com/signalr/signalr) enthält ein Auslastungstest-Tool namens **Anforderungen**.</span><span class="sxs-lookup"><span data-stu-id="71bae-111">[The SignalR codebase](https://github.com/signalr/signalr) includes a load-testing tool called **Crank**.</span></span> <span data-ttu-id="71bae-112">Die neueste Version des Crank befinden sich [der entwicklungsverzweigung](https://github.com/SignalR/signalr/tree/dev) auf GitHub.</span><span class="sxs-lookup"><span data-stu-id="71bae-112">The latest version of Crank can be found in [the Dev branch](https://github.com/SignalR/signalr/tree/dev) on GitHub.</span></span> <span data-ttu-id="71bae-113">Sie können eine ZIP-Archiv der entwicklungsverzweigung von SignalR-Codebasis Datei [hier](https://github.com/SignalR/SignalR/archive/dev.zip).</span><span class="sxs-lookup"><span data-stu-id="71bae-113">You can download a Zip archive of the Dev branch of the SignalR codebase [here](https://github.com/SignalR/SignalR/archive/dev.zip).</span></span>

<span data-ttu-id="71bae-114">Crank kann zu vollständig sättigenden der Arbeitsspeicher des Servers verwendet werden, um die Gesamtzahl von Verbindungen im Leerlauf auf die Serverhardware möglich zu berechnen.</span><span class="sxs-lookup"><span data-stu-id="71bae-114">Crank may be used to fully saturate the server's memory in order to calculate the total number of idle connections possible on the server hardware.</span></span> <span data-ttu-id="71bae-115">Alternativ können Sie auch Kurbel verwenden für den Auslastungstest den Server unter eine bestimmte Menge an Arbeitsspeicher durch langsame Verbindungen bis eine bestimmte Anzahl oder einen bestimmten speicherschwellenwert erreicht ist.</span><span class="sxs-lookup"><span data-stu-id="71bae-115">Alternatively, you may also use Crank to load test the server under a certain amount of memory pressure, by ramping up connections until a specific count or a specific memory threshold is reached.</span></span>

<span data-ttu-id="71bae-116">Beim Testen ist es wichtig, die remote-Clients zu verwenden, um einen beliebigen Wettbewerb, für die Ressourcen (z. B. TCP-Verbindungen und Arbeitsspeicher) zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="71bae-116">When testing, it is important to use remote client(s) to avoid any competition for resources (i.e., TCP connections and memory).</span></span> <span data-ttu-id="71bae-117">Überwachen Sie den Clients, um sicherzustellen, dass sie kein Engpässe erreichen, die den Server verhindert möglicherweise, dessen voller Kapazität (Arbeitsspeicher oder CPU) erreicht.</span><span class="sxs-lookup"><span data-stu-id="71bae-117">Monitor the client(s) to ensure that they are not hitting any bottlenecks that may prevent the server from reaching its full capacity (memory or CPU).</span></span> <span data-ttu-id="71bae-118">Sie müssen möglicherweise die Anzahl der Clients zu erhöhen, um vollständig vom Server geladen werden.</span><span class="sxs-lookup"><span data-stu-id="71bae-118">You may need to increase the number of clients in order to fully load the server.</span></span>

### <a name="running-a-connection-density-test"></a><span data-ttu-id="71bae-119">Ausführen eines Tests der Verbindungs-Dichte</span><span class="sxs-lookup"><span data-stu-id="71bae-119">Running a Connection Density Test</span></span>

<span data-ttu-id="71bae-120">In diesem Abschnitt wird beschrieben, die erforderlichen Schritte zum ein Verbindungstest-Dichte auf einer SignalR-Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="71bae-120">This section describes the steps needed to run a connection density test on a SignalR application.</span></span>

1. <span data-ttu-id="71bae-121">Herunterladen und erstellen die [entwicklungsverzweigung von SignalR-Codebasis](https://github.com/SignalR/SignalR/archive/dev.zip).</span><span class="sxs-lookup"><span data-stu-id="71bae-121">Download and build the [Dev branch of the SignalR codebase](https://github.com/SignalR/SignalR/archive/dev.zip).</span></span> <span data-ttu-id="71bae-122">Wechseln Sie in einer Eingabeaufforderung den Befehl zu &lt;Projektverzeichnis&gt;\src\Microsoft.AspNet.SignalR.Crank\bin\debug.</span><span class="sxs-lookup"><span data-stu-id="71bae-122">In a command prompt, navigate to &lt;project directory&gt;\src\Microsoft.AspNet.SignalR.Crank\bin\debug.</span></span>
2. <span data-ttu-id="71bae-123">Stellen Sie Ihre Anwendung in der vorgesehenen hostumgebung bereit.</span><span class="sxs-lookup"><span data-stu-id="71bae-123">Deploy your application to its intended hosting environment.</span></span> <span data-ttu-id="71bae-124">Notieren Sie sich den Endpunkt die Anwendung verwendeten; z. B. in der Anwendung erstellt, der [Tutorials: Erste Schritte](../getting-started/tutorial-getting-started-with-signalr.md), der Endpunkt ist `http://<yourhost>:8080/signalr`.</span><span class="sxs-lookup"><span data-stu-id="71bae-124">Make a note of the endpoint that your application uses; for example, in the application created in the [Getting Started tutorial](../getting-started/tutorial-getting-started-with-signalr.md), the endpoint is `http://<yourhost>:8080/signalr`.</span></span>
3. <span data-ttu-id="71bae-125">Installieren Sie [SignalR-Leistungsindikatoren](signalr-performance.md#perfcounters) auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="71bae-125">Install [SignalR performance counters](signalr-performance.md#perfcounters) on the server.</span></span> <span data-ttu-id="71bae-126">Wenn Ihre Anwendung in Azure ausgeführt wird, finden Sie unter [mithilfe von SignalR-Leistungsindikatoren in einer Azure-Webrolle](using-signalr-performance-counters-in-an-azure-web-role.md).</span><span class="sxs-lookup"><span data-stu-id="71bae-126">If your application is running on Azure, see [Using SignalR Performance Counters in an Azure Web Role](using-signalr-performance-counters-in-an-azure-web-role.md).</span></span>

<span data-ttu-id="71bae-127">Sobald heruntergeladen und erstellt die Codebasis und Leistungsindikatoren auf dem Host installiert haben, das Befehlszeilentool "Crank" finden Sie in der `src\Microsoft.AspNet.SignalR.Crank\bin\Debug` Ordner.</span><span class="sxs-lookup"><span data-stu-id="71bae-127">Once you've downloaded and built the codebase, and installed performance counters on your host, the Crank command-line tool can be found in the `src\Microsoft.AspNet.SignalR.Crank\bin\Debug` folder.</span></span>

<span data-ttu-id="71bae-128">Optionen für das Tool Crank sind verfügbar:</span><span class="sxs-lookup"><span data-stu-id="71bae-128">Available options for the Crank tool include:</span></span>

- <span data-ttu-id="71bae-129">**/?**: Zeigt die Hilfe an.</span><span class="sxs-lookup"><span data-stu-id="71bae-129">**/?**: Shows the help screen.</span></span> <span data-ttu-id="71bae-130">Die verfügbaren Optionen werden auch angezeigt, wenn die **Url** Parameter ausgelassen wird.</span><span class="sxs-lookup"><span data-stu-id="71bae-130">The available options are also displayed if the **Url** parameter is omitted.</span></span>
- <span data-ttu-id="71bae-131">**/Url**: Die URL für SignalR-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="71bae-131">**/Url**: The URL for SignalR connections.</span></span> <span data-ttu-id="71bae-132">Dieser Parameter ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="71bae-132">This parameter is required.</span></span> <span data-ttu-id="71bae-133">Für eine SignalR-Anwendung, die Verwendung der standardzuordnung, endet der Pfad in "/ Signalr".</span><span class="sxs-lookup"><span data-stu-id="71bae-133">For a SignalR application using the default mapping, the path will end in "/signalr".</span></span>
- <span data-ttu-id="71bae-134">**/Transport**: Der Name des Transports verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="71bae-134">**/Transport**: The name of the transport used.</span></span> <span data-ttu-id="71bae-135">Der Standardwert ist `auto`, wählt die verfügbare Protokoll.</span><span class="sxs-lookup"><span data-stu-id="71bae-135">The default is `auto`, which will select the best available protocol.</span></span> <span data-ttu-id="71bae-136">Unter anderem `WebSockets`, `ServerSentEvents`, und `LongPolling` (`ForeverFrame` ist keine Option für Crank, seit der .NET Client statt Internet Explorer verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="71bae-136">Options include `WebSockets`, `ServerSentEvents`, and `LongPolling` (`ForeverFrame` is not an option for Crank, since the .NET client rather than Internet Explorer is used).</span></span> <span data-ttu-id="71bae-137">Weitere Informationen dazu, wie SignalR Transporte auswählt, finden Sie unter [Transporte und Fallbacks](../getting-started/introduction-to-signalr.md#transports).</span><span class="sxs-lookup"><span data-stu-id="71bae-137">For more information on how SignalR selects transports, see [Transports and Fallbacks](../getting-started/introduction-to-signalr.md#transports).</span></span>
- <span data-ttu-id="71bae-138">**/BatchSize**: Die Anzahl der Clients, die in jedem Batch hinzugefügt werden soll.</span><span class="sxs-lookup"><span data-stu-id="71bae-138">**/BatchSize**: The number of clients added in each batch.</span></span> <span data-ttu-id="71bae-139">Der Standardwert ist 50.</span><span class="sxs-lookup"><span data-stu-id="71bae-139">The default is 50.</span></span>
- <span data-ttu-id="71bae-140">**/ConnectInterval**: Das Intervall in Millisekunden zwischen dem Hinzufügen von Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="71bae-140">**/ConnectInterval**: The interval in milliseconds between adding connections.</span></span> <span data-ttu-id="71bae-141">Der Standard ist 500.</span><span class="sxs-lookup"><span data-stu-id="71bae-141">The default is 500.</span></span>
- <span data-ttu-id="71bae-142">**/ Verbindungen**: Die Anzahl der Verbindungen verwendet, um Auslastungstest-Anwendung.</span><span class="sxs-lookup"><span data-stu-id="71bae-142">**/Connections**: The number of connections used to load-test the application.</span></span> <span data-ttu-id="71bae-143">Der Standardwert ist 100.000.</span><span class="sxs-lookup"><span data-stu-id="71bae-143">The default is 100,000.</span></span>
- <span data-ttu-id="71bae-144">**/ConnectTimeout**: Das Timeout in Sekunden vor Abbruch des Testlaufs.</span><span class="sxs-lookup"><span data-stu-id="71bae-144">**/ConnectTimeout**: The timeout in seconds before aborting the test.</span></span> <span data-ttu-id="71bae-145">Der Standardwert ist 300.</span><span class="sxs-lookup"><span data-stu-id="71bae-145">The default is 300.</span></span>
- <span data-ttu-id="71bae-146">**MinServerMBytes**: Die minimale Megabyte (MB) erreicht.</span><span class="sxs-lookup"><span data-stu-id="71bae-146">**MinServerMBytes**: The minimum server megabytes to reach.</span></span> <span data-ttu-id="71bae-147">Der Standard ist 500.</span><span class="sxs-lookup"><span data-stu-id="71bae-147">The default is 500.</span></span>
- <span data-ttu-id="71bae-148">**SendBytes**: Die Größe der Nutzlast in Bytes an den Server gesendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="71bae-148">**SendBytes**: The size of the payload sent to the server in bytes.</span></span> <span data-ttu-id="71bae-149">Der Standard ist 0.</span><span class="sxs-lookup"><span data-stu-id="71bae-149">The default is 0.</span></span>
- <span data-ttu-id="71bae-150">**SendInterval**: Die Verzögerung in Millisekunden zwischen Nachrichten an den Server.</span><span class="sxs-lookup"><span data-stu-id="71bae-150">**SendInterval**: The delay in milliseconds between messages to the server.</span></span> <span data-ttu-id="71bae-151">Der Standard ist 500.</span><span class="sxs-lookup"><span data-stu-id="71bae-151">The default is 500.</span></span>
- <span data-ttu-id="71bae-152">**SendTimeout**: Das Timeout in Millisekunden für Nachrichten an den Server.</span><span class="sxs-lookup"><span data-stu-id="71bae-152">**SendTimeout**: The timeout in milliseconds for messages to the server.</span></span> <span data-ttu-id="71bae-153">Der Standardwert ist 300.</span><span class="sxs-lookup"><span data-stu-id="71bae-153">The default is 300.</span></span>
- <span data-ttu-id="71bae-154">**ControllerUrl**: Die Url, in denen ein Client einen Controller-Hub hostet.</span><span class="sxs-lookup"><span data-stu-id="71bae-154">**ControllerUrl**: The Url where one client will host a controller hub.</span></span> <span data-ttu-id="71bae-155">Der Standardwert ist null (kein Controller-Hub).</span><span class="sxs-lookup"><span data-stu-id="71bae-155">The default is null (no controller hub).</span></span> <span data-ttu-id="71bae-156">Der Controller-Hub wurde gestartet, beim Start der Sitzung Crank. keine weiteren erfolgt, wenden Sie sich an, zwischen dem Controller-Hub und einer Kurbel.</span><span class="sxs-lookup"><span data-stu-id="71bae-156">The controller hub is started when the Crank session starts; no further contact between the controller hub and Crank is made.</span></span>
- <span data-ttu-id="71bae-157">**NumClients**: Die Anzahl der simulierten Clients an die Anwendung eine Verbindung herzustellen.</span><span class="sxs-lookup"><span data-stu-id="71bae-157">**NumClients**: The number of simulated clients to connect to the application.</span></span> <span data-ttu-id="71bae-158">Der Standardwert ist 1.</span><span class="sxs-lookup"><span data-stu-id="71bae-158">The default is one.</span></span>
- <span data-ttu-id="71bae-159">**Logfile**: Der Dateiname für die Protokolldatei für den Testlauf.</span><span class="sxs-lookup"><span data-stu-id="71bae-159">**Logfile**: The filename for the logfile for the test run.</span></span> <span data-ttu-id="71bae-160">Die Standardeinstellung ist `crank.csv`.</span><span class="sxs-lookup"><span data-stu-id="71bae-160">The default is `crank.csv`.</span></span>
- <span data-ttu-id="71bae-161">**SampleInterval**: Die Zeit in Millisekunden zwischen Proben von Leistungsindikatoren.</span><span class="sxs-lookup"><span data-stu-id="71bae-161">**SampleInterval**: The time in milliseconds between performance counter samples.</span></span> <span data-ttu-id="71bae-162">Der Standard ist 1000.</span><span class="sxs-lookup"><span data-stu-id="71bae-162">The default is 1000.</span></span>
- <span data-ttu-id="71bae-163">**SignalRInstance**: Der Instanzname für die Leistungsindikatoren auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="71bae-163">**SignalRInstance**: The instance name for the performance counters on the server.</span></span> <span data-ttu-id="71bae-164">Der Standardwert ist der Zustand der Client-Verbindung verwenden.</span><span class="sxs-lookup"><span data-stu-id="71bae-164">The default is to use the client connection state.</span></span>

### <a name="example"></a><span data-ttu-id="71bae-165">Beispiel</span><span class="sxs-lookup"><span data-stu-id="71bae-165">Example</span></span>

<span data-ttu-id="71bae-166">Der folgende Befehl testet eine Site mit dem Namen `pfsignalr` mithilfe von 100 Verbindungen in Azure, die eine Anwendung an Port 8080 mit einem Hub, mit dem Namen "ControllerHub" hostet.</span><span class="sxs-lookup"><span data-stu-id="71bae-166">The following command will test a site called `pfsignalr` on Azure that hosts an application on port 8080 with a hub named "ControllerHub", using 100 connections.</span></span>

`crank /Connections:100 /Url:http://pfsignalr.cloudapp.net:8080/signalr`
