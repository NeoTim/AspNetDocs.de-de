---
uid: signalr/overview/performance/signalr-connection-density-testing-with-crank
title: Signalr-Verbindungs Dichte Tests mit Kurbel | Microsoft-Dokumentation
author: bradygaster
description: Testen der Verbindungsdichte in SignalR mit Crank
ms.author: bradyg
ms.date: 02/22/2015
ms.assetid: 148d9ca7-1af1-44b6-a9fb-91e261b9b463
msc.legacyurl: /signalr/overview/performance/signalr-connection-density-testing-with-crank
msc.type: authoredcontent
ms.openlocfilehash: 901e039fbb81651ed18d560c99745b7e7f716e01
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78449871"
---
# <a name="signalr-connection-density-testing-with-crank"></a><span data-ttu-id="292e4-103">Testen der Verbindungsdichte in SignalR mit Crank</span><span class="sxs-lookup"><span data-stu-id="292e4-103">SignalR Connection Density Testing with Crank</span></span>

<span data-ttu-id="292e4-104">von [Tom fitzmacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="292e4-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

[!INCLUDE [Consider ASP.NET Core SignalR](~/includes/signalr/signalr-version-disambiguation.md)]

> <span data-ttu-id="292e4-105">In diesem Artikel wird beschrieben, wie Sie mit dem Tool "Kurbel" eine Anwendung mit mehreren simulierten Clients testen.</span><span class="sxs-lookup"><span data-stu-id="292e4-105">This article describes how to use the Crank tool to test an application with multiple simulated clients.</span></span>

<span data-ttu-id="292e4-106">Sobald Ihre Anwendung in ihrer Hostingumgebung (entweder eine Azure-webrolle, IIS oder selbstgeh ostet mithilfe von owin) ausgeführt wird, können Sie die Antwort der Anwendung auf ein hohes Maß an Verbindungs Dichte mit dem Kurbel Tool testen.</span><span class="sxs-lookup"><span data-stu-id="292e4-106">Once your application is running in its hosting environment (either an Azure web role, IIS, or self-hosted using Owin), you can test application's response to a high level of connection density using the Crank tool.</span></span> <span data-ttu-id="292e4-107">Bei der Hostingumgebung kann es sich um einen Internetinformationsdienste (IIS)-Server, einen owin-Host oder eine Azure-webrolle handeln.</span><span class="sxs-lookup"><span data-stu-id="292e4-107">The hosting environment can be an Internet Information Services (IIS) server, an Owin host, or an Azure web role.</span></span> <span data-ttu-id="292e4-108">(Hinweis: Leistungsindikatoren sind für Azure App Service-Web-Apps nicht verfügbar, sodass Sie keine Leistungsdaten aus einem Verbindungs Dichte Test erhalten können.)</span><span class="sxs-lookup"><span data-stu-id="292e4-108">(Note: Performance counters are not available on Azure App Service Web Apps, so you will not be able to get performance data from a connection density test.)</span></span>

<span data-ttu-id="292e4-109">Die Verbindungs Dichte bezieht sich auf die Anzahl der gleichzeitigen TCP-Verbindungen, die auf einem Server eingerichtet werden können.</span><span class="sxs-lookup"><span data-stu-id="292e4-109">Connection Density refers to the number of simultaneous TCP connections that can be established on a server.</span></span> <span data-ttu-id="292e4-110">Jede TCP-Verbindung verursacht einen eigenen Aufwand, und das Öffnen einer großen Anzahl von Verbindungen im Leerlauf erzeugt letztendlich einen Speicher Engpass.</span><span class="sxs-lookup"><span data-stu-id="292e4-110">Each TCP connection incurs its own overhead, and opening a large number of idle connections will eventually create a memory bottleneck.</span></span>

<span data-ttu-id="292e4-111">[Die signalr-Codebasis](https://github.com/signalr/signalr) enthält ein Auslastungs Test Tool mit dem Namen " **Kurbel**".</span><span class="sxs-lookup"><span data-stu-id="292e4-111">[The SignalR codebase](https://github.com/signalr/signalr) includes a load-testing tool called **Crank**.</span></span> <span data-ttu-id="292e4-112">Die neueste Version der Kurbel finden Sie in [der Verzweigung dev](https://github.com/SignalR/signalr/tree/dev) auf GitHub.</span><span class="sxs-lookup"><span data-stu-id="292e4-112">The latest version of Crank can be found in [the Dev branch](https://github.com/SignalR/signalr/tree/dev) on GitHub.</span></span> <span data-ttu-id="292e4-113">Sie können [hier](https://github.com/SignalR/SignalR/archive/dev.zip)ein ZIP-Archiv der dev-Verzweigung der signalr-Codebasis herunterladen.</span><span class="sxs-lookup"><span data-stu-id="292e4-113">You can download a Zip archive of the Dev branch of the SignalR codebase [here](https://github.com/SignalR/SignalR/archive/dev.zip).</span></span>

<span data-ttu-id="292e4-114">Die Kurbel kann verwendet werden, um den Arbeitsspeicher des Servers vollständig zu verzieren und so die Gesamtzahl der Verbindungen im Leerlauf auf der Server Hardware zu berechnen.</span><span class="sxs-lookup"><span data-stu-id="292e4-114">Crank may be used to fully saturate the server's memory in order to calculate the total number of idle connections possible on the server hardware.</span></span> <span data-ttu-id="292e4-115">Alternativ dazu können Sie auch die Kurbel zum Auslastungs Test des Servers mit einer bestimmten Menge an Speicherauslastung verwenden, indem Sie Verbindungen bis zu einer bestimmten Anzahl oder einen bestimmten Arbeitsspeicher Schwellenwert erreichen.</span><span class="sxs-lookup"><span data-stu-id="292e4-115">Alternatively, you may also use Crank to load test the server under a certain amount of memory pressure, by ramping up connections until a specific count or a specific memory threshold is reached.</span></span>

<span data-ttu-id="292e4-116">Beim Testen ist es wichtig, dass Sie Remote Clients verwenden, um den Wettbewerb von Ressourcen (d.h. TCP-Verbindungen und Arbeitsspeicher) zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="292e4-116">When testing, it is important to use remote client(s) to avoid any competition for resources (i.e., TCP connections and memory).</span></span> <span data-ttu-id="292e4-117">Überwachen Sie die Clients, um sicherzustellen, dass keine Engpässe auftreten, die möglicherweise verhindern, dass der Server seine volle Kapazität erreicht (Arbeitsspeicher oder CPU).</span><span class="sxs-lookup"><span data-stu-id="292e4-117">Monitor the client(s) to ensure that they are not hitting any bottlenecks that may prevent the server from reaching its full capacity (memory or CPU).</span></span> <span data-ttu-id="292e4-118">Möglicherweise müssen Sie die Anzahl der Clients erhöhen, um den Server vollständig zu laden.</span><span class="sxs-lookup"><span data-stu-id="292e4-118">You may need to increase the number of clients in order to fully load the server.</span></span>

### <a name="running-a-connection-density-test"></a><span data-ttu-id="292e4-119">Ausführen eines Verbindungs Dichte Tests</span><span class="sxs-lookup"><span data-stu-id="292e4-119">Running a Connection Density Test</span></span>

<span data-ttu-id="292e4-120">In diesem Abschnitt werden die Schritte beschrieben, die zum Ausführen eines Verbindungs Dichte Tests für eine signalr-Anwendung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="292e4-120">This section describes the steps needed to run a connection density test on a SignalR application.</span></span>

1. <span data-ttu-id="292e4-121">Laden Sie den [dev-Branch der signalr](https://github.com/SignalR/SignalR/archive/dev.zip)-Codebasis herunter, und erstellen Sie ihn.</span><span class="sxs-lookup"><span data-stu-id="292e4-121">Download and build the [Dev branch of the SignalR codebase](https://github.com/SignalR/SignalR/archive/dev.zip).</span></span> <span data-ttu-id="292e4-122">Navigieren Sie in einer Eingabeaufforderung zu &lt;Projektverzeichnis&gt;\src\Microsoft.Aspnet.SignalR.Crank\bin\debug.</span><span class="sxs-lookup"><span data-stu-id="292e4-122">In a command prompt, navigate to &lt;project directory&gt;\src\Microsoft.AspNet.SignalR.Crank\bin\debug.</span></span>
2. <span data-ttu-id="292e4-123">Stellen Sie Ihre Anwendung in der vorgesehenen Hostingumgebung bereit.</span><span class="sxs-lookup"><span data-stu-id="292e4-123">Deploy your application to its intended hosting environment.</span></span> <span data-ttu-id="292e4-124">Notieren Sie sich den Endpunkt, den die Anwendung verwendet. Beispielsweise wird in der im [Tutorial "Getting Started](../getting-started/tutorial-getting-started-with-signalr.md)" erstellten Anwendung der Endpunkt `http://<yourhost>:8080/signalr`.</span><span class="sxs-lookup"><span data-stu-id="292e4-124">Make a note of the endpoint that your application uses; for example, in the application created in the [Getting Started tutorial](../getting-started/tutorial-getting-started-with-signalr.md), the endpoint is `http://<yourhost>:8080/signalr`.</span></span>
3. <span data-ttu-id="292e4-125">Installieren Sie [signalr-Leistungsindikatoren](signalr-performance.md#perfcounters) auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="292e4-125">Install [SignalR performance counters](signalr-performance.md#perfcounters) on the server.</span></span> <span data-ttu-id="292e4-126">Wenn Ihre Anwendung in Azure ausgeführt wird, finden Sie unter [Verwenden von signalr-Leistungsindikatoren in einer Azure-webrolle](using-signalr-performance-counters-in-an-azure-web-role.md)Weitere Informationen.</span><span class="sxs-lookup"><span data-stu-id="292e4-126">If your application is running on Azure, see [Using SignalR Performance Counters in an Azure Web Role](using-signalr-performance-counters-in-an-azure-web-role.md).</span></span>

<span data-ttu-id="292e4-127">Nachdem Sie die CodeBase heruntergeladen und erstellt und Leistungsindikatoren auf Ihrem Host installiert haben, befindet sich das Befehlszeilen Tool "Kurbel" im Ordner "`src\Microsoft.AspNet.SignalR.Crank\bin\Debug`".</span><span class="sxs-lookup"><span data-stu-id="292e4-127">Once you've downloaded and built the codebase, and installed performance counters on your host, the Crank command-line tool can be found in the `src\Microsoft.AspNet.SignalR.Crank\bin\Debug` folder.</span></span>

<span data-ttu-id="292e4-128">Folgende Optionen sind für das Tool "Kurbel" verfügbar:</span><span class="sxs-lookup"><span data-stu-id="292e4-128">Available options for the Crank tool include:</span></span>

- <span data-ttu-id="292e4-129">**/?** : Zeigt den Hilfe Bildschirm an.</span><span class="sxs-lookup"><span data-stu-id="292e4-129">**/?**: Shows the help screen.</span></span> <span data-ttu-id="292e4-130">Die verfügbaren Optionen werden auch angezeigt, wenn der **URL** -Parameter ausgelassen wird.</span><span class="sxs-lookup"><span data-stu-id="292e4-130">The available options are also displayed if the **Url** parameter is omitted.</span></span>
- <span data-ttu-id="292e4-131">**/URL**: die URL für signalr-Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="292e4-131">**/Url**: The URL for SignalR connections.</span></span> <span data-ttu-id="292e4-132">Dieser Parameter ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="292e4-132">This parameter is required.</span></span> <span data-ttu-id="292e4-133">Für eine signalr-Anwendung, die die Standard Zuordnung verwendet, endet der Pfad mit "/signalr".</span><span class="sxs-lookup"><span data-stu-id="292e4-133">For a SignalR application using the default mapping, the path will end in "/signalr".</span></span>
- <span data-ttu-id="292e4-134">**/Transport**: der Name des verwendeten Transports.</span><span class="sxs-lookup"><span data-stu-id="292e4-134">**/Transport**: The name of the transport used.</span></span> <span data-ttu-id="292e4-135">Der Standardwert ist `auto`, bei dem das am besten verfügbare Protokoll ausgewählt wird.</span><span class="sxs-lookup"><span data-stu-id="292e4-135">The default is `auto`, which will select the best available protocol.</span></span> <span data-ttu-id="292e4-136">Zu den Optionen gehören `WebSockets`, `ServerSentEvents`und `LongPolling` (`ForeverFrame` ist keine Option für die Kurbel, da der .NET-Client anstelle von Internet Explorer verwendet wird).</span><span class="sxs-lookup"><span data-stu-id="292e4-136">Options include `WebSockets`, `ServerSentEvents`, and `LongPolling` (`ForeverFrame` is not an option for Crank, since the .NET client rather than Internet Explorer is used).</span></span> <span data-ttu-id="292e4-137">Weitere Informationen dazu, wie signalr Transporte auswählt, finden Sie unter [Transporte und Fallbacks](../getting-started/introduction-to-signalr.md#transports).</span><span class="sxs-lookup"><span data-stu-id="292e4-137">For more information on how SignalR selects transports, see [Transports and Fallbacks](../getting-started/introduction-to-signalr.md#transports).</span></span>
- <span data-ttu-id="292e4-138">**/BatchSize**: die Anzahl der Clients, die in jedem Batch hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="292e4-138">**/BatchSize**: The number of clients added in each batch.</span></span> <span data-ttu-id="292e4-139">Der Standardwert ist 50.</span><span class="sxs-lookup"><span data-stu-id="292e4-139">The default is 50.</span></span>
- <span data-ttu-id="292e4-140">**/ConnectInterval**: das Intervall (in Millisekunden) zwischen dem Hinzufügen von Verbindungen.</span><span class="sxs-lookup"><span data-stu-id="292e4-140">**/ConnectInterval**: The interval in milliseconds between adding connections.</span></span> <span data-ttu-id="292e4-141">Der Standard ist 500.</span><span class="sxs-lookup"><span data-stu-id="292e4-141">The default is 500.</span></span>
- <span data-ttu-id="292e4-142">**/Connections**: die Anzahl von Verbindungen, die zum Laden der Anwendung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="292e4-142">**/Connections**: The number of connections used to load-test the application.</span></span> <span data-ttu-id="292e4-143">Der Standardwert ist 100.000.</span><span class="sxs-lookup"><span data-stu-id="292e4-143">The default is 100,000.</span></span>
- <span data-ttu-id="292e4-144">**/ConnectTimeout**: das Timeout in Sekunden, bevor der Test abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="292e4-144">**/ConnectTimeout**: The timeout in seconds before aborting the test.</span></span> <span data-ttu-id="292e4-145">Der Standardwert ist 300.</span><span class="sxs-lookup"><span data-stu-id="292e4-145">The default is 300.</span></span>
- <span data-ttu-id="292e4-146">**Minservermb**: die minimale Anzahl von Server Megabyte, die erreicht werden müssen.</span><span class="sxs-lookup"><span data-stu-id="292e4-146">**MinServerMBytes**: The minimum server megabytes to reach.</span></span> <span data-ttu-id="292e4-147">Der Standard ist 500.</span><span class="sxs-lookup"><span data-stu-id="292e4-147">The default is 500.</span></span>
- <span data-ttu-id="292e4-148">**SendBytes**: die Größe der Nutzlast, die an den Server gesendet wird (in Bytes).</span><span class="sxs-lookup"><span data-stu-id="292e4-148">**SendBytes**: The size of the payload sent to the server in bytes.</span></span> <span data-ttu-id="292e4-149">Die Standardeinstellung ist 0.</span><span class="sxs-lookup"><span data-stu-id="292e4-149">The default is 0.</span></span>
- <span data-ttu-id="292e4-150">**Sendinterval**: die Verzögerung in Millisekunden zwischen Nachrichten an den Server.</span><span class="sxs-lookup"><span data-stu-id="292e4-150">**SendInterval**: The delay in milliseconds between messages to the server.</span></span> <span data-ttu-id="292e4-151">Der Standard ist 500.</span><span class="sxs-lookup"><span data-stu-id="292e4-151">The default is 500.</span></span>
- <span data-ttu-id="292e4-152">**SendTimeout**: das Timeout in Millisekunden für Nachrichten an den Server.</span><span class="sxs-lookup"><span data-stu-id="292e4-152">**SendTimeout**: The timeout in milliseconds for messages to the server.</span></span> <span data-ttu-id="292e4-153">Der Standardwert ist 300.</span><span class="sxs-lookup"><span data-stu-id="292e4-153">The default is 300.</span></span>
- <span data-ttu-id="292e4-154">**Controllerurl**: die URL, unter der ein Client einen Controller-Hub hostet.</span><span class="sxs-lookup"><span data-stu-id="292e4-154">**ControllerUrl**: The Url where one client will host a controller hub.</span></span> <span data-ttu-id="292e4-155">Der Standardwert ist NULL (kein Controller-Hub).</span><span class="sxs-lookup"><span data-stu-id="292e4-155">The default is null (no controller hub).</span></span> <span data-ttu-id="292e4-156">Der controllerhub wird beim Start der Kurbel Sitzung gestartet. Es wurde kein weiterer Kontakt zwischen dem Controller-Hub und der Kurbel ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="292e4-156">The controller hub is started when the Crank session starts; no further contact between the controller hub and Crank is made.</span></span>
- <span data-ttu-id="292e4-157">**Numclients**: die Anzahl der simulierten Clients, die eine Verbindung mit der Anwendung herstellen.</span><span class="sxs-lookup"><span data-stu-id="292e4-157">**NumClients**: The number of simulated clients to connect to the application.</span></span> <span data-ttu-id="292e4-158">Der Standardwert ist 1.</span><span class="sxs-lookup"><span data-stu-id="292e4-158">The default is one.</span></span>
- <span data-ttu-id="292e4-159">**Protokolldatei**: der Dateiname für die Protokolldatei für den Testlauf.</span><span class="sxs-lookup"><span data-stu-id="292e4-159">**Logfile**: The filename for the logfile for the test run.</span></span> <span data-ttu-id="292e4-160">Der Standardwert lautet `crank.csv`.</span><span class="sxs-lookup"><span data-stu-id="292e4-160">The default is `crank.csv`.</span></span>
- <span data-ttu-id="292e4-161">**Sampleingeterval**: die Zeit in Millisekunden zwischen Stichproben von Leistungs Zählern.</span><span class="sxs-lookup"><span data-stu-id="292e4-161">**SampleInterval**: The time in milliseconds between performance counter samples.</span></span> <span data-ttu-id="292e4-162">Der Standardwert lautet 1000.</span><span class="sxs-lookup"><span data-stu-id="292e4-162">The default is 1000.</span></span>
- <span data-ttu-id="292e4-163">**Signalrinstance**: der Instanzname für die Leistungsindikatoren auf dem Server.</span><span class="sxs-lookup"><span data-stu-id="292e4-163">**SignalRInstance**: The instance name for the performance counters on the server.</span></span> <span data-ttu-id="292e4-164">Standardmäßig wird der Client Verbindungsstatus verwendet.</span><span class="sxs-lookup"><span data-stu-id="292e4-164">The default is to use the client connection state.</span></span>

### <a name="example"></a><span data-ttu-id="292e4-165">Beispiel</span><span class="sxs-lookup"><span data-stu-id="292e4-165">Example</span></span>

<span data-ttu-id="292e4-166">Mit dem folgenden Befehl wird eine Website mit dem Namen `pfsignalr` in Azure getestet, die eine Anwendung auf Port 8080 mit einem Hub mit dem Namen "controllerhub" unter Verwendung von 100 Verbindungen hostet.</span><span class="sxs-lookup"><span data-stu-id="292e4-166">The following command will test a site called `pfsignalr` on Azure that hosts an application on port 8080 with a hub named "ControllerHub", using 100 connections.</span></span>

`crank /Connections:100 /Url:http://pfsignalr.cloudapp.net:8080/signalr`
