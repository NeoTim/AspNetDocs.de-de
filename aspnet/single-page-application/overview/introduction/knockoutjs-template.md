---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Single-Page-Anwendung: knockoutjs-Vorlage | Microsoft-Dokumentation'
author: MikeWasson
description: Knockout-Vorlage
ms.author: riande
ms.date: 01/30/2013
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 3a551db1caa9636eb7f2e04c287d3ef371263584
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78467319"
---
# <a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="5b6d1-103">Single-Page-Anwendung: knockoutjs-Vorlage</span><span class="sxs-lookup"><span data-stu-id="5b6d1-103">Single Page Application: KnockoutJS template</span></span>

<span data-ttu-id="5b6d1-104">von [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="5b6d1-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="5b6d1-105">Die Knockout-MVC-Vorlage ist Teil von ASP.net and Web Tools 2012,2</span><span class="sxs-lookup"><span data-stu-id="5b6d1-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="5b6d1-106">Download ASP.net and Web Tools 2012,2</span><span class="sxs-lookup"><span data-stu-id="5b6d1-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)

<span data-ttu-id="5b6d1-107">Das ASP.net and Web Tools 2012,2-Update enthält eine Single-Page Application (Spa)-Vorlage für ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="5b6d1-108">Diese Vorlage ist so konzipiert, dass Sie den Einstieg in das Erstellen von interaktiven Client seitigen Web-Apps erleichtern.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="5b6d1-109">Die Single-Page-Anwendung (Single-Page Application, Spa) ist der allgemeine Begriff für eine Webanwendung, die eine einzelne HTML-Seite lädt und dann die Seite dynamisch aktualisiert, anstatt neue Seiten zu laden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="5b6d1-110">Nach dem anfänglichen Laden der Seite kommuniziert die Spa mit dem Server über AJAX-Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="5b6d1-111">AJAX ist nichts neues, aber heute gibt es JavaScript-Frameworks, die das Erstellen und Verwalten einer großen anspruchsvollen Spa-Anwendung vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="5b6d1-112">Außerdem vereinfachen HTML 5 und CSS3 das Erstellen umfassender Benutzeroberflächen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="5b6d1-113">Um Ihnen den Einstieg zu erleichtern, erstellt die Spa-Vorlage eine Beispielanwendung für eine Aufgabenliste.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="5b6d1-114">In diesem Tutorial werden wir eine Tour durch die Vorlage machen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="5b6d1-115">Zuerst sehen wir uns die Aufgabenlisten Anwendung selbst an und untersuchen dann die technologischen Komponenten, die diese funktionsfähig machen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="5b6d1-116">Erstellen eines neuen Spa-Vorlagen Projekts</span><span class="sxs-lookup"><span data-stu-id="5b6d1-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="5b6d1-117">Anforderungen:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-117">Requirements:</span></span>

- <span data-ttu-id="5b6d1-118">Visual Studio 2012 oder Visual Studio Express 2012 für Web</span><span class="sxs-lookup"><span data-stu-id="5b6d1-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="5b6d1-119">ASP.net Web Tools 2012,2 aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="5b6d1-120">Sie können das Update [hier](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2)installieren.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="5b6d1-121">Starten Sie Visual Studio, und wählen Sie auf der Start Seite die Option **Neues Projekt** aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="5b6d1-122">Oder wählen Sie im Menü **Datei** die Option **neu** und dann **Projekt**aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="5b6d1-123">Wählen Sie im Bereich **Vorlagen** die Option **installierte Vorlagen** aus, und erweitern Sie den Knoten **visuelle C#**  Knoten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="5b6d1-124">Wählen Sie unter **Visualisierung C#** die Option **Web**aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="5b6d1-125">Wählen Sie in der Liste der Projektvorlagen die Option **ASP.NET MVC 4-Webanwendung**aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="5b6d1-126">Geben Sie dem Projekt einen Namen, und klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="5b6d1-127">Wählen Sie im Assistenten für **neue Projekte** die Option **Single-Page-Anwendung**aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="5b6d1-128">Drücken Sie F5, um die Anwendung zu erstellen und auszuführen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="5b6d1-129">Wenn die Anwendung zum ersten Mal ausgeführt wird, wird ein Anmeldebildschirm angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="5b6d1-130">Klicken Sie auf den &quot;registrieren&quot; Link, und erstellen Sie einen neuen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="5b6d1-131">Nachdem Sie sich angemeldet haben, erstellt die Anwendung eine Standard-TODO-Liste mit zwei Elementen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="5b6d1-132">Sie können auf die TODO-Liste hinzufügen klicken, um eine neue Liste hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="5b6d1-133">Benennen Sie die Liste um, fügen Sie der Liste Elemente hinzu, und checken Sie Sie aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="5b6d1-134">Sie können auch Elemente löschen oder eine vollständige Liste löschen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="5b6d1-135">Die Änderungen werden automatisch in einer Datenbank auf dem Server persistent gespeichert (eigentlich localdb, da Sie die Anwendung lokal ausführen).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="5b6d1-136">Architektur der Spa-Vorlage</span><span class="sxs-lookup"><span data-stu-id="5b6d1-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="5b6d1-137">Dieses Diagramm zeigt die Hauptbausteine für die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="5b6d1-138">Auf Serverseite verarbeitet ASP.NET MVC den HTML-Code und verarbeitet außerdem die Formular basierte Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="5b6d1-139">ASP.net-Web-API behandelt alle Anforderungen, die sich auf die todolists und todoitems beziehen, einschließlich dem Erstellen, erstellen, aktualisieren und löschen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="5b6d1-140">Der Client tauscht Daten mit der Web-API im JSON-Format aus.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="5b6d1-141">Entity Framework (EF) ist die O/RM-Schicht.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="5b6d1-142">Er vermittelt zwischen der objektorientierten Welt von ASP.net und der zugrunde liegenden Datenbank.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="5b6d1-143">Die Datenbank verwendet localdb, aber Sie können dies in der Datei "Web. config" ändern.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="5b6d1-144">Normalerweise verwenden Sie localdb für die lokale Entwicklung und stellen dann mithilfe der EF Code First-Migration eine SQL-Datenbank auf dem Server bereit.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="5b6d1-145">Auf der Clientseite verarbeitet die Knockout. js-Bibliothek Seiten Aktualisierungen von AJAX-Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="5b6d1-146">Knockout verwendet die Datenbindung, um die Seite mit den neuesten Daten zu synchronisieren.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="5b6d1-147">Auf diese Weise müssen Sie keinen Code schreiben, der die JSON-Daten durchläuft und das DOM aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="5b6d1-148">Stattdessen fügen Sie deklarative Attribute in den HTML-Code ein, der Knockout mitteilt, wie die Daten dargestellt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="5b6d1-149">Ein großer Vorteil dieser Architektur besteht darin, dass die Präsentationsebene von der Anwendungslogik getrennt wird.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="5b6d1-150">Sie können den Web-API-Teil erstellen, ohne dass Sie wissen, wie Ihre Webseite aussehen soll.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="5b6d1-151">Auf der Clientseite erstellen Sie ein "Ansichts Modell", um diese Daten darzustellen, und das Ansichts Modell verwendet Knockout zum Binden an den HTML-Code.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="5b6d1-152">So können Sie den HTML-Code ganz einfach ändern, ohne das Ansichts Modell zu ändern.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="5b6d1-153">(Wir sehen uns später Knockout etwas an.)</span><span class="sxs-lookup"><span data-stu-id="5b6d1-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="5b6d1-154">Modelle</span><span class="sxs-lookup"><span data-stu-id="5b6d1-154">Models</span></span>

<span data-ttu-id="5b6d1-155">Im Visual Studio-Projekt enthält der Ordner "Models" die Modelle, die auf der Serverseite verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="5b6d1-156">(Es gibt auch Modelle auf der Clientseite.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="5b6d1-157">**"Element", "Objektliste"**</span><span class="sxs-lookup"><span data-stu-id="5b6d1-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="5b6d1-158">Dies sind die Datenbankmodelle für Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="5b6d1-159">Beachten Sie, dass diese Modelle Eigenschaften aufweisen, die aufeinander zeigen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="5b6d1-160">`ToDoList` enthält eine Auflistung von todoitems, und jede `ToDoItem` weist einen Verweis auf die übergeordnete ToDoList auf.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="5b6d1-161">Diese Eigenschaften werden als Navigations Eigenschaften bezeichnet und stellen die 1: n-Beziehung einer Aufgabenliste und deren to-do-Elemente dar.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="5b6d1-162">Die `ToDoItem`-Klasse verwendet auch das **[Foreign nkey]** -Attribut, um anzugeben, dass `ToDoListId` ein Fremdschlüssel in der `ToDoList` Tabelle ist.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="5b6d1-163">Dies weist EF an, der Datenbank eine FOREIGN KEY-Einschränkung hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="5b6d1-164">**"-Doitemdto", "dolistdto"**</span><span class="sxs-lookup"><span data-stu-id="5b6d1-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="5b6d1-165">Diese Klassen definieren die Daten, die an den Client gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="5b6d1-166">"DTO" steht für "Datenübertragungs Objekt".</span><span class="sxs-lookup"><span data-stu-id="5b6d1-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="5b6d1-167">Der DTO definiert, wie die Entitäten in JSON serialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="5b6d1-168">Im Allgemeinen gibt es mehrere Gründe für die Verwendung von DTOs:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="5b6d1-169">Um zu steuern, welche Eigenschaften serialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-169">To control which properties are serialized.</span></span> <span data-ttu-id="5b6d1-170">Der DTO-Wert kann eine Teilmenge der Eigenschaften aus dem Domänen Modell enthalten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="5b6d1-171">Dies kann aus Sicherheitsgründen der Fall sein (um sensible Daten auszublenden) oder um die Datenmenge zu reduzieren, die Sie senden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="5b6d1-172">, Um die Form der Daten zu ändern – z. b., um eine komplexere Datenstruktur zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="5b6d1-173">, Um Geschäftslogik aus der DTO zu bewahren (Trennung von Anliegen).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="5b6d1-174">Wenn Ihre Domänen Modelle aus irgendeinem Grund nicht serialisiert werden können.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="5b6d1-175">Zirkel Verweise können z. b. Probleme verursachen, wenn Sie ein Objekt serialisieren. es gibt Möglichkeiten, dieses Problem in der Web-API zu behandeln (siehe [Verarbeiten von zirkulären Objekt verweisen](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); durch die Verwendung eines DTO wird das Problem jedoch einfach vermieden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="5b6d1-176">In der Spa-Vorlage enthält die DTOs die gleichen Daten wie die Domänen Modelle.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="5b6d1-177">Sie sind jedoch weiterhin nützlich, da Sie Zirkel Verweise aus den Navigations Eigenschaften vermeiden und das allgemeine DTO-Muster veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="5b6d1-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="5b6d1-178">**AccountModels.cs**</span></span>

<span data-ttu-id="5b6d1-179">Diese Datei enthält Modelle für die Standort Mitgliedschaft.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-179">This file contains models for site membership.</span></span> <span data-ttu-id="5b6d1-180">Die `UserProfile`-Klasse definiert das Schema für Benutzerprofile in der Mitgliedschafts Datenbank.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="5b6d1-181">(In diesem Fall handelt es sich bei den einzigen Informationen um die Benutzer-ID und den Benutzernamen.) Die anderen Modellklassen in dieser Datei werden zum Erstellen der Benutzerregistrierung und der Anmeldeformulare verwendet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="5b6d1-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="5b6d1-182">Entity Framework</span></span>

<span data-ttu-id="5b6d1-183">Die Spa-Vorlage verwendet EF-Code First.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="5b6d1-184">In Code First Entwicklung definieren Sie die Modelle zuerst im Code, und EF verwendet das Modell, um die Datenbank zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="5b6d1-185">Sie können EF auch mit einer vorhandenen Datenbank ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)) verwenden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="5b6d1-186">Die `TodoItemContext`-Klasse im Ordner "Models" wird von **dbcontext**abgeleitet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="5b6d1-187">Diese Klasse stellt den "Klebstoff" zwischen den Modellen und EF bereit.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="5b6d1-188">Der `TodoItemContext` enthält eine `ToDoItem` Auflistung und eine `TodoList` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="5b6d1-189">Um die Datenbank abzufragen, schreiben Sie einfach eine LINQ-Abfrage für diese Sammlungen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="5b6d1-190">Hier sehen Sie beispielsweise, wie Sie alle Aufgabenlisten für den Benutzer "Alice" auswählen können:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="5b6d1-191">Sie können der Auflistung auch neue Elemente hinzufügen, Elemente aktualisieren oder Elemente aus der Sammlung löschen und die Änderungen in der Datenbank beibehalten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="5b6d1-192">ASP.net-Web-API Controller</span><span class="sxs-lookup"><span data-stu-id="5b6d1-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="5b6d1-193">In ASP.net-Web-API sind Controller Objekte, die HTTP-Anforderungen verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="5b6d1-194">Wie bereits erwähnt, verwendet die Spa-Vorlage die Web-API, um CRUD-Vorgänge auf `ToDoList`-und `ToDoItem` Instanzen zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="5b6d1-195">Die Controller befinden sich im Ordner "Controllers" der Projekt Mappe.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="5b6d1-196">`TodoController`: verarbeitet HTTP-Anforderungen für to-do-Elemente.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="5b6d1-197">`TodoListController`: verarbeitet HTTP-Anforderungen für Aufgabenlisten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="5b6d1-198">Diese Namen sind von Bedeutung, da die Web-API dem URI-Pfad mit dem Controller Namen entspricht.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="5b6d1-199">(Informationen zur Weiterleitung von HTTP-Anforderungen an Controller durch die Web-API finden Sie unter [Routing in ASP.net-Web-API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="5b6d1-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="5b6d1-200">Sehen wir uns die `ToDoListController`-Klasse an.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="5b6d1-201">Sie enthält einen einzelnen Datenmember:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="5b6d1-202">Der `TodoItemContext` wird für die Kommunikation mit EF verwendet, wie zuvor beschrieben.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="5b6d1-203">Die-Methoden auf dem Controller implementieren die CRUD-Vorgänge.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="5b6d1-204">Die Web-API ordnet HTTP-Anforderungen vom Client den Controller Methoden wie folgt zu:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="5b6d1-205">HTTP-Anforderung</span><span class="sxs-lookup"><span data-stu-id="5b6d1-205">HTTP Request</span></span> | <span data-ttu-id="5b6d1-206">Controller-Methode</span><span class="sxs-lookup"><span data-stu-id="5b6d1-206">Controller Method</span></span> | <span data-ttu-id="5b6d1-207">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="5b6d1-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5b6d1-208">GET /api/todo</span><span class="sxs-lookup"><span data-stu-id="5b6d1-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="5b6d1-209">Ruft eine Auflistung von to-do-Listen ab.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="5b6d1-210">/API/TODO/-*ID* erhalten</span><span class="sxs-lookup"><span data-stu-id="5b6d1-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="5b6d1-211">Ruft eine Aufgabenliste nach ID ab.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="5b6d1-212">/API/TODO/-*ID* platzieren</span><span class="sxs-lookup"><span data-stu-id="5b6d1-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="5b6d1-213">Aktualisiert eine Aufgabenliste.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="5b6d1-214">POST /api/todo</span><span class="sxs-lookup"><span data-stu-id="5b6d1-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="5b6d1-215">Erstellt eine neue Aufgabenliste.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="5b6d1-216">/API/TODO/-*ID* löschen</span><span class="sxs-lookup"><span data-stu-id="5b6d1-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="5b6d1-217">Löscht eine TODO-Liste.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="5b6d1-218">Beachten Sie, dass die URIs für einige Vorgänge Platzhalter für den ID-Wert enthalten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="5b6d1-219">Wenn Sie z. b. eine Liste mit der ID 42 löschen möchten, wird der URI `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="5b6d1-220">Weitere Informationen zur Verwendung der Web-API für CRUD-Vorgänge finden Sie unter [Erstellen einer Web-API, die CRUD-Vorgänge unterstützt](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="5b6d1-221">Der Code für diesen Controller ist recht unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="5b6d1-222">Hier sind einige interessante Punkte:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-222">Here are some interesting points:</span></span>

- <span data-ttu-id="5b6d1-223">Die `GetTodoLists`-Methode verwendet eine LINQ-Abfrage, um die Ergebnisse nach der ID des angemeldeten Benutzers zu filtern.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="5b6d1-224">Auf diese Weise werden einem Benutzer nur die Daten angezeigt, die ihm gehören.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="5b6d1-225">Beachten Sie außerdem, dass eine SELECT-Anweisung verwendet wird, um die `ToDoList` Instanzen in `TodoListDto` Instanzen zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="5b6d1-226">Die Put-und Post-Methoden überprüfen den Modell Status, bevor Sie die Datenbank ändern.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="5b6d1-227">Wenn " **modelstate. IsValid** " den Wert "false" aufweist, geben diese Methoden HTTP 400, ungültige Anforderung.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="5b6d1-228">Weitere Informationen zur Modell Validierung in der Web-API finden Sie unter [Modell Validierung](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="5b6d1-229">Die Controller Klasse wird auch mit dem **[autorisiert]** -Attribut versehen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="5b6d1-230">Dieses Attribut überprüft, ob die HTTP-Anforderung authentifiziert ist.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="5b6d1-231">Wenn die Anforderung nicht authentifiziert ist, empfängt der Client HTTP 401, nicht autorisiert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="5b6d1-232">Weitere Informationen zur Authentifizierung finden Sie unter [Authentifizierung und Autorisierung in ASP.net-Web-API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="5b6d1-233">Die `TodoController`-Klasse ähnelt `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="5b6d1-234">Der größte Unterschied besteht darin, dass keine Get-Methoden definiert werden, da der Client die to-do-Elemente zusammen mit jeder Aufgabenliste erhält.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="5b6d1-235">MVC-Controller und-Ansichten</span><span class="sxs-lookup"><span data-stu-id="5b6d1-235">MVC Controllers and Views</span></span>

<span data-ttu-id="5b6d1-236">Die MVC-Controller befinden sich auch im Ordner "Controllers" der Projekt Mappe.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="5b6d1-237">`HomeController` rendert den Haupt-HTML-Code für die Anwendung.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="5b6d1-238">Die Ansicht für den Home-Controller ist in views/Home/Index. cshtml definiert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="5b6d1-239">Die Start Ansicht rendert unterschiedliche Inhalte, je nachdem, ob der Benutzer angemeldet ist:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="5b6d1-240">Wenn Benutzer angemeldet sind, wird die Hauptbenutzer Oberfläche angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="5b6d1-241">Andernfalls wird der Anmelde Panel angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="5b6d1-242">Beachten Sie, dass dieses bedingte Rendering auf der Serverseite erfolgt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="5b6d1-243">Versuchen Sie niemals, sensible Inhalte auf der Clientseite&#8212;auszublenden, was Sie in einer HTTP-Antwort senden, ist für jemanden sichtbar, der die unformatierten HTTP-Nachrichten überwacht.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-243">Never try to hide sensitive content on the client side&#8212;anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="5b6d1-244">Client seitiges JavaScript und Knockout. js</span><span class="sxs-lookup"><span data-stu-id="5b6d1-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="5b6d1-245">Nun schalten wir die Serverseite der Anwendung auf den Client um.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="5b6d1-246">Die Spa-Vorlage verwendet eine Kombination aus jQuery und Knockout. js, um eine reibungslose, interaktive Benutzeroberfläche zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="5b6d1-247">Knockout. js ist eine JavaScript-Bibliothek, die das Binden von HTML an Daten vereinfacht.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="5b6d1-248">Knockout. js verwendet ein Muster mit dem Namen "Model-View-ViewModel".</span><span class="sxs-lookup"><span data-stu-id="5b6d1-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="5b6d1-249">Beim Modell handelt es sich um die Domänen Daten (TODO-Listen und TODO-Elemente).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="5b6d1-250">Die Ansicht ist das HTML-Dokument.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-250">The view is the HTML document.</span></span>
- <span data-ttu-id="5b6d1-251">Das View-Model ist ein JavaScript-Objekt, das die Modelldaten enthält.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="5b6d1-252">Das Ansichts Modell ist eine Code Abstraktion der Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="5b6d1-253">Die HTML-Darstellung ist nicht bekannt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="5b6d1-254">Stattdessen stellt Sie abstrakte Funktionen der Sicht dar, z. b. "eine Liste von TODO-Elementen".</span><span class="sxs-lookup"><span data-stu-id="5b6d1-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="5b6d1-255">Die Ansicht ist Daten gebunden an das Ansichts Modell.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="5b6d1-256">Updates für das Ansichts Modell werden automatisch in der Ansicht widergespiegelt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="5b6d1-257">Bindungen funktionieren auch in der anderen Richtung.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="5b6d1-258">Ereignisse im Dom (z. b. Klicks) sind Daten gebunden an Funktionen im Ansichts Modell, die AJAX-Aufrufe auslöst.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="5b6d1-259">Die Spa-Vorlage organisiert das Client seitige JavaScript in drei Ebenen:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="5b6d1-260">TODO. DataContext. js: sendet AJAX-Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="5b6d1-261">TODO. Model. js: definiert die Modelle.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="5b6d1-262">TODO. ViewModel. js: definiert das Ansichts Modell.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="5b6d1-263">Diese Skriptdateien befinden sich im Ordner "Scripts/app" der Projekt Mappe.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="5b6d1-264">**TODO. DataContext** verarbeitet alle AJAX-Aufrufe an die Web-API-Controller.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="5b6d1-265">(Die AJAX-Aufrufe für die Anmeldung werden an anderer Stelle in "ajaxLogin. js" definiert.)</span><span class="sxs-lookup"><span data-stu-id="5b6d1-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="5b6d1-266">**TODO. Model. js** definiert die Client seitigen (Browser-) Modelle für die Aufgabenlisten.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="5b6d1-267">Es gibt zwei Modellklassen: "tdoitem" und "tdolist".</span><span class="sxs-lookup"><span data-stu-id="5b6d1-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="5b6d1-268">Viele der Eigenschaften in den Modellklassen sind vom Typ "ko. Observable".</span><span class="sxs-lookup"><span data-stu-id="5b6d1-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="5b6d1-269">Observables gibt an, wie Knockout seine Magie macht.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="5b6d1-270">Aus der [Knockout-Dokumentation](http://knockoutjs.com/documentation/introduction.html): ein Observable-Objekt ist ein JavaScript-Objekt, das Abonnenten über Änderungen benachrichtigen kann.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="5b6d1-271">Wenn der Wert eines Observable-Elements geändert wird, aktualisiert Knockout alle HTML-Elemente, die an diese Observables gebunden sind.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="5b6d1-272">Beispielsweise hat "" für "" die Eigenschaft "Title" und "isdone" die Eigenschaft "Title":</span><span class="sxs-lookup"><span data-stu-id="5b6d1-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="5b6d1-273">Sie können auch ein Observable-Element im Code abonnieren.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="5b6d1-274">Beispielsweise abonniert die Klasse "dedoitem" Änderungen in den Eigenschaften "isdone" und "Title":</span><span class="sxs-lookup"><span data-stu-id="5b6d1-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="5b6d1-275">**Modell anzeigen**</span><span class="sxs-lookup"><span data-stu-id="5b6d1-275">**View Model**</span></span>

<span data-ttu-id="5b6d1-276">Das Ansichts Modell ist in TODO. ViewModel. js definiert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="5b6d1-277">Das Ansichts Modell ist der zentrale Punkt, an dem die Anwendung die HTML-Seitenelemente an die Domänen Daten bindet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="5b6d1-278">In der Spa-Vorlage enthält das Ansichts Modell ein Observable-Array von "Aufgabenlisten".</span><span class="sxs-lookup"><span data-stu-id="5b6d1-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="5b6d1-279">Der folgende Code im Ansichts Modell weist Knockout an, die Bindungen anzuwenden:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="5b6d1-280">HTML und Datenbindung</span><span class="sxs-lookup"><span data-stu-id="5b6d1-280">HTML and Data Binding</span></span>

<span data-ttu-id="5b6d1-281">Der Haupt-HTML-Code für die Seite wird in views/Home/Index. cshtml definiert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="5b6d1-282">Da die Datenbindung verwendet wird, ist der HTML-Code nur eine Vorlage für das, was tatsächlich gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="5b6d1-283">Knockout verwendet *deklarative* Bindungen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="5b6d1-284">Sie binden Seitenelemente an Daten, indem Sie dem-Element ein "Data-BIND"-Attribut hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="5b6d1-285">Hier ist ein sehr einfaches Beispiel, das aus der Knockout-Dokumentation stammt:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="5b6d1-286">In diesem Beispiel aktualisiert Knockout den Inhalt des **&lt;spannen&gt;** Elements mit dem Wert `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="5b6d1-287">Wenn sich dieser Wert ändert, aktualisiert Knockout das Dokument.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="5b6d1-288">Knockout stellt eine Reihe von unterschiedlichen Bindungs Typen bereit.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="5b6d1-289">Im folgenden finden Sie einige der Bindungen, die in der Spa-Vorlage verwendet werden:</span><span class="sxs-lookup"><span data-stu-id="5b6d1-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="5b6d1-290">**foreach**: Hiermit können Sie eine Schleife durchlaufen und für jedes Element in der Liste das gleiche Markup anwenden.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="5b6d1-291">Dies wird zum Rendering der Aufgabenlisten und Aufgaben Elemente verwendet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="5b6d1-292">Innerhalb von **foreach**werden die Bindungen auf die Elemente der Liste angewendet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="5b6d1-293">**Visible**: dient zum Umschalten der Sichtbarkeit.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="5b6d1-294">Blenden Sie Markup aus, wenn eine Auflistung leer ist, oder machen Sie die Fehlermeldung sichtbar.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="5b6d1-295">**value**: wird verwendet, um Formular Werte aufzufüllen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="5b6d1-296">**Click**: bindet ein Click-Ereignis an eine Funktion im Ansichts Modell.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="5b6d1-297">Anti-CSRF-Schutz</span><span class="sxs-lookup"><span data-stu-id="5b6d1-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="5b6d1-298">Website übergreifende Anforderungs Fälschung (Cross-Site Request Fälschung, CSRF) ist ein Angriff, bei dem ein böswilliger Standort eine Anforderung an einen anfälligen Standort sendet, an dem der Benutzer zurzeit angemeldet ist</span><span class="sxs-lookup"><span data-stu-id="5b6d1-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="5b6d1-299">Um CSRF-Angriffe zu verhindern, verwendet ASP.NET MVC *antifälschungstokentoken*, auch als Anforderungs Überprüfungs Token bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="5b6d1-300">Die Idee besteht darin, dass der Server ein zufällig generiertes Token in eine Webseite einfügt.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="5b6d1-301">Wenn der Client Daten an den Server übermittelt, muss er diesen Wert in die Anforderungs Nachricht einschließen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="5b6d1-302">Anti-fälschungstoken funktionieren, weil die böswillige Seite die Token des Benutzers aufgrund von Richtlinien für denselben Ursprung nicht lesen kann.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="5b6d1-303">(Die gleichen Ursprungs Richtlinien verhindern, dass Dokumente, die auf zwei unterschiedlichen Standorten gehostet werden, auf die Inhalte der anderen zugreifen.)</span><span class="sxs-lookup"><span data-stu-id="5b6d1-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="5b6d1-304">ASP.NET MVC bietet integrierte Unterstützung für antifälschungstoken, über die [antifälschungs](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) Klasse und das [[validateantiforgerytoken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) -Attribut.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="5b6d1-305">Diese Funktion ist derzeit nicht in die Web-API integriert.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="5b6d1-306">Die Spa-Vorlage enthält jedoch eine benutzerdefinierte Implementierung für die Web-API.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="5b6d1-307">Dieser Code wird in der `ValidateHttpAntiForgeryTokenAttribute`-Klasse definiert, die sich im Ordner "Filters" der Projekt Mappe befindet.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="5b6d1-308">Weitere Informationen zu Anti-CSRF in der Web-API finden Sie unter [verhindern von Cross-Site Request Fälschungs Angriffen (CSRF)](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="5b6d1-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="5b6d1-309">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="5b6d1-309">Conclusion</span></span>

<span data-ttu-id="5b6d1-310">Die Spa-Vorlage ist so konzipiert, dass Sie schnell mit dem Schreiben moderner, interaktiver Webanwendungen beginnen können.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="5b6d1-311">Es verwendet die Knockout. js-Bibliothek, um die Darstellung (HTML-Markup) von der Daten-und Anwendungslogik zu trennen.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="5b6d1-312">Knockout ist jedoch nicht die einzige JavaScript-Bibliothek, die Sie zum Erstellen einer Spa verwenden können.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="5b6d1-313">Wenn Sie andere Optionen erkunden möchten, sehen Sie sich die von der [Community erstellten Spa-Vorlagen](../templates/index.md)an.</span><span class="sxs-lookup"><span data-stu-id="5b6d1-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
