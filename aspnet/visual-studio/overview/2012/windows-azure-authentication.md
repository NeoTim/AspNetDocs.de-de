---
uid: visual-studio/overview/2012/windows-azure-authentication
title: Windows Azure-Authentifizierung | Microsoft-Dokumentation
author: Rick-Anderson
description: Mit Microsoft ASP.NET Tools für Windows Azure Active Directory können Sie die Authentifizierung für Webanwendungen, die auf Windows Azure-Websites gehostet werden, auf einfache Weise aktivieren...
ms.author: riande
ms.date: 02/20/2013
ms.assetid: a3cef801-a54b-4ebd-93c3-55764e2e14b1
msc.legacyurl: /visual-studio/overview/2012/windows-azure-authentication
msc.type: authoredcontent
ms.openlocfilehash: ce98effe18dd739504fb0d5453bae8a46c3ba102
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 02/19/2020
ms.locfileid: "77457478"
---
# <a name="windows-azure-authentication"></a><span data-ttu-id="8bc27-103">Microsoft Azure-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="8bc27-103">Windows Azure Authentication</span></span>

<span data-ttu-id="8bc27-104">von [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="8bc27-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="8bc27-105">Mit Microsoft ASP.NET Tools für Windows Azure Active Directory können Sie die Authentifizierung für Webanwendungen, die auf [Windows Azure](https://www.windowsazure.com/home/features/web-sites/)-Websites gehostet werden, einfach aktivieren.</span><span class="sxs-lookup"><span data-stu-id="8bc27-105">Microsoft ASP.NET tools for Windows Azure Active Directory makes it simple to enable authentication for web applications hosted on [Windows Azure Web Sites](https://www.windowsazure.com/home/features/web-sites/).</span></span> <span data-ttu-id="8bc27-106">Sie können die Windows Azure-Authentifizierung verwenden, um Office 365-Benutzer von Ihrer Organisation aus zu authentifizieren, Unternehmenskonten, die von Ihrer lokalen Active Directory oder von Benutzern, die in ihrer eigenen benutzerdefinierten Windows Azure Active Directory Domäne erstellt wurden, synchronisiert werden.</span><span class="sxs-lookup"><span data-stu-id="8bc27-106">You can use Windows Azure Authentication to authenticate Office 365 users from your organization, corporate accounts synced from your on-premise Active Directory or users created in your own custom Windows Azure Active Directory domain.</span></span> <span data-ttu-id="8bc27-107">Durch Aktivieren der Windows Azure-Authentifizierung wird Ihre Anwendung für die Authentifizierung von Benutzern mithilfe eines einzelnen [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) -Mandanten konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="8bc27-107">Enabling Windows Azure Authentication configures your application to authenticate users using a single [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) tenant.</span></span>
>
> <span data-ttu-id="8bc27-108">Das Windows Azure-Authentifizierungs Tool ASP.net wird für Webrollen in einem Cloud-Dienst nicht unterstützt. Wir planen dies jedoch in einer zukünftigen Version.</span><span class="sxs-lookup"><span data-stu-id="8bc27-108">The ASP.NET Windows Azure Authentication tool is not supported for web roles in a cloud service but we plan to do so in a future release.</span></span> <span data-ttu-id="8bc27-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) wird in Windows Azure-Webrollen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="8bc27-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) is supported in Windows Azure web roles.</span></span>
>
> <span data-ttu-id="8bc27-110">Ausführliche Informationen zum Einrichten der Synchronisierung zwischen Ihrem lokalen Active Directory und Ihrem Windows Azure Active Directory-Mandanten finden Sie [unter Verwenden von AD FS 2,0 zum Implementieren und Verwalten von Single Sign-on](https://technet.microsoft.com/library/jj205462.aspx).</span><span class="sxs-lookup"><span data-stu-id="8bc27-110">For details on how to setup synchronization between your on-premise Active Directory and your Windows Azure Active Directory tenant please see [Use AD FS 2.0 to implement and manage single sign-on](https://technet.microsoft.com/library/jj205462.aspx).</span></span>
>
> <span data-ttu-id="8bc27-111">Windows Azure Active Directory ist derzeit als [kostenloser Vorschau Dienst](https://azure.microsoft.com/free/?WT.mc_id=A443DD604)verfügbar.</span><span class="sxs-lookup"><span data-stu-id="8bc27-111">Windows Azure Active Directory is currently available as a [free preview service](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>

## <a name="requirements"></a><span data-ttu-id="8bc27-112">Anforderungen:</span><span class="sxs-lookup"><span data-stu-id="8bc27-112">Requirements:</span></span>

- <span data-ttu-id="8bc27-113">Visual Studio 2012 oder [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span><span class="sxs-lookup"><span data-stu-id="8bc27-113">Visual Studio 2012 or [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span></span>
- <span data-ttu-id="8bc27-114">Erweiterungen für [Webtools für Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) oder [Webtools Erweiterungen für Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="8bc27-114">[Web Tools Extensions for Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) or [Web Tools Extensions for Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span></span>
- <span data-ttu-id="8bc27-115">[Microsoft ASP.NET Tools für Windows Azure Active Directory – Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) oder [Microsoft ASP.NET Tools für Windows Azure Active Directory – Visual Studio Express 2012 für Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span><span class="sxs-lookup"><span data-stu-id="8bc27-115">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) or [Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio Express 2012 for Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span></span>

## <a name="create-an-aspnet-web-application-with-visual-studio-2012"></a><span data-ttu-id="8bc27-116">Erstellen einer ASP.NET-Webanwendung mit Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="8bc27-116">Create an ASP.NET Web Application with Visual Studio 2012</span></span>

<span data-ttu-id="8bc27-117">Sie können jede Webanwendung mit Visual Studio 2012 erstellen. in diesem Tutorial wird die ASP.NET MVC-intranetvorlage verwendet.</span><span class="sxs-lookup"><span data-stu-id="8bc27-117">You can create any Web Application with Visual Studio 2012, this tutorial uses the ASP.NET MVC intranet template.</span></span>

1. <span data-ttu-id="8bc27-118">Erstellen Sie eine neue ASP.NET MVC 4-Intranetanwendung, und übernehmen Sie alle Standardeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="8bc27-118">Create a new ASP.NET MVC 4 Intranet Application and accept all the defaults.</span></span> <span data-ttu-id="8bc27-119">(Hierbei muss es sich um einen in **tra** NET und nicht um ein **ter** NET-Projekt handeln.)</span><span class="sxs-lookup"><span data-stu-id="8bc27-119">(It must be an In **tra** net and not In **ter** net project).</span></span>
     ![](windows-azure-authentication/_static/image1.png)

## <a name="enable-window-azure-authentication-when-you-are-a-global-administrator-of-the-tenet"></a><span data-ttu-id="8bc27-120">Aktivieren Sie die Azure-Authentifizierung in Windows (wenn Sie ein globaler Administrator des Mandanten sind).</span><span class="sxs-lookup"><span data-stu-id="8bc27-120">Enable Window Azure Authentication (When you are a Global Administrator of the Tenet)</span></span>

<span data-ttu-id="8bc27-121">Wenn Sie über keinen vorhandenen Windows Azure Active Directory-Mandanten (z. b. über ein vorhandenes Office 365-Konto) verfügen, können Sie einen neuen Mandanten erstellen, indem Sie sich für ein [neues Windows Azure Active Directory-Konto](https://g.microsoftonline.com/0AX00en/5)registrieren.</span><span class="sxs-lookup"><span data-stu-id="8bc27-121">If you do not have an existing Windows Azure Active Directory tenant (For example, through an existing Office 365 account) you can create a new tenant by signing up for a [new Windows Azure Active Directory account](https://g.microsoftonline.com/0AX00en/5).</span></span>

1. <span data-ttu-id="8bc27-122">Wählen Sie im Menü Projekt die Option **Windows Azure-Authentifizierung aktivieren**:</span><span class="sxs-lookup"><span data-stu-id="8bc27-122">From the Project menu select **Enable Windows Azure Authentication**:</span></span>

   ![](windows-azure-authentication/_static/image2.png)

2. <span data-ttu-id="8bc27-123">Geben Sie die Domäne für Ihren Windows Azure Active Directory-Mandanten ein (z. b. contoso.onmicrosoft.com), und klicken Sie auf **aktivieren**:</span><span class="sxs-lookup"><span data-stu-id="8bc27-123">Enter the domain for your Windows Azure Active Directory tenant (for example, contoso.onmicrosoft.com) and click **Enable**:</span></span>

![](windows-azure-authentication/_static/image3.png)

3. <span data-ttu-id="8bc27-124">Melden Sie sich im Dialogfeld für die Webauthentifizierung als Administrator für Ihren Windows Azure Active Directory-Mandanten an:</span><span class="sxs-lookup"><span data-stu-id="8bc27-124">In the Web Authentication dialog sign in as an administrator for your Windows Azure Active Directory tenant:</span></span>

   ![](windows-azure-authentication/_static/image4.png)

![](windows-azure-authentication/_static/image5.png)

## <a name="enable-window-azure-by-a-non-administrator-of-the-tenet"></a><span data-ttu-id="8bc27-125">Aktivieren von Windows Azure durch einen nicht Administrator des Mandanten</span><span class="sxs-lookup"><span data-stu-id="8bc27-125">Enable Window Azure by a non-administrator of the Tenet</span></span>

<span data-ttu-id="8bc27-126">Wenn Sie keine globalen Administrator Rechte für Ihren Windows Azure Active Directory-Mandanten haben, können Sie das Kontrollkästchen für die Bereitstellung der Anwendung deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="8bc27-126">If you do not have Global Administrator privilege for your Windows Azure Active Directory tenant, you can uncheck the checkbox for provisioning the application.</span></span>

![](windows-azure-authentication/_static/image6.png)

<span data-ttu-id="8bc27-127">Im Dialogfeld werden die **Domäne**, die **Anwendungs Prinzipal-ID** und die **Antwort-URL** angezeigt, die für die Bereitstellung der Anwendung mit einem Azure Active Directory Tenet erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="8bc27-127">The dialog will display the **Domain**, **Application Principal Id** and **Reply URL** which are required for provisioning the application with an Azure Active Directory tenet.</span></span> <span data-ttu-id="8bc27-128">Sie müssen diese Informationen an jemanden übergeben, der über ausreichende Berechtigungen zum Bereitstellen der Anwendung verfügt.</span><span class="sxs-lookup"><span data-stu-id="8bc27-128">You need to give this information to someone who has sufficient privilege to provision the application.</span></span> <span data-ttu-id="8bc27-129">Ausführliche Informationen zur Verwendung des Cmdlets zum manuellen Erstellen des Dienst Prinzipals finden Sie unter Gewusst[wie: Implementieren von Single Sign-on mit Windows Azure Active Directory ASP.NET-Anwendung](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) .</span><span class="sxs-lookup"><span data-stu-id="8bc27-129">See[How to implement single sign-on with Windows Azure Active Directory - ASP.NET Application](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) for details on how to use cmdlet to create the service principal manually.</span></span>
<span data-ttu-id="8bc27-130">Nachdem die Anwendung erfolgreich bereitgestellt wurde, können Sie auf Weiter klicken, **um die Datei "Web. config" mit den ausgewählten Einstellungen zu aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="8bc27-130">Once the application has been successfully provisioned, you can click on **Continue to update web.config with the selected settings**.</span></span> <span data-ttu-id="8bc27-131">Wenn Sie die Entwicklung der Anwendung fortsetzen möchten, während Sie auf die Bereitstellung wartet, können Sie auf Schließen klicken, **um die Einstellungen in der Projektdatei zu merken**.</span><span class="sxs-lookup"><span data-stu-id="8bc27-131">If you want to continue developing the application while waiting for provisioning to happen, you can click **Close to remember the settings in project file**.</span></span> <span data-ttu-id="8bc27-132">Wenn Sie das nächste Mal aufrufen von Windows Azure-Authentifizierung aktivieren und das Kontrollkästchen Bereitstellung deaktivieren, werden die gleichen Einstellungen angezeigt, und Sie können auf **weiter**klicken und dann auf **diese Einstellungen in Web. config anwenden**.</span><span class="sxs-lookup"><span data-stu-id="8bc27-132">The next time you invoke Enable Windows Azure Authentication and uncheck the provisioning checkbox, you will see the same settings and you can click **Continue**, then click, **Apply these settings in web.config**.</span></span>

1. <span data-ttu-id="8bc27-133">Warten Sie, bis Ihre Anwendung für die Windows Azure-Authentifizierung konfiguriert und mit Windows Azure Active Directory bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="8bc27-133">Wait while your application is configured for Windows Azure Authentication and provisioned with Windows Azure Active Directory.</span></span>
2. <span data-ttu-id="8bc27-134">Nachdem die Windows Azure-Authentifizierung für Ihre Anwendung aktiviert wurde, klicken Sie auf **Schließen:**</span><span class="sxs-lookup"><span data-stu-id="8bc27-134">Once Windows Azure Authentication has been enabled for your application, click **Close:**</span></span>

    ![](windows-azure-authentication/_static/image7.png)
3. <span data-ttu-id="8bc27-135">Drücken Sie F5, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="8bc27-135">Hit F5 to run your application.</span></span> <span data-ttu-id="8bc27-136">Sie sollten automatisch auf die Anmeldeseite umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="8bc27-136">You should automatically get redirected to login page.</span></span> <span data-ttu-id="8bc27-137">Verwenden Sie für die Anmeldung bei der Anwendung die Anmelde Informationen für das Verzeichnis Grundsatz.</span><span class="sxs-lookup"><span data-stu-id="8bc27-137">Use the directory tenet user credentials to login to the application..</span></span>

    ![](windows-azure-authentication/_static/image1.jpg)
4. <span data-ttu-id="8bc27-138">Da Ihre Anwendung zurzeit ein selbst signiertes Test Zertifikat verwendet, wird im Browser eine Warnung angezeigt, dass das Zertifikat nicht von einer vertrauenswürdigen Zertifizierungsstelle ausgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="8bc27-138">Because your application is currently using a self-signed test certificate you will receive a warning from the browser that the certificate was not issued by a trusted certificate authority.</span></span>

    <span data-ttu-id="8bc27-139">Diese Warnung kann bei der lokalen Entwicklung problemlos ignoriert werden **, indem Sie auf diese Website weiter klicken:**</span><span class="sxs-lookup"><span data-stu-id="8bc27-139">This warning can be safely ignored during local development by clicking **Continue to this website:**</span></span>

    ![](windows-azure-authentication/_static/image8.png)
5. <span data-ttu-id="8bc27-140">Sie haben sich nun mit der Windows Azure-Authentifizierung erfolgreich bei Ihrer Anwendung angemeldet!</span><span class="sxs-lookup"><span data-stu-id="8bc27-140">You have now successfully logged in to your application using Windows Azure Authentication!</span></span>

    ![](windows-azure-authentication/_static/image2.jpg)

<span data-ttu-id="8bc27-141">Durch das Aktivieren der Windows Azure-Authentifizierung werden die folgenden Änderungen an Ihrer Anwendung vorgenommen:</span><span class="sxs-lookup"><span data-stu-id="8bc27-141">Enabling Windows Azure authentication makes the following changes to your application:</span></span>

- <span data-ttu-id="8bc27-142">Dem Projekt wird eine Anti-Cross-Site Request Fälschung ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)))-Klasse ( *App\_start\antixsrfconfig.cs* ) hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bc27-142">An Anti-Cross-Site Request Forgery ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))) class ( *App\_Start\AntiXsrfConfig.cs* ) is added to your project.</span></span>
- <span data-ttu-id="8bc27-143">Die `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` nuget-Pakete werden dem Projekt hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="8bc27-143">The NuGet packages `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` is added to your project.</span></span>
- <span data-ttu-id="8bc27-144">Windows Identity Foundation-Einstellungen in Ihrer Anwendung werden so konfiguriert, dass Sie Sicherheits Token von Ihrem Windows Azure Active Directory-Mandanten akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="8bc27-144">Windows Identity Foundation settings in your application will be configured to accept security tokens from your Windows Azure Active Directory tenant.</span></span> <span data-ttu-id="8bc27-145">Klicken Sie auf das folgende Bild, um eine erweiterte Ansicht der Änderungen an der Datei *Web. config* anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8bc27-145">Click on the image below to see an expanded view of the changes made to the *Web.config* file.</span></span>

     ![](windows-azure-authentication/_static/image9.png)
- <span data-ttu-id="8bc27-146">Ein Dienst Prinzipal für Ihre Anwendung in Ihrem Windows Azure Active Directory-Mandanten wird bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="8bc27-146">A service principal for your application in your Windows Azure Active Directory tenant will be provisioned.</span></span>
- <span data-ttu-id="8bc27-147">HTTPS ist aktiviert.</span><span class="sxs-lookup"><span data-stu-id="8bc27-147">HTTPS is enabled.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="8bc27-148">Bereitstellen der Anwendung in Windows Azure</span><span class="sxs-lookup"><span data-stu-id="8bc27-148">Deploy the application to Windows Azure</span></span>

<span data-ttu-id="8bc27-149">Umfassende Anweisungen finden Sie unter Bereitstellen [einer ASP.NET-Webanwendung auf einer Windows Azure](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet)-Website.</span><span class="sxs-lookup"><span data-stu-id="8bc27-149">For complete instructions, see [Deploying an ASP.NET Web Application to a Windows Azure Web Site](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span></span>

<span data-ttu-id="8bc27-150">So veröffentlichen Sie eine Anwendung mithilfe der Windows Azure-Authentifizierung auf einer Azure-Website:</span><span class="sxs-lookup"><span data-stu-id="8bc27-150">To publish an application using Windows Azure Authentication to an Azure Web Site:</span></span>

1. <span data-ttu-id="8bc27-151">Klicken Sie mit der rechten Maustaste auf die Anwendung, und wählen Sie **veröffentlichen**</span><span class="sxs-lookup"><span data-stu-id="8bc27-151">Right click on your application and select **Publish:**</span></span>

    ![](windows-azure-authentication/_static/image3.jpg)
2. <span data-ttu-id="8bc27-152">Laden Sie im Dialogfeld "Web veröffentlichen" ein Veröffentlichungs Profil für Ihre Azure-Website herunter, und importieren Sie es.</span><span class="sxs-lookup"><span data-stu-id="8bc27-152">From the Publish Web dialog download and import a publishing profile for your Azure Web Site.</span></span>

    ![](windows-azure-authentication/_static/image4.jpg)
3. <span data-ttu-id="8bc27-153">Auf der Registerkarte **Verbindung** wird die **Ziel-URL** angezeigt (die öffentliche URL für Ihre Anwendung).</span><span class="sxs-lookup"><span data-stu-id="8bc27-153">The **Connection** tab shows the **Destination URL** (the public facing URL for your application).</span></span> <span data-ttu-id="8bc27-154">Klicken Sie zum Testen der Verbindung auf **Verbindung** überprüfen:</span><span class="sxs-lookup"><span data-stu-id="8bc27-154">Click **Validate Connection** to test your connection:</span></span>

    ![](windows-azure-authentication/_static/image5.jpg)
4. <span data-ttu-id="8bc27-155">Wenn Sie auf dieser Azure-Website veröffentlicht haben, sollten Sie die Einstellung **zusätzliche Dateien am Ziel entfernen** überprüfen, um sicherzustellen, dass Ihre Anwendung ordnungsgemäß veröffentlicht wird.</span><span class="sxs-lookup"><span data-stu-id="8bc27-155">If you have published to this Azure Web Site previously consider checking the **Remove additional files at destination** setting to ensure your application publishes cleanly.</span></span> <span data-ttu-id="8bc27-156">Beachten Sie, dass das Kontrollkästchen **Windows Azure-Authentifizierung aktivieren aktiviert** ist.</span><span class="sxs-lookup"><span data-stu-id="8bc27-156">Notice the **Enable Windows Azure Authentication** check box is selected.</span></span>

    ![](windows-azure-authentication/_static/image10.png)
5. <span data-ttu-id="8bc27-157">Optional: Klicken Sie auf der Registerkarte **Vorschau** auf **Vorschau starten** , um die bereitgestellten Dateien anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8bc27-157">Optional: On the **Preview** tab click **Start Preview** to see the files deployed.</span></span>

    ![](windows-azure-authentication/_static/image6.jpg)
6. <span data-ttu-id="8bc27-158">Klicken Sie auf **veröffentlichen.**</span><span class="sxs-lookup"><span data-stu-id="8bc27-158">Click **Publish.**</span></span>

    <span data-ttu-id="8bc27-159">Sie werden aufgefordert, die Windows Azure-Authentifizierung für den Zielhost zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="8bc27-159">You will be prompted to enable Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="8bc27-160">Klicken Sie zum Fortfahren auf **aktivieren** :</span><span class="sxs-lookup"><span data-stu-id="8bc27-160">Click **Enable** to continue:</span></span>

    ![](windows-azure-authentication/_static/image11.png)
7. <span data-ttu-id="8bc27-161">Geben Sie Ihre Administrator Anmelde Informationen für Ihren Windows Azure Active Directory-Mandanten ein:</span><span class="sxs-lookup"><span data-stu-id="8bc27-161">Enter your administrator credentials for your Windows Azure Active Directory tenant:</span></span>

    ![](windows-azure-authentication/_static/image7.jpg)
8. <span data-ttu-id="8bc27-162">Nachdem Ihre Anwendung erfolgreich veröffentlicht wurde, wird ein Browser mit der veröffentlichten Website geöffnet.</span><span class="sxs-lookup"><span data-stu-id="8bc27-162">Once your application has been successfully published, a browser will open to the published web site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8bc27-163">Es kann bis zu fünf Minuten dauern (in der Regel muss weniger), damit Ihre Anwendung vollständig mit Windows-Azure Active Directory bereitgestellt wird, nachdem die Windows Azure-Authentifizierung für den Zielhost aktiviert wurde.</span><span class="sxs-lookup"><span data-stu-id="8bc27-163">It may take up to five minutes (typically must less) for your application to be fully provisioned with Windows Azure Active Directory after enabling Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="8bc27-164">Wenn Sie die Anwendung zum ersten Mal ausführen, wenn Sie Fehler ACS50001: die vertrauende Seite mit dem Namen "[Realm]" wurde nicht gefunden. warten Sie dann einige Minuten, und führen Sie die Anwendung erneut aus.</span><span class="sxs-lookup"><span data-stu-id="8bc27-164">When you first run your application if you receive error ACS50001: Relying party with name ‘[realm]' was not found, then wait a few minutes and try running the application again.</span></span>
9. <span data-ttu-id="8bc27-165">Melden Sie sich, wenn Sie dazu aufgefordert werden, als Benutzer in Ihrem Verzeichnis an:</span><span class="sxs-lookup"><span data-stu-id="8bc27-165">When prompted, log in as a user in your directory:</span></span>

    ![](windows-azure-authentication/_static/image8.jpg)
10. <span data-ttu-id="8bc27-166">Sie haben sich nun mithilfe der Windows Azure-Authentifizierung erfolgreich bei ihrer in Azure gehosteten Anwendung angemeldet.</span><span class="sxs-lookup"><span data-stu-id="8bc27-166">You have now successfully logged into your Azure hosted application using Windows Azure Authentication.</span></span>

     ![](windows-azure-authentication/_static/image9.jpg)

## <a name="known-issues"></a><span data-ttu-id="8bc27-167">Bekannte Probleme</span><span class="sxs-lookup"><span data-stu-id="8bc27-167">Known Issues</span></span>

#### <a name="role-based-authorization-fails-when-using-windows-azure-authentication"></a><span data-ttu-id="8bc27-168">Die rollenbasierte Autorisierung schlägt bei Verwendung der Windows Azure-Authentifizierung fehl.</span><span class="sxs-lookup"><span data-stu-id="8bc27-168">Role-based authorization fails when using Windows Azure Authentication</span></span>

<span data-ttu-id="8bc27-169">Von der Windows Azure-Authentifizierung wird derzeit nicht der erforderliche Rollen Anspruch bereitgestellt, damit die rollenbasierte Autorisierung ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="8bc27-169">Windows Azure Authentication does not currently provide the necessary role claim so that role-based authorization can be performed.</span></span> <span data-ttu-id="8bc27-170">Die Rolle des authentifizierten Benutzers muss manuell von Windows Azure Active Directory abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="8bc27-170">The role of the authenticated user must be manually retrieved from Windows Azure Active Directory.</span></span>

#### <a name="browsing-to-an-application-with-windows-azure-authentication-results-in-the-error-acs20016-the-domain-of-the-logged-in-user-livecom-does-not-match-any-allowed-domain-of-this-sts"></a><span data-ttu-id="8bc27-171">Das Navigieren zu einer Anwendung mit Windows Azure-Authentifizierung führt zu dem Fehler "ACS20016 die Domäne des angemeldeten Benutzers (Live.com) entspricht keiner zulässigen Domäne dieses STS".</span><span class="sxs-lookup"><span data-stu-id="8bc27-171">Browsing to an application with Windows Azure Authentication results in the error "ACS20016 The domain of the logged in user (live.com) does not match any allowed domain of this STS"</span></span>

<span data-ttu-id="8bc27-172">Wenn Sie bereits bei einem Microsoft-Konto angemeldet sind (z. b. hotmail.com, Live.com, Outlook.com) und Sie versuchen, auf eine Anwendung zuzugreifen, für die die Windows Azure-Authentifizierung aktiviert ist, erhalten Sie möglicherweise eine 400-Fehler Antwort, weil die Domäne Ihres Microsoft-Kontos wird von Windows Azure Active Directory nicht erkannt.</span><span class="sxs-lookup"><span data-stu-id="8bc27-172">If you are already logged in to a Microsoft Account (for example hotmail.com, live.com, outlook.com) and you attempt to access an application that has enabled Windows Azure Authentication you may get a 400 error response because the domain of your Microsoft Account is not recognized by Windows Azure Active Directory.</span></span> <span data-ttu-id="8bc27-173">Melden Sie sich zunächst bei Ihrem Microsoft-Konto ab, um sich bei der Anwendung anzumelden.</span><span class="sxs-lookup"><span data-stu-id="8bc27-173">To log into the application, log out from your Microsoft Account first.</span></span>

#### <a name="logging-into-an-application-with-windows-azure-authentication-enabled-and-a-x509certificatevalidationmode-other-than-none-results-in-certificate-validation-errors-for-the-accountsaccesscontrolwindowsnet-certificate"></a><span data-ttu-id="8bc27-174">Das Anmelden bei einer Anwendung mit aktivierter Windows Azure-Authentifizierung und einer anderen X509CertificateValidationMode als "None" führt zu Zertifikat Validierungs Fehlern für das Accounts.AccessControl.Windows.net-Zertifikat.</span><span class="sxs-lookup"><span data-stu-id="8bc27-174">Logging into an application with Windows Azure Authentication enabled and a X509CertificateValidationMode other than None results in certificate validation errors for the accounts.accesscontrol.windows.net certificate</span></span>

<span data-ttu-id="8bc27-175">Die Überprüfung des Zertifikats ist nicht erforderlich und sollte deaktiviert bleiben.</span><span class="sxs-lookup"><span data-stu-id="8bc27-175">Certificate validation is not required and should be left disabled.</span></span> <span data-ttu-id="8bc27-176">Der Fingerabdruck des Aussteller Zertifikats wird von wsfederationauthenticationmodule überprüft.</span><span class="sxs-lookup"><span data-stu-id="8bc27-176">The thumbprint of the issuer certificate is validated by the WSFederationAuthenticationModule.</span></span>

#### <a name="when-attempting-to-enable-windows-azure-authentication-the-web-authentication-dialog-shows-the-error-acs20016-the-domain-of-the-logged-in-user-contosoonmicrosoftcom-does-not-match-any-allowed-domain-of-this-sts"></a><span data-ttu-id="8bc27-177">Wenn Sie versuchen, die Windows Azure-Authentifizierung zu aktivieren, wird im Dialogfeld "Webauthentifizierung" der folgende Fehler angezeigt: "ACS20016: die Domäne des angemeldeten Benutzers (contoso.onmicrosoft.com) entspricht keiner zulässigen Domäne dieses STS".</span><span class="sxs-lookup"><span data-stu-id="8bc27-177">When attempting to enable Windows Azure Authentication the Web Authentication dialog shows the error "ACS20016: The domain of the logged in user (contoso.onmicrosoft.com) does not match any allowed domain of this STS."</span></span>

<span data-ttu-id="8bc27-178">Dieser Fehler wird möglicherweise angezeigt, wenn Sie sich zuvor erfolgreich mit einem anderen Windows Azure Active Directory-Konto innerhalb desselben Visual Studio-Prozesses angemeldet haben.</span><span class="sxs-lookup"><span data-stu-id="8bc27-178">You may see this error when you have previously successfully logged in using a different Windows Azure Active Directory account from within the same Visual Studio process.</span></span> <span data-ttu-id="8bc27-179">Melden Sie sich beim angegebenen Konto ab, oder starten Sie Visual Studio neu.</span><span class="sxs-lookup"><span data-stu-id="8bc27-179">Log out from the specified account or restart Visual Studio.</span></span> <span data-ttu-id="8bc27-180">Wenn Sie sich zuvor angemeldet und die Option "angemeldet bleiben" ausgewählt haben, müssen Sie möglicherweise Ihre Browser Cookies löschen.</span><span class="sxs-lookup"><span data-stu-id="8bc27-180">If you previously logged in and selected the option to "Keep me signed in" then you may need to clear your browser cookies.</span></span>

## <a name="acs20012-the-request-is-not-a-valid-ws-federation-protocol-message"></a><span data-ttu-id="8bc27-181">ACS20012: die Anforderung ist keine gültige WS-Verbund-Protokollmeldung.</span><span class="sxs-lookup"><span data-stu-id="8bc27-181">ACS20012: The request is not a valid WS-Federation protocol message</span></span>

<span data-ttu-id="8bc27-182">Dies kann vorkommen, wenn Sie bereits mit einer anderen Microsoft-ID für einen der Azure-Dienste angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="8bc27-182">This can happen if you are already logged in with some other Microsoft ID to one of the Azure services.</span></span> <span data-ttu-id="8bc27-183">Verwenden Sie das private Browserfenster wie "InPrivate" in IE oder "inkognito" in Chrome, oder löschen Sie alle Cookies.</span><span class="sxs-lookup"><span data-stu-id="8bc27-183">Use Private browser window like InPrivate in IE or Incognito in Chrome or clear all the cookies.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="8bc27-184">Weitere Ressourcen</span><span class="sxs-lookup"><span data-stu-id="8bc27-184">Additional Resources</span></span>

- <span data-ttu-id="8bc27-185">[Microsoft ASP.NET Tools für Windows Azure Active Directory – Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) – Vittorio berdecci</span><span class="sxs-lookup"><span data-stu-id="8bc27-185">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="8bc27-186">Windows Azure-Features: Identität</span><span class="sxs-lookup"><span data-stu-id="8bc27-186">Windows Azure Features: Identity</span></span>](https://docs.microsoft.com/azure/active-directory/)
- [<span data-ttu-id="8bc27-187">TechNet: Windows Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8bc27-187">TechNet: Windows Azure Active Directory</span></span>](https://technet.microsoft.com/library/hh967619.aspx)
- [<span data-ttu-id="8bc27-188">Windows Azure Active Directory: Entwickeln von Apps für Ihre Organisation</span><span class="sxs-lookup"><span data-stu-id="8bc27-188">Windows Azure Active Directory: Develop Apps for your organization</span></span>](https://activedirectory.windowsazure.com/Develop/Single-Tenant.aspx)
- [<span data-ttu-id="8bc27-189">Windows Azure Active Directory: Entwickeln von Apps für mehrere Organisationen</span><span class="sxs-lookup"><span data-stu-id="8bc27-189">Windows Azure Active Directory: Develop Apps for multiple organizations</span></span>](https://activedirectory.windowsazure.com/Develop/Multi-Tenant.aspx)
- [<span data-ttu-id="8bc27-190">So implementieren Sie Single Sign-on mit Windows Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="8bc27-190">How to implement single sign-on with Windows Azure Active Directory</span></span>](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect)
- <span data-ttu-id="8bc27-191">[Einmaliges Anmelden mit Windows Azure Active Directory: Deep Dive](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) – Vittorio berwecci</span><span class="sxs-lookup"><span data-stu-id="8bc27-191">[Single Sign-On with Windows Azure Active Directory: a Deep Dive](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="8bc27-192">Verwenden Sie AD FS 2,0 zum Implementieren und Verwalten von Single Sign-on</span><span class="sxs-lookup"><span data-stu-id="8bc27-192">Use AD FS 2.0 to implement and manage single sign-on</span></span>](https://technet.microsoft.com/library/jj205462.aspx)
