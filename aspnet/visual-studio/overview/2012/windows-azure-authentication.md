---
uid: visual-studio/overview/2012/windows-azure-authentication
title: Windows Azure-Authentifizierung | Microsoft-Dokumentation
author: Rick-Anderson
description: Microsoft ASP.NET-Tools für Windows Azure Active Directory können sie ganz einfach Aktivieren der Authentifizierung für Webanwendungen, die auf Windows Azure-Websites gehosteten...
ms.author: riande
ms.date: 02/20/2013
ms.assetid: a3cef801-a54b-4ebd-93c3-55764e2e14b1
msc.legacyurl: /visual-studio/overview/2012/windows-azure-authentication
msc.type: authoredcontent
ms.openlocfilehash: 46dd491b275b43be4e76c029b53f9454146663ae
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65126195"
---
# <a name="windows-azure-authentication"></a><span data-ttu-id="024af-103">Microsoft Azure-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="024af-103">Windows Azure Authentication</span></span>

<span data-ttu-id="024af-104">durch [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="024af-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="024af-105">Microsoft ASP.NET-tools für Windows Azure Active Directory-Authentifizierung für auf gehostete Webanwendungen aktivieren problemlos [Windows Azure-Websites](https://www.windowsazure.com/home/features/web-sites/).</span><span class="sxs-lookup"><span data-stu-id="024af-105">Microsoft ASP.NET tools for Windows Azure Active Directory makes it simple to enable authentication for web applications hosted on [Windows Azure Web Sites](https://www.windowsazure.com/home/features/web-sites/).</span></span> <span data-ttu-id="024af-106">Sie können Windows Azure-Authentifizierung verwenden, um Office 365-Benutzer aus Ihrer Organisation, Unternehmenskonten, die von Ihrem lokalen Active Directory synchronisiert oder in einer eigenen benutzerdefinierten Windows Azure Active Directory-Domäne erstellten Benutzer zu authentifizieren.</span><span class="sxs-lookup"><span data-stu-id="024af-106">You can use Windows Azure Authentication to authenticate Office 365 users from your organization, corporate accounts synced from your on-premise Active Directory or users created in your own custom Windows Azure Active Directory domain.</span></span> <span data-ttu-id="024af-107">Aktivieren der Windows Azure-Authentifizierung konfiguriert die Anwendung zum Authentifizieren von Benutzern, die mit einem einzigen [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) Mandanten.</span><span class="sxs-lookup"><span data-stu-id="024af-107">Enabling Windows Azure Authentication configures your application to authenticate users using a single [Windows Azure Active Directory](https://docs.microsoft.com/azure/active-directory/) tenant.</span></span>
>
> <span data-ttu-id="024af-108">Die ASP.NET-Authentifizierung für Windows Azure-Tool wird nicht für Webrollen in einem Cloud-Dienst unterstützt, aber wir dazu in einem zukünftigen Release möchten.</span><span class="sxs-lookup"><span data-stu-id="024af-108">The ASP.NET Windows Azure Authentication tool is not supported for web roles in a cloud service but we plan to do so in a future release.</span></span> <span data-ttu-id="024af-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) in Windows Azure-Webrollen unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="024af-109">[Windows Identity Foundation](https://msdn.microsoft.com/library/hh291066(v=VS.110).aspx) (WIF) is supported in Windows Azure web roles.</span></span>
>
> <span data-ttu-id="024af-110">Ausführliche Informationen zum Einrichten der Synchronisierung zwischen Ihrem lokalen Active Directory und Ihrem Windows Azure Active Directory-Mandanten finden Sie [Verwenden von AD FS 2.0 zur Implementierung und Verwaltung der einmaligen Anmeldung](https://technet.microsoft.com/library/jj205462.aspx).</span><span class="sxs-lookup"><span data-stu-id="024af-110">For details on how to setup synchronization between your on-premise Active Directory and your Windows Azure Active Directory tenant please see [Use AD FS 2.0 to implement and manage single sign-on](https://technet.microsoft.com/library/jj205462.aspx).</span></span>
>
> <span data-ttu-id="024af-111">Windows Azure Active Directory steht derzeit als eine [Vorschau kostenlos](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span><span class="sxs-lookup"><span data-stu-id="024af-111">Windows Azure Active Directory is currently available as a [free preview service](https://azure.microsoft.com/free/?WT.mc_id=A443DD604).</span></span>

## <a name="requirements"></a><span data-ttu-id="024af-112">Anforderungen:</span><span class="sxs-lookup"><span data-stu-id="024af-112">Requirements:</span></span>

- <span data-ttu-id="024af-113">Visual Studio 2012 oder [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span><span class="sxs-lookup"><span data-stu-id="024af-113">Visual Studio 2012 or [Visual Studio Express 2012](https://www.microsoft.com/visualstudio/11/products/express)</span></span>
- <span data-ttu-id="024af-114">[Erweiterungen für Visual Studio 2012 für Webtools](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) oder [Erweiterungen für Webtools für Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span><span class="sxs-lookup"><span data-stu-id="024af-114">[Web Tools Extensions for Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282228&amp;clcid=0x409) or [Web Tools Extensions for Visual Studio Express 2012](https://go.microsoft.com/fwlink/?LinkID=282231&amp;clcid=0x409)</span></span>
- <span data-ttu-id="024af-115">[Microsoft ASP.NET-Tools für Windows Azure Active Directory – Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) oder [Microsoft ASP.NET-Tools für Windows Azure Active Directory – Visual Studio Express 2012 für Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span><span class="sxs-lookup"><span data-stu-id="024af-115">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://go.microsoft.com/fwlink/?LinkID=282306) or [Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio Express 2012 for Web](https://go.microsoft.com/fwlink/?LinkId=282652)</span></span>

## <a name="create-an-aspnet-web-application-with-visual-studio-2012"></a><span data-ttu-id="024af-116">Erstellen einer ASP.NET Web-Anwendung mit Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="024af-116">Create an ASP.NET Web Application with Visual Studio 2012</span></span>

<span data-ttu-id="024af-117">Sie können jede Webanwendung mit Visual Studio 2012 erstellen, in diesem Tutorial verwendet die ASP.NET MVC-Intranet-Vorlage.</span><span class="sxs-lookup"><span data-stu-id="024af-117">You can create any Web Application with Visual Studio 2012, this tutorial uses the ASP.NET MVC intranet template.</span></span>

1. <span data-ttu-id="024af-118">Erstellen Sie eine neue ASP.NET MVC 4-Intranetanwendung ein, und übernehmen Sie alle Standardeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="024af-118">Create a new ASP.NET MVC 4 Intranet Application and accept all the defaults.</span></span> <span data-ttu-id="024af-119">(Es muss In **Tra** net und nicht im **ter** net-Projekt).</span><span class="sxs-lookup"><span data-stu-id="024af-119">(It must be an In **tra** net and not In **ter** net project).</span></span>
     ![](windows-azure-authentication/_static/image1.png)

## <a name="enable-window-azure-authentication-when-you-are-a-global-administrator-of-the-tenet"></a><span data-ttu-id="024af-120">Aktivieren von Windows Azure-Authentifizierung (Wenn Sie ein globaler Administrator der Grundsatz sind)</span><span class="sxs-lookup"><span data-stu-id="024af-120">Enable Window Azure Authentication (When you are a Global Administrator of the Tenet)</span></span>

<span data-ttu-id="024af-121">Wenn Sie nicht über einen vorhandenen Windows Azure Active Directory-Mandanten (z. B. über ein vorhandenes Office 365-Konto) verfügen können Sie einen neuen Mandanten erstellen, sich für eine [neues Windows Azure Active Directory-Konto](http://g.microsoftonline.com/0AX00en/5).</span><span class="sxs-lookup"><span data-stu-id="024af-121">If you do not have an existing Windows Azure Active Directory tenant (For example, through an existing Office 365 account) you can create a new tenant by signing up for a [new Windows Azure Active Directory account](http://g.microsoftonline.com/0AX00en/5).</span></span>

1. <span data-ttu-id="024af-122">Wählen Sie aus dem Menü "Projekt" **Windows Azure-Authentifizierung aktivieren**:</span><span class="sxs-lookup"><span data-stu-id="024af-122">From the Project menu select **Enable Windows Azure Authentication**:</span></span>

   ![](windows-azure-authentication/_static/image2.png)

2. <span data-ttu-id="024af-123">Geben Sie die Domäne für Ihren Windows Azure Active Directory-Mandanten (z.B. "contoso.onmicrosoft.com"), und klicken Sie auf **aktivieren**:</span><span class="sxs-lookup"><span data-stu-id="024af-123">Enter the domain for your Windows Azure Active Directory tenant (for example, contoso.onmicrosoft.com) and click **Enable**:</span></span>

![](windows-azure-authentication/_static/image3.png)

3. <span data-ttu-id="024af-124">In der Webauthentifizierung Dialogfeld melden Sie sich als Administrator für Ihren Windows Azure Active Directory-Mandanten:</span><span class="sxs-lookup"><span data-stu-id="024af-124">In the Web Authentication dialog sign in as an administrator for your Windows Azure Active Directory tenant:</span></span>

   ![](windows-azure-authentication/_static/image4.png)

![](windows-azure-authentication/_static/image5.png)

## <a name="enable-window-azure-by-a-non-administrator-of-the-tenet"></a><span data-ttu-id="024af-125">Aktivieren Sie Windows Azure, indem Sie ein nicht-Administrator von der Grundsatz</span><span class="sxs-lookup"><span data-stu-id="024af-125">Enable Window Azure by a non-administrator of the Tenet</span></span>

<span data-ttu-id="024af-126">Wenn Sie nicht über globale Administratorberechtigungen für Ihren Windows Azure Active Directory-Mandanten verfügen, können Sie das Kontrollkästchen für die Bereitstellung der Anwendung deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="024af-126">If you do not have Global Administrator privilege for your Windows Azure Active Directory tenant, you can uncheck the checkbox for provisioning the application.</span></span>

![](windows-azure-authentication/_static/image6.png)

<span data-ttu-id="024af-127">Das Dialogfeld zeigt die **Domäne**, **Anwendungsprinzipal-Id** und **Antwort-URL** die für die Anwendung mit einer Azure Active Directory-Bereitstellung erforderlich sind Grundsatz.</span><span class="sxs-lookup"><span data-stu-id="024af-127">The dialog will display the **Domain**, **Application Principal Id** and **Reply URL** which are required for provisioning the application with an Azure Active Directory tenet.</span></span> <span data-ttu-id="024af-128">Sie müssen diese Informationen an eine Person weitergeben können, die über ausreichende Berechtigungen zum Bereitstellen der Anwendungs hat.</span><span class="sxs-lookup"><span data-stu-id="024af-128">You need to give this information to someone who has sufficient privilege to provision the application.</span></span> <span data-ttu-id="024af-129">Finden Sie unter[wie einmaliges Anmelden mit Windows Azure Active Directory - ASP.NET-Anwendung implementiert](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) ausführliche Informationen zum Cmdlet verwenden, um den Dienstprinzipal manuell zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="024af-129">See[How to implement single sign-on with Windows Azure Active Directory - ASP.NET Application](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect) for details on how to use cmdlet to create the service principal manually.</span></span>
<span data-ttu-id="024af-130">Nachdem die Anwendung erfolgreich bereitgestellt wurde, klicken Sie auf **weiterhin "Web.config" mit den ausgewählten Einstellungen aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="024af-130">Once the application has been successfully provisioned, you can click on **Continue to update web.config with the selected settings**.</span></span> <span data-ttu-id="024af-131">Wenn Sie den Vorgang fortsetzen, Entwickeln der Anwendung erfolgen kann, klicken Sie auf Bereitstellung warten **speichern schließen, um die Einstellungen in der Projektdatei**.</span><span class="sxs-lookup"><span data-stu-id="024af-131">If you want to continue developing the application while waiting for provisioning to happen, you can click **Close to remember the settings in project file**.</span></span> <span data-ttu-id="024af-132">Das nächste Mal aufrufen von Windows Azure-Authentifizierung aktivieren und deaktivieren Sie das Kontrollkästchen bereitstellende, wird Ihnen die gleichen Einstellungen und klicken Sie auf **Weiter**, klicken Sie dann auf, **gelten diese Einstellungen in "Web.config"**.</span><span class="sxs-lookup"><span data-stu-id="024af-132">The next time you invoke Enable Windows Azure Authentication and uncheck the provisioning checkbox, you will see the same settings and you can click **Continue**, then click, **Apply these settings in web.config**.</span></span>

1. <span data-ttu-id="024af-133">Warten Sie, während Ihre Anwendung für Windows Azure-Authentifizierung konfiguriert und mit Windows Azure Active Directory bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="024af-133">Wait while your application is configured for Windows Azure Authentication and provisioned with Windows Azure Active Directory.</span></span>
2. <span data-ttu-id="024af-134">Nachdem Windows Azure-Authentifizierung für Ihre Anwendung aktiviert wurde, klicken Sie auf **schließen:**</span><span class="sxs-lookup"><span data-stu-id="024af-134">Once Windows Azure Authentication has been enabled for your application, click **Close:**</span></span>

    ![](windows-azure-authentication/_static/image7.png)
3. <span data-ttu-id="024af-135">Drücken Sie F5, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="024af-135">Hit F5 to run your application.</span></span> <span data-ttu-id="024af-136">Sie sollten automatisch zur Anmeldeseite umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="024af-136">You should automatically get redirected to login page.</span></span> <span data-ttu-id="024af-137">Verwenden Sie die Anmeldeinformationen für Directory Grundsatz, um die Anmeldung bei der Anwendung...</span><span class="sxs-lookup"><span data-stu-id="024af-137">Use the directory tenet user credentials to login to the application..</span></span>

    ![](windows-azure-authentication/_static/image1.jpg)
4. <span data-ttu-id="024af-138">Da Ihre Anwendung zurzeit ein selbstsigniertes Testzertifikat verwendet erhalten eine Warnung Sie von den Browser, die das Zertifikat nicht von einer vertrauenswürdigen Zertifizierungsstelle ausgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="024af-138">Because your application is currently using a self-signed test certificate you will receive a warning from the browser that the certificate was not issued by a trusted certificate authority.</span></span>

    <span data-ttu-id="024af-139">Diese Warnung kann ignoriert werden während der lokalen Entwicklung durch Klicken auf **Laden dieser Website fortsetzen:**</span><span class="sxs-lookup"><span data-stu-id="024af-139">This warning can be safely ignored during local development by clicking **Continue to this website:**</span></span>

    ![](windows-azure-authentication/_static/image8.png)
5. <span data-ttu-id="024af-140">Sie haben nun erfolgreich Ihre Anwendung mit Windows Azure-Authentifizierung angemeldet!</span><span class="sxs-lookup"><span data-stu-id="024af-140">You have now successfully logged in to your application using Windows Azure Authentication!</span></span>

    ![](windows-azure-authentication/_static/image2.jpg)

<span data-ttu-id="024af-141">Aktivieren von Windows Azure werden Authentifizierung die folgenden Änderungen an Ihrer Anwendung:</span><span class="sxs-lookup"><span data-stu-id="024af-141">Enabling Windows Azure authentication makes the following changes to your application:</span></span>

- <span data-ttu-id="024af-142">Eine Anti siteübergreifenden Request Forgery ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)))-Klasse ( *App\_Start\AntiXsrfConfig.cs* ) wird dem Projekt hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="024af-142">An Anti-Cross-Site Request Forgery ([CSRF](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))) class ( *App\_Start\AntiXsrfConfig.cs* ) is added to your project.</span></span>
- <span data-ttu-id="024af-143">Die NuGet-Pakete `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` zu Ihrem Projekt hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="024af-143">The NuGet packages `System.IdentityModel.Tokens.ValidatingIssuerNameRegistry` is added to your project.</span></span>
- <span data-ttu-id="024af-144">Windows Identity Foundation-Einstellungen in Ihrer Anwendung werden für das Akzeptieren von Sicherheitstoken aus Ihrem Windows Azure Active Directory-Mandanten konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="024af-144">Windows Identity Foundation settings in your application will be configured to accept security tokens from your Windows Azure Active Directory tenant.</span></span> <span data-ttu-id="024af-145">Klicken Sie auf das Bild, um zu sehen, eine erweiterte Ansicht die Änderungen an der *"Web.config"* Datei.</span><span class="sxs-lookup"><span data-stu-id="024af-145">Click on the image below to see an expanded view of the changes made to the *Web.config* file.</span></span>

     ![](windows-azure-authentication/_static/image9.png)
- <span data-ttu-id="024af-146">Es wird ein Dienstprinzipal für Ihre Anwendung in Ihrem Windows Azure Active Directory-Mandanten bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="024af-146">A service principal for your application in your Windows Azure Active Directory tenant will be provisioned.</span></span>
- <span data-ttu-id="024af-147">HTTPS ist aktiviert.</span><span class="sxs-lookup"><span data-stu-id="024af-147">HTTPS is enabled.</span></span>

## <a name="deploy-the-application-to-windows-azure"></a><span data-ttu-id="024af-148">Bereitstellen der Anwendung in Windows Azure</span><span class="sxs-lookup"><span data-stu-id="024af-148">Deploy the application to Windows Azure</span></span>

<span data-ttu-id="024af-149">Vollständige Anweisungen dazu finden Sie unter [Bereitstellen einer ASP.NET-Webanwendung auf einem Windows Azure-Website](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span><span class="sxs-lookup"><span data-stu-id="024af-149">For complete instructions, see [Deploying an ASP.NET Web Application to a Windows Azure Web Site](https://docs.microsoft.com/azure/app-service-web/app-service-web-get-started-dotnet).</span></span>

<span data-ttu-id="024af-150">Eine Anwendung, die mit Windows Azure-Authentifizierung auf einer Azure-Website zu veröffentlichen:</span><span class="sxs-lookup"><span data-stu-id="024af-150">To publish an application using Windows Azure Authentication to an Azure Web Site:</span></span>

1. <span data-ttu-id="024af-151">Klicken Sie mit der rechten Maustaste auf die Anwendung, und wählen Sie **veröffentlichen:**</span><span class="sxs-lookup"><span data-stu-id="024af-151">Right click on your application and select **Publish:**</span></span>

    ![](windows-azure-authentication/_static/image3.jpg)
2. <span data-ttu-id="024af-152">Herunterladen Sie und importieren Sie ein Veröffentlichungsprofil für Ihr Azure-Website, über das Dialogfeld "Web veröffentlichen".</span><span class="sxs-lookup"><span data-stu-id="024af-152">From the Publish Web dialog download and import a publishing profile for your Azure Web Site.</span></span>

    ![](windows-azure-authentication/_static/image4.jpg)
3. <span data-ttu-id="024af-153">Die **Verbindung** Registerkarte zeigt die **Ziel-URL** (die öffentlich zugängliche URL für Ihre Anwendung).</span><span class="sxs-lookup"><span data-stu-id="024af-153">The **Connection** tab shows the **Destination URL** (the public facing URL for your application).</span></span> <span data-ttu-id="024af-154">Klicken Sie auf **Verbindung überprüfen** auf Ihre Verbindung zu testen:</span><span class="sxs-lookup"><span data-stu-id="024af-154">Click **Validate Connection** to test your connection:</span></span>

    ![](windows-azure-authentication/_static/image5.jpg)
4. <span data-ttu-id="024af-155">Wenn Sie auf diese Azure-Website veröffentlicht haben zuvor sollten Sie überprüfen die **entfernen weiterer Dateien am Ziel** Einstellung aus, um sicherzustellen, dass Ihre Anwendung ordnungsgemäß veröffentlicht.</span><span class="sxs-lookup"><span data-stu-id="024af-155">If you have published to this Azure Web Site previously consider checking the **Remove additional files at destination** setting to ensure your application publishes cleanly.</span></span> <span data-ttu-id="024af-156">Beachten Sie, dass die **Windows Azure-Authentifizierung aktivieren** das Kontrollkästchen aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="024af-156">Notice the **Enable Windows Azure Authentication** check box is selected.</span></span>

    ![](windows-azure-authentication/_static/image10.png)
5. <span data-ttu-id="024af-157">Optional: Auf der **Vorschau** Registerkarte auf **Vorschau starten** bereitgestellten die Dateien angezeigt.</span><span class="sxs-lookup"><span data-stu-id="024af-157">Optional: On the **Preview** tab click **Start Preview** to see the files deployed.</span></span>

    ![](windows-azure-authentication/_static/image6.jpg)
6. <span data-ttu-id="024af-158">Klicken Sie auf **veröffentlichen.**</span><span class="sxs-lookup"><span data-stu-id="024af-158">Click **Publish.**</span></span>

    <span data-ttu-id="024af-159">Sie werden aufgefordert, die zum Aktivieren von Windows Azure-Authentifizierung für den Zielhost.</span><span class="sxs-lookup"><span data-stu-id="024af-159">You will be prompted to enable Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="024af-160">Klicken Sie auf **aktivieren** um den Vorgang fortzusetzen:</span><span class="sxs-lookup"><span data-stu-id="024af-160">Click **Enable** to continue:</span></span>

    ![](windows-azure-authentication/_static/image11.png)
7. <span data-ttu-id="024af-161">Geben Sie Ihre Administratoranmeldeinformationen für Ihren Windows Azure Active Directory-Mandanten:</span><span class="sxs-lookup"><span data-stu-id="024af-161">Enter your administrator credentials for your Windows Azure Active Directory tenant:</span></span>

    ![](windows-azure-authentication/_static/image7.jpg)
8. <span data-ttu-id="024af-162">Sobald Ihre Anwendung wurde erfolgreich veröffentlicht wurde, wird ein Browserfenster mit der veröffentlichten Website geöffnet.</span><span class="sxs-lookup"><span data-stu-id="024af-162">Once your application has been successfully published, a browser will open to the published web site.</span></span>

    > [!NOTE]
    > <span data-ttu-id="024af-163">Es dauert bis zu fünf Minuten für Ihre Anwendung vollständig mit Windows Azure Active Directory bereitgestellt werden, nach der Aktivierung von Windows Azure-Authentifizierung für den Zielhost (in der Regel müssen weniger).</span><span class="sxs-lookup"><span data-stu-id="024af-163">It may take up to five minutes (typically must less) for your application to be fully provisioned with Windows Azure Active Directory after enabling Windows Azure Authentication for the target host.</span></span> <span data-ttu-id="024af-164">Wenn Sie zunächst Ihre Anwendung ausführen, wenn Sie Fehler ACS50001 erhalten: Vertrauende Seite mit dem Namen '[Realm]' nicht gefunden Sie wurde, und warten Sie einige Minuten und wiederholen Sie die Anwendung erneut ausführen.</span><span class="sxs-lookup"><span data-stu-id="024af-164">When you first run your application if you receive error ACS50001: Relying party with name ‘[realm]' was not found, then wait a few minutes and try running the application again.</span></span>
9. <span data-ttu-id="024af-165">Wenn Sie aufgefordert werden, melden Sie sich als Benutzer in Ihrem Verzeichnis:</span><span class="sxs-lookup"><span data-stu-id="024af-165">When prompted, log in as a user in your directory:</span></span>

    ![](windows-azure-authentication/_static/image8.jpg)
10. <span data-ttu-id="024af-166">Sie haben nun erfolgreich angemeldet von Azure-gehosteten Anwendung mithilfe von Windows Azure-Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="024af-166">You have now successfully logged into your Azure hosted application using Windows Azure Authentication.</span></span>

     ![](windows-azure-authentication/_static/image9.jpg)

## <a name="known-issues"></a><span data-ttu-id="024af-167">Bekannte Probleme</span><span class="sxs-lookup"><span data-stu-id="024af-167">Known Issues</span></span>

#### <a name="role-based-authorization-fails-when-using-windows-azure-authentication"></a><span data-ttu-id="024af-168">Rollenbasierte Autorisierung schlägt fehl, wenn es sich bei Windows Azure-Authentifizierung verwenden</span><span class="sxs-lookup"><span data-stu-id="024af-168">Role-based authorization fails when using Windows Azure Authentication</span></span>

<span data-ttu-id="024af-169">Windows Azure-Authentifizierung stellt keine derzeit der erforderlichen Rollenanspruch bereit, sodass rollenbasierte Autorisierung ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="024af-169">Windows Azure Authentication does not currently provide the necessary role claim so that role-based authorization can be performed.</span></span> <span data-ttu-id="024af-170">Die Rolle des authentifizierten Benutzers muss manuell vom Windows Azure Active Directory abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="024af-170">The role of the authenticated user must be manually retrieved from Windows Azure Active Directory.</span></span>

#### <a name="browsing-to-an-application-with-windows-azure-authentication-results-in-the-error-acs20016-the-domain-of-the-logged-in-user-livecom-does-not-match-any-allowed-domain-of-this-sts"></a><span data-ttu-id="024af-171">Browsen zu einer Anwendung mit Windows Azure-Authentifizierung in der Fehlermeldung "ACS20016, die der Domäne des angemeldeten Benutzers (live.com) keine übereinstimmt Domäne dieses STS zulässig"</span><span class="sxs-lookup"><span data-stu-id="024af-171">Browsing to an application with Windows Azure Authentication results in the error "ACS20016 The domain of the logged in user (live.com) does not match any allowed domain of this STS"</span></span>

<span data-ttu-id="024af-172">Wenn Sie bereits bei einem Microsoft Account (z. B. hotmail.com, live.com, outlook.com) angemeldet sind und Sie versuchen, eine Anwendung zuzugreifen, die Windows Azure-Authentifizierung aktiviert ist können Sie eine Antwort 400-Fehler erhalten, da die Domäne Ihrem Microsoft Account von Windows Azure Active Directory wird nicht erkannt werden.</span><span class="sxs-lookup"><span data-stu-id="024af-172">If you are already logged in to a Microsoft Account (for example hotmail.com, live.com, outlook.com) and you attempt to access an application that has enabled Windows Azure Authentication you may get a 400 error response because the domain of your Microsoft Account is not recognized by Windows Azure Active Directory.</span></span> <span data-ttu-id="024af-173">Um bei der Anwendung zu protokollieren, melden Sie sich über Ihr Microsoft Account zuerst.</span><span class="sxs-lookup"><span data-stu-id="024af-173">To log into the application, log out from your Microsoft Account first.</span></span>

#### <a name="logging-into-an-application-with-windows-azure-authentication-enabled-and-a-x509certificatevalidationmode-other-than-none-results-in-certificate-validation-errors-for-the-accountsaccesscontrolwindowsnet-certificate"></a><span data-ttu-id="024af-174">Anmelden bei einer Anwendung mit Windows Azure-Authentifizierung aktiviert und eine X509CertificateValidationMode außer führt keine Zertifikatüberprüfungsfehler für das Zertifikat accounts.accesscontrol.windows.net</span><span class="sxs-lookup"><span data-stu-id="024af-174">Logging into an application with Windows Azure Authentication enabled and a X509CertificateValidationMode other than None results in certificate validation errors for the accounts.accesscontrol.windows.net certificate</span></span>

<span data-ttu-id="024af-175">Überprüfung des Zertifikats ist nicht erforderlich und sollte deaktiviert bleiben.</span><span class="sxs-lookup"><span data-stu-id="024af-175">Certificate validation is not required and should be left disabled.</span></span> <span data-ttu-id="024af-176">Der Fingerabdruck des Zertifikats des Ausstellers wird durch die "wsfederationauthenticationmodule" überprüft.</span><span class="sxs-lookup"><span data-stu-id="024af-176">The thumbprint of the issuer certificate is validated by the WSFederationAuthenticationModule.</span></span>

#### <a name="when-attempting-to-enable-windows-azure-authentication-the-web-authentication-dialog-shows-the-error-acs20016-the-domain-of-the-logged-in-user-contosoonmicrosoftcom-does-not-match-any-allowed-domain-of-this-sts"></a><span data-ttu-id="024af-177">Beim Aktivieren der Windows Azure-Authentifizierung zeigt das Dialogfeld "Web Authentication" den Fehler "ACS20016: Die Domäne des angemeldeten Benutzers ("contoso.onmicrosoft.com") stimmt nicht mit keiner zulässigen Domäne dieses STS überein."</span><span class="sxs-lookup"><span data-stu-id="024af-177">When attempting to enable Windows Azure Authentication the Web Authentication dialog shows the error "ACS20016: The domain of the logged in user (contoso.onmicrosoft.com) does not match any allowed domain of this STS."</span></span>

<span data-ttu-id="024af-178">Dieser Fehler kann angezeigt werden, wenn Sie zuvor erfolgreich in mit einem anderen Windows Azure Active Directory-Konto innerhalb des gleichen Prozesses des Visual Studio angemeldet haben.</span><span class="sxs-lookup"><span data-stu-id="024af-178">You may see this error when you have previously successfully logged in using a different Windows Azure Active Directory account from within the same Visual Studio process.</span></span> <span data-ttu-id="024af-179">Melden Sie sich ab, aus dem angegebenen Konto aus, oder starten Sie Visual Studio neu.</span><span class="sxs-lookup"><span data-stu-id="024af-179">Log out from the specified account or restart Visual Studio.</span></span> <span data-ttu-id="024af-180">Wenn Sie bereits angemeldet und die Option "Keep me angemeldet" ausgewählt, müssen Sie Ihre Browsercookies zu löschen.</span><span class="sxs-lookup"><span data-stu-id="024af-180">If you previously logged in and selected the option to "Keep me signed in" then you may need to clear your browser cookies.</span></span>

## <a name="acs20012-the-request-is-not-a-valid-ws-federation-protocol-message"></a><span data-ttu-id="024af-181">ACS20012: Es ist nicht die Anforderung eine gültige Nachricht für die WS-Verbund-Protokoll</span><span class="sxs-lookup"><span data-stu-id="024af-181">ACS20012: The request is not a valid WS-Federation protocol message</span></span>

<span data-ttu-id="024af-182">Dies kann vorkommen, wenn Sie bereits mit einigen anderen Microsoft-ID mit einem der Azure-Dienste angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="024af-182">This can happen if you are already logged in with some other Microsoft ID to one of the Azure services.</span></span> <span data-ttu-id="024af-183">Verwenden von benutzerdefinierten Browser-Fenster wie InPrivate in Internet Explorer oder Chrome-Inkognito oder deaktivieren Sie alle Cookies.</span><span class="sxs-lookup"><span data-stu-id="024af-183">Use Private browser window like InPrivate in IE or Incognito in Chrome or clear all the cookies.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="024af-184">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="024af-184">Additional Resources</span></span>

- <span data-ttu-id="024af-185">[Microsoft ASP.NET-Tools für Windows Azure Active Directory – Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) – Vittorio Bertocci</span><span class="sxs-lookup"><span data-stu-id="024af-185">[Microsoft ASP.NET Tools for Windows Azure Active Directory – Visual Studio 2012](https://blogs.msdn.com/b/vbertocci/archive/2013/02/18/microsoft-asp-net-tools-for-windows-azure-active-directory-visual-studio-2012.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="024af-186">Windows Azure-Features: Identität</span><span class="sxs-lookup"><span data-stu-id="024af-186">Windows Azure Features: Identity</span></span>](https://docs.microsoft.com/azure/active-directory/)
- [<span data-ttu-id="024af-187">TechNet: Windows Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="024af-187">TechNet: Windows Azure Active Directory</span></span>](https://technet.microsoft.com/library/hh967619.aspx)
- [<span data-ttu-id="024af-188">Windows Azure Active Directory: Entwickeln von Apps für Ihre Organisation</span><span class="sxs-lookup"><span data-stu-id="024af-188">Windows Azure Active Directory: Develop Apps for your organization</span></span>](https://activedirectory.windowsazure.com/Develop/Single-Tenant.aspx)
- [<span data-ttu-id="024af-189">Windows Azure Active Directory: Entwickeln von Apps für mehrere Organisationen</span><span class="sxs-lookup"><span data-stu-id="024af-189">Windows Azure Active Directory: Develop Apps for multiple organizations</span></span>](https://activedirectory.windowsazure.com/Develop/Multi-Tenant.aspx)
- [<span data-ttu-id="024af-190">Wie Sie einmaliges Anmelden mit Windows Azure Active Directory implementieren.</span><span class="sxs-lookup"><span data-stu-id="024af-190">How to implement single sign-on with Windows Azure Active Directory</span></span>](https://github.com/Azure-Samples/active-directory-dotnet-webapp-openidconnect)
- <span data-ttu-id="024af-191">[Einmaliges Anmelden mit Windows Azure Active Directory: ein tieferer Einblick in](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) – Vittorio Bertocci</span><span class="sxs-lookup"><span data-stu-id="024af-191">[Single Sign-On with Windows Azure Active Directory: a Deep Dive](https://blogs.msdn.com/b/vbertocci/archive/2012/07/05/single-sign-on-with-windows-azure-active-directory-a-deep-dive.aspx) – Vittorio Bertocci</span></span>
- [<span data-ttu-id="024af-192">Verwenden von AD FS 2.0 zu implementieren und Verwalten von einmaliges Anmelden</span><span class="sxs-lookup"><span data-stu-id="024af-192">Use AD FS 2.0 to implement and manage single sign-on</span></span>](https://technet.microsoft.com/library/jj205462.aspx)
