---
uid: web-forms/overview/data-access/advanced-data-access-scenarios/working-with-computed-columns-cs
title: Arbeiten mit berechneten Spalten (C#) | Microsoft-Dokumentation
author: rick-anderson
description: Wenn Sie eine Datenbanktabelle erstellen, können Sie mit Microsoft SQL Server eine berechnete Spalte definieren, deren Wert aus einem Ausdruck berechnet wird, der normalerweise refgen...
ms.author: riande
ms.date: 08/03/2007
ms.assetid: 57459065-ed7c-4dfe-ac9c-54c093abc261
msc.legacyurl: /web-forms/overview/data-access/advanced-data-access-scenarios/working-with-computed-columns-cs
msc.type: authoredcontent
ms.openlocfilehash: ad6a96f2721510c2478f707c8eed018ae797f27a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2019
ms.locfileid: "74603215"
---
# <a name="working-with-computed-columns-c"></a><span data-ttu-id="35ea2-103">Arbeiten mit berechneten Spalten (C#)</span><span class="sxs-lookup"><span data-stu-id="35ea2-103">Working with Computed Columns (C#)</span></span>

<span data-ttu-id="35ea2-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="35ea2-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="35ea2-105">[Code herunterladen](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_71_CS.zip) oder [PDF herunterladen](working-with-computed-columns-cs/_static/datatutorial71cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="35ea2-105">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_71_CS.zip) or [Download PDF](working-with-computed-columns-cs/_static/datatutorial71cs1.pdf)</span></span>

> <span data-ttu-id="35ea2-106">Wenn Sie eine Datenbanktabelle erstellen, können Sie mit Microsoft SQL Server eine berechnete Spalte definieren, deren Wert aus einem Ausdruck berechnet wird, der in der Regel auf andere Werte im selben Datenbankdaten Satz verweist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-106">When creating a database table, Microsoft SQL Server allows you to define a computed column whose value is calculated from an expression that usually references other values in the same database record.</span></span> <span data-ttu-id="35ea2-107">Diese Werte sind in der Datenbank schreibgeschützt, was bei der Arbeit mit TableAdapters besondere Überlegungen erfordert.</span><span class="sxs-lookup"><span data-stu-id="35ea2-107">Such values are read-only at the database, which requires special considerations when working with TableAdapters.</span></span> <span data-ttu-id="35ea2-108">In diesem Tutorial erfahren Sie, wie Sie die Herausforderungen der berechneten Spalten erfüllen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-108">In this tutorial we learn how to meet the challenges posed by computed columns.</span></span>

## <a name="introduction"></a><span data-ttu-id="35ea2-109">Einführung</span><span class="sxs-lookup"><span data-stu-id="35ea2-109">Introduction</span></span>

<span data-ttu-id="35ea2-110">Microsoft SQL Server ermöglicht *[berechnete Spalten](https://msdn.microsoft.com/library/ms191250.aspx)* , bei denen es sich um Spalten handelt, deren Werte aus einem Ausdruck berechnet werden, der in der Regel auf die Werte aus anderen Spalten in derselben Tabelle verweist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-110">Microsoft SQL Server allows for *[computed columns](https://msdn.microsoft.com/library/ms191250.aspx)*, which are columns whose values are calculated from an expression that usually references the values from other columns in the same table.</span></span> <span data-ttu-id="35ea2-111">Beispielsweise kann ein Zeit Verfolgungs Datenmodell eine Tabelle mit dem Namen `ServiceLog` mit Spalten enthalten, einschließlich `ServicePerformed`, `EmployeeID`, `Rate`und `Duration`.</span><span class="sxs-lookup"><span data-stu-id="35ea2-111">As an example, a time tracking data model might have a table named `ServiceLog` with columns including `ServicePerformed`, `EmployeeID`, `Rate`, and `Duration`, among others.</span></span> <span data-ttu-id="35ea2-112">Während der Betrag pro Dienst Element (mit der Rate multipliziert mit der Dauer) über eine Webseite oder eine andere programmgesteuerte Schnittstelle berechnet werden kann, kann es nützlich sein, eine Spalte in die `ServiceLog` Tabelle mit dem Namen `AmountDue` einzuschließen, die diese Informationen gemeldet hat.</span><span class="sxs-lookup"><span data-stu-id="35ea2-112">While the amount due per service item (being the rate multiplied by the duration) could be calculated through a web page or other programmatic interface, it might be handy to include a column in the `ServiceLog` table named `AmountDue` that reported this information.</span></span> <span data-ttu-id="35ea2-113">Diese Spalte könnte als normale Spalte erstellt werden, Sie muss jedoch aktualisiert werden, wenn die Werte für `Rate` oder `Duration` Spalten geändert werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-113">This column could be created as a normal column, but it would need to be updated anytime the `Rate` or `Duration` column values changed.</span></span> <span data-ttu-id="35ea2-114">Ein besserer Ansatz besteht darin, die `AmountDue` Spalte mithilfe des Ausdrucks `Rate * Duration`zu einer berechneten Spalte zu machen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-114">A better approach would be to make the `AmountDue` column a computed column using the expression `Rate * Duration`.</span></span> <span data-ttu-id="35ea2-115">Dies würde dazu führen, dass SQL Server automatisch den Wert der `AmountDue` Spalte berechnet, wenn in einer Abfrage darauf verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-115">Doing so would cause SQL Server to automatically calculate the `AmountDue` column value whenever it was referenced in a query.</span></span>

<span data-ttu-id="35ea2-116">Da der Wert einer berechneten Spalte durch einen Ausdruck bestimmt wird, sind solche Spalten schreibgeschützt und können daher keinen Werten in `INSERT`-oder `UPDATE` Anweisungen zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-116">Since a computed column s value is determined by an expression, such columns are read-only and therefore cannot have values assigned to them in `INSERT` or `UPDATE` statements.</span></span> <span data-ttu-id="35ea2-117">Wenn berechnete Spalten jedoch Teil der Haupt Abfrage für einen TableAdapter sind, der Ad-hoc-SQL-Anweisungen verwendet, werden Sie automatisch in die automatisch generierten `INSERT`-und `UPDATE`-Anweisungen eingeschlossen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-117">However, when computed columns are part of the main query for a TableAdapter that uses ad-hoc SQL statements, they are automatically included in the auto-generated `INSERT` and `UPDATE` statements.</span></span> <span data-ttu-id="35ea2-118">Folglich müssen die Tabellen `INSERT`-und `UPDATE` Abfragen sowie `InsertCommand`-und `UpdateCommand` Eigenschaften aktualisiert werden, um Verweise auf alle berechneten Spalten zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-118">Consequently, the TableAdapter s `INSERT` and `UPDATE` queries and `InsertCommand` and `UpdateCommand` properties must be updated to remove references to any computed columns.</span></span>

<span data-ttu-id="35ea2-119">Eine Herausforderung bei der Verwendung berechneter Spalten mit einem TableAdapter, der Ad-hoc-SQL-Anweisungen verwendet, besteht darin, dass die TableAdapter s-`INSERT` und `UPDATE` Abfragen immer dann erneut generiert werden, wenn der TableAdapter-Konfigurations-Assistent abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-119">One challenge of using computed columns with a TableAdapter that uses ad-hoc SQL statements is that the TableAdapter s `INSERT` and `UPDATE` queries are automatically regenerated any time the TableAdapter Configuration wizard is completed.</span></span> <span data-ttu-id="35ea2-120">Aus diesem Grund werden die berechneten Spalten, die manuell aus dem `INSERT` entfernt wurden, und `UPDATE` Abfragen erneut angezeigt, wenn der Assistent erneut ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-120">Therefore, the computed columns manually removed from the `INSERT` and `UPDATE` queries will reappear if the wizard is re-run.</span></span> <span data-ttu-id="35ea2-121">Obwohl TableAdapters, die gespeicherte Prozeduren verwenden, von dieser Brüchigkeit leiden, verfügen Sie über eigene Quirlen, die wir in Schritt 3 ansprechen werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-121">Although TableAdapters that use stored procedures don t suffer from this brittleness, they do have their own quirks that we will address in Step 3.</span></span>

<span data-ttu-id="35ea2-122">In diesem Tutorial fügen wir der `Suppliers` Tabelle in der Northwind-Datenbank eine berechnete Spalte hinzu und erstellen dann einen entsprechenden TableAdapter, um mit dieser Tabelle und der berechneten Spalte zu arbeiten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-122">In this tutorial we will add a computed column to the `Suppliers` table in the Northwind database and then create a corresponding TableAdapter to work with this table and its computed column.</span></span> <span data-ttu-id="35ea2-123">Der TableAdapter verwendet gespeicherte Prozeduren anstelle von Ad-hoc-SQL-Anweisungen, damit unsere Anpassungen nicht verloren gehen, wenn der TableAdapter-Konfigurations-Assistent verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-123">We will have our TableAdapter use stored procedures instead of ad-hoc SQL statements so that our customizations aren't lost when the TableAdapter Configuration wizard is used.</span></span>

<span data-ttu-id="35ea2-124">Legen Sie Los!</span><span class="sxs-lookup"><span data-stu-id="35ea2-124">Let s get started!</span></span>

## <a name="step-1-adding-a-computed-column-to-thesupplierstable"></a><span data-ttu-id="35ea2-125">Schritt 1: Hinzufügen einer berechneten Spalte zur`Suppliers`Tabelle</span><span class="sxs-lookup"><span data-stu-id="35ea2-125">Step 1: Adding a Computed Column to the`Suppliers`Table</span></span>

<span data-ttu-id="35ea2-126">Die Datenbank Northwind verfügt nicht über berechnete Spalten, daher müssen wir eine selbst hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-126">The Northwind database does not have any computed columns so we will need to add one ourselves.</span></span> <span data-ttu-id="35ea2-127">In diesem Tutorial fügen Sie der `Suppliers` Tabelle `FullContactName` eine berechnete Spalte hinzu, die den Namen des Kontakts, den Titel und das Unternehmen, für das Sie verwendet werden, im folgenden Format zurückgibt: `ContactName` (`ContactTitle`, `CompanyName`).</span><span class="sxs-lookup"><span data-stu-id="35ea2-127">For this tutorial let s add a computed column to the `Suppliers` table called `FullContactName` that returns the contact s name, title, and the company they work for in the following format: `ContactName` (`ContactTitle`, `CompanyName`).</span></span> <span data-ttu-id="35ea2-128">Diese berechnete Spalte kann in Berichten verwendet werden, wenn Informationen zu Zulieferern angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-128">This computed column might be used in reports when displaying information about suppliers.</span></span>

<span data-ttu-id="35ea2-129">Öffnen Sie zunächst die Definition der `Suppliers` Tabelle, indem Sie mit der rechten Maustaste auf die `Suppliers` Tabelle im Server-Explorer klicken und im Kontextmenü die Option Tabellendefinition öffnen auswählen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-129">Start by opening the `Suppliers` table definition by right-clicking on the `Suppliers` table in the Server Explorer and choosing Open Table Definition from the context-menu.</span></span> <span data-ttu-id="35ea2-130">Dadurch werden die Spalten der Tabelle und ihre Eigenschaften angezeigt, z. b. der Datentyp, ob Sie `NULL` s zulassen usw.</span><span class="sxs-lookup"><span data-stu-id="35ea2-130">This will display the columns of the table and their properties, such as their data type, whether they allow `NULL` s, and so forth.</span></span> <span data-ttu-id="35ea2-131">Um eine berechnete Spalte hinzuzufügen, geben Sie zunächst den Namen der Spalte in die Tabellendefinition ein.</span><span class="sxs-lookup"><span data-stu-id="35ea2-131">To add a computed column, start by typing in the name of the column into the table definition.</span></span> <span data-ttu-id="35ea2-132">Geben Sie als nächstes den Ausdruck in das Textfeld (Formel) im Abschnitt berechnete Spalten Angabe in der Spalte Eigenschaftenfenster ein (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="35ea2-132">Next, enter its expression into the (Formula) textbox under the Computed Column Specification section in the Column Properties window (see Figure 1).</span></span> <span data-ttu-id="35ea2-133">Benennen Sie die berechnete Spalte `FullContactName`, und verwenden Sie den folgenden Ausdruck:</span><span class="sxs-lookup"><span data-stu-id="35ea2-133">Name the computed column `FullContactName` and use the following expression:</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample1.sql)]

<span data-ttu-id="35ea2-134">Beachten Sie, dass Zeichen folgen in SQL mithilfe des `+`-Operators verkettet werden können.</span><span class="sxs-lookup"><span data-stu-id="35ea2-134">Note that strings can be concatenated in SQL using the `+` operator.</span></span> <span data-ttu-id="35ea2-135">Die `CASE`-Anweisung kann in einer herkömmlichen Programmiersprache wie eine bedingte verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-135">The `CASE` statement can be used like a conditional in a traditional programming language.</span></span> <span data-ttu-id="35ea2-136">Im obigen Ausdruck kann die `CASE`-Anweisung wie folgt gelesen werden: Wenn `ContactTitle` nicht `NULL` ist, wird der `ContactTitle` Wert ausgegeben, der mit einem Komma verkettet ist. andernfalls wird nichts ausgegeben.</span><span class="sxs-lookup"><span data-stu-id="35ea2-136">In the above expression the `CASE` statement can be read as: If `ContactTitle` is not `NULL` then output the `ContactTitle` value concatenated with a comma, otherwise emit nothing.</span></span> <span data-ttu-id="35ea2-137">Weitere Informationen zur Nützlichkeit der `CASE`-Anweisung finden Sie in [der Leistungsfähigkeit von SQL `CASE`-Anweisungen](http://www.4guysfromrolla.com/webtech/102704-1.shtml).</span><span class="sxs-lookup"><span data-stu-id="35ea2-137">For more on the usefulness of the `CASE` statement, see [The Power of SQL `CASE` Statements](http://www.4guysfromrolla.com/webtech/102704-1.shtml).</span></span>

> [!NOTE]
> <span data-ttu-id="35ea2-138">Anstatt hier eine `CASE`-Anweisung zu verwenden, können wir alternativ `ISNULL(ContactTitle, '')`verwenden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-138">Instead of using a `CASE` statement here, we could have alternatively used `ISNULL(ContactTitle, '')`.</span></span> <span data-ttu-id="35ea2-139">[`ISNULL(checkExpression, replacementValue)`](https://msdn.microsoft.com/library/ms184325.aspx) gibt *checkexpression* zurück, wenn es ungleich NULL ist; andernfalls wird " *replacementvalue*" zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="35ea2-139">[`ISNULL(checkExpression, replacementValue)`](https://msdn.microsoft.com/library/ms184325.aspx) returns *checkExpression* if it is non-NULL, otherwise it returns *replacementValue*.</span></span> <span data-ttu-id="35ea2-140">Obwohl entweder `ISNULL` oder `CASE` in dieser Instanz funktionieren, gibt es komplexere Szenarios, in denen die Flexibilität der `CASE`-Anweisung nicht durch `ISNULL`abgeglichen werden kann.</span><span class="sxs-lookup"><span data-stu-id="35ea2-140">While either `ISNULL` or `CASE` will work in this instance, there are more intricate scenarios where the flexibility of the `CASE` statement cannot be matched by `ISNULL`.</span></span>

<span data-ttu-id="35ea2-141">Nachdem Sie diese berechnete Spalte hinzugefügt haben, sollte der Bildschirm wie der Screenshot in Abbildung 1 aussehen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-141">After adding this computed column your screen should look like the screen shot in Figure 1.</span></span>

<span data-ttu-id="35ea2-142">[![der Tabelle Suppliers eine berechnete Spalte mit dem Namen fullcontactname hinzufügen](working-with-computed-columns-cs/_static/image2.png)](working-with-computed-columns-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-142">[![Add a Computed Column Named FullContactName to the Suppliers Table](working-with-computed-columns-cs/_static/image2.png)](working-with-computed-columns-cs/_static/image1.png)</span></span>

<span data-ttu-id="35ea2-143">**Abbildung 1**: Hinzufügen einer berechneten Spalte mit dem Namen `FullContactName` zur `Suppliers` Tabelle ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-143">**Figure 1**: Add a Computed Column Named `FullContactName` to the `Suppliers` Table ([Click to view full-size image](working-with-computed-columns-cs/_static/image3.png))</span></span>

<span data-ttu-id="35ea2-144">Nachdem Sie die berechnete Spalte benannt und den Ausdruck eingegeben haben, speichern Sie die Änderungen in der Tabelle, indem Sie auf das Symbol Speichern auf der Symbolleiste klicken. Drücken Sie dazu STRG + S, oder klicken Sie auf das Menü Datei, und wählen Sie dann `Suppliers`speichern aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-144">After naming the computed column and entering its expression, save the changes to the table by clicking the Save icon in the toolbar, by hitting Ctrl+S, or by going to the File menu and choosing Save `Suppliers`.</span></span>

<span data-ttu-id="35ea2-145">Wenn Sie die Tabelle speichern, sollten Sie die Server-Explorer aktualisieren, einschließlich der soeben hinzugefügten Spalte in der Spaltenliste der `Suppliers` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="35ea2-145">Saving the table should refresh the Server Explorer, including the just-added column in the `Suppliers` table s column list.</span></span> <span data-ttu-id="35ea2-146">Außerdem wird der in das Textfeld (Formel) eingegebene Ausdruck automatisch an einen entsprechenden Ausdruck angepasst, der unnötige Leerräume entfernt, Spaltennamen in eckige Klammern (`[]`) umgibt und Klammern enthält, um die Reihenfolge der Vorgänge explizit anzuzeigen:</span><span class="sxs-lookup"><span data-stu-id="35ea2-146">Furthermore, the expression entered into the (Formula) textbox will automatically adjust to an equivalent expression that strips unnecessary whitespace, surrounds column names with brackets (`[]`), and includes parentheses to more explicitly show the order of operations:</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample2.sql)]

<span data-ttu-id="35ea2-147">Weitere Informationen zu berechneten Spalten in Microsoft SQL Server finden Sie in der [technischen Dokumentation](https://msdn.microsoft.com/library/ms191250.aspx).</span><span class="sxs-lookup"><span data-stu-id="35ea2-147">For more information on computed columns in Microsoft SQL Server, refer to the [technical documentation](https://msdn.microsoft.com/library/ms191250.aspx).</span></span> <span data-ttu-id="35ea2-148">Sehen Sie sich auch die Vorgehens [Weise: Angeben berechneter Spalten](https://msdn.microsoft.com/library/ms188300.aspx) für eine schrittweise exemplarische Vorgehensweise zum Erstellen berechneter Spalten an.</span><span class="sxs-lookup"><span data-stu-id="35ea2-148">Also check out the [How to: Specify Computed Columns](https://msdn.microsoft.com/library/ms188300.aspx) for a step-by-step walkthrough of creating computed columns.</span></span>

> [!NOTE]
> <span data-ttu-id="35ea2-149">Standardmäßig werden berechnete Spalten nicht physisch in der Tabelle gespeichert, sondern stattdessen jedes Mal neu berechnet, wenn in einer Abfrage auf Sie verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-149">By default, computed columns are not physically stored in the table but are instead recalculated each time they are referenced in a query.</span></span> <span data-ttu-id="35ea2-150">Durch Aktivieren des Kontrollkästchens ist persistent können Sie jedoch SQL Server anweisen, die berechnete Spalte physisch in der Tabelle zu speichern.</span><span class="sxs-lookup"><span data-stu-id="35ea2-150">By checking the Is Persisted checkbox, however, you can instruct SQL Server to physically store the computed column in the table.</span></span> <span data-ttu-id="35ea2-151">Dadurch kann ein Index für die berechnete Spalte erstellt werden, wodurch die Leistung von Abfragen verbessert werden kann, die den berechneten Spaltenwert in ihren `WHERE`-Klauseln verwenden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-151">Doing so allows an index to be created on the computed column, which can improve the performance of queries that use the computed column value in their `WHERE` clauses.</span></span> <span data-ttu-id="35ea2-152">Weitere Informationen finden Sie [unter Erstellen von Indizes für berechnete Spalten](https://msdn.microsoft.com/library/ms189292.aspx) .</span><span class="sxs-lookup"><span data-stu-id="35ea2-152">See [Creating Indexes on Computed Columns](https://msdn.microsoft.com/library/ms189292.aspx) for more information.</span></span>

## <a name="step-2-viewing-the-computed-column-s-values"></a><span data-ttu-id="35ea2-153">Schritt 2: Anzeigen der Werte der berechneten Spalte</span><span class="sxs-lookup"><span data-stu-id="35ea2-153">Step 2: Viewing the Computed Column s Values</span></span>

<span data-ttu-id="35ea2-154">Bevor wir mit der Arbeit auf der Datenzugriffs Ebene beginnen, kann es eine Minute dauern, die `FullContactName` Werte anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-154">Before we start work on the Data Access Layer, let s take a minute to view the `FullContactName` values.</span></span> <span data-ttu-id="35ea2-155">Klicken Sie im Server-Explorer mit der rechten Maustaste auf den `Suppliers` Tabellennamen, und wählen Sie im Kontextmenü Neue Abfrage aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-155">From the Server Explorer, right-click on the `Suppliers` table name and choose New Query from the context-menu.</span></span> <span data-ttu-id="35ea2-156">Dadurch wird ein Abfragefenster angezeigt, in dem Sie aufgefordert werden, die Tabellen auszuwählen, die in die Abfrage eingeschlossen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-156">This will bring up a Query window that prompts us to choose what tables to include in the query.</span></span> <span data-ttu-id="35ea2-157">Fügen Sie die `Suppliers` Tabelle hinzu, und klicken Sie auf Schließen</span><span class="sxs-lookup"><span data-stu-id="35ea2-157">Add the `Suppliers` table and click Close.</span></span> <span data-ttu-id="35ea2-158">Überprüfen Sie als nächstes die Spalten `CompanyName`, `ContactName`, `ContactTitle`und `FullContactName` aus der Tabelle Suppliers.</span><span class="sxs-lookup"><span data-stu-id="35ea2-158">Next, check the `CompanyName`, `ContactName`, `ContactTitle`, and `FullContactName` columns from the Suppliers table.</span></span> <span data-ttu-id="35ea2-159">Klicken Sie abschließend auf das rote Ausrufezeichen Symbol auf der Symbolleiste, um die Abfrage auszuführen und die Ergebnisse anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-159">Finally, click the red exclamation point icon in the Toolbar to execute the query and view the results.</span></span>

<span data-ttu-id="35ea2-160">Wie in Abbildung 2 gezeigt, enthalten die Ergebnisse `FullContactName`, das die `CompanyName`, `ContactName`und `ContactTitle` Spalten mit dem Format ldquo auflistet.`ContactName` (`ContactTitle`, `CompanyName`).</span><span class="sxs-lookup"><span data-stu-id="35ea2-160">As Figure 2 shows, the results include `FullContactName`, which lists the `CompanyName`, `ContactName`, and `ContactTitle` columns using the format ldquo;`ContactName` (`ContactTitle`, `CompanyName`) .</span></span>

<span data-ttu-id="35ea2-161">[![fullcontactname das Format ContactName (ContactTitle, CompanyName) verwendet.](working-with-computed-columns-cs/_static/image5.png)](working-with-computed-columns-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-161">[![The FullContactName Uses the Format ContactName (ContactTitle, CompanyName)](working-with-computed-columns-cs/_static/image5.png)](working-with-computed-columns-cs/_static/image4.png)</span></span>

<span data-ttu-id="35ea2-162">**Abbildung 2**: die `FullContactName` verwendet das Format `ContactName` (`ContactTitle`, `CompanyName`) ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-162">**Figure 2**: The `FullContactName` Uses the Format `ContactName` (`ContactTitle`, `CompanyName`) ([Click to view full-size image](working-with-computed-columns-cs/_static/image6.png))</span></span>

## <a name="step-3-adding-thesupplierstableadapterto-the-data-access-layer"></a><span data-ttu-id="35ea2-163">Schritt 3: Hinzufügen der`SuppliersTableAdapter`zur Datenzugriffs Ebene</span><span class="sxs-lookup"><span data-stu-id="35ea2-163">Step 3: Adding the`SuppliersTableAdapter`to the Data Access Layer</span></span>

<span data-ttu-id="35ea2-164">Um mit den Lieferanteninformationen in unserer Anwendung arbeiten zu können, müssen wir zunächst einen TableAdapter und eine Datentabelle in unserer dal erstellen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-164">In order to work with the supplier information in our application we need to first create a TableAdapter and DataTable in our DAL.</span></span> <span data-ttu-id="35ea2-165">Im Idealfall würde dies mithilfe der gleichen einfachen Schritte erreicht werden, die in den vorherigen Tutorials untersucht wurden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-165">Ideally, this would be accomplished using the same straightforward steps examined in earlier tutorials.</span></span> <span data-ttu-id="35ea2-166">Beim Arbeiten mit berechneten Spalten werden jedoch einige Falten eingeführt, die eine Diskussion verdienen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-166">However, working with computed columns introduces a few wrinkles that merit discussion.</span></span>

<span data-ttu-id="35ea2-167">Wenn Sie einen TableAdapter verwenden, der Ad-hoc-SQL-Anweisungen verwendet, können Sie die berechnete Spalte einfach über den TableAdapter-Konfigurations-Assistenten in die Haupt Abfrage von TableAdapter einschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-167">If you are using a TableAdapter that uses ad-hoc SQL statements, you can simply include the computed column in the TableAdapter s main query via the TableAdapter Configuration wizard.</span></span> <span data-ttu-id="35ea2-168">Dadurch werden jedoch automatisch `INSERT`-und `UPDATE`-Anweisungen generiert, die die berechnete Spalte enthalten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-168">This, however, will auto-generate `INSERT` and `UPDATE` statements that include the computed column.</span></span> <span data-ttu-id="35ea2-169">Wenn Sie versuchen, eine dieser Methoden auszuführen, kann ein `SqlException` mit der Meldung der Spalten Spalten *Name* nicht geändert werden, weil es sich entweder um eine berechnete Spalte handelt oder wenn das Ergebnis eines Union-Operators ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-169">If you attempt to execute one of these methods, a `SqlException` with the message The column *ColumnName* cannot be modified because it is either a computed column or is the result of a UNION operator will be thrown.</span></span> <span data-ttu-id="35ea2-170">Obwohl die `INSERT`-und `UPDATE`-Anweisung manuell über die Eigenschaften `InsertCommand` und `UpdateCommand` von TableAdapter) angepasst werden können, gehen diese Anpassungen immer verloren, wenn der TableAdapter-Konfigurations-Assistent erneut ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-170">While the `INSERT` and `UPDATE` statement can be manually adjusted through the TableAdapter s `InsertCommand` and `UpdateCommand` properties, these customizations will be lost whenever the TableAdapter Configuration wizard is re-run.</span></span>

<span data-ttu-id="35ea2-171">Aufgrund der Brüchigkeit von TableAdapters, die Ad-hoc-SQL-Anweisungen verwenden, empfiehlt es sich, beim Arbeiten mit berechneten Spalten gespeicherte Prozeduren zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-171">Due to the brittleness of TableAdapters that use ad-hoc SQL statements, it is recommended that we use stored procedures when working with computed columns.</span></span> <span data-ttu-id="35ea2-172">Wenn Sie vorhandene gespeicherte Prozeduren verwenden, konfigurieren Sie einfach den TableAdapter, wie im Tutorial [Verwenden vorhandener gespeicherter Prozeduren für das TableAdapters für typisierte Datasets](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) beschrieben.</span><span class="sxs-lookup"><span data-stu-id="35ea2-172">If you are using existing stored procedures, simply configure the TableAdapter as discussed in the [Using Existing Stored Procedures for the Typed DataSet s TableAdapters](using-existing-stored-procedures-for-the-typed-dataset-s-tableadapters-cs.md) tutorial.</span></span> <span data-ttu-id="35ea2-173">Wenn Sie mit dem TableAdapter-Assistenten die gespeicherten Prozeduren erstellt haben, ist es jedoch wichtig, dass Sie zunächst alle berechneten Spalten aus der Haupt Abfrage weglassen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-173">If you have the TableAdapter wizard create the stored procedures for you, however, it is important to initially omit any computed columns from the main query.</span></span> <span data-ttu-id="35ea2-174">Wenn Sie eine berechnete Spalte in die Haupt Abfrage einschließen, werden Sie vom TableAdapter-Konfigurations-Assistenten nach Abschluss des Abschlusses informiert, dass die entsprechenden gespeicherten Prozeduren nicht erstellt werden können.</span><span class="sxs-lookup"><span data-stu-id="35ea2-174">If you include a computed column in the main query, the TableAdapter Configuration wizard will inform you, upon completion, that it cannot create the corresponding stored procedures.</span></span> <span data-ttu-id="35ea2-175">Kurz gesagt, wir müssen zunächst den TableAdapter mithilfe einer berechneten, Spalten freien Haupt Abfrage konfigurieren und dann die zugehörige gespeicherte Prozedur manuell aktualisieren, und der TableAdapter s-`SelectCommand`, um die berechnete Spalte einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-175">In short, we need to initially configure the TableAdapter using a computed column-free main query and then manually update the corresponding stored procedure and the TableAdapter s `SelectCommand` to include the computed column.</span></span> <span data-ttu-id="35ea2-176">Diese Vorgehensweise ähnelt der Vorgehensweise, die im Tutorial [Aktualisieren des TableAdapters für die Verwendung](updating-the-tableadapter-to-use-joins-cs.md)`JOIN`*s* verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-176">This approach is similar to the one used in the [Updating the TableAdapter to Use](updating-the-tableadapter-to-use-joins-cs.md)`JOIN`*s* tutorial.</span></span>

<span data-ttu-id="35ea2-177">Fügen Sie für dieses Tutorial einen neuen TableAdapter hinzu, und lassen Sie die gespeicherten Prozeduren für uns automatisch erstellen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-177">For this tutorial, let s add a new TableAdapter and have it automatically create the stored procedures for us.</span></span> <span data-ttu-id="35ea2-178">Folglich müssen wir zunächst die berechnete Spalte `FullContactName` aus der Haupt Abfrage weglassen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-178">Consequently, we will need to initially omit the `FullContactName` computed column from the main query.</span></span>

<span data-ttu-id="35ea2-179">Öffnen Sie zunächst das `NorthwindWithSprocs` DataSet im Ordner `~/App_Code/DAL`.</span><span class="sxs-lookup"><span data-stu-id="35ea2-179">Start by opening the `NorthwindWithSprocs` DataSet in the `~/App_Code/DAL` folder.</span></span> <span data-ttu-id="35ea2-180">Klicken Sie mit der rechten Maustaste in den Designer, und wählen Sie im Kontextmenü einen neuen TableAdapter hinzufügen aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-180">Right-click in the Designer and, from the context-menu, choose to add a new TableAdapter.</span></span> <span data-ttu-id="35ea2-181">Dadurch wird der TableAdapter-Konfigurations-Assistent gestartet.</span><span class="sxs-lookup"><span data-stu-id="35ea2-181">This will launch the TableAdapter Configuration wizard.</span></span> <span data-ttu-id="35ea2-182">Geben Sie die Datenbank an, aus der Daten abgefragt werden sollen (`NORTHWNDConnectionString` `Web.config`), und klicken Sie auf weiter</span><span class="sxs-lookup"><span data-stu-id="35ea2-182">Specify the database to query data from (`NORTHWNDConnectionString` from `Web.config`) and click Next.</span></span> <span data-ttu-id="35ea2-183">Da wir noch keine gespeicherten Prozeduren zum Abfragen oder Ändern der `Suppliers` Tabelle erstellt haben, aktivieren Sie die Option neue gespeicherte Prozeduren erstellen, damit Sie vom Assistenten für uns erstellt wird, und klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="35ea2-183">Since we have not yet created any stored procedures for querying or modifying the `Suppliers` table, select the Create new stored procedures option so that the wizard will create them for us and click Next.</span></span>

<span data-ttu-id="35ea2-184">[Wählen Sie ![die Option neue gespeicherte Prozeduren erstellen.](working-with-computed-columns-cs/_static/image8.png)](working-with-computed-columns-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-184">[![Choose the Create new stored procedures Option](working-with-computed-columns-cs/_static/image8.png)](working-with-computed-columns-cs/_static/image7.png)</span></span>

<span data-ttu-id="35ea2-185">**Abbildung 3**: Auswählen der Option "neue gespeicherte Prozeduren erstellen" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-185">**Figure 3**: Choose the Create new stored procedures Option ([Click to view full-size image](working-with-computed-columns-cs/_static/image9.png))</span></span>

<span data-ttu-id="35ea2-186">Der nachfolgende Schritt fordert uns zur Haupt Abfrage auf.</span><span class="sxs-lookup"><span data-stu-id="35ea2-186">The subsequent step prompts us for the main query.</span></span> <span data-ttu-id="35ea2-187">Geben Sie die folgende Abfrage ein, die die Spalten `SupplierID`, `CompanyName`, `ContactName`und `ContactTitle` für jeden Lieferanten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="35ea2-187">Enter the following query, which returns the `SupplierID`, `CompanyName`, `ContactName`, and `ContactTitle` columns for each supplier.</span></span> <span data-ttu-id="35ea2-188">Beachten Sie, dass diese Abfrage die berechnete Spalte (`FullContactName`) absichtlich abschließt. Wir aktualisieren die entsprechende gespeicherte Prozedur, um diese Spalte in Schritt 4 einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-188">Note that this query purposefully omits the computed column (`FullContactName`); we will update the corresponding stored procedure to include this column in Step 4.</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample3.sql)]

<span data-ttu-id="35ea2-189">Nachdem Sie die Haupt Abfrage eingegeben und auf "weiter" geklickt haben, können wir die vier gespeicherten Prozeduren, die generiert werden, mit dem Assistenten benennen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-189">After entering the main query and clicking Next, the wizard allows us to name the four stored procedures it will generate.</span></span> <span data-ttu-id="35ea2-190">Benennen Sie diese gespeicherten Prozeduren `Suppliers_Select`, `Suppliers_Insert`, `Suppliers_Update`und `Suppliers_Delete`, wie in Abbildung 4 veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="35ea2-190">Name these stored procedures `Suppliers_Select`, `Suppliers_Insert`, `Suppliers_Update`, and `Suppliers_Delete`, as Figure 4 illustrates.</span></span>

<span data-ttu-id="35ea2-191">[![passen Sie die Namen der automatisch generierten gespeicherten Prozeduren an.](working-with-computed-columns-cs/_static/image11.png)](working-with-computed-columns-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-191">[![Customize the Names of the Auto-Generated Stored Procedures](working-with-computed-columns-cs/_static/image11.png)](working-with-computed-columns-cs/_static/image10.png)</span></span>

<span data-ttu-id="35ea2-192">**Abbildung 4**: Anpassen der Namen der automatisch generierten gespeicherten Prozeduren ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-192">**Figure 4**: Customize the Names of the Auto-Generated Stored Procedures ([Click to view full-size image](working-with-computed-columns-cs/_static/image12.png))</span></span>

<span data-ttu-id="35ea2-193">Im nächsten Schritt des Assistenten können wir die TableAdapter s-Methoden benennen und die Muster angeben, die für den Zugriff auf und das Aktualisieren von Daten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-193">The next wizard step allows us to name the TableAdapter s methods and specify the patterns used to access and update data.</span></span> <span data-ttu-id="35ea2-194">Lassen Sie alle drei Kontrollkästchen aktiviert, benennen Sie aber die `GetData`-Methode in `GetSuppliers`um.</span><span class="sxs-lookup"><span data-stu-id="35ea2-194">Leave all three checkboxes checked, but rename the `GetData` method to `GetSuppliers`.</span></span> <span data-ttu-id="35ea2-195">Klicken Sie auf Fertig stellen, um den Assistenten abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-195">Click Finish to complete the wizard.</span></span>

<span data-ttu-id="35ea2-196">[![die GetData-Methode in getsuppliers umbenennen](working-with-computed-columns-cs/_static/image14.png)](working-with-computed-columns-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-196">[![Rename the GetData Method to GetSuppliers](working-with-computed-columns-cs/_static/image14.png)](working-with-computed-columns-cs/_static/image13.png)</span></span>

<span data-ttu-id="35ea2-197">**Abbildung 5**: Umbenennen der `GetData` Methode in `GetSuppliers` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-197">**Figure 5**: Rename the `GetData` Method to `GetSuppliers` ([Click to view full-size image](working-with-computed-columns-cs/_static/image15.png))</span></span>

<span data-ttu-id="35ea2-198">Nachdem Sie auf "Fertigstellen" geklickt haben, erstellt der Assistent die vier gespeicherten Prozeduren und fügt dem typisierten Dataset den TableAdapter und die entsprechende Datentabelle hinzu.</span><span class="sxs-lookup"><span data-stu-id="35ea2-198">Upon clicking Finish, the wizard will create the four stored procedures and add the TableAdapter and corresponding DataTable to the Typed DataSet.</span></span>

## <a name="step-4-including-the-computed-column-in-the-tableadapter-s-main-query"></a><span data-ttu-id="35ea2-199">Schritt 4: einschließen der berechneten Spalte in die Haupt Abfrage des TableAdapter s</span><span class="sxs-lookup"><span data-stu-id="35ea2-199">Step 4: Including the Computed Column in the TableAdapter s Main Query</span></span>

<span data-ttu-id="35ea2-200">Wir müssen nun den in Schritt 3 erstellten TableAdapter und die Datentabelle aktualisieren, um die `FullContactName` berechnete Spalte einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-200">We now need to update the TableAdapter and DataTable created in Step 3 to include the `FullContactName` computed column.</span></span> <span data-ttu-id="35ea2-201">Dieser Vorgang umfasst zwei Schritte:</span><span class="sxs-lookup"><span data-stu-id="35ea2-201">This involves two steps:</span></span>

1. <span data-ttu-id="35ea2-202">Aktualisieren der gespeicherten Prozedur `Suppliers_Select`, um die berechnete Spalte `FullContactName` zurückzugeben, und</span><span class="sxs-lookup"><span data-stu-id="35ea2-202">Updating the `Suppliers_Select` stored procedure to return the `FullContactName` computed column, and</span></span>
2. <span data-ttu-id="35ea2-203">Aktualisieren der Datentabelle, um eine entsprechende `FullContactName` Spalte einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-203">Updating the DataTable to include a corresponding `FullContactName` column.</span></span>

<span data-ttu-id="35ea2-204">Navigieren Sie zunächst zum Server-Explorer und Drilldown in den Ordner gespeicherte Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="35ea2-204">Start by navigating to the Server Explorer and drilling down into the Stored Procedures folder.</span></span> <span data-ttu-id="35ea2-205">Öffnen Sie die gespeicherte Prozedur `Suppliers_Select`, und aktualisieren Sie die `SELECT` Abfrage so, dass Sie die `FullContactName` berechnete Spalte enthält:</span><span class="sxs-lookup"><span data-stu-id="35ea2-205">Open the `Suppliers_Select` stored procedure and update the `SELECT` query to include the `FullContactName` computed column:</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample4.sql)]

<span data-ttu-id="35ea2-206">Speichern Sie die Änderungen an der gespeicherten Prozedur, indem Sie auf das Symbol Speichern auf der Symbolleiste klicken. Drücken Sie dazu STRG + S, oder wählen Sie im Menü Datei die Option `Suppliers_Select` speichern aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-206">Save the changes to the stored procedure by clicking the Save icon in the Toolbar, by hitting Ctrl+S, or by choosing the Save `Suppliers_Select` option from the File menu.</span></span>

<span data-ttu-id="35ea2-207">Kehren Sie anschließend zum DataSet-Designer zurück, klicken Sie mit der rechten Maustaste auf die `SuppliersTableAdapter`, und wählen Sie im Kontextmenü die Option konfigurieren aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-207">Next, return to the DataSet Designer, right-click on the `SuppliersTableAdapter`, and choose Configure from the context-menu.</span></span> <span data-ttu-id="35ea2-208">Beachten Sie, dass die Spalte `Suppliers_Select` nun die Spalte `FullContactName` in der Datenspalten Auflistung enthält.</span><span class="sxs-lookup"><span data-stu-id="35ea2-208">Note that the `Suppliers_Select` column now includes the `FullContactName` column in its Data Columns collection.</span></span>

<span data-ttu-id="35ea2-209">[![führen Sie den Konfigurations-Assistenten für TableAdapter s aus, um die Spalten der Datentabelle zu aktualisieren.](working-with-computed-columns-cs/_static/image17.png)](working-with-computed-columns-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-209">[![Run the TableAdapter s Configuration Wizard to Update the DataTable s Columns](working-with-computed-columns-cs/_static/image17.png)](working-with-computed-columns-cs/_static/image16.png)</span></span>

<span data-ttu-id="35ea2-210">**Abbildung 6**: Ausführen des Konfigurations-Assistenten für TableAdapter s zum Aktualisieren der Spalten der Datentabelle ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-210">**Figure 6**: Run the TableAdapter s Configuration Wizard to Update the DataTable s Columns ([Click to view full-size image](working-with-computed-columns-cs/_static/image18.png))</span></span>

<span data-ttu-id="35ea2-211">Klicken Sie auf Fertig stellen, um den Assistenten abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-211">Click Finish to complete the wizard.</span></span> <span data-ttu-id="35ea2-212">Dadurch wird dem `SuppliersDataTable`automatisch eine entsprechende Spalte hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="35ea2-212">This will automatically add a corresponding column to the `SuppliersDataTable`.</span></span> <span data-ttu-id="35ea2-213">Der TableAdapter-Assistent ist intelligent genug, um zu erkennen, dass die `FullContactName` Spalte eine berechnete Spalte und daher schreibgeschützt ist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-213">The TableAdapter wizard is smart enough to detect that the `FullContactName` column is a computed column and therefore read-only.</span></span> <span data-ttu-id="35ea2-214">Folglich wird die `ReadOnly`-Eigenschaft der Spalte auf `true`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="35ea2-214">Consequently, it sets the column s `ReadOnly` property to `true`.</span></span> <span data-ttu-id="35ea2-215">Um dies zu überprüfen, wählen Sie die Spalte aus der `SuppliersDataTable` aus, und navigieren Sie dann zum Eigenschaftenfenster (siehe Abbildung 7).</span><span class="sxs-lookup"><span data-stu-id="35ea2-215">To verify this, select the column from the `SuppliersDataTable` and then go to the Properties window (see Figure 7).</span></span> <span data-ttu-id="35ea2-216">Beachten Sie, dass die `FullContactName` Spalten `DataType` und `MaxLength` Eigenschaften ebenfalls entsprechend festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-216">Note that the `FullContactName` column s `DataType` and `MaxLength` properties are also set accordingly.</span></span>

<span data-ttu-id="35ea2-217">[![die fullcontactname-Spalte als schreibgeschützt gekennzeichnet ist.](working-with-computed-columns-cs/_static/image20.png)](working-with-computed-columns-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-217">[![The FullContactName Column is Marked as Read-Only](working-with-computed-columns-cs/_static/image20.png)](working-with-computed-columns-cs/_static/image19.png)</span></span>

<span data-ttu-id="35ea2-218">**Abbildung 7**: die `FullContactName` Spalte ist schreibgeschützt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-218">**Figure 7**: The `FullContactName` Column is Marked as Read-Only ([Click to view full-size image](working-with-computed-columns-cs/_static/image21.png))</span></span>

## <a name="step-5-adding-agetsupplierbysupplieridmethod-to-the-tableadapter"></a><span data-ttu-id="35ea2-219">Schritt 5: Hinzufügen einer`GetSupplierBySupplierID`Methode zum TableAdapter</span><span class="sxs-lookup"><span data-stu-id="35ea2-219">Step 5: Adding a`GetSupplierBySupplierID`Method to the TableAdapter</span></span>

<span data-ttu-id="35ea2-220">In diesem Tutorial erstellen wir eine ASP.NET-Seite, auf der die Lieferanten in einem aktualisierbaren Raster angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-220">For this tutorial we will create an ASP.NET page that displays the suppliers in an updateable grid.</span></span> <span data-ttu-id="35ea2-221">In den vorherigen Tutorials haben wir einen einzelnen Datensatz von der Geschäftslogik Schicht aktualisiert, indem wir diesen Datensatz aus der dal als stark typisierte Datentabelle abrufen, seine Eigenschaften aktualisieren und dann die aktualisierte Datentabelle an die DAL zurücksenden, um die Änderungen an zu übermitteln. die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="35ea2-221">In past tutorials we have updated a single record from the Business Logic Layer by retrieving that particular record from the DAL as a strongly-typed DataTable, updating its properties, and then sending the updated DataTable back to the DAL to propagate the changes to the database.</span></span> <span data-ttu-id="35ea2-222">Zum Ausführen dieses ersten Schritts: Abrufen des Datensatzes, der von der dal aktualisiert wird, müssen Sie zunächst der dal eine `GetSupplierBySupplierID(supplierID)`-Methode hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-222">To accomplish this first step - retrieving the record being updated from the DAL - we need to first add a `GetSupplierBySupplierID(supplierID)` method to the DAL.</span></span>

<span data-ttu-id="35ea2-223">Klicken Sie mit der rechten Maustaste auf die `SuppliersTableAdapter` im Datasetentwurf, und wählen Sie im Kontextmenü die Option Abfrage hinzufügen aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-223">Right-click on the `SuppliersTableAdapter` in the DataSet Design and choose the Add Query option from the context-menu.</span></span> <span data-ttu-id="35ea2-224">Lassen Sie den Assistenten wie in Schritt 3 beschrieben eine neue gespeicherte Prozedur für uns generieren, indem Sie die Option neue gespeicherte Prozedur erstellen auswählen (Weitere Informationen finden Sie in Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="35ea2-224">As we did in Step 3, let the wizard generate a new stored procedure for us by selecting the Create new stored procedure option (refer back to Figure 3 for a screenshot of this wizard step).</span></span> <span data-ttu-id="35ea2-225">Da diese Methode einen Datensatz mit mehreren Spalten zurückgibt, geben Sie an, dass Sie eine SQL-Abfrage verwenden möchten, die eine SELECT-Abfrage ist, die Zeilen zurückgibt, und klicken Sie auf weiter</span><span class="sxs-lookup"><span data-stu-id="35ea2-225">Since this method will return a record with multiple columns, indicate that we want to use a SQL query that is a SELECT which returns rows and click Next.</span></span>

<span data-ttu-id="35ea2-226">[![wählen Sie die Option Select What Returns Rows aus.](working-with-computed-columns-cs/_static/image23.png)](working-with-computed-columns-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-226">[![Choose the SELECT which returns rows Option](working-with-computed-columns-cs/_static/image23.png)](working-with-computed-columns-cs/_static/image22.png)</span></span>

<span data-ttu-id="35ea2-227">**Abbildung 8**: Auswählen der Option Select What Returns Rows ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-227">**Figure 8**: Choose the SELECT which returns rows Option ([Click to view full-size image](working-with-computed-columns-cs/_static/image24.png))</span></span>

<span data-ttu-id="35ea2-228">Im nachfolgenden Schritt werden wir aufgefordert, die Abfrage für diese Methode zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-228">The subsequent step prompts us for the query to use for this method.</span></span> <span data-ttu-id="35ea2-229">Geben Sie Folgendes ein, das dieselben Datenfelder zurückgibt wie die Haupt Abfrage, jedoch für einen bestimmten Lieferanten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-229">Enter the following, which returns the same data fields as the main query but for a particular supplier.</span></span>

[!code-sql[Main](working-with-computed-columns-cs/samples/sample5.sql)]

<span data-ttu-id="35ea2-230">Im nächsten Bildschirm werden wir aufgefordert, die gespeicherte Prozedur zu benennen, die automatisch generiert wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-230">The next screen asks us to name the stored procedure that will be auto-generated.</span></span> <span data-ttu-id="35ea2-231">Benennen Sie diese gespeicherte Prozedur `Suppliers_SelectBySupplierID` und klicken Sie dann auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="35ea2-231">Name this stored procedure `Suppliers_SelectBySupplierID` and click Next.</span></span>

<span data-ttu-id="35ea2-232">[![der gespeicherten Prozedur den Namen Suppliers_SelectBySupplierID](working-with-computed-columns-cs/_static/image26.png)](working-with-computed-columns-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-232">[![Name the Stored Procedure Suppliers_SelectBySupplierID](working-with-computed-columns-cs/_static/image26.png)](working-with-computed-columns-cs/_static/image25.png)</span></span>

<span data-ttu-id="35ea2-233">**Abbildung 9**: Benennen der gespeicherten Prozedur `Suppliers_SelectBySupplierID` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-233">**Figure 9**: Name the Stored Procedure `Suppliers_SelectBySupplierID` ([Click to view full-size image](working-with-computed-columns-cs/_static/image27.png))</span></span>

<span data-ttu-id="35ea2-234">Schließlich werden Sie vom Assistenten aufgefordert, die Datenzugriffs Muster und Methodennamen einzugeben, die für den TableAdapter verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-234">Lastly, the wizard prompts us for the data access patterns and method names to use for the TableAdapter.</span></span> <span data-ttu-id="35ea2-235">Lassen Sie beide Kontrollkästchen aktiviert, benennen Sie jedoch die Methoden `FillBy` und `GetDataBy` in `FillBySupplierID` bzw. `GetSupplierBySupplierID`um.</span><span class="sxs-lookup"><span data-stu-id="35ea2-235">Leave both checkboxes checked, but rename the `FillBy` and `GetDataBy` methods to `FillBySupplierID` and `GetSupplierBySupplierID`, respectively.</span></span>

<span data-ttu-id="35ea2-236">[![benennen Sie die TableAdapter-Methoden fillbysupplierid und getsupplierbysupplierid.](working-with-computed-columns-cs/_static/image29.png)](working-with-computed-columns-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-236">[![Name the TableAdapter Methods FillBySupplierID and GetSupplierBySupplierID](working-with-computed-columns-cs/_static/image29.png)](working-with-computed-columns-cs/_static/image28.png)</span></span>

<span data-ttu-id="35ea2-237">**Abbildung 10**: Benennen der TableAdapter-Methoden `FillBySupplierID` und `GetSupplierBySupplierID` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-237">**Figure 10**: Name the TableAdapter Methods `FillBySupplierID` and `GetSupplierBySupplierID` ([Click to view full-size image](working-with-computed-columns-cs/_static/image30.png))</span></span>

<span data-ttu-id="35ea2-238">Klicken Sie auf Fertig stellen, um den Assistenten abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-238">Click Finish to complete the wizard.</span></span>

## <a name="step-6-creating-the-business-logic-layer"></a><span data-ttu-id="35ea2-239">Schritt 6: Erstellen der Geschäftslogik Ebene</span><span class="sxs-lookup"><span data-stu-id="35ea2-239">Step 6: Creating the Business Logic Layer</span></span>

<span data-ttu-id="35ea2-240">Bevor wir eine ASP.NET-Seite erstellen, die die berechnete Spalte verwendet, die Sie in Schritt 1 erstellt haben, müssen wir zunächst die entsprechenden Methoden in der BLL hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-240">Before we create an ASP.NET page that uses the computed column created in Step 1, we first need to add the corresponding methods in the BLL.</span></span> <span data-ttu-id="35ea2-241">Unsere ASP.NET-Seite, die wir in Schritt 7 erstellen werden, ermöglicht Benutzern das Anzeigen und Bearbeiten von Lieferanten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-241">Our ASP.NET page, which we will create in Step 7, will allow users to view and edit suppliers.</span></span> <span data-ttu-id="35ea2-242">Daher ist es erforderlich, dass unsere BLL mindestens eine Methode zur Verfügung stellt, um alle Lieferanten und eine andere zum Aktualisieren eines bestimmten Lieferanten zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-242">Therefore, we need our BLL to provide, at minimum, a method to get all of the suppliers and another to update a particular supplier.</span></span>

<span data-ttu-id="35ea2-243">Erstellen Sie eine neue Klassendatei mit dem Namen `SuppliersBLLWithSprocs` im Ordner `~/App_Code/BLL`, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="35ea2-243">Create a new class file named `SuppliersBLLWithSprocs` in the `~/App_Code/BLL` folder and add the following code:</span></span>

[!code-csharp[Main](working-with-computed-columns-cs/samples/sample6.cs)]

<span data-ttu-id="35ea2-244">Wie die anderen BLL-Klassen verfügt `SuppliersBLLWithSprocs` über eine `protected` `Adapter`-Eigenschaft, die eine Instanz der `SuppliersTableAdapter`-Klasse zusammen mit zwei `public` Methoden zurückgibt: `GetSuppliers` und `UpdateSupplier`.</span><span class="sxs-lookup"><span data-stu-id="35ea2-244">Like the other BLL classes, `SuppliersBLLWithSprocs` has a `protected` `Adapter` property that returns an instance of the `SuppliersTableAdapter` class along with two `public` methods: `GetSuppliers` and `UpdateSupplier`.</span></span> <span data-ttu-id="35ea2-245">Die `GetSuppliers`-Methode ruft den von der entsprechenden `GetSupplier` Methode in der Datenzugriffs Ebene zurückgegebenen `SuppliersDataTable` auf und gibt diesen zurück.</span><span class="sxs-lookup"><span data-stu-id="35ea2-245">The `GetSuppliers` method calls and returns the `SuppliersDataTable` returned by the corresponding `GetSupplier` method in the Data Access Layer.</span></span> <span data-ttu-id="35ea2-246">Die `UpdateSupplier`-Methode ruft Informationen über den bestimmten zu aktualisierenden Lieferanten mithilfe eines aufgerufenen der dal s `GetSupplierBySupplierID(supplierID)`-Methode ab.</span><span class="sxs-lookup"><span data-stu-id="35ea2-246">The `UpdateSupplier` method retrieves information about the particular supplier being updated via a call to the DAL s `GetSupplierBySupplierID(supplierID)` method.</span></span> <span data-ttu-id="35ea2-247">Anschließend werden die Eigenschaften `CategoryName`, `ContactName`und `ContactTitle` aktualisiert und die Änderungen an die Datenbank übergeben, indem die `Update`-Methode der Datenzugriffs Schicht aufgerufen und das geänderte `SuppliersRow` Objekt übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="35ea2-247">It then updates the `CategoryName`, `ContactName`, and `ContactTitle` properties and commits these changes to the database by calling the Data Access Layer s `Update` method, passing in the modified `SuppliersRow` object.</span></span>

> [!NOTE]
> <span data-ttu-id="35ea2-248">Mit Ausnahme von `SupplierID` und `CompanyName`lassen alle Spalten in der Tabelle Suppliers `NULL` Werte zu.</span><span class="sxs-lookup"><span data-stu-id="35ea2-248">Except for `SupplierID` and `CompanyName`, all columns in the Suppliers table allow `NULL` values.</span></span> <span data-ttu-id="35ea2-249">Wenn die Parameter für die Übergabe `contactName` oder `contactTitle` `null` sind, müssen wir die entsprechenden `ContactName`-und `ContactTitle`-Eigenschaften auf einen `NULL` Daten Bank Wert festlegen, indem Sie die `SetContactNameNull`-Methode bzw. die `SetContactTitleNull`-Methode verwenden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-249">Therefore, if the passed-in `contactName` or `contactTitle` parameters are `null` we need to set the corresponding `ContactName` and `ContactTitle` properties to a `NULL` database value using the `SetContactNameNull` and `SetContactTitleNull` methods, respectively.</span></span>

## <a name="step-7-working-with-the-computed-column-from-the-presentation-layer"></a><span data-ttu-id="35ea2-250">Schritt 7: Arbeiten mit der berechneten Spalte aus der Präsentationsebene</span><span class="sxs-lookup"><span data-stu-id="35ea2-250">Step 7: Working with the Computed Column from the Presentation Layer</span></span>

<span data-ttu-id="35ea2-251">Wenn die berechnete Spalte der `Suppliers`-Tabelle hinzugefügt wurde und die DAL und BLL entsprechend aktualisiert wurden, können wir eine ASP.NET-Seite erstellen, die mit der `FullContactName` berechneten Spalte funktioniert.</span><span class="sxs-lookup"><span data-stu-id="35ea2-251">With the computed column added to the `Suppliers` table and the DAL and BLL updated accordingly, we are ready to build an ASP.NET page that works with the `FullContactName` computed column.</span></span> <span data-ttu-id="35ea2-252">Öffnen Sie zunächst die Seite `ComputedColumns.aspx` im Ordner `AdvancedDAL`, und ziehen Sie eine GridView aus der Toolbox auf den Designer.</span><span class="sxs-lookup"><span data-stu-id="35ea2-252">Start by opening the `ComputedColumns.aspx` page in the `AdvancedDAL` folder and drag a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="35ea2-253">Legen Sie die Eigenschaft GridView s `ID` auf `Suppliers` fest, und binden Sie das Smarttag an eine neue ObjectDataSource mit dem Namen `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="35ea2-253">Set the GridView s `ID` property to `Suppliers` and, from its smart tag, bind it to a new ObjectDataSource named `SuppliersDataSource`.</span></span> <span data-ttu-id="35ea2-254">Konfigurieren Sie die ObjectDataSource so, dass Sie die `SuppliersBLLWithSprocs`-Klasse verwendet, die wir in Schritt 6 hinzugefügt haben, und klicken Sie</span><span class="sxs-lookup"><span data-stu-id="35ea2-254">Configure the ObjectDataSource to use the `SuppliersBLLWithSprocs` class we added back in Step 6 and click Next.</span></span>

<span data-ttu-id="35ea2-255">[![Konfigurieren von ObjectDataSource für die Verwendung der suppliersbllwithsprocs-Klasse](working-with-computed-columns-cs/_static/image32.png)](working-with-computed-columns-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-255">[![Configure the ObjectDataSource to Use the SuppliersBLLWithSprocs Class](working-with-computed-columns-cs/_static/image32.png)](working-with-computed-columns-cs/_static/image31.png)</span></span>

<span data-ttu-id="35ea2-256">**Abbildung 11**: Konfigurieren von ObjectDataSource für die Verwendung der `SuppliersBLLWithSprocs`-Klasse ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-256">**Figure 11**: Configure the ObjectDataSource to Use the `SuppliersBLLWithSprocs` Class ([Click to view full-size image](working-with-computed-columns-cs/_static/image33.png))</span></span>

<span data-ttu-id="35ea2-257">In der `SuppliersBLLWithSprocs`-Klasse sind nur zwei Methoden definiert: `GetSuppliers` und `UpdateSupplier`.</span><span class="sxs-lookup"><span data-stu-id="35ea2-257">There are only two methods defined in the `SuppliersBLLWithSprocs` class: `GetSuppliers` and `UpdateSupplier`.</span></span> <span data-ttu-id="35ea2-258">Stellen Sie sicher, dass diese beiden Methoden auf den Registerkarten auswählen und aktualisieren angegeben sind, und klicken Sie auf Fertigstellen, um die Konfiguration von ObjectDataSource abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-258">Ensure that these two methods are specified in the SELECT and UPDATE tabs, respectively, and click Finish to complete the configuration of the ObjectDataSource.</span></span>

<span data-ttu-id="35ea2-259">Nach Abschluss des Assistenten zum Konfigurieren von Datenquellen wird von Visual Studio ein BoundField-Element für jedes der zurückgegebenen Datenfelder hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="35ea2-259">Upon completion of the Data Source Configuration wizard, Visual Studio will add a BoundField for each of the data fields returned.</span></span> <span data-ttu-id="35ea2-260">Entfernen Sie die `SupplierID` BoundField, und ändern Sie die `HeaderText` Eigenschaften der `CompanyName`, `ContactName`, `ContactTitle`und `FullContactName` boundfields in Company, Name, Title und Full Contact Name.</span><span class="sxs-lookup"><span data-stu-id="35ea2-260">Remove the `SupplierID` BoundField and change the `HeaderText` properties of the `CompanyName`, `ContactName`, `ContactTitle`, and `FullContactName` BoundFields to Company, Contact Name, Title, and Full Contact Name, respectively.</span></span> <span data-ttu-id="35ea2-261">Aktivieren Sie im Smarttags das Kontrollkästchen "Bearbeiten aktivieren", um die integrierten Funktionen der GridView-Funktion zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="35ea2-261">From the smart tag, check the Enable Editing checkbox to turn on the GridView s built-in editing capabilities.</span></span>

<span data-ttu-id="35ea2-262">Zusätzlich zum Hinzufügen von boundfields zur GridView bewirkt die Beendigung des Datenquellen-Assistenten auch, dass Visual Studio die ObjectDataSource s `OldValuesParameterFormatString`-Eigenschaft auf die ursprüngliche\_{0}festgelegt hat.</span><span class="sxs-lookup"><span data-stu-id="35ea2-262">In addition to adding BoundFields to the GridView, completion of the Data Source Wizard also causes Visual Studio to set the ObjectDataSource s `OldValuesParameterFormatString` property to original\_{0}.</span></span> <span data-ttu-id="35ea2-263">Legen Sie diese Einstellung auf den Standardwert zurück, {0}.</span><span class="sxs-lookup"><span data-stu-id="35ea2-263">Revert this setting back to its default value, {0} .</span></span>

<span data-ttu-id="35ea2-264">Nachdem Sie diese Änderungen an GridView und ObjectDataSource vorgenommen haben, sollte Ihr deklaratives Markup in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="35ea2-264">After making these edits to the GridView and ObjectDataSource, their declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](working-with-computed-columns-cs/samples/sample7.aspx)]

<span data-ttu-id="35ea2-265">Besuchen Sie anschließend diese Seite über einen Browser.</span><span class="sxs-lookup"><span data-stu-id="35ea2-265">Next, visit this page through a browser.</span></span> <span data-ttu-id="35ea2-266">Wie in Abbildung 12 gezeigt, wird jeder Lieferant in einem Raster aufgelistet, das die `FullContactName` Spalte enthält, deren Wert einfach die Verkettung der anderen drei Spalten ist, die als `ContactName` (`ContactTitle`, `CompanyName`) formatiert sind.</span><span class="sxs-lookup"><span data-stu-id="35ea2-266">As Figure 12 shows, each supplier is listed in a grid that includes the `FullContactName` column, whose value is simply the concatenation of the other three columns formatted as `ContactName` (`ContactTitle`, `CompanyName`) .</span></span>

<span data-ttu-id="35ea2-267">[![werden die einzelnen Lieferanten im Raster aufgelistet.](working-with-computed-columns-cs/_static/image35.png)](working-with-computed-columns-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-267">[![Each Supplier is Listed in the Grid](working-with-computed-columns-cs/_static/image35.png)](working-with-computed-columns-cs/_static/image34.png)</span></span>

<span data-ttu-id="35ea2-268">**Abbildung 12**: jeder Lieferant ist im Raster aufgelistet ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-268">**Figure 12**: Each Supplier is Listed in the Grid ([Click to view full-size image](working-with-computed-columns-cs/_static/image36.png))</span></span>

<span data-ttu-id="35ea2-269">Wenn Sie auf die Schaltfläche Bearbeiten für einen bestimmten Lieferanten klicken, wird ein Postback ausgelöst, und die Zeile wird in der Bearbeitungs Schnittstelle gerendert (siehe Abbildung 13)</span><span class="sxs-lookup"><span data-stu-id="35ea2-269">Clicking the Edit button for a particular supplier causes a postback and has that row rendered in its editing interface (see Figure 13).</span></span> <span data-ttu-id="35ea2-270">Die ersten drei Spalten werden in Ihrer Standard Bearbeitungs Schnittstelle dargestellt-ein TextBox-Steuerelement, dessen `Text`-Eigenschaft auf den Wert des Datenfelds festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-270">The first three columns render in their default editing interface - a TextBox control whose `Text` property is set to the value of the data field.</span></span> <span data-ttu-id="35ea2-271">Die `FullContactName` Spalte bleibt jedoch als Text erhalten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-271">The `FullContactName` column, however, remains as text.</span></span> <span data-ttu-id="35ea2-272">Beim Hinzufügen von boundfields zur GridView zum Abschluss des Assistenten zum Konfigurieren von Datenquellen wurde die Eigenschaft `FullContactName` BoundField s `ReadOnly` auf `true` festgelegt, da die `SuppliersDataTable`-Eigenschaft der entsprechenden `FullContactName` Spalte `ReadOnly` auf `true`festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-272">When the BoundFields were added to the GridView at the completion of the Data Source Configuration wizard, the `FullContactName` BoundField s `ReadOnly` property was set to `true` because the corresponding `FullContactName` column in the `SuppliersDataTable` has its `ReadOnly` property set to `true`.</span></span> <span data-ttu-id="35ea2-273">Wie in Schritt 4 erwähnt, wurde die Eigenschaft `FullContactName` s `ReadOnly` auf `true` festgelegt, da der TableAdapter erkannt hat, dass es sich bei der Spalte um eine berechnete Spalte handelt.</span><span class="sxs-lookup"><span data-stu-id="35ea2-273">As noted in Step 4, the `FullContactName` s `ReadOnly` property was set to `true` because the TableAdapter detected that the column was a computed column.</span></span>

<span data-ttu-id="35ea2-274">[![die fullcontactname-Spalte kann nicht bearbeitet werden.](working-with-computed-columns-cs/_static/image38.png)](working-with-computed-columns-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="35ea2-274">[![The FullContactName Column is Not Editable](working-with-computed-columns-cs/_static/image38.png)](working-with-computed-columns-cs/_static/image37.png)</span></span>

<span data-ttu-id="35ea2-275">**Abbildung 13**: die `FullContactName` Spalte kann nicht bearbeitet werden ([Klicken Sie, um das Bild in voller Größe anzuzeigen](working-with-computed-columns-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="35ea2-275">**Figure 13**: The `FullContactName` Column is Not Editable ([Click to view full-size image](working-with-computed-columns-cs/_static/image39.png))</span></span>

<span data-ttu-id="35ea2-276">Aktualisieren Sie den Wert von mindestens einer der bearbeitbaren Spalten, und klicken Sie auf aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="35ea2-276">Go ahead and update the value of one or more of the editable columns and click Update.</span></span> <span data-ttu-id="35ea2-277">Beachten Sie, dass der Wert der `FullContactName` s automatisch aktualisiert wird, um die Änderung widerzuspiegeln.</span><span class="sxs-lookup"><span data-stu-id="35ea2-277">Note how the `FullContactName` s value is automatically updated to reflect the change.</span></span>

> [!NOTE]
> <span data-ttu-id="35ea2-278">Die GridView verwendet derzeit boundfields für die bearbeitbaren Felder, was zur Standard Bearbeitungs Schnittstelle führt.</span><span class="sxs-lookup"><span data-stu-id="35ea2-278">The GridView currently uses BoundFields for the editable fields, resulting in the default editing interface.</span></span> <span data-ttu-id="35ea2-279">Da das `CompanyName` Feld erforderlich ist, sollte es in ein TemplateField-Element konvertiert werden, das ein "Requirements dfieldvalidator" enthält.</span><span class="sxs-lookup"><span data-stu-id="35ea2-279">Since the `CompanyName` field is required, it should be converted into a TemplateField that includes a RequiredFieldValidator.</span></span> <span data-ttu-id="35ea2-280">Ich lasse dies als Übung für den interessierten Reader aus.</span><span class="sxs-lookup"><span data-stu-id="35ea2-280">I leave this as an exercise for the interested reader.</span></span> <span data-ttu-id="35ea2-281">Ausführliche Anweisungen zum Konvertieren eines BoundField in ein TemplateField und zum Hinzufügen von Validierungs Steuerelementen finden [Sie unter Hinzufügen von Validierungs Steuerelementen zum Bearbeitungs-und einfügeschnittstellen](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) -Tutorial.</span><span class="sxs-lookup"><span data-stu-id="35ea2-281">Consult the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial for step-by-step instructions on converting a BoundField to a TemplateField and adding validation controls.</span></span>

## <a name="summary"></a><span data-ttu-id="35ea2-282">Summary</span><span class="sxs-lookup"><span data-stu-id="35ea2-282">Summary</span></span>

<span data-ttu-id="35ea2-283">Beim Definieren des Schemas für eine Tabelle ermöglicht Microsoft SQL Server das einschließen berechneter Spalten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-283">When defining the schema for a table, Microsoft SQL Server allows the inclusion of computed columns.</span></span> <span data-ttu-id="35ea2-284">Dabei handelt es sich um Spalten, deren Werte anhand eines Ausdrucks berechnet werden, der in der Regel auf die Werte aus anderen Spalten im gleichen Datensatz verweist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-284">These are columns whose values are calculated from an expression that usually references the values from other columns in the same record.</span></span> <span data-ttu-id="35ea2-285">Da die Werte für berechnete Spalten auf einem Ausdruck basieren, sind Sie schreibgeschützt und können nicht in einer `INSERT`-oder `UPDATE` Anweisung einem Wert zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-285">Since the values for computed columns are based on an expression, they are read-only and cannot be assigned a value in an `INSERT` or `UPDATE` statement.</span></span> <span data-ttu-id="35ea2-286">Dies führt zu Problemen, wenn eine berechnete Spalte in der Haupt Abfrage eines TableAdapter verwendet wird, der versucht, automatisch entsprechende `INSERT`-, `UPDATE`-und `DELETE`-Anweisungen zu generieren.</span><span class="sxs-lookup"><span data-stu-id="35ea2-286">This introduces challenges when using a computed column in the main query of a TableAdapter that tries to automatically generate corresponding `INSERT`, `UPDATE`, and `DELETE` statements.</span></span>

<span data-ttu-id="35ea2-287">In diesem Tutorial haben wir Techniken zum Umgehen der Probleme erläutert, die für berechnete Spalten auftreten.</span><span class="sxs-lookup"><span data-stu-id="35ea2-287">In this tutorial we discussed techniques for circumventing the challenges posed by computed columns.</span></span> <span data-ttu-id="35ea2-288">Insbesondere haben wir in unserem TableAdapter gespeicherte Prozeduren verwendet, um die Brüchigkeit zu überwinden, die in TableAdapters mit Ad-hoc-SQL-Anweisungen verankert ist.</span><span class="sxs-lookup"><span data-stu-id="35ea2-288">In particular, we used stored procedures in our TableAdapter to overcome the brittleness inherent in TableAdapters that use ad-hoc SQL statements.</span></span> <span data-ttu-id="35ea2-289">Wenn der TableAdapter-Assistent neue gespeicherte Prozeduren erstellt, ist es wichtig, dass die Haupt Abfrage zuerst berechnete Spalten auslassen, da ihre Anwesenheit verhindert, dass die gespeicherten Prozeduren für die Datenänderung generiert werden.</span><span class="sxs-lookup"><span data-stu-id="35ea2-289">When having the TableAdapter wizard create new stored procedures, it is important that we have the main query initially omit any computed columns because their presence prevents the data modification stored procedures from being generated.</span></span> <span data-ttu-id="35ea2-290">Nachdem der TableAdapter anfänglich konfiguriert wurde, kann die `SelectCommand` gespeicherte Prozedur neu erstellt werden, um berechnete Spalten einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="35ea2-290">After the TableAdapter has been initially configured, its `SelectCommand` stored procedure can be retooled to include any computed columns.</span></span>

<span data-ttu-id="35ea2-291">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="35ea2-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="35ea2-292">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="35ea2-292">About the Author</span></span>

<span data-ttu-id="35ea2-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="35ea2-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="35ea2-294">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="35ea2-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="35ea2-295">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="35ea2-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="35ea2-296">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="35ea2-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="35ea2-297">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="35ea2-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="35ea2-298">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="35ea2-298">Special Thanks To</span></span>

<span data-ttu-id="35ea2-299">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="35ea2-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="35ea2-300">Die führenden Reviewer für dieses Tutorial waren Hilton geisenow und Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="35ea2-300">Lead reviewers for this tutorial were Hilton Geisenow and Teresa Murphy.</span></span> <span data-ttu-id="35ea2-301">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="35ea2-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="35ea2-302">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="35ea2-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="35ea2-303">[Zurück](adding-additional-datatable-columns-cs.md)
> [Weiter](configuring-the-data-access-layer-s-connection-and-command-level-settings-cs.md)</span><span class="sxs-lookup"><span data-stu-id="35ea2-303">[Previous](adding-additional-datatable-columns-cs.md)
[Next](configuring-the-data-access-layer-s-connection-and-command-level-settings-cs.md)</span></span>
