---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: Zwischenspeichern von Daten beim AnwendungsC#Start () | Microsoft-Dokumentation
author: rick-anderson
description: In jeder Webanwendung werden einige Daten häufig verwendet, und einige Daten werden selten verwendet. Wir können die Leistung unserer ASP.NET-Anwendung b verbessern...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: a0b55b0df1b7843120de284891e16178df23fabe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78465789"
---
# <a name="caching-data-at-application-startup-c"></a><span data-ttu-id="9fb01-104">Zwischenspeichern von Daten beim Anwendungsstart (C#)</span><span class="sxs-lookup"><span data-stu-id="9fb01-104">Caching Data at Application Startup (C#)</span></span>

<span data-ttu-id="9fb01-105">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9fb01-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="9fb01-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="9fb01-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="9fb01-107">In jeder Webanwendung werden einige Daten häufig verwendet, und einige Daten werden selten verwendet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="9fb01-108">Wir können die Leistung unserer ASP.NET-Anwendung verbessern, indem wir die häufig verwendeten Daten im Voraus laden. Dies ist eine Technik, die als Caching bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as Caching.</span></span> <span data-ttu-id="9fb01-109">In diesem Tutorial wird ein Ansatz für das proaktive laden veranschaulicht, bei dem beim Anwendungsstart Daten in den Cache geladen werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>

## <a name="introduction"></a><span data-ttu-id="9fb01-110">Einführung</span><span class="sxs-lookup"><span data-stu-id="9fb01-110">Introduction</span></span>

<span data-ttu-id="9fb01-111">In den beiden vorherigen Tutorials wurde das Zwischenspeichern von Daten in den Ebenen Darstellung und Caching erläutert.</span><span class="sxs-lookup"><span data-stu-id="9fb01-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="9fb01-112">Beim zwischen [Speichern von Daten mit der ObjectDataSource](caching-data-with-the-objectdatasource-cs.md)haben wir uns mit der Verwendung der Cachingfeatures von ObjectDataSource zum Zwischenspeichern von Daten in der Darstellungs Schicht beschäftigt.</span><span class="sxs-lookup"><span data-stu-id="9fb01-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource's caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="9fb01-113">[Das Zwischenspeichern von Daten in der Architektur](caching-data-in-the-architecture-cs.md) untersuchte Zwischenspeicherung in einer neuen, separaten Cache Schicht.</span><span class="sxs-lookup"><span data-stu-id="9fb01-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="9fb01-114">Für beide Tutorials wurde *reaktives laden* bei der Arbeit mit dem Daten Cache verwendet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="9fb01-115">Mit reaktivem laden überprüft das System jedes Mal, wenn die Daten angefordert werden, ob es sich im Cache befindet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-115">With reactive loading, each time the data is requested, the system first checks if it's in the cache.</span></span> <span data-ttu-id="9fb01-116">Wenn dies nicht der Fall ist, werden die Daten aus der Ursprungsquelle, z. b. der Datenbank, abgerufen und im Cache gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9fb01-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="9fb01-117">Der Hauptvorteil von reaktivem laden ist die einfache Implementierung.</span><span class="sxs-lookup"><span data-stu-id="9fb01-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="9fb01-118">Einer der Nachteile ist die ungleiche Leistung von Anforderungen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="9fb01-119">Stellen Sie sich eine Seite vor, die die zwischen Speicherungs Ebene aus dem vorherigen Tutorial verwendet, um Produktinformationen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="9fb01-120">Wenn diese Seite zum ersten Mal besucht wird oder zum ersten Mal aufgerufen wird, nachdem die zwischengespeicherten Daten aufgrund von Arbeitsspeicher Einschränkungen entfernt wurden oder der angegebene Ablauf erreicht wurde, müssen die Daten aus der Datenbank abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="9fb01-121">Daher benötigen diese Benutzer Anforderungen länger, als von Benutzern angefordert werden, die vom Cache bedient werden können.</span><span class="sxs-lookup"><span data-stu-id="9fb01-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="9fb01-122">Das *proaktive laden* stellt eine Alternative Cache Verwaltungs Strategie dar, mit der die Leistung über Anforderungen hinweg durch Laden der zwischengespeicherten Daten vor dem Bedarf ausgecheckt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it's needed.</span></span> <span data-ttu-id="9fb01-123">In der Regel verwendet das proaktive laden einen Prozess, der entweder regelmäßig überprüft oder benachrichtigt wird, wenn die zugrunde liegenden Daten aktualisiert wurden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="9fb01-124">Dieser Prozess aktualisiert dann den Cache, um ihn zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="9fb01-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="9fb01-125">Das proaktive laden ist besonders nützlich, wenn die zugrunde liegenden Daten von einer langsamen Datenbankverbindung, einem Webdienst oder einer anderen besonders langsamen Datenquelle stammen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="9fb01-126">Diese Methode für das proaktive laden ist jedoch schwieriger zu implementieren, da Sie die Erstellung, Verwaltung und Bereitstellung eines Prozesses zum Überprüfen auf Änderungen und zum Aktualisieren des Caches erfordert.</span><span class="sxs-lookup"><span data-stu-id="9fb01-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="9fb01-127">Eine weitere Art des proaktiven Ladens und der Typ, den wir in diesem Tutorial untersuchen, sind das Laden von Daten in den Cache beim Anwendungsstart.</span><span class="sxs-lookup"><span data-stu-id="9fb01-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="9fb01-128">Diese Vorgehensweise ist besonders nützlich für das Zwischenspeichern statischer Daten, wie z. b. die Datensätze in Daten Bank Nachschlage Tabellen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb01-129">Ausführlichere Informationen zu den Unterschieden zwischen proaktivem und reaktivem laden sowie Listen von vor-und Nachteile sowie Empfehlungen zur Implementierung finden Sie im Abschnitt [Verwalten des Inhalts eines Caches](https://msdn.microsoft.com/library/ms978503.aspx) des [Handbuchs zur Caching-Architektur für .NET Framework-Anwendungen](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="9fb01-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>

## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="9fb01-130">Schritt 1: Bestimmen der Daten, die beim Starten der Anwendung zwischengespeichert werden sollen</span><span class="sxs-lookup"><span data-stu-id="9fb01-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="9fb01-131">Die zwischen Speicherungs Beispiele mit reaktivem laden, die wir in den vorherigen beiden Tutorials untersucht haben, funktionieren gut für Daten, die sich in regelmäßigen Abständen ändern und die Generierung nicht übermäßig lange dauert.</span><span class="sxs-lookup"><span data-stu-id="9fb01-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="9fb01-132">Wenn sich die zwischengespeicherten Daten jedoch nie ändern, ist der von reaktivem laden verwendete Ablauf überflüssig.</span><span class="sxs-lookup"><span data-stu-id="9fb01-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="9fb01-133">Wenn die Daten, die zwischengespeichert werden, sehr viel Zeit in Anspruch nehmen, müssen die Benutzer, deren Anforderungen den Cache Leerstellen, lange warten, bis die zugrunde liegenden Daten abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="9fb01-134">Es empfiehlt sich, statische Daten und Daten zwischenzuspeichern, die beim Starten der Anwendung sehr viel Zeit in Erwägung gezogen werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="9fb01-135">Obwohl Datenbanken viele dynamische, häufig veränderliche Werte aufweisen, verfügen die meisten auch über eine große Menge statischer Daten.</span><span class="sxs-lookup"><span data-stu-id="9fb01-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="9fb01-136">Beispielsweise verfügen praktisch alle Datenmodelle über eine oder mehrere Spalten, die einen bestimmten Wert aus einem festgelegten Satz von Optionen enthalten.</span><span class="sxs-lookup"><span data-stu-id="9fb01-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="9fb01-137">Eine `Patients` Datenbanktabelle kann über eine `PrimaryLanguage` Spalte verfügen, deren Satz Werte Englisch, Spanisch, Französisch, Russisch, Japanisch usw. sein können.</span><span class="sxs-lookup"><span data-stu-id="9fb01-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="9fb01-138">Oft werden diese Spaltentypen mithilfe von Nachschlage *Tabellen*implementiert.</span><span class="sxs-lookup"><span data-stu-id="9fb01-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="9fb01-139">Anstatt die Zeichenfolge Englisch oder Französisch in der `Patients` Tabelle zu speichern, wird eine zweite Tabelle mit, häufig zwei Spalten, einem eindeutigen Bezeichner und einer Zeichen folgen Beschreibung, mit einem Datensatz für jeden möglichen Wert erstellt.</span><span class="sxs-lookup"><span data-stu-id="9fb01-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="9fb01-140">Die Spalte `PrimaryLanguage` in der `Patients` Tabelle speichert den entsprechenden eindeutigen Bezeichner in der Nachschlage Tabelle.</span><span class="sxs-lookup"><span data-stu-id="9fb01-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="9fb01-141">In Abbildung 1 ist die primäre Sprache von Patient John Doe Englisch, während Ed johnes Russisch ist.</span><span class="sxs-lookup"><span data-stu-id="9fb01-141">In Figure 1, patient John Doe's primary language is English, while Ed Johnson's is Russian.</span></span>

![Die Sprachen Tabelle ist eine Nachschlage Tabelle, die von der Tabelle "Patienten" verwendet wird.](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="9fb01-143">**Abbildung 1**: die `Languages` Tabelle ist eine Nachschlage Tabelle, die von der `Patients` Tabelle verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>

<span data-ttu-id="9fb01-144">Die Benutzeroberfläche zum Bearbeiten oder Erstellen eines neuen Patienten würde eine Dropdown Liste zulässiger Sprachen enthalten, die von den Datensätzen in der `Languages` Tabelle aufgefüllt werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="9fb01-145">Ohne Caching muss jedes Mal, wenn diese Schnittstelle besucht wird, das System die `Languages` Tabelle Abfragen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="9fb01-146">Dies ist verschwenderisch und unnötig, da sich Such Tabellenwerte sehr selten ändern, falls immer.</span><span class="sxs-lookup"><span data-stu-id="9fb01-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="9fb01-147">Wir könnten die `Languages` Daten mit denselben reaktiven lade Techniken Zwischenspeichern, die in den vorherigen Tutorials untersucht wurden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="9fb01-148">Reaktives Laden verwendet jedoch einen zeitbasierten Ablauf, der nicht für statische Nachschlage Tabellendaten benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="9fb01-149">Das Zwischenspeichern mit reaktivem Laden wäre zwar besser als das gesamte Caching, aber der beste Ansatz wäre, die Nachschlage Tabellendaten beim Starten der Anwendung proaktiv in den Cache zu laden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="9fb01-150">In diesem Tutorial wird erläutert, wie Nachschlage Tabellendaten und andere statische Informationen zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="9fb01-151">Schritt 2: Untersuchen der verschiedenen Möglichkeiten zum Zwischenspeichern von Daten</span><span class="sxs-lookup"><span data-stu-id="9fb01-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="9fb01-152">Informationen können mithilfe verschiedener Ansätze Programm gesteuert in einer ASP.NET-Anwendung zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="9fb01-153">Wir haben bereits gesehen, wie Sie den Daten Cache in vorherigen Tutorials verwenden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="9fb01-154">Alternativ können Objekte Programm gesteuert mithilfe *statischer* Member oder des *Anwendungs Zustands*zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="9fb01-155">Beim Arbeiten mit einer Klasse muss die Klasse in der Regel zuerst instanziiert werden, bevor auf die Member zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="9fb01-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="9fb01-156">Um z. b. eine Methode aus einer der Klassen in unserer Geschäftslogik Schicht aufzurufen, müssen wir zuerst eine Instanz der-Klasse erstellen:</span><span class="sxs-lookup"><span data-stu-id="9fb01-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="9fb01-157">Bevor wir *SomeMethod* aufrufen oder mit *SomeProperty*arbeiten können, müssen wir zuerst mithilfe des Schlüssel Worts `new` eine Instanz der Klasse erstellen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="9fb01-158">*SomeMethod* und *SomeProperty* sind einer bestimmten-Instanz zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="9fb01-159">Die Lebensdauer dieser Member ist an die Lebensdauer des zugeordneten-Objekts gebunden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="9fb01-160">*Statische*Member hingegen sind Variablen, Eigenschaften und Methoden, die von *allen* Instanzen der Klasse gemeinsam genutzt werden und folglich eine Lebensdauer aufweisen, solange die Klasse ist.</span><span class="sxs-lookup"><span data-stu-id="9fb01-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="9fb01-161">Statische Member werden durch das Schlüsselwort `static`bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="9fb01-162">Zusätzlich zu statischen Membern können Daten mithilfe des Anwendungs Zustands zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="9fb01-163">Jede ASP.NET-Anwendung verwaltet eine Name-Wert-Sammlung, die für alle Benutzer und Seiten der Anwendung freigegeben wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-163">Each ASP.NET application maintains a name/value collection that's shared across all users and pages of the application.</span></span> <span data-ttu-id="9fb01-164">Auf diese Auflistung kann mit der [`Application`-Eigenschaft](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)der [`HttpContext`-Klasse](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)zugegriffen werden, und Sie wird aus der Code Behind-Klasse einer ASP.NET-Seite wie folgt verwendet:</span><span class="sxs-lookup"><span data-stu-id="9fb01-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page's code-behind class like so:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="9fb01-165">Der Daten Cache bietet eine viel umfassendere API zum Zwischenspeichern von Daten und bietet Mechanismen für Zeit-und Abhängigkeits basierte Abläufe, Cache Element Prioritäten usw.</span><span class="sxs-lookup"><span data-stu-id="9fb01-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="9fb01-166">Mit statischen Membern und dem Anwendungs Zustand müssen diese Features manuell vom Seiten Entwickler hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="9fb01-167">Beim Zwischenspeichern von Daten beim Anwendungsstart für die Lebensdauer der Anwendung werden jedoch die Vorteile des Daten Caches in den Cache verschoben.</span><span class="sxs-lookup"><span data-stu-id="9fb01-167">When caching data at application startup for the lifetime of the application, however, the data cache's advantages are moot.</span></span> <span data-ttu-id="9fb01-168">In diesem Tutorial betrachten wir den Code, in dem alle drei Techniken zum Zwischenspeichern statischer Daten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="9fb01-169">Schritt 3: Zwischenspeichern der`Suppliers`Tabellendaten</span><span class="sxs-lookup"><span data-stu-id="9fb01-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="9fb01-170">Die Northwind-Datenbanktabellen, die wir für Date implementiert haben, enthalten keine herkömmlichen Nachschlage Tabellen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="9fb01-171">Die vier in unserer dal implementierten DataTables alle Modell Tabellen, deren Werte nicht statisch sind.</span><span class="sxs-lookup"><span data-stu-id="9fb01-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="9fb01-172">Anstatt die Zeit für das Hinzufügen einer neuen Datentabelle zur dal und dann eine neue Klasse und Methoden in der BLL auszugeben, nehmen wir für dieses Tutorial an, dass die Daten der `Suppliers` Tabelle statisch sind.</span><span class="sxs-lookup"><span data-stu-id="9fb01-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let's just pretend that the `Suppliers` table's data is static.</span></span> <span data-ttu-id="9fb01-173">Daher könnten wir diese Daten beim Anwendungsstart Zwischenspeichern.</span><span class="sxs-lookup"><span data-stu-id="9fb01-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="9fb01-174">Erstellen Sie zunächst eine neue Klasse mit dem Namen `StaticCache.cs` im Ordner `CL`.</span><span class="sxs-lookup"><span data-stu-id="9fb01-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>

![Erstellen der StaticCache.cs-Klasse im cl-Ordner](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="9fb01-176">**Abbildung 2**: Erstellen der `StaticCache.cs` Klasse im Ordner "`CL`"</span><span class="sxs-lookup"><span data-stu-id="9fb01-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>

<span data-ttu-id="9fb01-177">Wir müssen eine Methode hinzufügen, die die Daten beim Start in den entsprechenden Cache Speicher lädt, sowie Methoden, die Daten aus diesem Cache zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9fb01-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="9fb01-178">Der obige Code verwendet eine statische Member-Variable, `suppliers`, um die Ergebnisse aus der `GetSuppliers()`-Methode der `SuppliersBLL` Klasse aufzunehmen, die von der `LoadStaticCache()`-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class's `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="9fb01-179">Die `LoadStaticCache()`-Methode soll während des Starts der Anwendung aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-179">The `LoadStaticCache()` method is meant to be called during the application's start.</span></span> <span data-ttu-id="9fb01-180">Nachdem diese Daten beim Anwendungsstart geladen wurden, kann jede Seite, die mit Lieferantendaten arbeiten muss, die `GetSuppliers()`-Methode der `StaticCache` Klasse aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class's `GetSuppliers()` method.</span></span> <span data-ttu-id="9fb01-181">Daher wird der Daten bankaufrufzum Abrufen der Lieferanten nur einmal beim Anwendungsstart ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9fb01-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="9fb01-182">Anstatt eine statische Element Variable als Cache Speicher zu verwenden, könnten wir alternativ den Anwendungs Status oder den Daten Cache verwenden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="9fb01-183">Der folgende Code zeigt die-Klasse, die für die Verwendung des Anwendungs Zustands neu erstellt wurde:</span><span class="sxs-lookup"><span data-stu-id="9fb01-183">The following code shows the class retooled to use application state:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="9fb01-184">In `LoadStaticCache()`werden die Lieferanteninformationen im Anwendungsvariablen *Schlüssel*gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9fb01-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="9fb01-185">Sie wird als geeigneter Typ (`Northwind.SuppliersDataTable`) aus `GetSuppliers()`zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9fb01-185">It's returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="9fb01-186">Der Zugriff auf den Anwendungs Zustand ist in den Code-Behind-Klassen von ASP.NET Seiten mithilfe von `Application["key"]`möglich. in der Architektur müssen wir jedoch `HttpContext.Current.Application["key"]` verwenden, um die aktuelle `HttpContext`zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="9fb01-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="9fb01-187">Ebenso kann der Daten Cache als Cache Speicher verwendet werden, wie im folgenden Code gezeigt:</span><span class="sxs-lookup"><span data-stu-id="9fb01-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="9fb01-188">Wenn Sie dem Daten Cache ohne zeitbasierten Ablauf ein Element hinzufügen möchten, verwenden Sie die Werte `System.Web.Caching.Cache.NoAbsoluteExpiration` und `System.Web.Caching.Cache.NoSlidingExpiration` als Eingabeparameter.</span><span class="sxs-lookup"><span data-stu-id="9fb01-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="9fb01-189">Diese spezielle Überladung der `Insert`-Methode des Daten Caches wurde ausgewählt, sodass wir die *Priorität* des Cache Elements angeben konnten.</span><span class="sxs-lookup"><span data-stu-id="9fb01-189">This particular overload of the data cache's `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="9fb01-190">Die Priorität wird verwendet, um zu bestimmen, welche Elemente aus dem Cache gelöscht werden sollen, wenn der verfügbare Arbeitsspeicher gering ist.</span><span class="sxs-lookup"><span data-stu-id="9fb01-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="9fb01-191">Hier wird die Prioritäts `NotRemovable`verwendet, mit der sichergestellt wird, dass dieses Cache Element nicht bereinigt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-191">Here we use the priority `NotRemovable`, which ensures that this cache item won't be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb01-192">Der Download dieses Lernprogramms implementiert die `StaticCache`-Klasse mithilfe der statischen Member-Variablen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-192">This tutorial's download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="9fb01-193">Der Code für den Anwendungs Status und die Daten Cache Techniken ist in den Kommentaren in der Klassendatei verfügbar.</span><span class="sxs-lookup"><span data-stu-id="9fb01-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>

## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="9fb01-194">Schritt 4: Ausführen von Code beim Anwendungsstart</span><span class="sxs-lookup"><span data-stu-id="9fb01-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="9fb01-195">Um Code auszuführen, wenn eine Webanwendung zum ersten Mal gestartet wird, müssen wir eine spezielle Datei namens `Global.asax`erstellen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="9fb01-196">Diese Datei kann Ereignishandler für Ereignisse auf Anwendungs-, Sitzungs-und Anforderungs Ebene enthalten. hier können wir Code hinzufügen, der immer dann ausgeführt wird, wenn die Anwendung gestartet wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="9fb01-197">Fügen Sie die `Global.asax` Datei zum Stammverzeichnis Ihrer Webanwendung hinzu, indem Sie mit der rechten Maustaste auf den Namen des Website Projekts in der Projektmappen-Explorer von Visual Studio klicken und neues Element hinzufügen auswählen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-197">Add the `Global.asax` file to your web application's root directory by right-clicking on the website project name in Visual Studio's Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="9fb01-198">Wählen Sie im Dialogfeld Neues Element hinzufügen den Elementtyp globale Anwendungsklasse aus, und klicken Sie dann auf die Schaltfläche hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="9fb01-199">Wenn Sie bereits über eine `Global.asax`-Datei in Ihrem Projekt verfügen, wird der Typ der globalen Anwendungsklasse nicht im Dialogfeld Neues Element hinzufügen aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>

<span data-ttu-id="9fb01-200">[![die Datei "Global. asax" dem Stammverzeichnis Ihrer Webanwendung hinzufügen.](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="9fb01-200">[![Add the Global.asax File to Your Web Application's Root Directory](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span></span>

<span data-ttu-id="9fb01-201">**Abbildung 3**: Hinzufügen der `Global.asax` Datei zum Stammverzeichnis Ihrer Webanwendung ([Klicken Sie, um das Bild in voller Größe anzuzeigen](caching-data-at-application-startup-cs/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="9fb01-201">**Figure 3**: Add the `Global.asax` File to Your Web Application's Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>

<span data-ttu-id="9fb01-202">Die standardmäßige `Global.asax` Datei Vorlage umfasst fünf Methoden innerhalb eines serverseitigen `<script>` Tags:</span><span class="sxs-lookup"><span data-stu-id="9fb01-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="9fb01-203">**`Application_Start`** wird beim ersten Starten der Webanwendung ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="9fb01-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="9fb01-204">**`Application_End`** wird ausgeführt, wenn die Anwendung heruntergefahren wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="9fb01-205">**`Application_Error`** ausgeführt wird, wenn eine nicht behandelte Ausnahme die Anwendung erreicht.</span><span class="sxs-lookup"><span data-stu-id="9fb01-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="9fb01-206">**`Session_Start`** wird ausgeführt, wenn eine neue Sitzung erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="9fb01-207">**`Session_End`** wird ausgeführt, wenn eine Sitzung abgelaufen ist oder abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="9fb01-208">Der `Application_Start` Ereignishandler wird während des Lebenszyklus einer Anwendung nur einmal aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-208">The `Application_Start` event handler is called only once during an application's life cycle.</span></span> <span data-ttu-id="9fb01-209">Die Anwendung wird gestartet, wenn eine ASP.NET-Ressource zum ersten Mal von der Anwendung angefordert wird. Sie wird so lange ausgeführt, bis die Anwendung neu gestartet wird. Dies kann durch Ändern des Inhalts des Ordners `/Bin`, Ändern von `Global.asax`, Ändern des Inhalts im Ordner `App_Code` oder Ändern der `Web.config` Datei unter anderem verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="9fb01-210">Eine ausführlichere Erläuterung des Anwendungslebenszyklus finden Sie unter [ASP.NET Application Lifecycle Overview (Übersicht über den Anwendungslebenszyklus](https://msdn.microsoft.com/library/ms178473.aspx) ).</span><span class="sxs-lookup"><span data-stu-id="9fb01-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="9fb01-211">Für diese Tutorials müssen wir nur der `Application_Start`-Methode Code hinzufügen. Sie können also die anderen entfernen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="9fb01-212">Aufrufen Sie in `Application_Start`einfach die `LoadStaticCache()`-Methode der `StaticCache` Klasse, die die Lieferanteninformationen lädt und zwischenspeichert:</span><span class="sxs-lookup"><span data-stu-id="9fb01-212">In `Application_Start`, simply call the `StaticCache` class's `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="9fb01-213">Das ist schon alles!</span><span class="sxs-lookup"><span data-stu-id="9fb01-213">That's all there is to it!</span></span> <span data-ttu-id="9fb01-214">Beim Anwendungsstart nimmt die `LoadStaticCache()`-Methode die Lieferanteninformationen aus der BLL auf und speichert Sie in einer statischen Element Variablen (oder einem beliebigen Cache Speicher, den Sie in der `StaticCache`-Klasse verwendet haben).</span><span class="sxs-lookup"><span data-stu-id="9fb01-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="9fb01-215">Um dieses Verhalten zu überprüfen, legen Sie einen Haltepunkt in der `Application_Start` Methode fest, und führen Sie die Anwendung aus.</span><span class="sxs-lookup"><span data-stu-id="9fb01-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="9fb01-216">Beachten Sie, dass der Breakpoint beim Starten der Anwendung gedrückt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="9fb01-217">Nachfolgende Anforderungen bewirken jedoch nicht, dass die `Application_Start`-Methode ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>

<span data-ttu-id="9fb01-218">[![einen Haltepunkt verwenden, um zu überprüfen, ob der Application_Start-Ereignis Handler ausgeführt wird.](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="9fb01-218">[![Use a Breakpoint to Verify that the Application_Start Event Handler is Being Executed](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span></span>

<span data-ttu-id="9fb01-219">**Abbildung 4**: Verwenden eines Breakpoints zum Überprüfen, ob der `Application_Start` Ereignis Handler ausgeführt wird ([Klicken Sie, um das Bild in voller Größe anzuzeigen](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="9fb01-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9fb01-220">Wenn Sie beim ersten Start des Debuggens nicht den `Application_Start` Haltepunkt erreichen, liegt dies daran, dass die Anwendung bereits gestartet wurde.</span><span class="sxs-lookup"><span data-stu-id="9fb01-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="9fb01-221">Erzwingen Sie einen Neustart der Anwendung, indem Sie Ihre `Global.asax` oder `Web.config` Dateien ändern, und wiederholen Sie dann den Vorgang.</span><span class="sxs-lookup"><span data-stu-id="9fb01-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="9fb01-222">Sie können am Ende einer dieser Dateien einfach eine leere Zeile hinzufügen (oder entfernen), um die Anwendung schnell neu zu starten.</span><span class="sxs-lookup"><span data-stu-id="9fb01-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>

## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="9fb01-223">Schritt 5: Anzeigen der zwischengespeicherten Daten</span><span class="sxs-lookup"><span data-stu-id="9fb01-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="9fb01-224">An diesem Punkt hat die `StaticCache`-Klasse eine Version der Lieferantendaten beim Anwendungsstart zwischengespeichert, auf die über die `GetSuppliers()`-Methode zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="9fb01-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="9fb01-225">Um mit diesen Daten von der Präsentationsebene zu arbeiten, können wir eine ObjectDataSource verwenden oder die `GetSuppliers()` Methode der `StaticCache` Klasse Programm gesteuert aus der Code Behind-Klasse einer ASP.NET-Klasse aufrufen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class's `GetSuppliers()` method from an ASP.NET page's code-behind class.</span></span> <span data-ttu-id="9fb01-226">Sehen wir uns nun die Verwendung der ObjectDataSource-und GridView-Steuerelemente an, um die zwischengespeicherten Lieferanteninformationen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-226">Let's look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="9fb01-227">Öffnen Sie zunächst die Seite `AtApplicationStartup.aspx` im Ordner `Caching`.</span><span class="sxs-lookup"><span data-stu-id="9fb01-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="9fb01-228">Ziehen Sie eine GridView aus der Toolbox auf den Designer, und legen Sie die `ID`-Eigenschaft auf `Suppliers`fest.</span><span class="sxs-lookup"><span data-stu-id="9fb01-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="9fb01-229">Wählen Sie als nächstes im Smarttagmenü der GridView eine neue ObjectDataSource mit dem Namen `SuppliersCachedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9fb01-229">Next, from the GridView's smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="9fb01-230">Konfigurieren Sie ObjectDataSource so, dass die `GetSuppliers()`-Methode der `StaticCache` Klasse verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-230">Configure the ObjectDataSource to use the `StaticCache` class's `GetSuppliers()` method.</span></span>

<span data-ttu-id="9fb01-231">[![Konfigurieren von ObjectDataSource für die Verwendung der staticcache-Klasse](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="9fb01-231">[![Configure the ObjectDataSource to use the StaticCache Class](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span></span>

<span data-ttu-id="9fb01-232">**Abbildung 5**: Konfigurieren von ObjectDataSource für die Verwendung der `StaticCache`-Klasse ([Klicken Sie, um das Bild in voller Größe anzuzeigen](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="9fb01-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>

<span data-ttu-id="9fb01-233">[![die getsuppliers ()-Methode zum Abrufen der zwischengespeicherten Lieferantendaten verwenden](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="9fb01-233">[![Use the GetSuppliers() Method to Retrieve the Cached Supplier Data](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span></span>

<span data-ttu-id="9fb01-234">**Abbildung 6**: Verwenden der `GetSuppliers()`-Methode zum Abrufen der zwischengespeicherten Lieferantendaten ([Klicken Sie, um das Bild in voller Größe anzuzeigen](caching-data-at-application-startup-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="9fb01-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>

<span data-ttu-id="9fb01-235">Nachdem Sie den Assistenten abgeschlossen haben, fügt Visual Studio automatisch boundfields für jedes der Datenfelder in `SuppliersDataTable`hinzu.</span><span class="sxs-lookup"><span data-stu-id="9fb01-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="9fb01-236">Das deklarative Markup von GridView und ObjectDataSource sollte in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="9fb01-236">Your GridView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="9fb01-237">Abbildung 7 zeigt die Seite, wenn Sie in einem Browser angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="9fb01-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="9fb01-238">Die Ausgabe ist identisch, da wir die Daten aus der `SuppliersBLL` Klasse der BLL abgerufen haben. die `StaticCache` Klasse gibt jedoch die Lieferantendaten zurück, die beim Starten der Anwendung zwischengespeichert wurden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-238">The output is the same had we pulled the data from the BLL's `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="9fb01-239">Sie können Breakpoints in der `GetSuppliers()`-Methode der `StaticCache` Klasse festlegen, um dieses Verhalten zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-239">You can set breakpoints in the `StaticCache` class's `GetSuppliers()` method to verify this behavior.</span></span>

<span data-ttu-id="9fb01-240">[![die zwischengespeicherten Lieferantendaten in einer GridView angezeigt werden.](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="9fb01-240">[![The Cached Supplier Data is Displayed in a GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span></span>

<span data-ttu-id="9fb01-241">**Abbildung 7**: die zwischengespeicherten Lieferantendaten werden in einer GridView angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="9fb01-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="9fb01-242">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="9fb01-242">Summary</span></span>

<span data-ttu-id="9fb01-243">Die meisten Datenmodelle enthalten eine große Menge statischer Daten, die in der Regel in Form von Nachschlage Tabellen implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="9fb01-244">Da diese Informationen statisch sind, gibt es keinen Grund, immer wieder auf die Datenbank zuzugreifen, wenn diese Informationen angezeigt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="9fb01-244">Since this information is static, there's no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="9fb01-245">Außerdem ist es aufgrund seiner statischen Natur, dass beim Zwischenspeichern der Daten keine Ablaufzeit erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="9fb01-245">Furthermore, due to its static nature, when caching the data there's no need for an expiry.</span></span> <span data-ttu-id="9fb01-246">In diesem Tutorial haben Sie erfahren, wie Sie solche Daten in den Daten Cache, den Anwendungs Status und über eine statische Element Variable Zwischenspeichern.</span><span class="sxs-lookup"><span data-stu-id="9fb01-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="9fb01-247">Diese Informationen werden beim Starten der Anwendung zwischengespeichert und bleiben während der gesamten Lebensdauer der Anwendung im Cache.</span><span class="sxs-lookup"><span data-stu-id="9fb01-247">This information is cached at application startup and remains in the cache throughout the application's lifetime.</span></span>

<span data-ttu-id="9fb01-248">In diesem Tutorial und in den letzten beiden Ausführungen haben wir uns mit dem Zwischenspeichern von Daten für die Dauer der Lebensdauer der Anwendung und der Verwendung zeitbasierter Abläufe beschäftigt.</span><span class="sxs-lookup"><span data-stu-id="9fb01-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application's lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="9fb01-249">Beim Zwischenspeichern von Datenbankdaten kann ein zeitbasierter Ablauf jedoch kleiner als ideal sein.</span><span class="sxs-lookup"><span data-stu-id="9fb01-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="9fb01-250">Anstatt den Cache regelmäßig zu leeren, wäre es optimal, das zwischengespeicherte Element nur zu entfernen, wenn die zugrunde liegenden Datenbankdaten geändert werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="9fb01-251">Dieses ideal ist durch die Verwendung von SQL-Cache Abhängigkeiten möglich, die wir im nächsten Tutorial untersuchen werden.</span><span class="sxs-lookup"><span data-stu-id="9fb01-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="9fb01-252">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="9fb01-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9fb01-253">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="9fb01-253">About the Author</span></span>

<span data-ttu-id="9fb01-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="9fb01-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9fb01-255">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="9fb01-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9fb01-256">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9fb01-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9fb01-257">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9fb01-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="9fb01-258">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9fb01-258">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9fb01-259">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="9fb01-259">Special Thanks To</span></span>

<span data-ttu-id="9fb01-260">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="9fb01-260">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9fb01-261">Die führenden Reviewer für dieses Tutorial waren Teresa Murphy und Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="9fb01-261">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="9fb01-262">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="9fb01-262">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9fb01-263">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9fb01-263">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9fb01-264">[Zurück](caching-data-in-the-architecture-cs.md)
> [Weiter](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9fb01-264">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>
