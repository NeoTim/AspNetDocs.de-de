---
uid: web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-cs
title: Zwischenspeichern von Daten mit dem ObjectDataSource-Steuerelement (c#) | Microsoft-Dokumentation
author: rick-anderson
description: Caching kann den Unterschied zwischen einer langsamen und eine schnelle Webanwendung bedeuten. In diesem Tutorial wird die erste von vier, die einen detaillierten Einblick in die ausgabezwischenspeicherung in ASP.NET ausführen...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: bd87413c-8160-4520-a8a2-43b555c4183a
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-with-the-objectdatasource-cs
msc.type: authoredcontent
ms.openlocfilehash: 596414748365c440ca50453c3e905ba6edb43de8
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65114975"
---
# <a name="caching-data-with-the-objectdatasource-c"></a><span data-ttu-id="ede61-104">Zwischenspeichern von Daten mit dem ObjectDataSource-Steuerelement (C#)</span><span class="sxs-lookup"><span data-stu-id="ede61-104">Caching Data with the ObjectDataSource (C#)</span></span>

<span data-ttu-id="ede61-105">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="ede61-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="ede61-106">[Beispiel-App herunter](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_CS.exe) oder [PDF-Datei herunterladen](caching-data-with-the-objectdatasource-cs/_static/datatutorial58cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="ede61-106">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_58_CS.exe) or [Download PDF](caching-data-with-the-objectdatasource-cs/_static/datatutorial58cs1.pdf)</span></span>

> <span data-ttu-id="ede61-107">Caching kann den Unterschied zwischen einer langsamen und eine schnelle Webanwendung bedeuten.</span><span class="sxs-lookup"><span data-stu-id="ede61-107">Caching can mean the difference between a slow and a fast Web application.</span></span> <span data-ttu-id="ede61-108">Dieses Tutorial ist der erste von vier, die einen detaillierten Einblick in die ausgabezwischenspeicherung in ASP.NET verwenden.</span><span class="sxs-lookup"><span data-stu-id="ede61-108">This tutorial is the first of four that take a detailed look at caching in ASP.NET.</span></span> <span data-ttu-id="ede61-109">Erfahren Sie, die grundlegenden Konzepte von Zwischenspeicherung und zwischengespeichert werden an die Darstellungsschicht über das ObjectDataSource-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="ede61-109">Learn the key concepts of caching and how to apply caching to the Presentation Layer through the ObjectDataSource control.</span></span>

## <a name="introduction"></a><span data-ttu-id="ede61-110">Einführung</span><span class="sxs-lookup"><span data-stu-id="ede61-110">Introduction</span></span>

<span data-ttu-id="ede61-111">In der Informatik *zwischenspeichern* ist der Prozess dauert, Daten oder Informationen, die zum Abrufen aufwendig ist, und speichern eine Kopie der Datei an einem Speicherort, der für den Zugriff auf schneller ist.</span><span class="sxs-lookup"><span data-stu-id="ede61-111">In computer science, *caching* is the process of taking data or information that is expensive to obtain and storing a copy of it in a location that is quicker to access.</span></span> <span data-ttu-id="ede61-112">Für datengesteuerte Anwendungen nutzen große und komplexe Abfragen im Allgemeinen die Mehrheit der Anwendung s bei.</span><span class="sxs-lookup"><span data-stu-id="ede61-112">For data-driven applications, large and complex queries commonly consume the majority of the application s execution time.</span></span> <span data-ttu-id="ede61-113">Solche ein s Anwendungsleistung, dann kann häufig durch Speichern der Ergebnisse von teuren Datenbankabfragen in s Anwendungsspeicher verbessert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-113">Such an application s performance, then, can often be improved by storing the results of expensive database queries in the application s memory.</span></span>

<span data-ttu-id="ede61-114">ASP.NET 2.0 bietet eine Vielzahl von Optionen zum Zwischenspeichern.</span><span class="sxs-lookup"><span data-stu-id="ede61-114">ASP.NET 2.0 offers a variety of caching options.</span></span> <span data-ttu-id="ede61-115">Eine gesamte Webseite oder das Benutzersteuerelement s gerenderten Markup kann zwischengespeichert werden, über *ausgabezwischenspeicherung*.</span><span class="sxs-lookup"><span data-stu-id="ede61-115">An entire web page or User Control s rendered markup can be cached through *output caching*.</span></span> <span data-ttu-id="ede61-116">Die ObjectDataSource und SqlDataSource-Steuerelemente bieten Funktionen ebenfalls, wodurch, sodass Daten zum Zwischenspeichern auf der Steuerelementebene zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-116">The ObjectDataSource and SqlDataSource controls provide caching capabilities as well, thereby allowing data to be cached at the control level.</span></span> <span data-ttu-id="ede61-117">Und ASP.NET s *Datencache* bietet eine umfangreiche Cache-API, die Seitenentwickler programmgesteuert Zwischenspeichern von Objekten ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="ede61-117">And ASP.NET s *data cache* provides a rich caching API that enables page developers to programmatically cache objects.</span></span> <span data-ttu-id="ede61-118">Das Zwischenspeichern in diesem Tutorial und die folgenden drei untersuchenden mithilfe der "ObjectDataSource"-s-Funktionen als auch in Datencache.</span><span class="sxs-lookup"><span data-stu-id="ede61-118">In this tutorial and the next three we'll examine using the ObjectDataSource s caching features as well as the data cache.</span></span> <span data-ttu-id="ede61-119">Wir beleuchte auch, wie Sie anwendungsweite in Datencache beim Start und auf die zwischengespeicherte Daten durch die Verwendung von SQL-cacheabhängigkeiten aktuell halten.</span><span class="sxs-lookup"><span data-stu-id="ede61-119">We'll also explore how to cache application-wide data at startup and how to keep cached data fresh through the use of SQL cache dependencies.</span></span> <span data-ttu-id="ede61-120">In diesen Tutorials werden keine Zwischenspeicherung der Ausgabe untersuchen.</span><span class="sxs-lookup"><span data-stu-id="ede61-120">These tutorials do not explore output caching.</span></span> <span data-ttu-id="ede61-121">Einen detaillierten Einblick in die Zwischenspeicherung der Ausgabe werden soll, finden Sie unter [Ausgabezwischenspeicherung in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="ede61-121">For a detailed look at output caching, see [Output Caching in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx).</span></span>

<span data-ttu-id="ede61-122">Caching kann an einer beliebigen Stelle in der Architektur, aus der Datenzugriffsebene nach oben auf der Darstellungsschicht angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-122">Caching can be applied at any place in the architecture, from the Data Access Layer up through the Presentation Layer.</span></span> <span data-ttu-id="ede61-123">In diesem Tutorial betrachten wir die Anwendung von caching in der Darstellungsschicht über das ObjectDataSource-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="ede61-123">In this tutorial we'll look at applying caching to the Presentation Layer through the ObjectDataSource control.</span></span> <span data-ttu-id="ede61-124">Im nächsten Tutorial untersuchenden Zwischenspeichern von Daten auf der Geschäftslogikebene.</span><span class="sxs-lookup"><span data-stu-id="ede61-124">In the next tutorial we'll examine caching data at the Business Logic Layer.</span></span>

## <a name="key-caching-concepts"></a><span data-ttu-id="ede61-125">Schlüssel, die Caching-Konzepte</span><span class="sxs-lookup"><span data-stu-id="ede61-125">Key Caching Concepts</span></span>

<span data-ttu-id="ede61-126">Mit Caching kann eine Anwendung s erheblich verbessert allgemeine Leistung und Skalierbarkeit, indem Sie Daten, die zum Generieren aufwendig ist, und speichern eine Kopie der Datei an einem Speicherort an, die effizienter zugegriffen werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede61-126">Caching can greatly improve an application s overall performance and scalability by taking data that is expensive to generate and storing a copy of it in a location that can be more efficiently accessed.</span></span> <span data-ttu-id="ede61-127">Da der Cache nur eine Kopie der tatsächlichen, zugrunde liegenden Daten enthält, können mehr aktuell ist, oder *veraltete*, wenn die zugrunde liegenden Daten ändern.</span><span class="sxs-lookup"><span data-stu-id="ede61-127">Since the cache holds just a copy of the actual, underlying data, it can become outdated, or *stale*, if the underlying data changes.</span></span> <span data-ttu-id="ede61-128">Als Lösung kann Seitenentwickler angeben, Kriterien, die mit dem das Element im Cache werden *entfernt* aus dem Cache, verwenden Sie entweder:</span><span class="sxs-lookup"><span data-stu-id="ede61-128">To combat this, a page developer can indicate criteria by which the cache item will be *evicted* from the cache, using either:</span></span>

- <span data-ttu-id="ede61-129">**Zeitbasierten Kriterien** ein Element zum Cache für eine Absolute oder gleitende Dauer hinzugefügt werden kann.</span><span class="sxs-lookup"><span data-stu-id="ede61-129">**Time-based criteria** an item may be added to the cache for an absolute or sliding duration.</span></span> <span data-ttu-id="ede61-130">Beispielsweise kann ein Entwickler eine Dauer von, z. B. 60 Sekunden hinweisen.</span><span class="sxs-lookup"><span data-stu-id="ede61-130">For example, a page developer may indicate a duration of, say, 60 seconds.</span></span> <span data-ttu-id="ede61-131">Das zwischengespeicherte Element wird mit einer absoluten Dauer 60 Sekunden, nachdem er hinzugefügt wurde, Cache, unabhängig davon, wie häufig darauf zugegriffen wurde entfernt.</span><span class="sxs-lookup"><span data-stu-id="ede61-131">With an absolute duration, the cached item is evicted 60 seconds after it was added to cache, regardless of how frequently it was accessed.</span></span> <span data-ttu-id="ede61-132">Mit der gleitenden Dauer entfernt das zwischengespeicherte Element wird 60 Sekunden nach dem letzten Zugriff.</span><span class="sxs-lookup"><span data-stu-id="ede61-132">With a sliding duration, the cached item is evicted 60 seconds after the last access.</span></span>
- <span data-ttu-id="ede61-133">**Abhängigkeit meldungsbasierte** eine Abhängigkeit kann zugeordnet ist, mit einem Element, wenn dem Cache hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-133">**Dependency-based criteria** a dependency can be associated with an item when added to the cache.</span></span> <span data-ttu-id="ede61-134">Wenn die Abhängigkeit von Element s ändert, wird es aus dem Cache entfernt.</span><span class="sxs-lookup"><span data-stu-id="ede61-134">When the item s dependency changes it is evicted from the cache.</span></span> <span data-ttu-id="ede61-135">Die Abhängigkeit kann es sich um eine Datei, einem anderen Element im Cache oder eine Kombination aus beidem sein.</span><span class="sxs-lookup"><span data-stu-id="ede61-135">The dependency may be a file, another cache item, or a combination of the two.</span></span> <span data-ttu-id="ede61-136">ASP.NET 2.0 ermöglicht auch SQL-cacheabhängigkeiten, die ermöglichen Entwicklern den Cache ein Element hinzugefügt und entfernt werden, wenn die zugrunde liegenden Datenbankdaten geändert wird.</span><span class="sxs-lookup"><span data-stu-id="ede61-136">ASP.NET 2.0 also allows SQL cache dependencies, which enable developers to add an item to the cache and have it evicted when the underlying database data changes.</span></span> <span data-ttu-id="ede61-137">Wir werden untersuchen, SQL-cacheabhängigkeiten im kommenden [mithilfe von SQL-Cacheabhängigkeiten](using-sql-cache-dependencies-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="ede61-137">We will examine SQL cache dependencies in the upcoming [Using SQL Cache Dependencies](using-sql-cache-dependencies-cs.md) tutorial.</span></span>

<span data-ttu-id="ede61-138">Unabhängig von der angegebenen Entfernung Kriterien, ein Element im Cache möglicherweise *aufgeräumt* , bevor die zeitbasierte oder Abhängigkeit basierenden Kriterien erfüllt sind.</span><span class="sxs-lookup"><span data-stu-id="ede61-138">Regardless of the eviction criteria specified, an item in the cache may be *scavenged* before the time-based or dependency-based criteria has been met.</span></span> <span data-ttu-id="ede61-139">Wenn der Cache seine Kapazität erreicht hat, müssen vorhandene Elemente entfernt werden, bevor neue hinzugefügt werden können.</span><span class="sxs-lookup"><span data-stu-id="ede61-139">If the cache has reached its capacity, existing items must be removed before new ones can be added.</span></span> <span data-ttu-id="ede61-140">Daher, wenn Sie programmgesteuert mit zwischengespeicherten Daten es wichtige s einbeziehen, dass Sie immer davon ausgehen, dass die zwischengespeicherten Daten möglicherweise nicht vorhanden.</span><span class="sxs-lookup"><span data-stu-id="ede61-140">Consequently, when programmatically working with cached data it s vital that you always assume that the cached data may not be present.</span></span> <span data-ttu-id="ede61-141">Betrachten wir das Muster für Daten aus dem Cache programmgesteuert in unserem nächsten Tutorial, den Zugriff auf *Zwischenspeichern von Daten in der Architektur*.</span><span class="sxs-lookup"><span data-stu-id="ede61-141">We'll look at the pattern to use when accessing data from the cache programmatically in our next tutorial, *Caching Data in the Architecture*.</span></span>

<span data-ttu-id="ede61-142">Caching bietet eine kostengünstige Möglichkeit, für die Ärmel mehr Leistung aus einer Anwendung ist.</span><span class="sxs-lookup"><span data-stu-id="ede61-142">Caching provides an economical means for squeezing more performance from an application.</span></span> <span data-ttu-id="ede61-143">Als [Steven Smith](http://aspadvice.com/blogs/ssmith/) muss in seinem Artikel [ASP.NET-Caching: Verfahren und bewährte Methoden](https://msdn.microsoft.com/library/aa478965.aspx):</span><span class="sxs-lookup"><span data-stu-id="ede61-143">As [Steven Smith](http://aspadvice.com/blogs/ssmith/) articulates in his article [ASP.NET Caching: Techniques and Best Practices](https://msdn.microsoft.com/library/aa478965.aspx):</span></span>

<span data-ttu-id="ede61-144">Caching kann eine gute Möglichkeit, gut genug Leistung zu erzielen ohne viel Zeit und Analyse sein.</span><span class="sxs-lookup"><span data-stu-id="ede61-144">Caching can be a good way to get good enough performance without requiring a lot of time and analysis.</span></span> <span data-ttu-id="ede61-145">Speicher ist günstig, also wenn Sie die Leistung erzielen können, Sie durch Zwischenspeichern der Ausgabe für 30 Sekunden, statt sich mit einem Tag oder einer Woche, die versucht, den Code oder die Datenbank zu optimieren müssen, führen Sie die Cachinglösung (vorausgesetzt, 30: zweite alte Daten ist in Ordnung), und fahren.</span><span class="sxs-lookup"><span data-stu-id="ede61-145">Memory is cheap, so if you can get the performance you need by caching the output for 30 seconds instead of spending a day or a week trying to optimize your code or database, do the caching solution (assuming 30-second old data is ok) and move on.</span></span> <span data-ttu-id="ede61-146">Schließlich wird schlechte wahrscheinlich, informieren Sie sich daher natürlich Sie versuchen sollten, den ordnungsgemäßen Entwurf Ihrer Anwendungen.</span><span class="sxs-lookup"><span data-stu-id="ede61-146">Eventually, poor design will probably catch up to you, so of course you should try to design your applications correctly.</span></span> <span data-ttu-id="ede61-147">Wenn Sie nur zum Erzielen einer guten heute genügend Leistung benötigen, Zwischenspeichern kann jedoch sein [Ansatz ausgezeichnet], kaufen Sie Zeit haben, um Ihre Anwendung zu einem späteren Zeitpunkt zu gestalten, wenn Sie Zeit dazu haben.</span><span class="sxs-lookup"><span data-stu-id="ede61-147">But if you just need to get good enough performance today, caching can be an excellent [approach], buying you time to refactor your application at a later date when you have the time to do so.</span></span>

<span data-ttu-id="ede61-148">Zwar Zwischenspeichern spürbaren leistungsverbesserungen bereitstellen kann, es ist nicht verfügbar in allen Situationen, z. B. bei Anwendungen, die in Echtzeit, häufig aktualisieren von Daten verwenden, oder, in denen veraltete Daten auch in Kürze kurzlebig ist nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="ede61-148">While caching can provide appreciable performance enhancements, it is not applicable in all situations, such as with applications that use real-time, frequently-updating data, or where even shortly-lived stale data is unacceptable.</span></span> <span data-ttu-id="ede61-149">Aber für die meisten Anwendungen, Zwischenspeicherung verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ede61-149">But for the majority of applications, caching should be used.</span></span> <span data-ttu-id="ede61-150">Weitere Informationen zur Zwischenspeicherung in ASP.NET 2.0 finden Sie unter der [Zwischenspeicherung für die Leistung](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) Teil der [ASP.NET 2.0-Schnellstart-Lernprogramme](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="ede61-150">For more background on caching in ASP.NET 2.0, refer to the [Caching for Performance](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/caching/default.aspx) section of the [ASP.NET 2.0 QuickStart Tutorials](https://quickstarts.asp.net/QuickStartv20/aspnet/).</span></span>

## <a name="step-1-creating-the-caching-web-pages"></a><span data-ttu-id="ede61-151">Schritt 1: Erstellen der Zwischenspeicherung von Webseiten</span><span class="sxs-lookup"><span data-stu-id="ede61-151">Step 1: Creating the Caching Web Pages</span></span>

<span data-ttu-id="ede61-152">Bevor wir unsere Erkundung der s caching-Funktionen "ObjectDataSource" beginnen, können Sie s zuerst können Sie die ASP.NET-Seiten in unserem Websiteprojekt zu erstellen, die wir für dieses Lernprogramm sowie die folgenden drei benötigen.</span><span class="sxs-lookup"><span data-stu-id="ede61-152">Before we start our exploration of the ObjectDataSource s caching features, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next three.</span></span> <span data-ttu-id="ede61-153">Starten, indem Sie einen neuen Ordner namens hinzufügen `Caching`.</span><span class="sxs-lookup"><span data-stu-id="ede61-153">Start by adding a new folder named `Caching`.</span></span> <span data-ttu-id="ede61-154">Fügen Sie die folgenden ASP.NET-Seiten in diesen Ordner, um sicherzustellen, ordnen Sie jeder Seite mit den `Site.master` Masterseite:</span><span class="sxs-lookup"><span data-stu-id="ede61-154">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `ObjectDataSource.aspx`
- `FromTheArchitecture.aspx`
- `AtApplicationStartup.aspx`
- `SqlCacheDependencies.aspx`

![Fügen Sie die ASP.NET-Seiten für die Lernprogramme cacherelevanten hinzu.](caching-data-with-the-objectdatasource-cs/_static/image1.png)

<span data-ttu-id="ede61-156">**Abbildung 1**: Fügen Sie die ASP.NET-Seiten für die Lernprogramme cacherelevanten hinzu.</span><span class="sxs-lookup"><span data-stu-id="ede61-156">**Figure 1**: Add the ASP.NET Pages for the Caching-Related Tutorials</span></span>

<span data-ttu-id="ede61-157">Wie in den anderen Ordnern `Default.aspx` in die `Caching` Ordner werden in den Tutorials im Abschnitt aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="ede61-157">Like in the other folders, `Default.aspx` in the `Caching` folder will list the tutorials in its section.</span></span> <span data-ttu-id="ede61-158">Bedenken Sie, dass die `SectionLevelTutorialListing.ascx` Benutzersteuerelement stellt diese Funktionalität bereit.</span><span class="sxs-lookup"><span data-stu-id="ede61-158">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="ede61-159">Aus diesem Grund fügen dieses Benutzersteuerelement zu `Default.aspx` durch Ziehen aus dem Projektmappen-Explorer auf die Seite s Entwurfsansicht.</span><span class="sxs-lookup"><span data-stu-id="ede61-159">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="ede61-160">[![Abbildung 2: Fügen Sie das SectionLevelTutorialListing.ascx-Benutzersteuerelement an "default.aspx"](caching-data-with-the-objectdatasource-cs/_static/image3.png)](caching-data-with-the-objectdatasource-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-160">[![Figure 2: Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](caching-data-with-the-objectdatasource-cs/_static/image3.png)](caching-data-with-the-objectdatasource-cs/_static/image2.png)</span></span>

<span data-ttu-id="ede61-161">**Abbildung 2**: Abbildung 2: Hinzufügen der `SectionLevelTutorialListing.ascx` Benutzersteuerelement `Default.aspx` ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-161">**Figure 2**: Figure 2: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image4.png))</span></span>

<span data-ttu-id="ede61-162">Abschließend fügen Sie diese Seiten als Einträge der `Web.sitemap` Datei.</span><span class="sxs-lookup"><span data-stu-id="ede61-162">Lastly, add these pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="ede61-163">Fügen Sie das folgende Markup insbesondere nach über das Arbeiten mit Binärdaten `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="ede61-163">Specifically, add the following markup after the Working with Binary Data `<siteMapNode>`:</span></span>

[!code-xml[Main](caching-data-with-the-objectdatasource-cs/samples/sample1.xml)]

<span data-ttu-id="ede61-164">Nach der Aktualisierung `Web.sitemap`, können Sie die Lernprogramme-Website über einen Browser anzeigen.</span><span class="sxs-lookup"><span data-stu-id="ede61-164">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="ede61-165">Klicken Sie im Menü auf der linken Seite enthält jetzt Elemente für die Zwischenspeicherung Tutorials.</span><span class="sxs-lookup"><span data-stu-id="ede61-165">The menu on the left now includes items for the caching tutorials.</span></span>

![Die Sitemap enthält jetzt die Einträge für die Caching-Lernprogramme](caching-data-with-the-objectdatasource-cs/_static/image5.png)

<span data-ttu-id="ede61-167">**Abbildung 3**: Die Sitemap enthält jetzt die Einträge für die Caching-Lernprogramme</span><span class="sxs-lookup"><span data-stu-id="ede61-167">**Figure 3**: The Site Map Now Includes Entries for the Caching Tutorials</span></span>

## <a name="step-2-displaying-a-list-of-products-in-a-web-page"></a><span data-ttu-id="ede61-168">Schritt 2: Eine Liste der Produkte anzeigt in einer Webseite</span><span class="sxs-lookup"><span data-stu-id="ede61-168">Step 2: Displaying a List of Products in a Web Page</span></span>

<span data-ttu-id="ede61-169">In diesem Tutorial erfahren Sie, wie die ObjectDataSource-Steuerelement s integrierte Funktionen zum zwischenspeichernden verwenden.</span><span class="sxs-lookup"><span data-stu-id="ede61-169">This tutorial explores how to use the ObjectDataSource control s built-in caching features.</span></span> <span data-ttu-id="ede61-170">Bevor wir auf diese Funktionen suchen kann, sollten, wir zuerst eine Seite, um arbeiten.</span><span class="sxs-lookup"><span data-stu-id="ede61-170">Before we can look at these features, though, we first need a page to work from.</span></span> <span data-ttu-id="ede61-171">Let s Erstellen einer Webseite, die zum Auflisten von Produktinformationen abgerufen, indem ein ObjectDataSource-Steuerelement aus einer GridView-Ansicht verwendet das `ProductsBLL` Klasse.</span><span class="sxs-lookup"><span data-stu-id="ede61-171">Let s create a web page that uses a GridView to list product information retrieved by an ObjectDataSource from the `ProductsBLL` class.</span></span>

<span data-ttu-id="ede61-172">Öffnen Sie zunächst die `ObjectDataSource.aspx` auf der Seite die `Caching` Ordner.</span><span class="sxs-lookup"><span data-stu-id="ede61-172">Start by opening the `ObjectDataSource.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="ede61-173">Einer GridView-Ansicht aus der Toolbox in den Designer ziehen, legen Sie dessen `ID` Eigenschaft `Products`, und sein Smarttag, auswählen, um es an ein neues ObjectDataSource-Steuerelement, das mit dem Namen binden `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="ede61-173">Drag a GridView from the Toolbox onto the Designer, set its `ID` property to `Products`, and, from its smart tag, choose to bind it to a new ObjectDataSource control named `ProductsDataSource`.</span></span> <span data-ttu-id="ede61-174">Konfigurieren Sie zum Arbeiten mit dem ObjectDataSource-Steuerelement die `ProductsBLL` Klasse.</span><span class="sxs-lookup"><span data-stu-id="ede61-174">Configure the ObjectDataSource to work with the `ProductsBLL` class.</span></span>

<span data-ttu-id="ede61-175">[![Konfigurieren von dem ObjectDataSource-Steuerelement zur Verwendung der ProductsBLL-Klasse](caching-data-with-the-objectdatasource-cs/_static/image7.png)](caching-data-with-the-objectdatasource-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-175">[![Configure the ObjectDataSource to Use the ProductsBLL Class](caching-data-with-the-objectdatasource-cs/_static/image7.png)](caching-data-with-the-objectdatasource-cs/_static/image6.png)</span></span>

<span data-ttu-id="ede61-176">**Abbildung 4**: Konfigurieren Sie das "ObjectDataSource" Verwenden der `ProductsBLL` Klasse ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-176">**Figure 4**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image8.png))</span></span>

<span data-ttu-id="ede61-177">Lassen Sie für diese Seite s, die eine bearbeitbare GridView zu erstellen, damit wir prüfen können, was geschieht, wenn die Daten, die zwischengespeichert werden, in dem ObjectDataSource-Steuerelement über die GridView-s-Schnittstelle geändert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-177">For this page, let s create an editable GridView so that we can examine what happens when data cached in the ObjectDataSource is modified through the GridView s interface.</span></span> <span data-ttu-id="ede61-178">Lassen Sie die Dropdownliste in der Registerkarte mit der Option auswählen, die auf seine Standardwerte zurückgesetzt `GetProducts()`, aber ändern Sie das ausgewählte Element in der Registerkarte "Updates", um die `UpdateProduct` Überladung verwenden, akzeptiert `productName`, `unitPrice`, und `productID` als Eingabeparameter.</span><span class="sxs-lookup"><span data-stu-id="ede61-178">Leave the drop-down list in the SELECT tab set to its default, `GetProducts()`, but change the selected item in the UPDATE tab to the `UpdateProduct` overload that accepts `productName`, `unitPrice`, and `productID` as its input parameters.</span></span>

<span data-ttu-id="ede61-179">[![Legen Sie das UPDATE Registerkarte s Dropdown-Liste an die entsprechenden UpdateProduct-Überladung](caching-data-with-the-objectdatasource-cs/_static/image10.png)](caching-data-with-the-objectdatasource-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-179">[![Set the UPDATE Tab s Drop-Down List to the Appropriate UpdateProduct Overload](caching-data-with-the-objectdatasource-cs/_static/image10.png)](caching-data-with-the-objectdatasource-cs/_static/image9.png)</span></span>

<span data-ttu-id="ede61-180">**Abbildung 5**: Legen Sie die Registerkarte "UPDATE"-s-Dropdown-Listenfeld auf der angemessen `UpdateProduct` überladen ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-180">**Figure 5**: Set the UPDATE Tab s Drop-Down List to the Appropriate `UpdateProduct` Overload ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image11.png))</span></span>

<span data-ttu-id="ede61-181">Klicken Sie abschließend die Dropdownlisten auf den Registerkarten für INSERT- und DELETE auf (keine) festgelegt, und klicken Sie auf "Fertig stellen".</span><span class="sxs-lookup"><span data-stu-id="ede61-181">Finally, set the drop-down lists in the INSERT and DELETE tabs to (None) and click Finish.</span></span> <span data-ttu-id="ede61-182">Nach Abschluss des Konfigurieren von Datenquellen-Assistenten, legt Visual Studio das "ObjectDataSource"-s `OldValuesParameterFormatString` Eigenschaft `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="ede61-182">Upon completing the Configure Data Source wizard, Visual Studio sets the ObjectDataSource s `OldValuesParameterFormatString` property to `original_{0}`.</span></span> <span data-ttu-id="ede61-183">Wie unter der [eine Übersicht der einfügen, aktualisieren und Löschen von Daten](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) Tutorial, diese Eigenschaft muss aus der deklarativen Syntax entfernt oder wieder auf den Standardwert festgelegt `{0}`, in der Reihenfolge für unseren Workflow aktualisieren ohne Fehler fortgesetzt werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-183">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, this property needs to be removed from the declarative syntax or set back to its default value, `{0}`, in order for our update workflow to proceed without error.</span></span>

<span data-ttu-id="ede61-184">Darüber hinaus fügt nach dem Abschluss des Assistenten für Visual Studio ein Feld an die GridView für die einzelnen Datenfelder, Produkt.</span><span class="sxs-lookup"><span data-stu-id="ede61-184">Furthermore, at the completion of the wizard Visual Studio adds a field to the GridView for each of the product data fields.</span></span> <span data-ttu-id="ede61-185">Entfernen Sie alle außer den `ProductName`, `CategoryName`, und `UnitPrice` BoundFields.</span><span class="sxs-lookup"><span data-stu-id="ede61-185">Remove all but the `ProductName`, `CategoryName`, and `UnitPrice` BoundFields.</span></span> <span data-ttu-id="ede61-186">Aktualisieren Sie als Nächstes die `HeaderText` Eigenschaften der einzelnen diese BoundFields Product Category und Preis bzw.</span><span class="sxs-lookup"><span data-stu-id="ede61-186">Next, update the `HeaderText` properties of each of these BoundFields to Product, Category, and Price, respectively.</span></span> <span data-ttu-id="ede61-187">Da die `ProductName` ist ein Pflichtfeld, das BoundField in ein TemplateField konvertieren und einen RequiredFieldValidator zum Hinzufügen der `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="ede61-187">Since the `ProductName` field is required, convert the BoundField into a TemplateField and add a RequiredFieldValidator to the `EditItemTemplate`.</span></span> <span data-ttu-id="ede61-188">Auf ähnliche Weise konvertieren die `UnitPrice` BoundField in ein TemplateField und fügen Sie eine CompareValidator, um sicherzustellen, dass der vom Benutzer eingegebene Wert eine gültige Currency-Wert, s, die größer als oder gleich 0 (null).</span><span class="sxs-lookup"><span data-stu-id="ede61-188">Similarly, convert the `UnitPrice` BoundField into a TemplateField and add a CompareValidator to ensure that the value entered by the user is a valid currency value that s greater than or equal to zero.</span></span> <span data-ttu-id="ede61-189">Zusätzlich zu diesen Änderungen gerne alle ästhetischen Änderungen, z. B. rechten führen die `UnitPrice` -Wert, oder das angeben, die Formatierung für die `UnitPrice` Text in den schreibgeschützten Modus, und bearbeiten-Schnittstellen.</span><span class="sxs-lookup"><span data-stu-id="ede61-189">In addition to these modifications, feel free to perform any aesthetic changes, such as right-aligning the `UnitPrice` value, or specifying the formatting for the `UnitPrice` text in its read-only and editing interfaces.</span></span>

<span data-ttu-id="ede61-190">Stellen Sie die GridView durch Aktivieren des Kontrollkästchens Bearbeiten aktivieren, in das GridView-s-Smarttag bearbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-190">Make the GridView editable by checking the Enable Editing checkbox in the GridView s smart tag.</span></span> <span data-ttu-id="ede61-191">Auch die Kontrollkästchen der Paging aktivieren und die Sortierung zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="ede61-191">Also check the Enable Paging and Enable Sorting checkboxes.</span></span>

> [!NOTE]
> <span data-ttu-id="ede61-192">Benötigen Sie eine Übersicht über die GridView-s-Bearbeitungsschnittstelle anpassen?</span><span class="sxs-lookup"><span data-stu-id="ede61-192">Need a review of how to customize the GridView s editing interface?</span></span> <span data-ttu-id="ede61-193">Wenn dies der Fall ist, verweisen zurück auf die [Anpassen der Benutzeroberfläche für die Änderung der Daten](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="ede61-193">If so, refer back to the [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) tutorial.</span></span>

<span data-ttu-id="ede61-194">[![Aktivieren Sie GridView-Unterstützung zum Bearbeiten, Sortieren und Paging](caching-data-with-the-objectdatasource-cs/_static/image13.png)](caching-data-with-the-objectdatasource-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-194">[![Enable GridView Support for Editing, Sorting, and Paging](caching-data-with-the-objectdatasource-cs/_static/image13.png)](caching-data-with-the-objectdatasource-cs/_static/image12.png)</span></span>

<span data-ttu-id="ede61-195">**Abbildung 6**: Aktivieren der GridView-Unterstützung für bearbeiten, Sortieren und Paging ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-195">**Figure 6**: Enable GridView Support for Editing, Sorting, and Paging ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image14.png))</span></span>

<span data-ttu-id="ede61-196">Nachdem diese GridView-Änderungen vorgenommen wurden, sollte GridView und "ObjectDataSource" s deklarative Markup etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="ede61-196">After making these GridView modifications, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](caching-data-with-the-objectdatasource-cs/samples/sample2.aspx)]

<span data-ttu-id="ede61-197">Wie in Abbildung 7 dargestellt, listet die bearbeitbaren GridView Name, Kategorie und Preis für jedes der Produkte in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="ede61-197">As Figure 7 shows, the editable GridView lists the name, category, and price of each of the products in the database.</span></span> <span data-ttu-id="ede61-198">Können Sie die Ergebnisse durchlaufen, die Sortierung der Seite "s"-Funktionalität zu testen und Bearbeiten eines Datensatzes.</span><span class="sxs-lookup"><span data-stu-id="ede61-198">Take a moment to test out the page s functionality sort the results, page through them, and edit a record.</span></span>

<span data-ttu-id="ede61-199">[![Jedes Produkt s Name, Kategorie und Preise finden Sie in sortierbar, navigierbaren, bearbeitbaren GridView](caching-data-with-the-objectdatasource-cs/_static/image16.png)](caching-data-with-the-objectdatasource-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-199">[![Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView](caching-data-with-the-objectdatasource-cs/_static/image16.png)](caching-data-with-the-objectdatasource-cs/_static/image15.png)</span></span>

<span data-ttu-id="ede61-200">**Abbildung 7**: Jedes Produkt s Name, Kategorie und Preise finden Sie in sortierbar, navigierbaren, bearbeitbaren GridView ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-200">**Figure 7**: Each Product s Name, Category, and Price is Listed in a Sortable, Pageable, Editable GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image17.png))</span></span>

## <a name="step-3-examining-when-the-objectdatasource-is-requesting-data"></a><span data-ttu-id="ede61-201">Schritt 3: Untersuchen bei der "ObjectDataSource" ist Anfordern von Daten</span><span class="sxs-lookup"><span data-stu-id="ede61-201">Step 3: Examining When the ObjectDataSource is Requesting Data</span></span>

<span data-ttu-id="ede61-202">Die `Products` GridView Ruft ab, die Daten für die anzuzeigenden durch Aufrufen der `Select` -Methode der der `ProductsDataSource` "ObjectDataSource".</span><span class="sxs-lookup"><span data-stu-id="ede61-202">The `Products` GridView retrieves its data to display by invoking the `Select` method of the `ProductsDataSource` ObjectDataSource.</span></span> <span data-ttu-id="ede61-203">Diese "ObjectDataSource" erstellt eine Instanz der Geschäftslogikebene Zuordnungsvorgänge `ProductsBLL` -Klasse und ruft seine `GetProducts()` -Methode, die wiederum, die Daten von Zugriffsschicht s aufruft `ProductsTableAdapter` s `GetProducts()` Methode.</span><span class="sxs-lookup"><span data-stu-id="ede61-203">This ObjectDataSource creates an instance of the Business Logic Layer s `ProductsBLL` class and calls its `GetProducts()` method, which in turn calls the Data Access Layer s `ProductsTableAdapter` s `GetProducts()` method.</span></span> <span data-ttu-id="ede61-204">Die DAL-Methode, eine Verbindung mit der Northwind-Datenbank her, und gibt den konfigurierten `SELECT` Abfrage.</span><span class="sxs-lookup"><span data-stu-id="ede61-204">The DAL method connects to the Northwind database and issues the configured `SELECT` query.</span></span> <span data-ttu-id="ede61-205">Diese Daten werden dann an die DAL, die sie in verpackt zurückgegeben eine `NorthwindDataTable`.</span><span class="sxs-lookup"><span data-stu-id="ede61-205">This data is then returned to the DAL, which packages it up in a `NorthwindDataTable`.</span></span> <span data-ttu-id="ede61-206">Das DataTable-Objekt wird an die BLL, zurückgegeben, das an dem ObjectDataSource-Steuerelement, das an die GridView zurückgegeben zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="ede61-206">The DataTable object is returned to the BLL, which returns it to the ObjectDataSource, which returns it to the GridView.</span></span> <span data-ttu-id="ede61-207">GridView erstellt dann eine `GridViewRow` Objekt für die einzelnen `DataRow` in der Datentabelle und jeder `GridViewRow` schließlich in den HTML-Code, der an den Client zurückgegeben und angezeigt, auf dem Besucher s-Browser gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="ede61-207">The GridView then creates a `GridViewRow` object for each `DataRow` in the DataTable, and each `GridViewRow` is eventually rendered into the HTML that is returned to the client and displayed on the visitor s browser.</span></span>

<span data-ttu-id="ede61-208">Diese Abfolge von Ereignissen tritt jedes Mal, die, das die GridView zu der zugrunde liegenden Daten gebunden werden muss.</span><span class="sxs-lookup"><span data-stu-id="ede61-208">This sequence of events happens each and every time the GridView needs to bind to its underlying data.</span></span> <span data-ttu-id="ede61-209">In diesem Fall, wenn die Seite zuerst zugegriffen wird, wenn von einer Seite mit Daten in eine andere verschieben, beim Sortieren von GridView, oder wenn Sie die GridView-s-Daten über den integrierten bearbeiten oder Löschen von Schnittstellen zu ändern.</span><span class="sxs-lookup"><span data-stu-id="ede61-209">That happens when the page is first visited, when moving from one page of data to another, when sorting the GridView, or when modifying the GridView s data through its built-in editing or deleting interfaces.</span></span> <span data-ttu-id="ede61-210">Wenn der GridView-s-Ansichtszustand deaktiviert ist, wird die GridView sowie jedes Postback erneut gebunden.</span><span class="sxs-lookup"><span data-stu-id="ede61-210">If the GridView s view state is disabled, the GridView will be rebound on each and every postback as well.</span></span> <span data-ttu-id="ede61-211">GridView kann auch werden explizit erneut gebunden an seine Daten durch Aufrufen der `DataBind()` Methode.</span><span class="sxs-lookup"><span data-stu-id="ede61-211">The GridView can also be explicitly rebound to its data by calling its `DataBind()` method.</span></span>

<span data-ttu-id="ede61-212">Um die Häufigkeit ehesten mit der die Daten aus der Datenbank abgerufen wurden, können Sie s Anzeige eine Meldung angezeigt, wenn die Daten erneut abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-212">To fully appreciate the frequency with which the data is retrieved from the database, let s display a message indicating when the data is being re-retrieved.</span></span> <span data-ttu-id="ede61-213">Fügen Sie ein Label-Steuerelement über die GridView, die mit dem Namen `ODSEvents`.</span><span class="sxs-lookup"><span data-stu-id="ede61-213">Add a Label Web control above the GridView named `ODSEvents`.</span></span> <span data-ttu-id="ede61-214">Löschen Sie die `Text` Eigenschaft, und legen dessen `EnableViewState` Eigenschaft `false`.</span><span class="sxs-lookup"><span data-stu-id="ede61-214">Clear out its `Text` property and set its `EnableViewState` property to `false`.</span></span> <span data-ttu-id="ede61-215">Unter der Bezeichnung, fügen Sie ein Steuerelement Schaltfläche hinzu, und legen Sie dessen `Text` Eigenschaft Postbacks.</span><span class="sxs-lookup"><span data-stu-id="ede61-215">Underneath the Label, add a Button Web control and set its `Text` property to Postback .</span></span>

<span data-ttu-id="ede61-216">[![Hinzufügen einer Bezeichnung und eine Schaltfläche auf der Seite über GridView](caching-data-with-the-objectdatasource-cs/_static/image19.png)](caching-data-with-the-objectdatasource-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-216">[![Add a Label and Button to the Page Above the GridView](caching-data-with-the-objectdatasource-cs/_static/image19.png)](caching-data-with-the-objectdatasource-cs/_static/image18.png)</span></span>

<span data-ttu-id="ede61-217">**Abbildung 8**: Hinzufügen einer Bezeichnung und eine Schaltfläche auf der Seite über die GridView ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-217">**Figure 8**: Add a Label and Button to the Page Above the GridView ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image20.png))</span></span>

<span data-ttu-id="ede61-218">Während des Data Access-Workflows, das "ObjectDataSource"-s `Selecting` Ereignis wird ausgelöst, bevor das zugrunde liegende Objekt erstellt wird und dessen konfigurierten aufgerufene Methode.</span><span class="sxs-lookup"><span data-stu-id="ede61-218">During the data access workflow, the ObjectDataSource s `Selecting` event fires before the underlying object is created and its configured method invoked.</span></span> <span data-ttu-id="ede61-219">Erstellen Sie einen Ereignishandler für dieses Ereignis aus, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="ede61-219">Create an event handler for this event and add the following code:</span></span>

[!code-csharp[Main](caching-data-with-the-objectdatasource-cs/samples/sample3.cs)]

<span data-ttu-id="ede61-220">Jedes Mal, wenn dem ObjectDataSource-Steuerelement eine Anforderung an der Architektur für die Daten sendet, zeigt die Bezeichnung den Text auswählen-Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="ede61-220">Each time the ObjectDataSource makes a request to the architecture for data, the Label will display the text Selecting event fired .</span></span>

<span data-ttu-id="ede61-221">Besuchen Sie diese Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="ede61-221">Visit this page in a browser.</span></span> <span data-ttu-id="ede61-222">Wenn die Seite zuerst aufgerufen wird, wird das Ereignis auswählen des Texts wird ausgelöst, angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ede61-222">When the page is first visited, the text Selecting event fired is shown.</span></span> <span data-ttu-id="ede61-223">Klicken Sie auf die Schaltfläche mit den Postback, und beachten Sie, dass der Text verschwindet (vorausgesetzt, dass die GridView s `EnableViewState` -Eigenschaftensatz auf `true`, der Standardwert).</span><span class="sxs-lookup"><span data-stu-id="ede61-223">Click the Postback button and note that the text disappears (assuming that the GridView s `EnableViewState` property is set to `true`, the default).</span></span> <span data-ttu-id="ede61-224">Dies liegt daran, beim Postback GridView wird aus dem Ansichtszustand wiederhergestellt und auf dem ObjectDataSource-Steuerelement für die Daten aus diesem Grund t zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="ede61-224">This is because, on postback, the GridView is reconstructed from its view state and therefore doesn t turn to the ObjectDataSource for its data.</span></span> <span data-ttu-id="ede61-225">Sortieren, paging oder das Bearbeiten der Daten, bewirkt jedoch, dass der GridView, sich erneut an seine Datenquelle bindet und aus diesem Grund wird die auswählen-Ereignis ausgelöst, Text wird erneut angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ede61-225">Sorting, paging, or editing the data, however, causes the GridView to rebind to its data source, and therefore the Selecting event fired text reappears.</span></span>

<span data-ttu-id="ede61-226">[![Wenn mit der Datenquelle erneut die GridView gebunden ist, wird die auswählen-Ereignis ausgelöst angezeigt.](caching-data-with-the-objectdatasource-cs/_static/image22.png)](caching-data-with-the-objectdatasource-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-226">[![Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed](caching-data-with-the-objectdatasource-cs/_static/image22.png)](caching-data-with-the-objectdatasource-cs/_static/image21.png)</span></span>

<span data-ttu-id="ede61-227">**Abbildung 9**: Auswahl-Ereignis ausgelöst wird angezeigt, wenn mit der Datenquelle erneut die GridView gebunden ist, ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-227">**Figure 9**: Whenever the GridView is Rebound to its Data Source, Selecting event fired is Displayed ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image23.png))</span></span>

<span data-ttu-id="ede61-228">[![Durch Klicken auf das Postback-Schaltfläche bewirkt, dass der GridView, die aus dem Ansichtszustand wiederhergestellt werden](caching-data-with-the-objectdatasource-cs/_static/image25.png)](caching-data-with-the-objectdatasource-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-228">[![Clicking the Postback Button Causes the GridView to be Reconstructed from its View State](caching-data-with-the-objectdatasource-cs/_static/image25.png)](caching-data-with-the-objectdatasource-cs/_static/image24.png)</span></span>

<span data-ttu-id="ede61-229">**Abbildung 10**: Klicken Sie auf die Schaltfläche mit den Postback bewirkt, dass die GridView, die aus dem Ansichtszustand wiederhergestellt werden ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-229">**Figure 10**: Clicking the Postback Button Causes the GridView to be Reconstructed from its View State ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image26.png))</span></span>

<span data-ttu-id="ede61-230">Es mag es ineffizient, die Daten der Datenbank jedes Mal abrufen, die Daten über ausgelagert oder sortiert.</span><span class="sxs-lookup"><span data-stu-id="ede61-230">It may seem wasteful to retrieve the database data each time the data is paged through or sorted.</span></span> <span data-ttu-id="ede61-231">Schließlich hat seit wir erneut Standardpaging, dem ObjectDataSource-Steuerelement alle Datensätze abgerufen, wenn die erste Seite anzeigen.</span><span class="sxs-lookup"><span data-stu-id="ede61-231">After all, since we re using default paging, the ObjectDataSource has retrieved all of the records when displaying the first page.</span></span> <span data-ttu-id="ede61-232">Auch wenn die GridView sortieren und paging-Unterstützung nicht bereitstellt, müssen die Daten aus der Datenbank jedes Mal abgerufen werden, die zuerst die Seite besucht wird, von einem Benutzer (und bei jedem Postback, wenn der Ansichtszustand deaktiviert ist).</span><span class="sxs-lookup"><span data-stu-id="ede61-232">Even if the GridView does not provide sorting and paging support, the data must be retrieved from the database each time the page is first visited by any user (and on every postback, if view state is disabled).</span></span> <span data-ttu-id="ede61-233">Wenn jedoch die GridView die gleichen Daten für alle Benutzer angezeigt wird, diese zusätzliche datenbankanforderungen überflüssig.</span><span class="sxs-lookup"><span data-stu-id="ede61-233">But if the GridView is showing the same data to all users, these extra database requests are superfluous.</span></span> <span data-ttu-id="ede61-234">Warum nicht Zwischenspeichern von zurückgegebenen Ergebnisse der `GetProducts()` -Methode und die Bindung der GridView, die zwischengespeicherte Ergebnisse?</span><span class="sxs-lookup"><span data-stu-id="ede61-234">Why not cache the results returned from the `GetProducts()` method and bind the GridView to those cached results?</span></span>

## <a name="step-4-caching-the-data-using-the-objectdatasource"></a><span data-ttu-id="ede61-235">Schritt 4: Zwischenspeichern der Daten, die mit dem ObjectDataSource-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="ede61-235">Step 4: Caching the Data Using the ObjectDataSource</span></span>

<span data-ttu-id="ede61-236">Wenn Sie einfach einige Eigenschaften festlegen, kann dem ObjectDataSource-Steuerelement für die automatisch die abgerufenen Daten im Datencache ASP.NET cache konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-236">By simply setting a few properties, the ObjectDataSource can be configured to automatically cache its retrieved data in the ASP.NET data cache.</span></span> <span data-ttu-id="ede61-237">Die folgende Liste enthält die Cache-bezogenen Eigenschaften des dem ObjectDataSource-Steuerelement:</span><span class="sxs-lookup"><span data-stu-id="ede61-237">The following list summarizes the cache-related properties of the ObjectDataSource:</span></span>

- <span data-ttu-id="ede61-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) muss festgelegt werden, um `true` zum Aktivieren der Zwischenspeicherung.</span><span class="sxs-lookup"><span data-stu-id="ede61-238">[EnableCaching](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.enablecaching.aspx) must be set to `true` to enable caching.</span></span> <span data-ttu-id="ede61-239">Die Standardeinstellung ist `false`.</span><span class="sxs-lookup"><span data-stu-id="ede61-239">The default is `false`.</span></span>
- <span data-ttu-id="ede61-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) die Zeitspanne in Sekunden, die die Daten zwischengespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-240">[CacheDuration](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheduration.aspx) the amount of time, in seconds, that the data is cached.</span></span> <span data-ttu-id="ede61-241">Der Standard ist 0.</span><span class="sxs-lookup"><span data-stu-id="ede61-241">The default is 0.</span></span> <span data-ttu-id="ede61-242">Dem ObjectDataSource-Steuerelement wird nur die Daten zwischengespeichert, wenn `EnableCaching` ist `true` und `CacheDuration` auf einen Wert größer als 0 (null) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="ede61-242">The ObjectDataSource will only cache data if `EnableCaching` is `true` and `CacheDuration` is set to a value greater than zero.</span></span>
- <span data-ttu-id="ede61-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) kann festgelegt werden, um `Absolute` oder `Sliding`.</span><span class="sxs-lookup"><span data-stu-id="ede61-243">[CacheExpirationPolicy](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cacheexpirationpolicy.aspx) can be set to `Absolute` or `Sliding`.</span></span> <span data-ttu-id="ede61-244">Wenn `Absolute`, dem ObjectDataSource-Steuerelement speichert die abgerufenen Daten für `CacheDuration` Sekunden; Wenn `Sliding`, die Daten ablaufen, nur, nachdem es für die nicht zugegriffen wurde `CacheDuration` Sekunden.</span><span class="sxs-lookup"><span data-stu-id="ede61-244">If `Absolute`, the ObjectDataSource caches its retrieved data for `CacheDuration` seconds; if `Sliding`, the data expires only after it has not been accessed for `CacheDuration` seconds.</span></span> <span data-ttu-id="ede61-245">Die Standardeinstellung ist `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="ede61-245">The default is `Absolute`.</span></span>
- <span data-ttu-id="ede61-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) verwenden Sie diese Eigenschaft, einer vorhandenen Cacheabhängigkeit die "ObjectDataSource"-s-Cacheeinträge zugeordnet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ede61-246">[CacheKeyDependency](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.cachekeydependency.aspx) use this property to associate the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="ede61-247">Die "ObjectDataSource"-s-Dateneinträge können vorzeitig aus dem Cache entfernt werden, von der zugehörigen ablaufen `CacheKeyDependency`.</span><span class="sxs-lookup"><span data-stu-id="ede61-247">The ObjectDataSource s data entries can be prematurely evicted from the cache by expiring its associated `CacheKeyDependency`.</span></span> <span data-ttu-id="ede61-248">Diese Eigenschaft wird am häufigsten verwendet, um eine SQL-Cacheabhängigkeit mit dem ObjectDataSource-s-Cache zuzuordnen, ein Thema wird erläutert, in der Zukunft [mithilfe von SQL-Cacheabhängigkeiten](using-sql-cache-dependencies-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="ede61-248">This property is most commonly used to associate a SQL cache dependency with the ObjectDataSource s cache, a topic we'll explore in the future [Using SQL Cache Dependencies](using-sql-cache-dependencies-cs.md) tutorial.</span></span>

<span data-ttu-id="ede61-249">S konfigurieren lassen die `ProductsDataSource` ObjectDataSource-Steuerelement zum Zwischenspeichern von Daten für 30 Sekunden für absoluten Skala.</span><span class="sxs-lookup"><span data-stu-id="ede61-249">Let s configure the `ProductsDataSource` ObjectDataSource to cache its data for 30 seconds on an absolute scale.</span></span> <span data-ttu-id="ede61-250">Legen Sie das "ObjectDataSource"-s `EnableCaching` Eigenschaft `true` und die zugehörige `CacheDuration` Eigenschaft auf 30.</span><span class="sxs-lookup"><span data-stu-id="ede61-250">Set the ObjectDataSource s `EnableCaching` property to `true` and its `CacheDuration` property to 30.</span></span> <span data-ttu-id="ede61-251">Lassen Sie die `CacheExpirationPolicy` -Eigenschaft auf die Standardeinstellung verwenden, `Absolute`.</span><span class="sxs-lookup"><span data-stu-id="ede61-251">Leave the `CacheExpirationPolicy` property set to its default, `Absolute`.</span></span>

<span data-ttu-id="ede61-252">[![Konfigurieren von dem ObjectDataSource-Steuerelement zum Zwischenspeichern von Daten für 30 Sekunden](caching-data-with-the-objectdatasource-cs/_static/image28.png)](caching-data-with-the-objectdatasource-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="ede61-252">[![Configure the ObjectDataSource to Cache its Data for 30 Seconds](caching-data-with-the-objectdatasource-cs/_static/image28.png)](caching-data-with-the-objectdatasource-cs/_static/image27.png)</span></span>

<span data-ttu-id="ede61-253">**Abbildung 11**: Konfigurieren von dem ObjectDataSource-Steuerelement zum Zwischenspeichern von Daten für 30 Sekunden ([klicken Sie, um das Bild in voller Größe anzeigen](caching-data-with-the-objectdatasource-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="ede61-253">**Figure 11**: Configure the ObjectDataSource to Cache its Data for 30 Seconds ([Click to view full-size image](caching-data-with-the-objectdatasource-cs/_static/image29.png))</span></span>

<span data-ttu-id="ede61-254">Die Änderungen zu speichern, und rufen Sie diese Seite in einem Browser erneut.</span><span class="sxs-lookup"><span data-stu-id="ede61-254">Save your changes and revisit this page in a browser.</span></span> <span data-ttu-id="ede61-255">Der Markieren von Text ausgelöste Ereignis wird wie ursprünglich die Daten nicht im Cache sind beim ersten die Seite Besuch angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ede61-255">The Selecting event fired text will appear when you first visit the page, as initially the data is not in the cache.</span></span> <span data-ttu-id="ede61-256">Jedoch nachfolgenden Postbacks ausgelöst wird, mit der Schaltfläche Postback, sortieren, paging oder das Klicken auf die bearbeiten "oder" Abbrechen " *nicht* erneuten Anzeigen der Auswahl-Ereignis wird ausgelöst, Text.</span><span class="sxs-lookup"><span data-stu-id="ede61-256">But subsequent postbacks triggered by clicking the Postback button, sorting, paging, or clicking the Edit or Cancel buttons does *not* redisplay the Selecting event fired text.</span></span> <span data-ttu-id="ede61-257">Grund hierfür ist die `Selecting` Ereignis nur ausgelöst wird, wenn es sich bei dem ObjectDataSource-Steuerelement seine Daten aus der zugrunde liegenden Objekts; ruft die `Selecting` Ereignis wird nicht ausgelöst, wenn die Daten aus dem Datencache abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-257">This is because the `Selecting` event only fires when the ObjectDataSource gets its data from its underlying object; the `Selecting` event does not fire if the data is pulled from the data cache.</span></span>

<span data-ttu-id="ede61-258">Nach 30 Sekunden werden die Daten aus dem Cache entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-258">After 30 seconds, the data will be evicted from the cache.</span></span> <span data-ttu-id="ede61-259">Die Daten werden auch aus dem Cache entfernt werden, wenn das "ObjectDataSource"-s `Insert`, `Update`, oder `Delete` Methoden aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-259">The data will also be evicted from the cache if the ObjectDataSource s `Insert`, `Update`, or `Delete` methods are invoked.</span></span> <span data-ttu-id="ede61-260">Daher nach 30 Sekunden bestanden wurden oder die Schaltfläche "Aktualisieren" geklickt, sortieren, paging, oder klicken Sie auf die bearbeiten "oder" Abbrechen "dazu, das" ObjectDataSource "dass führt, um die Daten aus der zugrunde liegende Objekt, Anzeigen von die auswählen-Ereignis wird ausgelöst, Text bei der `Selecting` -Ereignis ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="ede61-260">Consequently, after 30 seconds have passed or the Update button has been clicked, sorting, paging, or clicking the Edit or Cancel buttons will cause the ObjectDataSource to get its data from its underlying object, displaying the Selecting event fired text when the `Selecting` event fires.</span></span> <span data-ttu-id="ede61-261">Diese zurückgegebenen Ergebnisse werden zurück in Datencache platziert.</span><span class="sxs-lookup"><span data-stu-id="ede61-261">These returned results are placed back into the data cache.</span></span>

> [!NOTE]
> <span data-ttu-id="ede61-262">Wenn Sie den ausgelöste Ereignis Markieren von Text häufig angezeigt wird, selbst wenn Sie erwarten, dass dem ObjectDataSource-Steuerelement funktioniert mit zwischengespeicherten Daten, kann es aufgrund von arbeitsspeicherbeschränkungen sein.</span><span class="sxs-lookup"><span data-stu-id="ede61-262">If you see the Selecting event fired text frequently, even when you expect the ObjectDataSource to be working with cached data, it may be due to memory constraints.</span></span> <span data-ttu-id="ede61-263">Wenn nicht genügend Arbeitsspeicher vorhanden ist, wurde möglicherweise die Daten, die dem Cache hinzugefügt, von dem ObjectDataSource-Steuerelement geleert.</span><span class="sxs-lookup"><span data-stu-id="ede61-263">If there is not enough free memory, the data added to the cache by the ObjectDataSource may have been scavenged.</span></span> <span data-ttu-id="ede61-264">Wenn das ObjectDataSource-Steuerelement t scheinbar ordnungsgemäß die Daten oder nur Caches im Cache gespeichert wird die Daten sporadisch, schließen Sie einige Anwendungen, um Arbeitsspeicher freizugeben, und versuchen Sie es erneut.</span><span class="sxs-lookup"><span data-stu-id="ede61-264">If the ObjectDataSource doesn t appear to be correctly caching the data or only caches the data sporadically, close some applications to free memory and try again.</span></span>

<span data-ttu-id="ede61-265">Abbildung 12 wird die Workflow Zwischenspeichern "ObjectDataSource"-s veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="ede61-265">Figure 12 illustrates the ObjectDataSource s caching workflow.</span></span> <span data-ttu-id="ede61-266">Beim Auslösen des Ereignisses auswählen Text auf dem Bildschirm angezeigt wird, da die Daten nicht im Cache wurde und hatte, aus dem zugrunde liegenden Objekt abgerufen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="ede61-266">When the Selecting event fired text appears on your screen, it is because the data was not in the cache and had to be retrieved from the underlying object.</span></span> <span data-ttu-id="ede61-267">Wenn dieser Text nicht angezeigt wird, aber es s, da die Daten aus dem Cache verfügbar waren.</span><span class="sxs-lookup"><span data-stu-id="ede61-267">When this text is missing, however, it s because the data was available from the cache.</span></span> <span data-ttu-id="ede61-268">Wenn die Daten aus dem Cache zurückgegeben werden dort s kein Aufruf auf die zugrunde liegende Objekt und somit keine Datenbankabfrage ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="ede61-268">When the data is returned from the cache there s no call to the underlying object and, therefore, no database query executed.</span></span>

![Die "ObjectDataSource" speichert und ruft seine Daten aus dem Datencache](caching-data-with-the-objectdatasource-cs/_static/image30.png)

<span data-ttu-id="ede61-270">**Abbildung 12**: Die "ObjectDataSource" speichert und ruft seine Daten aus dem Datencache</span><span class="sxs-lookup"><span data-stu-id="ede61-270">**Figure 12**: The ObjectDataSource Stores and Retrieves its Data from the Data Cache</span></span>

<span data-ttu-id="ede61-271">Jede ASP.NET-Anwendung hat seinen eigenen Datencache-Instanz, s, die für alle Seiten und Besucher gemeinsam verwendet.</span><span class="sxs-lookup"><span data-stu-id="ede61-271">Each ASP.NET application has its own data cache instance that s shared across all pages and visitors.</span></span> <span data-ttu-id="ede61-272">Das bedeutet, dass die Daten im Datencache gespeichert wird, von dem ObjectDataSource-Steuerelement auch für alle Benutzer freigegeben werden, die die Seite zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="ede61-272">That means that the data stored in the data cache by the ObjectDataSource is likewise shared across all users who visit the page.</span></span> <span data-ttu-id="ede61-273">Um dies zu überprüfen, öffnen Sie die `ObjectDataSource.aspx` Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="ede61-273">To verify this, open the `ObjectDataSource.aspx` page in a browser.</span></span> <span data-ttu-id="ede61-274">Wenn die Seite zuerst besuchen zu können, erscheint der Text der Auswahl-Ereignis ausgelöst, (vorausgesetzt, dass die Daten, die dem Cache hinzugefügt, durch die vorherigen Tests jetzt entfernt wurde,).</span><span class="sxs-lookup"><span data-stu-id="ede61-274">When first visiting the page, the Selecting event fired text will appear (assuming that the data added to the cache by previous tests has, by now, been evicted).</span></span> <span data-ttu-id="ede61-275">Öffnen Sie eine zweite Browserinstanz, und kopieren und fügen Sie die URL der ersten Instanz für den Browser an den zweiten.</span><span class="sxs-lookup"><span data-stu-id="ede61-275">Open a second browser instance and copy and paste the URL from the first browser instance to the second.</span></span> <span data-ttu-id="ede61-276">In der zweiten Browserinstanz, der Markieren von Text ausgelöste Ereignis wird nicht angezeigt, da es s, die mit dem gleichen zwischengespeicherten Daten wie die erste.</span><span class="sxs-lookup"><span data-stu-id="ede61-276">In the second browser instance, the Selecting event fired text is not shown because it s using the same cached data as the first.</span></span>

<span data-ttu-id="ede61-277">Wenn die abgerufenen Daten in den Cache eingefügt werden soll, wird dem ObjectDataSource-Steuerelement verwendet einen Cache-Key-Wert, der enthält: die `CacheDuration` und `CacheExpirationPolicy` Eigenschaftswerte, die den Typ des zugrunde liegenden Geschäftsobjekt verwendet wird, von dem ObjectDataSource-Steuerelement, das angegeben wird über die [ `TypeName` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, in diesem Beispiel); der Wert des der `SelectMethod` -Eigenschaft und die Namen und die Werte der Parameter in der `SelectParameters` Auflistung und die Werte für die `StartRowIndex`und `MaximumRows` Eigenschaften, die verwendet werden, bei der Implementierung [benutzerdefiniertes Paging.](../paging-and-sorting/paging-and-sorting-report-data-cs.md)</span><span class="sxs-lookup"><span data-stu-id="ede61-277">When inserting its retrieved data into the cache, the ObjectDataSource uses a cache key value that includes: the `CacheDuration` and `CacheExpirationPolicy` property values; the type of the underlying business object being used by the ObjectDataSource, which is specified via the [`TypeName` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.typename.aspx) (`ProductsBLL`, in this example); the value of the `SelectMethod` property and the name and values of the parameters in the `SelectParameters` collection; and the values of its `StartRowIndex` and `MaximumRows` properties, which are used when implementing [custom paging.](../paging-and-sorting/paging-and-sorting-report-data-cs.md)</span></span>

<span data-ttu-id="ede61-278">Erstellen den Cache-Key-Wert als eine Kombination dieser Eigenschaften wird einen eindeutiger Cacheeintragsschlüssel sichergestellt, da diese Werte ändern.</span><span class="sxs-lookup"><span data-stu-id="ede61-278">Crafting the cache key value as a combination of these properties ensures a unique cache entry as these values change.</span></span> <span data-ttu-id="ede61-279">Z. B. in den letzten Tutorials wir Ve gesucht, mit der `ProductsBLL` s-Klasse `GetProductsByCategoryID(categoryID)`, womit alle Produkte für eine angegebene Kategorie.</span><span class="sxs-lookup"><span data-stu-id="ede61-279">For example, in past tutorials we ve looked at using the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)`, which returns all products for a specified category.</span></span> <span data-ttu-id="ede61-280">Ein Benutzer ggf. auf der Seite und Getränke, die eine `CategoryID` 1.</span><span class="sxs-lookup"><span data-stu-id="ede61-280">One user might come to the page and view beverages, which has a `CategoryID` of 1.</span></span> <span data-ttu-id="ede61-281">Wenn dem ObjectDataSource-Steuerelement seine Ergebnisse ohne Berücksichtigung von im Cache der `SelectParameters` Werte, wenn ein anderer Benutzer auf die Seite stammt anzeigen "Gewürze", während die Getränke Produkte wurden im Cache, die sie d finden Sie unter den zwischengespeicherten trinken Produkte anstelle von "Gewürze".</span><span class="sxs-lookup"><span data-stu-id="ede61-281">If the ObjectDataSource cached its results without regard for the `SelectParameters` values, when another user came to the page to view condiments while the beverages products were in the cache, they d see the cached beverage products rather than condiments.</span></span> <span data-ttu-id="ede61-282">Durch die Änderung des Cacheschlüssels anhand dieser Eigenschaften, die die Werte der enthalten die `SelectParameters`, dem ObjectDataSource-Steuerelement verwaltet einen getrenntes Cache-Eintrag für Getränke und "Gewürze".</span><span class="sxs-lookup"><span data-stu-id="ede61-282">By varying the cache key by these properties, which include the values of the `SelectParameters`, the ObjectDataSource maintains a separate cache entry for beverages and condiments.</span></span>

## <a name="stale-data-concerns"></a><span data-ttu-id="ede61-283">Veraltete Daten Probleme</span><span class="sxs-lookup"><span data-stu-id="ede61-283">Stale Data Concerns</span></span>

<span data-ttu-id="ede61-284">Dem ObjectDataSource-Steuerelement entfernt automatisch die Elemente aus dem Cache, wenn eines der `Insert`, `Update`, oder `Delete` Methoden aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="ede61-284">The ObjectDataSource automatically evicts its items from the cache when any one of its `Insert`, `Update`, or `Delete` methods is invoked.</span></span> <span data-ttu-id="ede61-285">Dies schützt vor veralteter Daten durch die Cacheeinträge beseitigen, wenn die Daten über die Seite geändert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-285">This helps protect against stale data by clearing out the cache entries when the data is modified through the page.</span></span> <span data-ttu-id="ede61-286">Allerdings ist es möglich, dass ein ObjectDataSource-Steuerelement verwenden zwischenspeichern, um veraltete Daten weiterhin anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="ede61-286">However, it is possible for an ObjectDataSource using caching to still display stale data.</span></span> <span data-ttu-id="ede61-287">Im einfachsten Fall kann es aufgrund der Daten ändern, die direkt in der Datenbank sein.</span><span class="sxs-lookup"><span data-stu-id="ede61-287">In the simplest case, it can be due to the data changing directly within the database.</span></span> <span data-ttu-id="ede61-288">Ein Datenbankadministrator ausgeführt vielleicht nur ein Skript, das einige der Einträge in der Datenbank geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="ede61-288">Perhaps a database administrator just ran a script that modifies some of the records in the database.</span></span>

<span data-ttu-id="ede61-289">Dieses Szenario kann auch auf eine subtilere Weise erweitern.</span><span class="sxs-lookup"><span data-stu-id="ede61-289">This scenario could also unfold in a more subtle way.</span></span> <span data-ttu-id="ede61-290">Während dem ObjectDataSource-Steuerelement seine Elemente aus dem Cache entfernt, wenn eine der Methoden ändern Daten aufgerufen wird, die zwischengespeicherten Elemente, die entfernt werden, für das "ObjectDataSource" s-Kombination von Eigenschaftswerten (`CacheDuration`, `TypeName`, `SelectMethod`, und so weiter).</span><span class="sxs-lookup"><span data-stu-id="ede61-290">While the ObjectDataSource evicts its items from the cache when one of its data modification methods is called, the cached items removed are for the ObjectDataSource s particular combination of property values (`CacheDuration`, `TypeName`, `SelectMethod`, and so on).</span></span> <span data-ttu-id="ede61-291">Wenn Sie über zwei ObjectDataSources verfügen, mit denen verschiedene `SelectMethods` oder `SelectParameters`, aber dennoch kann die gleichen Daten aktualisieren, und klicken Sie dann ein ObjectDataSource-Steuerelement möglicherweise eine Zeile zu aktualisieren und eine eigene Einträge im Cache, aber die entsprechende Zeile für die zweite "ObjectDataSource" ungültig immer noch verarbeitet werden aus den zwischengespeicherten.</span><span class="sxs-lookup"><span data-stu-id="ede61-291">If you have two ObjectDataSources that use different `SelectMethods` or `SelectParameters`, but still can update the same data, then one ObjectDataSource may update a row and invalidate its own cache entries, but the corresponding row for the second ObjectDataSource will still be served from the cached.</span></span> <span data-ttu-id="ede61-292">Gerne können Sie zum Erstellen von Seiten, um diese Funktionalität aufweisen.</span><span class="sxs-lookup"><span data-stu-id="ede61-292">I encourage you to create pages to exhibit this functionality.</span></span> <span data-ttu-id="ede61-293">Erstellen Sie eine Seite, einer bearbeitbaren GridView, der die Daten aus einer "ObjectDataSource", die mithilfe der Zwischenspeicherung konfiguriert ist angezeigt abruft, rufen Sie Daten aus, der `ProductsBLL` Klasse s `GetProducts()` Methode.</span><span class="sxs-lookup"><span data-stu-id="ede61-293">Create a page that displays an editable GridView that pulls its data from an ObjectDataSource that uses caching and is configured to get data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="ede61-294">Fügen Sie ein weiteres bearbeitbare GridView und ObjectDataSource-Steuerelement auf dieser Seite (oder eine andere), aber für diese zweite "ObjectDataSource" haben Sie verwendet, sollte die `GetProductsByCategoryID(categoryID)` Methode.</span><span class="sxs-lookup"><span data-stu-id="ede61-294">Add another editable GridView and ObjectDataSource to this page (or another one), but for this second ObjectDataSource have it use the `GetProductsByCategoryID(categoryID)` method.</span></span> <span data-ttu-id="ede61-295">Da die zwei ObjectDataSources `SelectMethod` Eigenschaften unterscheiden sich, sie jede haben ihre eigenen zwischengespeicherten Werte.</span><span class="sxs-lookup"><span data-stu-id="ede61-295">Since the two ObjectDataSources `SelectMethod` properties differ, they ll each have their own cached values.</span></span> <span data-ttu-id="ede61-296">Wenn Sie das nächste Mal ein Produkt in einem Raster, das Sie die Daten (durch Paging bearbeiten, Sortieren und So weiter) an das andere Raster binden, wird es dienen immer noch die alten, zwischengespeicherte Daten und nicht wieder die Änderung, die aus dem anderen Raster erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="ede61-296">If you edit a product in one grid, the next time you bind the data back to the other grid (by paging, sorting, and so forth), it will still serve the old, cached data and not reflect the change that was made from the other grid.</span></span>

<span data-ttu-id="ede61-297">Kurz gesagt, nur verwenden Sie zeitbasierte Cacheobjekte, wenn Sie bereit sind, besteht das Risiko von veralteten Daten aus, und verwenden Sie kürzere Cacheobjekte für Szenarien, in dem Sie unbedingt der Aktualität der Daten.</span><span class="sxs-lookup"><span data-stu-id="ede61-297">In short, only use time-based expiries if you are willing to have the potential of stale data, and use shorter expiries for scenarios where the freshness of data is important.</span></span> <span data-ttu-id="ede61-298">Wenn veraltete Daten nicht zulässig ist, wird die Zwischenspeicherung auf, oder verwenden Sie SQL-cacheabhängigkeiten (vorausgesetzt, es der Datenbankdaten ist Sie erneut die Zwischenspeicherung).</span><span class="sxs-lookup"><span data-stu-id="ede61-298">If stale data is not acceptable, either forgo caching or use SQL cache dependencies (assuming it is database data you re caching).</span></span> <span data-ttu-id="ede61-299">Wir werden die SQL-cacheabhängigkeiten in einem späteren Tutorial untersuchen.</span><span class="sxs-lookup"><span data-stu-id="ede61-299">We'll explore SQL cache dependencies in a future tutorial.</span></span>

## <a name="summary"></a><span data-ttu-id="ede61-300">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="ede61-300">Summary</span></span>

<span data-ttu-id="ede61-301">In diesem Tutorial untersucht es die "ObjectDataSource" s integrierten caching-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="ede61-301">In this tutorial we examined the ObjectDataSource s built-in caching capabilities.</span></span> <span data-ttu-id="ede61-302">Wenn Sie einfach einige Eigenschaften festlegen, können wir dem ObjectDataSource-Steuerelement, die aus dem angegebenen zurückgegebenen Ergebnisse zwischenzuspeichern anweisen `SelectMethod` in Datencache ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ede61-302">By simply setting a few properties, we can instruct the ObjectDataSource to cache the results returned from the specified `SelectMethod` into the ASP.NET data cache.</span></span> <span data-ttu-id="ede61-303">Die `CacheDuration` und `CacheExpirationPolicy` -Eigenschaften angeben, die Dauer der Zwischenspeicherung des Elements ist und ob es sich um eine Absolute oder gleitende Ablaufzeit ist.</span><span class="sxs-lookup"><span data-stu-id="ede61-303">The `CacheDuration` and `CacheExpirationPolicy` properties indicate the duration the item is cached and whether it is an absolute or sliding expiration.</span></span> <span data-ttu-id="ede61-304">Die `CacheKeyDependency` Eigenschaft ordnet alle "ObjectDataSource" s-Cache-Einträge mit einer vorhandenen Cacheabhängigkeit.</span><span class="sxs-lookup"><span data-stu-id="ede61-304">The `CacheKeyDependency` property associates all of the ObjectDataSource s cache entries with an existing cache dependency.</span></span> <span data-ttu-id="ede61-305">Dies kann verwendet werden, um die "ObjectDataSource"-s-Einträge aus dem Cache entfernen, bevor das Ablaufdatum eines zeitbasierten erreicht ist, und normalerweise, mit der SQL-cacheabhängigkeiten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="ede61-305">This can be used to evict the ObjectDataSource s entries from the cache before the time-based expiration is reached, and is typically used with SQL cache dependencies.</span></span>

<span data-ttu-id="ede61-306">Da dem ObjectDataSource-Steuerelement einfach die Werte für den Datencache zwischengespeichert werden, konnten wir die integrierte "ObjectDataSource"-s-Funktion programmgesteuert repliziert werden.</span><span class="sxs-lookup"><span data-stu-id="ede61-306">Since the ObjectDataSource simply caches its values to the data cache, we could replicate the ObjectDataSource s built-in functionality programmatically.</span></span> <span data-ttu-id="ede61-307">Es verfügt t sinnvoll sein, dies geschieht in der Darstellungsschicht, da dem ObjectDataSource-Steuerelement diese Funktionalität standardmäßig stellt, aber wir Funktionen zwischenspeichern, in einer separaten Schicht der Architektur implementieren können.</span><span class="sxs-lookup"><span data-stu-id="ede61-307">It doesn t make sense to do this at the Presentation Layer, since the ObjectDataSource offers this functionality out of the box, but we can implement caching capabilities in a separate layer of the architecture.</span></span> <span data-ttu-id="ede61-308">Zu diesem Zweck müssen wir die gleiche Logik, die dem ObjectDataSource-Steuerelement ein, die wiederholt werden soll.</span><span class="sxs-lookup"><span data-stu-id="ede61-308">To do so, we'll need to repeat the same logic used by the ObjectDataSource.</span></span> <span data-ttu-id="ede61-309">Untersucht werden, wie Sie programmgesteuert mit dem Datencache von innerhalb der Architektur in unserem nächsten Tutorial arbeiten.</span><span class="sxs-lookup"><span data-stu-id="ede61-309">We'll explore how to programmatically work with the data cache from within the architecture in our next tutorial.</span></span>

<span data-ttu-id="ede61-310">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="ede61-310">Happy Programming!</span></span>

## <a name="further-reading"></a><span data-ttu-id="ede61-311">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="ede61-311">Further Reading</span></span>

<span data-ttu-id="ede61-312">Weitere Informationen zu den Themen in diesem Tutorial erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="ede61-312">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="ede61-313">Zwischenspeicherung in ASP.NET: Verfahren und bewährte Methoden</span><span class="sxs-lookup"><span data-stu-id="ede61-313">ASP.NET Caching: Techniques and Best Practices</span></span>](https://msdn.microsoft.com/library/aa478965.aspx)
- [<span data-ttu-id="ede61-314">Zwischenspeichern Architekturhandbuch für .NET Framework-Anwendungen</span><span class="sxs-lookup"><span data-stu-id="ede61-314">Caching Architecture Guide for .NET Framework Applications</span></span>](https://msdn.microsoft.com/library/ee817645.aspx)
- [<span data-ttu-id="ede61-315">Ausgabe-Caching in ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="ede61-315">Output Caching in ASP.NET 2.0</span></span>](http://aspnet.4guysfromrolla.com/articles/121306-1.aspx)

## <a name="about-the-author"></a><span data-ttu-id="ede61-316">Der Autor</span><span class="sxs-lookup"><span data-stu-id="ede61-316">About the Author</span></span>

<span data-ttu-id="ede61-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="ede61-317">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="ede61-318">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="ede61-318">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="ede61-319">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="ede61-319">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="ede61-320">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ede61-320">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="ede61-321">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="ede61-321">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="ede61-322">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="ede61-322">Special Thanks To</span></span>

<span data-ttu-id="ede61-323">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="ede61-323">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="ede61-324">Führendes Prüfer für dieses Tutorial wurde Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="ede61-324">Lead reviewer for this tutorial was Teresa Murphy.</span></span> <span data-ttu-id="ede61-325">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="ede61-325">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="ede61-326">Wenn dies der Fall ist, löschen Sie mir eine Linie an [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="ede61-326">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="ede61-327">Nächste</span><span class="sxs-lookup"><span data-stu-id="ede61-327">Next</span></span>](caching-data-in-the-architecture-cs.md)
