---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: Benutzerdefinierte Schaltflächen im DataList und RepeaterC#() | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial erstellen wir eine Schnittstelle, die einen Repeater zum Auflisten der Kategorien im System verwendet, wobei jede Kategorie eine Schaltfläche zum Anzeigen der ASSOCI...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: e8cb1054068327c25e057b6df1cc7506feec8d37
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78465345"
---
# <a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="f6766-103">Benutzerdefinierte Schaltflächen im DataList- oder Wiederholungssteuerelement (C#)</span><span class="sxs-lookup"><span data-stu-id="f6766-103">Custom Buttons in the DataList and Repeater (C#)</span></span>

<span data-ttu-id="f6766-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f6766-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f6766-105">[Beispiel-app herunterladen](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) oder [PDF herunterladen](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f6766-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="f6766-106">In diesem Lernprogramm erstellen wir eine Schnittstelle, die einen Repeater zum Auflisten der Kategorien im System verwendet, wobei jede Kategorie eine Schaltfläche zum Anzeigen der zugehörigen Produkte mithilfe eines "BulletedList"-Steuer Elements bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="f6766-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>

## <a name="introduction"></a><span data-ttu-id="f6766-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="f6766-107">Introduction</span></span>

<span data-ttu-id="f6766-108">In den letzten 17 DataList-und Repeater-Tutorials haben wir sowohl schreibgeschützte Beispiele als auch Beispiele zum Bearbeiten und löschen erstellt.</span><span class="sxs-lookup"><span data-stu-id="f6766-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="f6766-109">Um das Bearbeiten und Löschen von Funktionen innerhalb eines DataList zu vereinfachen, haben wir dem DataList-`ItemTemplate` Schaltflächen hinzugefügt, die beim Klicken auf ein Postback geführt und ein DataList-Ereignis ausgelöst haben, das der Schaltfläche s `CommandName` Eigenschaft entspricht.</span><span class="sxs-lookup"><span data-stu-id="f6766-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="f6766-110">Wenn Sie z. b. eine Schaltfläche zum `ItemTemplate` mit einem `CommandName`-Eigenschafts Wert bearbeiten hinzufügen, bewirkt dies, dass die DataList s-`EditCommand` beim Postback ausgelöst werden. mit dem `CommandName` DELETE wird das `DeleteCommand`ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="f6766-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="f6766-111">Zusätzlich zu den Schaltflächen Bearbeiten und löschen können die Steuerelemente DataList und Repeater auch Schaltflächen, LinkButtons oder imagebuttons enthalten, die beim Klicken auf eine benutzerdefinierte serverseitige Logik ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="f6766-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="f6766-112">In diesem Tutorial erstellen wir eine Schnittstelle, die einen Repeater zum Auflisten der Kategorien im System verwendet.</span><span class="sxs-lookup"><span data-stu-id="f6766-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="f6766-113">Für jede Kategorie schließt der Repeater eine Schaltfläche ein, um die zugeordneten Produkte der Kategorie mithilfe eines "BulletedList"-Steuer Elements anzuzeigen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="f6766-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>

<span data-ttu-id="f6766-114">[![auf den Link Produkte anzeigen klicken, werden die Produkte der Kategorie in einer Auflistungs Liste angezeigt.](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f6766-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="f6766-115">**Abbildung 1**: Wenn Sie auf den Link Produkte anzeigen klicken, werden die Produkte der Kategorie in einer aufhefliste angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="f6766-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="f6766-116">Schritt 1: Hinzufügen der benutzerdefinierten Schaltflächen-Tutorial-Webseiten</span><span class="sxs-lookup"><span data-stu-id="f6766-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="f6766-117">Bevor wir uns mit der Vorgehensweise zum Hinzufügen einer benutzerdefinierten Schaltfläche beschäftigen, nehmen wir uns zunächst einen Moment Zeit, um die ASP.NET-Seiten in unserem Website Projekt zu erstellen, die wir für dieses Tutorial benötigen.</span><span class="sxs-lookup"><span data-stu-id="f6766-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="f6766-118">Fügen Sie zunächst einen neuen Ordner mit dem Namen `CustomButtonsDataListRepeater`hinzu.</span><span class="sxs-lookup"><span data-stu-id="f6766-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="f6766-119">Fügen Sie dann die folgenden beiden ASP.NET-Seiten zu diesem Ordner hinzu, und stellen Sie sicher, dass Sie die einzelnen Seiten der `Site.master` Master Seite zuordnen:</span><span class="sxs-lookup"><span data-stu-id="f6766-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Hinzufügen der ASP.NET-Seiten für benutzerdefinierte Schaltflächen bezogene Tutorials](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="f6766-121">**Abbildung 2**: Hinzufügen der ASP.NET-Seiten für benutzerdefinierte Schaltflächen bezogene Tutorials</span><span class="sxs-lookup"><span data-stu-id="f6766-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="f6766-122">Wie in den anderen Ordnern werden `Default.aspx` im Ordner `CustomButtonsDataListRepeater` die Lernprogramme in diesem Abschnitt auflisten.</span><span class="sxs-lookup"><span data-stu-id="f6766-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="f6766-123">Denken Sie daran, dass das `SectionLevelTutorialListing.ascx` Benutzer Steuerelement diese Funktionalität bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="f6766-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="f6766-124">Fügen Sie dieses Benutzer Steuerelement zu `Default.aspx` hinzu, indem Sie es aus dem Projektmappen-Explorer auf die Seite s Designansicht ziehen.</span><span class="sxs-lookup"><span data-stu-id="f6766-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="f6766-125">[![das Benutzer Steuerelement "sectionleveltutoriallisting. ascx" zu "default. aspx" hinzufügen](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f6766-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="f6766-126">**Abbildung 3**: Hinzufügen des `SectionLevelTutorialListing.ascx` Benutzer Steuer Elements zu `Default.aspx` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="f6766-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>

<span data-ttu-id="f6766-127">Fügen Sie abschließend die Seiten als Einträge zur `Web.sitemap` Datei hinzu.</span><span class="sxs-lookup"><span data-stu-id="f6766-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="f6766-128">Fügen Sie insbesondere nach dem Paging und der Sortierung mit dem DataList-und Repeater-`<siteMapNode>`das folgende Markup hinzu:</span><span class="sxs-lookup"><span data-stu-id="f6766-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>

[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="f6766-129">Nehmen Sie sich nach dem Aktualisieren `Web.sitemap`einen Moment Zeit, um die Tutorials-Website über einen Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="f6766-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="f6766-130">Das Menü auf der linken Seite enthält jetzt Elemente für die Tutorials zum Bearbeiten, einfügen und löschen.</span><span class="sxs-lookup"><span data-stu-id="f6766-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Die Site Übersicht enthält jetzt den Eintrag für das Tutorial benutzerdefinierte Schaltflächen.](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="f6766-132">**Abbildung 4**: die Site Übersicht enthält jetzt den Eintrag für das Tutorial zu benutzerdefinierten Schaltflächen.</span><span class="sxs-lookup"><span data-stu-id="f6766-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="f6766-133">Schritt 2: Hinzufügen der Liste der Kategorien</span><span class="sxs-lookup"><span data-stu-id="f6766-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="f6766-134">Für dieses Tutorial müssen Sie einen Repeater erstellen, der alle Kategorien auflistet, zusammen mit dem Link Button Produkte anzeigen, bei dem die zugeordneten Kategorie s Produkte in einer Auflistungs Liste angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f6766-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="f6766-135">Erstellen Sie zunächst einen einfachen Repeater, der die Kategorien im System auflistet.</span><span class="sxs-lookup"><span data-stu-id="f6766-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="f6766-136">Öffnen Sie zunächst die Seite `CustomButtons.aspx` im Ordner `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="f6766-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="f6766-137">Ziehen Sie einen Repeater aus der Toolbox auf den Designer, und legen Sie dessen `ID`-Eigenschaft auf `Categories`fest.</span><span class="sxs-lookup"><span data-stu-id="f6766-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="f6766-138">Erstellen Sie als nächstes ein neues Datenquellen-Steuerelement aus dem Repeater s Smarttags.</span><span class="sxs-lookup"><span data-stu-id="f6766-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="f6766-139">Erstellen Sie insbesondere ein neues ObjectDataSource-Steuerelement mit dem Namen `CategoriesDataSource`, das seine Daten aus der `CategoriesBLL` Class s `GetCategories()`-Methode auswählt.</span><span class="sxs-lookup"><span data-stu-id="f6766-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="f6766-140">[![Konfigurieren von ObjectDataSource für die Verwendung der Methode GetCategories () der kategoriesbll-Klasse](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f6766-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="f6766-141">**Abbildung 5**: Konfigurieren von ObjectDataSource für die Verwendung der `CategoriesBLL` Class s `GetCategories()`-Methode ([Klicken Sie, um das Bild in voller Größe anzuzeigen](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="f6766-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>

<span data-ttu-id="f6766-142">Anders als das DataList-Steuerelement, für das Visual Studio eine Standard `ItemTemplate` erstellt, die auf der Datenquelle basiert, müssen die Repeater s-Vorlagen manuell definiert werden.</span><span class="sxs-lookup"><span data-stu-id="f6766-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="f6766-143">Außerdem müssen die Wiederholungs Vorlagen für Wiederholungs Vorlagen deklarativ erstellt und bearbeitet werden (d. h., es gibt keine Option zum Bearbeiten von Vorlagen in der Repeater s Smarttags).</span><span class="sxs-lookup"><span data-stu-id="f6766-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="f6766-144">Klicken Sie in der linken unteren Ecke auf die Registerkarte Quelle, und fügen Sie eine `ItemTemplate` hinzu, die den Namen der Kategorie in einem `<h3>`-Element und seine Beschreibung in einem Absatz Kennzeichen anzeigt. Fügen Sie einen `SeparatorTemplate` ein, der eine horizontale Regel (`<hr />`) zwischen jeder Kategorie anzeigt.</span><span class="sxs-lookup"><span data-stu-id="f6766-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="f6766-145">Fügen Sie auch einen Link Button hinzu, dessen `Text`-Eigenschaft auf Produkte anzeigen festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="f6766-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="f6766-146">Nachdem Sie diese Schritte ausgeführt haben, sollte Ihr deklaratives Markup der Seite wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="f6766-146">After completing these steps, your page s declarative markup should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="f6766-147">Abbildung 6 zeigt die Seite, wenn Sie in einem Browser angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="f6766-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="f6766-148">Jeder Kategoriename und jede Beschreibung ist aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="f6766-148">Each category name and description is listed.</span></span> <span data-ttu-id="f6766-149">Wenn Sie auf die Schaltfläche Produkte anzeigen klicken, wird ein Postback verursacht, aber es wird noch keine Aktion ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="f6766-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>

<span data-ttu-id="f6766-150">[![die einzelnen Kategorien "Name" und "Beschreibung" angezeigt werden, zusammen mit dem Link "Produkte anzeigen".](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="f6766-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="f6766-151">**Abbildung 6**: die Namen und Beschreibungen der Kategorien werden zusammen mit dem Link "Produkte anzeigen" angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="f6766-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>

## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="f6766-152">Schritt 3: Ausführen der Server seitigen Logik, wenn auf die linktaste "Produkte anzeigen" geklickt wird</span><span class="sxs-lookup"><span data-stu-id="f6766-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="f6766-153">Jedes Mal, wenn auf eine Schaltfläche, einen LinkButton oder einen ImageButton innerhalb einer Vorlage in einem DataList-oder Wiederholungs Modul geklickt wird, tritt ein Postback auf, und das DataList-oder Repeater-`ItemCommand` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="f6766-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="f6766-154">Zusätzlich zum `ItemCommand`-Ereignis kann das DataList-Steuerelement auch ein weiteres, spezifischere Ereignis auslösen, wenn die Schaltfläche s `CommandName`-Eigenschaft auf eine der reservierten Zeichen folgen festgelegt ist (Delete, Edit, Cancel, Update oder SELECT), aber das `ItemCommand`-Ereignis *immer* ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="f6766-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="f6766-155">Wenn in einem DataList-oder Wiederholungs Steuerelement auf eine Schaltfläche geklickt wird, müssen wir die Schaltfläche übergeben, auf die geklickt wurde (in dem Fall, dass es mehrere Schaltflächen im Steuerelement gibt, z. b. eine Schaltfläche zum Bearbeiten und löschen), und möglicherweise einige zusätzliche Informationen (z. b. der Primärschlüssel Wert des Elements, auf dessen Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="f6766-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="f6766-156">Die Schaltfläche, LinkButton und ImageButton enthalten zwei Eigenschaften, deren Werte an den `ItemCommand`-Ereignishandler übermittelt werden:</span><span class="sxs-lookup"><span data-stu-id="f6766-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="f6766-157">`CommandName` eine Zeichenfolge, die normalerweise zum Identifizieren der einzelnen Schaltflächen in der Vorlage verwendet</span><span class="sxs-lookup"><span data-stu-id="f6766-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="f6766-158">`CommandArgument`, die häufig verwendet wird, um den Wert eines Daten Felds (z. b. den Primärschlüssel Wert) aufzunehmen.</span><span class="sxs-lookup"><span data-stu-id="f6766-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="f6766-159">Legen Sie für dieses Beispiel die LinkButton s `CommandName`-Eigenschaft auf showProducts fest, und binden Sie den Wert des aktuellen Datensatzes s als Primärschlüssel `CategoryID` mithilfe der Datenbindung-Syntax `CategoryArgument='<%# Eval("CategoryID") %>'`an die `CommandArgument`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="f6766-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="f6766-160">Nachdem Sie diese beiden Eigenschaften angegeben haben, sollte die deklarative Syntax von LinkButton s wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="f6766-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="f6766-161">Wenn auf die Schaltfläche geklickt wird, erfolgt ein Postback, und das DataList-oder Repeater-`ItemCommand` Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="f6766-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="f6766-162">Dem Ereignishandler werden die Schaltflächen s `CommandName` und `CommandArgument` Werte übermittelt.</span><span class="sxs-lookup"><span data-stu-id="f6766-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="f6766-163">Erstellen Sie einen Ereignishandler für das Repeater s `ItemCommand`-Ereignis, und notieren Sie sich den zweiten Parameter, der an den Ereignishandler übergeben wird (`e`).</span><span class="sxs-lookup"><span data-stu-id="f6766-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="f6766-164">Dieser zweite Parameter ist vom Typ [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) und verfügt über die folgenden vier Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="f6766-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="f6766-165">`CommandArgument` den Wert der Schaltfläche s `CommandArgument` Eigenschaft, auf die geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="f6766-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="f6766-166">`CommandName` den Wert der Schaltfläche s `CommandName` Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="f6766-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="f6766-167">`CommandSource` einen Verweis auf das Schaltflächen Steuerelement, auf das geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="f6766-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="f6766-168">`Item` einen Verweis auf das [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) , das die Schaltfläche enthält, auf die geklickt wurde. jeder an den Repeater gebundene Datensatz wird als `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="f6766-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="f6766-169">Da die ausgewählte Kategorie s `CategoryID` über die `CommandArgument`-Eigenschaft übermittelt wird, können wir den Satz von Produkten, die der ausgewählten Kategorie zugeordnet sind, im `ItemCommand`-Ereignishandler erhalten.</span><span class="sxs-lookup"><span data-stu-id="f6766-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="f6766-170">Diese Produkte können dann an ein BulletedList-Steuerelement in der `ItemTemplate` gebunden werden (das wir noch hinzugefügt haben).</span><span class="sxs-lookup"><span data-stu-id="f6766-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="f6766-171">Es bleibt alles übrig, und dann wird die aufzurufliste hinzugefügt, in der `ItemCommand`-Ereignishandler darauf verwiesen und an den Satz von Produkten für die ausgewählte Kategorie gebunden, den wir in Schritt 4 behandeln werden.</span><span class="sxs-lookup"><span data-stu-id="f6766-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="f6766-172">Dem DataList s `ItemCommand`-Ereignishandler wird ein Objekt vom Typ " [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx)" übermittelt, das dieselben vier Eigenschaften wie die `RepeaterCommandEventArgs`-Klasse bietet.</span><span class="sxs-lookup"><span data-stu-id="f6766-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>

## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="f6766-173">Schritt 4: Anzeigen der Produkte der ausgewählten Kategorie in einer Auflistungs Liste</span><span class="sxs-lookup"><span data-stu-id="f6766-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="f6766-174">Die ausgewählten Produkte der Kategorie s können innerhalb der Repeater-`ItemTemplate` mit einer beliebigen Anzahl von Steuerelementen angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f6766-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="f6766-175">Wir könnten weitere geschaltete Wiederholungs Steuerelemente, DataList, Dropdown Listen, GridView usw. hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="f6766-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="f6766-176">Da wir die Produkte als Auflistungs Liste anzeigen möchten, verwenden wir jedoch das Steuerelement "BulletedList".</span><span class="sxs-lookup"><span data-stu-id="f6766-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="f6766-177">Wenn Sie zum deklarativen Markup der `CustomButtons.aspx` Seite zurückkehren, fügen Sie der `ItemTemplate` nach dem Link Schaltfläche Produkte anzeigen ein Auflistungs Listen-Steuerelement hinzu.</span><span class="sxs-lookup"><span data-stu-id="f6766-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="f6766-178">Legen Sie die `ID` für die aufzuruflisten s auf `ProductsInCategory`fest.</span><span class="sxs-lookup"><span data-stu-id="f6766-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="f6766-179">Die Auflistungs Liste zeigt den Wert des Daten Felds an, das über die `DataTextField`-Eigenschaft angegeben wird. Da auf dieses Steuerelement Produktinformationen gebunden werden, legen Sie die `DataTextField`-Eigenschaft auf `ProductName`fest.</span><span class="sxs-lookup"><span data-stu-id="f6766-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="f6766-180">Verweisen Sie im `ItemCommand`-Ereignishandler mit `e.Item.FindControl("ProductsInCategory")` auf dieses Steuerelement, und binden Sie es an den Satz von Produkten, die der ausgewählten Kategorie zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="f6766-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>

[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="f6766-181">Vor dem Ausführen einer Aktion im `ItemCommand`-Ereignishandler ist es ratsam, zuerst den Wert der eingehenden `CommandName`zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="f6766-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="f6766-182">Da der `ItemCommand` Ereignishandler ausgelöst wird, wenn auf *eine* Schaltfläche geklickt wird, verwenden Sie den `CommandName` Wert, wenn mehrere Schaltflächen in der Vorlage vorhanden sind, um die auszuführende Aktion zu ermitteln.</span><span class="sxs-lookup"><span data-stu-id="f6766-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="f6766-183">Das Überprüfen des `CommandName` hier ist "Muot", da wir nur eine einzige Schaltfläche haben, aber es ist eine gute Gewohnheit, zu bilden.</span><span class="sxs-lookup"><span data-stu-id="f6766-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="f6766-184">Als nächstes wird der `CategoryID` der ausgewählten Kategorie aus der `CommandArgument`-Eigenschaft abgerufen.</span><span class="sxs-lookup"><span data-stu-id="f6766-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="f6766-185">Auf das Steuerelement "BulletedList" in der Vorlage wird dann verwiesen, und es wird an die Ergebnisse der `ProductsBLL` Klasse "s `GetProductsByCategoryID(categoryID)`-Methode gebunden.</span><span class="sxs-lookup"><span data-stu-id="f6766-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="f6766-186">In vorherigen Tutorials, in denen die Schaltflächen in einem DataList verwendet wurden (z. b. [eine Übersicht über das Bearbeiten und Löschen von Daten im DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md)), haben wir den Wert des Primärschlüssels eines bestimmten Elements über die `DataKeys` Collection bestimmt.</span><span class="sxs-lookup"><span data-stu-id="f6766-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="f6766-187">Obwohl dieser Ansatz gut mit dem DataList funktioniert, verfügt der Repeater nicht über eine `DataKeys`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="f6766-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="f6766-188">Stattdessen muss ein alternativer Ansatz zum Angeben des Primärschlüssel Werts verwendet werden, z. b. über die Schaltfläche s `CommandArgument` Eigenschaft oder durch Zuweisen des Primärschlüssel Werts zu einem ausgeblendeten Beschriftungs-websteuer Element innerhalb der Vorlage und durch das Lesen des Werts im `ItemCommand` Ereignishandler mithilfe von `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="f6766-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="f6766-189">Nachdem Sie den `ItemCommand`-Ereignishandler abgeschlossen haben, nehmen Sie sich einen Moment Zeit, um diese Seite in einem Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="f6766-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="f6766-190">Wie in Abbildung 7 gezeigt, wird durch Klicken auf den Link Produkte anzeigen ein Postback verursacht, und die Produkte für die ausgewählte Kategorie werden in einer Auflistungs Liste angezeigt.</span><span class="sxs-lookup"><span data-stu-id="f6766-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="f6766-191">Beachten Sie außerdem, dass diese Produktinformationen weiterhin angezeigt werden, auch wenn in anderen Kategorien auf "Produkte anzeigen" geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="f6766-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="f6766-192">Wenn Sie das Verhalten dieses Berichts so ändern möchten, dass jeweils nur die Produkte der Kategorie s aufgeführt sind, legen Sie einfach die `EnableViewState` Eigenschaft des Steuer Elements "BulletedList" auf `False`fest.</span><span class="sxs-lookup"><span data-stu-id="f6766-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>

<span data-ttu-id="f6766-193">[![eine "BulletedList" zum Anzeigen der Produkte der ausgewählten Kategorie verwendet wird.](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f6766-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="f6766-194">**Abbildung 7**: eine "BulletedList" wird verwendet, um die Produkte der ausgewählten Kategorie anzuzeigen ([Klicken Sie, um das Bild in voller Größe](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png)anzuzeigen)</span><span class="sxs-lookup"><span data-stu-id="f6766-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="f6766-195">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="f6766-195">Summary</span></span>

<span data-ttu-id="f6766-196">Die Steuerelemente DataList und Repeater können eine beliebige Anzahl von Schaltflächen, LinkButtons oder imagebuttons in ihren Vorlagen enthalten.</span><span class="sxs-lookup"><span data-stu-id="f6766-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="f6766-197">Wenn Sie auf diese Schaltflächen klicken, wird ein Postback ausgelöst, und das `ItemCommand`-Ereignis wird ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="f6766-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="f6766-198">Erstellen Sie einen Ereignishandler für das `ItemCommand`-Ereignis, um eine benutzerdefinierte serverseitige Aktion einer Schaltfläche zuzuordnen, auf die geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="f6766-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="f6766-199">Überprüfen Sie in diesem Ereignishandler zuerst den Wert eingehender `CommandName`, um zu bestimmen, auf welche Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="f6766-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="f6766-200">Zusätzliche Informationen können optional über die Schaltfläche s `CommandArgument`-Eigenschaft bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="f6766-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="f6766-201">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="f6766-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f6766-202">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="f6766-202">About the Author</span></span>

<span data-ttu-id="f6766-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="f6766-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f6766-204">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="f6766-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f6766-205">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f6766-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f6766-206">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f6766-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f6766-207">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f6766-207">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f6766-208">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="f6766-208">Special Thanks To</span></span>

<span data-ttu-id="f6766-209">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="f6766-209">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f6766-210">Der Lead Reviewer für dieses Tutorial war Dennis Patterson.</span><span class="sxs-lookup"><span data-stu-id="f6766-210">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="f6766-211">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="f6766-211">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f6766-212">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f6766-212">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="f6766-213">Weiter</span><span class="sxs-lookup"><span data-stu-id="f6766-213">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)
