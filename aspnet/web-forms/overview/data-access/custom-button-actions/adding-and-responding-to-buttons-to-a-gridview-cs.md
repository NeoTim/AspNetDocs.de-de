---
uid: web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
title: Hinzufügen von und reagieren auf Schaltflächen zu einer GridView-Ansicht (c#) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial betrachten wir das Hinzufügen von benutzerdefinierten Schaltflächen, eine Vorlage und die Felder des ein GridView- oder DetailsView-Steuerelement. Insbesondere werden wir Buildspeicherort...
ms.author: riande
ms.date: 09/13/2006
ms.assetid: 128fdb5f-4c5e-42b5-b485-f3aee90a8e38
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs
msc.type: authoredcontent
ms.openlocfilehash: 3a081b1633e7762560aea68500f5bd614e4fb5a6
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/01/2019
ms.locfileid: "57035877"
---
<a name="adding-and-responding-to-buttons-to-a-gridview-c"></a><span data-ttu-id="6a213-104">Hinzufügen von Schaltflächen zu einem GridView-Steuerelement und Zuweisen von Funktionen für diese Schaltflächen (C#)</span><span class="sxs-lookup"><span data-stu-id="6a213-104">Adding and Responding to Buttons to a GridView (C#)</span></span>
====================
<span data-ttu-id="6a213-105">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="6a213-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="6a213-106">[Beispiel-App herunter](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) oder [PDF-Datei herunterladen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="6a213-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_28_CS.exe) or [Download PDF](adding-and-responding-to-buttons-to-a-gridview-cs/_static/datatutorial28cs1.pdf)</span></span>

> <span data-ttu-id="6a213-107">In diesem Tutorial betrachten wir das Hinzufügen von benutzerdefinierten Schaltflächen, eine Vorlage und die Felder des ein GridView- oder DetailsView-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="6a213-107">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="6a213-108">Insbesondere erstellen wir eine Schnittstelle mit einem FormView-Steuerelement, das dem Benutzer ermöglicht, über die Lieferanten Seite.</span><span class="sxs-lookup"><span data-stu-id="6a213-108">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span>


## <a name="introduction"></a><span data-ttu-id="6a213-109">Einführung</span><span class="sxs-lookup"><span data-stu-id="6a213-109">Introduction</span></span>

<span data-ttu-id="6a213-110">Während viele Berichterstellungsszenarien schreibgeschützten Zugriff auf die Berichtsdaten enthalten, ist es nicht ungewöhnlich, dass Berichte die Möglichkeit zum Ausführen von Aktionen auf Grundlage von angezeigten Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="6a213-110">While many reporting scenarios involve read-only access to the report data, it's not uncommon for reports to include the ability to perform actions based upon the data displayed.</span></span> <span data-ttu-id="6a213-111">In der Regel dadurch beim Hinzufügen einer Schaltfläche, ImageButton Web oder LinkButton-Steuerelement mit jeder Datensatz im Bericht angezeigt, die beim Klicken auf ein Postback auslöst und serverseitigen Code aufruft.</span><span class="sxs-lookup"><span data-stu-id="6a213-111">Typically this involved adding a Button, LinkButton, or ImageButton Web control with each record displayed in the report that, when clicked, causes a postback and invokes some server-side code.</span></span> <span data-ttu-id="6a213-112">Bearbeiten und Löschen von Daten auf Basis von Datensätzen ist das häufigste Beispiel.</span><span class="sxs-lookup"><span data-stu-id="6a213-112">Editing and deleting the data on a record-by-record basis is the most common example.</span></span> <span data-ttu-id="6a213-113">In der Tat wie wir gesehen haben, beginnend mit der [Übersicht der einfügen, aktualisieren und Löschen von Daten](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) Tutorial, bearbeiten und Löschen von ist so gängig, dass solche Funktionen ohne die GridView, DetailsView oder FormView-Steuerelemente unterstützt die für eine einzige Codezeile schreiben müssen.</span><span class="sxs-lookup"><span data-stu-id="6a213-113">In fact, as we saw starting with the [Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, editing and deleting is so common that the GridView, DetailsView, and FormView controls can support such functionality without the need for writing a single line of code.</span></span>

<span data-ttu-id="6a213-114">Darüber hinaus bearbeiten und Löschen von Schaltflächen, die GridView, DetailsView und FormView Steuerelemente können auch enthalten Schaltflächen, LinkButtons oder ImageButtons, führen Sie durch Klicken auf eine benutzerdefinierte serverseitige Logik.</span><span class="sxs-lookup"><span data-stu-id="6a213-114">In addition to Edit and Delete buttons, the GridView, DetailsView, and FormView controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="6a213-115">In diesem Tutorial betrachten wir das Hinzufügen von benutzerdefinierten Schaltflächen, eine Vorlage und die Felder des ein GridView- oder DetailsView-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="6a213-115">In this tutorial we'll look at how to add custom buttons, both to a template and to the fields of a GridView or DetailsView control.</span></span> <span data-ttu-id="6a213-116">Insbesondere erstellen wir eine Schnittstelle mit einem FormView-Steuerelement, das dem Benutzer ermöglicht, über die Lieferanten Seite.</span><span class="sxs-lookup"><span data-stu-id="6a213-116">In particular, we'll build an interface that has a FormView that allows the user to page through the suppliers.</span></span> <span data-ttu-id="6a213-117">Für einen bestimmten Lieferanten wird die FormView Informationen zu den Lieferanten zusammen mit einer Schaltfläche-Websteuerelement angezeigt, die, wenn geklickt haben, alle ihre zugeordneten Produkte werden als markieren nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6a213-117">For a given supplier, the FormView will show information about the supplier along with a Button Web control that, if clicked, will mark all of their associated products as discontinued.</span></span> <span data-ttu-id="6a213-118">Darüber hinaus enthält einer GridView-Ansicht dieser Produkte, die von den ausgewählten Lieferanten bereitgestellt werden, in dem jede Zeile mit Preis erhöhen und Discount Preis Schaltflächen, die, wenn geklickt haben, erhöhen oder des Produkts reduzieren `UnitPrice` um 10 % (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="6a213-118">Additionally, a GridView lists those products provided by the selected supplier, with each row containing Increase Price and Discount Price Buttons that, if clicked, raise or reduce the product's `UnitPrice` by 10% (see Figure 1).</span></span>


<span data-ttu-id="6a213-119">[![FormView und GridView enthalten Sie Schaltflächen, die benutzerdefinierte Aktionen ausführen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-119">[![Both the FormView and GridView Contain Buttons That Perform Custom Actions](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image2.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image1.png)</span></span>

<span data-ttu-id="6a213-120">**Abbildung 1**: Sowohl die FormView und GridView enthalten Schaltflächen, führen Sie benutzerdefinierte Aktionen ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-120">**Figure 1**: Both the FormView and GridView Contain Buttons That Perform Custom Actions ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image3.png))</span></span>


## <a name="step-1-adding-the-button-tutorial-web-pages"></a><span data-ttu-id="6a213-121">Schritt 1: Hinzufügen der Schaltfläche Tutorial von Webseiten</span><span class="sxs-lookup"><span data-stu-id="6a213-121">Step 1: Adding the Button Tutorial Web Pages</span></span>

<span data-ttu-id="6a213-122">Bevor wir uns, wie befassen Sie eine benutzerdefinierten Schaltflächen hinzufügen, sehen wir uns einen Moment Zeit, um die ASP.NET-Seiten in unserem Websiteprojekt zu erstellen, die wir für dieses Tutorial benötigen.</span><span class="sxs-lookup"><span data-stu-id="6a213-122">Before we look at how to add a custom buttons, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="6a213-123">Starten, indem Sie einen neuen Ordner namens hinzufügen `CustomButtons`.</span><span class="sxs-lookup"><span data-stu-id="6a213-123">Start by adding a new folder named `CustomButtons`.</span></span> <span data-ttu-id="6a213-124">Fügen Sie die folgenden beiden ASP.NET-Seiten in diesen Ordner, um sicherzustellen, ordnen Sie jeder Seite mit den `Site.master` Masterseite:</span><span class="sxs-lookup"><span data-stu-id="6a213-124">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`


![Fügen Sie die ASP.NET-Seiten für die benutzerdefinierten Schaltflächen-bezogene-Lernprogramme](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image4.png)

<span data-ttu-id="6a213-126">**Abbildung 2**: Fügen Sie die ASP.NET-Seiten für die benutzerdefinierten Schaltflächen-bezogene-Lernprogramme</span><span class="sxs-lookup"><span data-stu-id="6a213-126">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>


<span data-ttu-id="6a213-127">Wie in den anderen Ordnern `Default.aspx` in die `CustomButtons` Ordner werden in den Tutorials im Abschnitt aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="6a213-127">Like in the other folders, `Default.aspx` in the `CustomButtons` folder will list the tutorials in its section.</span></span> <span data-ttu-id="6a213-128">Bedenken Sie, dass die `SectionLevelTutorialListing.ascx` Benutzersteuerelement stellt diese Funktionalität bereit.</span><span class="sxs-lookup"><span data-stu-id="6a213-128">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="6a213-129">Aus diesem Grund fügen dieses Benutzersteuerelement zu `Default.aspx` durch Ziehen aus dem Projektmappen-Explorer auf der Seite Entwurfsansicht.</span><span class="sxs-lookup"><span data-stu-id="6a213-129">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>


<span data-ttu-id="6a213-130">[![Fügen Sie das SectionLevelTutorialListing.ascx-Benutzersteuerelement an "default.aspx"](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-130">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image6.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image5.png)</span></span>

<span data-ttu-id="6a213-131">**Abbildung 3**: Hinzufügen der `SectionLevelTutorialListing.ascx` Benutzersteuerelement `Default.aspx` ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-131">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image7.png))</span></span>


<span data-ttu-id="6a213-132">Abschließend fügen Sie die Seiten als Einträge der `Web.sitemap` Datei.</span><span class="sxs-lookup"><span data-stu-id="6a213-132">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="6a213-133">Fügen Sie das folgende Markup insbesondere nach der Paginierung und Sortierung `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="6a213-133">Specifically, add the following markup after the Paging and Sorting `<siteMapNode>`:</span></span>

[!code-xml[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample1.xml)]

<span data-ttu-id="6a213-134">Nach der Aktualisierung `Web.sitemap`, können Sie die Lernprogramme-Website über einen Browser anzeigen.</span><span class="sxs-lookup"><span data-stu-id="6a213-134">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="6a213-135">Klicken Sie im Menü auf der linken Seite enthält jetzt Elemente für das Bearbeiten, einfügen und löschen die Lernprogramme.</span><span class="sxs-lookup"><span data-stu-id="6a213-135">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Die Sitemap enthält jetzt den Eintrag für das benutzerdefinierte Schaltflächen-Tutorial](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image8.png)

<span data-ttu-id="6a213-137">**Abbildung 4**: Die Sitemap enthält jetzt den Eintrag für das benutzerdefinierte Schaltflächen-Tutorial</span><span class="sxs-lookup"><span data-stu-id="6a213-137">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>


## <a name="step-2-adding-a-formview-that-lists-the-suppliers"></a><span data-ttu-id="6a213-138">Schritt 2: Hinzufügen von einem FormView-Steuerelement, in der die Lieferanten aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="6a213-138">Step 2: Adding a FormView that Lists the Suppliers</span></span>

<span data-ttu-id="6a213-139">Erste Schritte in diesem Tutorial durch Hinzufügen von FormView, der die Lieferanten auflistet.</span><span class="sxs-lookup"><span data-stu-id="6a213-139">Let's get started with this tutorial by adding the FormView that lists the suppliers.</span></span> <span data-ttu-id="6a213-140">Wie in der Einleitung erwähnt, können diese FormView-Steuerelement den Benutzer auf der Seite über die Lieferanten, Produkte von Lieferanten in einer GridView-Ansicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6a213-140">As discussed in the Introduction, this FormView will allow the user to page through the suppliers, showing the products provided by the supplier in a GridView.</span></span> <span data-ttu-id="6a213-141">Darüber hinaus enthält diese FormView-Steuerelement eine Schaltfläche, die beim Klicken auf alle den Namen des Lieferanten als markiert nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6a213-141">Additionally, this FormView will include a Button that, when clicked, will mark all of the supplier's products as discontinued.</span></span> <span data-ttu-id="6a213-142">Bevor wir uns darum kümmern, die benutzerdefinierte Schaltfläche zu FormView hinzufügen, lassen Sie uns zuerst erstellen Sie einfach FormView, dass die Lieferanteninformationen angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="6a213-142">Before we concern ourselves with adding the custom button to the FormView, let's first just create the FormView so that it displays the supplier information.</span></span>

<span data-ttu-id="6a213-143">Öffnen Sie zunächst die `CustomButtons.aspx` auf der Seite die `CustomButtons` Ordner.</span><span class="sxs-lookup"><span data-stu-id="6a213-143">Start by opening the `CustomButtons.aspx` page in the `CustomButtons` folder.</span></span> <span data-ttu-id="6a213-144">Fügen Sie einem FormView-Steuerelement auf der Seite durch Ziehen aus der Toolbox in den Designer und den Satz der `ID` Eigenschaft `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="6a213-144">Add a FormView to the page by dragging it from the Toolbox onto the Designer and set its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="6a213-145">Aus der FormView Smarttag, deaktivieren Sie zum Erstellen einer neuen, mit dem Namen "ObjectDataSource" `SuppliersDataSource`.</span><span class="sxs-lookup"><span data-stu-id="6a213-145">From the FormView's smart tag, opt to create a new ObjectDataSource named `SuppliersDataSource`.</span></span>


<span data-ttu-id="6a213-146">[![Erstellen Sie eine neue, mit dem Namen SuppliersDataSource "ObjectDataSource"](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-146">[![Create a New ObjectDataSource Named SuppliersDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image10.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image9.png)</span></span>

<span data-ttu-id="6a213-147">**Abbildung 5**: Erstellen Sie eine neue "ObjectDataSource" mit dem Namen `SuppliersDataSource` ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-147">**Figure 5**: Create a New ObjectDataSource Named `SuppliersDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image11.png))</span></span>


<span data-ttu-id="6a213-148">Diese neue "ObjectDataSource" So konfigurieren, dass abgefragt, die von der `SuppliersBLL` Klasse `GetSuppliers()` Methode (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="6a213-148">Configure this new ObjectDataSource such that it queries from the `SuppliersBLL` class's `GetSuppliers()` method (see Figure 6).</span></span> <span data-ttu-id="6a213-149">Da diese FormView keine Schnittstelle bietet für die Aktualisierung der Lieferanteninformationen auswählen, dass die (None) aus der Dropdown-Liste auf der Registerkarte "UPDATE"-option.</span><span class="sxs-lookup"><span data-stu-id="6a213-149">Since this FormView does not provide an interface for updating the supplier information, select the (None) option from the drop-down list in the UPDATE tab.</span></span>


<span data-ttu-id="6a213-150">[![Konfigurieren der Datenquelle zur Verwendung der Klasse SuppliersBLL s GetSuppliers()-Methode](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-150">[![Configure the Data Source to use the SuppliersBLL Class s GetSuppliers() Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image13.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image12.png)</span></span>

<span data-ttu-id="6a213-151">**Abbildung 6**: Konfigurieren der Datenquelle verwendet die `SuppliersBLL` Klasse `GetSuppliers()` Methode ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-151">**Figure 6**: Configure the Data Source to use the `SuppliersBLL` Class's `GetSuppliers()` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image14.png))</span></span>


<span data-ttu-id="6a213-152">Nach der Konfiguration dem ObjectDataSource-Steuerelement, generiert Visual Studio ein `InsertItemTemplate`, `EditItemTemplate`, und `ItemTemplate` für das FormView-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="6a213-152">After configuring the ObjectDataSource, Visual Studio will generate an `InsertItemTemplate`, `EditItemTemplate`, and `ItemTemplate` for the FormView.</span></span> <span data-ttu-id="6a213-153">Entfernen Sie die `InsertItemTemplate` und `EditItemTemplate` und Ändern der `ItemTemplate` , damit nur die Lieferanten Unternehmen Namen und die Telefonnummer Nummer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6a213-153">Remove the `InsertItemTemplate` and `EditItemTemplate` and modify the `ItemTemplate` so that it displays just the supplier's company name and phone number.</span></span> <span data-ttu-id="6a213-154">Pagingunterstützung für das FormView schließlich aktivieren, indem Sie das Kontrollkästchen für die Auslagerungsdatei Aktivieren von smart Tag (oder durch Festlegen seiner `AllowPaging` Eigenschaft `True`).</span><span class="sxs-lookup"><span data-stu-id="6a213-154">Finally, turn on paging support for the FormView by checking the Enable Paging checkbox from its smart tag (or by setting its `AllowPaging` property to `True`).</span></span> <span data-ttu-id="6a213-155">Nach diesen Änderungen sollte deklaratives Markup Ihrer Seite etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="6a213-155">After these changes your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample2.aspx)]

<span data-ttu-id="6a213-156">Abbildung 7 zeigt die Seite CustomButtons.aspx, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6a213-156">Figure 7 shows the CustomButtons.aspx page when viewed through a browser.</span></span>


<span data-ttu-id="6a213-157">[![Die FormView aufgeführt, die CompanyName und Phone-Felder des aktuell ausgewählten Lieferanten](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-157">[![The FormView Lists the CompanyName and Phone Fields from the Currently Selected Supplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image16.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image15.png)</span></span>

<span data-ttu-id="6a213-158">**Abbildung 7**: Das FormView-Listen der `CompanyName` und `Phone` Felder aus den derzeit ausgewählten Lieferanten ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-158">**Figure 7**: The FormView Lists the `CompanyName` and `Phone` Fields from the Currently Selected Supplier ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image17.png))</span></span>


## <a name="step-3-adding-a-gridview-that-lists-the-selected-suppliers-products"></a><span data-ttu-id="6a213-159">Schritt 3: Hinzufügen einer GridView-Ansicht, die den ausgewählten Lieferanten Produkte aufgeführt sind</span><span class="sxs-lookup"><span data-stu-id="6a213-159">Step 3: Adding a GridView that Lists the Selected Supplier's Products</span></span>

<span data-ttu-id="6a213-160">Bevor wir die Beenden alle Produkte-Schaltfläche "hinzufügen" der FormView Vorlage, lassen Sie uns zuerst eine GridView unter das FormView-Steuerelement hinzufügen, die Produkte von den ausgewählten Lieferanten aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="6a213-160">Before we add the Discontinue All Products Button to the FormView's template, let's first add a GridView beneath the FormView that lists the products provided by the selected supplier.</span></span> <span data-ttu-id="6a213-161">Legen Sie zu diesem Zweck werden Hinzufügen einer GridView-Ansicht auf der Seite, die `ID` Eigenschaft `SuppliersProducts`, und fügen Sie eine neue, mit dem Namen "ObjectDataSource" `SuppliersProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="6a213-161">To accomplish this, add a GridView to the page, set its `ID` property to `SuppliersProducts`, and add a new ObjectDataSource named `SuppliersProductsDataSource`.</span></span>


<span data-ttu-id="6a213-162">[![Erstellen Sie eine neue, mit dem Namen SuppliersProductsDataSource "ObjectDataSource"](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-162">[![Create a New ObjectDataSource Named SuppliersProductsDataSource](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image19.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image18.png)</span></span>

<span data-ttu-id="6a213-163">**Abbildung 8**: Erstellen Sie eine neue "ObjectDataSource" mit dem Namen `SuppliersProductsDataSource` ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-163">**Figure 8**: Create a New ObjectDataSource Named `SuppliersProductsDataSource` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image20.png))</span></span>


<span data-ttu-id="6a213-164">Konfigurieren Sie diese "ObjectDataSource" zur Verwendung der ProductsBLL-Klasse `GetProductsBySupplierID(supplierID)` Methode (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="6a213-164">Configure this ObjectDataSource to use the ProductsBLL class's `GetProductsBySupplierID(supplierID)` method (see Figure 9).</span></span> <span data-ttu-id="6a213-165">Während dieser GridView werden für den Preis eines Produkts angepasst werden kann, verwenden sie nicht die integrierte bearbeiten oder Löschen von Funktionen aus der GridView.</span><span class="sxs-lookup"><span data-stu-id="6a213-165">While this GridView will allow for a product's price to be adjusted, it won't be using the built-in editing or deleting features from the GridView.</span></span> <span data-ttu-id="6a213-166">Aus diesem Grund können wir die Dropdown-Liste (keine) für dem ObjectDataSource-Steuerelement der Update-, INSERT- und Löschen von Registerkarten festlegen.</span><span class="sxs-lookup"><span data-stu-id="6a213-166">Therefore, we can set the drop-down list to (None) for the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span>


<span data-ttu-id="6a213-167">[![Konfigurieren der Datenquelle zur Verwendung der Klasse ProductsBLL s GetProductsBySupplierID(supplierID)-Methode](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-167">[![Configure the Data Source to use the ProductsBLL Class s GetProductsBySupplierID(supplierID) Method](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image22.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image21.png)</span></span>

<span data-ttu-id="6a213-168">**Abbildung 9**: Konfigurieren der Datenquelle verwendet die `ProductsBLL` Klasse `GetProductsBySupplierID(supplierID)` Methode ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-168">**Figure 9**: Configure the Data Source to use the `ProductsBLL` Class's `GetProductsBySupplierID(supplierID)` Method ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image23.png))</span></span>


<span data-ttu-id="6a213-169">Da die `GetProductsBySupplierID(supplierID)` -Methode akzeptiert einen Eingabeparameter, der ObjectDataSource-Steuerelement-Assistent fordert uns für die Quelle der Wert dieses Parameters.</span><span class="sxs-lookup"><span data-stu-id="6a213-169">Since the `GetProductsBySupplierID(supplierID)` method accepts an input parameter, the ObjectDataSource wizard prompts us for the source of this parameter value.</span></span> <span data-ttu-id="6a213-170">Übergeben der `SupplierID` FormView Wert, der Parameter-Quellliste Dropdown-Steuerelement und die ControlID Dropdown-Liste festgelegt `Suppliers` (die ID des FormView, die in Schritt2 erstellt wird).</span><span class="sxs-lookup"><span data-stu-id="6a213-170">To pass in the `SupplierID` value from the FormView, set the Parameter source drop-down list to Control and the ControlID drop-down list to `Suppliers` (the ID of the FormView created in Step 2).</span></span>


<span data-ttu-id="6a213-171">[![Anzugeben Sie, dass die Lieferanten FormView-Steuerelement durch die SupplierID Parameter stammen sollen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-171">[![Indicate that the supplierID Parameter Should Come from the Suppliers FormView Control](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image25.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image24.png)</span></span>

<span data-ttu-id="6a213-172">**Abbildung 10**: Angeben, die die *`supplierID`* Parameter stammen soll die `Suppliers` FormView-Steuerelement ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-172">**Figure 10**: Indicate that the *`supplierID`* Parameter Should Come from the `Suppliers` FormView Control ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image26.png))</span></span>


<span data-ttu-id="6a213-173">Nach Abschluss des Assistenten "ObjectDataSource" wird die GridView eine BoundField- oder die CheckBoxField für die einzelnen Datenfelder des Produkts enthalten.</span><span class="sxs-lookup"><span data-stu-id="6a213-173">After completing the ObjectDataSource wizard, the GridView will contain a BoundField or CheckBoxField for each of the product's data fields.</span></span> <span data-ttu-id="6a213-174">Wir reduzieren diese anzuzeigenden lediglich die `ProductName` und `UnitPrice` BoundFields zusammen mit der `Discontinued` CheckBoxField; lassen Sie uns darüber hinaus zu formatieren der `UnitPrice` BoundField so, dass der Text als Währung formatiert ist.</span><span class="sxs-lookup"><span data-stu-id="6a213-174">Let's trim this down to show just the `ProductName` and `UnitPrice` BoundFields along with the `Discontinued` CheckBoxField; furthermore, let's format the `UnitPrice` BoundField such that its text is formatted as a currency.</span></span> <span data-ttu-id="6a213-175">Ihre GridView und `SuppliersProductsDataSource` deklarative Markup des ObjectDataSource-Steuerelements sieht ähnlich wie das folgende Markup:</span><span class="sxs-lookup"><span data-stu-id="6a213-175">Your GridView and `SuppliersProductsDataSource` ObjectDataSource's declarative markup should look similar to the following markup:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample3.aspx)]

<span data-ttu-id="6a213-176">An diesem Punkt zeigt unser Tutorial ein Master-/Detail-Berichts, gestattet es dem Benutzer ein Lieferant FormView oben ausgewählt und Produkte von Lieferanten über GridView im unteren Bereich anzeigen.</span><span class="sxs-lookup"><span data-stu-id="6a213-176">At this point our tutorial displays a master/details report, allowing the user to pick a supplier from the FormView at the top and to view the products provided by that supplier through the GridView at the bottom.</span></span> <span data-ttu-id="6a213-177">Abbildung 11 zeigt einen Screenshot der Seite, bei der Auswahl der Lieferant Tokyo Traders aus der FormView-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="6a213-177">Figure 11 shows a screen shot of this page when selecting the Tokyo Traders supplier from the FormView.</span></span>


<span data-ttu-id="6a213-178">[![Die ausgewählten Lieferanten-s-Produkte werden in den GridView-Ansicht angezeigt.](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-178">[![The Selected Supplier s Products are Displayed in the GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image28.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image27.png)</span></span>

<span data-ttu-id="6a213-179">**Abbildung 11**: Die ausgewählten Lieferanten Produkte werden in den GridView-Ansicht angezeigt ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-179">**Figure 11**: The Selected Supplier's Products are Displayed in the GridView ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image29.png))</span></span>


## <a name="step-4-creating-dal-and-bll-methods-to-discontinue-all-products-for-a-supplier"></a><span data-ttu-id="6a213-180">Schritt 4: Erstellen der DAL und BLL-Methoden, um alle Produkte für einen Lieferanten beenden</span><span class="sxs-lookup"><span data-stu-id="6a213-180">Step 4: Creating DAL and BLL Methods to Discontinue All Products for a Supplier</span></span>

<span data-ttu-id="6a213-181">Bevor wir das FormView-Steuerelement eine Schaltfläche hinzufügen können, die beim Klicken auf beendet alle Produkte an den Lieferanten, müssen wir zuerst auf das Hinzufügen einer Methode für die DAL und BLL, der diese Aktion ausführt.</span><span class="sxs-lookup"><span data-stu-id="6a213-181">Before we can add a Button to the FormView that, when clicked, discontinues all of the supplier's products, we first need to add a method to both the DAL and BLL that performs this action.</span></span> <span data-ttu-id="6a213-182">Insbesondere diese Methode erhält `DiscontinueAllProductsForSupplier(supplierID)`.</span><span class="sxs-lookup"><span data-stu-id="6a213-182">In particular, this method will be named `DiscontinueAllProductsForSupplier(supplierID)`.</span></span> <span data-ttu-id="6a213-183">Wenn das FormView Schaltfläche geklickt wird, werden wir diese Methode in der Geschäftslogikebene übergeben aufrufen, in der ausgewählten Lieferanten `SupplierID`; die BLL aufgerufen wird, klicken Sie dann nach unten um die entsprechenden Daten von Zugriffsschicht-Methode, die Ausstellen einer `UPDATE` Anweisung in der Datenbank beendet, die die angegebenen des Lieferanten.</span><span class="sxs-lookup"><span data-stu-id="6a213-183">When the FormView's Button is clicked, we'll invoke this method in the Business Logic Layer, passing in the selected supplier's `SupplierID`; the BLL will then call down to the corresponding Data Access Layer method, which will issue an `UPDATE` statement to the database that discontinues the specified supplier's products.</span></span>

<span data-ttu-id="6a213-184">Wie wir in unserem vorherigen Tutorials abgeschlossen haben, verwenden wir einen Bottom-Up-Ansatz, erstellen die DAL-Methode, klicken Sie dann die BLL-Methode, und implementieren die Funktionalität zum Schluss auf der ASP.NET-Seite ab.</span><span class="sxs-lookup"><span data-stu-id="6a213-184">As we have done in our previous tutorials, we'll use a bottom-up approach, starting with creating the DAL method, then the BLL method, and finally implementing the functionality in the ASP.NET page.</span></span> <span data-ttu-id="6a213-185">Öffnen der `Northwind.xsd` typisierte DataSet in der `App_Code/DAL` Ordner und eine neue Methode zum Hinzufügen der `ProductsTableAdapter` (mit der rechten Maustaste auf die `ProductsTableAdapter` , und wählen Sie die Abfrage hinzufügen).</span><span class="sxs-lookup"><span data-stu-id="6a213-185">Open the `Northwind.xsd` Typed DataSet in the `App_Code/DAL` folder and add a new method to the `ProductsTableAdapter` (right-click on the `ProductsTableAdapter` and choose Add Query).</span></span> <span data-ttu-id="6a213-186">Auf diese Weise wird der TableAdapter-Abfrage-Konfigurations-Assistent, anzuzeigen, in dem wir durch den Prozess des Hinzufügens der neuen Methode führt.</span><span class="sxs-lookup"><span data-stu-id="6a213-186">Doing so will bring up the TableAdapter Query Configuration wizard, which walks us through the process of adding the new method.</span></span> <span data-ttu-id="6a213-187">Zunächst gibt an, dass die DAL-Methode eine Ad-hoc-SQL-Anweisung verwenden.</span><span class="sxs-lookup"><span data-stu-id="6a213-187">Start by indicating that our DAL method will use an ad-hoc SQL statement.</span></span>


<span data-ttu-id="6a213-188">[![Erstellen Sie die DAL-Methode, die mit Ad-hoc-SQL-Anweisungen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-188">[![Create the DAL Method Using an Ad-Hoc SQL Statement](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image31.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image30.png)</span></span>

<span data-ttu-id="6a213-189">**Abbildung 12**: Exemplarische Vorgehensweise: Erstellen von der DAL-Methode mit einer Ad-hoc-SQL-Anweisung ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-189">**Figure 12**: Create the DAL Method Using an Ad-Hoc SQL Statement ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image32.png))</span></span>


<span data-ttu-id="6a213-190">Als Nächstes fordert der Assistent, mit uns, welche Art von Abfrage zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="6a213-190">Next, the wizard prompts us as to what type of query to create.</span></span> <span data-ttu-id="6a213-191">Da die `DiscontinueAllProductsForSupplier(supplierID)` Methode müssen Sie aktualisieren die `Products` Datenbanktabelle, Festlegen der `Discontinued` 1 für alle Produkte, die bereitgestellt werden, durch das angegebene Feld *`supplierID`*, müssen wir eine Abfrage erstellen, die Daten aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="6a213-191">Since the `DiscontinueAllProductsForSupplier(supplierID)` method will need to update the `Products` database table, setting the `Discontinued` field to 1 for all products provided by the specified *`supplierID`*, we need to create a query that updates data.</span></span>


<span data-ttu-id="6a213-192">[![Wählen Sie den Typ der UPDATE-Abfrage](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-192">[![Choose the UPDATE Query Type](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image34.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image33.png)</span></span>

<span data-ttu-id="6a213-193">**Abbildung 13**: Wählen Sie den Typ der UPDATE-Abfrage ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-193">**Figure 13**: Choose the UPDATE Query Type ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image35.png))</span></span>


<span data-ttu-id="6a213-194">Im nächsten Assistentenbildschirm bietet der TableAdapter vorhandenen `UPDATE` -Anweisung, die jedes der Felder im definierten aktualisiert die `Products` DataTable.</span><span class="sxs-lookup"><span data-stu-id="6a213-194">The next wizard screen provides the TableAdapter's existing `UPDATE` statement, which updates each of the fields defined in the `Products` DataTable.</span></span> <span data-ttu-id="6a213-195">Ersetzen Sie den Text dieser Abfrage mit der folgenden Anweisung:</span><span class="sxs-lookup"><span data-stu-id="6a213-195">Replace this query text with the following statement:</span></span>

[!code-sql[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample4.sql)]

<span data-ttu-id="6a213-196">Nach der Eingabe dieser Abfrage ein, und klicken Sie auf Weiter, der letzte Assistentenbildschirm gefragt werden, für die Namen der neuen Methode `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="6a213-196">After entering this query and clicking Next, the last wizard screen asks for the new method's name use `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="6a213-197">Schließen Sie den Assistenten, indem Sie auf die Schaltfläche "Fertig stellen".</span><span class="sxs-lookup"><span data-stu-id="6a213-197">Complete the wizard by clicking the Finish button.</span></span> <span data-ttu-id="6a213-198">Bei der Rückkehr zum DataSet-Designer sollte eine neue Methode in der `ProductsTableAdapter` mit dem Namen `DiscontinueAllProductsForSupplier(@SupplierID)`.</span><span class="sxs-lookup"><span data-stu-id="6a213-198">Upon returning to the DataSet Designer you should see a new method in the `ProductsTableAdapter` named `DiscontinueAllProductsForSupplier(@SupplierID)`.</span></span>


<span data-ttu-id="6a213-199">[![Name der neuen DAL-Methode DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-199">[![Name the New DAL Method DiscontinueAllProductsForSupplier](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image37.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image36.png)</span></span>

<span data-ttu-id="6a213-200">**Abbildung 14**: Benennen Sie die neuen DAL `DiscontinueAllProductsForSupplier` ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-200">**Figure 14**: Name the New DAL Method `DiscontinueAllProductsForSupplier` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image38.png))</span></span>


<span data-ttu-id="6a213-201">Mit der `DiscontinueAllProductsForSupplier(supplierID)` Methode, die in der Datenzugriffsebene erstellt werden, unsere nächste Aufgabe ist die Erstellung der `DiscontinueAllProductsForSupplier(supplierID)` -Methode in der Geschäftslogikebene.</span><span class="sxs-lookup"><span data-stu-id="6a213-201">With the `DiscontinueAllProductsForSupplier(supplierID)` method created in the Data Access Layer, our next task is to create the `DiscontinueAllProductsForSupplier(supplierID)` method in the Business Logic Layer.</span></span> <span data-ttu-id="6a213-202">Öffnen Sie dazu die `ProductsBLL` Klassendatei, und fügen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6a213-202">To accomplish this, open the `ProductsBLL` class file and add the following:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample5.cs)]

<span data-ttu-id="6a213-203">Diese Methode ruft einfach nach unten, um die `DiscontinueAllProductsForSupplier(supplierID)` -Methode in der die DAL aus, übergibt der bereitgestellten *`supplierID`* Parameterwert.</span><span class="sxs-lookup"><span data-stu-id="6a213-203">This method simply calls down to the `DiscontinueAllProductsForSupplier(supplierID)` method in the DAL, passing along the provided *`supplierID`* parameter value.</span></span> <span data-ttu-id="6a213-204">Würden alle Geschäftsregeln, die nur zulässig, Produkten unter bestimmten Umständen eingestellt werden, sollten diese Regeln, in die BLL implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="6a213-204">If there were any business rules that only allowed a supplier's products to be discontinued under certain circumstances, those rules should be implemented here, in the BLL.</span></span>

> [!NOTE]
> <span data-ttu-id="6a213-205">Im Gegensatz zu den `UpdateProduct` -Überladungen in die `ProductsBLL` -Klasse, die `DiscontinueAllProductsForSupplier(supplierID)` Methodensignatur enthält keinen der `DataObjectMethodAttribute` Attribut (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span><span class="sxs-lookup"><span data-stu-id="6a213-205">Unlike the `UpdateProduct` overloads in the `ProductsBLL` class, the `DiscontinueAllProductsForSupplier(supplierID)` method signature does not include the `DataObjectMethodAttribute` attribute (`<System.ComponentModel.DataObjectMethodAttribute(System.ComponentModel.DataObjectMethodType.Update, Boolean)>`).</span></span> <span data-ttu-id="6a213-206">Dies verhindert, dass die `DiscontinueAllProductsForSupplier(supplierID)` Methode aus der Dropdownliste das "ObjectDataSource" Konfigurieren von Datenquellen-Assistenten auf der Registerkarte "UPDATE". Ich Ve dieses Attribut weggelassen, da wir aufrufen, werden die `DiscontinueAllProductsForSupplier(supplierID)` Methode direkt von einem Ereignishandler auf unsere ASP.NET-Seite.</span><span class="sxs-lookup"><span data-stu-id="6a213-206">This precludes the `DiscontinueAllProductsForSupplier(supplierID)` method from the ObjectDataSource's Configure Data Source wizard's drop-down list in the UPDATE tab. I ve omitted this attribute because we'll be calling the `DiscontinueAllProductsForSupplier(supplierID)` method directly from an event handler in our ASP.NET page.</span></span>


## <a name="step-5-adding-a-discontinue-all-products-button-to-the-formview"></a><span data-ttu-id="6a213-207">Schritt 5: Hinzufügen einer Schaltfläche "alle Produkte", das FormView-Steuerelement stellt</span><span class="sxs-lookup"><span data-stu-id="6a213-207">Step 5: Adding a Discontinue All Products Button to the FormView</span></span>

<span data-ttu-id="6a213-208">Mit der `DiscontinueAllProductsForSupplier(supplierID)` -Methode in der BLL- und DAL abgeschlossen, wird der letzte Schritt zum Hinzufügen von die Möglichkeit, alle Produkte für den ausgewählten Lieferanten stellt der FormView ein Websteuerelements mit Schaltfläche hinzugefügt `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="6a213-208">With the `DiscontinueAllProductsForSupplier(supplierID)` method in the BLL and DAL complete, the final step for adding the ability to discontinue all products for the selected supplier is to add a Button Web control to the FormView's `ItemTemplate`.</span></span> <span data-ttu-id="6a213-209">Fügen Sie eine solche Schaltfläche unterhalb des Lieferanten-Telefonnummer mit der Text der Schaltfläche, beenden Sie alle Produkte und eine `ID` Eigenschaftswert `DiscontinueAllProductsForSupplier`.</span><span class="sxs-lookup"><span data-stu-id="6a213-209">Let's add such a Button below the supplier's phone number with the button text, Discontinue All Products and an `ID` property value of `DiscontinueAllProductsForSupplier`.</span></span> <span data-ttu-id="6a213-210">Sie können diese Schaltfläche Websteuerelements mit dem Designer hinzufügen, indem Sie auf den Link Vorlagen bearbeiten, in das FormView Smarttag (siehe Abbildung 15), oder direkt über die deklarative Syntax.</span><span class="sxs-lookup"><span data-stu-id="6a213-210">You can add this Button Web control through the Designer by clicking on the Edit Templates link in the FormView's smart tag (see Figure 15), or directly through the declarative syntax.</span></span>


<span data-ttu-id="6a213-211">[![Hinzufügen einer beenden Sie alle Produkte Button-Web-Steuerelements, das FormView-s-ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-211">[![Add a Discontinue All Products Button Web Control to the FormView s ItemTemplate](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image40.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image39.png)</span></span>

<span data-ttu-id="6a213-212">**Abbildung 15**: Fügen Sie ein Beenden aller Produkte Web Schaltflächensteuerelement hinzu der FormView `ItemTemplate` ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-212">**Figure 15**: Add a Discontinue All Products Button Web Control to the FormView's `ItemTemplate` ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image41.png))</span></span>


<span data-ttu-id="6a213-213">Wenn die Schaltfläche geklickt wird, indem Sie einen Benutzer auf ein Postback die Seite erfolgt und der FormView [ `ItemCommand` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="6a213-213">When the Button is clicked by a user visiting the page, a postback ensues and the FormView's [`ItemCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.itemcommand.aspx) fires.</span></span> <span data-ttu-id="6a213-214">Zum Ausführen von benutzerdefinierten Codes als Reaktion auf diese Schaltfläche geklickt wird, können wir einen Ereignishandler für dieses Ereignis erstellen.</span><span class="sxs-lookup"><span data-stu-id="6a213-214">To execute custom code in response to this Button being clicked, we can create an event handler for this event.</span></span> <span data-ttu-id="6a213-215">Zu verstehen, jedoch, die die `ItemCommand` Ereignis wird ausgelöst, wenn *alle* Schaltfläche, ImageButton Web oder LinkButton-Steuerelement innerhalb der FormView-Steuerelement geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="6a213-215">Understand, though, that the `ItemCommand` event fires whenever *any* Button, LinkButton, or ImageButton Web control is clicked within the FormView.</span></span> <span data-ttu-id="6a213-216">Dies bedeutet, dass, wenn der Benutzer von einer Seite zu einem anderen in der FormView-Steuerelement, das `ItemCommand` -Ereignis ausgelöst wird, dasselbe, wenn der Benutzer klickt auf die neu bearbeiten, oder löschen Sie in einem FormView-Steuerelement, das Einfügen, aktualisieren oder Löschen von unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6a213-216">That means that when the user moves from one page to another in the FormView, the `ItemCommand` event fires; same thing when the user clicks New, Edit, or Delete in a FormView that supports inserting, updating, or deleting.</span></span>

<span data-ttu-id="6a213-217">Da die `ItemCommand` ausgelöst wird, unabhängig davon, welche Schaltfläche klicken, wird im Ereignisprotokoll Handler benötigen wir eine Möglichkeit zu bestimmen, ob die Beenden alle Produkte Schaltfläche geklickt wurde, oder wenn es sich um eine andere Schaltfläche war.</span><span class="sxs-lookup"><span data-stu-id="6a213-217">Since the `ItemCommand` fires regardless of what button is clicked, in the event handler we need a way to determine if the Discontinue All Products Button was clicked or if it was some other button.</span></span> <span data-ttu-id="6a213-218">Um dies zu erreichen, können wir des Schaltfläche Websteuerelements festlegen `CommandName` Eigenschaft identifizierende Wert.</span><span class="sxs-lookup"><span data-stu-id="6a213-218">To accomplish this, we can set the Button Web control's `CommandName` property to some identifying value.</span></span> <span data-ttu-id="6a213-219">Wenn die Schaltfläche geklickt wird, dies `CommandName` Wert wird übergeben, in der `ItemCommand` -Ereignishandler ermöglicht uns, zu bestimmen, ob die einstellen Schaltfläche "alle Produkte" die Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="6a213-219">When the Button is clicked, this `CommandName` value is passed into the `ItemCommand` event handler, enabling us to determine whether the Discontinue All Products Button was the button clicked.</span></span> <span data-ttu-id="6a213-220">Legen Sie die Beenden alle Produkte `CommandName` DiscontinueProducts Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="6a213-220">Set the Discontinue All Products Button's `CommandName` property to DiscontinueProducts .</span></span>

<span data-ttu-id="6a213-221">Abschließend verwenden Sie ein Dialogfeld für die clientseitige bestätigen wir sicherstellen, dass der Benutzer möchte die ausgewählten des Lieferanten zu beenden.</span><span class="sxs-lookup"><span data-stu-id="6a213-221">Finally, let's use a client-side confirm dialog box to ensure that the user really wants to discontinue the selected supplier's products.</span></span> <span data-ttu-id="6a213-222">Wie in beschrieben der [Hinzufügen der clientseitigen Bestätigung beim Löschen von](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) Tutorial, kann dies mit etwas JavaScript erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="6a213-222">As we saw in the [Adding Client-Side Confirmation When Deleting](../editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs.md) tutorial, this can be accomplished with a bit of JavaScript.</span></span> <span data-ttu-id="6a213-223">Legen Sie "OnClientClick"-Eigenschaft der Schaltfläche "-Web-Steuerelements insbesondere auf `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span><span class="sxs-lookup"><span data-stu-id="6a213-223">In particular, set the Button Web control's OnClientClick property to `return confirm('This will mark _all_ of this supplier\'s products as discontinued. Are you certain you want to do this?');`</span></span>

<span data-ttu-id="6a213-224">Nach diesen Änderungen sollte das FormView deklarative Syntax wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="6a213-224">After making these changes, the FormView's declarative syntax should look like the following:</span></span>

[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample6.aspx)]

<span data-ttu-id="6a213-225">Als Nächstes erstellen Sie einen Ereignishandler für der FormView `ItemCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="6a213-225">Next, create an event handler for the FormView's `ItemCommand` event.</span></span> <span data-ttu-id="6a213-226">In diesem Ereignishandler müssen wir zunächst überprüfen, ob die Beenden alle Produkte Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="6a213-226">In this event handler we need to first determine whether the Discontinue All Products Button was clicked.</span></span> <span data-ttu-id="6a213-227">Wenn also eine Instanz von erstellt werden soll die `ProductsBLL` Klasse und rufen Sie die `DiscontinueAllProductsForSupplier(supplierID)` Methode und übergeben die `SupplierID` der ausgewählten FormView:</span><span class="sxs-lookup"><span data-stu-id="6a213-227">If so, we want to create an instance of the `ProductsBLL` class and invoke its `DiscontinueAllProductsForSupplier(supplierID)` method, passing in the `SupplierID` of the selected FormView:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample7.cs)]

<span data-ttu-id="6a213-228">Beachten Sie, dass die `SupplierID` des aktuellen ausgewählten Lieferanten in der FormView-Steuerelement kann mit der FormView zugegriffen werden [ `SelectedValue` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span><span class="sxs-lookup"><span data-stu-id="6a213-228">Note that the `SupplierID` of the current selected supplier in the FormView can be accessed using the FormView's [`SelectedValue` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.formview.selectedvalue.aspx).</span></span> <span data-ttu-id="6a213-229">Die `SelectedValue` Eigenschaft zurückgibt, der erste Datenschlüsselwert für den Datensatz in der FormView-Steuerelement angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="6a213-229">The `SelectedValue` property returns the first data key value for the record being displayed in the FormView.</span></span> <span data-ttu-id="6a213-230">Die FormView [ `DataKeyNames` Eigenschaft](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), die Daten, die Felder, die von dem die Daten die Schlüsselwerte abgerufen werden, wodurch auf automatisch festgelegt wurde `SupplierID` von Visual Studio beim Binden von dem ObjectDataSource-Steuerelement an das FormView-Steuerelement in Schritt2.</span><span class="sxs-lookup"><span data-stu-id="6a213-230">The FormView's [`DataKeyNames` property](https://msdn.microsoft.com/system.web.ui.webcontrols.formview.datakeynames.aspx), which indicates the data fields from which the data key values are pulled from, was automatically set to `SupplierID` by Visual Studio when binding the ObjectDataSource to the FormView back in Step 2.</span></span>

<span data-ttu-id="6a213-231">Mit der `ItemCommand` -Ereignishandler erstellt haben, können Sie die Seite zu testen.</span><span class="sxs-lookup"><span data-stu-id="6a213-231">With the `ItemCommand` event handler created, take a moment to test out the page.</span></span> <span data-ttu-id="6a213-232">Navigieren Sie zu der Cooperativa de Quesos "Las Cabras" Lieferanten (Dies ist die fünfte Lieferanten in der FormView-Steuerelement für mich).</span><span class="sxs-lookup"><span data-stu-id="6a213-232">Browse to the Cooperativa de Quesos 'Las Cabras' supplier (it's the fifth supplier in the FormView for me).</span></span> <span data-ttu-id="6a213-233">Dieser Lieferant bietet zwei Produkte, Queso Cabrales und Queso Manchego La Pastora, beide sind *nicht* nicht mehr unterstützt.</span><span class="sxs-lookup"><span data-stu-id="6a213-233">This supplier provides two products, Queso Cabrales and Queso Manchego La Pastora, both of which are *not* discontinued.</span></span>

<span data-ttu-id="6a213-234">Stellen Sie sich vor, dass Cooperativa de Quesos 'Las Cabras' ist nicht mehr im Unternehmen und daher seine Produkte eingestellt werden.</span><span class="sxs-lookup"><span data-stu-id="6a213-234">Imagine that Cooperativa de Quesos 'Las Cabras' has gone out of business and therefore its products are to be discontinued.</span></span> <span data-ttu-id="6a213-235">Klicken Sie auf die Schaltfläche "alle Produkte" einstellen.</span><span class="sxs-lookup"><span data-stu-id="6a213-235">Click the Discontinue All Products Button.</span></span> <span data-ttu-id="6a213-236">Dadurch wird das Dialogfeld "Client-Side bestätigen" angezeigt (siehe Abbildung 16).</span><span class="sxs-lookup"><span data-stu-id="6a213-236">This will display the client-side confirm dialog box (see Figure 16).</span></span>


<span data-ttu-id="6a213-237">[![Cooperativa de Quesos Las Cabras stellt zwei aktiven Produkte](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-237">[![Cooperativa de Quesos Las Cabras Supplies Two Active Products](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image43.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image42.png)</span></span>

<span data-ttu-id="6a213-238">**Abbildung 16**: Cooperativa de Quesos Las Cabras stellt zwei aktiven Produkte ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-238">**Figure 16**: Cooperativa de Quesos Las Cabras Supplies Two Active Products ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image44.png))</span></span>


<span data-ttu-id="6a213-239">Wenn Sie auf "OK", klicken Sie im Dialogfeld die clientseitige bestätigen "klicken, die Übermittlung des Formulars wird fortgesetzt, einen Postback verursacht, in dem der FormView `ItemCommand` Ereignis ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="6a213-239">If you click OK in the client-side confirm dialog box, the form submission will proceed, causing a postback in which the FormView's `ItemCommand` event will fire.</span></span> <span data-ttu-id="6a213-240">Der Ereignishandler, die wir erstellt haben wird ausgeführt, Aufrufen der `DiscontinueAllProductsForSupplier(supplierID)` -Methode und die Queso Cabrales Queso Manchego La Pastora Produkte und ein.</span><span class="sxs-lookup"><span data-stu-id="6a213-240">The event handler we created will then execute, invoking the `DiscontinueAllProductsForSupplier(supplierID)` method and discontinuing both the Queso Cabrales and Queso Manchego La Pastora products.</span></span>

<span data-ttu-id="6a213-241">Wenn Sie den Status der GridView Ansicht deaktiviert haben, die GridView-Steuerelement ist in der zugrunde liegenden Datenspeicher bei jedem Postback erneut gebunden werden und aus diesem Grund wird sofort aktualisiert, um darauf hinzuweisen, dass diese beiden Produkte nicht mehr verwendet werden (siehe Abbildung 17).</span><span class="sxs-lookup"><span data-stu-id="6a213-241">If you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect that these two products are now discontinued (see Figure 17).</span></span> <span data-ttu-id="6a213-242">Wenn Sie jedoch, Sie nicht Ansichtszustand in den GridView-Ansicht deaktiviert haben, müssen Sie manuell die Daten an die GridView zu binden, nachdem diese Änderung vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="6a213-242">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="6a213-243">Um dies zu erreichen, stellen Sie einfach einen Aufruf von GridView `DataBind()` Methode sofort nach dem Aufrufen der `DiscontinueAllProductsForSupplier(supplierID)` Methode.</span><span class="sxs-lookup"><span data-stu-id="6a213-243">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `DiscontinueAllProductsForSupplier(supplierID)` method.</span></span>


<span data-ttu-id="6a213-244">[![Sind nach der Schaltfläche Beenden alle Produkte, die Produkte von Lieferanten s entsprechend aktualisiert](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-244">[![After Clicking the Discontinue All Products Button, the Supplier s Products are Updated Accordingly](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image46.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image45.png)</span></span>

<span data-ttu-id="6a213-245">**Abbildung 17**: Nach der Schaltfläche Beenden alle Produkte, den Namen des Lieferanten werden entsprechend aktualisiert ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-245">**Figure 17**: After Clicking the Discontinue All Products Button, the Supplier's Products are Updated Accordingly ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image47.png))</span></span>


## <a name="step-6-creating-an-updateproduct-overload-in-the-business-logic-layer-for-adjusting-a-products-price"></a><span data-ttu-id="6a213-246">Schritt 6: Erstellen eine Überladung der UpdateProduct in der Geschäftslogikebene für die Anpassung von den Preis eines Produkts</span><span class="sxs-lookup"><span data-stu-id="6a213-246">Step 6: Creating an UpdateProduct Overload in the Business Logic Layer for Adjusting a Product's Price</span></span>

<span data-ttu-id="6a213-247">Wie müssen mit "stellt alle Produkte" in das FormView-Steuerelement, zum Hinzufügen von Schaltflächen für die vergrößert und verkleinert den Preis für ein Produkt in der GridView wir zunächst die entsprechenden Daten von Zugriffsschicht und Business Logic Layer-Methoden hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6a213-247">Like with the Discontinue All Products Button in the FormView, in order to add buttons for increasing and decreasing the price for a product in the GridView we need to first add the appropriate Data Access Layer and Business Logic Layer methods.</span></span> <span data-ttu-id="6a213-248">Da wir bereits über eine Methode, die eine einzelnes Produktzeile in die DAL aktualisiert verfügen, können wir solche Funktionen bereitstellen, indem Sie erstellen eine neue Überladung für die `UpdateProduct` -Methode in der die BLL.</span><span class="sxs-lookup"><span data-stu-id="6a213-248">Since we already have a method that updates a single product row in the DAL, we can provide such functionality by creating a new overload for the `UpdateProduct` method in the BLL.</span></span>

<span data-ttu-id="6a213-249">Die Vergangenheit `UpdateProduct` Überladungen, die in einer Kombination von Produkt Felder als skalare Eingabewerte erstellt haben, und verfügen dann nur die Felder für das angegebene Produkt aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="6a213-249">Our past `UpdateProduct` overloads have taken in some combination of product fields as scalar input values and have then updated just those fields for the specified product.</span></span> <span data-ttu-id="6a213-250">Diese Überladung wird unterscheiden sich geringfügig von diesem Standard- und übergeben Sie stattdessen des produktanforderungen `ProductID` und der Prozentsatz, mit dem Anpassen der `UnitPrice` (im Gegensatz zu übergeben, in der neuen, angepasst `UnitPrice` selbst).</span><span class="sxs-lookup"><span data-stu-id="6a213-250">For this overload we'll vary slightly from this standard and instead pass in the product's `ProductID` and the percentage by which to adjust the `UnitPrice` (as opposed to passing in the new, adjusted `UnitPrice` itself).</span></span> <span data-ttu-id="6a213-251">Dieser Ansatz wird vereinfachen den Code, die wir benötigen, in der Klasse ASP.NET Code-Behind-Seite zu schreiben, da wir nicht zu kümmern, Bestimmen des aktuellen Produkts `UnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="6a213-251">This approach will simplify the code we need to write in the ASP.NET page code-behind class, since we don't have to bother with determining the current product's `UnitPrice`.</span></span>

<span data-ttu-id="6a213-252">Die `UpdateProduct` überladen für unten in diesem Tutorial gezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="6a213-252">The `UpdateProduct` overload for this tutorial is shown below:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample8.cs)]

<span data-ttu-id="6a213-253">Diese Überladung ruft Informationen über das angegebene Produkt über die DAL `GetProductByProductID(productID)` Methode.</span><span class="sxs-lookup"><span data-stu-id="6a213-253">This overload retrieves information about the specified product through the DAL's `GetProductByProductID(productID)` method.</span></span> <span data-ttu-id="6a213-254">Es wird dann geprüft, ob des Produkts `UnitPrice` erhält eine Datenbank `NULL` Wert.</span><span class="sxs-lookup"><span data-stu-id="6a213-254">It then checks to see whether the product's `UnitPrice` is assigned a database `NULL` value.</span></span> <span data-ttu-id="6a213-255">Wenn es sich handelt, kann der Preis bleibt unverändert.</span><span class="sxs-lookup"><span data-stu-id="6a213-255">If it is, the price is left unaltered.</span></span> <span data-ttu-id="6a213-256">Wenn Sie allerdings es ist keine`NULL` `UnitPrice` Wert, der die Methode updates des Produkts `UnitPrice` durch den angegebenen Prozentsatz (`unitPriceAdjustmentPercent`).</span><span class="sxs-lookup"><span data-stu-id="6a213-256">If, however, there is a non-`NULL` `UnitPrice` value, the method updates the product's `UnitPrice` by the specified percent (`unitPriceAdjustmentPercent`).</span></span>

## <a name="step-7-adding-the-increase-and-decrease-buttons-to-the-gridview"></a><span data-ttu-id="6a213-257">Schritt 7: Die Erhöhung und Verringerung der Schaltflächen hinzufügen, an die GridView</span><span class="sxs-lookup"><span data-stu-id="6a213-257">Step 7: Adding the Increase and Decrease Buttons to the GridView</span></span>

<span data-ttu-id="6a213-258">Das GridView (und DetailsView) sowohl eine Auflistung von Feldern bestehen.</span><span class="sxs-lookup"><span data-stu-id="6a213-258">The GridView (and DetailsView) are both made up of a collection of fields.</span></span> <span data-ttu-id="6a213-259">Neben dem BoundFields, CheckBoxFields und von TemplateFields bietet ASP.NET die ButtonField, die, wie der Name schon sagt, wie eine Spalte mit einer Schaltfläche, LinkButton oder ImageButton für jede Zeile gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="6a213-259">In addition to BoundFields, CheckBoxFields, and TemplateFields, ASP.NET includes the ButtonField, which, as its name implies, renders as a column with a Button, LinkButton, or ImageButton for each row.</span></span> <span data-ttu-id="6a213-260">Ähnlich wie das FormView-Steuerelement, auf *alle* innerhalb der GridView Pagingschaltflächen, bearbeiten oder löschen Schaltflächen, Sortierung Schaltflächen und So weiter ein Postback auslöst, und löst des GridView [ `RowCommand` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span><span class="sxs-lookup"><span data-stu-id="6a213-260">Similar to the FormView, clicking *any* button within the GridView paging buttons, Edit or Delete buttons, sorting buttons, and so on causes a postback and raises the GridView's [`RowCommand` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowcommand.aspx).</span></span>

<span data-ttu-id="6a213-261">Die ButtonField verfügt über eine `CommandName` -Eigenschaft, die den angegebenen Wert zuweist, der die Schaltflächen `CommandName` Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="6a213-261">The ButtonField has a `CommandName` property that assigns the specified value to each of its Buttons `CommandName` properties.</span></span> <span data-ttu-id="6a213-262">Wie das FormView-Steuerelement, beispielsweise die `CommandName` Wert wird verwendet, durch die `RowCommand` -Ereignishandler, um zu bestimmen, welche Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="6a213-262">Like with the FormView, the `CommandName` value is used by the `RowCommand` event handler to determine which button was clicked.</span></span>

<span data-ttu-id="6a213-263">Fügen Sie zwei neue ButtonFields an die GridView, eine mit einer Schaltflächentext Preis + 10 % und der andere mit dem Text Preis – 10 %.</span><span class="sxs-lookup"><span data-stu-id="6a213-263">Let's add two new ButtonFields to the GridView, one with a button text Price +10% and the other with the text Price -10%.</span></span> <span data-ttu-id="6a213-264">Um diese ButtonFields hinzuzufügen, klicken Sie auf den Link "Spalten bearbeiten" aus den GridView Smarttag, wählen Sie den Feldtyp ButtonField aus der Liste in der oberen linken Ecke, und klicken Sie auf die Schaltfläche "hinzufügen".</span><span class="sxs-lookup"><span data-stu-id="6a213-264">To add these ButtonFields, click on the Edit Columns link from the GridView's smart tag, select the ButtonField field type from the list in the upper left and click the Add button.</span></span>


![Hinzufügen von zwei ButtonFields an die GridView](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image48.png)

<span data-ttu-id="6a213-266">**Abbildung 18**: Hinzufügen von zwei ButtonFields an die GridView</span><span class="sxs-lookup"><span data-stu-id="6a213-266">**Figure 18**: Add Two ButtonFields to the GridView</span></span>


<span data-ttu-id="6a213-267">Verschieben Sie die zwei ButtonFields, sodass sie als die ersten beiden GridView-Felder angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="6a213-267">Move the two ButtonFields so that they appear as the first two GridView fields.</span></span> <span data-ttu-id="6a213-268">Legen Sie als Nächstes die `Text` Eigenschaften von diesen beiden ButtonFields zum Preis + 10 % und Preis – 10 % und die `CommandName` Eigenschaften IncreasePrice und DecreasePrice, bzw.</span><span class="sxs-lookup"><span data-stu-id="6a213-268">Next, set the `Text` properties of these two ButtonFields to Price +10% and Price -10% and the `CommandName` properties to IncreasePrice and DecreasePrice, respectively.</span></span> <span data-ttu-id="6a213-269">Standardmäßig rendert eine ButtonField die Spalte mit Schaltflächen als LinkButtons.</span><span class="sxs-lookup"><span data-stu-id="6a213-269">By default, a ButtonField renders its column of buttons as LinkButtons.</span></span> <span data-ttu-id="6a213-270">Dies kann geändert werden, jedoch über die ButtonField des [ `ButtonType` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span><span class="sxs-lookup"><span data-stu-id="6a213-270">This can be changed, however, through the ButtonField's [`ButtonType` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.buttonfieldbase.buttontype.aspx).</span></span> <span data-ttu-id="6a213-271">Lassen Sie uns diese zwei ButtonFields als reguläre Schaltflächen gerendert; Legen Sie daher die `ButtonType` Eigenschaft `Button`.</span><span class="sxs-lookup"><span data-stu-id="6a213-271">Let's have these two ButtonFields rendered as regular push buttons; therefore, set the `ButtonType` property to `Button`.</span></span> <span data-ttu-id="6a213-272">Abbildung 19 zeigt die Felder (Dialogfeld), nachdem diese Änderungen vorgenommen wurden, folgt den GridView deklaratives Markup.</span><span class="sxs-lookup"><span data-stu-id="6a213-272">Figure 19 shows the Fields dialog box after these changes have been made; following that is the GridView's declarative markup.</span></span>


![Konfigurieren Sie die ButtonFields Text, CommandName und ButtonType-Eigenschaften](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image49.png)

<span data-ttu-id="6a213-274">**Abbildung 19**: Konfigurieren Sie die ButtonFields `Text`, `CommandName`, und `ButtonType` Eigenschaften</span><span class="sxs-lookup"><span data-stu-id="6a213-274">**Figure 19**: Configure the ButtonFields `Text`, `CommandName`, and `ButtonType` Properties</span></span>


[!code-aspx[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample9.aspx)]

<span data-ttu-id="6a213-275">Mit diesen ButtonFields erstellt, der letzte Schritt ist die Erstellung einen Ereignishandler für des GridView `RowCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="6a213-275">With these ButtonFields created, the final step is to create an event handler for the GridView's `RowCommand` event.</span></span> <span data-ttu-id="6a213-276">Dieser Ereignishandler, wenn ausgelöst, da der Preis + 10 % oder Preis – 10 % Schaltflächen wurden geklickt haben, Anforderungen, um zu bestimmen, die `ProductID` für die Zeile, deren Schaltfläche geklickt wurde, und rufen Sie dann, die `ProductsBLL` Klasse `UpdateProduct` Methode auf und übergibt in den entsprechenden `UnitPrice` Prozentuale Anpassung zusammen mit den `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="6a213-276">This event handler, if fired because either the Price +10% or Price -10% buttons were clicked, needs to determine the `ProductID` for the row whose button was clicked and then invoke the `ProductsBLL` class's `UpdateProduct` method, passing in the appropriate `UnitPrice` percentage adjustment along with the `ProductID`.</span></span> <span data-ttu-id="6a213-277">Der folgende Code führt folgende Aufgaben:</span><span class="sxs-lookup"><span data-stu-id="6a213-277">The following code performs these tasks:</span></span>

[!code-csharp[Main](adding-and-responding-to-buttons-to-a-gridview-cs/samples/sample10.cs)]

<span data-ttu-id="6a213-278">Um zu ermitteln, die `ProductID` für die Zeile, deren Preis + 10 % oder Preis – 10 %-Schaltfläche geklickt wurde, müssen wir des GridView finden Sie in `DataKeys` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="6a213-278">In order to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we need to consult the GridView's `DataKeys` collection.</span></span> <span data-ttu-id="6a213-279">Diese Auflistung enthält die Werte der Felder im angegebenen die `DataKeyNames` -Eigenschaft für jede GridView-Zeile.</span><span class="sxs-lookup"><span data-stu-id="6a213-279">This collection holds the values of the fields specified in the `DataKeyNames` property for each GridView row.</span></span> <span data-ttu-id="6a213-280">Seit des GridView `DataKeyNames` -Eigenschaft wurde auf "ProductID" von Visual Studio festgelegt, wenn es sich bei dem ObjectDataSource-Steuerelement an die GridView zu binden `DataKeys(rowIndex).Value` bietet die `ProductID` für den angegebenen *RowIndex*.</span><span class="sxs-lookup"><span data-stu-id="6a213-280">Since the GridView's `DataKeyNames` property was set to ProductID by Visual Studio when binding the ObjectDataSource to the GridView, `DataKeys(rowIndex).Value` provides the `ProductID` for the specified *rowIndex*.</span></span>

<span data-ttu-id="6a213-281">Die ButtonField werden automatisch in die *RowIndex* der Zeile, deren Schaltfläche, über geklickt wurde, die `e.CommandArgument` Parameter.</span><span class="sxs-lookup"><span data-stu-id="6a213-281">The ButtonField automatically passes in the *rowIndex* of the row whose button was clicked through the `e.CommandArgument` parameter.</span></span> <span data-ttu-id="6a213-282">Aus diesem Grund, um zu bestimmen, die `ProductID` für die Zeile, deren Preis + 10 % oder Preis – 10 %-Schaltfläche geklickt wurde, verwenden wir: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span><span class="sxs-lookup"><span data-stu-id="6a213-282">Therefore, to determine the `ProductID` for the row whose Price +10% or Price -10% button was clicked, we use: `Convert.ToInt32(SuppliersProducts.DataKeys(Convert.ToInt32(e.CommandArgument)).Value)`.</span></span>

<span data-ttu-id="6a213-283">Als mit der alle Produkte eingestellt, wenn Sie den GridView Ansichtstatus deaktiviert haben die GridView-Steuerelement ist in der zugrunde liegenden Datenspeicher bei jedem Postback erneut gebunden werden und aus diesem Grund wird sofort aktualisiert, um eine Preisänderung widerspiegeln, die zwischen dem Klicken auf tritt auf einer der Schaltflächen.</span><span class="sxs-lookup"><span data-stu-id="6a213-283">As with the Discontinue All Products button, if you have disabled the GridView's view state, the GridView is being rebound to the underlying data store on every postback, and therefore will immediately be updated to reflect a price change that occurs from clicking either of the buttons.</span></span> <span data-ttu-id="6a213-284">Wenn Sie jedoch, Sie nicht Ansichtszustand in den GridView-Ansicht deaktiviert haben, müssen Sie manuell die Daten an die GridView zu binden, nachdem diese Änderung vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="6a213-284">If, however, you have not disabled view state in the GridView, you will need to manually rebind the data to the GridView after making this change.</span></span> <span data-ttu-id="6a213-285">Um dies zu erreichen, stellen Sie einfach einen Aufruf von GridView `DataBind()` Methode sofort nach dem Aufrufen der `UpdateProduct` Methode.</span><span class="sxs-lookup"><span data-stu-id="6a213-285">To accomplish this, simply make a call to the GridView's `DataBind()` method immediately after invoking the `UpdateProduct` method.</span></span>

<span data-ttu-id="6a213-286">Abbildung 20 zeigt die Seite, wenn Sie Produkte von den OMA-Kelly Homestead anzeigen.</span><span class="sxs-lookup"><span data-stu-id="6a213-286">Figure 20 shows the page when viewing the products provided by Grandma Kelly's Homestead.</span></span> <span data-ttu-id="6a213-287">Abbildung 21 zeigt die Ergebnisse nach dem Preis + 10, dass % für Großmutters Boysenberry verteilt und die Schaltfläche "Preis – 10 %" zweimal einmal für Northwoods Cranberry Sauce geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="6a213-287">Figure 21 shows the results after the Price +10% button has been clicked twice for Grandma's Boysenberry Spread and the Price -10% button once for Northwoods Cranberry Sauce.</span></span>


<span data-ttu-id="6a213-288">[![GridView enthält Preis + 10 % und Preis – 10 %-Schaltflächen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-288">[![The GridView Includes Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image51.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image50.png)</span></span>

<span data-ttu-id="6a213-289">**Abbildung 20**: Der GridView-Includes-Preis + 10 % und Preis – 10 % Schaltflächen ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-289">**Figure 20**: The GridView Includes Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image52.png))</span></span>


<span data-ttu-id="6a213-290">[![Die Preise für das erste und dritte Produkt wurden aktualisiert, über den Preis + 10 % und Preis – 10 %-Schaltflächen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span><span class="sxs-lookup"><span data-stu-id="6a213-290">[![The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image54.png)](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image53.png)</span></span>

<span data-ttu-id="6a213-291">**Abbildung 21**: Die Preise für das erste und dritte Produkt wurden aktualisiert, über den Preis + 10 % und Preis – 10 % Schaltflächen ([klicken Sie, um das Bild in voller Größe anzeigen](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span><span class="sxs-lookup"><span data-stu-id="6a213-291">**Figure 21**: The Prices for the First and Third Product Have Been Updated via the Price +10% and Price -10% Buttons ([Click to view full-size image](adding-and-responding-to-buttons-to-a-gridview-cs/_static/image55.png))</span></span>


> [!NOTE]
> <span data-ttu-id="6a213-292">Das GridView (und DetailsView) können auch Schaltflächen, LinkButtons oder ImageButtons ihre von TemplateFields hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="6a213-292">The GridView (and DetailsView) can also have Buttons, LinkButtons, or ImageButtons added to their TemplateFields.</span></span> <span data-ttu-id="6a213-293">Wie Sie mit der BoundField diese Schaltflächen, die beim Klicken auf einen Postback ausgelöst werden, Auslösen von GridView `RowCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="6a213-293">As with the BoundField, these Buttons, when clicked, will induce a postback, raising the GridView's `RowCommand` event.</span></span> <span data-ttu-id="6a213-294">Beim Hinzufügen von Schaltflächen in ein TemplateField, aber der Schaltfläche `CommandArgument` wird nicht automatisch festgelegt, der Index der Zeile wie bei ButtonFields verwenden.</span><span class="sxs-lookup"><span data-stu-id="6a213-294">When adding buttons in a TemplateField, however, the Button's `CommandArgument` is not automatically set to the index of the row as it is when using ButtonFields.</span></span> <span data-ttu-id="6a213-295">Wenn müssen Sie die Schaltfläche mit den Index der Zeile zu bestimmen, die in auf die geklickt wurde die `RowCommand` -Ereignishandler müssen Sie manuell auf der Schaltfläche festlegen `CommandArgument` -Eigenschaft in seiner deklarativen Syntax in das TemplateField, mit Code wie:</span><span class="sxs-lookup"><span data-stu-id="6a213-295">If you need to determine the row index of the button that was clicked within the `RowCommand` event handler, you'll need to manually set the Button's `CommandArgument` property in its declarative syntax within the TemplateField, using code like:</span></span>  
> <span data-ttu-id="6a213-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span><span class="sxs-lookup"><span data-stu-id="6a213-296">`<asp:Button runat="server" ... CommandArgument='<%# ((GridViewRow) Container).RowIndex %>'`.</span></span>


## <a name="summary"></a><span data-ttu-id="6a213-297">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="6a213-297">Summary</span></span>

<span data-ttu-id="6a213-298">Die Steuerelemente GridView, DetailsView oder FormView können Schaltflächen, LinkButtons oder ImageButtons enthalten.</span><span class="sxs-lookup"><span data-stu-id="6a213-298">The GridView, DetailsView, and FormView controls all can include Buttons, LinkButtons, or ImageButtons.</span></span> <span data-ttu-id="6a213-299">Diese Schaltflächen, die beim Klicken auf einen Postback verursachen und Auslösen der `ItemCommand` Ereignis in die FormView und DetailsView-Steuerelemente und die `RowCommand` Ereignis in den GridView-Ansicht.</span><span class="sxs-lookup"><span data-stu-id="6a213-299">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event in the FormView and DetailsView controls and the `RowCommand` event in the GridView.</span></span> <span data-ttu-id="6a213-300">Diese datenwebsteuerelemente haben integrierte Funktionen, die häufig verwendete Befehle bezogenen Aktionen, z. B. das Löschen oder Bearbeiten von Datensätzen zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="6a213-300">These data Web controls have built-in functionality to handle common command-related actions, such as deleting or editing records.</span></span> <span data-ttu-id="6a213-301">Wir können jedoch auch verwenden, Schaltflächen, die beim Klicken auf, reagieren Sie mit unserer eigenen benutzerdefinierten Code ausführen.</span><span class="sxs-lookup"><span data-stu-id="6a213-301">However, we can also use buttons that, when clicked, respond with executing our own custom code.</span></span>

<span data-ttu-id="6a213-302">Zu diesem Zweck müssen wir erstellen einen Ereignishandler für die `ItemCommand` oder `RowCommand` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="6a213-302">To accomplish this, we need to create an event handler for the `ItemCommand` or `RowCommand` event.</span></span> <span data-ttu-id="6a213-303">In diesem Ereignishandler überprüfen wir zunächst den eingehenden `CommandName` Wert zu bestimmen, welche Schaltfläche geklickt wurde, und klicken Sie dann eine entsprechende Aktion.</span><span class="sxs-lookup"><span data-stu-id="6a213-303">In this event handler we first check the incoming `CommandName` value to determine which button was clicked and then take appropriate custom action.</span></span> <span data-ttu-id="6a213-304">In diesem Tutorial wurde erläutert, wie Schaltflächen und ButtonFields verwenden, um alle Produkte für einen angegebenen Lieferanten zu beenden oder zu erhöhen oder verringern den Preis für ein bestimmtes Produkt um 10 %.</span><span class="sxs-lookup"><span data-stu-id="6a213-304">In this tutorial we saw how to use buttons and ButtonFields to discontinue all products for a specified supplier or to increase or decrease the price of a particular product by 10%.</span></span>

<span data-ttu-id="6a213-305">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="6a213-305">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="6a213-306">Der Autor</span><span class="sxs-lookup"><span data-stu-id="6a213-306">About the Author</span></span>

<span data-ttu-id="6a213-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="6a213-307">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="6a213-308">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="6a213-308">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="6a213-309">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="6a213-309">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="6a213-310">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="6a213-310">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="6a213-311">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="6a213-311">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="6a213-312">Nächste</span><span class="sxs-lookup"><span data-stu-id="6a213-312">Next</span></span>](adding-and-responding-to-buttons-to-a-gridview-vb.md)
