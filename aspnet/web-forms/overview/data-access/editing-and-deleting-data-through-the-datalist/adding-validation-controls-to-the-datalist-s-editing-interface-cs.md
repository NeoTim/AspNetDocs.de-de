---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
title: Hinzufügen von Validierungssteuerelementen zu DataList-Steuerelement des bearbeiten-Schnittstelle (c#) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial sehen wir, wie einfach es ist, die Steuerelemente zur gültigkeitsprüfung des DataList-Steuerelement EditItemTemplate hinzufügen, um eine weitere narrensicher Bearbeitung Benutzer "int". Geben Sie...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 3ecc21c5-da0e-40ab-abb4-fac1e47398ad
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: 5dc2421f6c3fa88a9373e7ac1b7ad51be6e65b82
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/17/2019
ms.locfileid: "59422212"
---
# <a name="adding-validation-controls-to-the-datalists-editing-interface-c"></a><span data-ttu-id="d9d77-103">Hinzufügen von Validierungssteuerelementen zu Oberfläche für die Bearbeitung von DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="d9d77-103">Adding Validation Controls to the DataList's Editing Interface (C#)</span></span>

<span data-ttu-id="d9d77-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="d9d77-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="d9d77-105">[Beispiel-App herunter](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) oder [PDF-Datei herunterladen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="d9d77-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span></span>

> <span data-ttu-id="d9d77-106">In diesem Tutorial erfahren Sie, wie einfach es ist, die Steuerelemente zur gültigkeitsprüfung des DataList-Steuerelement EditItemTemplate hinzufügen, um eine weitere narrensicher Bearbeitung Benutzeroberfläche bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="d9d77-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="d9d77-107">Introduction</span></span>

<span data-ttu-id="d9d77-108">Im DataList-Steuerelement bisher Bearbeitung von Tutorials enthalten die Bearbeitung von Schnittstellen DataList-Steuerelementen unterstützt keine proaktive Validierung von Benutzereingaben, obwohl ungültige z. B. einen fehlenden Produktnamen oder negative Preis führt zu einer Ausnahme Benutzereingabe.</span><span class="sxs-lookup"><span data-stu-id="d9d77-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="d9d77-109">In der [vorherigen Lernprogramm](handling-bll-and-dal-level-exceptions-cs.md) untersuchten wir Code an die Datenliste s zur Ausnahmebehandlung hinzufügen `UpdateCommand` -Ereignishandler zum Abfangen und ordnungsgemäß anzeigen von Informationen zu allen Ausnahmen, die ausgelöst wurden.</span><span class="sxs-lookup"><span data-stu-id="d9d77-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-cs.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="d9d77-110">Allerdings im Idealfall würde die Bearbeitungsschnittstelle Validierungssteuerelemente aus, um zu verhindern, dass einen Benutzer im vornherein eingeben von solchen ungültigen Daten enthalten.</span><span class="sxs-lookup"><span data-stu-id="d9d77-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="d9d77-111">In diesem Tutorial werden wir sehen, wie einfach es ist zum Hinzufügen von Steuerelementen zur gültigkeitsprüfung an die Datenliste s `EditItemTemplate` um eine weitere narrensicher Bearbeitung Benutzeroberfläche bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="d9d77-112">Genauer gesagt wird in diesem Tutorial verwendet das Beispiel im vorherigen Tutorial erstellt und ergänzt die Bearbeitungsschnittstelle entsprechende Validierungsfehlermeldung enthält.</span><span class="sxs-lookup"><span data-stu-id="d9d77-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptionshandling-bll-and-dal-level-exceptions-csmd"></a><span data-ttu-id="d9d77-113">Schritt 1: Replizieren das Beispiel aus[Ausnahmebehandlung auf BLL- und DAL-Ebene](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="d9d77-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md)</span></span>

<span data-ttu-id="d9d77-114">In der [behandeln Geschäftslogikschicht und Ausnahmen auf DAL-Ebene](handling-bll-and-dal-level-exceptions-cs.md) Tutorial, die wir erstellt haben, eine Seite, die die Namen und Preise der Produkte in einem DataList-Steuerelement zwei Spalten, die bearbeitet werden aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="d9d77-115">Unser Ziel für dieses Tutorial ist die s Bearbeitung von DataList Einbeziehung von Steuerelementen zur gültigkeitsprüfung zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="d9d77-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="d9d77-116">Insbesondere wird unsere Validierungslogik:</span><span class="sxs-lookup"><span data-stu-id="d9d77-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="d9d77-117">Erfordert, dass der Name des Produkts s bereitgestellt werden</span><span class="sxs-lookup"><span data-stu-id="d9d77-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="d9d77-118">Stellen Sie sicher, dass der eingegebene Wert für den Preis einer gültigen Währungsformat ist</span><span class="sxs-lookup"><span data-stu-id="d9d77-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="d9d77-119">Stellen Sie sicher, dass den eingegebene Wert für der Preis größer als oder gleich 0 (null), da eine Negative ist `UnitPrice` Wert ist nicht zulässig</span><span class="sxs-lookup"><span data-stu-id="d9d77-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="d9d77-120">Bevor wir weiter erweitern im vorherige Beispiel um regulierte sehen können, müssen wir zuerst auf das Beispiel aus Replizieren der `ErrorHandling.aspx` auf der Seite die `EditDeleteDataList` Ordner auf der Seite für dieses Tutorial `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="d9d77-121">Um dies zu erreichen, wir beide kopiert müssen, die `ErrorHandling.aspx` auf der Seite s deklaratives Markup und Quellcode.</span><span class="sxs-lookup"><span data-stu-id="d9d77-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="d9d77-122">Kopieren Sie zuerst die deklarativen Markup durch die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="d9d77-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="d9d77-123">Öffnen der `ErrorHandling.aspx` Seite in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="d9d77-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="d9d77-124">Wechseln Sie zur Seite "s" deklarativen Markup (klicken Sie auf die Schaltfläche "Quelle" am unteren Rand der Seite ")</span><span class="sxs-lookup"><span data-stu-id="d9d77-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="d9d77-125">Kopieren Sie den Text innerhalb der `<asp:Content>` und `</asp:Content>` Tags (Zeilen 3 bis 32), wie in Abbildung 1 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>


<span data-ttu-id="d9d77-126">[![Kopieren Sie den Text innerhalb der &lt;Asp: Content&gt; Steuerelement](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="d9d77-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="d9d77-127">**Abbildung 1**: Kopieren Sie den Text innerhalb der `<asp:Content>` Control ([klicken Sie, um das Bild in voller Größe anzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="d9d77-127">**Figure 1**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span></span>


1. <span data-ttu-id="d9d77-128">Öffnen der `UIValidation.aspx` Seite</span><span class="sxs-lookup"><span data-stu-id="d9d77-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="d9d77-129">Wechseln Sie zur Seite s deklarativen markup</span><span class="sxs-lookup"><span data-stu-id="d9d77-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="d9d77-130">Fügen Sie den Text innerhalb der `<asp:Content>` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="d9d77-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="d9d77-131">Öffnen Sie zum Kopieren von über den Quellcode der `ErrorHandling.aspx.vb` Seite, und kopieren Sie nur den Text *in* der `EditDeleteDataList_ErrorHandling` Klasse.</span><span class="sxs-lookup"><span data-stu-id="d9d77-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="d9d77-132">Kopieren Sie die drei Ereignishandler (`Products_EditCommand`, `Products_CancelCommand`, und `Products_UpdateCommand`) zusammen mit den `DisplayExceptionDetails` -Methode, aber möchten **nicht** kopieren Sie die Klassendeklaration oder `using` Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="d9d77-133">Fügen Sie den kopierten Text *in* der `EditDeleteDataList_UIValidation` -Klasse im `UIValidation.aspx.vb`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="d9d77-134">Nach der Umstellung auf den Inhalt und Code aus `ErrorHandling.aspx` zu `UIValidation.aspx`, können Sie die Seiten in einem Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="d9d77-135">Sie sollten die Ausgabe sowie die gleiche Funktionalität in jede dieser zwei Seiten (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="d9d77-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>


<span data-ttu-id="d9d77-136">[![Die Seite UIValidation.aspx imitiert die Funktionalität in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="d9d77-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="d9d77-137">**Abbildung 2**: Die `UIValidation.aspx` Seite imitiert die Funktionalität in `ErrorHandling.aspx` ([klicken Sie, um das Bild in voller Größe anzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="d9d77-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span></span>


## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="d9d77-138">Schritt 2: Das DataList-s-EditItemTemplate hinzugefügt Steuerelemente zur gültigkeitsprüfung</span><span class="sxs-lookup"><span data-stu-id="d9d77-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="d9d77-139">Wenn Dateneingabeformularen erstellen zu können, ist es wichtig, dass Benutzer alle erforderlichen Felder eingeben und, dass alle ihre bereitgestellten Eingaben für rechtliche, korrekt formatierte Werte sind.</span><span class="sxs-lookup"><span data-stu-id="d9d77-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="d9d77-140">Um sicherzustellen, dass ein Benutzer s Eingaben gültig sind, bietet ASP.NET die fünf integrierten Validierungssteuerelemente, die zur Überprüfung des Werts, der ein einzelnes Eingabesteuerelement Web entwickelt wurden:</span><span class="sxs-lookup"><span data-stu-id="d9d77-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="d9d77-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) wird sichergestellt, dass ein Wert bereitgestellt wurde</span><span class="sxs-lookup"><span data-stu-id="d9d77-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="d9d77-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) überprüft einen Wert für eine andere Web-Control-Wert oder einen konstanten Wert oder wird sichergestellt, dass das s Wertformat für einen angegebenen Datentyp gültig ist</span><span class="sxs-lookup"><span data-stu-id="d9d77-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="d9d77-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) wird sichergestellt, dass ein Wert innerhalb eines Bereichs von Werten ist.</span><span class="sxs-lookup"><span data-stu-id="d9d77-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="d9d77-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) überprüft einen Wert für eine [reguläre Ausdrücke](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="d9d77-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="d9d77-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) überprüft einen Wert für eine benutzerdefinierte, eine benutzerdefinierte Methode</span><span class="sxs-lookup"><span data-stu-id="d9d77-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="d9d77-146">Weitere Informationen zu diesen fünf Steuerelemente zurückgreifen der [Hinzufügen von Steuerelementen zur gültigkeitsprüfung zum Bearbeiten und Einfügen von Schnittstellen](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) Lernprogramm oder sehen Sie sich die [Steuerelemente zur gültigkeitsprüfung Abschnitt](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) von der [ASP.NET Schnellstarttutorials](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="d9d77-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="d9d77-147">Für unser Tutorial müssen wir verwenden ein RequiredFieldValidator, um sicherzustellen, dass ein Wert für den Namen des Produkts angegeben wurde und eine CompareValidator sicherstellen, dass der eingegebene Preis verfügt über einen Wert größer als oder gleich 0 und wird in einem gültigen Währungsformat angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="d9d77-148">Während ASP.NET 1.x mussten diese gleichen fünf Validierungssteuerelemente, ASP.NET 2.0 wurde eine Reihe von Verbesserungen hinzugefügt, der Hauptseite für Browser neben dem Internet Explorer und die Möglichkeit, die Validierungssteuerelemente für Partition auf einer Seite in zwei des clientseitigen Skripts zu unterstützen Überprüfung von Gruppen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="d9d77-149">Weitere Informationen zu den neuen Features der Validierung-Steuerelement in 2.0 finden Sie unter [Analyse der Validierungssteuerelemente in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="d9d77-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="d9d77-150">S durch Hinzufügen der erforderlichen Überprüfungssteuerelemente an die Datenliste s beginnen können `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="d9d77-151">Diese Aufgabe kann mithilfe des Designers durch Klicken auf den Link "Vorlagen bearbeiten" aus dem DataList-s-Smarttag oder mithilfe der deklarativen Syntax erfolgen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="d9d77-152">Lassen Sie s durchlaufen Sie den Prozess über die Option "Vorlagen bearbeiten" die Entwurfsansicht zu sehen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="d9d77-153">Nach dem Auswählen der Bearbeitung von DataList-Steuerelement s `EditItemTemplate`, fügen Sie einen RequiredFieldValidator durch Ziehen aus der Toolbox in die Vorlage bearbeiten-Schnittstelle, platzieren sie nach der `ProductName` Textfeld.</span><span class="sxs-lookup"><span data-stu-id="d9d77-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>


<span data-ttu-id="d9d77-154">[![Fügen Sie einen RequiredFieldValidator das EditItemTemplate nach ProductName Textfeld](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="d9d77-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span></span>

<span data-ttu-id="d9d77-155">**Abbildung 3**: Einen RequiredFieldValidator zum Hinzufügen der `EditItemTemplate After` der `ProductName` Textfeld ([klicken Sie, um das Bild in voller Größe anzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="d9d77-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span></span>


<span data-ttu-id="d9d77-156">Alle Validierungssteuerelemente funktionieren durch Überprüfen der Eingabe eines einzelnen ASP.NET Web-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="d9d77-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="d9d77-157">Aus diesem Grund müssen wir angeben, dass das RequiredFieldValidator-Steuerelement uns hinzugefügten, für überprüfen soll die `ProductName` Textfeld; Dies erfolgt durch das Validierungssteuerelement s festlegen [ `ControlToValidate` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) auf die `ID` von das entsprechende Steuerelement für Web (`ProductName`, in diesem Fall).</span><span class="sxs-lookup"><span data-stu-id="d9d77-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="d9d77-158">Legen Sie als Nächstes die [ `ErrorMessage` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) , müssen Sie den Namen des Produkts s bereitstellen und die [ `Text` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) zu \*.</span><span class="sxs-lookup"><span data-stu-id="d9d77-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="d9d77-159">Die `Text` Eigenschaftswert, wenn angegeben, wird der Text, der durch das Validierungssteuerelement angezeigt wird, wenn die Validierung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="d9d77-160">Die `ErrorMessage` Eigenschaftswert, der erforderlich ist, wird von dem Steuerelement ValidationSummary verwendet, wenn die `Text` -Eigenschaftswert fehlt, die `ErrorMessage` -Eigenschaftswert angezeigt wird, durch das Validierungssteuerelement bei ungültiger Eingabe.</span><span class="sxs-lookup"><span data-stu-id="d9d77-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="d9d77-161">Nach dem Festlegen dieser drei Eigenschaften des das RequiredFieldValidator-Steuerelement, sollte Ihr Bildschirm dem Beispiel in Abbildung 4 aussehen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>


<span data-ttu-id="d9d77-162">[![Legen Sie die RequiredFieldValidator s ControlToValidate, ErrorMessage und Eigenschaften von Text](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="d9d77-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span></span>

<span data-ttu-id="d9d77-163">**Abbildung 4**: Legen Sie das RequiredFieldValidator-s `ControlToValidate`, `ErrorMessage`, und `Text` Eigenschaften ([klicken Sie, um das Bild in voller Größe anzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="d9d77-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span></span>


<span data-ttu-id="d9d77-164">Mit das RequiredFieldValidator-Steuerelement hinzugefügt, die `EditItemTemplate`, bleibt die erforderlichen Validierungen für s Produktpreis Textfeld ist.</span><span class="sxs-lookup"><span data-stu-id="d9d77-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="d9d77-165">Da die `UnitPrice` ist optional, wenn einen Datensatz zu bearbeiten, wir Raten t muss einen RequiredFieldValidator hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="d9d77-166">Müssen wir tun, jedoch eine CompareValidator, um sicherzustellen, dass Hinzufügen der `UnitPrice`, sofern angegeben, wird ordnungsgemäß als Währung formatiert und ist größer als oder gleich 0.</span><span class="sxs-lookup"><span data-stu-id="d9d77-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="d9d77-167">CompareValidator in Hinzufügen der `EditItemTemplate` und legen Sie seine `ControlToValidate` Eigenschaft `UnitPrice`, dessen `ErrorMessage` Eigenschaft mit dem Preis muss größer als oder gleich 0 (null) und kann nicht das Währungssymbol enthalten und die zugehörige `Text` Eigenschaft \*.</span><span class="sxs-lookup"><span data-stu-id="d9d77-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="d9d77-168">Gibt an, dass die `UnitPrice` Wert muss größer als oder gleich 0, legen Sie die s CompareValidator [ `Operator` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) zu `GreaterThanEqual`, dessen [ `ValueToCompare` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) auf 0 (null) und die [ `Type` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) zu `Currency`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="d9d77-169">Nach dem Hinzufügen dieser beiden Validierungssteuerelemente, DataList-Steuerelement s `EditItemTemplate` deklarative Syntax des s sollte etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="d9d77-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="d9d77-170">Öffnen Sie nachdem Sie diese Änderungen haben die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="d9d77-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="d9d77-171">Wenn Sie versuchen, den Namen des weglassen, oder geben einen ungültigen preiswert, wenn Sie ein Produkt zu bearbeiten, wird ein Sternchen neben dem Textfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="d9d77-172">Wie in Abbildung 5 gezeigt, wird ein preiswert, der das Währungssymbol wie z. B. 19,95 $ enthält als ungültig angesehen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="d9d77-173">CompareValidator s `Currency` `Type` ermöglicht das Trennzeichen für Ziffern (z. B. Kommas oder Punkte, je nach den kultureinstellungen) und eine führende Plus- oder Minuszeichen (-), funktioniert jedoch *nicht* ein Währungssymbol zulassen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="d9d77-174">Dieses Verhalten kann Benutzer perplex, während die Bearbeitungsschnittstelle derzeit rendert die `UnitPrice` verwenden das Währungsformat.</span><span class="sxs-lookup"><span data-stu-id="d9d77-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>


<span data-ttu-id="d9d77-175">[![Ein Sternchen wird neben die Textfelder ein, mit der ungültigen Eingabe angezeigt.](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="d9d77-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span></span>

<span data-ttu-id="d9d77-176">**Abbildung 5**: Ein Sternchen wird neben die Textfelder ein, mit der ungültigen Eingabe ([klicken Sie, um das Bild in voller Größe anzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="d9d77-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span></span>


<span data-ttu-id="d9d77-177">Während der Überprüfung funktioniert als-ist, muss der Benutzer das Währungssymbol manuell zu entfernen, wenn einen Datensatz bearbeiten, die nicht zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="d9d77-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="d9d77-178">Darüber hinaus treten ungültige Schnittstelle die Eingaben in die Bearbeitung, weder die Aktualisierung noch "Abbrechen" Schaltflächen einen Postback wird aufgerufen, wenn auf Sie geklickt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="d9d77-179">Im Idealfall würde die Schaltfläche "Abbrechen" DataList-Steuerelement in den Zustand vor der Bearbeitung, unabhängig von der Gültigkeit der Benutzereingabe s zurück.</span><span class="sxs-lookup"><span data-stu-id="d9d77-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="d9d77-180">Darüber hinaus müssen wir sicherstellen, dass Daten auf der Seite s gültig ist, bevor Sie aktualisieren die Produktinformationen im DataList-Steuerelement s `UpdateCommand` Ereignishandler die clientbasierte Logik kann, von Benutzern, deren Browser umgangen werden entweder Einbau zusätzlichen t unterstützt JavaScript oder über die, Steuerelemente zur gültigkeitsprüfung die Unterstützung deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="d9d77-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="d9d77-181">Entfernen das Währungssymbol aus dem EditItemTemplate s UnitPrice-Textfeld</span><span class="sxs-lookup"><span data-stu-id="d9d77-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="d9d77-182">Bei Verwendung der s CompareValidator `Currency``Type`, die Eingabe überprüft wird, darf keiner Währungssymbole enthalten.</span><span class="sxs-lookup"><span data-stu-id="d9d77-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="d9d77-183">Das Vorhandensein solcher Symbole bewirkt, dass die CompareValidator, um die Eingabe als ungültig zu markieren.</span><span class="sxs-lookup"><span data-stu-id="d9d77-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="d9d77-184">Unsere Bearbeitungsschnittstelle enthält jedoch derzeit ein Währungssymbol in die `UnitPrice` TextBox, d. h. der Benutzer muss das Währungssymbol explizit entfernen, bevor Sie ihre Änderungen speichern.</span><span class="sxs-lookup"><span data-stu-id="d9d77-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="d9d77-185">Zur Behebung des Problems gibt es drei Optionen:</span><span class="sxs-lookup"><span data-stu-id="d9d77-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="d9d77-186">Konfigurieren der `EditItemTemplate` , damit die `UnitPrice` TextBox-Wert ist nicht als Währung formatiert.</span><span class="sxs-lookup"><span data-stu-id="d9d77-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="d9d77-187">Ermöglicht dem Benutzer ein Währungssymbol CompareValidator entfernen und Ersetzen durch eine RegularExpressionValidator, die prüft, ob eine ordnungsgemäß formatierte Währungswert eingeben.</span><span class="sxs-lookup"><span data-stu-id="d9d77-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="d9d77-188">Die Schwierigkeit besteht darin, dass der reguläre Ausdruck, der einen Währungswert überprüfen nicht so einfach wie das CompareValidator und müsste das Schreiben von Code aus, wenn wir die kultureinstellungen integrieren möchten.</span><span class="sxs-lookup"><span data-stu-id="d9d77-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="d9d77-189">Entfernen Sie das Validierungssteuerelement und basieren auf benutzerdefinierte serverseitige Validierungslogik in den GridView-s `RowUpdating` -Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="d9d77-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="d9d77-190">Lassen Sie s mit Option 1 für dieses Tutorial zu wechseln.</span><span class="sxs-lookup"><span data-stu-id="d9d77-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="d9d77-191">Derzeit den `UnitPrice` ist aufgrund der Datenbindungsausdruck für das Textfeld als Währungswert formatiert die `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="d9d77-192">Ändern der `Eval` Anweisung `Eval("UnitPrice", "{0:n2}")`, formatiert das Ergebnis als Zahl mit zwei Ziffern für die Genauigkeit.</span><span class="sxs-lookup"><span data-stu-id="d9d77-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="d9d77-193">Dies kann erfolgen direkt über die deklarative Syntax oder durch Klicken auf den Link "DataBindings bearbeiten" aus der `UnitPrice` Textfeld im DataList-Steuerelement s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="d9d77-194">Durch diese Änderung der formatierte Preis in die Bearbeitungsschnittstelle enthält Kommas als das Gruppentrennzeichen und einen Punkt als Dezimaltrennzeichen, aber das Währungssymbol lässt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="d9d77-195">Wenn Sie das Währungsformat aus der bearbeitbaren Schnittstelle entfernen, finde ich hilfreich sein, die das Währungssymbol als außerhalb der TextBox-Text einfügen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="d9d77-196">Dies dient als Hinweis für den Benutzer, den sie nicht benötigen, um das Währungssymbol bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>


## <a name="fixing-the-cancel-button"></a><span data-ttu-id="d9d77-197">Beheben die Schaltfläche "Abbrechen"</span><span class="sxs-lookup"><span data-stu-id="d9d77-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="d9d77-198">Standardmäßig geben die Validierungssteuerelemente für das Web JavaScript erstellt, um auf die clientseitige Validierung.</span><span class="sxs-lookup"><span data-stu-id="d9d77-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="d9d77-199">Wenn eine Schaltfläche, LinkButton oder ImageButton geklickt wird, werden die Validierungssteuerelemente auf der Seite auf der Clientseite überprüft, bevor das Postback stattfindet.</span><span class="sxs-lookup"><span data-stu-id="d9d77-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="d9d77-200">Wenn Sie ungültige Daten vorhanden sind, wird das Postback abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="d9d77-201">Für bestimmte Schaltflächen kann jedoch die Gültigkeit der Daten unerheblich sein; In diesem Fall ist das Postback aufgrund von ungültigen Daten abgebrochen ein Ärgernis.</span><span class="sxs-lookup"><span data-stu-id="d9d77-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="d9d77-202">Die Schaltfläche "Abbrechen" ist ein Beispiel dafür.</span><span class="sxs-lookup"><span data-stu-id="d9d77-202">The Cancel button is such an example.</span></span> <span data-ttu-id="d9d77-203">Stellen Sie sich, dass ein Benutzer ungültige Daten eingibt, z.B. das Auslassen der Name des Produkts s, und klicken Sie dann entscheidet sich Julie t des Produkts nach allen speichern möchten und die Schaltfläche "Abbrechen" klickt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="d9d77-204">Derzeit wird die Schaltfläche "Abbrechen" die Validierungssteuerelemente auf der Seite der gemeldet wird, dass der Name des Produkts ist nicht vorhanden, und zu verhindern, dass das Postback ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="d9d77-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="d9d77-205">Geben Sie Text in unserer Benutzer muss die `ProductName` Textfeld nur aus dem Prozess der Bearbeitung abbrechen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="d9d77-206">Glücklicherweise verfügen über die Schaltfläche, LinkButton und ImageButton eine [ `CausesValidation` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) anzugeben, dass können, und zwar unabhängig davon, ob Sie auf die Schaltfläche mit der sollten die Validierungslogik initiieren (standardmäßig `True`).</span><span class="sxs-lookup"><span data-stu-id="d9d77-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="d9d77-207">Legen Sie die Schaltfläche "Abbrechen"-s `CausesValidation` Eigenschaft `False`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="d9d77-208">Sicherstellen der Eingaben in die UpdateCommand-Ereignishandler gültig sind</span><span class="sxs-lookup"><span data-stu-id="d9d77-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="d9d77-209">Aufgrund der Client-seitige Skript ausgegeben, die von den Validation-Steuerelementen, wenn ein Benutzer ungültige Eingabe eingibt, die Validierungssteuerelemente Abbrechen Postbacks durch Schaltfläche LinkButton, initiiert, oder ImageButton Steuerelemente, deren `CausesValidation` Eigenschaften sind `True` (die (Standard).</span><span class="sxs-lookup"><span data-stu-id="d9d77-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="d9d77-210">Wenn ein Benutzer Sie mit einem veralteten Browser oder eine besuchen ist, deren Unterstützung für JavaScript deaktiviert wurde, werden jedoch die clientseitige Überprüfungen nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="d9d77-211">Alle der ASP.NET-Steuerelemente zur gültigkeitsprüfung wiederholen Sie die Validierungslogik sofort nach dem Postback, und melden Sie die gesamte Gültigkeit der Seite s Eingaben über die [ `Page.IsValid` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="d9d77-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="d9d77-212">Die Seitenfluss besteht jedoch nicht unterbrochen oder beendet wird, in einer Weise basierend auf den Wert der `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="d9d77-213">Als Entwickler ist dafür verantwortlich, um sicherzustellen, dass die `Page.IsValid` Eigenschaft hat den Wert `True` vor dem Fortfahren mit Code, die gültige annimmt, Daten einzugeben.</span><span class="sxs-lookup"><span data-stu-id="d9d77-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="d9d77-214">Wenn ein Benutzer JavaScript deaktiviert hat, die Seite besucht, bearbeitet ein Produkt, gibt einen Preis zu teuer, und klickt auf die Schaltfläche "Aktualisieren", wird die clientseitige Überprüfung umgangen werden, und stellen Sie ein Postback sicher ist.</span><span class="sxs-lookup"><span data-stu-id="d9d77-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="d9d77-215">Beim Postback der ASP.NET-Seite s `UpdateCommand` -Ereignishandler ausgeführt wird und eine Ausnahme wird ausgelöst, wenn Sie versuchen zu analysieren, aufwendig zu einem `Decimal`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="d9d77-216">Da wir haben die Behandlung von Ausnahmen, eine Ausnahme nicht erfolgreich behandelt werden wird, aber wir sollen die ungültigen Daten verhindern könnten über im vornherein von nur fortgesetzt der `UpdateCommand` Ereignishandler Wenn `Page.IsValid` hat den Wert `True`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="d9d77-217">Fügen Sie den folgenden Code am Anfang der `UpdateCommand` -Ereignishandler direkt vor der `Try` blockieren:</span><span class="sxs-lookup"><span data-stu-id="d9d77-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>


[!code-csharp[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample2.cs)]

<span data-ttu-id="d9d77-218">Durch diese hinzufügen versucht das Produkt aktualisiert werden, nur dann, wenn die übermittelten Daten gültig sind.</span><span class="sxs-lookup"><span data-stu-id="d9d77-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="d9d77-219">Die meisten Benutzer können auf ungültige Daten aufgrund der Validierung Steuerelemente clientseitige Skripts, postback, aber Benutzer, deren Browser keine Nachteile für Ihr, JavaScript unterstützen oder nicht, die Unterstützung für JavaScript deaktiviert haben, können die clientseitige Überprüfungen umgehen und senden Sie ungültige Daten.</span><span class="sxs-lookup"><span data-stu-id="d9d77-219">Most users won't be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="d9d77-220">Der aufmerksame Leser werden sich erinnern, dass beim Aktualisieren von Daten mit GridView, wir nicht explizit überprüfen müssen die `Page.IsValid` -Eigenschaft in unserer Seite s-Code-Behind-Klasse.</span><span class="sxs-lookup"><span data-stu-id="d9d77-220">The astute reader will recall that when updating data with the GridView, we didn't need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="d9d77-221">Dies ist, da die GridView berät das `Page.IsValid` -Eigenschaft für uns und nur fährt mit dem Update nur, wenn der Wert zurückgegeben `True`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>


## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="d9d77-222">Schritt 3: Zusammenfassung der Probleme mit der Dateneingabe</span><span class="sxs-lookup"><span data-stu-id="d9d77-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="d9d77-223">Zusätzlich zu den fünf Validation-Steuerelementen, enthält ASP.NET die [ValidationSummary-Steuerelement](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), welche zeigt die `ErrorMessage` s von diesen Steuerelementen zur gültigkeitsprüfung, die ungültige Daten erkannt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="d9d77-224">Diese zusammenfassenden Daten können als Text auf der Webseite oder über ein modales, clientseitige Messagebox angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="d9d77-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="d9d77-225">Lassen Sie s dieses Tutorial enthält eine Zusammenfassung der Überprüfungsprobleme der clientseitigen-Messagebox zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="d9d77-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="d9d77-226">Ziehen Sie zu diesem Zweck ein ValidationSummary-Steuerelement aus der Toolbox in den Designer.</span><span class="sxs-lookup"><span data-stu-id="d9d77-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="d9d77-227">Der Speicherort der ValidationSummary-Steuerelement t unerheblich, da wir erneut zu konfigurieren, um die Zusammenfassung nur als eine Messagebox anzeigt.</span><span class="sxs-lookup"><span data-stu-id="d9d77-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="d9d77-228">Nach Hinzufügen des Steuerelements, legen Sie dessen [ `ShowSummary` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) zu `False` und die zugehörige [ `ShowMessageBox` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) zu `True`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="d9d77-229">Mit folgender Ergänzung, Fehler bei der Validierung in einer clientseitigen Messagebox zusammengefasst sind (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="d9d77-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>


<span data-ttu-id="d9d77-230">[![Fehler bei der Validierung werden in einer Client-Side-Messagebox zusammengefasst.](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="d9d77-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span></span>

<span data-ttu-id="d9d77-231">**Abbildung 6**: Fehler bei der Validierung werden zusammengefasst, in einer Client-Side-Messagebox ([klicken Sie, um das Bild in voller Größe anzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="d9d77-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span></span>


## <a name="summary"></a><span data-ttu-id="d9d77-232">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="d9d77-232">Summary</span></span>

<span data-ttu-id="d9d77-233">In diesem Tutorial wurde erläutert, wie die Wahrscheinlichkeit von Ausnahmen verringern, indem Sie Steuerelemente zur gültigkeitsprüfung verwenden, um proaktiv sicherzustellen, dass unsere Benutzer Eingaben gültig sind, bevor Sie versuchen, die sie in den Workflow für die Aktualisierung verwenden.</span><span class="sxs-lookup"><span data-stu-id="d9d77-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="d9d77-234">ASP.NET bietet fünf Web Validierungssteuerelemente, die entwickelt wurden, um das Überprüfen einer bestimmten Webanforderung steuerelementeingaben s, und melden sich auf die Eingabe-s-Gültigkeit.</span><span class="sxs-lookup"><span data-stu-id="d9d77-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="d9d77-235">In diesem Tutorial haben wir verwendet zwei dieser fünf Steuerelemente das RequiredFieldValidator-Steuerelement und CompareValidator, stellen Sie sicher, dass der Name des Produkts s bereitgestellt wurde und der Preis ein Währungsformat mit einem Wert größer als oder gleich 0 (null) haben.</span><span class="sxs-lookup"><span data-stu-id="d9d77-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="d9d77-236">Hinzufügen von Validierungssteuerelementen zu den bearbeiten-Schnittstelle DataList-s ist so einfach wie Drag & Drop auf die `EditItemTemplate` aus der Toolbox, und eine Reihe von Eigenschaften festlegen.</span><span class="sxs-lookup"><span data-stu-id="d9d77-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="d9d77-237">Standardmäßig geben die Validierungssteuerelemente automatisch die clientseitige Validierung Skripts; Sie bieten auch eine serverseitige Validierung beim Postback, speichern das kumulierte Ergebnis in der `Page.IsValid` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="d9d77-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="d9d77-238">Um die clientseitige Überprüfung umgehen, wenn auf eine Schaltfläche, LinkButton oder ImageButton geklickt wird, legen Sie die s `CausesValidation` Eigenschaft `False`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="d9d77-239">Vor dem Ausführen von Aufgaben mit den Daten, die beim Postback übermittelt, darüber hinaus sicher, dass die `Page.IsValid` -Eigenschaft gibt `True`.</span><span class="sxs-lookup"><span data-stu-id="d9d77-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="d9d77-240">Alle DataList-Steuerelement Tutorials bearbeiten wir haben bisher untersucht hatten sehr einfache Bearbeitung Schnittstellen, ein Textfeld für den Produktnamen s und eine für den Preis.</span><span class="sxs-lookup"><span data-stu-id="d9d77-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="d9d77-241">Die Bearbeitungsschnittstelle, kann jedoch eine Mischung aus verschiedenen Web-Steuerelemente, z. B. DropDownList-Steuerelementen, Kalender, Optionsfelder, Kontrollkästchen und So weiter enthalten.</span><span class="sxs-lookup"><span data-stu-id="d9d77-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="d9d77-242">In unserem nächsten Tutorial betrachten wir erstellen eine Schnittstelle, die eine Vielzahl von Websteuerelementen verwendet.</span><span class="sxs-lookup"><span data-stu-id="d9d77-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="d9d77-243">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="d9d77-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="d9d77-244">Der Autor</span><span class="sxs-lookup"><span data-stu-id="d9d77-244">About the Author</span></span>

<span data-ttu-id="d9d77-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="d9d77-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="d9d77-246">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="d9d77-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="d9d77-247">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="d9d77-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="d9d77-248">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="d9d77-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="d9d77-249">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="d9d77-249">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="d9d77-250">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="d9d77-250">Special Thanks To</span></span>

<span data-ttu-id="d9d77-251">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="d9d77-251">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="d9d77-252">Führendes Prüfer für dieses Tutorial wurden Dennis Patterson, Ken Pespisa und Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="d9d77-252">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="d9d77-253">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="d9d77-253">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="d9d77-254">Wenn dies der Fall ist, löschen Sie mir eine Linie an [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="d9d77-254">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="d9d77-255">[Zurück](handling-bll-and-dal-level-exceptions-cs.md)
> [Weiter](customizing-the-datalist-s-editing-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="d9d77-255">[Previous](handling-bll-and-dal-level-exceptions-cs.md)
[Next](customizing-the-datalist-s-editing-interface-cs.md)</span></span>
