---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-vb
title: Hinzufügen von Validierungs Steuerelementen zur Bearbeitungs Schnittstelle von DataList (VB) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial wird erläutert, wie einfach es ist, der EditItemTemplate des DataList-Steuer Elements Validierungs Steuerelemente hinzuzufügen, um einen benutzerfreundlichen Bearbeitungs Benutzer int...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 6b073fc6-524d-453d-be7c-0c30986de391
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-vb
msc.type: authoredcontent
ms.openlocfilehash: f952a7bb95e956a2ad935f8bdef5c3efa7437ecb
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78480885"
---
# <a name="adding-validation-controls-to-the-datalists-editing-interface-vb"></a><span data-ttu-id="164aa-103">Hinzufügen von Validierungssteuerelementen zu Oberfläche für die Bearbeitung von DataList (VB)</span><span class="sxs-lookup"><span data-stu-id="164aa-103">Adding Validation Controls to the DataList's Editing Interface (VB)</span></span>

<span data-ttu-id="164aa-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="164aa-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="164aa-105">[Beispiel-app herunterladen](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_VB.exe) oder [PDF herunterladen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/datatutorial39vb1.pdf)</span><span class="sxs-lookup"><span data-stu-id="164aa-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_VB.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/datatutorial39vb1.pdf)</span></span>

> <span data-ttu-id="164aa-106">In diesem Lernprogramm erfahren Sie, wie einfach es ist, dem EditItemTemplate-Element des DataList-Steuer Elements Validierungs Steuerelemente hinzuzufügen, um eine Benutzeroberfläche mit einer gestellteren Benutzeroberfläche bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="164aa-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="164aa-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="164aa-107">Introduction</span></span>

<span data-ttu-id="164aa-108">In den bisherigen Lernprogrammen für die DataList-Bearbeitung haben die DataList-Bearbeitungs Schnittstellen keine proaktive Validierung der Benutzereingaben eingeschlossen, obwohl ungültige Benutzereingaben, wie z. b. ein fehlender Produktname oder negativer Preis, zu einer Ausnahme führen.</span><span class="sxs-lookup"><span data-stu-id="164aa-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="164aa-109">Im [vorherigen Tutorial](handling-bll-and-dal-level-exceptions-vb.md) wurde erläutert, wie Sie dem DataList s-`UpdateCommand` Ereignishandler Ausnahme Behandlungs Code hinzufügen, um Informationen zu allen ausgelösten Ausnahmen zu erfassen und ordnungsgemäß anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="164aa-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-vb.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="164aa-110">Im Idealfall würde die Bearbeitungs Schnittstelle jedoch Validierungs Steuerelemente enthalten, um zu verhindern, dass ein Benutzer solche ungültigen Daten an erster Stelle eingibt.</span><span class="sxs-lookup"><span data-stu-id="164aa-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="164aa-111">In diesem Lernprogramm erfahren Sie, wie einfach es ist, dem DataList-`EditItemTemplate` Validierungs Steuerelemente hinzuzufügen, um eine Benutzeroberfläche mit einer weiteren narrensicher-Bearbeitung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="164aa-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="164aa-112">Insbesondere wird in diesem Tutorial das Beispiel erstellt, das im vorherigen Tutorial erstellt wurde, und die Bearbeitungs Schnittstelle wird so erweitert, dass Sie die entsprechende Validierung einschließt.</span><span class="sxs-lookup"><span data-stu-id="164aa-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptions"></a><span data-ttu-id="164aa-113">Schritt 1: Replizieren des Beispiels aus der[Behandlung von Ausnahmen auf BLL-und Dal-Ebene](handling-bll-and-dal-level-exceptions-vb.md)</span><span class="sxs-lookup"><span data-stu-id="164aa-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-vb.md)</span></span>

<span data-ttu-id="164aa-114">Im Tutorial [Behandeln von BLL-und Dal-Ebenen-Ausnahmen](handling-bll-and-dal-level-exceptions-vb.md) haben wir eine Seite erstellt, die die Namen und Preise der Produkte in einem bearbeitbaren DataList mit zwei Spalten aufführte.</span><span class="sxs-lookup"><span data-stu-id="164aa-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-vb.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="164aa-115">Unser Ziel dieses Tutorials besteht darin, die Bearbeitungs Schnittstelle von DataList zu erweitern, um Validierungs Steuerelemente einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="164aa-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="164aa-116">Die Validierungs Logik führt insbesondere Folgendes aus:</span><span class="sxs-lookup"><span data-stu-id="164aa-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="164aa-117">Der Name des Produkts muss angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="164aa-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="164aa-118">Stellen Sie sicher, dass der für den Preis eingegebene Wert ein gültiges Währungs Format ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="164aa-119">Stellen Sie sicher, dass der für den Preis eingegebene Wert größer oder gleich 0 (null) ist, da ein negativer `UnitPrice` Wert ungültig ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="164aa-120">Bevor wir uns mit der Erweiterung des vorherigen Beispiels befassen, um die Validierung einzuschließen, müssen wir zunächst das Beispiel von der Seite `ErrorHandling.aspx` im Ordner `EditDeleteDataList` auf die Seite für dieses Tutorial `UIValidation.aspx`replizieren.</span><span class="sxs-lookup"><span data-stu-id="164aa-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="164aa-121">Um dies zu erreichen, müssen sowohl das deklarative Markup der `ErrorHandling.aspx` Seite als auch der zugehörige Quellcode kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="164aa-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="164aa-122">Kopieren Sie zuerst das deklarative Markup, indem Sie die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="164aa-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="164aa-123">Öffnen der Seite "`ErrorHandling.aspx`" in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="164aa-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="164aa-124">Wechseln Sie zum deklarativen Markup der Seite (Klicken Sie unten auf der Seite auf die Schaltfläche Quelle).</span><span class="sxs-lookup"><span data-stu-id="164aa-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="164aa-125">Kopieren Sie den Text innerhalb der `<asp:Content>` und `</asp:Content>` Tags (Zeilen 3 bis 32), wie in Abbildung 1 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="164aa-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>

<span data-ttu-id="164aa-126">[![den Text innerhalb des &lt;ASP: Content&gt;-Steuer Elements kopieren](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="164aa-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image1.png)</span></span>

<span data-ttu-id="164aa-127">**Abbildung 2**: Kopieren des Texts innerhalb des `<asp:Content>` Steuer Elements ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="164aa-127">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image3.png))</span></span>

1. <span data-ttu-id="164aa-128">Öffnen der Seite "`UIValidation.aspx`"</span><span class="sxs-lookup"><span data-stu-id="164aa-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="164aa-129">Zum deklarativen Markup der Seite wechseln</span><span class="sxs-lookup"><span data-stu-id="164aa-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="164aa-130">Fügen Sie den Text in das `<asp:Content>`-Steuerelement ein.</span><span class="sxs-lookup"><span data-stu-id="164aa-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="164aa-131">Um den Quellcode zu kopieren, öffnen Sie die Seite `ErrorHandling.aspx.vb`, und kopieren Sie nur den Text *in* der `EditDeleteDataList_ErrorHandling`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="164aa-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="164aa-132">Kopieren Sie die drei Ereignishandler (`Products_EditCommand`, `Products_CancelCommand`und `Products_UpdateCommand`) zusammen mit der `DisplayExceptionDetails`-Methode, kopieren Sie jedoch **nicht** die Klassen Deklaration oder `using` Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="164aa-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="164aa-133">Fügen Sie den kopierten Text *innerhalb* der `EditDeleteDataList_UIValidation` Klasse in `UIValidation.aspx.vb`ein.</span><span class="sxs-lookup"><span data-stu-id="164aa-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="164aa-134">Nachdem Sie den Inhalt und den Code von `ErrorHandling.aspx` zu `UIValidation.aspx`verschoben haben, nehmen Sie sich einen Moment Zeit, um die Seiten in einem Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="164aa-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="164aa-135">Die gleiche Ausgabe sollte angezeigt werden, und es sollte dieselbe Funktionalität auf jeder dieser beiden Seiten angezeigt werden (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="164aa-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>

<span data-ttu-id="164aa-136">[![die Seite "uivalidation. aspx" die Funktionalität in ErrorHandling. aspx imitiert.](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="164aa-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image4.png)</span></span>

<span data-ttu-id="164aa-137">**Abbildung 2**: die `UIValidation.aspx` Seite imitiert die Funktionalität in `ErrorHandling.aspx` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="164aa-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image6.png))</span></span>

## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="164aa-138">Schritt 2: Hinzufügen der Validierungs Steuerelemente zum DataList s EditItemTemplate</span><span class="sxs-lookup"><span data-stu-id="164aa-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="164aa-139">Beim Erstellen von Dateneingabe Formularen ist es wichtig, dass Benutzer alle erforderlichen Felder eingeben und dass alle bereitgestellten Eingaben gültige und korrekt formatierte Werte sind.</span><span class="sxs-lookup"><span data-stu-id="164aa-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="164aa-140">Um sicherzustellen, dass die Eingaben eines Benutzers gültig sind, bietet ASP.net fünf integrierte Validierungs Steuerelemente, die zum Überprüfen des Werts eines einzelnen Eingabe-websteuer Elements entworfen wurden:</span><span class="sxs-lookup"><span data-stu-id="164aa-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="164aa-141">"Requirements [dfieldvalidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) " stellt sicher, dass ein Wert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="164aa-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="164aa-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) überprüft einen Wert mit einem anderen websteuer Elementwert oder einem konstanten Wert oder stellt sicher, dass das Format des Werts s für einen angegebenen Datentyp zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="164aa-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) stellt sicher, dass ein Wert innerhalb eines Wertebereichs liegt.</span><span class="sxs-lookup"><span data-stu-id="164aa-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="164aa-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) überprüft einen Wert anhand eines [regulären Ausdrucks](http://en.wikipedia.org/wiki/Regular_expression) .</span><span class="sxs-lookup"><span data-stu-id="164aa-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="164aa-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) überprüft einen Wert mit einer benutzerdefinierten benutzerdefinierten Methode.</span><span class="sxs-lookup"><span data-stu-id="164aa-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="164aa-146">Weitere Informationen zu diesen fünf Steuerelementen finden Sie im Tutorial [Hinzufügen von Validierungs Steuerelementen zum Bearbeitungs-und Einfügevorgang von Schnittstellen](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-vb.md) . Weitere Informationen finden Sie im [Abschnitt Validierungs Steuerelemente](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) der [ASP.net Quick Start-Tutorials](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="164aa-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-vb.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="164aa-147">Für unser Tutorial müssen wir ein "Requirements dfieldvalidator" verwenden, um sicherzustellen, dass ein Wert für den Produktnamen angegeben wurde, und ein CompareValidator, um sicherzustellen, dass der eingegebene Preis einen Wert größer oder gleich 0 hat und in einem gültigen Währungs Format vorliegt.</span><span class="sxs-lookup"><span data-stu-id="164aa-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="164aa-148">Obwohl ASP.NET 1. x dieselben fünf Validierungs Steuerelemente enthielt, hat ASP.NET 2,0 eine Reihe von Verbesserungen hinzugefügt, die beiden Hauptfunktionen, die Client seitige Skriptunterstützung für Browser zusätzlich zu Internet Explorer ist, sowie die Möglichkeit, Validierungs Steuerelemente auf einer Seite in zu partitionieren. Validierungs Gruppen.</span><span class="sxs-lookup"><span data-stu-id="164aa-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="164aa-149">Weitere Informationen zu den neuen Validierungs Steuerungsfunktionen in 2,0 finden Sie unter [Dissecting the Validation Controls in ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="164aa-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="164aa-150">Beginnen Sie, indem Sie dem DataList-`EditItemTemplate`die erforderlichen Validierungs Steuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="164aa-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="164aa-151">Diese Aufgabe kann über den Designer durchgeführt werden, indem Sie auf den Link Vorlagen bearbeiten aus dem DataList s-Smarttag oder die deklarative Syntax klicken.</span><span class="sxs-lookup"><span data-stu-id="164aa-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="164aa-152">Durchlaufen Sie den Prozess mithilfe der Option Vorlagen bearbeiten aus der Designansicht.</span><span class="sxs-lookup"><span data-stu-id="164aa-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="164aa-153">Nachdem Sie sich für die Bearbeitung der DataList s `EditItemTemplate`entschieden haben, fügen Sie ein "Requirements dfieldvalidator" hinzu, indem Sie es aus der Toolbox in die Vorlagen Bearbeitungs Schnittstelle ziehen und hinter das Textfeld "`ProductName`" platzieren.</span><span class="sxs-lookup"><span data-stu-id="164aa-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>

<span data-ttu-id="164aa-154">[![dem EditItemTemplate-Element nach dem ProductName-Textfeld ein "Requirements dfieldvalidator" hinzufügen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="164aa-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image7.png)</span></span>

<span data-ttu-id="164aa-155">**Abbildung 3**: Hinzufügen eines "Requirements dfieldvalidator" zum `EditItemTemplate After` das Textfeld "`ProductName`" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="164aa-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image9.png))</span></span>

<span data-ttu-id="164aa-156">Alle Validierungs Steuerelemente funktionieren, indem die Eingabe eines einzelnen ASP.net-websteuer Elements überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="164aa-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="164aa-157">Daher müssen wir angeben, dass das soeben hinzugefügte "Requirements dfieldvalidator" mit dem `ProductName` Textfeld überprüft werden soll. Dies erfolgt durch Festlegen der [`ControlToValidate` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) des Validierungs Steuer Elements auf die `ID` des entsprechenden websteuer Elements (`ProductName`in dieser Instanz).</span><span class="sxs-lookup"><span data-stu-id="164aa-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="164aa-158">Legen Sie als nächstes die [`ErrorMessage`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) auf fest. Sie müssen den Product s-Namen und die`Text`- [Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) angeben, um \*.</span><span class="sxs-lookup"><span data-stu-id="164aa-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="164aa-159">Der `Text`-Eigenschafts Wert (sofern vorhanden) ist der Text, der vom Validierungs Steuerelement angezeigt wird, wenn die Validierung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="164aa-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="164aa-160">Der `ErrorMessage`-Eigenschafts Wert, der erforderlich ist, wird vom ValidationSummary-Steuerelement verwendet. Wenn der `Text`-Eigenschafts Wert weggelassen wird, wird der `ErrorMessage`-Eigenschafts Wert vom Validierungs Steuerelement bei ungültiger Eingabe angezeigt.</span><span class="sxs-lookup"><span data-stu-id="164aa-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="164aa-161">Nachdem Sie diese drei Eigenschaften von "Requirements dfieldvalidator" festgelegt haben, sollte der Bildschirm in etwa wie in Abbildung 4 aussehen.</span><span class="sxs-lookup"><span data-stu-id="164aa-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>

<span data-ttu-id="164aa-162">[![die Eigenschaften "controldevalidate", "ErrorMessage" und "Text" von "Requirements dfieldvalidator" festlegen.](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="164aa-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image10.png)</span></span>

<span data-ttu-id="164aa-163">**Abbildung 4**: Festlegen der Eigenschaften "Requirements dfieldvalidator s `ControlToValidate`", "`ErrorMessage`" und "`Text`" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="164aa-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image12.png))</span></span>

<span data-ttu-id="164aa-164">Wenn das Element "Requirements dfieldvalidator" dem `EditItemTemplate`hinzugefügt wurde, müssen Sie nur noch die erforderliche Überprüfung für das Textfeld "Product s Price" hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="164aa-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="164aa-165">Da die `UnitPrice` beim Bearbeiten eines Datensatzes optional ist, müssen wir kein "Requirements dfieldvalidator" hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="164aa-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="164aa-166">Wir müssen jedoch ein CompareValidator hinzufügen, um sicherzustellen, dass die `UnitPrice`, falls angegeben, ordnungsgemäß als Währung formatiert ist und größer oder gleich 0 ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="164aa-167">Fügen Sie das CompareValidator in das `EditItemTemplate` ein, und legen Sie dessen `ControlToValidate`-Eigenschaft auf `UnitPrice`fest, dessen `ErrorMessage`-Eigenschaft auf den Preis größer oder gleich 0 (null) und nicht das Währungssymbol enthalten darf und dessen `Text`-Eigenschaft \*ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="164aa-168">Um anzugeben, dass der `UnitPrice` Wert größer oder gleich 0 sein muss, legen Sie die Eigenschaft CompareValidator s [`Operator`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) auf `GreaterThanEqual`, die [`ValueToCompare`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) auf 0 und deren [`Type`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) auf `Currency`fest.</span><span class="sxs-lookup"><span data-stu-id="164aa-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="164aa-169">Nach dem Hinzufügen dieser beiden Validierungs Steuerelemente sollte die deklarative Syntax DataList s `EditItemTemplate` s in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="164aa-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-vb/samples/sample1.aspx)]

<span data-ttu-id="164aa-170">Nachdem Sie diese Änderungen vorgenommen haben, öffnen Sie die Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="164aa-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="164aa-171">Wenn Sie versuchen, den Namen auszulassen oder einen ungültigen Preis einzugeben, wenn Sie ein Produkt bearbeiten, wird ein Sternchen neben dem Textfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="164aa-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="164aa-172">Wie in Abbildung 5 gezeigt, wird ein Preis Wert, der das Währungssymbol wie $19,95 enthält, als ungültig angesehen.</span><span class="sxs-lookup"><span data-stu-id="164aa-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="164aa-173">Das Vergleichs `Currency` `Type` ermöglicht Ziffern Trennzeichen (z. b. Kommas oder Zeiträume, abhängig von den Kultur Einstellungen) und ein führendes Plus-oder Minuszeichen, lässt jedoch *kein* Währungssymbol zu.</span><span class="sxs-lookup"><span data-stu-id="164aa-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="164aa-174">Dieses Verhalten kann Benutzer perplex sein, da die Bearbeitungs Schnittstelle die `UnitPrice` derzeit unter Verwendung des Währungs formats rendert.</span><span class="sxs-lookup"><span data-stu-id="164aa-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

<span data-ttu-id="164aa-175">[![ein Sternchen neben den Textfeldern mit ungültiger Eingabe angezeigt wird.](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="164aa-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image13.png)</span></span>

<span data-ttu-id="164aa-176">**Abbildung 5**: ein Sternchen wird neben den Textfeldern mit ungültiger Eingabe angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="164aa-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image15.png))</span></span>

<span data-ttu-id="164aa-177">Während die Überprüfung unverändert funktioniert, muss der Benutzer das Währungssymbol beim Bearbeiten eines Datensatzes manuell entfernen, was nicht zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="164aa-178">Wenn außerdem ungültige Eingaben in der Bearbeitungs Schnittstelle vorhanden sind, wird beim Klicken auf die Schaltflächen aktualisieren und Abbrechen ein Postback aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="164aa-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="164aa-179">Im Idealfall würde die Schaltfläche Abbrechen den DataList unabhängig von der Gültigkeit der Eingaben des Benutzers in den Zustand der vorabbearbeitung zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="164aa-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="164aa-180">Außerdem müssen Sie sicherstellen, dass die Seiten Daten gültig sind, bevor Sie die Produktinformationen im DataList-`UpdateCommand` Ereignishandler aktualisieren, da die Validierungs Steuerung der Client seitigen Logik von Benutzern umgangen werden kann, deren Browser entweder JavaScript unterstützen oder die Unterstützung deaktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="164aa-181">Entfernen des Währungs Symbols aus dem EditItemTemplate s UnitPrice-Textfeld</span><span class="sxs-lookup"><span data-stu-id="164aa-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="164aa-182">Bei der Verwendung des CompareValidator s `Currency``Type`dürfen die validierten Eingaben keine Währungssymbole enthalten.</span><span class="sxs-lookup"><span data-stu-id="164aa-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="164aa-183">Das vorhanden sein solcher Symbole bewirkt, dass das CompareValidator die Eingabe als ungültig markiert.</span><span class="sxs-lookup"><span data-stu-id="164aa-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="164aa-184">Allerdings enthält unsere Bearbeitungs Schnittstelle derzeit ein Währungssymbol in das Textfeld "`UnitPrice`". Dies bedeutet, dass der Benutzer das Währungssymbol explizit entfernen muss, bevor die Änderungen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="164aa-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="164aa-185">Um dieses Problem zu beheben, haben wir drei Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="164aa-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="164aa-186">Konfigurieren Sie die `EditItemTemplate` so, dass der Wert für `UnitPrice` Textfeld nicht als Währung formatiert ist.</span><span class="sxs-lookup"><span data-stu-id="164aa-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="164aa-187">Ermöglicht es dem Benutzer, ein Währungssymbol einzugeben, indem das CompareValidator entfernt und durch ein RegularExpressionValidator ersetzt wird, das einen ordnungsgemäß formatierten Währungswert überprüft.</span><span class="sxs-lookup"><span data-stu-id="164aa-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="164aa-188">Die Herausforderung besteht darin, dass der reguläre Ausdruck zum Überprüfen eines Währungs Werts nicht so einfach wie das CompareValidator ist und Code schreiben muss, wenn Kultur Einstellungen integriert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="164aa-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="164aa-189">Entfernen Sie das Validierungs Steuerelement vollständig, und verlassen Sie sich auf eine benutzerdefinierte serverseitige Validierungs Logik im GridView s `RowUpdating`-Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="164aa-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="164aa-190">Verwenden Sie für dieses Tutorial die Option 1.</span><span class="sxs-lookup"><span data-stu-id="164aa-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="164aa-191">Der `UnitPrice` wird derzeit aufgrund des Datenbindung-Ausdrucks für das Textfeld in der `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`als Währungswert formatiert.</span><span class="sxs-lookup"><span data-stu-id="164aa-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="164aa-192">Ändern Sie die `Eval`-Anweisung in `Eval("UnitPrice", "{0:n2}")`, wodurch das Ergebnis als Zahl mit zwei Ziffern der Genauigkeit formatiert wird.</span><span class="sxs-lookup"><span data-stu-id="164aa-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="164aa-193">Dies kann direkt über die deklarative Syntax erfolgen oder durch Klicken auf den Link "DataBindings bearbeiten" im Textfeld "`UnitPrice`" in der `EditItemTemplate`DataList s.</span><span class="sxs-lookup"><span data-stu-id="164aa-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="164aa-194">Durch diese Änderung schließt der formatierte Preis in der Bearbeitungs Schnittstelle Kommas als Trennzeichen für die Gruppe und einen Punkt als Dezimaltrennzeichen ein, aber verlässt das Währungssymbol.</span><span class="sxs-lookup"><span data-stu-id="164aa-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="164aa-195">Wenn Sie das Währungs Format aus der editierbaren Schnittstelle entfernen, ist es hilfreich, das Währungssymbol als Text außerhalb des Textfelds zu platzieren.</span><span class="sxs-lookup"><span data-stu-id="164aa-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="164aa-196">Dies dient als Hinweis für den Benutzer, dass Sie das Währungssymbol nicht angeben müssen.</span><span class="sxs-lookup"><span data-stu-id="164aa-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>

## <a name="fixing-the-cancel-button"></a><span data-ttu-id="164aa-197">Reparieren der Schaltfläche "Abbrechen"</span><span class="sxs-lookup"><span data-stu-id="164aa-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="164aa-198">Standardmäßig geben die Validierungs-websteuer Elemente JavaScript aus, um die Client seitige Validierung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="164aa-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="164aa-199">Wenn Sie auf eine Schaltfläche, einen LinkButton oder eine ImageButton-Taste klicken, werden die Validierungs Steuerelemente auf der Seite auf der Clientseite überprüft, bevor das Postback auftritt.</span><span class="sxs-lookup"><span data-stu-id="164aa-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="164aa-200">Wenn ungültige Daten vorhanden sind, wird das Postback abgebrochen.</span><span class="sxs-lookup"><span data-stu-id="164aa-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="164aa-201">Für bestimmte Schaltflächen kann jedoch die Gültigkeit der Daten unerheblich sein. in einem solchen Fall ist das Rück streichen des Postbacks aufgrund ungültiger Daten ein Ärgernis.</span><span class="sxs-lookup"><span data-stu-id="164aa-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="164aa-202">Die Schaltfläche Abbrechen ist ein Beispiel.</span><span class="sxs-lookup"><span data-stu-id="164aa-202">The Cancel button is such an example.</span></span> <span data-ttu-id="164aa-203">Stellen Sie sich vor, dass ein Benutzer ungültige Daten eingibt, z. b. den Namen des Produkts weglassen und dann entscheidet, dass er das Produkt nicht mehr speichern möchte, und dann auf die Schaltfläche Abbrechen.</span><span class="sxs-lookup"><span data-stu-id="164aa-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="164aa-204">Die Schaltfläche Abbrechen löst aktuell die Validierungs Steuerelemente auf der Seite aus, die melden, dass der Produktname fehlt und das Postback verhindert wird.</span><span class="sxs-lookup"><span data-stu-id="164aa-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="164aa-205">Der Benutzer muss Text in das Textfeld "`ProductName`" eingeben, um den Bearbeitungsprozess abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="164aa-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="164aa-206">Glücklicherweise verfügen die Schaltfläche, LinkButton und ImageButton über eine [`CausesValidation`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) , die angeben kann, ob durch Klicken auf die Schaltfläche die Validierungs Logik (standardmäßig `True`) initiiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="164aa-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="164aa-207">Legen Sie die Schaltfläche "Abbrechen" `CausesValidation`-Eigenschaft auf `False`fest.</span><span class="sxs-lookup"><span data-stu-id="164aa-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="164aa-208">Sicherstellen, dass die Eingaben im UpdateCommand-Ereignis Handler gültig sind</span><span class="sxs-lookup"><span data-stu-id="164aa-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="164aa-209">Aufgrund des Client seitigen Skripts, das von den Validierungs Steuerelementen ausgegeben wird, werden durch die Validierungs Steuerelemente alle Postbacks abgebrochen, die von Schaltflächen-, LinkButton-oder ImageButton-Steuerelementen initiiert werden, deren `CausesValidation` Eigenschaften `True` (Standard) sind.</span><span class="sxs-lookup"><span data-stu-id="164aa-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="164aa-210">Wenn ein Benutzer jedoch mit einem veralteten Browser oder einem, dessen JavaScript-Unterstützung deaktiviert ist, nicht ausgeführt wird, werden die Client seitigen Validierungs Überprüfungen nicht ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="164aa-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="164aa-211">Alle ASP.net-Validierungs Steuerelemente wiederholen ihre Validierungs Logik sofort nach dem Postback und melden die Gesamt Gültigkeit der Seiten Eingaben über die [`Page.IsValid`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="164aa-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="164aa-212">Der Seiten Fluss wird jedoch in keiner Weise unterbrochen oder angehalten, basierend auf dem Wert `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="164aa-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="164aa-213">Als Entwickler müssen Sie sicherstellen, dass die `Page.IsValid`-Eigenschaft den Wert `True` hat, bevor Sie mit Code fortfahren, der gültige Eingabedaten annimmt.</span><span class="sxs-lookup"><span data-stu-id="164aa-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="164aa-214">Wenn ein Benutzer JavaScript deaktiviert hat, besucht unsere Seite, bearbeitet ein Produkt, gibt einen Preis Wert von zu teuer ein und klickt auf die Schaltfläche "Aktualisieren". die Client seitige Validierung wird umgangen, und ein Postback wird durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="164aa-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="164aa-215">Beim Postback führt der ASP.net page s-`UpdateCommand` Ereignishandler aus, und es wird eine Ausnahme ausgelöst, wenn versucht wird, eine zu teure `Decimal`zu analysieren.</span><span class="sxs-lookup"><span data-stu-id="164aa-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="164aa-216">Da eine Ausnahmebehandlung auftritt, wird eine solche Ausnahme ordnungsgemäß behandelt, aber wir könnten verhindern, dass die ungültigen Daten an erster `UpdateCommand` Stelle durchlaufen werden, wenn `Page.IsValid` den Wert `True`hat.</span><span class="sxs-lookup"><span data-stu-id="164aa-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="164aa-217">Fügen Sie am Anfang des `UpdateCommand` Ereignis Handlers direkt vor dem `Try` Block den folgenden Code ein:</span><span class="sxs-lookup"><span data-stu-id="164aa-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>

[!code-vb[Main](adding-validation-controls-to-the-datalist-s-editing-interface-vb/samples/sample2.vb)]

<span data-ttu-id="164aa-218">Mit dieser Addition wird nur dann versucht, das Produkt zu aktualisieren, wenn die übermittelten Daten gültig sind.</span><span class="sxs-lookup"><span data-stu-id="164aa-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="164aa-219">Die meisten Benutzer können aufgrund der Überprüfungs Steuerung Client seitige Skripts keine ungültigen Daten zurücksenden, aber Benutzer, deren Browser JavaScript nicht unterstützen oder die JavaScript-Unterstützung deaktiviert haben, können die Client seitigen Überprüfungen umgehen und ungültige Daten übermitteln.</span><span class="sxs-lookup"><span data-stu-id="164aa-219">Most users won't be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="164aa-220">Der Leser erinnert sich daran, dass wir beim Aktualisieren von Daten mit der GridView nicht explizit die `Page.IsValid`-Eigenschaft in der Code Behind-Klasse der Page s überprüfen müssen.</span><span class="sxs-lookup"><span data-stu-id="164aa-220">The astute reader will recall that when updating data with the GridView, we didn't need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="164aa-221">Dies liegt daran, dass die GridView die `Page.IsValid`-Eigenschaft für uns konsultiert und nur mit dem Update fort fährt, wenn Sie den Wert `True`zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="164aa-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>

## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="164aa-222">Schritt 3: Zusammenfassen von Dateneingabe Problemen</span><span class="sxs-lookup"><span data-stu-id="164aa-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="164aa-223">Zusätzlich zu den fünf Validierungs Steuerelementen enthält ASP.NET das [ValidationSummary-Steuer](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx)Element, das die `ErrorMessage` en dieser Validierungs Steuerelemente anzeigt, die ungültige Daten erkannt haben.</span><span class="sxs-lookup"><span data-stu-id="164aa-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="164aa-224">Diese Zusammenfassungs Daten können als Text auf der Webseite oder über eine modale Client seitige MessageBox angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="164aa-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="164aa-225">Verbessern Sie dieses Lernprogramm, um eine Client seitige MessageBox mit einer Zusammenfassung aller Überprüfungs Probleme zu schließen.</span><span class="sxs-lookup"><span data-stu-id="164aa-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="164aa-226">Ziehen Sie hierzu ein ValidationSummary-Steuerelement aus der Toolbox auf den Designer.</span><span class="sxs-lookup"><span data-stu-id="164aa-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="164aa-227">Der Speicherort des ValidationSummary-Steuer Elements ist nicht wirklich wichtig, da wir ihn so konfigurieren, dass nur die Zusammenfassung als MessageBox angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="164aa-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="164aa-228">Legen Sie nach dem Hinzufügen des Steuer Elements seine [`ShowSummary`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) auf `False` und dessen [`ShowMessageBox`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) auf `True`fest.</span><span class="sxs-lookup"><span data-stu-id="164aa-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="164aa-229">Mit dieser Addition werden alle Validierungs Fehler in einer Client seitigen MessageBox zusammengefasst (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="164aa-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>

<span data-ttu-id="164aa-230">[![werden die Validierungs Fehler in einer Client seitigen MessageBox zusammengefasst.](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="164aa-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image16.png)</span></span>

<span data-ttu-id="164aa-231">**Abbildung 6**: die Validierungs Fehler werden in einer Client seitigen MessageBox zusammengefasst ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="164aa-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-vb/_static/image18.png))</span></span>

## <a name="summary"></a><span data-ttu-id="164aa-232">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="164aa-232">Summary</span></span>

<span data-ttu-id="164aa-233">In diesem Tutorial wurde erläutert, wie Sie die Wahrscheinlichkeit von Ausnahmen verringern, indem Sie Validierungs Steuerelemente verwenden, um proaktiv sicherzustellen, dass unsere Benutzereingaben gültig sind, bevor Sie versuchen, Sie im Aktualisierungs Workflow zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="164aa-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="164aa-234">ASP.net bietet fünf Validierungs-websteuer Elemente, die entworfen wurden, um eine bestimmte websteuer Element Eingaben zu überprüfen und die Gültigkeit der Eingaben zu melden.</span><span class="sxs-lookup"><span data-stu-id="164aa-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="164aa-235">In diesem Tutorial haben wir zwei dieser fünf Steuerelemente verwendet: "Requirements dfieldvalidator" und "CompareValidator", um sicherzustellen, dass der Name des Produkts angegeben wurde und dass der Preis ein Währungs Format mit einem Wert größer oder gleich 0 (null) aufweist.</span><span class="sxs-lookup"><span data-stu-id="164aa-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="164aa-236">Das Hinzufügen von Validierungs Steuerelementen zur Bearbeitungs Schnittstelle von DataList s ist so einfach wie das Ziehen auf die `EditItemTemplate` aus der Toolbox und das Festlegen einiger Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="164aa-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="164aa-237">Standardmäßig geben die Validierungs Steuerelemente automatisch Client seitiges Validierungs Skript aus. Außerdem wird die serverseitige Validierung für das Postback bereitgestellt, wobei das kumulative Ergebnis in der `Page.IsValid`-Eigenschaft gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="164aa-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="164aa-238">Um die Client seitige Validierung zu umgehen, wenn Sie auf eine Schaltfläche, einen LinkButton oder einen ImageButton klicken, legen Sie die Schaltfläche s `CausesValidation`-Eigenschaft auf `False`fest.</span><span class="sxs-lookup"><span data-stu-id="164aa-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="164aa-239">Stellen Sie vor dem Ausführen von Aufgaben mit den Daten, die beim Postback übermittelt werden, sicher, dass die `Page.IsValid`-Eigenschaft `True`zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="164aa-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="164aa-240">Alle bisher untersuchten DataList-Bearbeitungs Lernprogramme haben eine TextBox für den Product s-Namen und eine andere für den Preis.</span><span class="sxs-lookup"><span data-stu-id="164aa-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="164aa-241">Die Bearbeitungs Schnittstelle kann jedoch eine Mischung verschiedener websteuer Elemente enthalten, wie z. b. Dropdown Listen, Kalender, Radiobuttons, Kontrollkästchen usw.</span><span class="sxs-lookup"><span data-stu-id="164aa-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="164aa-242">Im nächsten Tutorial betrachten wir das Entwickeln einer Schnittstelle, die eine Vielzahl von websteuer Elementen verwendet.</span><span class="sxs-lookup"><span data-stu-id="164aa-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="164aa-243">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="164aa-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="164aa-244">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="164aa-244">About the Author</span></span>

<span data-ttu-id="164aa-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="164aa-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="164aa-246">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="164aa-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="164aa-247">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="164aa-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="164aa-248">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="164aa-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="164aa-249">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="164aa-249">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="164aa-250">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="164aa-250">Special Thanks To</span></span>

<span data-ttu-id="164aa-251">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="164aa-251">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="164aa-252">Führende Prüfer für dieses Tutorial waren Dennis Patterson, Ken pespisa und Liz shulok.</span><span class="sxs-lookup"><span data-stu-id="164aa-252">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="164aa-253">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="164aa-253">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="164aa-254">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="164aa-254">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="164aa-255">[Zurück](handling-bll-and-dal-level-exceptions-vb.md)
> [Weiter](customizing-the-datalist-s-editing-interface-vb.md)</span><span class="sxs-lookup"><span data-stu-id="164aa-255">[Previous](handling-bll-and-dal-level-exceptions-vb.md)
[Next](customizing-the-datalist-s-editing-interface-vb.md)</span></span>
