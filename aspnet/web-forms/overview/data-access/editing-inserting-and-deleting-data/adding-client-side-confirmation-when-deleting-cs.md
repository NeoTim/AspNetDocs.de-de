---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
title: Hinzufügen von clientseitiger Bestätigung beim Löschen von (C#) | Microsoft-Dokumentation
author: rick-anderson
description: In den Schnittstellen, die wir bisher erstellt haben, kann ein Benutzer versehentlich löschen von Daten durch Klicken auf die Schaltfläche "löschen", wenn sie auf die Schaltfläche "Bearbeiten" klicken, bestimmt. In diesen Typ t...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: f6e2a12a-2b5e-48fd-8db3-1e94a500c19a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: a3e35e7b27d646569692a2eb715dcf40b7967473
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/25/2019
ms.locfileid: "58423194"
---
<a name="adding-client-side-confirmation-when-deleting-c"></a><span data-ttu-id="54f75-104">Hinzufügen von clientseitiger Bestätigung beim Löschen (C#)</span><span class="sxs-lookup"><span data-stu-id="54f75-104">Adding Client-Side Confirmation When Deleting (C#)</span></span>
====================
<span data-ttu-id="54f75-105">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="54f75-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="54f75-106">[Beispiel-App herunter](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) oder [PDF-Datei herunterladen](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="54f75-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span></span>

> <span data-ttu-id="54f75-107">In den Schnittstellen, die wir bisher erstellt haben, kann ein Benutzer versehentlich löschen von Daten durch Klicken auf die Schaltfläche "löschen", wenn sie auf die Schaltfläche "Bearbeiten" klicken, bestimmt.</span><span class="sxs-lookup"><span data-stu-id="54f75-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="54f75-108">In diesem Tutorial fügen wir ein Dialogfeld von clientseitiger Bestätigung, die angezeigt wird, wenn die Schaltfläche Löschen geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="54f75-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>


## <a name="introduction"></a><span data-ttu-id="54f75-109">Einführung</span><span class="sxs-lookup"><span data-stu-id="54f75-109">Introduction</span></span>

<span data-ttu-id="54f75-110">Über die letzten mehrere Lernprogramme wir haben gesehen, wie Sie unsere Anwendungsarchitektur, "ObjectDataSource" und die Daten Websteuerelemente gemeinsam zum Bereitstellen von einfügen, bearbeiten und Löschen von Funktionen zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="54f75-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="54f75-111">Das Löschen von Schnittstellen wir untersucht haben bisher war ein Löschvorgang aus-Schaltfläche geklickt wird, führt dazu, dass einen Postback aus, und ruft die "ObjectDataSource"-s `Delete()` Methode.</span><span class="sxs-lookup"><span data-stu-id="54f75-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="54f75-112">Die `Delete()` Methode ruft dann die konfigurierten-Methode aus der Business Logic Layer, dem den Aufruf an die Datenzugriffsebene, die die tatsächliche Ausgabe überträgt `DELETE` Anweisung an die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="54f75-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="54f75-113">Während dieser Benutzeroberfläche Besucher zum Löschen von Datensätzen durch die GridView, DetailsView oder FormView-Steuerelemente ermöglicht, fehlt ein beliebiges Bestätigung klickt der Benutzer die Schaltfläche "löschen".</span><span class="sxs-lookup"><span data-stu-id="54f75-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="54f75-114">Wenn ein Benutzer versehentlich klickt bearbeiten Sie die Schaltfläche "löschen", wenn sie klicken sollen, wird der Datensatz, den sie aktualisieren soll stattdessen gelöscht.</span><span class="sxs-lookup"><span data-stu-id="54f75-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="54f75-115">Damit dies vermieden werden in diesem Tutorial fügen wir ein Dialogfeld von clientseitiger Bestätigung, die angezeigt wird, wenn die Schaltfläche Löschen geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="54f75-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="54f75-116">Das JavaScript `confirm(string)` Funktion zeigt die Zeichenfolgen-Eingabeparameter an, wie der Text innerhalb eines modalen Dialogfelds, das ist gut mit zwei Schaltflächen - ausgestattet und Abbrechen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="54f75-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="54f75-117">Die `confirm(string)` Funktionsergebnis ist einen booleschen Wert, je nachdem, welche Schaltfläche geklickt wird (`true`, wenn der Benutzer auf OK klickt und `false` Wenn sie auf "Abbrechen" klicken).</span><span class="sxs-lookup"><span data-stu-id="54f75-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>


![Die JavaScript-confirm(string) Methode zeigt ein modales, Client-Side-Messagebox](adding-client-side-confirmation-when-deleting-cs/_static/image1.png)

<span data-ttu-id="54f75-119">**Abbildung 1**: Das JavaScript `confirm(string)` Methode zeigt ein modales, clientseitige Messagebox an.</span><span class="sxs-lookup"><span data-stu-id="54f75-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>


<span data-ttu-id="54f75-120">Während einer Formularübergabe, wenn ein Wert von `false` von einem clientseitigen Ereignis-Handler zurückgegeben wird, und klicken Sie dann die Übermittlung des Formulars abgebrochen wird.</span><span class="sxs-lookup"><span data-stu-id="54f75-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="54f75-121">Mit dieser Funktion können wir haben der löschen-Schaltfläche "," s-Clientseite `onclick` -Ereignishandler den Rückgabewert eines Aufrufs von `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="54f75-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="54f75-122">Wenn der Benutzer auf "Abbrechen", klickt `confirm(string)` gibt "false", wodurch verursacht die Übermittlung des Formulars zum abzubrechen.</span><span class="sxs-lookup"><span data-stu-id="54f75-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="54f75-123">Kein Postback nicht des Produkts, dessen löschen-Schaltfläche geklickt wurde, gelöscht.</span><span class="sxs-lookup"><span data-stu-id="54f75-123">With no postback, the product whose Delete button was clicked won't be deleted.</span></span> <span data-ttu-id="54f75-124">Wenn jedoch der Benutzer in das Dialogfeld zur Bestätigung auf OK klickt, wird das Postback ungehindert und das Produkt gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="54f75-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="54f75-125">Wenden Sie sich an [Verwenden von JavaScript-s `confirm()` Methode, um die Formularübermittlung Steuerelement](http://www.webreference.com/programming/javascript/confirm/) für Weitere Informationen zu dieser Technik.</span><span class="sxs-lookup"><span data-stu-id="54f75-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="54f75-126">Hinzufügen der erforderlichen Client-seitige Skript unterscheidet sich geringfügig bei Verwendung von Vorlagen als bei der Verwendung einer CommandField.</span><span class="sxs-lookup"><span data-stu-id="54f75-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="54f75-127">Aus diesem Grund wird in diesem Tutorial sowohl einen FormView und GridView-Beispiel betrachten wir.</span><span class="sxs-lookup"><span data-stu-id="54f75-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="54f75-128">Mit clientseitiger Bestätigung Techniken wird vorausgesetzt, dass wie die in diesem Tutorial erläutert, dass Ihre Benutzer mit Browsern besuchen, die JavaScript-Unterstützung, dass JavaScript aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="54f75-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="54f75-129">Wenn eine der Annahmen nicht "true" für einen bestimmten Benutzer sind, wird Sie auf die Schaltfläche "löschen" sofort einen Postback (nicht angezeigt. eine Messagebox bestätigen) führen.</span><span class="sxs-lookup"><span data-stu-id="54f75-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>


## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="54f75-130">Schritt 1: Erstellen von einem FormView-Steuerelement, unterstützt löschen</span><span class="sxs-lookup"><span data-stu-id="54f75-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="54f75-131">Starten, indem einem FormView-Steuerelement, Hinzufügen der `ConfirmationOnDelete.aspx` auf der Seite die `EditInsertDelete` Ordner Binden an eine neue "ObjectDataSource", die die Produktinformationen über wieder bezieht die `ProductsBLL` s-Klasse `GetProducts()` Methode.</span><span class="sxs-lookup"><span data-stu-id="54f75-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="54f75-132">Auch dem ObjectDataSource-Steuerelement konfigurieren, damit die `ProductsBLL` s-Klasse `DeleteProduct(productID)` -Methode zugeordnet ist, der "ObjectDataSource"-s `Delete()` Methode stellen Sie sicher, dass die INSERT- und UPDATE-Registerkarten, Dropdownlisten auf (keine) festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="54f75-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="54f75-133">Überprüfen Sie abschließend das Kontrollkästchen Paging aktivieren, in das FormView-s-Smarttag.</span><span class="sxs-lookup"><span data-stu-id="54f75-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="54f75-134">Nach diesen Schritten wird die neue "ObjectDataSource" s deklarative Markup wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="54f75-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample1.aspx)]

<span data-ttu-id="54f75-135">Wie in unseren früheren Beispielen, die nicht die vollständigen Parallelität verwendet haben, können Sie das "ObjectDataSource"-s löschen `OldValuesParameterFormatString` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="54f75-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="54f75-136">Da es an ein ObjectDataSource-Steuerelement, das nur löschen gebunden wurde unterstützt "," der FormView-s `ItemTemplate` bietet nur die Schaltfläche "löschen", fehlt der Schaltflächen "Neu" und "Update".</span><span class="sxs-lookup"><span data-stu-id="54f75-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="54f75-137">Die FormView s deklarative Markup, enthält jedoch eine überflüssige `EditItemTemplate` und `InsertItemTemplate`, die entfernt werden kann.</span><span class="sxs-lookup"><span data-stu-id="54f75-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="54f75-138">Anpassen in Ruhe die `ItemTemplate` also d.h. zeigt nur eine Teilmenge des Produkts Datenfelder.</span><span class="sxs-lookup"><span data-stu-id="54f75-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="54f75-139">Ich Ve konfiguriert Meine zum Anzeigen der Produktnamen s in eine `<h3>` Überschrift über seine Namen "Supplier" und "Category" (zusammen mit der Schaltfläche "löschen").</span><span class="sxs-lookup"><span data-stu-id="54f75-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample2.aspx)]

<span data-ttu-id="54f75-140">Mit diesen Änderungen haben wir eine voll funktionsfähige Webseite, die einem Benutzer ermöglicht, über die Produkte einer gleichzeitig die Möglichkeit, ein Produkt zu löschen, indem Sie einfach die Schaltfläche "löschen" umschalten.</span><span class="sxs-lookup"><span data-stu-id="54f75-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="54f75-141">Abbildung 2 zeigt einen Screenshot des unseren Fortschritt bisher ein, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="54f75-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="54f75-142">[![Die FormView-Steuerelement zeigt Informationen zu einem einzigen Produkt](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="54f75-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span></span>

<span data-ttu-id="54f75-143">**Abbildung 2**: Die FormView-Steuerelement zeigt Informationen über ein einzelnes Produkt ([klicken Sie, um das Bild in voller Größe anzeigen](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="54f75-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span></span>


## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="54f75-144">Schritt 2: Aufrufen der Funktion confirm(string) aus dem Löschen von Schaltflächen der clientseitigen Onclick-Ereignis</span><span class="sxs-lookup"><span data-stu-id="54f75-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="54f75-145">Mit der FormView-Steuerelement erstellt, der der letzte Schritt ist so konfigurieren Sie die Schaltfläche "löschen" solche, die bei es s geklickt wird, um dem Besucher angezeigt, den JavaScript-Code `confirm(string)` Funktion wird aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="54f75-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="54f75-146">Hinzufügen des clientseitigen Skripts auf eine Schaltfläche, LinkButton oder ImageButton s clientseitige `onclick` Ereignis kann erreicht werden, mithilfe des der `OnClientClick property`, das ist neu in ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="54f75-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="54f75-147">Da wir den Wert des möchten der `confirm(string)` -Funktion zurückgegeben hat, legen Sie einfach diese Eigenschaft auf: `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="54f75-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="54f75-148">Nach dieser Änderung sollte die deklarative Syntax des löschen LinkButton-s wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="54f75-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample3.aspx)]

<span data-ttu-id="54f75-149">Alles, was, s wird es!</span><span class="sxs-lookup"><span data-stu-id="54f75-149">That s all there is to it!</span></span> <span data-ttu-id="54f75-150">Abbildung 3 zeigt einen Screenshot des dieser Bestätigung in Aktion.</span><span class="sxs-lookup"><span data-stu-id="54f75-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="54f75-151">Durch Klicken auf die Schaltfläche "löschen" wird im Dialogfeld bestätigen.</span><span class="sxs-lookup"><span data-stu-id="54f75-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="54f75-152">Wenn der Benutzer auf "Abbrechen" klickt, das Postback abgebrochen, und das Produkt wird nicht gelöscht.</span><span class="sxs-lookup"><span data-stu-id="54f75-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="54f75-153">Wenn Sie jedoch die Benutzer auf OK klickt, wird das Postback fortgesetzt und das "ObjectDataSource"-s `Delete()` Methode aufgerufen wird, verbessert den Datenbank-Datensatz gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="54f75-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="54f75-154">Die übergebene Zeichenfolge in die `confirm(string)` JavaScript-Funktion mit Apostrophe (und nicht mit Anführungszeichen) als Trennzeichen dient.</span><span class="sxs-lookup"><span data-stu-id="54f75-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="54f75-155">In JavaScript können Zeichenfolgen mithilfe der beiden Zeichen getrennt werden.</span><span class="sxs-lookup"><span data-stu-id="54f75-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="54f75-156">Wir verwenden Apostrophe hier, sodass die Trennzeichen für die Zeichenfolge übergeben `confirm(string)` führen eine Mehrdeutigkeit mit Trennzeichen verwendet werden, für die `OnClientClick` Eigenschaftswert.</span><span class="sxs-lookup"><span data-stu-id="54f75-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>


<span data-ttu-id="54f75-157">[![Eine Bestätigung wird jetzt angezeigt, wenn durch Klicken auf die Schaltfläche "löschen"](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="54f75-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="54f75-158">**Abbildung 3**: Eine Bestätigung wird jetzt angezeigt, wenn durch Klicken auf die Schaltfläche "löschen" ([klicken Sie, um das Bild in voller Größe anzeigen](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="54f75-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span></span>


## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="54f75-159">Schritt 3: Konfigurieren die OnClientClick-Eigenschaft für die Schaltfläche "löschen" in einem CommandField</span><span class="sxs-lookup"><span data-stu-id="54f75-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="54f75-160">Bei der Arbeit mit einer Schaltfläche, LinkButton oder ImageButton direkt in eine Vorlage ein Bestätigungsdialogfeld kann zugeordnet werden es einfach konfigurieren die `OnClientClick` Eigenschaft, um den JavaScript-Code zurückgeben, `confirm(string)` Funktion.</span><span class="sxs-lookup"><span data-stu-id="54f75-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="54f75-161">Die CommandField - Dadurch wird ein Feld von Schaltflächen zum Löschen einem GridView- oder DetailsView hinzugefügt – verfügt jedoch nicht über eine `OnClientClick` -Eigenschaft, die deklarativ festgelegt werden kann.</span><span class="sxs-lookup"><span data-stu-id="54f75-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="54f75-162">Verweisen Sie stattdessen wir müssen programmgesteuert auf die Schaltfläche "löschen" in den entsprechenden GridView- oder DetailsView s `DataBound` -Ereignishandler, und legen dessen `OnClientClick` Eigenschaft vorhanden.</span><span class="sxs-lookup"><span data-stu-id="54f75-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="54f75-163">Beim Festlegen der Schaltfläche "löschen" s `OnClientClick` Eigenschaft in den entsprechenden `DataBound` -Ereignishandler haben Zugriff auf die Daten auf den aktuellen Datensatz gebunden wurde.</span><span class="sxs-lookup"><span data-stu-id="54f75-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="54f75-164">Dies bedeutet, dass wir die bestätigungsmeldung angezeigt, um Details zu den entsprechenden Datensatz aus, z. B. einzuschließen, "Sind Sie sicher, dass Sie das Produkt Chai löschen möchten?" erweitern können</span><span class="sxs-lookup"><span data-stu-id="54f75-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="54f75-165">Eine solche Anpassung kann auch in Vorlagen, die mithilfe der Datenbindungssyntax.</span><span class="sxs-lookup"><span data-stu-id="54f75-165">Such customization is also possible in templates using databinding syntax.</span></span>


<span data-ttu-id="54f75-166">Einstellung der Methode die `OnClientClick` -Eigenschaft für die Delete-Tasten in einem CommandField, Let s Hinzufügen einer GridView-Ansicht auf der Seite.</span><span class="sxs-lookup"><span data-stu-id="54f75-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="54f75-167">Konfigurieren Sie diese GridView Verwendung derselbe ObjectDataSource-Steuerelement, das das FormView-Steuerelement verwendet.</span><span class="sxs-lookup"><span data-stu-id="54f75-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="54f75-168">Auch einschränken Sie, die GridView s BoundFields sollen nur die Product-s-Name, Kategorie und Lieferanten.</span><span class="sxs-lookup"><span data-stu-id="54f75-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="54f75-169">Schließlich das Kontrollkästchen Sie aktivieren Sie das Löschen aus dem GridView-s-Smarttag.</span><span class="sxs-lookup"><span data-stu-id="54f75-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="54f75-170">Dadurch wird eine CommandField hinzugefügt, der GridView-s `Columns` Sammlung mit der `ShowDeleteButton` -Eigenschaftensatz auf `true`.</span><span class="sxs-lookup"><span data-stu-id="54f75-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="54f75-171">Nach diesen Änderungen sollte Ihre GridView s deklarative Markup wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="54f75-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample4.aspx)]

<span data-ttu-id="54f75-172">Die CommandField enthält eine einzelne löschen LinkButton-Instanz, die von der GridView-s programmgesteuert zugegriffen werden kann `RowDataBound` -Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="54f75-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="54f75-173">Nachdem Sie auf die verwiesen wird, können wir Festlegen seiner `OnClientClick` Eigenschaft entsprechend.</span><span class="sxs-lookup"><span data-stu-id="54f75-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="54f75-174">Erstellen Sie einen Ereignishandler für die `RowDataBound` Ereignis mit dem folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="54f75-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample5.cs)]

<span data-ttu-id="54f75-175">Dieser Ereignishandler arbeitet mit Datenzeilen (diejenigen, die die Schaltfläche "löschen" hat) und durch Programmgesteuertes Verweisen auf die Schaltfläche "löschen" beginnt.</span><span class="sxs-lookup"><span data-stu-id="54f75-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="54f75-176">Verwenden Sie im Allgemeinen das folgende Muster:</span><span class="sxs-lookup"><span data-stu-id="54f75-176">In general use the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample6.cs)]

<span data-ttu-id="54f75-177">*ButtonType* ist der Typ der Schaltfläche, die von der CommandField - Schaltfläche, LinkButton oder ImageButton verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="54f75-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="54f75-178">Standardmäßig verwendet die CommandField LinkButtons, aber dies kann angepasst werden, über die CommandField s `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="54f75-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="54f75-179">Die *CommandFieldIndex* ist der Ordinalindex des der CommandField in den GridView-s `Columns` Sammlung, während die *ControlIndex* ist der Schnittstellenindex der Schaltfläche "löschen" in der CommandField s `Controls` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="54f75-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="54f75-180">Die *ControlIndex* Wert hängt von der Schaltfläche "s" Position relativ zu anderen Schaltflächen in der CommandField.</span><span class="sxs-lookup"><span data-stu-id="54f75-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="54f75-181">Beispielsweise ist die einzige Schaltfläche in der CommandField angezeigt auf die Schaltfläche "löschen", verwenden Sie einen Index 0.</span><span class="sxs-lookup"><span data-stu-id="54f75-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="54f75-182">Wenn Sie jedoch, gibt es s eine Schaltfläche "Bearbeiten", das die Schaltfläche "löschen" vorangestellt ist einen Index der-verwenden 2.</span><span class="sxs-lookup"><span data-stu-id="54f75-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="54f75-183">Der Grund, ein Index von 2 verwendet wird, ist, da zwei Steuerelemente, durch die CommandField, bevor Sie die Schaltfläche "löschen hinzugefügt werden": die Schaltfläche "Bearbeiten" und ein LiteralControl, s, die mit der ein Leerzeichen zwischen den Schaltflächen Bearbeiten und löschen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="54f75-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="54f75-184">Für unser Beispiel der CommandField LinkButtons verwendet und wird das Feld ganz links besitzt eine *CommandFieldIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="54f75-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="54f75-185">Da es sich um keine anderen Schaltflächen, aber die Löschen-Schaltfläche in der CommandField, verwenden wir eine *ControlIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="54f75-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="54f75-186">Nach Verweisen auf die Schaltfläche "löschen" in der CommandField, nehmen wir als Nächstes Informationen über das Produkt mit der aktuellen Zeile mit GridView gebunden.</span><span class="sxs-lookup"><span data-stu-id="54f75-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="54f75-187">Wir legen Sie abschließend die Schaltfläche "löschen" s `OnClientClick` Eigenschaft für das entsprechende JavaScript, der den Produktnamen s enthält.</span><span class="sxs-lookup"><span data-stu-id="54f75-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="54f75-188">Da die JavaScript-Zeichenfolge übergeben die `confirm(string)` Funktion begrenzt wird, Apostrophe, wir müssen mit Escapezeichen versehen, die innerhalb der Produktnamen s bereits, verwenden.</span><span class="sxs-lookup"><span data-stu-id="54f75-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="54f75-189">Insbesondere bereits im Produktnamen s werden mit Escapezeichen versehen "`\'`".</span><span class="sxs-lookup"><span data-stu-id="54f75-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="54f75-190">Abgeschlossen Sie mit diesen Änderungen haben, klicken auf eine Schaltfläche "löschen" im GridView zeigt eine benutzerdefinierte Bestätigung Dialogfeld (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="54f75-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="54f75-191">Als mit der Messagebox bestätigen von FormView, wird Wenn der Benutzer auf "Abbrechen" klickt des Postbacks abgebrochen und verhindert den Löschvorgang zu.</span><span class="sxs-lookup"><span data-stu-id="54f75-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="54f75-192">Diese Technik kann auch verwendet werden, programmgesteuert auf die Schaltfläche "löschen" in der CommandField in einem DetailsView zugreifen.</span><span class="sxs-lookup"><span data-stu-id="54f75-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="54f75-193">Für die DetailsView, Sie jedoch d erstellen einen Ereignishandler für die `DataBound` Ereignisses, weil die DetailsView keine `RowDataBound` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="54f75-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>


<span data-ttu-id="54f75-194">[![Klicken Sie auf die Schaltfläche zum Löschen von GridView-s zeigt ein benutzerdefiniertes Bestätigungsdialogfeld](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="54f75-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span></span>

<span data-ttu-id="54f75-195">**Abbildung 4**: Das GridView-s-Schaltfläche "löschen" klicken, zeigt ein Bestätigungsdialogfeld angepasst ([klicken Sie, um das Bild in voller Größe anzeigen](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="54f75-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span></span>


## <a name="using-templatefields"></a><span data-ttu-id="54f75-196">Verwenden von TemplateFields</span><span class="sxs-lookup"><span data-stu-id="54f75-196">Using TemplateFields</span></span>

<span data-ttu-id="54f75-197">Einer der Nachteile der CommandField ist, dass die Schaltflächen über der Indizierung zugegriffen werden müssen und das resultierende Objekt in die entsprechende Schaltfläche-Typ (Schaltfläche, LinkButton oder ImageButton) umgewandelt werden muss.</span><span class="sxs-lookup"><span data-stu-id="54f75-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="54f75-198">"Magische Zahlen" mit hartcodierten Typen problematisch, die erst zur Laufzeit nicht ermittelt werden können.</span><span class="sxs-lookup"><span data-stu-id="54f75-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="54f75-199">Z. B. Wenn Sie oder ein anderer Entwickler die CommandField irgendwann in der Zukunft (z. B. eine Schaltfläche "Bearbeiten") oder Änderungen neue Schaltflächen hinzugefügt der `ButtonType` -Eigenschaft, der vorhandene Code weiterhin ohne Fehler kompiliert, aber auf der Seite möglicherweise ein Ausnahmefehler oder unerwartetes Verhalten, je nachdem, wie Code geschrieben wurde und welche Änderungen vorgenommen wurden.</span><span class="sxs-lookup"><span data-stu-id="54f75-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="54f75-200">Ein alternativer Ansatz besteht darin die GridView und DetailsView s CommandFields in von TemplateFields zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="54f75-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="54f75-201">Dadurch wird ein TemplateField mit einer `ItemTemplate` , die ein LinkButton (oder der Schaltfläche oder ImageButton) für jede Schaltfläche auf der CommandField hat.</span><span class="sxs-lookup"><span data-stu-id="54f75-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="54f75-202">Diese Schaltflächen `OnClientClick` Eigenschaften können deklarativ zugewiesen werden, wie wir gesehen, mit der FormView-Steuerelement haben oder programmgesteuert werden, in den entsprechenden zugegriffen kann `DataBound` Ereignishandler mithilfe des folgenden Musters:</span><span class="sxs-lookup"><span data-stu-id="54f75-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample7.cs)]

<span data-ttu-id="54f75-203">Wo *ControlID* ist der Wert der Schaltfläche s `ID` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="54f75-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="54f75-204">Während dieses Muster immer noch einen hartcodierte-Typ für die Umwandlung erforderlich ist, besteht keine Notwendigkeit es für die Indizierung für das Layout ändern, ohne einen Laufzeitfehler zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="54f75-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="54f75-205">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="54f75-205">Summary</span></span>

<span data-ttu-id="54f75-206">Das JavaScript `confirm(string)` Funktion ist ein häufig verwendetes Verfahren für die Steuerung des Workflows für Übermittlung.</span><span class="sxs-lookup"><span data-stu-id="54f75-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="54f75-207">Bei der Ausführung zeigt die Funktion ein modales, clientseitige Dialogfeld, das enthält zwei Schaltflächen OK und Abbrechen an.</span><span class="sxs-lookup"><span data-stu-id="54f75-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="54f75-208">Klickt der Benutzer "OK", die `confirm(string)` -Funktion zurückgegeben `true`; Wenn Sie auf "Abbrechen" `false`.</span><span class="sxs-lookup"><span data-stu-id="54f75-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="54f75-209">Diese Funktionalität, gekoppelt mit einem s Browserverhalten eine Formularübergabe Abbrechen, wenn ein Ereignishandler während der Übertragung zurückgibt `false`, können verwendet werden, um eine Bestätigung Messagebox angezeigt wird, wenn einen Datensatz zu löschen.</span><span class="sxs-lookup"><span data-stu-id="54f75-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="54f75-210">Die `confirm(string)` Funktion kann mit einer Schaltfläche Web Steuerelement s der clientseitigen verbunden werden `onclick` Ereignishandler über das Steuerelement s `OnClientClick` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="54f75-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="54f75-211">Bei der Arbeit mit der löschen-Schaltfläche in einer Vorlage – entweder in einem FormView-Vorlagen s oder in ein TemplateField im DetailsView oder GridView - kann diese Eigenschaft festgelegt werden entweder deklarativ oder programmgesteuert, wie in diesem Tutorial beschrieben.</span><span class="sxs-lookup"><span data-stu-id="54f75-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="54f75-212">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="54f75-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="54f75-213">Der Autor</span><span class="sxs-lookup"><span data-stu-id="54f75-213">About the Author</span></span>

<span data-ttu-id="54f75-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="54f75-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="54f75-215">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="54f75-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="54f75-216">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="54f75-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="54f75-217">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="54f75-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="54f75-218">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="54f75-218">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="54f75-219">[Zurück](implementing-optimistic-concurrency-cs.md)
> [Weiter](limiting-data-modification-functionality-based-on-the-user-cs.md)</span><span class="sxs-lookup"><span data-stu-id="54f75-219">[Previous](implementing-optimistic-concurrency-cs.md)
[Next](limiting-data-modification-functionality-based-on-the-user-cs.md)</span></span>
