---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Hinzufügen von Validierungs Steuerelementen zu den Bearbeitungs-C#und einfügeschnittstellen () | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial erfahren Sie, wie einfach es ist, den EditItemTemplate und InsertItemTemplate eines datenweb-Steuer Elements Validierungs Steuerelemente hinzuzufügen, um mehr zu erfahren...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 110ee08f1d0707664ef6268f34ceab9da30a3e61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78494319"
---
# <a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="3defa-103">Hinzufügen von Validierungssteuerelementen zu Schnittstellen zum Bearbeiten und Einfügen (C#)</span><span class="sxs-lookup"><span data-stu-id="3defa-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>

<span data-ttu-id="3defa-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="3defa-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="3defa-105">[Beispiel-app herunterladen](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) oder [PDF herunterladen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="3defa-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="3defa-106">In diesem Lernprogramm erfahren Sie, wie einfach es ist, der EditItemTemplate und der InsertItemTemplate eines datenweb-Steuer Elements Validierungs Steuerelemente hinzuzufügen, um eine weitere narrensicher-Benutzeroberfläche bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3defa-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="3defa-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="3defa-107">Introduction</span></span>

<span data-ttu-id="3defa-108">Die GridView-und DetailsView-Steuerelemente in den Beispielen, die wir in den letzten drei Tutorials untersucht haben, bestehen aus boundfields und checkboxfields (die Feldtypen, die von Visual Studio automatisch hinzugefügt wurden, wenn eine GridView oder DetailsView an eine Datenquelle gebunden wurde. Steuern über das Smarttags).</span><span class="sxs-lookup"><span data-stu-id="3defa-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="3defa-109">Wenn Sie eine Zeile in einer GridView oder DetailsView bearbeiten, werden diese boundfields-Dateien, die nicht schreibgeschützt sind, in Textfelder konvertiert, aus denen der Endbenutzer die vorhandenen Daten ändern kann.</span><span class="sxs-lookup"><span data-stu-id="3defa-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="3defa-110">Ebenso werden beim Einfügen eines neuen Datensatzes in ein DetailsView-Steuerelement die boundfields-Eigenschaft, deren `InsertVisible`-Eigenschaft auf `true` (Standard) festgelegt ist, als leere Textfelder gerendert, in die der Benutzer die Feldwerte des neuen Datensatzes bereitstellen kann.</span><span class="sxs-lookup"><span data-stu-id="3defa-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="3defa-111">Ebenso werden checkboxfields, die in der schreibgeschützten Standardschnittstelle deaktiviert sind, in aktivierte Kontrollkästchen in den Bearbeitungs-und einfügeschnittstellen konvertiert.</span><span class="sxs-lookup"><span data-stu-id="3defa-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="3defa-112">Die standardmäßigen Bearbeitungs-und einfügeschnittstellen für BoundField und CheckBoxField sind zwar hilfreich, aber die Schnittstelle verfügt über keine Validierung.</span><span class="sxs-lookup"><span data-stu-id="3defa-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="3defa-113">Wenn ein Benutzer einen Dateneingabe Fehler vornimmt, z. b. das `ProductName` Feld auslassen oder einen ungültigen Wert für `UnitsInStock` (z. b.-50) eingeben, wird eine Ausnahme in den Tiefen der Anwendungsarchitektur ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="3defa-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="3defa-114">Diese Ausnahme kann, wie im [vorherigen Tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)gezeigt, ordnungsgemäß behandelt werden. im Idealfall würde die Bearbeitungs-oder einfügende Benutzeroberfläche Validierungs Steuerelemente enthalten, um zu verhindern, dass ein Benutzer solche ungültigen Daten überhaupt eingibt.</span><span class="sxs-lookup"><span data-stu-id="3defa-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="3defa-115">Um eine angepasste Bearbeitungs-oder einfügeschnittstelle bereitzustellen, müssen Sie BoundField oder CheckBoxField durch ein TemplateField ersetzen.</span><span class="sxs-lookup"><span data-stu-id="3defa-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="3defa-116">Templatefields, das Thema der [Verwendung von templatefields im GridView-Steuer](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) Element und [die Verwendung von templatefields in den DetailsView-Steuer](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) Element-Tutorials, kann aus mehreren Vorlagen bestehen, die separate Schnittstellen für verschiedene Zeilen Zustände definieren.</span><span class="sxs-lookup"><span data-stu-id="3defa-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="3defa-117">Der `ItemTemplate` von TemplateField wird beim Rendern Schreib geschützter Felder oder Zeilen in den DetailsView-oder GridView-Steuerelementen verwendet, während der `EditItemTemplate` und `InsertItemTemplate` die Schnittstellen angeben, die für den Bearbeitungs-bzw. Einfügemodus verwendet werden sollen.</span><span class="sxs-lookup"><span data-stu-id="3defa-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="3defa-118">In diesem Lernprogramm erfahren Sie, wie einfach es ist, dem `EditItemTemplate` des TemplateField-Steuer Elements Validierungs Steuerelemente hinzuzufügen und `InsertItemTemplate`, um eine Benutzeroberfläche mit einer größeren Größe zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="3defa-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="3defa-119">Insbesondere wird in diesem Tutorial das Beispiel veranschaulicht, das in der unter [suchung der mit dem Einfügen, aktualisieren und löschen verknüpften Ereignisse](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) erstellt wurde, und erweitert die Bearbeitungs-und einfügeschnittstellen, um die entsprechende Validierung zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="3defa-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deleting"></a><span data-ttu-id="3defa-120">Schritt 1: Replizieren des Beispiels aus[der Untersuchung der Ereignisse im Zusammenhang mit dem Einfügen, aktualisieren und löschen](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="3defa-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="3defa-121">Im Tutorial unter [Suchen der mit dem Einfügen, aktualisieren und löschen verknüpften Ereignisse](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) haben wir eine Seite erstellt, auf der die Namen und Preise der Produkte in einer bearbeitbaren GridView aufgelistet sind.</span><span class="sxs-lookup"><span data-stu-id="3defa-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="3defa-122">Darüber hinaus enthält die Seite eine DetailsView, deren `DefaultMode`-Eigenschaft auf `Insert`festgelegt wurde, wodurch sich das Rendering immer im Einfügemodus befindet.</span><span class="sxs-lookup"><span data-stu-id="3defa-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="3defa-123">In dieser DetailsView könnte der Benutzer den Namen und den Preis für ein neues Produkt eingeben, auf Einfügen klicken und ihn dem System hinzufügen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="3defa-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>

<span data-ttu-id="3defa-124">[![im vorherigen Beispiel haben Benutzer die Möglichkeit, neue Produkte hinzuzufügen und vorhandene zu bearbeiten.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="3defa-125">**Abbildung 1**: das vorherige Beispiel ermöglicht Benutzern das Hinzufügen neuer Produkte und das Bearbeiten vorhandener Produkte ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png)).</span><span class="sxs-lookup"><span data-stu-id="3defa-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>

<span data-ttu-id="3defa-126">Unser Ziel dieses Tutorials besteht darin, die DetailsView und GridView zu erweitern, um Validierungs Steuerelemente bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="3defa-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="3defa-127">Die Validierungs Logik führt insbesondere Folgendes aus:</span><span class="sxs-lookup"><span data-stu-id="3defa-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="3defa-128">Beim Einfügen oder Bearbeiten eines Produkts muss der Name angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="3defa-129">Erfordert, dass der Preis beim Einfügen eines Datensatzes angegeben wird. beim Bearbeiten eines Datensatzes benötigen wir weiterhin einen Preis, verwenden jedoch die programmgesteuerte Logik im `RowUpdating` Ereignishandler der GridView, der bereits im vorherigen Tutorial vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="3defa-130">Stellen Sie sicher, dass der für den Preis eingegebene Wert ein gültiges Währungs Format ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="3defa-131">Bevor wir uns mit der Erweiterung des vorherigen Beispiels befassen, um die Validierung einzuschließen, müssen wir zuerst das Beispiel von der Seite `DataModificationEvents.aspx` auf die Seite für dieses Tutorial, `UIValidation.aspx`, replizieren.</span><span class="sxs-lookup"><span data-stu-id="3defa-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="3defa-132">Um dies zu erreichen, müssen sowohl das deklarative Markup der `DataModificationEvents.aspx` Seite als auch der zugehörige Quellcode kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="3defa-133">Kopieren Sie zuerst das deklarative Markup, indem Sie die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="3defa-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="3defa-134">Öffnen der Seite "`DataModificationEvents.aspx`" in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="3defa-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="3defa-135">Wechseln Sie zum deklarativen Markup der Seite (Klicken Sie am unteren Rand der Seite auf die Quell Schaltfläche).</span><span class="sxs-lookup"><span data-stu-id="3defa-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="3defa-136">Kopieren Sie den Text innerhalb der `<asp:Content>` und `</asp:Content>` Tags (Zeilen 3 bis 44), wie in Abbildung 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="3defa-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>

<span data-ttu-id="3defa-137">[![den Text innerhalb des &lt;ASP: Content&gt;-Steuer Elements kopieren](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="3defa-138">**Abbildung 2**: Kopieren des Texts innerhalb des `<asp:Content>` Steuer Elements ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>

1. <span data-ttu-id="3defa-139">Öffnen der Seite "`UIValidation.aspx`"</span><span class="sxs-lookup"><span data-stu-id="3defa-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="3defa-140">Zum deklarativen Markup der Seite wechseln</span><span class="sxs-lookup"><span data-stu-id="3defa-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="3defa-141">Fügen Sie den Text in das `<asp:Content>`-Steuerelement ein.</span><span class="sxs-lookup"><span data-stu-id="3defa-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="3defa-142">Um den Quellcode zu kopieren, öffnen Sie die Seite `DataModificationEvents.aspx.cs`, und kopieren Sie nur den Text *in* der `EditInsertDelete_DataModificationEvents`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="3defa-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="3defa-143">Kopieren Sie die drei Ereignishandler (`Page_Load`, `GridView1_RowUpdating`und `ObjectDataSource1_Inserting`), kopieren Sie aber **nicht** die Klassen Deklaration oder `using` Anweisungen.</span><span class="sxs-lookup"><span data-stu-id="3defa-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="3defa-144">Fügen Sie den kopierten Text *innerhalb* der `EditInsertDelete_UIValidation` Klasse in `UIValidation.aspx.cs`ein.</span><span class="sxs-lookup"><span data-stu-id="3defa-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="3defa-145">Nachdem Sie den Inhalt und den Code von `DataModificationEvents.aspx` zu `UIValidation.aspx`verschoben haben, nehmen Sie sich einen Moment Zeit, um den Fortschritt in einem Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="3defa-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="3defa-146">Die gleiche Ausgabe sollte angezeigt werden, und es sollte dieselbe Funktionalität auf jeder dieser beiden Seiten angezeigt werden (Weitere Informationen finden Sie in Abbildung 1 für einen Screenshot der `DataModificationEvents.aspx` in Aktion).</span><span class="sxs-lookup"><span data-stu-id="3defa-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="3defa-147">Schritt 2: Konvertieren von boundfields in templatefields</span><span class="sxs-lookup"><span data-stu-id="3defa-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="3defa-148">Um den Bearbeitungs-und einfügeschnittstellen Validierungs Steuerelemente hinzuzufügen, müssen die von den DetailsView-und GridView-Steuerelementen verwendeten boundfields in templatefields konvertiert werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="3defa-149">Um dies zu erreichen, klicken Sie auf die Verknüpfungen Spalten bearbeiten und Felder bearbeiten in den Smarttags von GridView und DetailsView.</span><span class="sxs-lookup"><span data-stu-id="3defa-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="3defa-150">Wählen Sie dort jedes der boundfields aus, und klicken Sie auf den Link "dieses Feld in einen TemplateField konvertieren".</span><span class="sxs-lookup"><span data-stu-id="3defa-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>

<span data-ttu-id="3defa-151">[![jede der boundfields-und GridView-Felder der DetailsView in templatefields konvertieren.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="3defa-152">**Abbildung 3**: Konvertieren der boundfields-Felder der DetailsView und der GridView in templatefields ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>

<span data-ttu-id="3defa-153">Durch das Konvertieren eines BoundField in ein TemplateField über das Dialogfeld "Felder" wird ein TemplateField generiert, das die gleichen schreibgeschützten, Bearbeitungs-und einfügeschnittstellen wie das BoundField selbst aufweist.</span><span class="sxs-lookup"><span data-stu-id="3defa-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="3defa-154">Das folgende Markup zeigt die deklarative Syntax für das `ProductName`-Feld in der DetailsView, nachdem es in ein TemplateField-Element konvertiert wurde:</span><span class="sxs-lookup"><span data-stu-id="3defa-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="3defa-155">Beachten Sie, dass in diesem TemplateField drei Vorlagen automatisch erstellt wurden `ItemTemplate`, `EditItemTemplate`und `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="3defa-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="3defa-156">Der `ItemTemplate` zeigt einen einzelnen Daten Feldwert (`ProductName`) mithilfe eines Bezeichnungs-websteuer Elements an, während der `EditItemTemplate` und `InsertItemTemplate` den Wert des Daten Felds in einem TextBox-websteuer Element darstellen, das das Datenfeld mit der `Text`-Eigenschaft des Textfelds mit bidirektionaler Datenbindung verknüpft.</span><span class="sxs-lookup"><span data-stu-id="3defa-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="3defa-157">Da wir nur die DetailsView auf dieser Seite zum Einfügen verwenden, können Sie die `ItemTemplate` und `EditItemTemplate` aus den beiden templatefields entfernen, auch wenn Sie nicht beeinträchtigt werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="3defa-158">Da die GridView die integrierten einfügefeatures der DetailsView nicht unterstützt, führt das Konvertieren des `ProductName` Felds der GridView in ein TemplateField zu einer `ItemTemplate` und `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="3defa-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="3defa-159">Durch Klicken auf das "konvertieren dieses Felds in ein TemplateField" hat Visual Studio ein TemplateField erstellt, dessen Vorlagen die Benutzeroberfläche des konvertierten BoundField imitieren.</span><span class="sxs-lookup"><span data-stu-id="3defa-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="3defa-160">Sie können dies überprüfen, indem Sie diese Seite über einen Browser aufrufen.</span><span class="sxs-lookup"><span data-stu-id="3defa-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="3defa-161">Sie werden feststellen, dass die Darstellung und das Verhalten von templatefields mit der Darstellung identisch sind, wenn boundfields stattdessen verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="3defa-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="3defa-162">Sie können die Bearbeitungs Schnittstellen in den Vorlagen nach Bedarf anpassen.</span><span class="sxs-lookup"><span data-stu-id="3defa-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="3defa-163">Beispielsweise kann es sein, dass das Textfeld in der `UnitPrice` templatefields als kleineres Textfeld gerendert wird als das Textfeld `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="3defa-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="3defa-164">Um dies zu erreichen, können Sie die `Columns`-Eigenschaft des Textfelds auf einen geeigneten Wert festlegen oder über die `Width`-Eigenschaft eine absolute Breite angeben.</span><span class="sxs-lookup"><span data-stu-id="3defa-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="3defa-165">Im nächsten Tutorial erfahren Sie, wie Sie die Bearbeitungs Schnittstelle vollständig anpassen, indem Sie das Textfeld durch ein alternatives Dateneingabe-websteuer Element ersetzen.</span><span class="sxs-lookup"><span data-stu-id="3defa-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>

## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="3defa-166">Schritt 3: Hinzufügen der Validierungs Steuerelemente zum`EditItemTemplate` s der GridView</span><span class="sxs-lookup"><span data-stu-id="3defa-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="3defa-167">Beim Erstellen von Dateneingabe Formularen ist es wichtig, dass Benutzer alle erforderlichen Felder eingeben und dass alle bereitgestellten Eingaben gültige und korrekt formatierte Werte sind.</span><span class="sxs-lookup"><span data-stu-id="3defa-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="3defa-168">Um sicherzustellen, dass die Eingaben eines Benutzers gültig sind, bietet ASP.net fünf integrierte Validierungs Steuerelemente, die zum Überprüfen des Werts eines einzelnen Eingabe Steuer Elements verwendet werden können:</span><span class="sxs-lookup"><span data-stu-id="3defa-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="3defa-169">"Requirements [dfieldvalidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) " stellt sicher, dass ein Wert angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="3defa-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="3defa-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) überprüft einen Wert mit einem anderen websteuerungs Wert oder einem konstanten Wert oder stellt sicher, dass das Format des Werts für einen angegebenen Datentyp zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="3defa-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) stellt sicher, dass ein Wert innerhalb eines Wertebereichs liegt.</span><span class="sxs-lookup"><span data-stu-id="3defa-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="3defa-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) überprüft einen Wert anhand eines [regulären Ausdrucks](http://en.wikipedia.org/wiki/Regular_expression) .</span><span class="sxs-lookup"><span data-stu-id="3defa-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="3defa-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) überprüft einen Wert mit einer benutzerdefinierten benutzerdefinierten Methode.</span><span class="sxs-lookup"><span data-stu-id="3defa-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="3defa-174">Weitere Informationen zu diesen fünf Steuerelementen finden Sie im [Abschnitt Validierungs Steuerelemente](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) der [ASP.NET-Schnellstart-Tutorials](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="3defa-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="3defa-175">Für unser Tutorial müssen wir ein "Requirements dfieldvalidator" in den `ProductName` templatefields von DetailsView und GridView und im `UnitPrice` TemplateField der DetailsView ein "Requirements dfieldvalidator" verwenden.</span><span class="sxs-lookup"><span data-stu-id="3defa-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="3defa-176">Außerdem müssen wir der `UnitPrice` templatefields-Steuerelemente ein CompareValidator-Steuerelement hinzufügen, das sicherstellt, dass der eingegebene Preis einen Wert größer oder gleich 0 (null) aufweist und in einem gültigen Währungs Format dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="3defa-177">Während ASP.NET 1. x dieselben fünf Validierungs Steuerelemente enthielt, hat ASP.NET 2,0 eine Reihe von Verbesserungen hinzugefügt. die beiden wichtigsten sind die Client seitige Skriptunterstützung für andere Browser als Internet Explorer und die Möglichkeit, Validierungs Steuerelemente auf einer Seite in zu partitionieren. Validierungs Gruppen.</span><span class="sxs-lookup"><span data-stu-id="3defa-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="3defa-178">Weitere Informationen zu den neuen Validierungs Steuerungsfunktionen in 2,0 finden Sie unter [Dissecting the Validation Controls in ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="3defa-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>

<span data-ttu-id="3defa-179">Fügen Sie zunächst die erforderlichen Validierungs Steuerelemente zu den `EditItemTemplate` s in den templatefields-Elementen der GridView hinzu.</span><span class="sxs-lookup"><span data-stu-id="3defa-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="3defa-180">Um dies zu erreichen, klicken Sie auf den Link Vorlagen bearbeiten des Smarttags von GridView, um die Vorlagen Bearbeitungs Schnittstelle aufzubringen.</span><span class="sxs-lookup"><span data-stu-id="3defa-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="3defa-181">Von hier aus können Sie die zu bearbeitende Vorlage in der Dropdown Liste auswählen.</span><span class="sxs-lookup"><span data-stu-id="3defa-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="3defa-182">Da die Bearbeitungs Schnittstelle erweitert werden soll, müssen Sie der `ProductName` und `UnitPrice`der `EditItemTemplate` s Validierungs Steuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3defa-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>

<span data-ttu-id="3defa-183">[![wir die edititemtemplates von ProductName und UnitPrice erweitern müssen.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="3defa-184">**Abbildung 4**: Wir müssen die `ProductName` und `UnitPrice`der `EditItemTemplate` s erweitern ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>

<span data-ttu-id="3defa-185">Fügen Sie in der `ProductName` `EditItemTemplate`ein "Requirements dfieldvalidator" hinzu, indem Sie es aus der Toolbox in die Vorlagen Bearbeitungs Schnittstelle ziehen und hinter das Textfeld platzieren.</span><span class="sxs-lookup"><span data-stu-id="3defa-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>

<span data-ttu-id="3defa-186">[![dem ProductName EditItemTemplate ein "Requirements dfieldvalidator" hinzufügen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="3defa-187">**Abbildung 5**: Hinzufügen eines "Requirements dfieldvalidator" zum `ProductName` `EditItemTemplate` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>

<span data-ttu-id="3defa-188">Alle Validierungs Steuerelemente funktionieren, indem die Eingabe eines einzelnen ASP.net-websteuer Elements überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="3defa-189">Daher müssen wir angeben, dass das soeben hinzugefügte "Requirements dfieldvalidator" mit dem Textfeld im `EditItemTemplate`überprüft werden soll. Dies wird erreicht, indem die [ControlToValidate-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) des Validierungs Steuer Elements auf die `ID` des entsprechenden websteuer Elements festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="3defa-190">Das Textfeld verfügt zurzeit über den nicht beschreibenden `ID` `TextBox1`, aber wir ändern ihn in etwas geeignetere.</span><span class="sxs-lookup"><span data-stu-id="3defa-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="3defa-191">Klicken Sie in der Vorlage auf das Textfeld, und ändern Sie dann im Eigenschaftenfenster die `ID` von `TextBox1` in `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="3defa-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>

<span data-ttu-id="3defa-192">[![Ändern der Textfeld-ID in editproductname](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="3defa-193">**Abbildung 6**: Ändern der `ID` des Textfelds in `EditProductName` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>

<span data-ttu-id="3defa-194">Legen Sie als nächstes die `ControlToValidate`-Eigenschaft von Requirements dfieldvalidator auf `EditProductName`fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="3defa-195">Legen Sie abschließend die [Eigenschaft ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) auf "Sie müssen den Namen des Produkts bereitstellen" und die [Text-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) auf "\*" fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="3defa-196">Der `Text`-Eigenschafts Wert (sofern vorhanden) ist der Text, der vom Validierungs Steuerelement angezeigt wird, wenn die Validierung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="3defa-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="3defa-197">Der `ErrorMessage`-Eigenschafts Wert, der erforderlich ist, wird vom ValidationSummary-Steuerelement verwendet. Wenn der `Text`-Eigenschafts Wert weggelassen wird, ist der `ErrorMessage`-Eigenschafts Wert auch der Text, der vom Validierungs Steuerelement bei ungültiger Eingabe angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="3defa-198">Nachdem Sie diese drei Eigenschaften von "Requirements dfieldvalidator" festgelegt haben, sollte der Bildschirm in etwa wie in Abbildung 7 aussehen.</span><span class="sxs-lookup"><span data-stu-id="3defa-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>

<span data-ttu-id="3defa-199">[![die Eigenschaften "controldevalidate", "ErrorMessage" und "Text" von "Requirements dfieldvalidator" festlegen.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="3defa-200">**Abbildung 7**: Festlegen der Eigenschaften `ControlToValidate`, `ErrorMessage`und `Text` von "Requirements dfieldvalidator" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>

<span data-ttu-id="3defa-201">Wenn das Element "Requirements dfieldvalidator" dem `ProductName` `EditItemTemplate`hinzugefügt wurde, müssen Sie nur noch dem `UnitPrice` `EditItemTemplate`die erforderliche Validierung hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3defa-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="3defa-202">Da wir beschlossen haben, dass die `UnitPrice` bei der Bearbeitung eines Datensatzes optional ist, müssen wir kein "Requirements dfieldvalidator" hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3defa-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="3defa-203">Wir müssen jedoch ein CompareValidator hinzufügen, um sicherzustellen, dass die `UnitPrice`, falls angegeben, ordnungsgemäß als Währung formatiert ist und größer oder gleich 0 ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="3defa-204">Bevor wir das CompareValidator der `UnitPrice` `EditItemTemplate`hinzufügen, ändern wir zuerst die ID des TextBox-websteuer Elements von `TextBox2` in `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="3defa-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="3defa-205">Fügen Sie nach dieser Änderung das CompareValidator hinzu, und legen Sie dessen `ControlToValidate`-Eigenschaft auf `EditUnitPrice`, dessen `ErrorMessage`-Eigenschaft auf "der Preis muss größer oder gleich 0 (null) und kann das Währungssymbol nicht enthalten sein" und dessen `Text`-Eigenschaft auf "\*" festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="3defa-206">Um anzugeben, dass der `UnitPrice` Wert größer oder gleich 0 sein muss, legen Sie die [Operator-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) des CompareValidator auf `GreaterThanEqual`, seine [ValueToCompare-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) auf "0" und seine Type- [Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) auf "`Currency`" fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="3defa-207">Die folgende deklarative Syntax zeigt die `EditItemTemplate` des `UnitPrice` TemplateField, nachdem diese Änderungen vorgenommen wurden:</span><span class="sxs-lookup"><span data-stu-id="3defa-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="3defa-208">Nachdem Sie diese Änderungen vorgenommen haben, öffnen Sie die Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="3defa-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="3defa-209">Wenn Sie versuchen, den Namen auszulassen oder einen ungültigen Preis einzugeben, wenn Sie ein Produkt bearbeiten, wird ein Sternchen neben dem Textfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="3defa-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="3defa-210">Wie in Abbildung 8 gezeigt, wird ein Preis Wert, der das Währungssymbol wie $19,95 enthält, als ungültig angesehen.</span><span class="sxs-lookup"><span data-stu-id="3defa-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="3defa-211">Die `Currency` `Type` des CompareValidator ermöglicht Ziffern Trennzeichen (z. b. Kommas oder Zeiträume, abhängig von den Kultur Einstellungen) und ein führendes Plus-oder Minuszeichen, *lässt jedoch kein Währungs* Symbol zu.</span><span class="sxs-lookup"><span data-stu-id="3defa-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="3defa-212">Dieses Verhalten kann Benutzer perplex sein, da die Bearbeitungs Schnittstelle die `UnitPrice` derzeit unter Verwendung des Währungs formats rendert.</span><span class="sxs-lookup"><span data-stu-id="3defa-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="3defa-213">Beachten Sie, dass in den Ereignissen, die dem Tutorial zum *Einfügen, aktualisieren und löschen zugeordnet sind* , die `DataFormatString`-Eigenschaft von BoundField auf `{0:c}` festgelegt wird, um Sie als Währung zu formatieren.</span><span class="sxs-lookup"><span data-stu-id="3defa-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="3defa-214">Außerdem wird die `ApplyFormatInEditMode`-Eigenschaft auf true festgelegt, sodass die Bearbeitungs Schnittstelle von GridView das `UnitPrice` als Währung formatiert.</span><span class="sxs-lookup"><span data-stu-id="3defa-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="3defa-215">Beim Konvertieren von BoundField in ein TemplateField hat Visual Studio diese Einstellungen notiert und die `Text`-Eigenschaft des Textfelds als Währung mithilfe der Datenbindung-Syntax `<%# Bind("UnitPrice", "{0:c}") %>`formatiert.</span><span class="sxs-lookup"><span data-stu-id="3defa-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>

<span data-ttu-id="3defa-216">[![ein Sternchen neben den Textfeldern mit ungültiger Eingabe angezeigt wird.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="3defa-217">**Abbildung 8**: ein Sternchen wird neben den Textfeldern mit ungültiger Eingabe angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>

<span data-ttu-id="3defa-218">Während die Überprüfung unverändert funktioniert, muss der Benutzer das Währungssymbol beim Bearbeiten eines Datensatzes manuell entfernen, was nicht zulässig ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="3defa-219">Um dieses Problem zu beheben, haben wir drei Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="3defa-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="3defa-220">Konfigurieren Sie die `EditItemTemplate` so, dass der `UnitPrice` Wert nicht als Währung formatiert ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="3defa-221">Ermöglicht es dem Benutzer, ein Währungssymbol einzugeben, indem das CompareValidator entfernt und durch ein RegularExpressionValidator ersetzt wird, das ordnungsgemäß einen ordnungsgemäß formatierten Währungswert überprüft.</span><span class="sxs-lookup"><span data-stu-id="3defa-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="3defa-222">Das Problem hier ist, dass der reguläre Ausdruck zum Überprüfen eines Währungs Werts nicht ganz so ist, dass es erforderlich ist, Code zu schreiben, wenn Kultur Einstellungen integriert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="3defa-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="3defa-223">Entfernen Sie das Validierungs Steuerelement vollständig, und verlassen Sie sich auf die serverseitige Validierungs Logik im `RowUpdating` Ereignishandler von GridView.</span><span class="sxs-lookup"><span data-stu-id="3defa-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="3defa-224">Lassen Sie uns die Option #1 für diese Übung verwenden.</span><span class="sxs-lookup"><span data-stu-id="3defa-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="3defa-225">Derzeit wird die `UnitPrice` als Währung formatiert, weil der Datenbindung-Ausdruck für das Textfeld in der `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="3defa-226">Ändern Sie die BIND-Anweisung in `Bind("UnitPrice", "{0:n2}")`, wodurch das Ergebnis als Zahl mit zwei Ziffern der Genauigkeit formatiert wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="3defa-227">Dies kann direkt über die deklarative Syntax erfolgen oder durch Klicken auf den Link "DataBindings bearbeiten" im Textfeld "`EditUnitPrice`" in der `UnitPrice` TemplateField-`EditItemTemplate` (siehe Abbildung 9 und 10).</span><span class="sxs-lookup"><span data-stu-id="3defa-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>

<span data-ttu-id="3defa-228">[![klicken Sie auf den Link "DataBindings bearbeiten" des Textfelds.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="3defa-229">**Abbildung 9**: Klicken auf den Link "DataBindings bearbeiten" des Textfelds ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>

<span data-ttu-id="3defa-230">[![den Format Bezeichner in der Bind-Anweisung anzugeben.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="3defa-231">**Abbildung 10**: Angeben des Format Bezeichnern in der `Bind`-Anweisung ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>

<span data-ttu-id="3defa-232">Durch diese Änderung schließt der formatierte Preis in der Bearbeitungs Schnittstelle Kommas als Trennzeichen für die Gruppe und einen Punkt als Dezimaltrennzeichen ein, aber verlässt das Währungssymbol.</span><span class="sxs-lookup"><span data-stu-id="3defa-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="3defa-233">Der `UnitPrice` `EditItemTemplate` enthält kein "Requirements dfieldvalidator", sodass das Postback und die Aktualisierungs Logik beginnen können.</span><span class="sxs-lookup"><span data-stu-id="3defa-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="3defa-234">Der `RowUpdating` Ereignishandler, der aus der unter *suchung der mit dem Einfügen, aktualisieren und löschen verknüpften Ereignisse* kopiert wurde, enthält jedoch eine programmgesteuerte Prüfung, mit der sichergestellt wird, dass die `UnitPrice` bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="3defa-235">Sie können diese Logik entfernen, unverändert belassen oder dem `UnitPrice` `EditItemTemplate`ein "Requirements dfieldvalidator" hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3defa-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>

## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="3defa-236">Schritt 4: Zusammenfassung der Dateneingabe Probleme</span><span class="sxs-lookup"><span data-stu-id="3defa-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="3defa-237">Zusätzlich zu den fünf Validierungs Steuerelementen enthält ASP.NET das [ValidationSummary-Steuer](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx)Element, das die `ErrorMessage` en dieser Validierungs Steuerelemente anzeigt, die ungültige Daten erkannt haben.</span><span class="sxs-lookup"><span data-stu-id="3defa-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="3defa-238">Diese Zusammenfassungs Daten können als Text auf der Webseite oder über eine modale Client seitige MessageBox angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="3defa-239">Wir möchten dieses Tutorial erweitern, um eine Client seitige MessageBox mit einer Zusammenfassung aller Überprüfungs Probleme zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="3defa-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="3defa-240">Ziehen Sie hierzu ein ValidationSummary-Steuerelement aus der Toolbox auf den Designer.</span><span class="sxs-lookup"><span data-stu-id="3defa-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="3defa-241">Der Speicherort des Validierungs Steuer Elements ist nicht ganz wichtig, da wir ihn so konfigurieren, dass nur die Zusammenfassung als MessageBox angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="3defa-242">Nachdem Sie das Steuerelement hinzugefügt haben, legen Sie dessen [ShowSummary-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) auf `false` und dessen [ShowMessageBox-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="3defa-243">Mit dieser Addition werden alle Validierungs Fehler in einer Client seitigen MessageBox zusammengefasst.</span><span class="sxs-lookup"><span data-stu-id="3defa-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>

<span data-ttu-id="3defa-244">[![werden die Validierungs Fehler in einer Client seitigen MessageBox zusammengefasst.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="3defa-245">**Abbildung 11**: die Validierungs Fehler werden in einer Client seitigen MessageBox zusammengefasst ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>

## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="3defa-246">Schritt 5: Hinzufügen der Validierungs Steuerelemente zum`InsertItemTemplate` der DetailsView</span><span class="sxs-lookup"><span data-stu-id="3defa-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="3defa-247">Für dieses Lernprogramm müssen lediglich die Validierungs Steuerelemente zur einfügeschnittstelle der DetailsView hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="3defa-248">Der Vorgang zum Hinzufügen von Validierungs Steuerelementen zu den Vorlagen der DetailsView ist mit der in Schritt 3 untersuchten identisch. aus diesem Grund wird die Aufgabe in diesem Schritt durch die Aufgabe überschritten.</span><span class="sxs-lookup"><span data-stu-id="3defa-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="3defa-249">Wie bei den `EditItemTemplate` en der GridView, empfehle ich Ihnen, die `ID` s der Textfelder aus der nicht beschreibenden `TextBox1` umbenennen und `TextBox2` `InsertProductName` und `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="3defa-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="3defa-250">Fügen Sie dem `ProductName` `InsertItemTemplate`ein "Requirements dfieldvalidator"-Element hinzu.</span><span class="sxs-lookup"><span data-stu-id="3defa-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="3defa-251">Legen Sie den `ControlToValidate` auf den `ID` des Textfelds in der Vorlage fest, dessen `Text`-Eigenschaft auf "\*" und deren `ErrorMessage`-Eigenschaft auf "Sie müssen den Namen des Produkts angeben".</span><span class="sxs-lookup"><span data-stu-id="3defa-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="3defa-252">Da der `UnitPrice` für diese Seite beim Hinzufügen eines neuen Datensatzes erforderlich ist, fügen Sie der `UnitPrice` `InsertItemTemplate`ein "Requirements dfieldvalidator"-Element hinzu, und legen Sie dessen Eigenschaften für `ControlToValidate`, `Text`und `ErrorMessage` entsprechend fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="3defa-253">Fügen Sie abschließend der `UnitPrice` `InsertItemTemplate` ein CompareValidator-Element hinzu, und konfigurieren Sie die Eigenschaften `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`und `ValueToCompare` genauso wie mit dem CompareValidator des `UnitPrice`in der `EditItemTemplate`der GridView.</span><span class="sxs-lookup"><span data-stu-id="3defa-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="3defa-254">Nach dem Hinzufügen dieser Validierungs Steuerelemente kann dem System kein neues Produkt hinzugefügt werden, wenn der Name nicht angegeben ist oder wenn der Preis eine negative Zahl oder eine negative Zahl ist.</span><span class="sxs-lookup"><span data-stu-id="3defa-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>

<span data-ttu-id="3defa-255">[der einfügeschnittstelle der DetailsView wurde ![Validierungs Logik hinzugefügt.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="3defa-256">**Abbildung 12**: Validierungs Logik wurde der einfügeschnittstelle der DetailsView hinzugefügt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>

## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="3defa-257">Schritt 6: Partitionierung der Validierungs Steuerelemente in Validierungs Gruppen</span><span class="sxs-lookup"><span data-stu-id="3defa-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="3defa-258">Unsere Seite besteht aus zwei logisch unterschiedlichen Sätzen von Validierungs Steuerelementen: solche, die der Bearbeitungs Schnittstelle von GridView entsprechen, und diejenigen, die der einfügeschnittstelle der DetailsView entsprechen.</span><span class="sxs-lookup"><span data-stu-id="3defa-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="3defa-259">Standardmäßig werden bei einem Postback *alle* Validierungs Steuerelemente auf der Seite überprüft.</span><span class="sxs-lookup"><span data-stu-id="3defa-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="3defa-260">Wenn Sie jedoch einen Datensatz bearbeiten, möchten wir nicht, dass die Validierungs Steuerelemente der einfügeschnittstelle der DetailsView überprüft werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="3defa-261">Abbildung 13 zeigt das aktuelle Problem, wenn ein Benutzer ein Produkt mit vollständig gültigen Werten bearbeitet. Wenn Sie auf Aktualisieren klicken, wird ein Überprüfungs Fehler verursacht, da die Werte für Name und Preis in der einfügeschnittstelle leer sind.</span><span class="sxs-lookup"><span data-stu-id="3defa-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>

<span data-ttu-id="3defa-262">[![Aktualisieren eines Produkts bewirkt, dass die Validierungs Steuerelemente der einfügeschnittstelle ausgelöst werden.](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="3defa-263">**Abbildung 13**: das Aktualisieren eines Produkts bewirkt, dass die Validierungs Steuerelemente der einfügeschnittstelle ausgelöst werden ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>

<span data-ttu-id="3defa-264">Die Validierungs Steuerelemente in ASP.NET 2,0 können über Ihre `ValidationGroup`-Eigenschaft in Validierungs Gruppen partitioniert werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="3defa-265">Um einer Gruppe eine Reihe von Validierungs Steuerelementen zuzuordnen, legen Sie die `ValidationGroup`-Eigenschaft einfach auf denselben Wert fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="3defa-266">Legen Sie für dieses Tutorial die `ValidationGroup` Eigenschaften der Validierungs Steuerelemente in den templatefields-Steuerelementen der GridView auf `EditValidationControls` und die `ValidationGroup`-Eigenschaften der templatefields-Eigenschaft der DetailsView auf `InsertValidationControls`fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="3defa-267">Diese Änderungen können direkt im deklarativen Markup oder über die Eigenschaftenfenster durchgeführt werden, wenn die Designer-Vorlagen Schnittstellen Vorlage verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="3defa-268">Zusätzlich zu den Validierungs Steuerelementen enthalten die Schaltflächen-und Schaltflächen bezogenen Steuerelemente in ASP.NET 2,0 auch eine `ValidationGroup`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="3defa-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="3defa-269">Die Validierungs Steuerelemente einer Validierungs Gruppe werden nur dann auf Gültigkeit überprüft, wenn ein Postback durch eine Schaltfläche ausgelöst wird, die dieselbe `ValidationGroup` Eigenschaften Einstellung hat.</span><span class="sxs-lookup"><span data-stu-id="3defa-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="3defa-270">Damit z. b. die einfügeschaltfläche "DetailsView" die `InsertValidationControls` Validierungs Gruppe auslöst, müssen wir die Eigenschaft "`ValidationGroup`" des CommandField auf "`InsertValidationControls`" festlegen (siehe Abbildung 14).</span><span class="sxs-lookup"><span data-stu-id="3defa-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="3defa-271">Legen Sie außerdem die `ValidationGroup`-Eigenschaft von GridView auf `EditValidationControls`fest.</span><span class="sxs-lookup"><span data-stu-id="3defa-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>

<span data-ttu-id="3defa-272">[![die ValidationGroup-Eigenschaft der DetailsView auf insertvalidationcontrols festlegen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="3defa-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="3defa-273">**Abbildung 14**: Festlegen der Eigenschaft "commandfieldes `ValidationGroup`" der DetailsView auf `InsertValidationControls` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="3defa-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>

<span data-ttu-id="3defa-274">Nachdem diese Änderungen vorgenommen wurden, sollten die templatefields und commandfields der DetailsView und GridView in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="3defa-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="3defa-275">Templatefields und CommandField der DetailsView</span><span class="sxs-lookup"><span data-stu-id="3defa-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="3defa-276">CommandField und templatefields der GridView</span><span class="sxs-lookup"><span data-stu-id="3defa-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="3defa-277">An diesem Punkt werden die Bearbeitungs Steuerelemente nur dann ausgelöst, wenn auf die Schaltfläche "Aktualisieren" der GridView geklickt wird und die Einfügungs spezifischen Validierungs Steuerelemente nur ausgelöst werden, wenn auf die Schaltfläche "Einfügen" der DetailsView geklickt wird. Dadurch wird das in Abbildung 13 markierte Problem behoben</span><span class="sxs-lookup"><span data-stu-id="3defa-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="3defa-278">Mit dieser Änderung wird das ValidationSummary-Steuerelement jedoch nicht mehr angezeigt, wenn ungültige Daten eingegeben werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="3defa-279">Das ValidationSummary-Steuerelement enthält auch eine `ValidationGroup`-Eigenschaft und zeigt nur Zusammenfassungs Informationen für diese Validierungs Steuerelemente in der zugehörigen Validierungs Gruppe an.</span><span class="sxs-lookup"><span data-stu-id="3defa-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="3defa-280">Daher benötigen wir zwei Validierungs Steuerelemente auf dieser Seite, eine für die `InsertValidationControls` Validierungs Gruppe und eine für `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="3defa-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="3defa-281">Mit dieser Ergänzung ist unser Tutorial fertiggestellt!</span><span class="sxs-lookup"><span data-stu-id="3defa-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="3defa-282">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="3defa-282">Summary</span></span>

<span data-ttu-id="3defa-283">Obwohl boundfields sowohl eine Einfüge-als auch eine Bearbeitungs Schnittstelle bereitstellen kann, kann die Schnittstelle nicht angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="3defa-284">Im Allgemeinen möchten wir der Bearbeitungs-und einfügeschnittstelle Validierungs Steuerelemente hinzufügen, um sicherzustellen, dass der Benutzer die erforderlichen Eingaben in einem gültigen Format eingibt.</span><span class="sxs-lookup"><span data-stu-id="3defa-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="3defa-285">Um dies zu erreichen, müssen wir die boundfields in templatefields konvertieren und die Validierungs Steuerelemente den entsprechenden Vorlagen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3defa-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="3defa-286">In diesem Tutorial haben wir das Beispiel aus der unter *suchung der Ereignisse im Zusammenhang mit dem Einfügen, aktualisieren und löschen* des Tutorials erweitert, indem Sie der einfügeschnittstelle der DetailsView und der Bearbeitungs Schnittstelle von GridView Validierungs Steuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="3defa-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="3defa-287">Außerdem wurde erläutert, wie zusammenfassende Validierungs Informationen mithilfe des ValidationSummary-Steuer Elements angezeigt werden und wie die Validierungs Steuerelemente auf der Seite in verschiedene Validierungs Gruppen partitioniert werden.</span><span class="sxs-lookup"><span data-stu-id="3defa-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="3defa-288">Wie in diesem Tutorial gezeigt, ermöglichen templatefields, dass die Schnittstellen für die Bearbeitung und das Einfügen erweitert werden, sodass Sie Validierungs Steuerelemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="3defa-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="3defa-289">Templatefields kann auch erweitert werden, um zusätzliche Eingabe-websteuer Elemente einzuschließen, sodass das Textfeld durch ein geeignetere websteuer Element ersetzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="3defa-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="3defa-290">Im nächsten Tutorial wird erläutert, wie das TextBox-Steuerelement durch ein Daten gebundenes DropDownList-Steuerelement ersetzt wird, das ideal ist, wenn ein Fremdschlüssel (z. b. `CategoryID` oder `SupplierID` in der `Products` Tabelle) bearbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="3defa-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="3defa-291">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="3defa-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="3defa-292">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="3defa-292">About the Author</span></span>

<span data-ttu-id="3defa-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="3defa-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="3defa-294">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="3defa-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="3defa-295">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="3defa-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="3defa-296">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="3defa-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="3defa-297">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="3defa-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="3defa-298">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="3defa-298">Special Thanks To</span></span>

<span data-ttu-id="3defa-299">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="3defa-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="3defa-300">Führende Prüfer für dieses Tutorial waren Liz shulok und Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="3defa-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="3defa-301">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="3defa-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="3defa-302">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="3defa-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3defa-303">[Zurück](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [Weiter](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="3defa-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>
