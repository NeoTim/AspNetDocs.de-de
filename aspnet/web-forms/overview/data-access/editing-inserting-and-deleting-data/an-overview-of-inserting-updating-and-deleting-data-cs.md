---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs
title: Eine Übersicht über das Einfügen, aktualisieren und Löschen von DatenC#() | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Lernprogramm erfahren Sie, wie Sie die Methoden Insert (), Update () und DELETE () von ObjectDataSource den Methoden der BLL-Klassen zuordnen und wie Sie mit "configu...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: b651dc58-93c7-4f83-a74e-3b99f6d60848
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs
msc.type: authoredcontent
ms.openlocfilehash: e26b8e841f86272a158b0c09b62ab2790d01d191
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78479361"
---
# <a name="an-overview-of-inserting-updating-and-deleting-data-c"></a><span data-ttu-id="56793-103">Eine Übersicht über das Einfügen, aktualisieren und Löschen von DatenC#()</span><span class="sxs-lookup"><span data-stu-id="56793-103">An Overview of Inserting, Updating, and Deleting Data (C#)</span></span>

<span data-ttu-id="56793-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="56793-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="56793-105">[Beispiel-app herunterladen](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_CS.exe) oder [PDF herunterladen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/datatutorial16cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="56793-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_CS.exe) or [Download PDF](an-overview-of-inserting-updating-and-deleting-data-cs/_static/datatutorial16cs1.pdf)</span></span>

> <span data-ttu-id="56793-106">In diesem Tutorial erfahren Sie, wie Sie die Methoden Insert (), Update () und DELETE () von ObjectDataSource den Methoden der BLL-Klassen zuordnen und wie Sie die Steuerelemente GridView, DetailsView und FormView konfigurieren, um Daten Änderungs Funktionen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="56793-106">In this tutorial we'll see how to map an ObjectDataSource's Insert(), Update(), and Delete() methods to the methods of BLL classes, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="introduction"></a><span data-ttu-id="56793-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="56793-107">Introduction</span></span>

<span data-ttu-id="56793-108">In den letzten Tutorials haben wir untersucht, wie Daten auf einer ASP.NET-Seite mithilfe der GridView-, DetailsView-und FormView-Steuerelemente angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-108">Over the past several tutorials we've examined how to display data in an ASP.NET page using the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="56793-109">Diese Steuerelemente funktionieren einfach mit den Ihnen bereitgestellten Daten.</span><span class="sxs-lookup"><span data-stu-id="56793-109">These controls simply work with data supplied to them.</span></span> <span data-ttu-id="56793-110">Diese Steuerelemente greifen in der Regel über die Verwendung eines Datenquellen-Steuer Elements, wie z. b. ObjectDataSource, auf Daten zu.</span><span class="sxs-lookup"><span data-stu-id="56793-110">Commonly, these controls access data through the use of a data source control, such as the ObjectDataSource.</span></span> <span data-ttu-id="56793-111">Wir haben gesehen, wie ObjectDataSource als Proxy zwischen der ASP.NET-Seite und den zugrunde liegenden Daten fungiert.</span><span class="sxs-lookup"><span data-stu-id="56793-111">We've seen how the ObjectDataSource acts as a proxy between the ASP.NET page and the underlying data.</span></span> <span data-ttu-id="56793-112">Wenn eine GridView Daten anzeigen muss, ruft Sie die `Select()`-Methode von ObjectDataSource auf, die wiederum eine Methode von unserer Geschäftslogik Schicht (BLL) aufruft, die eine Methode im TableAdapter der entsprechenden Datenzugriffs Schicht aufruft, der wiederum eine `SELECT` Abfrage an die Datenbank Northwind sendet.</span><span class="sxs-lookup"><span data-stu-id="56793-112">When a GridView needs to display data, it invokes its ObjectDataSource's `Select()` method, which in turn invokes a method from our Business Logic Layer (BLL), which calls a method in the appropriate Data Access Layer's (DAL) TableAdapter, which in turn sends a `SELECT` query to the Northwind database.</span></span>

<span data-ttu-id="56793-113">Beachten Sie, dass Visual Studio beim Erstellen der TableAdapters in der dal im [ersten Tutorial](../introduction/creating-a-data-access-layer-cs.md)automatisch Methoden zum Einfügen, aktualisieren und Löschen von Daten aus der zugrunde liegenden Datenbanktabelle hinzugefügt hat.</span><span class="sxs-lookup"><span data-stu-id="56793-113">Recall that when we created the TableAdapters in the DAL in [our first tutorial](../introduction/creating-a-data-access-layer-cs.md), Visual Studio automatically added methods for inserting, updating, and deleting data from the underlying database table.</span></span> <span data-ttu-id="56793-114">Außerdem haben wir beim [Erstellen einer Geschäftslogik Schicht](../introduction/creating-a-business-logic-layer-cs.md) Methoden in der BLL entworfen, die diese Daten Änderungs Methoden aufgerufen haben.</span><span class="sxs-lookup"><span data-stu-id="56793-114">Moreover, in [Creating a Business Logic Layer](../introduction/creating-a-business-logic-layer-cs.md) we designed methods in the BLL that called down into these data modification DAL methods.</span></span>

<span data-ttu-id="56793-115">Neben der `Select()`-Methode verfügt auch ObjectDataSource über `Insert()`-, `Update()`-und `Delete()`-Methoden.</span><span class="sxs-lookup"><span data-stu-id="56793-115">In addition to its `Select()` method, the ObjectDataSource also has `Insert()`, `Update()`, and `Delete()` methods.</span></span> <span data-ttu-id="56793-116">Wie die `Select()`-Methode können diese drei Methoden Methoden in einem zugrunde liegenden-Objekt zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="56793-116">Like the `Select()` method, these three methods can be mapped to methods in an underlying object.</span></span> <span data-ttu-id="56793-117">Bei der Konfiguration für das Einfügen, aktualisieren oder Löschen von Daten stellen die Steuerelemente GridView, DetailsView und FormView eine Benutzeroberfläche zum Ändern der zugrunde liegenden Daten bereit.</span><span class="sxs-lookup"><span data-stu-id="56793-117">When configured to insert, update, or delete data, the GridView, DetailsView, and FormView controls provide a user interface for modifying the underlying data.</span></span> <span data-ttu-id="56793-118">Diese Benutzeroberfläche Ruft die Methoden `Insert()`, `Update()`und `Delete()` von ObjectDataSource auf, die dann die zugeordneten Methoden des zugrunde liegenden Objekts aufrufen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="56793-118">This user interface calls the `Insert()`, `Update()`, and `Delete()` methods of the ObjectDataSource, which then invoke the underlying object's associated methods (see Figure 1).</span></span>

<span data-ttu-id="56793-119">[![die Insert ()-, Update ()-und DELETE ()-Methoden von ObjectDataSource als Proxy für den BLL fungieren.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="56793-119">[![The ObjectDataSource's Insert(), Update(), and Delete() Methods Serve as a Proxy into the BLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="56793-120">**Abbildung 1**: die Methoden `Insert()`, `Update()`und `Delete()` von ObjectDataSource dienen als Proxy in der BLL ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="56793-120">**Figure 1**: The ObjectDataSource's `Insert()`, `Update()`, and `Delete()` Methods Serve as a Proxy into the BLL ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image3.png))</span></span>

<span data-ttu-id="56793-121">In diesem Lernprogramm erfahren Sie, wie die Methoden `Insert()`, `Update()`und `Delete()` von ObjectDataSource den Methoden der Klassen in der BLL zugeordnet werden, und wie die Steuerelemente GridView, DetailsView und FormView konfiguriert werden, um Daten Änderungs Funktionen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="56793-121">In this tutorial we'll see how to map the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods to methods of classes in the BLL, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="step-1-creating-the-insert-update-and-delete-tutorials-web-pages"></a><span data-ttu-id="56793-122">Schritt 1: Erstellen der Tutorials zum Einfügen, aktualisieren und Löschen von Tutorials</span><span class="sxs-lookup"><span data-stu-id="56793-122">Step 1: Creating the Insert, Update, and Delete Tutorials Web Pages</span></span>

<span data-ttu-id="56793-123">Bevor wir uns mit dem Einfügen, aktualisieren und Löschen von Daten beschäftigen, nehmen wir uns zunächst einen Moment Zeit, um die ASP.NET-Seiten in unserem Website Projekt zu erstellen, die wir für dieses Tutorial benötigen, und die nächsten.</span><span class="sxs-lookup"><span data-stu-id="56793-123">Before we start exploring how to insert, update, and delete data, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next several ones.</span></span> <span data-ttu-id="56793-124">Fügen Sie zunächst einen neuen Ordner mit dem Namen `EditInsertDelete`hinzu.</span><span class="sxs-lookup"><span data-stu-id="56793-124">Start by adding a new folder named `EditInsertDelete`.</span></span> <span data-ttu-id="56793-125">Fügen Sie dann die folgenden ASP.NET-Seiten zu diesem Ordner hinzu, und stellen Sie sicher, dass Sie die einzelnen Seiten der `Site.master` Master Seite zuordnen:</span><span class="sxs-lookup"><span data-stu-id="56793-125">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Basics.aspx`
- `DataModificationEvents.aspx`
- `ErrorHandling.aspx`
- `UIValidation.aspx`
- `CustomizedUI.aspx`
- `OptimisticConcurrency.aspx`
- `ConfirmationOnDelete.aspx`
- `UserLevelAccess.aspx`

![Fügen Sie die ASP.NET-Seiten für die Daten Änderungs bezogenen Tutorials hinzu.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image4.png)

<span data-ttu-id="56793-127">**Abbildung 2**: Hinzufügen der ASP.NET-Seiten für die Daten Änderungs bezogenen Tutorials</span><span class="sxs-lookup"><span data-stu-id="56793-127">**Figure 2**: Add the ASP.NET Pages for the Data Modification-Related Tutorials</span></span>

<span data-ttu-id="56793-128">Wie in den anderen Ordnern werden `Default.aspx` im Ordner `EditInsertDelete` die Lernprogramme in diesem Abschnitt auflisten.</span><span class="sxs-lookup"><span data-stu-id="56793-128">Like in the other folders, `Default.aspx` in the `EditInsertDelete` folder will list the tutorials in its section.</span></span> <span data-ttu-id="56793-129">Denken Sie daran, dass das `SectionLevelTutorialListing.ascx` Benutzer Steuerelement diese Funktionalität bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="56793-129">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="56793-130">Fügen Sie dieses Benutzer Steuerelement daher `Default.aspx` hinzu, indem Sie es aus dem Projektmappen-Explorer auf die Designansicht der Seite ziehen.</span><span class="sxs-lookup"><span data-stu-id="56793-130">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>

<span data-ttu-id="56793-131">[![das Benutzer Steuerelement "sectionleveltutoriallisting. ascx" zu "default. aspx" hinzufügen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="56793-131">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image5.png)</span></span>

<span data-ttu-id="56793-132">**Abbildung 3**: Hinzufügen des `SectionLevelTutorialListing.ascx` Benutzer Steuer Elements zu `Default.aspx` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="56793-132">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image7.png))</span></span>

<span data-ttu-id="56793-133">Fügen Sie abschließend die Seiten als Einträge zur `Web.sitemap` Datei hinzu.</span><span class="sxs-lookup"><span data-stu-id="56793-133">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="56793-134">Fügen Sie insbesondere nach dem angepassten Formatierungs `<siteMapNode>`das folgende Markup hinzu:</span><span class="sxs-lookup"><span data-stu-id="56793-134">Specifically, add the following markup after the Customized Formatting `<siteMapNode>`:</span></span>

[!code-xml[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample1.xml)]

<span data-ttu-id="56793-135">Nehmen Sie sich nach dem Aktualisieren `Web.sitemap`einen Moment Zeit, um die Tutorials-Website über einen Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="56793-135">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="56793-136">Das Menü auf der linken Seite enthält jetzt Elemente für die Tutorials zum Bearbeiten, einfügen und löschen.</span><span class="sxs-lookup"><span data-stu-id="56793-136">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Die Site Übersicht enthält nun Einträge für die Tutorials zum Bearbeiten, einfügen und löschen.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image8.png)

<span data-ttu-id="56793-138">**Abbildung 4**: die Site Übersicht enthält jetzt Einträge für die Tutorials zum Bearbeiten, einfügen und löschen.</span><span class="sxs-lookup"><span data-stu-id="56793-138">**Figure 4**: The Site Map Now Includes Entries for the Editing, Inserting, and Deleting Tutorials</span></span>

## <a name="step-2-adding-and-configuring-the-objectdatasource-control"></a><span data-ttu-id="56793-139">Schritt 2: Hinzufügen und Konfigurieren des ObjectDataSource-Steuer Elements</span><span class="sxs-lookup"><span data-stu-id="56793-139">Step 2: Adding and Configuring the ObjectDataSource Control</span></span>

<span data-ttu-id="56793-140">Da sich GridView, DetailsView und FormView jeweils in den Funktionen und dem Layout der Datenänderung unterscheiden, betrachten wir jede einzelne.</span><span class="sxs-lookup"><span data-stu-id="56793-140">Since the GridView, DetailsView, and FormView each differ in their data modification capabilities and layout, let's examine each one individually.</span></span> <span data-ttu-id="56793-141">Anstatt jedes Steuerelement mit einem eigenen ObjectDataSource-Steuerelement zu verwenden, erstellen wir lediglich eine einzelne ObjectDataSource, die von allen drei Steuerelement Beispielen gemeinsam genutzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="56793-141">Rather than have each control using its own ObjectDataSource, however, let's just create a single ObjectDataSource that all three control examples can share.</span></span>

<span data-ttu-id="56793-142">Öffnen Sie die Seite `Basics.aspx`, ziehen Sie eine ObjectDataSource aus der Toolbox auf den Designer, und klicken Sie auf den Link Datenquelle konfigurieren des Smarttags.</span><span class="sxs-lookup"><span data-stu-id="56793-142">Open the `Basics.aspx` page, drag an ObjectDataSource from the Toolbox onto the Designer, and click the Configure Data Source link from its smart tag.</span></span> <span data-ttu-id="56793-143">Da der `ProductsBLL` die einzige BLL-Klasse ist, die das Bearbeiten, einfügen und Löschen von Methoden bereitstellt, konfigurieren Sie ObjectDataSource für die Verwendung dieser Klasse.</span><span class="sxs-lookup"><span data-stu-id="56793-143">Since the `ProductsBLL` is the only BLL class that provides editing, inserting, and deleting methods, configure the ObjectDataSource to use this class.</span></span>

<span data-ttu-id="56793-144">[![konfigurieren Sie ObjectDataSource für die Verwendung der productbll-Klasse.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="56793-144">[![Configure the ObjectDataSource to Use the ProductsBLL Class](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image9.png)</span></span>

<span data-ttu-id="56793-145">**Abbildung 5**: Konfigurieren von ObjectDataSource für die Verwendung der `ProductsBLL`-Klasse ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="56793-145">**Figure 5**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image11.png))</span></span>

<span data-ttu-id="56793-146">Im nächsten Bildschirm können Sie angeben, welche Methoden der `ProductsBLL` Klasse der `Select()`, `Insert()`, `Update()`und `Delete()` von ObjectDataSource zugeordnet werden sollen. Wählen Sie hierzu die entsprechende Registerkarte aus, und wählen Sie in der Dropdown Liste die gewünschte Methode aus.</span><span class="sxs-lookup"><span data-stu-id="56793-146">In the next screen we can specify what methods of the `ProductsBLL` class are mapped to the ObjectDataSource's `Select()`, `Insert()`, `Update()`, and `Delete()` by selecting the appropriate tab and choosing the method from the drop-down list.</span></span> <span data-ttu-id="56793-147">In Abbildung 6, die jetzt vertraut sein sollte, wird die `Select()`-Methode von ObjectDataSource der `GetProducts()`-Methode der `ProductsBLL` Klasse zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="56793-147">Figure 6, which should look familiar by now, maps the ObjectDataSource's `Select()` method to the `ProductsBLL` class's `GetProducts()` method.</span></span> <span data-ttu-id="56793-148">Sie können die Methoden `Insert()`, `Update()`und `Delete()` konfigurieren, indem Sie die entsprechende Registerkarte in der Liste oben auswählen.</span><span class="sxs-lookup"><span data-stu-id="56793-148">The `Insert()`, `Update()`, and `Delete()` methods can be configured by selecting the appropriate tab from the list along the top.</span></span>

<span data-ttu-id="56793-149">[![von ObjectDataSource alle Produkte zurückgeben](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="56793-149">[![Have the ObjectDataSource Return All of the Products](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image12.png)</span></span>

<span data-ttu-id="56793-150">**Abbildung 6**: lassen, dass die ObjectDataSource alle Produkte zurückgibt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="56793-150">**Figure 6**: Have the ObjectDataSource Return All of the Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image14.png))</span></span>

<span data-ttu-id="56793-151">In Abbildung 7, 8 und 9 werden die Registerkarten Update, INSERT und DELETE von ObjectDataSource angezeigt.</span><span class="sxs-lookup"><span data-stu-id="56793-151">Figures 7, 8, and 9 show the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span> <span data-ttu-id="56793-152">Konfigurieren Sie diese Registerkarten so, dass die Methoden `Insert()`, `Update()`und `Delete()` die Methoden `UpdateProduct`, `AddProduct`und `DeleteProduct` der `ProductsBLL` Klasse aufrufen.</span><span class="sxs-lookup"><span data-stu-id="56793-152">Configure these tabs so that the `Insert()`, `Update()`, and `Delete()` methods invoke the `ProductsBLL` class's `UpdateProduct`, `AddProduct`, and `DeleteProduct` methods, respectively.</span></span>

<span data-ttu-id="56793-153">[![ordnen Sie die Update ()-Methode von ObjectDataSource der "UpdateProduct"-Methode der productbll-Klasse zu.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="56793-153">[![Map the ObjectDataSource's Update() Method to the ProductBLL Class's UpdateProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image15.png)</span></span>

<span data-ttu-id="56793-154">**Abbildung 7**: Zuordnen der `Update()` Methode von ObjectDataSource zur `UpdateProduct`-Methode der `ProductBLL` Klasse ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="56793-154">**Figure 7**: Map the ObjectDataSource's `Update()` Method to the `ProductBLL` Class's `UpdateProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image17.png))</span></span>

<span data-ttu-id="56793-155">[![ordnen Sie die Insert ()-Methode von ObjectDataSource der addProduct-Methode der productbll-Klasse zu.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="56793-155">[![Map the ObjectDataSource's Insert() Method to the ProductBLL Class's AddProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image18.png)</span></span>

<span data-ttu-id="56793-156">**Abbildung 8**: Zuordnen der `Insert()` Methode der ObjectDataSource zur Add `Product`-Methode der `ProductBLL` Klasse ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="56793-156">**Figure 8**: Map the ObjectDataSource's `Insert()` Method to the `ProductBLL` Class's Add `Product` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image20.png))</span></span>

<span data-ttu-id="56793-157">[![ordnen Sie die Delete ()-Methode von ObjectDataSource der deleteProduct-Methode der productbll-Klasse zu.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="56793-157">[![Map the ObjectDataSource's Delete() Method to the ProductBLL Class's DeleteProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image21.png)</span></span>

<span data-ttu-id="56793-158">**Abbildung 9**: Zuordnen der `Delete()`-Methode der ObjectDataSource zur `DeleteProduct`-Methode der `ProductBLL` Klasse ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="56793-158">**Figure 9**: Map the ObjectDataSource's `Delete()` Method to the `ProductBLL` Class's `DeleteProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image23.png))</span></span>

<span data-ttu-id="56793-159">Möglicherweise haben Sie bemerkt, dass in den Dropdown Listen auf den Registerkarten aktualisieren, einfügen und Löschen bereits diese Methoden ausgewählt wurden.</span><span class="sxs-lookup"><span data-stu-id="56793-159">You may have noticed that the drop-down lists in the UPDATE, INSERT, and DELETE tabs already had these methods selected.</span></span> <span data-ttu-id="56793-160">Dies liegt an der Verwendung der `DataObjectMethodAttribute`, die die Methoden von `ProductsBLL`ergänzt.</span><span class="sxs-lookup"><span data-stu-id="56793-160">This is thanks to our use of the `DataObjectMethodAttribute` that decorates the methods of `ProductsBLL`.</span></span> <span data-ttu-id="56793-161">Die deleteProduct-Methode hat z. b. die folgende Signatur:</span><span class="sxs-lookup"><span data-stu-id="56793-161">For example, the DeleteProduct method has the following signature:</span></span>

[!code-csharp[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample2.cs)]

<span data-ttu-id="56793-162">Das `DataObjectMethodAttribute` Attribut gibt den Zweck jeder Methode an, unabhängig davon, ob es sich um das auswählen, einfügen, aktualisieren oder löschen handelt und ob es sich um den Standardwert handelt.</span><span class="sxs-lookup"><span data-stu-id="56793-162">The `DataObjectMethodAttribute` attribute indicates the purpose of each method whether it is for selecting, inserting, updating, or deleting and whether or not it's the default value.</span></span> <span data-ttu-id="56793-163">Wenn Sie diese Attribute beim Erstellen der BLL-Klassen ausgelassen haben, müssen Sie die Methoden auf den Registerkarten aktualisieren, einfügen und löschen manuell auswählen.</span><span class="sxs-lookup"><span data-stu-id="56793-163">If you omitted these attributes when creating your BLL classes, you'll need to manually select the methods from the UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="56793-164">Nachdem Sie sichergestellt haben, dass die entsprechenden `ProductsBLL` Methoden den Methoden `Insert()`, `Update()`und `Delete()` von ObjectDataSource zugeordnet sind, klicken Sie auf Fertigstellen, um den Assistenten abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="56793-164">After ensuring that the appropriate `ProductsBLL` methods are mapped to the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods, click Finish to complete the wizard.</span></span>

## <a name="examining-the-objectdatasources-markup"></a><span data-ttu-id="56793-165">Überprüfen des Markups von ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="56793-165">Examining the ObjectDataSource's Markup</span></span>

<span data-ttu-id="56793-166">Nachdem Sie die ObjectDataSource mithilfe des Assistenten konfiguriert haben, wechseln Sie zur Quell Ansicht, um das generierte deklarative Markup zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="56793-166">After configuring the ObjectDataSource through its wizard, go to the Source view to examine the generated declarative markup.</span></span> <span data-ttu-id="56793-167">Das `<asp:ObjectDataSource>`-Tag gibt das zugrunde liegende-Objekt und die aufzurufenden Methoden an.</span><span class="sxs-lookup"><span data-stu-id="56793-167">The `<asp:ObjectDataSource>` tag specifies the underlying object and the methods to invoke.</span></span> <span data-ttu-id="56793-168">Außerdem gibt es `DeleteParameters`, `UpdateParameters`und `InsertParameters`, die den Eingabe Parametern für die Methoden `AddProduct`, `UpdateProduct`und `DeleteProduct` der `ProductsBLL` Klasse zugeordnet sind:</span><span class="sxs-lookup"><span data-stu-id="56793-168">Additionally, there are `DeleteParameters`, `UpdateParameters`, and `InsertParameters` that map to the input parameters for the `ProductsBLL` class's `AddProduct`, `UpdateProduct`, and `DeleteProduct` methods:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample3.aspx)]

<span data-ttu-id="56793-169">Die ObjectDataSource enthält einen Parameter für jeden Eingabeparameter für die zugehörigen Methoden, ebenso wie eine Liste von `SelectParameter` s, wenn die ObjectDataSource so konfiguriert ist, dass eine Select-Methode aufgerufen wird, die einen Eingabeparameter erwartet (z. b. `GetProductsByCategoryID(categoryID)`).</span><span class="sxs-lookup"><span data-stu-id="56793-169">The ObjectDataSource includes a parameter for each of the input parameters for its associated methods, just like a list of `SelectParameter` s is present when the ObjectDataSource is configured to call a select method that expects an input parameter (such as `GetProductsByCategoryID(categoryID)`).</span></span> <span data-ttu-id="56793-170">Wie wir sehen werden, werden die Werte für diese `DeleteParameters`, `UpdateParameters`und `InsertParameters` automatisch von GridView, DetailsView und FormView festgelegt, bevor die `Insert()`-, `Update()`-oder `Delete()`-Methode von ObjectDataSource aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="56793-170">As we'll see shortly, values for these `DeleteParameters`, `UpdateParameters`, and `InsertParameters` are set automatically by the GridView, DetailsView, and FormView prior to invoking the ObjectDataSource's `Insert()`, `Update()`, or `Delete()` method.</span></span> <span data-ttu-id="56793-171">Diese Werte können auch Programm gesteuert festgelegt werden, wie in einem zukünftigen Tutorial erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="56793-171">These values can also be set programmatically as needed, as we'll discuss in a future tutorial.</span></span>

<span data-ttu-id="56793-172">Ein Nebeneffekt der Verwendung des Assistenten für die Konfiguration von ObjectDataSource besteht darin, dass Visual Studio die [OldValuesParameterFormatString-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) auf `original_{0}`festlegt.</span><span class="sxs-lookup"><span data-stu-id="56793-172">One side effect of using the wizard to configure to ObjectDataSource is that Visual Studio sets the [OldValuesParameterFormatString property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) to `original_{0}`.</span></span> <span data-ttu-id="56793-173">Dieser Eigenschafts Wert wird verwendet, um die ursprünglichen Werte der bearbeiteten Daten einzuschließen, und ist in zwei Szenarien hilfreich:</span><span class="sxs-lookup"><span data-stu-id="56793-173">This property value is used to include the original values of the data being edited and is useful in two scenarios:</span></span>

- <span data-ttu-id="56793-174">Wenn ein Datensatz bearbeitet wird, können Benutzer den Wert des Primärschlüssels ändern.</span><span class="sxs-lookup"><span data-stu-id="56793-174">If, when editing a record, users are able to change the primary key value.</span></span> <span data-ttu-id="56793-175">In diesem Fall müssen sowohl der neue Primärschlüssel Wert als auch der ursprüngliche Primärschlüssel Wert bereitgestellt werden, damit der Datensatz mit dem ursprünglichen Primärschlüssel Wert gefunden werden kann und der Wert entsprechend aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="56793-175">In this case, both the new primary key value and the original primary key value must be provided so that the record with the original primary key value can be found and have its value updated accordingly.</span></span>
- <span data-ttu-id="56793-176">Bei Verwendung der optimistischen Parallelität.</span><span class="sxs-lookup"><span data-stu-id="56793-176">When using optimistic concurrency.</span></span> <span data-ttu-id="56793-177">Optimistische Parallelität ist eine Technik, mit der sichergestellt wird, dass zwei gleichzeitige Benutzer die Änderungen nicht überschreiben, und ist das Thema für ein zukünftiges Tutorial.</span><span class="sxs-lookup"><span data-stu-id="56793-177">Optimistic concurrency is a technique to ensure that two simultaneous users don't overwrite one another's changes, and is the topic for a future tutorial.</span></span>

<span data-ttu-id="56793-178">Die `OldValuesParameterFormatString`-Eigenschaft gibt den Namen der Eingabeparameter in den Update-und Delete-Methoden des zugrunde liegenden Objekts für die ursprünglichen Werte an.</span><span class="sxs-lookup"><span data-stu-id="56793-178">The `OldValuesParameterFormatString` property indicates the name of the input parameters in the underlying object's update and delete methods for the original values.</span></span> <span data-ttu-id="56793-179">Wir besprechen diese Eigenschaft und deren Zweck ausführlicher, wenn wir die optimistische Parallelität untersuchen.</span><span class="sxs-lookup"><span data-stu-id="56793-179">We'll discuss this property and its purpose in greater detail when we explore optimistic concurrency.</span></span> <span data-ttu-id="56793-180">Ich gebe Sie jetzt ein, da unsere BLL-Methoden nicht die ursprünglichen Werte erwarten. Daher ist es wichtig, dass diese Eigenschaft entfernt wird.</span><span class="sxs-lookup"><span data-stu-id="56793-180">I bring it up now, however, because our BLL's methods do not expect the original values and therefore it's important that we remove this property.</span></span> <span data-ttu-id="56793-181">Wenn die `OldValuesParameterFormatString`-Eigenschaft auf einen anderen Wert als den Standardwert (`{0}`) festgelegt wird, wird ein Fehler ausgelöst, wenn ein datenweb Steuerelement versucht, die `Update()` oder `Delete()` Methoden von ObjectDataSource aufzurufen, da die ObjectDataSource versucht, sowohl den `UpdateParameters` als auch den ursprünglichen Wert Parameter zu übergeben.`DeleteParameters`</span><span class="sxs-lookup"><span data-stu-id="56793-181">Leaving the `OldValuesParameterFormatString` property set to anything other than the default (`{0}`) will cause an error when a data Web control attempts to invoke the ObjectDataSource's `Update()` or `Delete()` methods because the ObjectDataSource will attempt to pass in both the `UpdateParameters` or `DeleteParameters` specified as well as original value parameters.</span></span>

<span data-ttu-id="56793-182">Wenn dies an diesem Punkt nicht besonders klar ist, machen Sie sich keine Sorgen. Wir werden diese Eigenschaft und das zugehörige Hilfsprogramm in einem zukünftigen Tutorial untersuchen.</span><span class="sxs-lookup"><span data-stu-id="56793-182">If this isn't terribly clear at this juncture, don't worry, we'll examine this property and its utility in a future tutorial.</span></span> <span data-ttu-id="56793-183">Stellen Sie vorerst einfach sicher, dass Sie diese Eigenschaften Deklaration vollständig aus der deklarativen Syntax entfernen, oder legen Sie den Wert auf den Standardwert ({0}) fest.</span><span class="sxs-lookup"><span data-stu-id="56793-183">For now, just be certain to either remove this property declaration entirely from the declarative syntax or set the value to the default value ({0}).</span></span>

> [!NOTE]
> <span data-ttu-id="56793-184">Wenn Sie einfach den `OldValuesParameterFormatString`-Eigenschafts Wert aus der Eigenschaftenfenster im Designansicht löschen, ist die Eigenschaft weiterhin in der deklarativen Syntax vorhanden, wird jedoch auf eine leere Zeichenfolge festgelegt.</span><span class="sxs-lookup"><span data-stu-id="56793-184">If you simply clear out the `OldValuesParameterFormatString` property value from the Properties window in the Design view, the property will still exist in the declarative syntax, but be set to an empty string.</span></span> <span data-ttu-id="56793-185">Dies führt leider immer noch zu dem oben beschriebenen Problem.</span><span class="sxs-lookup"><span data-stu-id="56793-185">This, unfortunately, will still result in the same problem discussed above.</span></span> <span data-ttu-id="56793-186">Entfernen Sie daher die-Eigenschaft vollständig aus der deklarativen Syntax, oder legen Sie aus dem Eigenschaftenfenster den Wert auf den Standardwert `{0}`fest.</span><span class="sxs-lookup"><span data-stu-id="56793-186">Therefore, either remove the property altogether from the declarative syntax or, from the Properties window, set the value to the default, `{0}`.</span></span>

## <a name="step-3-adding-a-data-web-control-and-configuring-it-for-data-modification"></a><span data-ttu-id="56793-187">Schritt 3: Hinzufügen eines datenweb-Steuer Elements und dessen Konfiguration für die Datenänderung</span><span class="sxs-lookup"><span data-stu-id="56793-187">Step 3: Adding a Data Web Control and Configuring It for Data Modification</span></span>

<span data-ttu-id="56793-188">Nachdem die ObjectDataSource der Seite hinzugefügt und konfiguriert wurde, können Sie der Seite Daten-websteuer Elemente hinzufügen, um die Daten anzuzeigen und eine Möglichkeit für den Endbenutzer bereitzustellen, ihn zu ändern.</span><span class="sxs-lookup"><span data-stu-id="56793-188">Once the ObjectDataSource has been added to the page and configured, we're ready to add data Web controls to the page to both display the data and provide a means for the end user to modify it.</span></span> <span data-ttu-id="56793-189">Wir betrachten die GridView, DetailsView und FormView separat, da sich diese datenweb Steuerelemente in den Funktionen und der Konfiguration der Datenänderung unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="56793-189">We'll look at the GridView, DetailsView, and FormView separately, as these data Web controls differ in their data modification capabilities and configuration.</span></span>

<span data-ttu-id="56793-190">Wie wir im restlichen Teil dieses Artikels sehen werden, ist das Hinzufügen sehr einfacher Bearbeitungs-, Einfüge-und Lösch Unterstützung über die Steuerelemente GridView, DetailsView und FormView wirklich einfach wie das Überprüfen von einigen Kontrollkästchen.</span><span class="sxs-lookup"><span data-stu-id="56793-190">As we'll see in the remainder of this article, adding very basic editing, inserting, and deleting support through the GridView, DetailsView, and FormView controls is really as simple as checking a couple of checkboxes.</span></span> <span data-ttu-id="56793-191">In der Praxis gibt es zahlreiche Feinheiten und randfälle, die die Bereitstellung dieser Funktionalität erhöhen, als nur Punkte und klicken.</span><span class="sxs-lookup"><span data-stu-id="56793-191">There are many subtleties and edge cases in the real-world that make providing such functionality more involved than just point and click.</span></span> <span data-ttu-id="56793-192">Dieses Tutorial konzentriert sich jedoch ausschließlich auf die unter Beweis von vereinfachten Daten Änderungs Funktionen.</span><span class="sxs-lookup"><span data-stu-id="56793-192">This tutorial, however, focuses solely on proving simplistic data modification capabilities.</span></span> <span data-ttu-id="56793-193">In zukünftigen Tutorials werden Aspekte untersucht, die zweifellos in einer realen Umgebung auftreten werden.</span><span class="sxs-lookup"><span data-stu-id="56793-193">Future tutorials will examine concerns that will undoubtedly arise in a real-world setting.</span></span>

## <a name="deleting-data-from-the-gridview"></a><span data-ttu-id="56793-194">Löschen von Daten aus der GridView</span><span class="sxs-lookup"><span data-stu-id="56793-194">Deleting Data from the GridView</span></span>

<span data-ttu-id="56793-195">Beginnen Sie, indem Sie eine GridView aus der Toolbox auf den Designer ziehen.</span><span class="sxs-lookup"><span data-stu-id="56793-195">Start by dragging a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="56793-196">Binden Sie anschließend die ObjectDataSource an die GridView, indem Sie Sie in der Dropdown Liste im Smarttags von GridView auswählen.</span><span class="sxs-lookup"><span data-stu-id="56793-196">Next, bind the ObjectDataSource to the GridView by selecting it from the drop-down list in the GridView's smart tag.</span></span> <span data-ttu-id="56793-197">An diesem Punkt wird das deklarative Markup der GridView wie folgt lauten:</span><span class="sxs-lookup"><span data-stu-id="56793-197">At this point the GridView's declarative markup will be:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample4.aspx)]

<span data-ttu-id="56793-198">Das Binden der GridView an die ObjectDataSource über das Smarttag hat zwei Vorteile:</span><span class="sxs-lookup"><span data-stu-id="56793-198">Binding the GridView to the ObjectDataSource through its smart tag has two benefits:</span></span>

- <span data-ttu-id="56793-199">Boundfields und checkboxfields werden für jedes der von ObjectDataSource zurückgegebenen Felder automatisch erstellt.</span><span class="sxs-lookup"><span data-stu-id="56793-199">BoundFields and CheckBoxFields are automatically created for each of the fields returned by the ObjectDataSource.</span></span> <span data-ttu-id="56793-200">Darüber hinaus werden die Eigenschaften von BoundField und CheckBoxField basierend auf den Metadaten des zugrunde liegenden Felds festgelegt.</span><span class="sxs-lookup"><span data-stu-id="56793-200">Moreover, the BoundField and CheckBoxField's properties are set based on the underlying field's metadata.</span></span> <span data-ttu-id="56793-201">Beispielsweise werden die Felder `ProductID`, `CategoryName`und `SupplierName` im `ProductsDataTable` als schreibgeschützt gekennzeichnet und sollten daher beim Bearbeiten nicht aktualisierbar sein.</span><span class="sxs-lookup"><span data-stu-id="56793-201">For example, the `ProductID`, `CategoryName`, and `SupplierName` fields are marked as read-only in the `ProductsDataTable` and therefore shouldn't be updatable when editing.</span></span> <span data-ttu-id="56793-202">Um dies zu ermöglichen, werden die schreibgeschützten [Eigenschaften](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) von boundfields auf `true`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="56793-202">To accommodate this, these BoundFields' [ReadOnly properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) are set to `true`.</span></span>
- <span data-ttu-id="56793-203">Die [DataKeyNames-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) wird den Primärschlüssel Feldern des zugrunde liegenden Objekts zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="56793-203">The [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) is assigned to the primary key field(s) of the underlying object.</span></span> <span data-ttu-id="56793-204">Dies ist erforderlich, wenn die GridView zum Bearbeiten oder Löschen von Daten verwendet wird, da diese Eigenschaft das Feld (oder den Satz von Feldern) angibt, das die einzelnen Datensätze eindeutig identifiziert.</span><span class="sxs-lookup"><span data-stu-id="56793-204">This is essential when using the GridView for editing or deleting data, as this property indicates the field (or set of fields) that unique identifies each record.</span></span> <span data-ttu-id="56793-205">Weitere Informationen zur `DataKeyNames`-Eigenschaft finden Sie unter " [Master/Detail" mithilfe eines auswählbaren mastergridview-Objekts mit einem Detail DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) -Tutorial.</span><span class="sxs-lookup"><span data-stu-id="56793-205">For more information on the `DataKeyNames` property, refer back to the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="56793-206">Die GridView kann zwar über die Eigenschaftenfenster oder deklarative Syntax an die ObjectDataSource gebunden werden. dabei müssen Sie jedoch das entsprechende BoundField-und `DataKeyNames` Markup manuell hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="56793-206">While the GridView can be bound to the ObjectDataSource through the Properties window or declarative syntax, doing so requires you to manually add the appropriate BoundField and `DataKeyNames` markup.</span></span>

<span data-ttu-id="56793-207">Das GridView-Steuerelement bietet integrierte Unterstützung für das Bearbeiten und löschen auf Zeilenebene.</span><span class="sxs-lookup"><span data-stu-id="56793-207">The GridView control provides built-in support for row-level editing and deleting.</span></span> <span data-ttu-id="56793-208">Das Konfigurieren einer GridView zum unterstützen von Löschvorgang fügt eine Spalte mit Schaltflächen Löschen hinzu.</span><span class="sxs-lookup"><span data-stu-id="56793-208">Configuring a GridView to support deleting adds a column of Delete buttons.</span></span> <span data-ttu-id="56793-209">Wenn der Endbenutzer auf die Schaltfläche "Löschen" für eine bestimmte Zeile klickt, folgt ein Postback, und die GridView führt die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="56793-209">When the end user clicks the Delete button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="56793-210">Die `DeleteParameters` Werte der ObjectDataSource werden zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="56793-210">The ObjectDataSource's `DeleteParameters` value(s) are assigned</span></span>
2. <span data-ttu-id="56793-211">Die `Delete()`-Methode von ObjectDataSource wird aufgerufen, wobei der angegebene Datensatz gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="56793-211">The ObjectDataSource's `Delete()` method is invoked, deleting the specified record</span></span>
3. <span data-ttu-id="56793-212">Die GridView bindet sich an die ObjectDataSource zurück, indem Sie Ihre `Select()`-Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="56793-212">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="56793-213">Die Werte, die dem `DeleteParameters` zugewiesen werden, sind die Werte der `DataKeyNames` Felder für die Zeile, auf deren Lösch Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-213">The values assigned to the `DeleteParameters` are the values of the `DataKeyNames` field(s) for the row whose Delete button was clicked.</span></span> <span data-ttu-id="56793-214">Daher ist es wichtig, dass die `DataKeyNames`-Eigenschaft einer GridView korrekt festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="56793-214">Therefore it's vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="56793-215">Wenn Sie nicht vorhanden ist, wird dem `DeleteParameters` in Schritt 1 ein `null` Wert zugewiesen, der in Schritt 2 wiederum zu gelöschten Datensätzen führt.</span><span class="sxs-lookup"><span data-stu-id="56793-215">If it's missing, the `DeleteParameters` will be assigned a `null` value in Step 1, which in turn will not result in any deleted records in Step 2.</span></span>

> [!NOTE]
> <span data-ttu-id="56793-216">Die `DataKeys` Auflistung wird im GridView-Steuerelement Zustand gespeichert, was bedeutet, dass die `DataKeys` Werte über das Postback hinweg gespeichert werden, auch wenn der GridView s-Ansichts Zustand deaktiviert wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-216">The `DataKeys` collection is stored in the GridView s control state, meaning that the `DataKeys` values will be remembered across postback even if the GridView s view state has been disabled.</span></span> <span data-ttu-id="56793-217">Es ist jedoch sehr wichtig, dass der Ansichts Zustand für GridViews aktiviert bleibt, die das Bearbeiten oder löschen unterstützen (das Standardverhalten).</span><span class="sxs-lookup"><span data-stu-id="56793-217">However, it is very important that view state remains enabled for GridViews that support editing or deleting (the default behavior).</span></span> <span data-ttu-id="56793-218">Wenn Sie die Eigenschaft GridView s `EnableViewState` auf `false`festlegen, funktioniert das Verhalten beim Bearbeiten und löschen problemlos für einen einzelnen Benutzer, aber wenn gleichzeitige Benutzerdaten löschen, besteht die Möglichkeit, dass diese gleichzeitigen Benutzerdaten Sätze versehentlich löschen oder bearbeiten können, die Sie nicht beabsichtigt haben.</span><span class="sxs-lookup"><span data-stu-id="56793-218">If you set the GridView s `EnableViewState` property to `false`, the editing and deleting behavior will work fine for a single user, but if there are concurrent users deleting data, there exists the possibility that these concurrent users may accidentally delete or edit records that they didn't intend.</span></span> <span data-ttu-id="56793-219">Weitere Informationen finden Sie in meinem Blogeintrag [Warnung: Parallelitäts Problem mit ASP.NET 2,0 GridViews/DetailsView/formviews, die das Bearbeiten und/oder löschen unterstützen und deren Ansichts Zustand deaktiviert ist](http://scottonwriting.net/sowblog/archive/2006/10/03/163215.aspx).</span><span class="sxs-lookup"><span data-stu-id="56793-219">See my blog entry, [WARNING: Concurrency Issue with ASP.NET 2.0 GridViews/DetailsView/FormViews that Support Editing and/or Deleting and Whose View State is Disabled](http://scottonwriting.net/sowblog/archive/2006/10/03/163215.aspx), for more information.</span></span>

<span data-ttu-id="56793-220">Dieselbe Warnung gilt auch für DetailsViews und formviews.</span><span class="sxs-lookup"><span data-stu-id="56793-220">This same warning also applies to DetailsViews and FormViews.</span></span>

<span data-ttu-id="56793-221">Zum Hinzufügen von Löschfunktionen zu einer GridView wechseln Sie einfach zum Smarttag, und aktivieren Sie das Kontrollkästchen "Löschen".</span><span class="sxs-lookup"><span data-stu-id="56793-221">To add deleting capabilities to a GridView, simply go to its smart tag and check the Enable Deleting checkbox.</span></span>

![Aktivieren Sie das Kontrollkästchen Löschen aktivieren.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image24.png)

<span data-ttu-id="56793-223">**Abbildung 10**: Aktivieren des Kontrollkästchens "Löschen"</span><span class="sxs-lookup"><span data-stu-id="56793-223">**Figure 10**: Check the Enable Deleting Checkbox</span></span>

<span data-ttu-id="56793-224">Durch Aktivieren des Kontrollkästchens "löschen aktivieren" des Smarttags wird ein CommandField zur GridView hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="56793-224">Checking the Enable Deleting checkbox from the smart tag adds a CommandField to the GridView.</span></span> <span data-ttu-id="56793-225">Das CommandField rendert eine Spalte in der GridView mit Schaltflächen zum Ausführen einer oder mehrerer der folgenden Aufgaben: Auswählen eines Datensatzes, Bearbeiten eines Datensatzes und Löschen eines Datensatzes.</span><span class="sxs-lookup"><span data-stu-id="56793-225">The CommandField renders a column in the GridView with buttons for performing one or more of the following tasks: selecting a record, editing a record, and deleting a record.</span></span> <span data-ttu-id="56793-226">Wir haben zuvor das CommandField in Aktion zum Auswählen von Datensätzen im [Master/Detail mithilfe eines auswählbaren Master GridView-Tutorials mit einem Detail DetailView-](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) Tutorial gesehen.</span><span class="sxs-lookup"><span data-stu-id="56793-226">We previously saw the CommandField in action with selecting records in the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="56793-227">Das CommandField enthält eine Reihe von `ShowXButton` Eigenschaften, die angeben, welche Reihe von Schaltflächen im CommandField angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-227">The CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="56793-228">Durch Aktivieren des Kontrollkästchens zum Aktivieren der Löschung wird ein CommandField, dessen `ShowDeleteButton` Eigenschaft `true` ist, der Spalten Auflistung von GridView hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="56793-228">By checking the Enable Deleting checkbox a CommandField whose `ShowDeleteButton` property is `true` has been added to the GridView's Columns collection.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample5.aspx)]

<span data-ttu-id="56793-229">An dieser Stelle können Sie die Unterstützung für das GridView-Verfahren hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="56793-229">At this point, believe it or not, we're done with adding deleting support to the GridView!</span></span> <span data-ttu-id="56793-230">Siehe Abbildung 11 zeigt, dass beim Aufrufen dieser Seite über einen Browser eine Spalte mit Schaltflächen Löschen vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="56793-230">As Figure 11 shows, when visiting this page through a browser a column of Delete buttons is present.</span></span>

<span data-ttu-id="56793-231">[![CommandField eine Spalte mit Lösch Schaltflächen hinzufügt](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="56793-231">[![The CommandField Adds a Column of Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image25.png)</span></span>

<span data-ttu-id="56793-232">**Abbildung 11**: das CommandField fügt eine Spalte mit Lösch Schaltflächen hinzu ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="56793-232">**Figure 11**: The CommandField Adds a Column of Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image27.png))</span></span>

<span data-ttu-id="56793-233">Wenn Sie dieses Lernprogramm von Grund auf selbst erstellt haben, wird beim Testen dieser Seite eine Ausnahme ausgelöst, wenn Sie auf die Schaltfläche "Löschen" klicken.</span><span class="sxs-lookup"><span data-stu-id="56793-233">If you've been building this tutorial from the ground up on your own, when testing this page clicking the Delete button will raise an exception.</span></span> <span data-ttu-id="56793-234">Lesen Sie weiter, um zu erfahren, warum diese Ausnahmen ausgelöst wurden, und wie Sie Sie beheben.</span><span class="sxs-lookup"><span data-stu-id="56793-234">Continue reading to learn as to why these exceptions were raised and how to fix them.</span></span>

> [!NOTE]
> <span data-ttu-id="56793-235">Wenn Sie den Download im Rahmen dieses Tutorials durcharbeiten, wurden diese Probleme bereits berücksichtigt.</span><span class="sxs-lookup"><span data-stu-id="56793-235">If you're following along using the download accompanying this tutorial, these problems have already been accounted for.</span></span> <span data-ttu-id="56793-236">Ich empfehle Ihnen jedoch, die unten aufgeführten Details kennenzulernen, um Probleme zu identifizieren, die auftreten können, und geeignete Problem Umgehungen.</span><span class="sxs-lookup"><span data-stu-id="56793-236">However, I encourage you to read through the details listed below to help identify problems that may arise and suitable workarounds.</span></span>

<span data-ttu-id="56793-237">Wenn beim Versuch, ein Produkt zu löschen, eine Ausnahme ausgegeben wird, die der Meldung "*ObjectDataSource ' ObjectDataSource1 '" konnte keine nicht generische Methode "deleteProduct" finden, die über die folgenden Parameter verfügt: "ProductID", "Original\_ProductID*", "Sie haben wahrscheinlich vergessen, die `OldValuesParameterFormatString` Eigenschaft aus der ObjectDataSource zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="56793-237">If, when attempting to delete a product, you get an exception whose message is similar to "*ObjectDataSource 'ObjectDataSource1' could not find a non-generic method 'DeleteProduct' that has parameters: productID, original\_ProductID*," you likely forgot to remove the `OldValuesParameterFormatString` property from the ObjectDataSource.</span></span> <span data-ttu-id="56793-238">Wenn die `OldValuesParameterFormatString`-Eigenschaft angegeben ist, versucht ObjectDataSource, sowohl `productID` als auch `original_ProductID` Eingabeparameter an die `DeleteProduct`-Methode zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="56793-238">With the `OldValuesParameterFormatString` property specified, the ObjectDataSource attempts to pass in both `productID` and `original_ProductID` input parameters to the `DeleteProduct` method.</span></span> <span data-ttu-id="56793-239">`DeleteProduct`akzeptiert jedoch nur einen einzelnen Eingabeparameter, daher die Ausnahme.</span><span class="sxs-lookup"><span data-stu-id="56793-239">`DeleteProduct`, however, only accepts a single input parameter, hence the exception.</span></span> <span data-ttu-id="56793-240">Wenn Sie die `OldValuesParameterFormatString`-Eigenschaft entfernen (oder Sie auf `{0}`festlegen), weist ObjectDataSource an, nicht zu versuchen, den ursprünglichen Eingabeparameter zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="56793-240">Removing the `OldValuesParameterFormatString` property (or setting it to `{0}`) instructs the ObjectDataSource to not attempt to pass in the original input parameter.</span></span>

<span data-ttu-id="56793-241">[![stellen Sie sicher, dass die OldValuesParameterFormatString-Eigenschaft gelöscht wurde.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="56793-241">[![Ensure That the OldValuesParameterFormatString Property Has Been Cleared Out](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image28.png)</span></span>

<span data-ttu-id="56793-242">**Abbildung 12**: sicherstellen, dass die `OldValuesParameterFormatString`-Eigenschaft gelöscht wurde ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="56793-242">**Figure 12**: Ensure That the `OldValuesParameterFormatString` Property Has Been Cleared Out ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image30.png))</span></span>

<span data-ttu-id="56793-243">Auch wenn Sie die `OldValuesParameterFormatString`-Eigenschaft entfernt haben, erhalten Sie immer noch eine Ausnahme, wenn Sie versuchen, ein Produkt mit der folgenden Meldung zu löschen: "*die DELETE-Anweisung steht in Konflikt mit der Verweis Einschränkung ' FK\_Order\_Details\_Produkte*". Die Northwind-Datenbank enthält eine FOREIGN KEY-Einschränkung zwischen der `Order Details` und `Products` Tabelle. Dies bedeutet, dass ein Produkt nicht aus dem System gelöscht werden kann, wenn es mindestens einen Daten Satz in der `Order Details` Tabelle gibt.</span><span class="sxs-lookup"><span data-stu-id="56793-243">Even if you had removed the `OldValuesParameterFormatString` property, you still will get an exception when trying to delete a product with the message: "*The DELETE statement conflicted with the REFERENCE constraint 'FK\_Order\_Details\_Products'*." The Northwind database contains a foreign key constraint between the `Order Details` and `Products` table, meaning that a product cannot be deleted from the system if there are one or more records for it in the `Order Details` table.</span></span> <span data-ttu-id="56793-244">Da jedes Produkt in der Northwind-Datenbank über mindestens einen Datensatz in `Order Details`verfügt, können wir keine Produkte löschen, bis wir zum ersten Mal die zugeordneten Bestelldetails des Produkts löschen.</span><span class="sxs-lookup"><span data-stu-id="56793-244">Since every product in the Northwind database has at least one record in `Order Details`, we cannot delete any products until we first delete the product's associated order details records.</span></span>

<span data-ttu-id="56793-245">[![eine FOREIGN KEY-Einschränkung das Löschen von Produkten untersagt](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="56793-245">[![A Foreign Key Constraint Prohibits the Deletion of Products](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image31.png)</span></span>

<span data-ttu-id="56793-246">**Abbildung 13**: eine FOREIGN KEY-Einschränkung verbietet das Löschen von Produkten ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="56793-246">**Figure 13**: A Foreign Key Constraint Prohibits the Deletion of Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image33.png))</span></span>

<span data-ttu-id="56793-247">In unserem Tutorial löschen wir einfach alle Datensätze aus der `Order Details` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="56793-247">For our tutorial, let's just delete all of the records from the `Order Details` table.</span></span> <span data-ttu-id="56793-248">In einer realen Anwendung müssten wir Folgendes tun:</span><span class="sxs-lookup"><span data-stu-id="56793-248">In a real-world application we'd need to either:</span></span>

- <span data-ttu-id="56793-249">Einen weiteren Bildschirm zur Verwaltung von Bestelldetails anzeigen</span><span class="sxs-lookup"><span data-stu-id="56793-249">Have another screen to manage order details information</span></span>
- <span data-ttu-id="56793-250">Erweitern Sie die `DeleteProduct`-Methode, um Logik zum Löschen der Bestelldetails der angegebenen Produkte einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="56793-250">Augment the `DeleteProduct` method to include logic to delete the specified product's order details</span></span>
- <span data-ttu-id="56793-251">Ändern Sie die vom TableAdapter verwendete SQL-Abfrage so, dass die Bestelldetails des angegebenen Produkts gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="56793-251">Modify the SQL query used by the TableAdapter to include deletion of the specified product's order details</span></span>

<span data-ttu-id="56793-252">Löschen Sie einfach alle Datensätze aus der `Order Details` Tabelle, um die FOREIGN KEY-Einschränkung zu umgehen.</span><span class="sxs-lookup"><span data-stu-id="56793-252">Let's just delete all of the records from the `Order Details` table to circumvent the foreign key constraint.</span></span> <span data-ttu-id="56793-253">Wechseln Sie zum Server-Explorer in Visual Studio, klicken Sie mit der rechten Maustaste auf den Knoten `NORTHWND.MDF`, und wählen Sie neue Abfrage aus.</span><span class="sxs-lookup"><span data-stu-id="56793-253">Go to the Server Explorer in Visual Studio, right-click on the `NORTHWND.MDF` node, and choose New Query.</span></span> <span data-ttu-id="56793-254">Führen Sie anschließend im Abfragefenster die folgende SQL-Anweisung aus: `DELETE FROM [Order Details]`</span><span class="sxs-lookup"><span data-stu-id="56793-254">Then, in the query window, run the following SQL statement: `DELETE FROM [Order Details]`</span></span>

<span data-ttu-id="56793-255">[![alle Datensätze aus der Order Details-Tabelle löschen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="56793-255">[![Delete All Records from the Order Details Table](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image34.png)</span></span>

<span data-ttu-id="56793-256">**Abbildung 14**: Löschen aller Datensätze aus der `Order Details` Tabelle ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="56793-256">**Figure 14**: Delete All Records from the `Order Details` Table ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image36.png))</span></span>

<span data-ttu-id="56793-257">Nachdem Sie die `Order Details` Tabelle durch Klicken auf die Schaltfläche "Löschen" gelöscht haben, wird das Produkt ohne Fehler gelöscht.</span><span class="sxs-lookup"><span data-stu-id="56793-257">After clearing out the `Order Details` table clicking on the Delete button will delete the product without error.</span></span> <span data-ttu-id="56793-258">Wenn das Produkt durch Klicken auf die Schaltfläche Löschen nicht gelöscht wird, stellen Sie sicher, dass die `DataKeyNames`-Eigenschaft der GridView auf das Feld Primärschlüssel (`ProductID`) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="56793-258">If clicking on the Delete button does not delete the product, check to ensure that the GridView's `DataKeyNames` property is set to the primary key field (`ProductID`).</span></span>

> [!NOTE]
> <span data-ttu-id="56793-259">Beim Klicken auf die Schaltfläche Löschen folgt ein Postback, und der Datensatz wird gelöscht.</span><span class="sxs-lookup"><span data-stu-id="56793-259">When clicking on the Delete button a postback ensues and the record is deleted.</span></span> <span data-ttu-id="56793-260">Dies kann gefährlich sein, da es einfach ist, versehentlich auf die Lösch Schaltfläche der falschen Zeile zu klicken.</span><span class="sxs-lookup"><span data-stu-id="56793-260">This can be dangerous since it is easy to accidentally click on the wrong row's Delete button.</span></span> <span data-ttu-id="56793-261">In einem zukünftigen Tutorial erfahren Sie, wie Sie eine Client seitige Bestätigung beim Löschen eines Datensatzes hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="56793-261">In a future tutorial we'll see how to add a client-side confirmation when deleting a record.</span></span>

## <a name="editing-data-with-the-gridview"></a><span data-ttu-id="56793-262">Bearbeiten von Daten mit der GridView</span><span class="sxs-lookup"><span data-stu-id="56793-262">Editing Data with the GridView</span></span>

<span data-ttu-id="56793-263">Neben dem Löschen bietet das GridView-Steuerelement auch eine integrierte Bearbeitungs Unterstützung auf Zeilenebene.</span><span class="sxs-lookup"><span data-stu-id="56793-263">Along with deleting, the GridView control also provides built-in row-level editing support.</span></span> <span data-ttu-id="56793-264">Durch das Konfigurieren eines GridView zur Unterstützung der Bearbeitung wird eine Spalte mit Bearbeitungs Schaltflächen eingefügt</span><span class="sxs-lookup"><span data-stu-id="56793-264">Configuring a GridView to support editing adds a column of Edit buttons.</span></span> <span data-ttu-id="56793-265">Aus Sicht des Endbenutzers bewirkt das Klicken auf die Bearbeitungs Schaltfläche einer Zeile, dass diese Zeile bearbeitet werden kann. die Zellen werden in Textfelder umgewandelt, die die vorhandenen Werte enthalten, und die Bearbeitungs Schaltfläche durch die Schaltflächen aktualisieren und Abbrechen ersetzen.</span><span class="sxs-lookup"><span data-stu-id="56793-265">From the end user's perspective, clicking a row's Edit button causes that row to become editable, turning the cells into textboxes containing the existing values and replacing the Edit button with Update and Cancel buttons.</span></span> <span data-ttu-id="56793-266">Nachdem die gewünschten Änderungen vorgenommen wurden, kann der Endbenutzer auf die Schaltfläche Aktualisieren klicken, um die Änderungen zu übernehmen, oder auf die Schaltfläche Abbrechen, um die Änderungen</span><span class="sxs-lookup"><span data-stu-id="56793-266">After making their desired changes, the end user can click the Update button to commit the changes or the Cancel button to discard them.</span></span> <span data-ttu-id="56793-267">In beiden Fällen wird die GridView nach dem Klicken auf Aktualisieren oder Abbrechen in den Zustand der vorabbearbeitung zurückversetzt.</span><span class="sxs-lookup"><span data-stu-id="56793-267">In either case, after clicking Update or Cancel the GridView returns to its pre-editing state.</span></span>

<span data-ttu-id="56793-268">Wenn der Endbenutzer für eine bestimmte Zeile auf die Schaltfläche "Bearbeiten" klickt, wird aus unserer Perspektive als Seiten Entwickler ein Postback ausgeführt, und die GridView führt die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="56793-268">From our perspective as the page developer, when the end user clicks the Edit button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="56793-269">Die `EditItemIndex`-Eigenschaft der GridView wird dem Index der Zeile zugewiesen, auf deren Bearbeitungs Schaltfläche geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-269">The GridView's `EditItemIndex` property is assigned to the index of the row whose Edit button was clicked</span></span>
2. <span data-ttu-id="56793-270">Die GridView bindet sich an die ObjectDataSource zurück, indem Sie Ihre `Select()`-Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="56793-270">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>
3. <span data-ttu-id="56793-271">Der Zeilen Index, der dem `EditItemIndex` entspricht, wird im Bearbeitungsmodus gerendert.</span><span class="sxs-lookup"><span data-stu-id="56793-271">The row index that matches the `EditItemIndex` is rendered in "edit mode."</span></span> <span data-ttu-id="56793-272">In diesem Modus wird die Bearbeitungs Schaltfläche durch die Schaltflächen aktualisieren und Abbrechen und boundfields ersetzt, deren `ReadOnly` Eigenschaften false (Standard) sind, als TextBox-websteuer Elemente gerendert werden, deren `Text` Eigenschaften den Werten der Datenfelder zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="56793-272">In this mode, the Edit button is replaced by Update and Cancel buttons and BoundFields whose `ReadOnly` properties are False (the default) are rendered as TextBox Web controls whose `Text` properties are assigned to the data fields' values.</span></span>

<span data-ttu-id="56793-273">An diesem Punkt wird das Markup an den Browser zurückgegeben, sodass der Endbenutzer Änderungen an den Daten der Zeile vornehmen kann.</span><span class="sxs-lookup"><span data-stu-id="56793-273">At this point the markup is returned to the browser, allowing the end user to make any changes to the row's data.</span></span> <span data-ttu-id="56793-274">Wenn der Benutzer auf die Schaltfläche Aktualisieren klickt, erfolgt ein Postback, und die GridView führt die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="56793-274">When the user clicks the Update button, a postback occurs and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="56793-275">Den `UpdateParameters` Werten der ObjectDataSource werden die vom Endbenutzer in der Bearbeitungs Schnittstelle von GridView eingegebenen Werte zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="56793-275">The ObjectDataSource's `UpdateParameters` value(s) are assigned the values entered by the end user into the GridView's editing interface</span></span>
2. <span data-ttu-id="56793-276">Die `Update()`-Methode von ObjectDataSource wird aufgerufen, wobei der angegebene Datensatz aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="56793-276">The ObjectDataSource's `Update()` method is invoked, updating the specified record</span></span>
3. <span data-ttu-id="56793-277">Die GridView bindet sich an die ObjectDataSource zurück, indem Sie Ihre `Select()`-Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="56793-277">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="56793-278">Die Primärschlüssel Werte, die dem `UpdateParameters` in Schritt 1 zugewiesen sind, stammen aus den Werten, die in der `DataKeyNames`-Eigenschaft angegeben sind, wohingegen die nicht-Primärschlüssel Werte aus dem Text in den TextBox-websteuer Elementen für die bearbeitete Zeile stammen.</span><span class="sxs-lookup"><span data-stu-id="56793-278">The primary key values assigned to the `UpdateParameters` in Step 1 come from the values specified in the `DataKeyNames` property, whereas the non-primary key values come from the text in the TextBox Web controls for the edited row.</span></span> <span data-ttu-id="56793-279">Wie beim Löschen ist es wichtig, dass die `DataKeyNames`-Eigenschaft einer GridView ordnungsgemäß festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="56793-279">As with deleting, it is vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="56793-280">Wenn Sie nicht vorhanden ist, wird dem `UpdateParameters` Primärschlüssel Wert in Schritt 1 ein `null` Wert zugewiesen, der wiederum keine aktualisierten Datensätze in Schritt 2 ergibt.</span><span class="sxs-lookup"><span data-stu-id="56793-280">If it's missing, the `UpdateParameters` primary key value will be assigned a `null` value in Step 1, which in turn will not result in any updated records in Step 2.</span></span>

<span data-ttu-id="56793-281">Sie können die Bearbeitungsfunktion aktivieren, indem Sie einfach das Kontrollkästchen Bearbeiten aktivieren im Smarttags von GridView aktivieren.</span><span class="sxs-lookup"><span data-stu-id="56793-281">Editing functionality can be activated by simply checking the Enable Editing checkbox in the GridView's smart tag.</span></span>

![Aktivieren Sie das Kontrollkästchen Bearbeitung aktivieren.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image37.png)

<span data-ttu-id="56793-283">**Abbildung 15**: Aktivieren Sie das Kontrollkästchen "Bearbeiten aktivieren"</span><span class="sxs-lookup"><span data-stu-id="56793-283">**Figure 15**: Check the Enable Editing Checkbox</span></span>

<span data-ttu-id="56793-284">Wenn Sie das Kontrollkästchen "Bearbeitung aktivieren" aktivieren, wird ein CommandField (falls erforderlich) hinzugefügt und dessen `ShowEditButton`-Eigenschaft auf `true`festgelegt</span><span class="sxs-lookup"><span data-stu-id="56793-284">Checking the Enable Editing checkbox will add a CommandField (if needed) and set its `ShowEditButton` property to `true`.</span></span> <span data-ttu-id="56793-285">Wie bereits erwähnt, enthält das CommandField eine Reihe von `ShowXButton` Eigenschaften, die angeben, welche Reihe von Schaltflächen im CommandField angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-285">As we saw earlier, the CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="56793-286">Durch Aktivieren des Kontrollkästchens "Bearbeiten aktivieren" wird dem vorhandenen CommandField die `ShowEditButton`-Eigenschaft hinzugefügt</span><span class="sxs-lookup"><span data-stu-id="56793-286">Checking the Enable Editing checkbox adds the `ShowEditButton` property to the existing CommandField:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample6.aspx)]

<span data-ttu-id="56793-287">Das ist alles, was Sie tun müssen, um rudimentäre Bearbeitungs Unterstützung hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="56793-287">That's all there is to adding rudimentary editing support.</span></span> <span data-ttu-id="56793-288">Wie Figure16 zeigt, ist die Bearbeitungs Schnittstelle eher grob als jedes BoundField-Objekt, dessen `ReadOnly`-Eigenschaft auf `false` festgelegt ist (Standard), wird als Textfeld gerendert.</span><span class="sxs-lookup"><span data-stu-id="56793-288">As Figure16 shows, the editing interface is rather crude each BoundField whose `ReadOnly` property is set to `false` (the default) is rendered as a TextBox.</span></span> <span data-ttu-id="56793-289">Dies schließt Felder wie `CategoryID` und `SupplierID`ein, bei denen es sich um Schlüssel für andere Tabellen handelt.</span><span class="sxs-lookup"><span data-stu-id="56793-289">This includes fields like `CategoryID` and `SupplierID`, which are keys to other tables.</span></span>

<span data-ttu-id="56793-290">[![klicken auf die Schaltfläche "Chai s Edit" zeigt die Zeile im Bearbeitungsmodus an](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="56793-290">[![Clicking Chai s Edit Button Displays the Row in Edit Mode](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image38.png)</span></span>

<span data-ttu-id="56793-291">**Abbildung 16**: Klicken auf die Bearbeitungs Schaltfläche von Chai s zeigt die Zeile im Bearbeitungsmodus an ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="56793-291">**Figure 16**: Clicking Chai s Edit Button Displays the Row in Edit Mode ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image40.png))</span></span>

<span data-ttu-id="56793-292">Zusätzlich dazu, dass Benutzer aufgefordert werden, Fremdschlüssel Werte direkt zu bearbeiten, fehlt die Schnittstelle der Bearbeitungs Schnittstelle auf folgende Weise:</span><span class="sxs-lookup"><span data-stu-id="56793-292">In addition to asking users to edit foreign key values directly, the editing interface's interface is lacking in the following ways:</span></span>

- <span data-ttu-id="56793-293">Wenn der Benutzer einen `CategoryID` oder `SupplierID` eingibt, der nicht in der Datenbank vorhanden ist, verstößt der `UPDATE` gegen eine FOREIGN KEY-Einschränkung, wodurch eine Ausnahme ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="56793-293">If the user enters a `CategoryID` or `SupplierID` that does not exist in the database, the `UPDATE` will violate a foreign key constraint, causing an exception to be raised.</span></span>
- <span data-ttu-id="56793-294">Die Bearbeitungs Schnittstelle umfasst keine Validierung.</span><span class="sxs-lookup"><span data-stu-id="56793-294">The editing interface doesn't include any validation.</span></span> <span data-ttu-id="56793-295">Wenn Sie keinen erforderlichen Wert angeben (z. b. `ProductName`) oder einen Zeichen folgen Wert eingeben, in dem ein numerischer Wert erwartet wird (z. b. "zu viel!").</span><span class="sxs-lookup"><span data-stu-id="56793-295">If you don't provide a required value (such as `ProductName`), or enter a string value where a numeric value is expected (such as entering "Too much!"</span></span> <span data-ttu-id="56793-296">im Textfeld `UnitPrice`) wird eine Ausnahme ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="56793-296">into the `UnitPrice` textbox), an exception will be thrown.</span></span> <span data-ttu-id="56793-297">In einem zukünftigen Tutorial wird erläutert, wie Sie der Bearbeitungs Benutzeroberfläche Validierungs Steuerelemente hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="56793-297">A future tutorial will examine how to add validation controls to the editing user interface.</span></span>
- <span data-ttu-id="56793-298">Derzeit müssen *alle* nicht schreibgeschützten Produktfelder in der GridView enthalten sein.</span><span class="sxs-lookup"><span data-stu-id="56793-298">Currently, *all* product fields that are not read-only must be included in the GridView.</span></span> <span data-ttu-id="56793-299">Wenn Sie ein Feld aus der GridView entfernen, z. `UnitPrice`. Wenn Sie die Daten aktualisieren, würde die GridView den `UnitPrice` `UpdateParameters` Wert nicht festlegen, wodurch der `UnitPrice` des Datensatzes in einen `NULL` Wert geändert würde.</span><span class="sxs-lookup"><span data-stu-id="56793-299">If we were to remove a field from the GridView, say `UnitPrice`, when updating the data the GridView would not set the `UnitPrice` `UpdateParameters` value, which would change the database record's `UnitPrice` to a `NULL` value.</span></span> <span data-ttu-id="56793-300">Wenn ein erforderliches Feld, z. b. `ProductName`, aus der GridView entfernt wird, schlägt das Update ebenso fehl, dass die oben erwähnte Ausnahme "*Spalte ' ProductName ' keine NULL*-Werte zulässt".</span><span class="sxs-lookup"><span data-stu-id="56793-300">Similarly, if a required field, such as `ProductName`, is removed from the GridView, the update will fail with the same "*Column 'ProductName' does not allow nulls*" exception mentioned above.</span></span>
- <span data-ttu-id="56793-301">Die Formatierung der Bearbeitungs Schnittstelle lässt sich sehr viel wünschen.</span><span class="sxs-lookup"><span data-stu-id="56793-301">The editing interface formatting leaves a lot to be desired.</span></span> <span data-ttu-id="56793-302">Die `UnitPrice` wird mit vier Dezimalstellen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="56793-302">The `UnitPrice` is shown with four decimal points.</span></span> <span data-ttu-id="56793-303">Im Idealfall enthalten die Werte für `CategoryID` und `SupplierID` Dropdown Listen, die die Kategorien und Lieferanten im System auflisten.</span><span class="sxs-lookup"><span data-stu-id="56793-303">Ideally the `CategoryID` and `SupplierID` values would contain DropDownLists that list the categories and suppliers in the system.</span></span>

<span data-ttu-id="56793-304">Dabei handelt es sich um alle Mängel, mit denen wir uns jetzt beschäftigen müssen, aber in zukünftigen Tutorials behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-304">These are all shortcomings that we'll have to live with for now, but will be addressed in future tutorials.</span></span>

## <a name="inserting-editing-and-deleting-data-with-the-detailsview"></a><span data-ttu-id="56793-305">Einfügen, bearbeiten und Löschen von Daten mit der DetailsView</span><span class="sxs-lookup"><span data-stu-id="56793-305">Inserting, Editing, and Deleting Data with the DetailsView</span></span>

<span data-ttu-id="56793-306">Wie in den vorherigen Tutorials gezeigt, zeigt das DetailsView-Steuerelement einen Datensatz gleichzeitig an und ermöglicht, wie z. b. GridView, das Bearbeiten und Löschen des aktuell angezeigten Datensatzes.</span><span class="sxs-lookup"><span data-stu-id="56793-306">As we've seen in earlier tutorials, the DetailsView control displays one record at a time and, like the GridView, allows for editing and deleting of the currently displayed record.</span></span> <span data-ttu-id="56793-307">Sowohl die Benutzeroberflächen des Endbenutzers beim Bearbeiten als auch das Löschen von Elementen aus einer DetailsView und der Workflow von der ASP.NET-Seite sind identisch mit denen der GridView.</span><span class="sxs-lookup"><span data-stu-id="56793-307">Both the end user's experience with editing and deleting items from a DetailsView and the workflow from the ASP.NET side is identical to that of the GridView.</span></span> <span data-ttu-id="56793-308">Die DetailsView unterscheidet sich von der GridView, dass Sie auch integrierte einfügeunterstützung bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="56793-308">Where the DetailsView differs from the GridView is that it also provides built-in inserting support.</span></span>

<span data-ttu-id="56793-309">Um die Daten Änderungs Funktionen der GridView zu veranschaulichen, fügen Sie zunächst der `Basics.aspx` Seite oberhalb der vorhandenen GridView eine DetailsView hinzu und binden diese mithilfe des Smarttags der DetailsView an die vorhandene ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="56793-309">To demonstrate the data modification capabilities of the GridView, start by adding a DetailsView to the `Basics.aspx` page above the existing GridView and bind it to the existing ObjectDataSource through the DetailsView's smart tag.</span></span> <span data-ttu-id="56793-310">Löschen Sie als nächstes die Eigenschaften `Height` und `Width` der DetailsView, und aktivieren Sie die Option Paging aktivieren des Smarttags.</span><span class="sxs-lookup"><span data-stu-id="56793-310">Next, clear out the DetailsView's `Height` and `Width` properties, and check the Enable Paging option from the smart tag.</span></span> <span data-ttu-id="56793-311">Um das Bearbeiten, einfügen und Löschen der Unterstützung zu aktivieren, aktivieren Sie einfach die Kontrollkästchen Bearbeiten aktivieren, einfügen aktivieren und löschen im Smarttags aktivieren.</span><span class="sxs-lookup"><span data-stu-id="56793-311">To enable editing, inserting, and deleting support, simply check the Enable Editing, Enable Inserting, and Enable Deleting checkboxes in the smart tag.</span></span>

![Konfigurieren der DetailsView, um das Bearbeiten, einfügen und löschen zu unterstützen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image41.png)

<span data-ttu-id="56793-313">**Abbildung 17**: Konfigurieren der DetailsView für die Unterstützung von Bearbeitung, einfügen und löschen</span><span class="sxs-lookup"><span data-stu-id="56793-313">**Figure 17**: Configure the DetailsView to Support Editing, Inserting, and Deleting</span></span>

<span data-ttu-id="56793-314">Wie bei GridView wird durch das Hinzufügen von Unterstützung für das Bearbeiten, einfügen oder Löschen der DetailsView ein CommandField hinzugefügt, wie die folgende deklarative Syntax zeigt:</span><span class="sxs-lookup"><span data-stu-id="56793-314">As with the GridView, adding editing, inserting, or deleting support adds a CommandField to the DetailsView, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample7.aspx)]

<span data-ttu-id="56793-315">Beachten Sie, dass für die DetailsView das CommandField standardmäßig am Ende der Columns-Auflistung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="56793-315">Note that for the DetailsView the CommandField appears at the end of the Columns collection by default.</span></span> <span data-ttu-id="56793-316">Da die Felder der DetailsView als Zeilen gerendert werden, wird das CommandField als Zeile mit den Schaltflächen einfügen, bearbeiten und löschen am unteren Rand der DetailsView angezeigt.</span><span class="sxs-lookup"><span data-stu-id="56793-316">Since the DetailsView's fields are rendered as rows, the CommandField appears as a row with Insert, Edit, and Delete buttons at the bottom of the DetailsView.</span></span>

<span data-ttu-id="56793-317">[![Konfigurieren der DetailsView, um das Bearbeiten, einfügen und löschen zu unterstützen.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="56793-317">[![Configure the DetailsView to Support Editing, Inserting, and Deleting](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image42.png)</span></span>

<span data-ttu-id="56793-318">**Abbildung 18**: Konfigurieren der DetailsView für die Unterstützung von Bearbeitung, einfügen und löschen ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="56793-318">**Figure 18**: Configure the DetailsView to Support Editing, Inserting, and Deleting ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image44.png))</span></span>

<span data-ttu-id="56793-319">Wenn Sie auf die Schaltfläche "Löschen" klicken, wird dieselbe Abfolge von Ereignissen wie in der GridView-Ansicht gestartet: ein Postback. gefolgt von der DetailsView, die die `DeleteParameters` der ObjectDataSource basierend auf den `DataKeyNames` Werten auffüllt. und wurde mit einem-`Delete()` der ObjectDataSource-Methode abgeschlossen, die das Produkt tatsächlich aus der Datenbank entfernt.</span><span class="sxs-lookup"><span data-stu-id="56793-319">Clicking on the Delete button starts the same sequence of events as with the GridView: a postback; followed by the DetailsView populating its ObjectDataSource's `DeleteParameters` based on the `DataKeyNames` values; and completed with a call its ObjectDataSource's `Delete()` method, which actually removes the product from the database.</span></span> <span data-ttu-id="56793-320">Die Bearbeitung in DetailsView funktioniert auch identisch mit der der GridView.</span><span class="sxs-lookup"><span data-stu-id="56793-320">Editing in the DetailsView also works in a fashion identical to that of the GridView.</span></span>

<span data-ttu-id="56793-321">Zum Einfügen wird dem Endbenutzer eine neue Schaltfläche angezeigt, mit der die DetailsView im Einfügemodus gerendert wird, wenn darauf geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="56793-321">For inserting, the end user is presented with a New button that, when clicked, renders the DetailsView in "insert mode."</span></span> <span data-ttu-id="56793-322">Mit dem "Einfügemodus" wird die Schaltfläche "neu" durch die Schaltflächen einfügen und Abbrechen ersetzt, und nur die boundfields-Eigenschaft, deren `InsertVisible`-Eigenschaft auf `true` festgelegt ist (Standardeinstellung)</span><span class="sxs-lookup"><span data-stu-id="56793-322">With "insert mode" the New button is replaced by Insert and Cancel buttons and only those BoundFields whose `InsertVisible` property is set to `true` (the default) are displayed.</span></span> <span data-ttu-id="56793-323">Für diese Datenfelder, die als automatische Inkrement-Felder (z. b. `ProductID`) identifiziert werden, wird die [InsertVisible-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) auf `false` festgelegt, wenn die DetailsView über das Smarttag an die Datenquelle gebunden wird.</span><span class="sxs-lookup"><span data-stu-id="56793-323">Those data fields identified as auto-increment fields, such as `ProductID`, have their [InsertVisible property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) set to `false` when binding the DetailsView to the data source through the smart tag.</span></span>

<span data-ttu-id="56793-324">Wenn eine Datenquelle über das Smarttag an eine DetailsView gebunden wird, legt Visual Studio die `InsertVisible`-Eigenschaft auf `false` nur für Felder mit automatischer Inkrement fest.</span><span class="sxs-lookup"><span data-stu-id="56793-324">When binding a data source to a DetailsView through the smart tag, Visual Studio sets the `InsertVisible` property to `false` only for auto-increment fields.</span></span> <span data-ttu-id="56793-325">Schreibgeschützte Felder, wie `CategoryName` und `SupplierName`, werden auf der Benutzeroberfläche des Einfügemodus angezeigt, es sei denn, ihre `InsertVisible`-Eigenschaft ist explizit auf `false`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="56793-325">Read-only fields, like `CategoryName` and `SupplierName`, will be displayed in the "insert mode" user interface unless their `InsertVisible` property is explicitly set to `false`.</span></span> <span data-ttu-id="56793-326">Nehmen Sie sich einen Moment Zeit, um die `InsertVisible` Eigenschaften der beiden Felder auf `false`festzulegen, entweder über die deklarative Syntax der DetailsView oder über den Link "Felder bearbeiten" im Smarttags.</span><span class="sxs-lookup"><span data-stu-id="56793-326">Take a moment to set these two fields' `InsertVisible` properties to `false`, either through the DetailsView's declarative syntax or through the Edit Fields link in the smart tag.</span></span> <span data-ttu-id="56793-327">Abbildung 19 zeigt, wie Sie die `InsertVisible` Eigenschaften auf `false` festlegen, indem Sie auf den Link "Felder bearbeiten" klicken.</span><span class="sxs-lookup"><span data-stu-id="56793-327">Figure 19 shows setting the `InsertVisible` properties to `false` by clicking on the Edit Fields link.</span></span>

<span data-ttu-id="56793-328">[![Northwind Traders bietet jetzt Acme-Tee an](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="56793-328">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image45.png)</span></span>

<span data-ttu-id="56793-329">**Abbildung 19**: Northwind Traders bietet jetzt Acme-Tee ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="56793-329">**Figure 19**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image47.png))</span></span>

<span data-ttu-id="56793-330">Nachdem Sie die `InsertVisible` Eigenschaften festgelegt haben, können Sie die `Basics.aspx` Seite in einem Browser anzeigen und auf die Schaltfläche Neu klicken.</span><span class="sxs-lookup"><span data-stu-id="56793-330">After setting the `InsertVisible` properties, view the `Basics.aspx` page in a browser and click the New button.</span></span> <span data-ttu-id="56793-331">Abbildung 20 zeigt die DetailsView beim Hinzufügen eines neuen Getränks, eines Acme-Tees, zu unserer Produktlinie.</span><span class="sxs-lookup"><span data-stu-id="56793-331">Figure 20 shows the DetailsView when adding a new beverage, Acme Tea, to our product line.</span></span>

<span data-ttu-id="56793-332">[![Northwind Traders bietet jetzt Acme-Tee an](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="56793-332">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image48.png)</span></span>

<span data-ttu-id="56793-333">**Abbildung 20**: Northwind Traders bietet jetzt Acme-Tee ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="56793-333">**Figure 20**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image50.png))</span></span>

<span data-ttu-id="56793-334">Nachdem Sie die Details für den Acme-Tee eingegeben und auf die Schaltfläche Einfügen geklickt haben, folgt ein Postback, und der neue Datensatz wird der `Products` Datenbanktabelle hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="56793-334">After entering the details for Acme Tea and clicking the Insert button, a postback ensues and the new record is added to the `Products` database table.</span></span> <span data-ttu-id="56793-335">Da in dieser DetailsView die Produkte aufgeführt werden, in denen Sie in der Datenbanktabelle vorhanden sind, muss eine Seite zum letzten Produkt angezeigt werden, um das neue Produkt anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="56793-335">Since this DetailsView lists the products in order with which they exist in the database table, we must page to the last product in order to see the new product.</span></span>

<span data-ttu-id="56793-336">[![Details für den Acme-Tee](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="56793-336">[![Details for Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image51.png)</span></span>

<span data-ttu-id="56793-337">**Abbildung 21**: Details zum Acme-Tee ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image53.png))</span><span class="sxs-lookup"><span data-stu-id="56793-337">**Figure 21**: Details for Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image53.png))</span></span>

> [!NOTE]
> <span data-ttu-id="56793-338">Die [CurrentMode-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) von DetailsView gibt an, dass die Schnittstelle angezeigt wird, und kann einen der folgenden Werte aufweisen: `Edit`, `Insert`oder `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="56793-338">The DetailsView's [CurrentMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) indicates the interface being displayed and can be one of the following values: `Edit`, `Insert`, or `ReadOnly`.</span></span> <span data-ttu-id="56793-339">Die [DefaultMode-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) gibt den Modus an, zu dem die DetailsView zurückkehrt, nachdem ein Edit-oder INSERT-Vorgang abgeschlossen wurde, und eignet sich zum Anzeigen einer DetailsView, die dauerhaft im Bearbeitungs-oder Einfügemodus ist.</span><span class="sxs-lookup"><span data-stu-id="56793-339">The [DefaultMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) indicates the mode the DetailsView returns to after an edit or insert has been completed and is useful for displaying a DetailsView that is permanently in edit or insert mode.</span></span>

<span data-ttu-id="56793-340">Das Einfügen und Bearbeiten von Funktionen in DetailsView weist die gleichen Einschränkungen wie die GridView auf: der Benutzer muss vorhandene `CategoryID` und `SupplierID` Werte über ein Textfeld eingeben. der Schnittstelle fehlt eine Validierungs Logik. Alle Produktfelder, die keine `NULL` Werte zulassen oder auf der Datenbankebene keinen Standardwert angeben, müssen in der einfügeschnittstelle enthalten sein usw.</span><span class="sxs-lookup"><span data-stu-id="56793-340">The point and click inserting and editing capabilities of the DetailsView suffer from the same limitations as the GridView: the user must enter existing `CategoryID` and `SupplierID` values through a textbox; the interface lacks any validation logic; all product fields that do not allow `NULL` values or don't have a default value specified at the database level must be included in the inserting interface, and so on.</span></span>

<span data-ttu-id="56793-341">Die Techniken, die wir für das erweitern und verbessern der Bearbeitungs Schnittstelle von GridView in zukünftigen Artikeln untersuchen werden, können auch auf die Schnittstellen zum Bearbeiten und Einfügen des DetailsView-Steuer Elements angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="56793-341">The techniques we will examine for extending and enhancing the GridView's editing interface in future articles can be applied to the DetailsView control's editing and inserting interfaces as well.</span></span>

## <a name="using-the-formview-for-a-more-flexible-data-modification-user-interface"></a><span data-ttu-id="56793-342">Verwenden von FormView für eine flexiblere Daten Änderungs Benutzeroberfläche</span><span class="sxs-lookup"><span data-stu-id="56793-342">Using the FormView for a More Flexible Data Modification User Interface</span></span>

<span data-ttu-id="56793-343">Die FormView bietet integrierte Unterstützung für das Einfügen, bearbeiten und Löschen von Daten, aber da Sie anstelle von Feldern Vorlagen verwendet, gibt es keinen Ort zum Hinzufügen der boundfields-oder CommandField-Steuerelemente, die von den Steuerelementen GridView und DetailsView zum Bereitstellen der Daten verwendet werden. Schnittstelle ändern.</span><span class="sxs-lookup"><span data-stu-id="56793-343">The FormView offers built-in support for inserting, editing, and deleting data, but because it uses templates instead of fields there's no place to add the BoundFields or the CommandField used by the GridView and DetailsView controls to provide the data modification interface.</span></span> <span data-ttu-id="56793-344">Stattdessen wird diese Schnittstelle die websteuer Elemente zum Erfassen von Benutzereingaben beim Hinzufügen eines neuen Elements oder zum Bearbeiten eines vorhandenen Elements zusammen mit den Schaltflächen neu, bearbeiten, löschen, einfügen, aktualisieren und Abbrechen manuell zu den entsprechenden Vorlagen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="56793-344">Instead, this interface the Web controls for collecting user input when adding a new item or editing an existing one along with the New, Edit, Delete, Insert, Update, and Cancel buttons must be added manually to the appropriate templates.</span></span> <span data-ttu-id="56793-345">Glücklicherweise erstellt Visual Studio automatisch die erforderliche Schnittstelle, wenn die Form Ansicht über die Dropdown Liste im Smarttags an eine Datenquelle gebunden wird.</span><span class="sxs-lookup"><span data-stu-id="56793-345">Fortunately, Visual Studio will automatically create the needed interface when binding the FormView to a data source through the drop-down list in its smart tag.</span></span>

<span data-ttu-id="56793-346">Um diese Techniken zu veranschaulichen, fügen Sie zunächst der Seite `Basics.aspx` eine FormView hinzu, und binden Sie Sie aus dem Smarttag von FormView an die bereits erstellte ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="56793-346">To illustrate these techniques, start by adding a FormView to the `Basics.aspx` page and, from the FormView's smart tag, bind it to the ObjectDataSource already created.</span></span> <span data-ttu-id="56793-347">Dadurch wird eine `EditItemTemplate`, `InsertItemTemplate`und `ItemTemplate` für die FormView mit TextBox-websteuer Elementen generiert, die die Eingabe-und Schaltflächen-websteuer Elemente des Benutzers für die Schaltflächen neu, bearbeiten, löschen, einfügen, aktualisieren und Abbrechen erfassen.</span><span class="sxs-lookup"><span data-stu-id="56793-347">This will generate an `EditItemTemplate`, `InsertItemTemplate`, and `ItemTemplate` for the FormView with TextBox Web controls for collecting the user's input and Button Web controls for the New, Edit, Delete, Insert, Update, and Cancel buttons.</span></span> <span data-ttu-id="56793-348">Außerdem wird die `DataKeyNames`-Eigenschaft von FormView auf das Primärschlüssel Feld (`ProductID`) des Objekts festgelegt, das von ObjectDataSource zurückgegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-348">Additionally, the FormView's `DataKeyNames` property is set to the primary key field (`ProductID`) of the object returned by the ObjectDataSource.</span></span> <span data-ttu-id="56793-349">Aktivieren Sie abschließend die Option Paging aktivieren im Smarttag von FormView.</span><span class="sxs-lookup"><span data-stu-id="56793-349">Lastly, check the Enable Paging option in the FormView's smart tag.</span></span>

<span data-ttu-id="56793-350">Das folgende Beispiel zeigt das deklarative Markup für die `ItemTemplate` von FormView, nachdem FormView an die ObjectDataSource gebunden wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-350">The following shows the declarative markup for the FormView's `ItemTemplate` after the FormView has been bound to the ObjectDataSource.</span></span> <span data-ttu-id="56793-351">Standardmäßig ist jedes nicht-boolesche Wert-Produktfeld an die `Text`-Eigenschaft eines Bezeichnungs-websteuer Elements gebunden, während jedes boolesche Wertfeld (`Discontinued`) an die `Checked`-Eigenschaft eines deaktivierten CheckBox-websteuer Elements gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="56793-351">By default, each non-Boolean value product field is bound to the `Text` property of a Label Web control while each Boolean value field (`Discontinued`) is bound to the `Checked` property of a disabled CheckBox Web control.</span></span> <span data-ttu-id="56793-352">Damit die Schaltflächen "neu", "Bearbeiten" und "Löschen" bei einem Klick ein bestimmtes FormView-Verhalten auslöst, ist es zwingend erforderlich, dass die `CommandName` Werte auf "`New`", "`Edit`" und "`Delete`" festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-352">In order for the New, Edit, and Delete buttons to trigger certain FormView behavior when clicked, it is imperative that their `CommandName` values be set to `New`, `Edit`, and `Delete`, respectively.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample8.aspx)]

<span data-ttu-id="56793-353">Abbildung 22 zeigt die `ItemTemplate` von FormView, wenn Sie in einem Browser angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="56793-353">Figure 22 shows the FormView's `ItemTemplate` when viewed through a browser.</span></span> <span data-ttu-id="56793-354">Jedes Produktfeld wird im unteren Bereich mit den Schaltflächen neu, bearbeiten und löschen aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="56793-354">Each product field is listed with the New, Edit, and Delete buttons at the bottom.</span></span>

<span data-ttu-id="56793-355">[![der defaut FormView ItemTemplate werden die einzelnen Produktfelder zusammen mit den Schaltflächen neu, bearbeiten und löschen aufgelistet.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image54.png)</span><span class="sxs-lookup"><span data-stu-id="56793-355">[![The Defaut FormView ItemTemplate Lists Each Product Field Along with New, Edit, and Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image54.png)</span></span>

<span data-ttu-id="56793-356">**Abbildung 22**: im defaut FormView-`ItemTemplate` werden die einzelnen Produktfelder zusammen mit den Schaltflächen neu, bearbeiten und löschen aufgelistet ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image56.png))</span><span class="sxs-lookup"><span data-stu-id="56793-356">**Figure 22**: The Defaut FormView `ItemTemplate` Lists Each Product Field Along with New, Edit, and Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image56.png))</span></span>

<span data-ttu-id="56793-357">Wie bei GridView und DetailsView führt das Klicken auf die Schaltfläche Löschen oder auf eine beliebige Schaltfläche, LinkButton oder ImageButton, deren `CommandName`-Eigenschaft auf Delete festgelegt ist, zu einem Postback, füllt die `DeleteParameters` von ObjectDataSource basierend auf dem `DataKeyNames` Wert von FormView auf und ruft die `Delete()`-Methode von ObjectDataSource auf.</span><span class="sxs-lookup"><span data-stu-id="56793-357">Like with the GridView and DetailsView, clicking the Delete button or any Button, LinkButton, or ImageButton whose `CommandName` property is set to Delete causes a postback, populates the ObjectDataSource's `DeleteParameters` based on the FormView's `DataKeyNames` value, and invokes the ObjectDataSource's `Delete()` method.</span></span>

<span data-ttu-id="56793-358">Wenn auf die Schaltfläche Bearbeiten geklickt wird, wird ein Postback durchsucht, und die Daten werden an den `EditItemTemplate`zurückgebunden, der für das Rendern der Bearbeitungs Schnittstelle zuständig ist.</span><span class="sxs-lookup"><span data-stu-id="56793-358">When the Edit button is clicked a postback ensues and the data is rebound to the `EditItemTemplate`, which is responsible for rendering the editing interface.</span></span> <span data-ttu-id="56793-359">Diese Schnittstelle enthält die websteuer Elemente zum Bearbeiten von Daten zusammen mit den Schaltflächen aktualisieren und Abbrechen.</span><span class="sxs-lookup"><span data-stu-id="56793-359">This interface includes the Web controls for editing data along with the Update and Cancel buttons.</span></span> <span data-ttu-id="56793-360">Der von Visual Studio generierte Standard `EditItemTemplate` enthält eine Bezeichnung für alle automatischen Inkrement-Felder (`ProductID`), ein Textfeld für jedes nicht-boolesche Wertfeld und ein Kontrollkästchen für jedes boolesche Wertfeld.</span><span class="sxs-lookup"><span data-stu-id="56793-360">The default `EditItemTemplate` generated by Visual Studio contains a Label for any auto-increment fields (`ProductID`), a TextBox for each non-Boolean value field, and a CheckBox for each Boolean value field.</span></span> <span data-ttu-id="56793-361">Dieses Verhalten ähnelt dem automatisch generierten boundfields-Steuerelement in den GridView-und DetailsView-Steuerelementen.</span><span class="sxs-lookup"><span data-stu-id="56793-361">This behavior is very similar to the auto-generated BoundFields in the GridView and DetailsView controls.</span></span>

> [!NOTE]
> <span data-ttu-id="56793-362">Ein kleines Problem bei der automatischen Generierung der `EditItemTemplate` von FormView besteht darin, dass es TextBox-websteuer Elemente für Felder rendert, die schreibgeschützt sind, z. b. `CategoryName` und `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="56793-362">One small issue with the FormView's auto-generation of the `EditItemTemplate` is that it renders TextBox Web controls for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="56793-363">Dies wird in Kürze erläutert.</span><span class="sxs-lookup"><span data-stu-id="56793-363">We'll see how to account for this shortly.</span></span>

<span data-ttu-id="56793-364">Die `Text`-Eigenschaft der TextBox-Steuerelemente in der `EditItemTemplate` *muss mithilfe der*bidirektionalen Datenbindung an den Wert des entsprechenden Daten Felds gebunden werden.</span><span class="sxs-lookup"><span data-stu-id="56793-364">The TextBox controls in the `EditItemTemplate` have their `Text` property bound to the value of their corresponding data field using *two-way databinding*.</span></span> <span data-ttu-id="56793-365">Die bidirektionale Datenbindung, die durch `<%# Bind("dataField") %>`angegeben wird, führt die Datenbindung sowohl beim Binden von Daten an die Vorlage als auch beim Auffüllen der Parameter von ObjectDataSource zum Einfügen oder Bearbeiten von Datensätzen aus.</span><span class="sxs-lookup"><span data-stu-id="56793-365">Two-way databinding, denoted by `<%# Bind("dataField") %>`, performs databinding both when binding data to the template and when populating the ObjectDataSource's parameters for inserting or editing records.</span></span> <span data-ttu-id="56793-366">Das heißt, wenn der Benutzer im `ItemTemplate`auf die Schaltfläche "Bearbeiten" klickt, gibt die `Bind()`-Methode den angegebenen Daten Feldwert zurück.</span><span class="sxs-lookup"><span data-stu-id="56793-366">That is, when the user clicks the Edit button from the `ItemTemplate`, the `Bind()` method returns the specified data field value.</span></span> <span data-ttu-id="56793-367">Nachdem der Benutzer die Änderungen vorgenommen und auf Update geklickt hat, werden die zurückgegebenen Werte, die den mit `Bind()` angegebenen Datenfeldern entsprechen, auf die `UpdateParameters`von ObjectDataSource angewendet.</span><span class="sxs-lookup"><span data-stu-id="56793-367">After the user makes their changes and clicks Update, the values posted back that correspond to the data fields specified using `Bind()` are applied to the ObjectDataSource's `UpdateParameters`.</span></span> <span data-ttu-id="56793-368">Alternativ werden bei der unidirektionalen Datenbindung, die durch `<%# Eval("dataField") %>`gekennzeichnet ist, nur die Daten Feldwerte abgerufen, wenn Daten an die Vorlage gebunden werden, und die vom Benutzer eingegebenen Werte werden beim Postback *nicht* an die Parameter der Datenquelle zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="56793-368">Alternatively, one-way databinding, denoted by `<%# Eval("dataField") %>`, only retrieves the data field values when binding data to the template and does *not* return the user-entered values to the data source's parameters on postback.</span></span>

<span data-ttu-id="56793-369">Das folgende deklarative Markup zeigt die `EditItemTemplate`von FormView.</span><span class="sxs-lookup"><span data-stu-id="56793-369">The following declarative markup shows the FormView's `EditItemTemplate`.</span></span> <span data-ttu-id="56793-370">Beachten Sie, dass die `Bind()`-Methode in der Datenbindung-Syntax hier verwendet wird und dass für die websteuer Elemente Update und Abbrechen die `CommandName` Eigenschaften entsprechend festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="56793-370">Note that the `Bind()` method is used in the databinding syntax here and that the Update and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample9.aspx)]

<span data-ttu-id="56793-371">Unsere `EditItemTemplate`wird zu diesem Zeitpunkt eine Ausnahme auslösen, wenn Sie versuchen, Sie zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="56793-371">Our `EditItemTemplate`, at this point, will cause an exception to be thrown if we attempt to use it.</span></span> <span data-ttu-id="56793-372">Das Problem besteht darin, dass die Felder `CategoryName` und `SupplierName` als TextBox-websteuer Elemente im `EditItemTemplate`gerendert werden.</span><span class="sxs-lookup"><span data-stu-id="56793-372">The problem is that the `CategoryName` and `SupplierName` fields are rendered as TextBox Web controls in the `EditItemTemplate`.</span></span> <span data-ttu-id="56793-373">Diese Textfelder müssen entweder in Bezeichnungen geändert oder entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-373">We either need to change these TextBoxes to Labels or remove them altogether.</span></span> <span data-ttu-id="56793-374">Wir löschen Sie einfach vollständig aus dem `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="56793-374">Let's simply delete them entirely from the `EditItemTemplate`.</span></span>

<span data-ttu-id="56793-375">Abbildung 23 zeigt die Form View in einem Browser, nachdem auf die Schaltfläche Bearbeiten für Chai geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-375">Figure 23 shows the FormView in a browser after the Edit button has been clicked for Chai.</span></span> <span data-ttu-id="56793-376">Beachten Sie, dass die `SupplierName`-und `CategoryName` Felder, die in der `ItemTemplate` angezeigt werden, nicht mehr vorhanden sind, da wir Sie soeben aus dem `EditItemTemplate`entfernt haben.</span><span class="sxs-lookup"><span data-stu-id="56793-376">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them from the `EditItemTemplate`.</span></span> <span data-ttu-id="56793-377">Wenn auf die Schaltfläche Aktualisieren geklickt wird, führt FormView die gleiche Abfolge von Schritten durch wie das GridView-Steuerelement und das DetailsView-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="56793-377">When the Update button is clicked the FormView proceeds through the same sequence of steps as the GridView and DetailsView controls.</span></span>

<span data-ttu-id="56793-378">[![Standardmäßig zeigt EditItemTemplate jedes bearbeitbare Produktfeld als Textfeld oder Kontrollkästchen an.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="56793-378">[![By Default the EditItemTemplate Shows Each Editable Product Field as a TextBox or CheckBox](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image57.png)</span></span>

<span data-ttu-id="56793-379">**Abbildung 23**: Standardmäßig zeigt das `EditItemTemplate` jedes bearbeitbare Produktfeld als Textfeld oder Kontrollkästchen[an (Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image59.png)).</span><span class="sxs-lookup"><span data-stu-id="56793-379">**Figure 23**: By Default the `EditItemTemplate` Shows Each Editable Product Field as a TextBox or CheckBox ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image59.png))</span></span>

<span data-ttu-id="56793-380">Wenn auf die Schaltfläche Einfügen geklickt wird, `ItemTemplate` ein Postback.</span><span class="sxs-lookup"><span data-stu-id="56793-380">When the Insert button is clicked the FormView's `ItemTemplate` a postback ensues.</span></span> <span data-ttu-id="56793-381">Es werden jedoch keine Daten an die FormView gebunden, da ein neuer Datensatz hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="56793-381">However, no data is bound to the FormView because a new record is being added.</span></span> <span data-ttu-id="56793-382">Die `InsertItemTemplate`-Schnittstelle enthält die websteuer Elemente zum Hinzufügen eines neuen Datensatzes zusammen mit den Schaltflächen einfügen und Abbrechen.</span><span class="sxs-lookup"><span data-stu-id="56793-382">The `InsertItemTemplate` interface includes the Web controls for adding a new record along with the Insert and Cancel buttons.</span></span> <span data-ttu-id="56793-383">Der Standard `InsertItemTemplate`, der von Visual Studio generiert wird, enthält ein Textfeld für jedes nicht-boolesche Wertfeld und ein Kontrollkästchen für jedes boolesche Wertfeld, ähnlich wie bei der Schnittstelle der automatisch generierten `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="56793-383">The default `InsertItemTemplate` generated by Visual Studio contains a TextBox for each non-Boolean value field and a CheckBox for each Boolean value field, similar to the auto-generated `EditItemTemplate`'s interface.</span></span> <span data-ttu-id="56793-384">Die `Text`-Eigenschaft der Textfeld-Steuerelemente wird mithilfe der bidirektionalen Datenbindung an den Wert des entsprechenden Daten Felds gebunden.</span><span class="sxs-lookup"><span data-stu-id="56793-384">The TextBox controls have their `Text` property bound to the value of their corresponding data field using two-way databinding.</span></span>

<span data-ttu-id="56793-385">Das folgende deklarative Markup zeigt die `InsertItemTemplate`von FormView.</span><span class="sxs-lookup"><span data-stu-id="56793-385">The following declarative markup shows the FormView's `InsertItemTemplate`.</span></span> <span data-ttu-id="56793-386">Beachten Sie, dass die `Bind()`-Methode in der Datenbindung-Syntax hier verwendet wird und dass die `CommandName` Eigenschaften für die Schaltfläche "Einfügen" und "Abbrechen" entsprechend festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="56793-386">Note that the `Bind()` method is used in the databinding syntax here and that the Insert and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample10.aspx)]

<span data-ttu-id="56793-387">Die automatische Generierung des `InsertItemTemplate`der FormView hat eine Feinheit.</span><span class="sxs-lookup"><span data-stu-id="56793-387">There's a subtlety with the FormView's auto-generation of the `InsertItemTemplate`.</span></span> <span data-ttu-id="56793-388">Insbesondere die TextBox-websteuer Elemente werden erstellt, auch für diejenigen Felder, die schreibgeschützt sind, z. b. `CategoryName` und `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="56793-388">Specifically, the TextBox Web controls are created even for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="56793-389">Wie beim `EditItemTemplate`müssen diese Textfelder aus dem `InsertItemTemplate`entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="56793-389">Like with the `EditItemTemplate`, we need to remove these TextBoxes from the `InsertItemTemplate`.</span></span>

<span data-ttu-id="56793-390">Abbildung 24 zeigt die Form View in einem Browser, wenn Sie ein neues Produkt, Acme Coffee, hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="56793-390">Figure 24 shows the FormView in a browser when adding a new product, Acme Coffee.</span></span> <span data-ttu-id="56793-391">Beachten Sie, dass die `SupplierName`-und `CategoryName` Felder, die im `ItemTemplate` angezeigt werden, nicht mehr vorhanden sind, wie wir Sie gerade entfernt haben.</span><span class="sxs-lookup"><span data-stu-id="56793-391">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them.</span></span> <span data-ttu-id="56793-392">Wenn auf die Schaltfläche Einfügen geklickt wird, durchläuft FormView die gleiche Abfolge von Schritten wie das DetailsView-Steuerelement und fügt der `Products` Tabelle einen neuen Datensatz hinzu.</span><span class="sxs-lookup"><span data-stu-id="56793-392">When the Insert button is clicked the FormView proceeds through the same sequence of steps as the DetailsView control, adding a new record to the `Products` table.</span></span> <span data-ttu-id="56793-393">Abbildung 25 zeigt die Details des Acme Coffee-Produkts in der FormView, nachdem Sie eingefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-393">Figure 25 shows Acme Coffee product's details in the FormView after it has been inserted.</span></span>

<span data-ttu-id="56793-394">[![die InsertItemTemplate die einfügeschnittstelle der FormView-Eigenschaft festlegt.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image60.png)</span><span class="sxs-lookup"><span data-stu-id="56793-394">[![The InsertItemTemplate Dictates the FormView's Inserting Interface](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image60.png)</span></span>

<span data-ttu-id="56793-395">**Abbildung 24**: die `InsertItemTemplate` die die einfügeschnittstelle von FormView festlegt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image62.png))</span><span class="sxs-lookup"><span data-stu-id="56793-395">**Figure 24**: The `InsertItemTemplate` Dictates the FormView's Inserting Interface ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image62.png))</span></span>

<span data-ttu-id="56793-396">[![die Details für das neue Produkt, die Acme Coffee, werden in der FormView angezeigt.](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="56793-396">[![The Details for New Product, Acme Coffee, are Displayed in the FormView](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image63.png)</span></span>

<span data-ttu-id="56793-397">**Abbildung 25**: die Details für das neue Produkt, die Acme Coffee, werden in der FormView angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image65.png))</span><span class="sxs-lookup"><span data-stu-id="56793-397">**Figure 25**: The Details for New Product, Acme Coffee, are Displayed in the FormView ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image65.png))</span></span>

<span data-ttu-id="56793-398">Durch das Aufteilen der schreibgeschützten, Bearbeitungs-und einfügeschnittstellen in drei separate Vorlagen ermöglicht die FormView eine präzisere Kontrolle über diese Schnittstellen als die DetailsView und GridView.</span><span class="sxs-lookup"><span data-stu-id="56793-398">By separating out the read-only, editing, and inserting interfaces into three separate templates, the FormView allows for a finer degree of control over these interfaces than the DetailsView and GridView.</span></span>

> [!NOTE]
> <span data-ttu-id="56793-399">Wie die DetailsView zeigt die `CurrentMode`-Eigenschaft von FormView die angezeigte Schnittstelle an, und ihre `DefaultMode`-Eigenschaft gibt den Modus an, zu dem die FormView zurückkehrt, nachdem eine Bearbeitung oder eine Einfügung abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="56793-399">Like the DetailsView, the FormView's `CurrentMode` property indicates the interface being displayed and its `DefaultMode` property indicates the mode the FormView returns to after an edit or insert has been completed.</span></span>

## <a name="summary"></a><span data-ttu-id="56793-400">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="56793-400">Summary</span></span>

<span data-ttu-id="56793-401">In diesem Tutorial haben wir die Grundlagen zum Einfügen, bearbeiten und Löschen von Daten mithilfe von GridView, DetailsView und FormView untersucht.</span><span class="sxs-lookup"><span data-stu-id="56793-401">In this tutorial we examined the basics of inserting, editing, and deleting data using the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="56793-402">Alle drei Steuerelemente bieten eine Reihe integrierter Funktionen für die Datenänderung, die verwendet werden können, ohne dass eine einzige Codezeile in der ASP.NET-Seite durch die datenweb Steuerelemente und die ObjectDataSource geschrieben werden kann.</span><span class="sxs-lookup"><span data-stu-id="56793-402">All three of these controls provide some level of built-in data modification capabilities that can be utilized without writing a single line of code in the ASP.NET page thanks to the data Web controls and the ObjectDataSource.</span></span> <span data-ttu-id="56793-403">Die einfachen Punkt-und Klick Techniken erzeugen jedoch eine recht Frail-und naive Daten Änderungs Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="56793-403">However, the simple point and click techniques render a fairly frail and naïve data modification user interface.</span></span> <span data-ttu-id="56793-404">Um die Validierung zu ermöglichen, programmgesteuerte Werte einzufügen, Ausnahmen ordnungsgemäß zu behandeln, die Benutzeroberfläche anzupassen usw., müssen wir uns auf eine Reihe von Techniken stützen, die in den nächsten Tutorials erläutert werden.</span><span class="sxs-lookup"><span data-stu-id="56793-404">To provide validation, inject programmatic values, gracefully handle exceptions, customize the user interface, and so on, we'll need to rely on a bevy of techniques that will be discussed over the next several tutorials.</span></span>

<span data-ttu-id="56793-405">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="56793-405">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="56793-406">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="56793-406">About the Author</span></span>

<span data-ttu-id="56793-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="56793-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="56793-408">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="56793-408">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="56793-409">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="56793-409">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="56793-410">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="56793-410">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="56793-411">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="56793-411">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="56793-412">Weiter</span><span class="sxs-lookup"><span data-stu-id="56793-412">Next</span></span>](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)
