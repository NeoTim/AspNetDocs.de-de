---
uid: web-forms/overview/data-access/enhancing-the-gridview/inserting-a-new-record-from-the-gridview-s-footer-cs
title: Einfügen eines neuen Datensatzes aus der Fußzeile der GridViewC#() | Microsoft-Dokumentation
author: rick-anderson
description: Das GridView-Steuerelement bietet zwar keine integrierte Unterstützung für das Einfügen eines neuen Datensatzes, aber in diesem Tutorial wird gezeigt, wie Sie die GridView so erweitern können, dass ein...
ms.author: riande
ms.date: 03/06/2007
ms.assetid: 49545652-98af-46ba-9dbc-9ab529805d9b
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/inserting-a-new-record-from-the-gridview-s-footer-cs
msc.type: authoredcontent
ms.openlocfilehash: 6b337fe395a0ed54b03767111e73ea6d6c0ba23a
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2019
ms.locfileid: "74591925"
---
# <a name="inserting-a-new-record-from-the-gridviews-footer-c"></a><span data-ttu-id="cc264-103">Einfügen eines neuen Datensatzes in den GridView-Fuß (C#)</span><span class="sxs-lookup"><span data-stu-id="cc264-103">Inserting a New Record from the GridView's Footer (C#)</span></span>

<span data-ttu-id="cc264-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="cc264-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="cc264-105">[Beispiel-app herunterladen](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_53_CS.exe) oder [PDF herunterladen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/datatutorial53cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="cc264-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_53_CS.exe) or [Download PDF](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/datatutorial53cs1.pdf)</span></span>

> <span data-ttu-id="cc264-106">Das GridView-Steuerelement bietet zwar keine integrierte Unterstützung für das Einfügen eines neuen Datensatzes, aber in diesem Tutorial wird gezeigt, wie Sie die GridView so erweitern können, dass Sie eine einfügeschnittstelle einschließt.</span><span class="sxs-lookup"><span data-stu-id="cc264-106">While the GridView control does not provide built-in support for inserting a new record of data, this tutorial shows how to augment the GridView to include an inserting interface.</span></span>

## <a name="introduction"></a><span data-ttu-id="cc264-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="cc264-107">Introduction</span></span>

<span data-ttu-id="cc264-108">Wie in der Übersicht über das [Einfügen, aktualisieren und Löschen von Daten](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) beschrieben, beinhalten die websteuer Elemente GridView, DetailsView und FormView jeweils integrierte Daten Änderungs Funktionen.</span><span class="sxs-lookup"><span data-stu-id="cc264-108">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, the GridView, DetailsView, and FormView Web controls each include built-in data modification capabilities.</span></span> <span data-ttu-id="cc264-109">Bei Verwendung mit deklarativen Datenquellen-Steuerelementen können diese drei websteuer Elemente schnell und einfach zum Ändern von Daten und in Szenarios konfiguriert werden, ohne dass eine einzige Codezeile geschrieben werden muss.</span><span class="sxs-lookup"><span data-stu-id="cc264-109">When used with declarative data source controls, these three Web controls can be quickly and easily configured to modify data - and in scenarios without needing to write a single line of code.</span></span> <span data-ttu-id="cc264-110">Leider bieten nur die Steuerelemente DetailsView und FormView integrierte Funktionen zum Einfügen, bearbeiten und löschen.</span><span class="sxs-lookup"><span data-stu-id="cc264-110">Unfortunately, only the DetailsView and FormView controls provide built-in inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="cc264-111">Die GridView bietet nur Unterstützung für die Bearbeitung und Löschung.</span><span class="sxs-lookup"><span data-stu-id="cc264-111">The GridView only offers editing and deleting support.</span></span> <span data-ttu-id="cc264-112">Mit einem kleinen bogenfeckpunkt können wir jedoch die GridView erweitern, um eine einfügende Schnittstelle einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="cc264-112">However, with a little elbow grease, we can augment the GridView to include an inserting interface.</span></span>

<span data-ttu-id="cc264-113">Beim Hinzufügen von Einfügungs Funktionen zur GridView sind wir dafür verantwortlich, zu entscheiden, wie neue Datensätze hinzugefügt werden, die einfügeschnittstelle erstellt und der Code zum Einfügen des neuen Datensatzes geschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-113">In adding inserting capabilities to the GridView, we are responsible for deciding on how new records will be added, creating the inserting interface, and writing the code to insert the new record.</span></span> <span data-ttu-id="cc264-114">In diesem Tutorial erfahren Sie, wie Sie die einfügeschnittstelle zur GridView-Footerzeile hinzufügen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="cc264-114">In this tutorial we will look at adding the inserting interface to the GridView s footer row (see Figure 1).</span></span> <span data-ttu-id="cc264-115">Die footerzelle für jede Spalte enthält das entsprechende Benutzeroberflächen Element für die Datensammlung (ein Textfeld für den Produktnamen, eine Dropdown Liste für den Lieferanten usw.).</span><span class="sxs-lookup"><span data-stu-id="cc264-115">The footer cell for each column includes the appropriate data collection user interface element (a TextBox for the product s name, a DropDownList for the supplier, and so on).</span></span> <span data-ttu-id="cc264-116">Wir benötigen auch eine Spalte für die Schaltfläche "hinzufügen", die beim Klicken ein Postback verursacht und einen neuen Datensatz in die `Products` Tabelle einfügt, wobei die in der Footerzeile angegebenen Werte verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-116">We also need a column for an Add button that, when clicked, will cause a postback and insert a new record into the `Products` table using the values supplied in the footer row.</span></span>

<span data-ttu-id="cc264-117">[![der Footerzeile stellt eine Schnittstelle zum Hinzufügen neuer Produkte bereit.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-117">[![The Footer Row Provides an Interface for Adding New Products](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.png)</span></span>

<span data-ttu-id="cc264-118">**Abbildung 1**: die Footerzeile stellt eine Schnittstelle zum Hinzufügen neuer Produkte bereit ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-118">**Figure 1**: The Footer Row Provides an Interface for Adding New Products ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.png))</span></span>

## <a name="step-1-displaying-product-information-in-a-gridview"></a><span data-ttu-id="cc264-119">Schritt 1: Anzeigen von Produktinformationen in einer GridView</span><span class="sxs-lookup"><span data-stu-id="cc264-119">Step 1: Displaying Product Information in a GridView</span></span>

<span data-ttu-id="cc264-120">Bevor wir uns mit dem Erstellen der einfügeschnittstelle in der Fußzeile von GridView befassen, konzentrieren wir uns zunächst auf das Hinzufügen einer GridView-Ansicht auf der Seite, auf der die Produkte in der Datenbank aufgelistet sind.</span><span class="sxs-lookup"><span data-stu-id="cc264-120">Before we concern ourselves with creating the inserting interface in the GridView s footer, let s first focus on adding a GridView to the page that lists the products in the database.</span></span> <span data-ttu-id="cc264-121">Öffnen Sie zunächst die Seite `InsertThroughFooter.aspx` im Ordner `EnhancedGridView`, und ziehen Sie eine GridView aus der Toolbox auf den Designer. Legen Sie die Eigenschaft GridView s `ID` auf `Products`fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-121">Start by opening the `InsertThroughFooter.aspx` page in the `EnhancedGridView` folder and drag a GridView from the Toolbox onto the Designer, setting the GridView s `ID` property to `Products`.</span></span> <span data-ttu-id="cc264-122">Verwenden Sie als nächstes das Smarttag GridView s, um es an eine neue ObjectDataSource namens `ProductsDataSource`zu binden.</span><span class="sxs-lookup"><span data-stu-id="cc264-122">Next, use the GridView s smart tag to bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span>

<span data-ttu-id="cc264-123">[![erstellen Sie eine neue ObjectDataSource namens productdatasource.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-123">[![Create a New ObjectDataSource Named ProductsDataSource](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.png)</span></span>

<span data-ttu-id="cc264-124">**Abbildung 2**: Erstellen einer neuen ObjectDataSource mit dem Namen "`ProductsDataSource`" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-124">**Figure 2**: Create a New ObjectDataSource Named `ProductsDataSource` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.png))</span></span>

<span data-ttu-id="cc264-125">Konfigurieren Sie ObjectDataSource so, dass die `ProductsBLL` Class s `GetProducts()`-Methode verwendet wird, um Produktinformationen abzurufen.</span><span class="sxs-lookup"><span data-stu-id="cc264-125">Configure the ObjectDataSource to use the `ProductsBLL` class s `GetProducts()` method to retrieve product information.</span></span> <span data-ttu-id="cc264-126">Konzentrieren Sie sich in diesem Tutorial ausschließlich auf das Hinzufügen von Funktionen, und machen Sie sich keine Gedanken über das Bearbeiten und löschen.</span><span class="sxs-lookup"><span data-stu-id="cc264-126">For this tutorial, let s focus strictly on adding inserting capabilities and not worry about editing and deleting.</span></span> <span data-ttu-id="cc264-127">Stellen Sie daher sicher, dass die Dropdown Liste auf der Registerkarte Einfügen auf `AddProduct()` festgelegt ist und dass die Dropdown Listen auf den Registerkarten aktualisieren und löschen auf (keine) festgelegt sind.</span><span class="sxs-lookup"><span data-stu-id="cc264-127">Therefore, make sure that the drop-down list in the INSERT tab is set to `AddProduct()` and that the drop-down lists in the UPDATE and DELETE tabs are set to (None) .</span></span>

<span data-ttu-id="cc264-128">[![ordnen Sie die addProduct-Methode der ObjectDataSource s Insert ()-Methode zu.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-128">[![Map the AddProduct Method to the ObjectDataSource s Insert() Method](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.png)</span></span>

<span data-ttu-id="cc264-129">**Abbildung 3**: Zuordnen der `AddProduct` Methode zur ObjectDataSource s `Insert()`-Methode ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-129">**Figure 3**: Map the `AddProduct` Method to the ObjectDataSource s `Insert()` Method ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.png))</span></span>

<span data-ttu-id="cc264-130">[![die Dropdown Listen Update und DELETE Registerkarten auf (keine) festgelegt.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-130">[![Set the UPDATE and DELETE Tabs Drop-Down Lists to (None)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.png)</span></span>

<span data-ttu-id="cc264-131">**Abbildung 4**: Festlegen der Dropdown Listen für das Aktualisieren und Löschen von Registerkarten auf (keine) ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-131">**Figure 4**: Set the UPDATE and DELETE Tabs Drop-Down Lists to (None) ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.png))</span></span>

<span data-ttu-id="cc264-132">Nachdem der Assistent zum Konfigurieren der Datenquelle für ObjectDataSource s abgeschlossen ist, fügt Visual Studio der GridView automatisch Felder für jedes der entsprechenden Datenfelder hinzu.</span><span class="sxs-lookup"><span data-stu-id="cc264-132">After completing the ObjectDataSource s Configure Data Source wizard, Visual Studio will automatically add fields to the GridView for each of the corresponding data fields.</span></span> <span data-ttu-id="cc264-133">Belassen Sie vorerst alle Felder, die von Visual Studio hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-133">For now, leave all of the fields added by Visual Studio.</span></span> <span data-ttu-id="cc264-134">Später in diesem Tutorial werden einige der Felder entfernt, deren Werte beim Hinzufügen eines neuen Datensatzes nicht angegeben werden müssen.</span><span class="sxs-lookup"><span data-stu-id="cc264-134">Later in this tutorial we'll come back and remove some of the fields whose values don t need to be specified when adding a new record.</span></span>

<span data-ttu-id="cc264-135">Da es in der Datenbank fast 80 Produkte gibt, muss ein Benutzer bis zum Ende der Webseite einen Bildlauf nach unten durchführen, um einen neuen Datensatz hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="cc264-135">Since there are close to 80 products in the database, a user will have to scroll all the way down to the bottom of the web page in order to add a new record.</span></span> <span data-ttu-id="cc264-136">Aktivieren Sie daher das Paging, um die einfügeschnittstelle besser sichtbar und zugänglich zu machen.</span><span class="sxs-lookup"><span data-stu-id="cc264-136">Therefore, let s enable paging to make the inserting interface more visible and accessible.</span></span> <span data-ttu-id="cc264-137">Um das Paging zu aktivieren, aktivieren Sie einfach das Kontrollkästchen Paging aktivieren aus dem GridView s-Smarttag.</span><span class="sxs-lookup"><span data-stu-id="cc264-137">To turn on paging, simply check the Enable Paging checkbox from the GridView s smart tag.</span></span>

<span data-ttu-id="cc264-138">An diesem Punkt sollten das deklarative Markup von GridView und ObjectDataSource in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="cc264-138">At this point, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample1.aspx)]

<span data-ttu-id="cc264-139">[![alle Product Data-Felder in einer auslagerbare GridView angezeigt werden.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-139">[![All Product Data Fields are Displayed in a Paged GridView](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.png)</span></span>

<span data-ttu-id="cc264-140">**Abbildung 5**: alle Product Data-Felder werden in einer auslagerbare GridView angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-140">**Figure 5**: All Product Data Fields are Displayed in a Paged GridView ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.png))</span></span>

## <a name="step-2-adding-a-footer-row"></a><span data-ttu-id="cc264-141">Schritt 2: Hinzufügen einer Footerzeile</span><span class="sxs-lookup"><span data-stu-id="cc264-141">Step 2: Adding a Footer Row</span></span>

<span data-ttu-id="cc264-142">Zusammen mit der Kopfzeile und den Daten Zeilen enthält die GridView eine Footerzeile.</span><span class="sxs-lookup"><span data-stu-id="cc264-142">Along with its header and data rows, the GridView includes a footer row.</span></span> <span data-ttu-id="cc264-143">Die Kopf-und footerzeilen werden in Abhängigkeit von den Werten der Eigenschaften GridView s [`ShowHeader`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.showheader.aspx) und [`ShowFooter`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.showfooter.aspx) angezeigt.</span><span class="sxs-lookup"><span data-stu-id="cc264-143">The header and footer rows are displayed depending on the values of the GridView s [`ShowHeader`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.showheader.aspx) and [`ShowFooter`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.showfooter.aspx) properties.</span></span> <span data-ttu-id="cc264-144">Um die Fußzeile anzuzeigen, legen Sie einfach die `ShowFooter`-Eigenschaft auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-144">To show the footer row, simply set the `ShowFooter` property to `true`.</span></span> <span data-ttu-id="cc264-145">Wie in Abbildung 6 veranschaulicht, wird durch das Festlegen der `ShowFooter`-Eigenschaft auf `true` dem Raster eine Fußzeile hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="cc264-145">As Figure 6 illustrates, setting the `ShowFooter` property to `true` adds a footer row to the grid.</span></span>

<span data-ttu-id="cc264-146">[![, um die Fußzeile anzuzeigen, legen Sie ShowFooter auf true fest.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-146">[![To Display the Footer Row, Set ShowFooter to True](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.png)</span></span>

<span data-ttu-id="cc264-147">**Abbildung 6**: um die Fußzeile anzuzeigen, legen Sie `ShowFooter` auf `True` fest ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.png)).</span><span class="sxs-lookup"><span data-stu-id="cc264-147">**Figure 6**: To Display the Footer Row, Set `ShowFooter` to `True` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.png))</span></span>

<span data-ttu-id="cc264-148">Beachten Sie, dass die Footerzeile eine dunkelrote Hintergrundfarbe aufweist.</span><span class="sxs-lookup"><span data-stu-id="cc264-148">Note that the footer row has a dark red background color.</span></span> <span data-ttu-id="cc264-149">Der Grund hierfür ist das datawebcontrols-Design, das wir erstellt und auf alle Seiten im Tutorial [Anzeigen von Daten mit dem ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) -Tutorial angewendet haben.</span><span class="sxs-lookup"><span data-stu-id="cc264-149">This is due to the DataWebControls Theme we created and applied to all pages back in the [Displaying Data With the ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) tutorial.</span></span> <span data-ttu-id="cc264-150">Insbesondere die `GridView.skin` Datei konfiguriert die `FooterStyle`-Eigenschaft, die die `FooterStyle` CSS-Klasse verwendet.</span><span class="sxs-lookup"><span data-stu-id="cc264-150">Specifically, the `GridView.skin` file configures the `FooterStyle` property such that is uses the `FooterStyle` CSS class.</span></span> <span data-ttu-id="cc264-151">Die `FooterStyle`-Klasse wird wie folgt in `Styles.css` definiert:</span><span class="sxs-lookup"><span data-stu-id="cc264-151">The `FooterStyle` class is defined in `Styles.css` as follows:</span></span>

[!code-css[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample2.css)]

> [!NOTE]
> <span data-ttu-id="cc264-152">Wir haben mit der GridView-Footerzeile in vorherigen Tutorials untersucht.</span><span class="sxs-lookup"><span data-stu-id="cc264-152">We ve explored using the GridView s footer row in previous tutorials.</span></span> <span data-ttu-id="cc264-153">Wenn erforderlich, lesen Sie die [Informationen zur Anzeige von Zusammenfassungs Informationen im Lernprogramm von GridView im Footer-](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="cc264-153">If needed, refer back to the [Displaying Summary Information in the GridView's Footer](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) tutorial for a refresher.</span></span>

<span data-ttu-id="cc264-154">Nachdem Sie die `ShowFooter`-Eigenschaft auf `true`festgelegt haben, nehmen Sie sich einen Moment Zeit, um die Ausgabe in einem Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="cc264-154">After setting the `ShowFooter` property to `true`, take a moment to view the output in a browser.</span></span> <span data-ttu-id="cc264-155">Die Footerzeile enthält derzeit keine Text-oder websteuer Elemente.</span><span class="sxs-lookup"><span data-stu-id="cc264-155">Currently the footer row doesn t contain any text or Web controls.</span></span> <span data-ttu-id="cc264-156">In Schritt 3 ändern wir die Fußzeile für die einzelnen GridView-Felder, sodass Sie die entsprechende einfügeschnittstelle enthalten.</span><span class="sxs-lookup"><span data-stu-id="cc264-156">In Step 3 we'll modify the footer for each GridView field so that it includes the appropriate inserting interface.</span></span>

<span data-ttu-id="cc264-157">[![die leere Footerzeile oberhalb der Paging-Schnittstellen Steuerelemente angezeigt wird.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-157">[![The Empty Footer Row is Displayed Above the Paging Interface Controls](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image13.png)</span></span>

<span data-ttu-id="cc264-158">**Abbildung 7**: die leere Footerzeile wird oberhalb der Paging-Schnittstellen Steuerelemente angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-158">**Figure 7**: The Empty Footer Row is Displayed Above the Paging Interface Controls ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image14.png))</span></span>

## <a name="step-3-customizing-the-footer-row"></a><span data-ttu-id="cc264-159">Schritt 3: Anpassen der Footerzeile</span><span class="sxs-lookup"><span data-stu-id="cc264-159">Step 3: Customizing the Footer Row</span></span>

<span data-ttu-id="cc264-160">Wieder im Tutorial [Verwenden von templatefields im GridView-Steuer](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) Element wurde erläutert, wie die Anzeige einer bestimmten GridView-Spalte mithilfe von templatefields (im Gegensatz zu boundfields oder checkboxfields) erheblich angepasst wird. beim [Anpassen der Daten Änderungs Schnittstelle](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) haben wir uns mit der Verwendung von templatefields zum Anpassen der Bearbeitungs Schnittstelle in einer GridView beschäftigt.</span><span class="sxs-lookup"><span data-stu-id="cc264-160">Back in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial we saw how to greatly customize the display of a particular GridView column using TemplateFields (as opposed to BoundFields or CheckBoxFields); in [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) we looked at using TemplateFields to customize the editing interface in a GridView.</span></span> <span data-ttu-id="cc264-161">Denken Sie daran, dass ein TemplateField aus einer Reihe von Vorlagen besteht, die die Mischung aus Markup, websteuer Elementen und Datenbindung-Syntax definieren, die für bestimmte Arten von Zeilen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-161">Recall that a TemplateField is composed of a number of templates that defines the mix of markup, Web controls, and databinding syntax used for certain types of rows.</span></span> <span data-ttu-id="cc264-162">Der `ItemTemplate`gibt z. b. die Vorlage an, die für schreibgeschützte Zeilen verwendet wird, während der `EditItemTemplate` die Vorlage für die bearbeitbare Zeile definiert.</span><span class="sxs-lookup"><span data-stu-id="cc264-162">The `ItemTemplate`, for example, specifies the template used for read-only rows, while the `EditItemTemplate` defines the template for the editable row.</span></span>

<span data-ttu-id="cc264-163">Zusammen mit dem `ItemTemplate` und `EditItemTemplate`enthält das TemplateField auch eine `FooterTemplate`, die den Inhalt für die Footerzeile angibt.</span><span class="sxs-lookup"><span data-stu-id="cc264-163">Along with the `ItemTemplate` and `EditItemTemplate`, the TemplateField also includes a `FooterTemplate` that specifies the content for the footer row.</span></span> <span data-ttu-id="cc264-164">Aus diesem Grund können wir die websteuer Elemente hinzufügen, die für jede field s-`FooterTemplate`einfügeschnittstelle erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="cc264-164">Therefore, we can add the Web controls needed for each field s inserting interface into the `FooterTemplate`.</span></span> <span data-ttu-id="cc264-165">Konvertieren Sie zunächst alle Felder in der GridView in templatefields.</span><span class="sxs-lookup"><span data-stu-id="cc264-165">To start, convert all of the fields in the GridView to TemplateFields.</span></span> <span data-ttu-id="cc264-166">Klicken Sie hierzu in der GridView-Smarttags auf den Link Spalten bearbeiten, wählen Sie in der unteren linken Ecke jedes Feld aus, und klicken Sie auf das Feld dieses Feld in einen TemplateField-Link konvertieren.</span><span class="sxs-lookup"><span data-stu-id="cc264-166">This can be done by clicking the Edit Columns link in the GridView s smart tag, selecting each field in the lower left corner, and clicking the Convert this field into a TemplateField link.</span></span>

![Jedes Feld in ein TemplateField-Element konvertieren](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.gif)

<span data-ttu-id="cc264-168">**Abbildung 8**: konvertieren jedes Felds in ein TemplateField-Element</span><span class="sxs-lookup"><span data-stu-id="cc264-168">**Figure 8**: Convert Each Field Into a TemplateField</span></span>

<span data-ttu-id="cc264-169">Wenn Sie auf das Feld dieses Feld in ein TemplateField konvertieren klicken, wird der aktuelle Feldtyp in ein entsprechendes TemplateField-Element umgewandelt.</span><span class="sxs-lookup"><span data-stu-id="cc264-169">Clicking the Convert this field into a TemplateField turns the current field type into an equivalent TemplateField.</span></span> <span data-ttu-id="cc264-170">Beispielsweise wird jedes BoundField durch ein TemplateField-Element mit einem `ItemTemplate` ersetzt, das eine Bezeichnung enthält, die das entsprechende Datenfeld anzeigt, und eine `EditItemTemplate`, die das Datenfeld in einem Textfeld anzeigt.</span><span class="sxs-lookup"><span data-stu-id="cc264-170">For example, each BoundField is replaced by a TemplateField with an `ItemTemplate` that contains a Label that displays the corresponding data field and an `EditItemTemplate` that displays the data field in a TextBox.</span></span> <span data-ttu-id="cc264-171">Das `ProductName` BoundField wurde in das folgende TemplateField-Markup konvertiert:</span><span class="sxs-lookup"><span data-stu-id="cc264-171">The `ProductName` BoundField has been converted into the following TemplateField markup:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample3.aspx)]

<span data-ttu-id="cc264-172">Entsprechend wurde das `Discontinued` CheckBoxField in ein TemplateField konvertiert, dessen `ItemTemplate` und `EditItemTemplate` ein CheckBox-websteuer Element enthalten (bei deaktiviertem Kontrollkästchen `ItemTemplate` s).</span><span class="sxs-lookup"><span data-stu-id="cc264-172">Likewise, the `Discontinued` CheckBoxField has been converted into a TemplateField whose `ItemTemplate` and `EditItemTemplate` contain a CheckBox Web control (with the `ItemTemplate` s CheckBox disabled).</span></span> <span data-ttu-id="cc264-173">Das schreibgeschützte `ProductID` BoundField wurde in ein TemplateField-Steuerelement mit einem Label-Steuerelement sowohl in der `ItemTemplate` als auch in der `EditItemTemplate`konvertiert.</span><span class="sxs-lookup"><span data-stu-id="cc264-173">The read-only `ProductID` BoundField has been converted into a TemplateField with a Label control in both the `ItemTemplate` and `EditItemTemplate`.</span></span> <span data-ttu-id="cc264-174">Kurz gesagt: das Konvertieren eines vorhandenen GridView-Felds in ein TemplateField ist eine schnelle und einfache Möglichkeit, auf das anpassbare TemplateField-Element zu wechseln, ohne die vorhandenen Field s-Funktionen zu verlieren.</span><span class="sxs-lookup"><span data-stu-id="cc264-174">In short, converting an existing GridView field into a TemplateField is a quick and easy way to switch to the more customizable TemplateField without losing any of the existing field s functionality.</span></span>

<span data-ttu-id="cc264-175">Da die GridView, mit der wir arbeiten, das Bearbeiten nicht unterstützt, können Sie die `EditItemTemplate` aus jedem TemplateField entfernen, sodass nur die `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="cc264-175">Since the GridView we re working with doesn t support editing, feel free to remove the `EditItemTemplate` from each TemplateField, leaving just the `ItemTemplate`.</span></span> <span data-ttu-id="cc264-176">Danach sollte das deklarative Markup der GridView s wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="cc264-176">After doing this, your GridView s declarative markup should look like the following:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample4.aspx)]

<span data-ttu-id="cc264-177">Nun, da jedes GridView-Feld in ein TemplateField-Element konvertiert wurde, können wir die entsprechende einfügeschnittstelle in die einzelnen Feld-s-`FooterTemplate`eingeben.</span><span class="sxs-lookup"><span data-stu-id="cc264-177">Now that each GridView field has been converted into a TemplateField, we can enter the appropriate inserting interface into each field s `FooterTemplate`.</span></span> <span data-ttu-id="cc264-178">Einige der Felder haben keine einfügeschnittstelle (z. & #`ProductID`). andere unterscheiden sich in den websteuer Elementen, die zum Erfassen der neuen Produktinformationen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-178">Some of the fields will not have an inserting interface (`ProductID`, for instance); others will vary in the Web controls used to collect the new product s information.</span></span>

<span data-ttu-id="cc264-179">Um die Bearbeitungs Schnittstelle zu erstellen, wählen Sie den Link Vorlagen bearbeiten aus dem GridView s-Smarttag.</span><span class="sxs-lookup"><span data-stu-id="cc264-179">To create the editing interface, choose the Edit Templates link from the GridView s smart tag.</span></span> <span data-ttu-id="cc264-180">Wählen Sie dann in der Dropdown Liste das entsprechende Feld s `FooterTemplate` aus, und ziehen Sie das entsprechende Steuerelement aus der Toolbox auf den Designer.</span><span class="sxs-lookup"><span data-stu-id="cc264-180">Then, from the drop-down list, select the appropriate field s `FooterTemplate` and drag the appropriate control from the Toolbox onto the Designer.</span></span>

<span data-ttu-id="cc264-181">[![dem Feld "FooterTemplate" die entsprechende einfügeschnittstelle hinzufügen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-181">[![Add the Appropriate Inserting Interface to Each Field s FooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image15.png)</span></span>

<span data-ttu-id="cc264-182">**Abbildung 9**: Hinzufügen der entsprechenden einfügeschnittstelle zu jedem Feld s `FooterTemplate` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-182">**Figure 9**: Add the Appropriate Inserting Interface to Each Field s `FooterTemplate` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image16.png))</span></span>

<span data-ttu-id="cc264-183">In der folgenden Aufzählung werden die GridView-Felder aufgelistet, die die hinzu zufügende einfügeschnittstelle angeben:</span><span class="sxs-lookup"><span data-stu-id="cc264-183">The following bulleted list enumerates the GridView fields, specifying the inserting interface to add:</span></span>

- <span data-ttu-id="cc264-184">`ProductID` keine.</span><span class="sxs-lookup"><span data-stu-id="cc264-184">`ProductID` none.</span></span>
- <span data-ttu-id="cc264-185">`ProductName` fügen Sie ein Textfeld hinzu, und legen Sie dessen `ID` auf `NewProductName`fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-185">`ProductName` add a TextBox and set its `ID` to `NewProductName`.</span></span> <span data-ttu-id="cc264-186">Fügen Sie auch ein Steuerelement "Requirements dfieldvalidator" hinzu, um sicherzustellen, dass der Benutzer einen Wert für den neuen Produktnamen eingibt.</span><span class="sxs-lookup"><span data-stu-id="cc264-186">Add a RequiredFieldValidator control as well to ensure that the user enters a value for the new product s name.</span></span>
- <span data-ttu-id="cc264-187">`SupplierID` keine.</span><span class="sxs-lookup"><span data-stu-id="cc264-187">`SupplierID` none.</span></span>
- <span data-ttu-id="cc264-188">`CategoryID` keine.</span><span class="sxs-lookup"><span data-stu-id="cc264-188">`CategoryID` none.</span></span>
- <span data-ttu-id="cc264-189">`QuantityPerUnit` fügen Sie ein Textfeld hinzu, und legen Sie dessen `ID` auf `NewQuantityPerUnit`fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-189">`QuantityPerUnit` add a TextBox, setting its `ID` to `NewQuantityPerUnit`.</span></span>
- <span data-ttu-id="cc264-190">`UnitPrice` Hinzufügen eines Textfelds mit dem Namen `NewUnitPrice` und einem CompareValidator, das sicherstellt, dass der eingegebene Wert ein Währungswert größer oder gleich 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-190">`UnitPrice` add a TextBox named `NewUnitPrice` and a CompareValidator that ensures the value entered is a currency value greater than or equal to zero.</span></span>
- <span data-ttu-id="cc264-191">`UnitsInStock` ein Textfeld verwenden, dessen `ID` auf `NewUnitsInStock`festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-191">`UnitsInStock` use a TextBox whose `ID` is set to `NewUnitsInStock`.</span></span> <span data-ttu-id="cc264-192">Fügen Sie ein CompareValidator ein, das sicherstellt, dass der eingegebene Wert ein ganzzahliger Wert größer oder gleich 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-192">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="cc264-193">`UnitsOnOrder` ein Textfeld verwenden, dessen `ID` auf `NewUnitsOnOrder`festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-193">`UnitsOnOrder` use a TextBox whose `ID` is set to `NewUnitsOnOrder`.</span></span> <span data-ttu-id="cc264-194">Fügen Sie ein CompareValidator ein, das sicherstellt, dass der eingegebene Wert ein ganzzahliger Wert größer oder gleich 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-194">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="cc264-195">`ReorderLevel` ein Textfeld verwenden, dessen `ID` auf `NewReorderLevel`festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-195">`ReorderLevel` use a TextBox whose `ID` is set to `NewReorderLevel`.</span></span> <span data-ttu-id="cc264-196">Fügen Sie ein CompareValidator ein, das sicherstellt, dass der eingegebene Wert ein ganzzahliger Wert größer oder gleich 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-196">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="cc264-197">`Discontinued` fügen Sie ein Kontrollkästchen hinzu, indem Sie dessen `ID` auf `NewDiscontinued`festlegen.</span><span class="sxs-lookup"><span data-stu-id="cc264-197">`Discontinued` add a CheckBox, setting its `ID` to `NewDiscontinued`.</span></span>
- <span data-ttu-id="cc264-198">`CategoryName` eine Dropdown List hinzufügen und deren `ID` auf `NewCategoryID`festlegen.</span><span class="sxs-lookup"><span data-stu-id="cc264-198">`CategoryName` add a DropDownList and set its `ID` to `NewCategoryID`.</span></span> <span data-ttu-id="cc264-199">Binden Sie es an eine neue ObjectDataSource mit dem Namen `CategoriesDataSource`, und konfigurieren Sie Sie so, dass Sie die `CategoriesBLL` Class s `GetCategories()`-Methode verwendet.</span><span class="sxs-lookup"><span data-stu-id="cc264-199">Bind it to a new ObjectDataSource named `CategoriesDataSource` and configure it to use the `CategoriesBLL` class s `GetCategories()` method.</span></span> <span data-ttu-id="cc264-200">Lassen Sie die Dropdown List s `ListItem` s das `CategoryName` Datenfeld anzeigen, indem Sie das `CategoryID` Datenfeld als Werte verwenden.</span><span class="sxs-lookup"><span data-stu-id="cc264-200">Have the DropDownList s `ListItem` s display the `CategoryName` data field, using the `CategoryID` data field as their values.</span></span>
- <span data-ttu-id="cc264-201">`SupplierName` eine Dropdown List hinzufügen und deren `ID` auf `NewSupplierID`festlegen.</span><span class="sxs-lookup"><span data-stu-id="cc264-201">`SupplierName` add a DropDownList and set its `ID` to `NewSupplierID`.</span></span> <span data-ttu-id="cc264-202">Binden Sie es an eine neue ObjectDataSource mit dem Namen `SuppliersDataSource`, und konfigurieren Sie Sie so, dass Sie die `SuppliersBLL` Class s `GetSuppliers()`-Methode verwendet.</span><span class="sxs-lookup"><span data-stu-id="cc264-202">Bind it to a new ObjectDataSource named `SuppliersDataSource` and configure it to use the `SuppliersBLL` class s `GetSuppliers()` method.</span></span> <span data-ttu-id="cc264-203">Lassen Sie die Dropdown List s `ListItem` s das `CompanyName` Datenfeld anzeigen, indem Sie das `SupplierID` Datenfeld als Werte verwenden.</span><span class="sxs-lookup"><span data-stu-id="cc264-203">Have the DropDownList s `ListItem` s display the `CompanyName` data field, using the `SupplierID` data field as their values.</span></span>

<span data-ttu-id="cc264-204">Deaktivieren Sie für jedes Validierungs Steuerelement die `ForeColor`-Eigenschaft, sodass die weiß Vordergrundfarbe der `FooterStyle` CSS-Klasse anstelle der standardmäßigen roten verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-204">For each of the validation controls, clear out the `ForeColor` property so that the `FooterStyle` CSS class s white foreground color will be used in place of the default red.</span></span> <span data-ttu-id="cc264-205">Verwenden Sie außerdem die `ErrorMessage`-Eigenschaft für eine ausführliche Beschreibung, legen Sie die `Text`-Eigenschaft jedoch auf ein Sternchen fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-205">Also use the `ErrorMessage` property for a detailed description, but set the `Text` property to an asterisk.</span></span> <span data-ttu-id="cc264-206">Um zu verhindern, dass der Text der Validierungs Steuerung den Text der Einfügungs Schnittstelle in zwei Zeilen umschließt, legen Sie die `FooterStyle` s `Wrap`-Eigenschaft für jede der `FooterTemplate` en, die ein Validierungs Steuerelement verwenden, auf false fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-206">To prevent the validation control s text from causing the inserting interface to wrap to two lines, set the `FooterStyle` s `Wrap` property to false for each of the `FooterTemplate` s that use a validation control.</span></span> <span data-ttu-id="cc264-207">Fügen Sie abschließend ein ValidationSummary-Steuerelement unterhalb von GridView hinzu, und legen Sie dessen `ShowMessageBox`-Eigenschaft auf `true` und dessen `ShowSummary`-Eigenschaft auf `false`fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-207">Finally, add a ValidationSummary control beneath the GridView and set its `ShowMessageBox` property to `true` and its `ShowSummary` property to `false`.</span></span>

<span data-ttu-id="cc264-208">Beim Hinzufügen eines neuen Produkts müssen wir die `CategoryID` und `SupplierID`bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="cc264-208">When adding a new product, we need to provide the `CategoryID` and `SupplierID`.</span></span> <span data-ttu-id="cc264-209">Diese Informationen werden über die Dropdown Listen in den Fußzeile-Zellen der Felder `CategoryName` und `SupplierName` aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="cc264-209">This information is captured through the DropDownLists in the footer cells for the `CategoryName` and `SupplierName` fields.</span></span> <span data-ttu-id="cc264-210">Ich habe mich entschieden, diese Felder im Gegensatz zum `CategoryID` und `SupplierID` templatefields zu verwenden, da der Benutzer in den Daten Zeilen des Datenblatts wahrscheinlich eher die Kategorie-und Lieferanten Namen als die ID-Werte anzeigen möchte.</span><span class="sxs-lookup"><span data-stu-id="cc264-210">I chose to use these fields as opposed to the `CategoryID` and `SupplierID` TemplateFields because in the grid s data rows the user is likely more interested in seeing the category and supplier names rather than their ID values.</span></span> <span data-ttu-id="cc264-211">Da die Werte für "`CategoryID`" und "`SupplierID`" nun in der `CategoryName` aufgezeichnet werden, und `SupplierName` Field s-Schnittstellen einfügen, können wir die `CategoryID` und `SupplierID` templatefields aus der GridView entfernen.</span><span class="sxs-lookup"><span data-stu-id="cc264-211">Since the `CategoryID` and `SupplierID` values are now being captured in the `CategoryName` and `SupplierName` field s inserting interfaces, we can remove the `CategoryID` and `SupplierID` TemplateFields from the GridView.</span></span>

<span data-ttu-id="cc264-212">Ebenso wird der `ProductID` nicht verwendet, wenn ein neues Produkt hinzugefügt wird, sodass die `ProductID` TemplateField ebenfalls entfernt werden kann.</span><span class="sxs-lookup"><span data-stu-id="cc264-212">Similarly, the `ProductID` is not used when adding a new product, so the `ProductID` TemplateField can be removed as well.</span></span> <span data-ttu-id="cc264-213">Lassen Sie jedoch das `ProductID` Feld im Raster.</span><span class="sxs-lookup"><span data-stu-id="cc264-213">However, let s leave the `ProductID` field in the grid.</span></span> <span data-ttu-id="cc264-214">Zusätzlich zu den Textfeldern, Dropdown Listen, Kontrollkästchen und Validierungs Steuerelementen, die die einfügeschnittstelle bilden, benötigen wir auch eine Schaltfläche "hinzufügen", die beim Klicken auf die Logik zum Hinzufügen des neuen Produkts zur Datenbank führt.</span><span class="sxs-lookup"><span data-stu-id="cc264-214">In addition to the TextBoxes, DropDownLists, CheckBoxes, and validation controls that make up the inserting interface, we'll also need an Add button that, when clicked, performs the logic to add the new product to the database.</span></span> <span data-ttu-id="cc264-215">In Schritt 4 fügen wir eine Schaltfläche "hinzufügen" in die einfügeschnittstelle in der `ProductID` TemplateField s-`FooterTemplate`ein.</span><span class="sxs-lookup"><span data-stu-id="cc264-215">In Step 4 we'll include an Add button in the inserting interface in the `ProductID` TemplateField s `FooterTemplate`.</span></span>

<span data-ttu-id="cc264-216">Sie können die Darstellung der verschiedenen GridView-Felder verbessern.</span><span class="sxs-lookup"><span data-stu-id="cc264-216">Feel free to improve the appearance of the various GridView fields.</span></span> <span data-ttu-id="cc264-217">Beispielsweise können Sie die `UnitPrice` Werte als Währung formatieren, die `UnitsInStock`-, `UnitsOnOrder`-und `ReorderLevel` Felder rechtsbündig ausrichten und die `HeaderText` Werte für templatefields aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="cc264-217">For example, you might want to format the `UnitPrice` values as a currency, right-align the `UnitsInStock`, `UnitsOnOrder`, and `ReorderLevel` fields, and update the `HeaderText` values for the TemplateFields.</span></span>

<span data-ttu-id="cc264-218">Nachdem Sie die gekoppelten Schnittstellen in den `FooterTemplate` en eingefügt, die `SupplierID`und die `CategoryID` templatefields entfernt und die Ästhetik des Rasters durch formatieren und Ausrichten von templatefields verbessert haben, sollte Ihr deklaratives Markup der GridView s in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="cc264-218">After creating the slew of inserting interfaces in the `FooterTemplate` s, removing the `SupplierID`, and `CategoryID` TemplateFields, and improving the aesthetics of the grid through formatting and aligning the TemplateFields, your GridView s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample5.aspx)]

<span data-ttu-id="cc264-219">Wenn die GridView-Footerzeile in einem Browser angezeigt wird, enthält Sie nun die abgeschlossene einfügeschnittstelle (siehe Abbildung 10).</span><span class="sxs-lookup"><span data-stu-id="cc264-219">When viewed through a browser, the GridView s footer row now includes the completed inserting interface (see Figure 10).</span></span> <span data-ttu-id="cc264-220">An diesem Punkt schließt die einfügende Schnittstelle keine Mittel für den Benutzer ein, um anzugeben, dass Sie die Daten für das neue Produkt eingegeben hat und einen neuen Datensatz in die Datenbank einfügen möchte.</span><span class="sxs-lookup"><span data-stu-id="cc264-220">At this point, the inserting interface doesn t include a means for the user to indicate that she s entered the data for the new product and wants to insert a new record into the database.</span></span> <span data-ttu-id="cc264-221">Außerdem wird erläutert, wie die in den Fußzeile eingegebenen Daten in einen neuen Datensatz in der `Products` Datenbank übersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-221">Also, we ve yet to address how the data entered into the footer will translate into a new record in the `Products` database.</span></span> <span data-ttu-id="cc264-222">In Schritt 4 sehen Sie, wie Sie eine Schaltfläche "hinzufügen" in die einfügeschnittstelle einschließen und Code beim Postback ausführen, wenn auf Sie geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-222">In Step 4 we'll look at how to include an Add button to the inserting interface and how to execute code on postback when it s clicked.</span></span> <span data-ttu-id="cc264-223">In Schritt 5 wird gezeigt, wie ein neuer Datensatz mit den Daten aus der Fußzeile eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-223">Step 5 shows how to insert a new record using the data from the footer.</span></span>

<span data-ttu-id="cc264-224">[![der GridView-Footer eine Schnittstelle zum Hinzufügen eines neuen Datensatzes bereitstellt.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-224">[![The GridView Footer Provides an Interface for Adding a New Record](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image17.png)</span></span>

<span data-ttu-id="cc264-225">**Abbildung 10**: der GridView-Footer stellt eine Schnittstelle zum Hinzufügen eines neuen Datensatzes bereit ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-225">**Figure 10**: The GridView Footer Provides an Interface for Adding a New Record ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image18.png))</span></span>

## <a name="step-4-including-an-add-button-in-the-inserting-interface"></a><span data-ttu-id="cc264-226">Schritt 4: einschließen der Schaltfläche "hinzufügen" in die einfügende</span><span class="sxs-lookup"><span data-stu-id="cc264-226">Step 4: Including an Add Button in the Inserting Interface</span></span>

<span data-ttu-id="cc264-227">Wir müssen eine Schaltfläche "hinzufügen" an eine beliebige Stelle in der einfügeschnittstelle einfügen, da die einfügende Schnittstelle der Fußzeile-Zeile für den Benutzer keine Möglichkeit hat, anzugeben, dass die Eingabe der neuen Produktinformationen abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="cc264-227">We need to include an Add button somewhere in the inserting interface since the footer row s inserting interface currently lacks the means for the user to indicate that they have completed entering the new product s information.</span></span> <span data-ttu-id="cc264-228">Diese kann in einer der vorhandenen `FooterTemplate` s platziert werden, oder wir könnten dem Raster für diesen Zweck eine neue Spalte hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="cc264-228">This could be placed in one of the existing `FooterTemplate` s or we could add a new column to the grid for this purpose.</span></span> <span data-ttu-id="cc264-229">Legen Sie in diesem Tutorial die Schaltfläche "hinzufügen" in die `ProductID` TemplateField s `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="cc264-229">For this tutorial, let s place the Add button in the `ProductID` TemplateField s `FooterTemplate`.</span></span>

<span data-ttu-id="cc264-230">Klicken Sie im Designer auf den Link Vorlagen bearbeiten im GridView s-Smarttag, und wählen Sie dann in der Dropdown Liste die `FooterTemplate` `ProductID` Felder aus.</span><span class="sxs-lookup"><span data-stu-id="cc264-230">From the Designer, click on the Edit Templates link in the GridView s smart tag and then choose the `ProductID` field s `FooterTemplate` from the drop-down list.</span></span> <span data-ttu-id="cc264-231">Fügen Sie der Vorlage ein Schaltflächen-websteuer Element (oder einen LinkButton oder ImageButton, falls gewünscht) hinzu, und legen Sie die zugehörige ID auf `AddProduct`, die einzufügende `CommandName` und deren `Text`-Eigenschaft hinzu, wie in Abbildung 11 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="cc264-231">Add a Button Web control (or a LinkButton or ImageButton, if you prefer) to the template, setting its ID to `AddProduct`, its `CommandName` to Insert, and its `Text` property to Add as shown in Figure 11.</span></span>

<span data-ttu-id="cc264-232">[![die Schaltfläche "hinzufügen" in der "ProductID TemplateField s FooterTemplate" platzieren.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-232">[![Place the Add Button in the ProductID TemplateField s FooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image19.png)</span></span>

<span data-ttu-id="cc264-233">**Abbildung 11**: Platzieren der Schaltfläche "hinzufügen" in der `ProductID` TemplateField s `FooterTemplate` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="cc264-233">**Figure 11**: Place the Add Button in the `ProductID` TemplateField s `FooterTemplate` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image20.png))</span></span>

<span data-ttu-id="cc264-234">Nachdem Sie die Schaltfläche Hinzufügen eingefügt haben, testen Sie die Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="cc264-234">Once you ve included the Add button, test out the page in a browser.</span></span> <span data-ttu-id="cc264-235">Beachten Sie, dass beim Klicken auf die Schaltfläche hinzufügen mit ungültigen Daten in der einfügenden Schnittstelle das Postback kurzgeschlossen wird und das ValidationSummary-Steuerelement die ungültigen Daten anzeigt (siehe Abbildung 12).</span><span class="sxs-lookup"><span data-stu-id="cc264-235">Note that when clicking the Add button with invalid data in the inserting interface, the postback is short circuited and the ValidationSummary control indicates the invalid data (see Figure 12).</span></span> <span data-ttu-id="cc264-236">Wenn Sie die entsprechenden Daten eingegeben haben, bewirkt das Klicken auf die Schaltfläche hinzufügen ein Postback</span><span class="sxs-lookup"><span data-stu-id="cc264-236">With appropriate data entered, clicking the Add button causes a postback.</span></span> <span data-ttu-id="cc264-237">Der Datenbank wird jedoch kein Datensatz hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="cc264-237">No record is added to the database, however.</span></span> <span data-ttu-id="cc264-238">Wir müssen etwas Code schreiben, um die Einfügung tatsächlich auszuführen.</span><span class="sxs-lookup"><span data-stu-id="cc264-238">We will need to write a bit of code to actually perform the insert.</span></span>

<span data-ttu-id="cc264-239">[![das Postback der Schaltfläche "Schaltfläche hinzufügen" kurzgeschlossen wird, wenn die einfügende Schnittstelle ungültige Daten enthält.](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="cc264-239">[![The Add Button s Postback is Short Circuited if There is Invalid Data in the Inserting Interface](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image21.png)</span></span>

<span data-ttu-id="cc264-240">**Abbildung 12**: das Postback der Schaltfläche "Schaltfläche hinzufügen" ist kurz, wenn in der einfügeschnittstelle ungültige Daten vorhanden sind ([Klicken Sie, um das Bild in voller Größe anzuzeigen](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image22.png)).</span><span class="sxs-lookup"><span data-stu-id="cc264-240">**Figure 12**: The Add Button s Postback is Short Circuited if There is Invalid Data in the Inserting Interface ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image22.png))</span></span>

> [!NOTE]
> <span data-ttu-id="cc264-241">Die Validierungs Steuerelemente in der einfügeschnittstelle wurden keiner Validierungs Gruppe zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="cc264-241">The validation controls in the inserting interface were not assigned to a validation group.</span></span> <span data-ttu-id="cc264-242">Dies funktioniert gut, solange die Einfügungs Schnittstelle der einzige Satz von Validierungs Steuerelementen auf der Seite ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-242">This works fine so long as the inserting interface is the only set of validation controls on the page.</span></span> <span data-ttu-id="cc264-243">Wenn es jedoch andere Validierungs Steuerelemente auf der Seite gibt (z. b. Validierungs Steuerelemente in der Bearbeitungs Schnittstelle des Raster s), sollten den Validierungs Steuerelementen in der einfügeschnittstelle und der Schaltfläche "Add Button s" `ValidationGroup`-Eigenschaften derselbe Wert zugewiesen werden, um diese Steuerelemente einer bestimmten Validierungs Gruppe zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="cc264-243">If, however, there are other validation controls on the page (such as validation controls in the grid s editing interface), the validation controls in the inserting interface and Add button s `ValidationGroup` properties should be assigned the same value so as to associate these controls with a particular validation group.</span></span> <span data-ttu-id="cc264-244">Weitere Informationen zum Partitionieren der Validierungs Steuerelemente und Schaltflächen auf einer Seite in Validierungs Gruppen finden Sie unter [Zerlegen der Validierungs Steuerelemente in ASP.NET 2,0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx) .</span><span class="sxs-lookup"><span data-stu-id="cc264-244">See [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx) for more information on partitioning the validation controls and buttons on a page into validation groups.</span></span>

## <a name="step-5-inserting-a-new-record-into-theproductstable"></a><span data-ttu-id="cc264-245">Schritt 5: Einfügen eines neuen Datensatzes in die`Products`Tabelle</span><span class="sxs-lookup"><span data-stu-id="cc264-245">Step 5: Inserting a New Record Into the`Products`Table</span></span>

<span data-ttu-id="cc264-246">Bei Verwendung der integrierten Bearbeitungsfunktionen von GridView verarbeitet das GridView-Steuerelemente automatisch alle notwendigen Arbeiten zum Ausführen des Updates.</span><span class="sxs-lookup"><span data-stu-id="cc264-246">When utilizing the built-in editing features of the GridView, the GridView automatically handles all of the work necessary for performing the update.</span></span> <span data-ttu-id="cc264-247">Wenn auf die Schaltfläche Aktualisieren geklickt wird, werden die von der Bearbeitungs Schnittstelle eingegebenen Werte in die Parameter in der `UpdateParameters` Auflistung von ObjectDataSource kopiert, und das Update wird durch Aufrufen der `Update()` Methode ObjectDataSource s gestartet.</span><span class="sxs-lookup"><span data-stu-id="cc264-247">In particular, when the Update button is clicked it copies the values entered from the editing interface to the parameters in the ObjectDataSource s `UpdateParameters` collection and kicks off the update by invoking the ObjectDataSource s `Update()` method.</span></span> <span data-ttu-id="cc264-248">Da die GridView nicht so integrierte Funktionen zum Einfügen bereitstellt, müssen wir Code implementieren, der die ObjectDataSource s-`Insert()`-Methode aufruft und die Werte aus der einfügeschnittstelle in die ObjectDataSource s-`InsertParameters` Auflistung kopiert.</span><span class="sxs-lookup"><span data-stu-id="cc264-248">Since the GridView does not provide such built-in functionality for inserting, we must implement code that calls the ObjectDataSource s `Insert()` method and copies the values from the inserting interface to the ObjectDataSource s `InsertParameters` collection.</span></span>

<span data-ttu-id="cc264-249">Diese Einfügungs Logik sollte ausgeführt werden, nachdem auf die Schaltfläche Hinzufügen geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="cc264-249">This insert logic should be executed after the Add button has been clicked.</span></span> <span data-ttu-id="cc264-250">Wie in den Schaltflächen [Hinzufügen und reagieren auf Schaltflächen in einem GridView-](../custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs.md) Tutorial erläutert wird, wird das Ereignis GridView s `RowCommand` Ereignis beim Postback ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="cc264-250">As discussed in the [Adding and Responding to Buttons in a GridView](../custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs.md) tutorial, anytime a Button, LinkButton, or ImageButton in a GridView is clicked, the GridView s `RowCommand` event fires on postback.</span></span> <span data-ttu-id="cc264-251">Dieses Ereignis wird ausgelöst, wenn die Schaltfläche "Schaltfläche", "LinkButton" oder "ImageButton" explizit hinzugefügt wurde, wie z. b. die Schaltfläche "hinzufügen" in der Footerzeile oder wenn Sie automatisch von der GridView hinzugefügt wurde (z. b. die Link Schaltflächen oben in jeder Spalte LinkButtons in der pagingschnittstelle, wenn Paging aktivieren ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-251">This event fires whether the Button, LinkButton, or ImageButton was added explicitly such as the Add button in the footer row or if it was automatically added by the GridView (such as the LinkButtons at the top of each column when Enable Sorting is selected, or the LinkButtons in the paging interface when Enable Paging is selected).</span></span>

<span data-ttu-id="cc264-252">Um dem Benutzer zu antworten, indem er auf die Schaltfläche hinzufügen klickt, muss daher ein Ereignishandler für das GridView s `RowCommand`-Ereignis erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-252">Therefore, to respond to the user clicking the Add button, we need to create an event handler for the GridView s `RowCommand` event.</span></span> <span data-ttu-id="cc264-253">Da dieses Ereignis ausgelöst wird, wenn in der GridView auf *eine beliebige* Schaltfläche, eine linktaste oder ein ImageButton geklickt wird, ist es wichtig, dass wir nur mit der Einfügungs Logik fortfahren, wenn die `CommandName`-Eigenschaft, die an den Ereignishandler weitergegeben wird, dem `CommandName` Wert der Schaltfläche hinzufügen (einfügen)</span><span class="sxs-lookup"><span data-stu-id="cc264-253">Since this event fires whenever *any* Button, LinkButton, or ImageButton in the GridView is clicked, it s vital that we only proceed with the inserting logic if the `CommandName` property passed into the event handler maps to the `CommandName` value of the Add button ( Insert ).</span></span> <span data-ttu-id="cc264-254">Außerdem sollten wir nur fortfahren, wenn die Validierungs Steuerelemente gültige Daten melden.</span><span class="sxs-lookup"><span data-stu-id="cc264-254">Moreover, we should also only proceed if the validation controls report valid data.</span></span> <span data-ttu-id="cc264-255">Um dies zu ermöglichen, erstellen Sie einen Ereignishandler für das `RowCommand`-Ereignis mit folgendem Code:</span><span class="sxs-lookup"><span data-stu-id="cc264-255">To accommodate this, create an event handler for the `RowCommand` event with the following code:</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample6.cs)]

> [!NOTE]
> <span data-ttu-id="cc264-256">Vielleicht Fragen Sie sich vielleicht, warum der Ereignishandler das Überprüfen der `Page.IsValid`-Eigenschaft stört.</span><span class="sxs-lookup"><span data-stu-id="cc264-256">You may be wondering why the event handler bothers checking the `Page.IsValid` property.</span></span> <span data-ttu-id="cc264-257">Schließlich wird das Postback nicht unterdrückt, wenn in der einfügeschnittstelle ungültige Daten bereitgestellt werden?</span><span class="sxs-lookup"><span data-stu-id="cc264-257">After all, won't the postback be suppressed if invalid data is provided in the inserting interface?</span></span> <span data-ttu-id="cc264-258">Diese Annahme ist korrekt, solange der Benutzer JavaScript nicht deaktiviert hat oder Schritte zur Umgehung der Client seitigen Validierungs Logik durchgeführt hat.</span><span class="sxs-lookup"><span data-stu-id="cc264-258">This assumption is correct as long as the user has not disabled JavaScript or has taken steps to circumvent the client-side validation logic.</span></span> <span data-ttu-id="cc264-259">Kurz gesagt, Sie sollten sich nie strikt auf die Client seitige Validierung verlassen. eine serverseitige Überprüfung der Gültigkeit sollte vor dem Arbeiten mit den Daten immer durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-259">In short, one should never rely strictly on client-side validation; a server-side check for validity should always be performed before working with the data.</span></span>

<span data-ttu-id="cc264-260">In Schritt 1 haben wir den `ProductsDataSource` ObjectDataSource so erstellt, dass seine `Insert()`-Methode der `AddProduct`-Methode der `ProductsBLL`-Klasse zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="cc264-260">In Step 1 we created the `ProductsDataSource` ObjectDataSource such that its `Insert()` method is mapped to the `ProductsBLL` class s `AddProduct` method.</span></span> <span data-ttu-id="cc264-261">Um den neuen Datensatz in die `Products` Tabelle einzufügen, können wir einfach die ObjectDataSource s-`Insert()` Methode aufrufen:</span><span class="sxs-lookup"><span data-stu-id="cc264-261">To insert the new record into the `Products` table, we can simply invoke the ObjectDataSource s `Insert()` method:</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample7.cs)]

<span data-ttu-id="cc264-262">Nachdem nun die `Insert()`-Methode aufgerufen wurde, besteht nur noch die Möglichkeit, die Werte aus der einfügeschnittstelle in die Parameter zu kopieren, die an die `AddProduct`-Methode der `ProductsBLL`-Klasse weitergegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="cc264-262">Now that the `Insert()` method has been invoked, all that remains is to copy the values from the inserting interface to the parameters passed to the `ProductsBLL` class s `AddProduct` method.</span></span> <span data-ttu-id="cc264-263">Wie Sie in der unter [suchung der Ereignisse im Zusammenhang mit dem Einfügen, aktualisieren und Löschen von](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) Lernprogrammen gesehen haben, können Sie dies über das Ereignis "ObjectDataSource s `Inserting`" erreichen.</span><span class="sxs-lookup"><span data-stu-id="cc264-263">As we saw back in the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, this can be accomplished through the ObjectDataSource s `Inserting` event.</span></span> <span data-ttu-id="cc264-264">Im `Inserting`-Ereignis müssen wir Programm gesteuert auf die Steuerelemente aus der `Products` GridView-Footerzeile verweisen und deren Werte der `e.InputParameters`-Auflistung zuweisen.</span><span class="sxs-lookup"><span data-stu-id="cc264-264">In the `Inserting` event we need to programmatically reference the controls from the `Products` GridView s footer row and assign their values to the `e.InputParameters` collection.</span></span> <span data-ttu-id="cc264-265">Wenn der Benutzer einen Wert auslässt, z. b. das Textfeld `ReorderLevel` leer lassen, müssen Sie angeben, dass der in die Datenbank eingefügte Wert `NULL`werden soll.</span><span class="sxs-lookup"><span data-stu-id="cc264-265">If the user omits a value such as leaving the `ReorderLevel` TextBox blank we need to specify that the value inserted into the database should be `NULL`.</span></span> <span data-ttu-id="cc264-266">Da die `AddProducts`-Methode Werte zulässt-Typen für Datenbankfelder zulässt, die NULL-Werte zulassen, verwenden Sie einfach einen Typ, der NULL-Werte zulässt, und legen Sie den Wert auf `null` fest, wenn Benutzereingaben ausgelassen werden</span><span class="sxs-lookup"><span data-stu-id="cc264-266">Since the `AddProducts` method accepts nullable types for the nullable database fields, simply use a nullable type and set its value to `null` in the case where user input is omitted.</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample8.cs)]

<span data-ttu-id="cc264-267">Nachdem der `Inserting`-Ereignishandler abgeschlossen ist, können der `Products` Datenbanktabelle neue Datensätze über die GridView-Footerzeile hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-267">With the `Inserting` event handler completed, new records can be added to the `Products` database table via the GridView s footer row.</span></span> <span data-ttu-id="cc264-268">Versuchen Sie, mehrere neue Produkte hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="cc264-268">Go ahead and try adding several new products.</span></span>

## <a name="enhancing-and-customizing-the-add-operation"></a><span data-ttu-id="cc264-269">Erweitern und Anpassen des Add-Vorgangs</span><span class="sxs-lookup"><span data-stu-id="cc264-269">Enhancing and Customizing the Add Operation</span></span>

<span data-ttu-id="cc264-270">Wenn Sie auf die Schaltfläche Hinzufügen klicken, wird der Datenbanktabelle ein neuer Datensatz hinzugefügt, es wird jedoch kein visuelles Feedback bereitgestellt, dass der Datensatz erfolgreich hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="cc264-270">Currently, clicking the Add button adds a new record to the database table but does not provide any sort of visual feedback that the record has successfully been added.</span></span> <span data-ttu-id="cc264-271">Im Idealfall würde ein Bezeichnungsfeld-websteuer Element oder ein Client seitiges Benachrichtigungs Feld den Benutzer darüber informieren, dass der Einfügevorgang erfolgreich abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="cc264-271">Ideally, a Label Web control or client-side alert box would inform the user that their insert has completed with success.</span></span> <span data-ttu-id="cc264-272">Ich lasse dies als Übung für den Reader aus.</span><span class="sxs-lookup"><span data-stu-id="cc264-272">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="cc264-273">Die in diesem Tutorial verwendete GridView wendet keine Sortierreihenfolge auf die aufgelisteten Produkte an und ermöglicht dem Endbenutzer auch nicht das Sortieren der Daten.</span><span class="sxs-lookup"><span data-stu-id="cc264-273">The GridView used in this tutorial does not apply any sort order to the listed products, nor does it allow the end user to sort the data.</span></span> <span data-ttu-id="cc264-274">Folglich werden die Datensätze nach ihrem Primärschlüssel Feld in der Datenbank angeordnet.</span><span class="sxs-lookup"><span data-stu-id="cc264-274">Consequently, the records are ordered as they are in the database by their primary key field.</span></span> <span data-ttu-id="cc264-275">Da jeder neue Datensatz einen `ProductID` Wert hat, der größer als der letzte ist, wird jedes Mal, wenn ein neues Produkt hinzugefügt wird, an das Ende des Rasters geackt.</span><span class="sxs-lookup"><span data-stu-id="cc264-275">Since each new record has a `ProductID` value greater than the last one, every time a new product is added it is tacked on to the end of the grid.</span></span> <span data-ttu-id="cc264-276">Daher empfiehlt es sich, den Benutzer automatisch an die letzte Seite der GridView zu senden, nachdem ein neuer Datensatz hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="cc264-276">Therefore, you may want to automatically send the user to the last page of the GridView after adding a new record.</span></span> <span data-ttu-id="cc264-277">Dies kann erreicht werden, indem nach dem `ProductsDataSource.Insert()` im `RowCommand`-Ereignishandler die folgende Codezeile hinzugefügt wird, um anzugeben, dass der Benutzer nach dem Binden der Daten an die GridView an die letzte Seite gesendet werden muss:</span><span class="sxs-lookup"><span data-stu-id="cc264-277">This can be accomplished by adding the following line of code after the call to `ProductsDataSource.Insert()` in the `RowCommand` event handler to indicate that the user needs to be sent to the last page after binding the data to the GridView:</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample9.cs)]

<span data-ttu-id="cc264-278">`SendUserToLastPage` ist eine boolesche Variable auf Seitenebene, der anfänglich der Wert `false`zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-278">`SendUserToLastPage` is a page-level Boolean variable that is initially assigned a value of `false`.</span></span> <span data-ttu-id="cc264-279">Wenn `SendUserToLastPage` in der GridView s `DataBound`-Ereignishandler false ist, wird die `PageIndex`-Eigenschaft aktualisiert, um den Benutzer an die letzte Seite zu senden.</span><span class="sxs-lookup"><span data-stu-id="cc264-279">In the GridView s `DataBound` event handler, if `SendUserToLastPage` is false, the `PageIndex` property is updated to send the user to the last page.</span></span>

[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample10.cs)]

<span data-ttu-id="cc264-280">Der Grund dafür, dass die `PageIndex`-Eigenschaft im `DataBound`-Ereignishandler festgelegt wird (im Gegensatz zum `RowCommand`-Ereignishandler), liegt daran, dass beim Auslösen des `RowCommand` Ereignis Handlers noch der neue Datensatz der `Products` Datenbanktabelle hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-280">The reason the `PageIndex` property is set in the `DataBound` event handler (as opposed to the `RowCommand` event handler) is because when the `RowCommand` event handler fires we ve yet to add the new record to the `Products` database table.</span></span> <span data-ttu-id="cc264-281">Daher stellt der letzte Seitenindex (`PageCount - 1`) im `RowCommand`-Ereignishandler den letzten Seitenindex dar, *bevor* das neue Produkt hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="cc264-281">Therefore, in the `RowCommand` event handler the last page index (`PageCount - 1`) represents the last page index *before* the new product has been added.</span></span> <span data-ttu-id="cc264-282">Für die Mehrzahl der hinzugefügten Produkte ist der letzte Seitenindex nach dem Hinzufügen des neuen Produkts identisch.</span><span class="sxs-lookup"><span data-stu-id="cc264-282">For the majority of products being added, the last page index is the same after adding the new product.</span></span> <span data-ttu-id="cc264-283">Wenn das hinzugefügte Produkt jedoch zu einem neuen letzten Seitenindex führt, wird der `PageIndex` im `RowCommand`-Ereignishandler nicht ordnungsgemäß aktualisiert, dann werden wir auf die zweite Seite (der letzte Seitenindex vor dem Hinzufügen des neuen Produkts) anstatt auf den neuen letzten Seitenindex weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="cc264-283">But when the added product results in a new last page index, if we incorrectly update the `PageIndex` in the `RowCommand` event handler then we'll be taken to the second to last page (the last page index prior to adding the new product) as opposed to the new last page index.</span></span> <span data-ttu-id="cc264-284">Da der `DataBound`-Ereignishandler ausgelöst wird, nachdem das neue Produkt hinzugefügt wurde und die Daten an das Raster wiedergegeben wurden, indem Sie die `PageIndex`-Eigenschaft festgelegt haben, wissen wir, dass wir den korrekten letzten Seitenindex erhalten.</span><span class="sxs-lookup"><span data-stu-id="cc264-284">Since the `DataBound` event handler fires after the new product has been added and the data rebound to the grid, by setting the `PageIndex` property there we know we re getting the correct last page index.</span></span>

<span data-ttu-id="cc264-285">Schließlich ist die in diesem Tutorial verwendete GridView aufgrund der Anzahl der Felder, die für das Hinzufügen eines neuen Produkts gesammelt werden müssen, ziemlich breit.</span><span class="sxs-lookup"><span data-stu-id="cc264-285">Finally, the GridView used in this tutorial is quite wide due to the number of fields that must be collected for adding a new product.</span></span> <span data-ttu-id="cc264-286">Aufgrund dieser Breite könnte ein vertikales Layout für DetailsView bevorzugt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-286">Due to this width, a DetailsView s vertical layout might be preferred.</span></span> <span data-ttu-id="cc264-287">Die Gesamtbreite der GridView s kann reduziert werden, indem weniger Eingaben gesammelt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-287">The GridView s overall width could be reduced by collecting fewer inputs.</span></span> <span data-ttu-id="cc264-288">Vielleicht müssen wir beim Hinzufügen eines neuen Produkts nicht die Felder `UnitsOnOrder`, `UnitsInStock`und `ReorderLevel` erfassen. in diesem Fall könnten diese Felder aus der GridView entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-288">Perhaps we don t need to collect the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields when adding a new product, in which case these fields could be removed from the GridView.</span></span>

<span data-ttu-id="cc264-289">Zum Anpassen der gesammelten Daten können wir einen der beiden folgenden Ansätze verwenden:</span><span class="sxs-lookup"><span data-stu-id="cc264-289">To adjust the data collected, we can use one of two approaches:</span></span>

- <span data-ttu-id="cc264-290">Verwenden Sie weiterhin die `AddProduct`-Methode, die Werte für die Felder "`UnitsOnOrder`", "`UnitsInStock`" und "`ReorderLevel`" erwartet.</span><span class="sxs-lookup"><span data-stu-id="cc264-290">Continue to use the `AddProduct` method that expects values for the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields.</span></span> <span data-ttu-id="cc264-291">Stellen Sie im `Inserting`-Ereignishandler hart codierte Standardwerte bereit, die für diese Eingaben verwendet werden sollen, die aus der einfügeschnittstelle entfernt wurden.</span><span class="sxs-lookup"><span data-stu-id="cc264-291">In the `Inserting` event handler, provide hard-coded, default values to use for these inputs that have been removed from the inserting interface.</span></span>
- <span data-ttu-id="cc264-292">Erstellen Sie eine neue Überladung der `AddProduct`-Methode in der `ProductsBLL`-Klasse, die keine Eingaben für die Felder `UnitsOnOrder`, `UnitsInStock`und `ReorderLevel` akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="cc264-292">Create a new overload of the `AddProduct` method in the `ProductsBLL` class that does not accept inputs for the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields.</span></span> <span data-ttu-id="cc264-293">Konfigurieren Sie dann auf der Seite ASP.net die ObjectDataSource für die Verwendung dieser neuen Überladung.</span><span class="sxs-lookup"><span data-stu-id="cc264-293">Then, in the ASP.NET page, configure the ObjectDataSource to use this new overload.</span></span>

<span data-ttu-id="cc264-294">Beide Optionen funktionieren ebenfalls gleichermaßen.</span><span class="sxs-lookup"><span data-stu-id="cc264-294">Either option will work equally as well.</span></span> <span data-ttu-id="cc264-295">In den vorherigen Tutorials haben wir die letztgenannte Option verwendet, um mehrere über Ladungen für die `ProductsBLL` Klasse `UpdateProduct`-Methode zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="cc264-295">In past tutorials we used the latter option, creating multiple overloads for the `ProductsBLL` class s `UpdateProduct` method.</span></span>

## <a name="summary"></a><span data-ttu-id="cc264-296">Summary</span><span class="sxs-lookup"><span data-stu-id="cc264-296">Summary</span></span>

<span data-ttu-id="cc264-297">In der GridView fehlen die integrierten Einfügefunktionen in den DetailsView und FormView, aber mit etwas Aufwand kann eine einfügende Schnittstelle der Fußzeile hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-297">The GridView lacks the built-in inserting capabilities found in the DetailsView and FormView, but with a bit of effort an inserting interface can be added to the footer row.</span></span> <span data-ttu-id="cc264-298">Um die Footerzeile in einer GridView anzuzeigen, legen Sie einfach die `ShowFooter`-Eigenschaft auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="cc264-298">To display the footer row in a GridView simply set its `ShowFooter` property to `true`.</span></span> <span data-ttu-id="cc264-299">Der Inhalt der Footerzeile kann für jedes Feld angepasst werden, indem das Feld in ein TemplateField-Element umgerechnet und die einfügeschnittstelle der `FooterTemplate`hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-299">The footer row content can be customized for each field by converting the field to a TemplateField and adding the inserting interface to the `FooterTemplate`.</span></span> <span data-ttu-id="cc264-300">Wie in diesem Tutorial gezeigt, können die `FooterTemplate` Schaltflächen, Textfelder, Dropdown Listen, Kontrollkästchen, Datenquellen-Steuerelemente zum Auffüllen von datengesteuerten websteuer Elementen (z. b. Dropdown Listen) und Validierungs Steuerelemente enthalten.</span><span class="sxs-lookup"><span data-stu-id="cc264-300">As we saw in this tutorial, the `FooterTemplate` can contain Buttons, TextBoxes, DropDownLists, CheckBoxes, data source controls for populating data-driven Web controls (such as DropDownLists), and validation controls.</span></span> <span data-ttu-id="cc264-301">Zusammen mit Steuerelementen zum Erfassen der Benutzereingaben ist eine Schaltfläche "hinzufügen", "LinkButton" oder "ImageButton" erforderlich.</span><span class="sxs-lookup"><span data-stu-id="cc264-301">Along with controls for collecting the user s input, an Add Button, LinkButton, or ImageButton is needed.</span></span>

<span data-ttu-id="cc264-302">Wenn Sie auf die Schaltfläche Hinzufügen klicken, wird die ObjectDataSource s-`Insert()`-Methode aufgerufen, um den einfügeworkflow zu starten.</span><span class="sxs-lookup"><span data-stu-id="cc264-302">When the Add button is clicked, the ObjectDataSource s `Insert()` method is invoked to start the inserting workflow.</span></span> <span data-ttu-id="cc264-303">Die ObjectDataSource ruft dann die konfigurierte Insert-Methode auf (die `ProductsBLL` Klasse s `AddProduct` Methode in diesem Tutorial).</span><span class="sxs-lookup"><span data-stu-id="cc264-303">The ObjectDataSource will then call the configured insert method (the `ProductsBLL` class s `AddProduct` method, in this tutorial).</span></span> <span data-ttu-id="cc264-304">Wir müssen die Werte aus der GridView s-einfügeschnittstelle in die ObjectDataSource s-`InsertParameters` Auflistung kopieren, bevor die Insert-Methode aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="cc264-304">We must copy the values from the GridView s inserting interface to the ObjectDataSource s `InsertParameters` collection prior to the insert method being invoked.</span></span> <span data-ttu-id="cc264-305">Dies kann durch Programm gesteuertes verweisen auf die websteuer Elemente der einfügeschnittstelle in den ObjectDataSource s-`Inserting` Ereignis Handlers erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="cc264-305">This can be accomplished by programmatically referencing the inserting interface Web controls in the ObjectDataSource s `Inserting` event handler.</span></span>

<span data-ttu-id="cc264-306">In diesem Tutorial wird das Aussehen der Techniken zum Verbessern der Darstellung von GridView erläutert.</span><span class="sxs-lookup"><span data-stu-id="cc264-306">This tutorial completes our look at techniques for enhancing the GridView s appearance.</span></span> <span data-ttu-id="cc264-307">In den nächsten Tutorials wird erläutert, wie Sie mit Binärdaten wie Bildern, PDF-Dateien, Word-Dokumenten usw. und den datenweb Steuerelementen arbeiten.</span><span class="sxs-lookup"><span data-stu-id="cc264-307">The next set of tutorials will examine how to work with binary data such as images, PDFs, Word documents, and so on and the data Web controls.</span></span>

<span data-ttu-id="cc264-308">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="cc264-308">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="cc264-309">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="cc264-309">About the Author</span></span>

<span data-ttu-id="cc264-310">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="cc264-310">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="cc264-311">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="cc264-311">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="cc264-312">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="cc264-312">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="cc264-313">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="cc264-313">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="cc264-314">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="cc264-314">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="cc264-315">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="cc264-315">Special Thanks To</span></span>

<span data-ttu-id="cc264-316">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="cc264-316">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="cc264-317">Lead Reviewer für dieses Tutorial ist Bernadette Leigh.</span><span class="sxs-lookup"><span data-stu-id="cc264-317">Lead reviewer for this tutorial was Bernadette Leigh.</span></span> <span data-ttu-id="cc264-318">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="cc264-318">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="cc264-319">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="cc264-319">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="cc264-320">[Zurück](adding-a-gridview-column-of-checkboxes-cs.md)
> [Weiter](adding-a-gridview-column-of-radio-buttons-vb.md)</span><span class="sxs-lookup"><span data-stu-id="cc264-320">[Previous](adding-a-gridview-column-of-checkboxes-cs.md)
[Next](adding-a-gridview-column-of-radio-buttons-vb.md)</span></span>
