---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Sortieren von Daten in einem DataList- oder Wiederholungssteuerelement (c#) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial betrachten wir, wie Sie eine Sortierung unterstützt, in dem DataList- und Wiederholungssteuerelement umfassen als auch zum Erstellen von einem DataList- oder Repeater, deren Daten können...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: e3512758dbfdf43d788eca643fe48ca918c142fe
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65128068"
---
# <a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="5bcc6-103">Sortieren von Berichtsdaten in einem DataList- oder Wiederholungssteuerelement (C#)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>

<span data-ttu-id="5bcc6-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5bcc6-105">[Beispiel-App herunter](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) oder [PDF-Datei herunterladen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="5bcc6-106">In diesem Tutorial betrachten wir, wie Sie eine Sortierung unterstützt, in dem DataList- und Wiederholungssteuerelement umfassen als auch zum Erstellen von einem DataList- oder Repeater, deren Daten seitenweise durchlaufen und sortiert werden können.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="introduction"></a><span data-ttu-id="5bcc6-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="5bcc6-107">Introduction</span></span>

<span data-ttu-id="5bcc6-108">In der [vorherigen Tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) untersuchten wir wie einem DataList-Steuerelement Paging-Unterstützung hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="5bcc6-109">Erstellt eine neue Methode in der `ProductsBLL` Klasse (`GetProductsAsPagedDataSource`) zurückgegebenen eine `PagedDataSource` Objekt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="5bcc6-110">Wenn an einem DataList- oder Repeater gebunden ist, würde die DataList- oder Repeater nur die angeforderte Seite der Daten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="5bcc6-111">Dieses Verfahren ähnelt der was intern durch die GridView, DetailsView oder FormView-Steuerelemente verwendet wird, um die integrierten Standardsystem Pagingfunktionen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="5bcc6-112">Bieten Unterstützung der Paginierung, nicht nur eine enthält die GridView auch standardmäßig Sortierung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="5bcc6-113">Weder die Repeater das DataList-Steuerelement bietet integrierte Sortierfunktionen; Allerdings kann das Sortieren von Funktionen mit ein paar Codezeilen hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="5bcc6-114">In diesem Tutorial betrachten wir, wie Sie eine Sortierung unterstützt, in dem DataList- und Wiederholungssteuerelement umfassen als auch zum Erstellen von einem DataList- oder Repeater, deren Daten seitenweise durchlaufen und sortiert werden können.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="5bcc6-115">Eine Beschreibung der Sortierung</span><span class="sxs-lookup"><span data-stu-id="5bcc6-115">A Review of Sorting</span></span>

<span data-ttu-id="5bcc6-116">Wie wir, in gesehen der [Paging und Sortieren von Berichtsdaten](../paging-and-sorting/paging-and-sorting-report-data-cs.md) Tutorial, das GridView-Steuerelement enthält, standardmäßig Sortierung unterstützt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="5bcc6-117">Jedes Feld GridView haben ein zugeordnetes `SortExpression`, womit das Datenfeld, um die Daten zu sortieren.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="5bcc6-118">Wenn der GridView-s `AllowSorting` -Eigenschaftensatz auf `true`, jedes GridView-Feld, das ist eine `SortExpression` Eigenschaftswert kann der Header als ein LinkButton gerendert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="5bcc6-119">Klickt ein Benutzer einen bestimmten GridView-Feld-s-Header, einem Postback, und die Daten werden gemäß dem geklickt s-Feld sortiert `SortExpression`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="5bcc6-120">Das GridView-Steuerelement verfügt über eine `SortExpression` -Eigenschaft, die speichert die `SortExpression` des GridView-Felds durch die Daten sortiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="5bcc6-121">Darüber hinaus eine `SortDirection` Eigenschaft gibt an, ob die Daten in aufsteigender oder absteigender Reihenfolge, (wenn ein Benutzer klickt auf eine bestimmte GridView Feld s-Header-Verknüpfung zweimal hintereinander und die Sortierreihenfolge wird umgeschaltet) sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="5bcc6-122">Wenn an der Datenquellen-Steuerelement die GridView gebunden ist, übergibt Sie deaktivieren die `SortExpression` und `SortDirection` Eigenschaften auf die Daten der quellcodeverwaltung.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="5bcc6-123">Das Datenquellen-Steuerelement ruft die Daten ab und sortiert es anschließend gemäß der bereitgestellten `SortExpression` und `SortDirection` Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="5bcc6-124">Nach dem Sortieren der das an, das Datenquellen-Steuerelement das wird an die GridView zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="5bcc6-125">Um diese Funktionalität mit dem DataList- oder Repeater-Steuerelementen zu replizieren, müssen Sie:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="5bcc6-126">Erstellen Sie eine Sortierung-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="5bcc6-126">Create a sorting interface</span></span>
- <span data-ttu-id="5bcc6-127">Merken Sie sich das Datenfeld nach zu sortieren und angibt, ob die Sortierung in aufsteigender oder absteigender Reihenfolge</span><span class="sxs-lookup"><span data-stu-id="5bcc6-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="5bcc6-128">Weisen Sie dem ObjectDataSource-Steuerelement zum Sortieren der Daten nach einem bestimmten Feld</span><span class="sxs-lookup"><span data-stu-id="5bcc6-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="5bcc6-129">Wir werden diese drei Aufgaben in den Schritten 3 und 4 in Angriff nehmen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="5bcc6-130">Danach untersuchen wir wie beinhalten Auslagern und sortieren die Unterstützung in einem DataList- oder Repeater.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="5bcc6-131">Schritt 2: Anzeigen der Produkte in einem Wiederholungssteuerelement</span><span class="sxs-lookup"><span data-stu-id="5bcc6-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="5bcc6-132">Bevor wir sortieren-bezogenen Funktionen implementieren fürchten, können Sie s zunächst wird aufgelistet, die Produkte in ein Repeater-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="5bcc6-133">Öffnen Sie zunächst die `Sorting.aspx` auf der Seite die `PagingSortingDataListRepeater` Ordner.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="5bcc6-134">Fügen Sie ein Repeater-Steuerelement auf der Webseite festlegen die `ID` Eigenschaft `SortableProducts`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="5bcc6-135">Erstellen Sie eine neue, mit dem Namen "ObjectDataSource" aus dem Repeater-s-Smarttag `ProductsDataSource` und konfigurieren Sie ihn zum Abrufen von Daten aus der `ProductsBLL` Klasse s `GetProducts()` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="5bcc6-136">Wählen Sie die option (keine) aus den Dropdown-Listen auf den Registerkarten INSERT-, Update- und DELETE.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="5bcc6-137">[![Erstellen Sie ein ObjectDataSource-Steuerelement, und konfigurieren Sie, dass die GetProductsAsPagedDataSource()-Methode verwendet](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="5bcc6-138">**Abbildung 1**: Erstellen Sie ein ObjectDataSource-Steuerelement und konfigurieren Sie sie verwenden die `GetProductsAsPagedDataSource()` Methode ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>

<span data-ttu-id="5bcc6-139">[![Legen Sie die Dropdownlisten in der Update-, INSERT- und Löschen von Registerkarten (keine)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="5bcc6-140">**Abbildung 2**: Legen Sie die Dropdownlisten in der Update-, INSERT- und Löschen von Registerkarten (keine) ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>

<span data-ttu-id="5bcc6-141">Im Gegensatz zu mit DataList-Steuerelement, Visual Studio erstellt nicht automatisch ein `ItemTemplate` für das Repeater-Steuerelement nach dem Element an eine Datenquelle gebunden wird.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="5bcc6-142">Darüber hinaus müssen wir Hinzufügen dieser `ItemTemplate` deklarativ an, wie die Smarttags des Repeater-Steuerelements s verfügt nicht über die die Vorlagen bearbeiten-Option im DataList-Steuerelement s gefunden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="5bcc6-143">Let-s verwenden die gleiche `ItemTemplate` aus dem vorherigen Lernprogramm aus, die den Produktnamen s, Lieferanten und Kategorie angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="5bcc6-144">Nach dem Hinzufügen der `ItemTemplate`, Repeater- und das "ObjectDataSource" s deklarative Markup sollte etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="5bcc6-145">Abbildung 3 zeigt diese Seite, wenn Sie über einen Browser angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-145">Figure 3 shows this page when viewed through a browser.</span></span>

<span data-ttu-id="5bcc6-146">[![Jedes Produkt s Name, Hersteller und Kategorie wird angezeigt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="5bcc6-147">**Abbildung 3**: Jedes Produkt s Name, Lieferanten und Kategorie angezeigt wird ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>

## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="5bcc6-148">Schritt 3: Weist dem ObjectDataSource-Steuerelement zum Sortieren der Daten</span><span class="sxs-lookup"><span data-stu-id="5bcc6-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="5bcc6-149">Um die im Wiederholungsmodul angezeigten Daten zu sortieren, müssen wir dem ObjectDataSource-Steuerelement des Sortierausdrucks zu informieren, mit dem die Daten sortiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="5bcc6-150">Vor dem ObjectDataSource-Steuerelement seine Daten abruft, löst es zuerst die [ `Selecting` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), die bietet einer Möglichkeit, Angeben eines Sortierungsausdrucks.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="5bcc6-151">Die `Selecting` -Ereignishandler wird ein Objekt des Typs übergeben [ `ObjectDataSourceSelectingEventArgs` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), die besitzt eine Eigenschaft namens [ `Arguments` ](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) des Typs [ `DataSourceSelectArguments` ](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="5bcc6-152">Die `DataSourceSelectArguments` Klasse dient zum datenbezogene Anforderungen von einem Consumer der Daten an das Datenquellen-Steuerelement zu übergeben, und enthält eine [ `SortExpression` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="5bcc6-153">Um Sortierinformationen von der ASP.NET-Seite zu dem ObjectDataSource-Steuerelement zu übergeben, erstellen Sie einen Ereignishandler für die `Selecting` Ereignisses und verwenden Sie den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="5bcc6-154">Die *SortExpression* Wert den Namen des Felds zum Sortieren der Daten durch (z. B. ProductName) zugewiesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="5bcc6-155">Keine Richtung bezogene Sort-Eigenschaft vorhanden ist, also wenn Sie die Daten in absteigender Reihenfolge sortieren möchten, fügen Sie der Zeichenfolge DESC, die *SortExpression* Wert (z. B. ProductName DESC).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="5bcc6-156">Fahren Sie fort, und versuchen Sie es einige andere hartcodierte Werte für *SortExpression* und die Ergebnisse in einem Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="5bcc6-157">Wie Abbildung 4 zeigt die Verwendung von ProductName DESC als, die *SortExpression*, werden die Produkte anhand ihres Namens in umgekehrter alphabetischer Reihenfolge sortiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="5bcc6-158">[![Die Produkte werden anhand ihres Namens in die umgekehrte alphabetische Reihenfolge sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="5bcc6-159">**Abbildung 4**: Die Produkte werden anhand ihres Namens in die umgekehrte alphabetische Reihenfolge sortiert ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>

## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="5bcc6-160">Schritt 4: Erstellen der Schnittstelle zu sortieren und speichern den Sortierungsausdruck und die Richtung</span><span class="sxs-lookup"><span data-stu-id="5bcc6-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="5bcc6-161">Jede Headertext sortierbar Feld s einschalten, sortieren die Unterstützung in den GridView-Ansicht konvertiert werden, in ein LinkButton, wenn angeklickt, sortiert die Daten entsprechend.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="5bcc6-162">Eine Sortierung Schnittstelle ist sinnvoll für GridView, in dem ihre Daten sauber in Spalten angeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="5bcc6-163">Für die DataList- oder Repeater-Steuerelemente ist jedoch eine andere Sortierung Schnittstelle erforderlich.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="5bcc6-164">Eine Sortierung allgemeine Schnittstelle für eine Liste der Daten (im Gegensatz zu einem Datenraster), wird eine Dropdown-Liste, die verfügt über die Felder, die mit dem die Daten sortiert werden können.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="5bcc6-165">Lassen Sie s, die für dieses Tutorial derartige Schnittstelle implementiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="5bcc6-166">Fügen Sie ein DropDownList-Steuerelement oben die `SortableProducts` Repeater, und legen seine `ID` Eigenschaft `SortBy`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="5bcc6-167">Klicken Sie im Eigenschaftenfenster auf die Auslassungspunkte in der `Items` Eigenschaft, um den ListItem-Auflistungs-Editor zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="5bcc6-168">Hinzufügen `ListItem` s zum Sortieren der Daten durch die `ProductName`, `CategoryName`, und `SupplierName` Felder.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="5bcc6-169">Hinzufügen einer `ListItem` die Produkte anhand ihres Namens in umgekehrter alphabetischer Reihenfolge sortiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="5bcc6-170">Die `ListItem` `Text` Eigenschaften können festgelegt werden, um einen beliebigen Wert (z. B. Name), aber die `Value` Eigenschaften müssen festgelegt werden, auf den Namen des Felds (z. B. ProductName).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="5bcc6-171">Um die Ergebnisse in absteigender Reihenfolge sortieren zu können, fügen Sie der Zeichenfolge DESC, der den Datenfeldnamen wie ProductName DESC.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>

![Fügen Sie ein ListItem für jeden der sortierbare Datenfelder hinzu.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="5bcc6-173">**Abbildung 5**: Hinzufügen einer `ListItem` für die einzelnen Datenfelder, sortierbar</span><span class="sxs-lookup"><span data-stu-id="5bcc6-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>

<span data-ttu-id="5bcc6-174">Abschließend fügen Sie ein Steuerelement Schaltfläche rechts neben der Dropdownliste hinzu.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="5bcc6-175">Festlegen der `ID` zu `RefreshRepeater` und die zugehörige `Text` Eigenschaft zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="5bcc6-176">Nach dem Erstellen der `ListItem` s und die Schaltfläche "Aktualisieren" hinzugefügt haben, sollte die DropDownList und Schaltfläche s deklarative Syntax des etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="5bcc6-177">Mit der Sortierung DropDownList-Steuerelement abgeschlossen, wir als Nächstes müssen die "ObjectDataSource"-s aktualisieren `Selecting` -Ereignishandler so, dass die It die ausgewählte verwendet `SortBy``ListItem` s `Value` Eigenschaft im Gegensatz zu einem hartcodierten Sortierungsausdruck.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="5bcc6-178">An diesem Punkt aus, wenn die Seite zuerst besuchen werden die Produkte zunächst nach sortiert werden die `ProductName` Feld "Daten", wie sie s der `SortBy` `ListItem` standardmäßig aktiviert (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="5bcc6-179">Auswählen eines anderen Option wie z. B. Kategorie sortieren und auf Aktualisieren klicken, wird dazu führen, dass einen Postback und neu sortieren der Daten durch den Namen der Kategorie, wie in Abbildung 7 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>

<span data-ttu-id="5bcc6-180">[![Die Produkte sind zunächst nach dem Namen sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="5bcc6-181">**Abbildung 6**: Die Produkte sind zunächst anhand ihres Namens sortiert ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>

<span data-ttu-id="5bcc6-182">[![Die Produkte sind jetzt nach Kategorie sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="5bcc6-183">**Abbildung 7**: Die Produkte sind jetzt nach Kategorie sortiert ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5bcc6-184">Klicken Sie auf die Schaltfläche "Aktualisieren" bewirkt, dass die Daten automatisch neu sortiert sein, da der Repeater-s-Ansichtszustand deaktiviert wurde, wodurch des Repeaters, um mit der Datenquelle bei jedem Postback erneut zu binden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="5bcc6-185">Wenn Sie haben den Repeater s Ansichtszustand aktiviert ist, ändern die Sortierung Dropdownliste links keine Liste Auswirkungen auf die Sortierreihenfolge.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won't have any affect on the sort order.</span></span> <span data-ttu-id="5bcc6-186">Um dies zu beheben, erstellen Sie einen Ereignishandler für die Schaltfläche "Aktualisieren"-s `Click` Ereignis- und Binden des Repeaters mit der Datenquelle (durch Aufrufen des Repeaters s `DataBind()` Methode).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>

## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="5bcc6-187">Denken Sie daran, den Sortierungsausdruck und die Richtung</span><span class="sxs-lookup"><span data-stu-id="5bcc6-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="5bcc6-188">Wenn Sie eine sortierbare DataList- oder Repeater auf einer Seite erstellen, bei denen nicht sortieren Postbacks auftreten verknüpfte, es s unverzichtbar, dass der Sortierungsausdruck und die Richtung über Postbacks hinweg gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="5bcc6-189">Angenommen Sie, dass wir in diesem Lernprogramm sollen eine Löschen-Schaltfläche mit den einzelnen Produkten Repeater aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="5bcc6-190">Klickt der Benutzer die Schaltfläche "Delete" führen wir d von Code zum Löschen des ausgewählten Produkts aus, und binden Sie dann die Daten der Repeater.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="5bcc6-191">Wenn Sie die Details für die Sortierung für Postbacks nicht beibehalten werden, werden die Daten auf dem Bildschirm angezeigt, die ursprüngliche Sortierreihenfolge zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="5bcc6-192">In diesem Tutorial speichert DropDownList implizit die Sortierung Ausdruck und die Richtung in seinen Ansichtszustand für uns.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="5bcc6-193">Wenn wir eine andere Sortierung Schnittstelle einer mit, z. B. LinkButtons verwendet haben, die die verschiedenen Optionen für die Sortierung bereitgestellt müssen wir d darauf achten, dass um die Sortierreihenfolge über Postbacks hinweg zu speichern.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="5bcc6-194">Dies kann erreicht werden, durch die Sortierung Parameter in Ansichtszustand der Seite s, speichern, indem Sie den sortierungsparameter einschließen, in der Abfragezeichenfolge oder über ein anderes State Persistence-Verfahren.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="5bcc6-195">Zukünftige Beispiele in diesem Tutorial erfahren Sie, wie die Sortierung Details in den Ansichtszustand der Seite s beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="5bcc6-196">Schritt 5: Hinzufügen einer Sortierung unterstützen, einem DataList-Steuerelement, das das Standardpaging verwendet</span><span class="sxs-lookup"><span data-stu-id="5bcc6-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="5bcc6-197">In der [vorherigen Lernprogramm](paging-report-data-in-a-datalist-or-repeater-control-cs.md) wurde beschrieben, wie das Standardpaging und einem DataList-Steuerelement zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="5bcc6-198">Lassen Sie s, die diese vorherigen Beispiel um die Möglichkeit zum Sortieren der ausgelagerten Daten zu erweitern.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="5bcc6-199">Öffnen Sie zunächst die `SortingWithDefaultPaging.aspx` und `Paging.aspx` Seiten in der `PagingSortingDataListRepeater` Ordner.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="5bcc6-200">Von der `Paging.aspx` Seite, klicken Sie auf die Schaltfläche "Quelle" im deklarativen Markup der Seite s anzeigen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="5bcc6-201">Kopieren Sie den ausgewählten Text (siehe Abbildung 8), und fügen Sie ihn in deklarativen Markup `SortingWithDefaultPaging.aspx` zwischen der `<asp:Content>` Tags.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>

<span data-ttu-id="5bcc6-202">[![Replizieren von deklarativen Markup in der &lt;Asp: Content&gt; Tags aus Paging.aspx SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="5bcc6-203">**Abbildung 8**: Replizieren von deklarativen Markup in der `<asp:Content>` von Tags `Paging.aspx` zu `SortingWithDefaultPaging.aspx` ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>

<span data-ttu-id="5bcc6-204">Kopieren Sie nach dem Kopieren der deklarativen Markups an, die Methoden und Eigenschaften in der `Paging.aspx` Seite s CodeBehind-Klasse, um die Code-Behind-Klasse für `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="5bcc6-205">Als Nächstes nehmen einen Moment Zeit, an die `SortingWithDefaultPaging.aspx` Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="5bcc6-206">Es sollte weisen die gleiche Funktionalität und die Darstellung als `Paging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="5bcc6-207">Verbessern der ProductsBLL den Standardwert Auslagern und sortieren die Methode einschließen</span><span class="sxs-lookup"><span data-stu-id="5bcc6-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="5bcc6-208">Im vorherigen Tutorial erstellt es einen `GetProductsAsPagedDataSource(pageIndex, pageSize)` -Methode in der die `ProductsBLL` -Klasse, die zurückgegeben eine `PagedDataSource` Objekt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="5bcc6-209">Dies `PagedDataSource` mit gefüllt wurde *alle* der Produkte (über die BLL s `GetProducts()` Methode), aber bei der Datenbindung DataList-Steuerelement nur die Datensätze, die der angegebenen *PageIndex* und *PageSize* Eingabeparameter werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="5bcc6-210">Weiter oben in diesem Tutorial wir Unterstützung der datenquellensortierung hinzugefügt, durch Angabe den Sortierausdruck, von der "ObjectDataSource"-s `Selecting` -Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="5bcc6-211">Dies funktioniert gut, wenn dem ObjectDataSource-Steuerelement ein Objekt zurückgegeben wird, die, wie z. B. sortiert werden kann, die `ProductsDataTable` zurückgegebenes der `GetProducts()` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="5bcc6-212">Allerdings die `PagedDataSource` zurückgegebenes Objekt der `GetProductsAsPagedDataSource` Methode unterstützt nicht die Sortierung von der internen Datenquelle.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="5bcc6-213">Stattdessen müssen wir die zurückgegebenen Ergebnisse zu sortieren die `GetProducts()` Methode *vor* wir fügen Sie ihn in das `PagedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="5bcc6-214">Um dies zu erreichen, erstellen Sie eine neue Methode in der `ProductsBLL` -Klasse, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="5bcc6-215">Zum Sortieren der `ProductsDataTable` zurückgegebenes der `GetProducts()` -Methode, geben Sie die `Sort` Eigenschaft den Standardwert `DataTableView`:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="5bcc6-216">Die `GetProductsSortedAsPagedDataSource` Methode unterscheidet sich nur geringfügig von den `GetProductsAsPagedDataSource` Methode im vorherigen Tutorial erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="5bcc6-217">Insbesondere `GetProductsSortedAsPagedDataSource` akzeptiert einen zusätzlichen Eingabeparameter `sortExpression` und weist diesen Wert auf die `Sort` Eigenschaft der `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="5bcc6-218">Ein paar Zeilen Code später die `PagedDataSource` s DataSource-Objekt zugewiesen wird die `ProductDataTable` s `DefaultView`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="5bcc6-219">Aufrufen der Methode GetProductsSortedAsPagedDataSource und Angeben des Werts für die SortExpression Input-Parameter</span><span class="sxs-lookup"><span data-stu-id="5bcc6-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="5bcc6-220">Mit der `GetProductsSortedAsPagedDataSource` Methode vollständig ist, der nächste Schritt besteht, um den Wert für diesen Parameter bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="5bcc6-221">Zu "ObjectDataSource" `SortingWithDefaultPaging.aspx` ist zurzeit so konfiguriert, dass das Aufrufen der `GetProductsAsPagedDataSource` -Methode auf und übergibt die beiden Eingabeparameter durch die zwei `QueryStringParameters`, im angegebenen die `SelectParameters` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="5bcc6-222">Diese beiden `QueryStringParameters` anzugeben, die die Quelle für die `GetProductsAsPagedDataSource` s-Methode *PageIndex* und *PageSize* Parameter stammen vom Querystring-Felder `pageIndex` und `pageSize`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="5bcc6-223">Aktualisieren Sie das "ObjectDataSource"-s `SelectMethod` Eigenschaft, sodass die It die neuen ruft `GetProductsSortedAsPagedDataSource` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="5bcc6-224">Fügen Sie dann ein neues `QueryStringParameter` , damit die *SortExpression* Eingabeparameter wird aus dem Querystring-Feld zugegriffen `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="5bcc6-225">Legen Sie die `QueryStringParameter` s `DefaultValue` zu ProductName.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="5bcc6-226">Nach diesen Änderungen sollte das deklarative "ObjectDataSource"-s-Markup ähneln:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="5bcc6-227">An diesem Punkt die `SortingWithDefaultPaging.aspx` Seite werden die Ergebnisse alphabetisch sortieren nach dem Produktnamen (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="5bcc6-228">Dies liegt daran, die standardmäßig ein Wert von ProductName in übergeben wird, als die `GetProductsSortedAsPagedDataSource` s-Methode *SortExpression* Parameter.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>

<span data-ttu-id="5bcc6-229">[![Standardmäßig werden die Ergebnisse nach Produktname sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="5bcc6-230">**Abbildung 9**: Standardmäßig werden die Ergebnisse sortiert nach `ProductName` ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>

<span data-ttu-id="5bcc6-231">Wenn Sie manuell hinzufügen einer `sortExpression` Querystring-Feld, z. B. `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` die Ergebnisse sortiert werden durch das angegebene `sortExpression`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="5bcc6-232">Aber dies `sortExpression` Parameter ist nicht in der Abfragezeichenfolge enthalten, bei der Umstellung auf eine andere Seite der Daten.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="5bcc6-233">Damit die Schaltflächen rufen wir in erneut, klicken auf der nächsten oder letzten Seite `Paging.aspx`!</span><span class="sxs-lookup"><span data-stu-id="5bcc6-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="5bcc6-234">Darüber hinaus gibt es s derzeit keine Sortierung Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="5bcc6-235">Die einzige Möglichkeit, die ein Benutzer die Sortierreihenfolge der ausgelagerten Daten ändern kann, ist durch die Abfragezeichenfolge direkt bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="5bcc6-236">Erstellen die Sortierung-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="5bcc6-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="5bcc6-237">Müssen wir zuerst auf das Aktualisieren der `RedirectUser` Methode, um den Benutzer senden `SortingWithDefaultPaging.aspx` (anstelle von `Paging.aspx`) und um die `sortExpression` Wert in der Abfragezeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="5bcc6-238">Wir sollten auch eine schreibgeschützte, auf Seitenebene mit dem Namen hinzufügen `SortExpression` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="5bcc6-239">Diese Eigenschaft, die ähnlich wie die `PageIndex` und `PageSize` Eigenschaften, die im vorherigen Tutorial erstellt haben, gibt den Wert des der `sortExpression` Querystring-Feld, falls vorhanden, und der standardmäßige Wert (ProductName) andernfalls.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="5bcc6-240">Derzeit den `RedirectUser` -Methode akzeptiert nur einen einzelnen Eingabeparameter der Index der anzuzeigenden Seite.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="5bcc6-241">Allerdings gibt es möglicherweise vorkommen, dass wir den Benutzer an eine bestimmte Seite der Daten, die mithilfe eines Sortierungsausdrucks als Neuheiten in der Abfragezeichenfolge angegebene umleiten möchten.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="5bcc6-242">In Kürze erstellen wir die Sortierung-Schnittstelle für diese Seite, die eine Reihe von Websteuerelementen mit Schaltfläche zum Sortieren der Daten durch eine angegebene Spalte enthält.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="5bcc6-243">Wenn eine dieser Schaltflächen geklickt wird, möchten wir zum Umleiten des Benutzers, der in der entsprechenden Sortierausdruckswert übergeben.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="5bcc6-244">Um diese Funktionalität zu ermöglichen, erstellen Sie zwei Versionen der `RedirectUser` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="5bcc6-245">Erstens sollte nur den Seitenindex angezeigt werden, während das zweite Argument den Seite Index und die Sortierreihenfolge Ausdruck akzeptiert, akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="5bcc6-246">Im ersten Beispiel in diesem Tutorial haben wir eine Sortierung Schnittstelle, die mit einem DropDownList-Steuerelement erstellt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="5bcc6-247">In diesem Beispiel verwenden können s drei Schaltfläche Websteuerelemente über DataList-Steuerelement eine positioniert wird, für die Sortierung von `ProductName`, eine für `CategoryName`, und eine für `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="5bcc6-248">Die drei Schaltfläche Web Steuerelemente hinzufügen, Festlegen ihrer `ID` und `Text` Eigenschaften entsprechend:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="5bcc6-249">Als Nächstes erstellen Sie eine `Click` -Ereignishandler für die einzelnen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="5bcc6-250">Die Ereignishandler aufrufen sollten die `RedirectUser` Methode, die den Benutzer auf die erste Seite mit den entsprechenden Sortierungsausdruck zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="5bcc6-251">Wenn die Seite zuerst besuchen zu können, die Daten nach dem Produktnamen alphabetisch sortiert (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="5bcc6-252">Klicken Sie auf die Schaltfläche "Weiter", fahren Sie mit der zweiten Seite der Daten fort, und klicken Sie dann auf die Sortierung von kategorieschaltfläche.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="5bcc6-253">Dies gibt uns zur ersten Seite der Daten, sortiert nach Kategorienamen (siehe Abbildung 10).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="5bcc6-254">Ebenso sortiert die Sortierung von Lieferanten-Schaltfläche auf die Daten vom Lieferanten, die von der ersten Seite der Daten ab.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="5bcc6-255">Die Sortierungsoption wird gespeichert, wie die Daten über ausgelagert werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="5bcc6-256">Abbildung 11 zeigt die Seite nach dem Sortieren nach Kategorie, und klicken Sie dann das dreizehnte Datenseite gelangt sind.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>

<span data-ttu-id="5bcc6-257">[![Die Produkte sind nach Kategorien sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="5bcc6-258">**Abbildung 10**: Werden die Produkte nach Kategorie sortiert ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>

<span data-ttu-id="5bcc6-259">[![Der Sortierausdruck wird gespeichert, wenn Paging durch die Daten](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="5bcc6-260">**Abbildung 11**: Der Sortierausdruck wird gespeichert, wenn Paging durch die Daten ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>

## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="5bcc6-261">Schritt 6: Benutzerdefiniertes Paging durch die Datensätze in einem Wiederholungssteuerelement</span><span class="sxs-lookup"><span data-stu-id="5bcc6-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="5bcc6-262">Das DataList-Beispiel, die in Schritt 5 Seiten über die Daten mithilfe der ineffizienten standardmäßig Paging Technik überprüft.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="5bcc6-263">Beim paging durch ausreichend große Mengen von Daten, ist es zwingend erforderlich, dass das benutzerdefinierte Paging verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="5bcc6-264">In der [effizient Paging durch große Mengen von Daten](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) und [Sortieren von benutzerdefinierten ausgelagerten Daten](../paging-and-sorting/sorting-custom-paged-data-cs.md) Tutorials, untersuchten wir die Unterschiede zwischen Standard- und benutzerdefinierte Paginierung und erstellten Methoden in der BLL für verwenden benutzerdefinierte Auslagern und Sortieren von benutzerdefinierten ausgelagerten Daten.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="5bcc6-265">In diesen beiden vorherigen Tutorials hinzugefügt wir vor allem die folgenden drei Methoden für die `ProductsBLL` Klasse:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="5bcc6-266">`GetProductsPaged(startRowIndex, maximumRows)` Gibt eine bestimmte Teilmenge der Datensätze, die beginnend bei *StartRowIndex* und nicht länger als *MaximumRows*.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="5bcc6-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` Gibt eine bestimmte Teilmenge der Datensätze, sortiert nach dem angegebenen *SortExpression* input-Parameters.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="5bcc6-268">`TotalNumberOfProducts()` Gibt die Gesamtzahl der Datensätze in der `Products` Datenbanktabelle.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="5bcc6-269">Diese Methoden können verwendet werden, effizient Seite und Sortieren von Daten mithilfe eines DataList- oder Repeater-Steuerelements.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="5bcc6-270">Um dies zu veranschaulichen, können Sie zunächst erstellen Sie ein Repeater-Steuerelement mit Unterstützung für benutzerdefiniertes Paging s; Wir fügen dann Sortierfunktionen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="5bcc6-271">Öffnen der `SortingWithCustomPaging.aspx` auf der Seite der `PagingSortingDataListRepeater` Ordner und fügen Sie einem Wiederholungssteuerelement auf der Seite festlegen seiner `ID` Eigenschaft `Products`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="5bcc6-272">Erstellen Sie eine neue, mit dem Namen "ObjectDataSource" aus dem Repeater-s-Smarttag `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="5bcc6-273">So konfigurieren, dass die Daten aus der wählen die `ProductsBLL` Klasse s `GetProductsPaged` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>

<span data-ttu-id="5bcc6-274">[![Konfigurieren von dem ObjectDataSource-Steuerelement zur Verwendung der ProductsBLL Klasse s GetProductsPaged-Methode](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="5bcc6-275">**Abbildung 12**: Konfigurieren Sie das "ObjectDataSource" Verwenden der `ProductsBLL` s-Klasse `GetProductsPaged` Methode ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>

<span data-ttu-id="5bcc6-276">Legen Sie die Dropdownlisten in der Update-, INSERT- und Löschen von Registerkarten (keine), und klicken Sie dann auf die Schaltfläche "Weiter".</span><span class="sxs-lookup"><span data-stu-id="5bcc6-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="5bcc6-277">Der Konfigurieren von Datenquellen-Assistenten jetzt aufgefordert, für die Datenquellen der `GetProductsPaged` s-Methode *StartRowIndex* und *MaximumRows* Eingabeparameter.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="5bcc6-278">In Wirklichkeit werden diese Parameter ignoriert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="5bcc6-279">Stattdessen die *StartRowIndex* und *MaximumRows* Werte durch Übergeben der `Arguments` -Eigenschaft in der "ObjectDataSource"-s `Selecting` -Ereignishandler, wie wir angegeben wie die *SortExpression* in dieser ersten Tutorial s-Demo.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="5bcc6-280">Aus diesem Grund lassen Sie die Parameterquelle Dropdownlisten im Assistenten auf None festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>

<span data-ttu-id="5bcc6-281">[![Lassen Sie den Parametersatz für die Datenquellen auf "None"](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="5bcc6-282">**Abbildung 13**: Lassen Sie die Quellen Parametersatz auf "None" ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5bcc6-283">Führen Sie *nicht* legen Sie das "ObjectDataSource"-s `EnablePaging` Eigenschaft `true`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="5bcc6-284">Dadurch wird dem ObjectDataSource-Steuerelement automatisch einen eigenen aufnehmen *StartRowIndex* und *MaximumRows* Parameter für die `SelectMethod` Liste vorhandenen s-Parameter.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="5bcc6-285">Die `EnablePaging` Eigenschaft ist nützlich, bei der Bindung benutzerdefinierte Daten zu einem GridView, DetailsView oder FormView-Steuerelement ausgelagert, da diese Steuerelemente bestimmte Verhalten aus dem ObjectDataSource-Steuerelement, s erwarten, dass nur verfügbar, wenn `EnablePaging` Eigenschaft `true`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="5bcc6-286">Lassen Sie diese Eigenschaft auf festgelegt, da wir haben die pagingunterstützung für DataList- oder Wiederholungssteuerelement manuell hinzufügen, `false` (Standardeinstellung), wie wir in die benötigte Funktionalität direkt in unser ASP.NET-Seite integrieren müssen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>

<span data-ttu-id="5bcc6-287">Definieren Sie schließlich die Repeater s `ItemTemplate` , damit der Produktname s, Kategorie und Lieferant angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="5bcc6-288">Nach diesen Änderungen sollte die Repeater- und das "ObjectDataSource" s deklarative Syntax des etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="5bcc6-289">Nehmen Sie einen Moment Zeit, besuchen die Seite über einen Browser, und beachten Sie, dass keine Datensätze zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="5bcc6-290">Grund hierfür ist, wir haben noch an die *StartRowIndex* und *MaximumRows* Parameterwerte; aus diesem Grund werden Werte von 0 an übergeben wird, für beide.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="5bcc6-291">Um diese Werte anzugeben, erstellen Sie einen Ereignishandler für das "ObjectDataSource"-s `Selecting` -Ereignis und legen Sie diese Parameter Werte programmgesteuert hart kodierte Werte von 0 und 5, bzw.:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="5bcc6-292">Durch diese Änderung zeigt die Seite, wenn Sie über einen Webbrowser angezeigt. die ersten fünf Produkte.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>

<span data-ttu-id="5bcc6-293">[![Die ersten fünf Datensätze werden angezeigt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="5bcc6-294">**Abbildung 14**: Die ersten fünf Datensätze werden angezeigt ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5bcc6-295">Die Produkte aufgelistet, die in Abbildung 14 ausgeführt wird, nach dem Produktnamen sortiert werden, da die `GetProductsPaged` gespeicherte Prozedur, die die effiziente benutzerdefinierte Pagingabfrage ausführt, sortiert die Ergebnisse nach `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>

<span data-ttu-id="5bcc6-296">Damit den Benutzer die Seiten durchlaufen zu können, müssen wir verfolgt den Startindex für die Zeile und der maximalen Anzahl von Zeilen, und speichern diese Werte über mehrere Postbacks.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="5bcc6-297">In der Standard-Paging-Beispiel verwendet haben wir Querystring-Felder, um diese Werte beizubehalten; Lassen Sie für diese Demo s, die diese Informationen in den Ansichtszustand der Seite s beibehalten werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="5bcc6-298">Erstellen Sie die folgenden zwei Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-298">Create the following two properties:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="5bcc6-299">Als Nächstes den Code im Ereignishandler auswählen aktualisieren, sodass er verwendet den `StartRowIndex` und `MaximumRows` Eigenschaften anstelle der hartcodierten Werte von 0 und 5:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="5bcc6-300">An diesem Punkt zeigt die Seite immer noch nur die ersten fünf Datensätze.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="5bcc6-301">Allerdings mit den folgenden Eigenschaften vorhanden, es erneut bereit, um die Paging-Schnittstelle zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="5bcc6-302">Hinzufügen von Paging-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="5bcc6-302">Adding the Paging Interface</span></span>

<span data-ttu-id="5bcc6-303">Let-s verwenden, die die gleichen, zurück und Weiter, die zuletzt paging Schnittstelle verwendet standardmäßig Paging beispielsweise einschließlich das Bezeichnung-Web-Steuerelement, das zeigt, an welche Seite der Daten angezeigt wird und wie viele Gesamtanzahl der Seiten vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="5bcc6-304">Fügen Sie die vier Schaltfläche Websteuerelemente und die Bezeichnung unterhalb des Repeaters hinzu.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-304">Add the four Button Web controls and Label below the Repeater.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="5bcc6-305">Erstellen Sie als Nächstes `Click` -Ereignishandlern für die vier Schaltflächen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="5bcc6-306">Wenn eine dieser Schaltflächen geklickt wird, müssen wir aktualisieren den `StartRowIndex` und binden Sie die Daten der Repeater.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="5bcc6-307">Ist der Code für die erste zurück und Weiter Schaltflächen recht einfach, aber für die letzte Schaltfläche wie feststellen wir, den Startindex für die Zeile für die letzte Seite der Daten?</span><span class="sxs-lookup"><span data-stu-id="5bcc6-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="5bcc6-308">Zum Berechnen dieser Index als auch bestimmen, ob die Schaltflächen Weiter und letzten aktiviert werden soll, müssen wir wissen, wie viele Datensätze insgesamt über ausgelagert werden können.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="5bcc6-309">Wir können dies ermitteln, durch den Aufruf der `ProductsBLL` Klasse s `TotalNumberOfProducts()` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="5bcc6-310">Let s erstellen Sie eine schreibgeschützte, auf Seitenebene-Eigenschaft, die mit dem Namen `TotalRowCount` , die die Ergebnisse zurückgibt, die `TotalNumberOfProducts()` Methode:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="5bcc6-311">Mit dieser Eigenschaft können wir nun der Zeilenindex der letzten Seite s Start bestimmen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="5bcc6-312">Insbesondere, s, das ganzzahlige Ergebnis von der `TotalRowCount` minus 1 dividiert durch `MaximumRows`multipliziert mit `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="5bcc6-313">Wir können nun die `Click` -Ereignishandlern für die vier Pagingschaltflächen Interface:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="5bcc6-314">Abschließend müssen wir die erste ' und ' Vorheriger Schaltflächen in den Paging-Schnittstelle zu deaktivieren, wenn es sich bei die erste Seite der Daten und die Schaltflächen Weiter und letzten anzeigen, wenn die letzte Seite anzeigen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="5bcc6-315">Um dies zu erreichen, fügen Sie den folgenden Code, der "ObjectDataSource"-s `Selecting` -Ereignishandler:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="5bcc6-316">Nach dem Hinzufügen dieser `Click` -Ereignishandler und den Code zum Aktivieren oder deaktivieren die Elemente der Benutzeroberfläche für Paging wird basierend auf der aktuellen Zeile startIndex, testen Sie die Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="5bcc6-317">Abbildung 15 veranschaulicht, wenn die erste Seite zuerst besuchen und werden der zurück-Schaltflächen sind deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="5bcc6-318">Klicken Sie auf Weiter die zweite Seite der Daten zeigt, während die letzte Seite auf der letzten angezeigt werden (siehe Abbildung 16 und 17).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="5bcc6-319">Beim Anzeigen von Daten der letzten Seite werden die Schaltflächen "Weiter" und "letzte deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>

<span data-ttu-id="5bcc6-320">[![Die Schaltflächen zurück und letzten sind deaktiviert, wenn die erste Seite der Produkte anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="5bcc6-321">**Abbildung 15**: Die Schaltflächen zurück und letzten sind deaktiviert, wenn die erste Seite der Produkte anzeigen ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>

<span data-ttu-id="5bcc6-322">[![Die zweite Seite des Produkte werden angezeigt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-322">[![The Second Page of Products are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="5bcc6-323">**Abbildung 16**: Die zweite Seite des Produkte angezeigt werden ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-323">**Figure 16**: The Second Page of Products are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>

<span data-ttu-id="5bcc6-324">[![Klicken Sie auf letzte zeigt die letzte Seite der Daten](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="5bcc6-325">**Abbildung 17**: Klicken Sie auf letzte zeigt die letzte Seite der Daten ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>

## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="5bcc6-326">Schritt 7: Einschließlich Unterstützung mit der benutzerdefinierten Sortierung ausgelagerten Repeater</span><span class="sxs-lookup"><span data-stu-id="5bcc6-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="5bcc6-327">Nun, da benutzerdefinierte Paginierung implementiert wurde, unterstützen wir erneut bereit, die Sortierung einschließen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="5bcc6-328">Die `ProductsBLL` Klasse s `GetProductsPagedAndSorted` Methode hat die gleiche *StartRowIndex* und *MaximumRows* Eingabeparameter als `GetProductsPaged`, jedoch ermöglicht eine zusätzliche  *SortExpression* input-Parameters.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="5bcc6-329">Verwenden der `GetProductsPagedAndSorted` aus `SortingWithCustomPaging.aspx`, müssen wir die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="5bcc6-330">Ändern Sie das "ObjectDataSource"-s `SelectMethod` Eigenschaft `GetProductsPaged` zu `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="5bcc6-331">Hinzufügen einer *SortExpression* `Parameter` Objekt, das "ObjectDataSource"-s `SelectParameters` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="5bcc6-332">Erstellen Sie eine Private, auf Seitenebene `SortExpression` -Eigenschaft, die den Wert über den Ansichtszustand der Seite s postbackübergreifend beibehalten.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="5bcc6-333">Aktualisieren Sie das "ObjectDataSource"-s `Selecting` -Ereignishandler für das Zuweisen von "ObjectDataSource" s *SortExpression* Parameter den Wert des auf Seitenebene `SortExpression` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="5bcc6-334">Erstellen Sie die Sortierung-Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-334">Create the sorting interface.</span></span>

<span data-ttu-id="5bcc6-335">Starten mit dem Aktualisieren der "ObjectDataSource"-s `SelectMethod` -Eigenschaft und das Hinzufügen einer *SortExpression* `Parameter`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="5bcc6-336">Stellen Sie sicher, dass die *SortExpression* `Parameter` s `Type` -Eigenschaftensatz auf `String`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="5bcc6-337">Nach Abschluss dieser ersten beiden Aufgaben an, sollte "ObjectDataSource" s deklarative Markup wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="5bcc6-338">Als Nächstes benötigen wir ein auf Seitenebene `SortExpression` Eigenschaft, deren Wert dem Ansichtszustand serialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="5bcc6-339">Wenn keine Sortierausdruckswert festgelegt wurde, können verwenden Sie ProductName als Standard:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-339">If no sort expression value has been set, use ProductName as the default:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="5bcc6-340">Vor dem ObjectDataSource-Steuerelement ruft die `GetProductsPagedAndSorted` Methode wir legen müssen die *SortExpression* `Parameter` auf den Wert des der `SortExpression` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="5bcc6-341">In der `Selecting` Ereignishandler, fügen Sie die folgende Codezeile hinzu:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-341">In the `Selecting` event handler, add the following line of code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="5bcc6-342">Alle diese bleibt die Sortierung-Schnittstelle implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="5bcc6-343">Wie im letzten Beispiel können Sie die s-Sortierung Schnittstelle mithilfe von drei Schaltfläche Websteuerelemente, mit denen den Benutzer zum Sortieren der Ergebnisse nach Produktname, Kategorie oder Lieferant implementiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="5bcc6-344">Erstellen Sie `Click` -Ereignishandlern für diese drei Schaltflächen-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="5bcc6-345">Im Handler, Zurücksetzen der `StartRowIndex` auf 0 (null) festgelegt die `SortExpression` auf den entsprechenden Wert ein, und binden Sie die Daten des Repeaters:</span><span class="sxs-lookup"><span data-stu-id="5bcc6-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="5bcc6-346">Alles, was, s wird es!</span><span class="sxs-lookup"><span data-stu-id="5bcc6-346">That s all there is to it!</span></span> <span data-ttu-id="5bcc6-347">Zwar gab es eine Reihe von Schritten zum Abrufen von benutzerdefiniertem Paging und Sortierung implementiert, wurden die Schritte für das Standardpaging sehr ähnlich.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="5bcc6-348">Abbildung 18 zeigt die Produkte an, beim Anzeigen der letzten Seite der Daten nach Kategorie sortiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>

<span data-ttu-id="5bcc6-349">[![Die letzte Seite der Daten, sortiert nach Kategorie wird angezeigt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="5bcc6-350">**Abbildung 18**: Die letzte Seite der Daten, sortiert nach Kategorie angezeigt ([klicken Sie, um das Bild in voller Größe anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="5bcc6-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>

> [!NOTE]
> <span data-ttu-id="5bcc6-351">In den vorherigen Beispielen, beim Sortieren von vom Lieferanten, die als Sortierausdruck Lieferantenname verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="5bcc6-352">Für die benutzerdefinierte Implementierung der Paginierung müssen wir jedoch CompanyName verwenden.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="5bcc6-353">Grund hierfür ist die gespeicherte Prozedur, die verantwortlich für das Implementieren von benutzerdefinierten Paging `GetProductsPagedAndSorted` übergibt den Sortierungsausdruck in der `ROW_NUMBER()` -Schlüsselwort, das `ROW_NUMBER()` Schlüsselwort erfordert einen Alias, sondern den tatsächlichen Spaltennamen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="5bcc6-354">Aus diesem Grund müssen wir verwenden `CompanyName` (der Name der Spalte in der `Suppliers` Tabelle) anstatt der Alias verwendet, der `SELECT` Abfrage (`SupplierName`) für den Sortierungsausdruck.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>

## <a name="summary"></a><span data-ttu-id="5bcc6-355">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="5bcc6-355">Summary</span></span>

<span data-ttu-id="5bcc6-356">Weder das DataList oder Repeater bieten integrierte Unterstützung der datenquellensortierung, aber mit ein wenig Code und eine benutzerdefinierte Sortierung-Schnittstelle, eine solche Funktionalität hinzugefügt werden kann.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="5bcc6-357">Beim Sortieren, aber kein paging zu implementieren, kann der Sortierungsausdruck angegeben werden, über die `DataSourceSelectArguments` -Objekt übergeben, in der "ObjectDataSource"-s `Select` Methode.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="5bcc6-358">Dies `DataSourceSelectArguments` s-Objekt `SortExpression` Eigenschaft kann zugewiesen werden, in das "ObjectDataSource"-s `Selecting` -Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="5bcc6-359">Um einem DataList- oder Repeater, die bereits Unterstützung der Paginierung bietet Sortierfunktionen hinzuzufügen, ist der einfachste Ansatz zum Anpassen der Business Logic Layer, um eine Methode enthalten, die einen Sortierungsausdruck akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="5bcc6-360">Diese Informationen können Sie dann im übergeben werden, über einen Parameter in der "ObjectDataSource"-s `SelectParameters`.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="5bcc6-361">Dieses Tutorial ist abgeschlossen, unsere Untersuchung der Paginierung und Sortierung mit dem DataList- und Wiederholungssteuerelement-Steuerelementen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="5bcc6-362">Unser Tutorial zum nächsten und letzten untersucht wie Vorlagen s DataList- oder Wiederholungssteuerelement Websteuerelemente Schaltfläche hinzugefügt, um einige Funktionen von benutzerdefinierten, vom Benutzer initiierte pro pro-Element bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="5bcc6-363">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="5bcc6-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="5bcc6-364">Der Autor</span><span class="sxs-lookup"><span data-stu-id="5bcc6-364">About the Author</span></span>

<span data-ttu-id="5bcc6-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor von sieben Büchern zu ASP/ASP.NET und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5bcc6-366">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5bcc6-367">Sein neueste Buch wird [*Sams Schulen selbst ASP.NET 2.0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="5bcc6-368">Er ist unter [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="5bcc6-369">oder über seinen Blog finden Sie unter [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="5bcc6-369">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="5bcc6-370">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="5bcc6-370">Special Thanks To</span></span>

<span data-ttu-id="5bcc6-371">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-371">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5bcc6-372">Führendes Prüfer für dieses Tutorial ist David Suru.</span><span class="sxs-lookup"><span data-stu-id="5bcc6-372">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="5bcc6-373">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="5bcc6-373">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5bcc6-374">Wenn dies der Fall ist, löschen Sie mir eine Linie an [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-374">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5bcc6-375">[Zurück](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
> [Weiter](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5bcc6-375">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
