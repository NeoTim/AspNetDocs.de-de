---
uid: web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
title: Sortieren von Daten in einem DataList-oder RepeaterC#-Steuerelement () | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial wird erläutert, wie Sie Sortierungs Unterstützung in DataList und Repeater einschließen und wie Sie einen DataList-oder Repeater-Wert erstellen, dessen Daten...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: f52c302a-1b7c-46fe-8a13-8412c95cbf6d
msc.legacyurl: /web-forms/overview/data-access/paging-and-sorting-with-the-datalist-and-repeater/sorting-data-in-a-datalist-or-repeater-control-cs
msc.type: authoredcontent
ms.openlocfilehash: 66a09c637d33c812b39e0ce85a552bd71665a2e1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78502953"
---
# <a name="sorting-data-in-a-datalist-or-repeater-control-c"></a><span data-ttu-id="9068b-103">Sortieren von Berichtsdaten in einem DataList- oder Wiederholungssteuerelement (C#)</span><span class="sxs-lookup"><span data-stu-id="9068b-103">Sorting Data in a DataList or Repeater Control (C#)</span></span>

<span data-ttu-id="9068b-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9068b-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9068b-105">[Beispiel-app herunterladen](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) oder [PDF herunterladen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9068b-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_45_CS.exe) or [Download PDF](sorting-data-in-a-datalist-or-repeater-control-cs/_static/datatutorial45cs1.pdf)</span></span>

> <span data-ttu-id="9068b-106">In diesem Tutorial wird erläutert, wie Sie Sortierungs Unterstützung in DataList und Repeater einschließen und wie Sie einen DataList-oder Repeater-Wert erstellen, dessen Daten per Pager und Sortierung sortiert werden können.</span><span class="sxs-lookup"><span data-stu-id="9068b-106">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="introduction"></a><span data-ttu-id="9068b-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="9068b-107">Introduction</span></span>

<span data-ttu-id="9068b-108">Im [vorherigen Tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) wurde untersucht, wie einem DataList Paging-Unterstützung hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-108">In the [previous tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to add paging support to a DataList.</span></span> <span data-ttu-id="9068b-109">Wir haben eine neue Methode in der `ProductsBLL`-Klasse (`GetProductsAsPagedDataSource`) erstellt, die ein `PagedDataSource`-Objekt zurückgegeben hat.</span><span class="sxs-lookup"><span data-stu-id="9068b-109">We created a new method in the `ProductsBLL` class (`GetProductsAsPagedDataSource`) that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="9068b-110">Wenn Sie an einen DataList-oder Repeater gebunden ist, zeigt der DataList oder der Repeater nur die angeforderte Datenseite an.</span><span class="sxs-lookup"><span data-stu-id="9068b-110">When bound to a DataList or Repeater, the DataList or Repeater would display just the requested page of data.</span></span> <span data-ttu-id="9068b-111">Diese Methode ähnelt der Vorgehensweise, die intern von den Steuerelementen GridView, DetailsView und FormView verwendet wird, um Ihre integrierte Standard-Paging-Funktionalität bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="9068b-111">This technique is similar to what is used internally by the GridView, DetailsView, and FormView controls to provide their built-in default paging functionality.</span></span>

<span data-ttu-id="9068b-112">Zusätzlich zur Unterstützung der Paginierung bietet die GridView auch die Standard Sortier Unterstützung.</span><span class="sxs-lookup"><span data-stu-id="9068b-112">In addition to offering paging support, the GridView also includes out of the box sorting support.</span></span> <span data-ttu-id="9068b-113">Weder der DataList noch der Repeater bietet integrierte Sortierfunktionen. Sortierungs Features können jedoch mit etwas Code hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-113">Neither the DataList nor Repeater provides built-in sorting functionality; however, sorting features can be added with a bit of code.</span></span> <span data-ttu-id="9068b-114">In diesem Tutorial wird erläutert, wie Sie Sortierungs Unterstützung in DataList und Repeater einschließen und wie Sie einen DataList-oder Repeater-Wert erstellen, dessen Daten per Pager und Sortierung sortiert werden können.</span><span class="sxs-lookup"><span data-stu-id="9068b-114">In this tutorial we'll examine how to include sorting support in the DataList and Repeater, as well as how to construct a DataList or Repeater whose data can be paged and sorted.</span></span>

## <a name="a-review-of-sorting"></a><span data-ttu-id="9068b-115">Eine Überprüfung der Sortierung</span><span class="sxs-lookup"><span data-stu-id="9068b-115">A Review of Sorting</span></span>

<span data-ttu-id="9068b-116">Wie wir im Tutorial zum [Paging und Sortieren von Berichtsdaten](../paging-and-sorting/paging-and-sorting-report-data-cs.md) gesehen haben, bietet das GridView-Steuerelement standardmäßig eine Sortier Unterstützung.</span><span class="sxs-lookup"><span data-stu-id="9068b-116">As we saw in the [Paging and Sorting Report Data](../paging-and-sorting/paging-and-sorting-report-data-cs.md) tutorial, the GridView control provides out of the box sorting support.</span></span> <span data-ttu-id="9068b-117">Jedes GridView-Feld kann über ein zugeordnetes `SortExpression`verfügen, das das Datenfeld angibt, nach dem die Daten sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-117">Each GridView field can have an associated `SortExpression`, which indicates the data field by which to sort the data.</span></span> <span data-ttu-id="9068b-118">Wenn die GridView s `AllowSorting`-Eigenschaft auf `true`festgelegt ist, wird jedes GridView-Feld mit einem `SortExpression`-Eigenschafts Wert als LinkButton gerendert.</span><span class="sxs-lookup"><span data-stu-id="9068b-118">When the GridView s `AllowSorting` property is set to `true`, each GridView field that has a `SortExpression` property value has its header rendered as a LinkButton.</span></span> <span data-ttu-id="9068b-119">Wenn ein Benutzer auf einen bestimmten GridView Field s-Header klickt, wird ein Postback ausgeführt, und die Daten werden entsprechend den angeklickten Feld-s-`SortExpression`sortiert.</span><span class="sxs-lookup"><span data-stu-id="9068b-119">When a user clicks a particular GridView field s header, a postback occurs and the data is sorted according to the clicked field s `SortExpression`.</span></span>

<span data-ttu-id="9068b-120">Das GridView-Steuerelement verfügt auch über eine `SortExpression`-Eigenschaft, die die `SortExpression` des GridView-Felds speichert, nach dem die Daten sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-120">The GridView control has a `SortExpression` property as well, which stores the `SortExpression` of the GridView field the data is sorted by.</span></span> <span data-ttu-id="9068b-121">Außerdem gibt eine `SortDirection`-Eigenschaft an, ob die Daten in aufsteigender oder absteigender Reihenfolge sortiert werden sollen (wenn ein Benutzer zweimal nacheinander auf einen bestimmten GridView Field s-Header Link klickt, wird die Sortierreihenfolge geändert).</span><span class="sxs-lookup"><span data-stu-id="9068b-121">Additionally, a `SortDirection` property indicates whether the data is to be sorted in ascending or descending order (if a user clicks a particular GridView field s header link twice in succession, the sort order is toggled).</span></span>

<span data-ttu-id="9068b-122">Wenn das GridView-Steuerelement an das Datenquellen-Steuerelement gebunden ist, übergibt es seine `SortExpression`-und `SortDirection` Eigenschaften an das Datenquellen-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="9068b-122">When the GridView is bound to its data source control, it hands off its `SortExpression` and `SortDirection` properties to the data source control.</span></span> <span data-ttu-id="9068b-123">Das Datenquellen-Steuerelement ruft die Daten ab und sortiert Sie dann entsprechend der angegebenen `SortExpression` und `SortDirection` Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="9068b-123">The data source control retrieves the data and then sorts it according to the supplied `SortExpression` and `SortDirection` properties.</span></span> <span data-ttu-id="9068b-124">Nachdem die Daten sortiert wurden, wird Sie vom Datenquellen-Steuerelement an die GridView-Sicht zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9068b-124">After sorting the data, the data source control returns it to the GridView.</span></span>

<span data-ttu-id="9068b-125">Um diese Funktionalität mit den DataList-oder Repeater-Steuerelementen zu replizieren, müssen folgende Schritte durch</span><span class="sxs-lookup"><span data-stu-id="9068b-125">To replicate this functionality with the DataList or Repeater controls, we must:</span></span>

- <span data-ttu-id="9068b-126">Erstellen einer Sortierungs Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="9068b-126">Create a sorting interface</span></span>
- <span data-ttu-id="9068b-127">Speichern Sie das Datenfeld, nach dem sortiert werden soll, und ob in aufsteigender oder absteigender Reihenfolge sortiert</span><span class="sxs-lookup"><span data-stu-id="9068b-127">Remember the data field to sort by and whether to sort in ascending or descending order</span></span>
- <span data-ttu-id="9068b-128">Anweisen von ObjectDataSource zum Sortieren der Daten nach einem bestimmten Datenfeld</span><span class="sxs-lookup"><span data-stu-id="9068b-128">Instruct the ObjectDataSource to sort the data by a particular data field</span></span>

<span data-ttu-id="9068b-129">Wir behandeln diese drei Aufgaben in den Schritten 3 und 4.</span><span class="sxs-lookup"><span data-stu-id="9068b-129">We'll tackle these three tasks in steps 3 and 4.</span></span> <span data-ttu-id="9068b-130">Im folgenden wird erläutert, wie Sie Paging-und Sortierungs Unterstützung in einen DataList-oder Repeater einschließen.</span><span class="sxs-lookup"><span data-stu-id="9068b-130">Following that, we'll examine how to include both paging and sorting support in a DataList or Repeater.</span></span>

## <a name="step-2-displaying-the-products-in-a-repeater"></a><span data-ttu-id="9068b-131">Schritt 2: Anzeigen der Produkte in einem Wiederholungs Modul</span><span class="sxs-lookup"><span data-stu-id="9068b-131">Step 2: Displaying the Products in a Repeater</span></span>

<span data-ttu-id="9068b-132">Bevor wir uns mit der Implementierung von Sortierungs bezogenen Funktionen beschäftigen, sollten Sie zunächst die Produkte in einem Wiederholungs Steuerelement auflisten.</span><span class="sxs-lookup"><span data-stu-id="9068b-132">Before we worry about implementing any of the sorting-related functionality, let s start by listing the products in a Repeater control.</span></span> <span data-ttu-id="9068b-133">Öffnen Sie zunächst die Seite `Sorting.aspx` im Ordner `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="9068b-133">Start by opening the `Sorting.aspx` page in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="9068b-134">Fügen Sie der Webseite ein Repeater-Steuerelement hinzu, und legen Sie dessen `ID`-Eigenschaft auf `SortableProducts`fest.</span><span class="sxs-lookup"><span data-stu-id="9068b-134">Add a Repeater control to the web page, setting its `ID` property to `SortableProducts`.</span></span> <span data-ttu-id="9068b-135">Erstellen Sie im smarttagwiederholungs-Tag eine neue ObjectDataSource mit dem Namen `ProductsDataSource`, und konfigurieren Sie Sie so, dass Daten aus der `ProductsBLL` Class s `GetProducts()`-Methode abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-135">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource` and configure it to retrieve data from the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="9068b-136">Wählen Sie auf den Registerkarten einfügen, aktualisieren und löschen in den Dropdown Listen die Option (keine) aus.</span><span class="sxs-lookup"><span data-stu-id="9068b-136">Select the (None) option from the drop-down lists in the INSERT, UPDATE, and DELETE tabs.</span></span>

<span data-ttu-id="9068b-137">[![erstellen Sie eine ObjectDataSource, und konfigurieren Sie Sie für die Verwendung der getproductaspgeddatasource ()-Methode.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-137">[![Create an ObjectDataSource and Configure it to Use the GetProductsAsPagedDataSource() Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image2.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image1.png)</span></span>

<span data-ttu-id="9068b-138">**Abbildung 1**: Erstellen einer ObjectDataSource und Konfigurieren der Methode für die Verwendung der `GetProductsAsPagedDataSource()`-Methode ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-138">**Figure 1**: Create an ObjectDataSource and Configure it to Use the `GetProductsAsPagedDataSource()` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image3.png))</span></span>

<span data-ttu-id="9068b-139">[![die Dropdown Listen auf den Registerkarten aktualisieren, einfügen und löschen auf (keine) festgelegt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-139">[![Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image5.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image4.png)</span></span>

<span data-ttu-id="9068b-140">**Abbildung 2**: Festlegen der Dropdown Listen auf den Registerkarten "Aktualisieren", "Einfügen" und "Löschen" auf "(keine)" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-140">**Figure 2**: Set the Drop-Down Lists in the UPDATE, INSERT, and DELETE tabs to (None) ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image6.png))</span></span>

<span data-ttu-id="9068b-141">Anders als beim DataList erstellt Visual Studio nicht automatisch eine `ItemTemplate` für das Repeater-Steuerelement, nachdem es an eine Datenquelle gebunden wurde.</span><span class="sxs-lookup"><span data-stu-id="9068b-141">Unlike with the DataList, Visual Studio does not automatically create an `ItemTemplate` for the Repeater control after binding it to a data source.</span></span> <span data-ttu-id="9068b-142">Außerdem müssen wir diese `ItemTemplate` deklarativ hinzufügen, da das Smarttags des Repeater-Steuer Elements nicht über die Option Vorlagen bearbeiten in den DataList s verfügt.</span><span class="sxs-lookup"><span data-stu-id="9068b-142">Furthermore, we must add this `ItemTemplate` declaratively, as the Repeater control s smart tag lacks the Edit Templates option found in the DataList s.</span></span> <span data-ttu-id="9068b-143">Verwenden Sie den gleichen `ItemTemplate` aus dem vorherigen Tutorial, in dem der Name, Lieferant und die Kategorie des Produkts angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-143">Let s use the same `ItemTemplate` from the previous tutorial, which displayed the product s name, supplier, and category.</span></span>

<span data-ttu-id="9068b-144">Nachdem Sie die `ItemTemplate`hinzugefügt haben, sollten das deklarative Markup für Repeater und ObjectDataSource s in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="9068b-144">After adding the `ItemTemplate`, the Repeater and ObjectDataSource s declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample1.aspx)]

<span data-ttu-id="9068b-145">In Abbildung 3 wird diese Seite angezeigt, wenn Sie in einem Browser angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-145">Figure 3 shows this page when viewed through a browser.</span></span>

<span data-ttu-id="9068b-146">[![werden die Namen, der Lieferant und die Kategorie der einzelnen Produkte angezeigt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-146">[![Each Product s Name, Supplier, and Category is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image8.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image7.png)</span></span>

<span data-ttu-id="9068b-147">**Abbildung 3**: jeder Produkt Name, Lieferant und Kategorie wird angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-147">**Figure 3**: Each Product s Name, Supplier, and Category is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image9.png))</span></span>

## <a name="step-3-instructing-the-objectdatasource-to-sort-the-data"></a><span data-ttu-id="9068b-148">Schritt 3: anweisen von ObjectDataSource zum Sortieren der Daten</span><span class="sxs-lookup"><span data-stu-id="9068b-148">Step 3: Instructing the ObjectDataSource to Sort the Data</span></span>

<span data-ttu-id="9068b-149">Um die im Wiederholungs Modul angezeigten Daten zu sortieren, muss die ObjectDataSource des Sortier Ausdrucks, mit dem die Daten sortiert werden sollen, informiert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-149">To sort the data displayed in the Repeater, we need to inform the ObjectDataSource of the sort expression by which the data should be sorted.</span></span> <span data-ttu-id="9068b-150">Bevor die ObjectDataSource Ihre Daten abruft, wird zuerst das [`Selecting`-Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx)ausgelöst, das uns die Möglichkeit bietet, einen Sortierungs Ausdruck anzugeben.</span><span class="sxs-lookup"><span data-stu-id="9068b-150">Before the ObjectDataSource retrieves its data, it first fires its [`Selecting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.selecting.aspx), which provides an opportunity for us to specify a sort expression.</span></span> <span data-ttu-id="9068b-151">Dem `Selecting`-Ereignishandler wird ein Objekt vom Typ " [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx)" übermittelt, das eine Eigenschaft mit dem Namen [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) vom Typ [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx)aufweist.</span><span class="sxs-lookup"><span data-stu-id="9068b-151">The `Selecting` event handler is passed an object of type [`ObjectDataSourceSelectingEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.aspx), which has a property named [`Arguments`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasourceselectingeventargs.arguments.aspx) of type [`DataSourceSelectArguments`](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.aspx).</span></span> <span data-ttu-id="9068b-152">Die `DataSourceSelectArguments`-Klasse ist so konzipiert, dass Sie datenbezogene Anforderungen von einem Consumer von Daten an das Datenquellen-Steuerelement übergibt und eine [`SortExpression`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx)enthält.</span><span class="sxs-lookup"><span data-stu-id="9068b-152">The `DataSourceSelectArguments` class is designed to pass data-related requests from a consumer of data to the data source control, and includes a [`SortExpression` property](https://msdn.microsoft.com/library/system.web.ui.datasourceselectarguments.sortexpression.aspx).</span></span>

<span data-ttu-id="9068b-153">Wenn Sie Sortier Informationen von der ASP.NET-Seite an ObjectDataSource übergeben möchten, erstellen Sie einen Ereignishandler für das `Selecting`-Ereignis, und verwenden Sie den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="9068b-153">To pass sorting information from the ASP.NET page to the ObjectDataSource, create an event handler for the `Selecting` event and use the following code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample2.cs)]

<span data-ttu-id="9068b-154">Dem *SortExpression* -Wert sollte der Name des Daten Felds zugewiesen werden, nach dem die Daten sortiert werden sollen (z. b. ProductName).</span><span class="sxs-lookup"><span data-stu-id="9068b-154">The *sortExpression* value should be assigned the name of the data field to sort the data by (such as ProductName ).</span></span> <span data-ttu-id="9068b-155">Es ist keine Eigenschaft für die Sortierrichtung vorhanden. Wenn Sie also die Daten in absteigender Reihenfolge sortieren möchten, fügen Sie die Zeichenfolge "ensc" an den *SortExpression* -Wert an (z. b. ProductName-Debug).</span><span class="sxs-lookup"><span data-stu-id="9068b-155">There is no sort direction-related property, so if you want to sort the data in descending order, append the string DESC to the *sortExpression* value (such as ProductName DESC ).</span></span>

<span data-ttu-id="9068b-156">Probieren Sie einige unterschiedliche hart codierte Werte für *SortExpression* aus, und testen Sie die Ergebnisse in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="9068b-156">Go ahead and try some different hard-coded values for *sortExpression* and test the results in a browser.</span></span> <span data-ttu-id="9068b-157">Wie in Abbildung 4 gezeigt, werden die Produkte bei Verwendung von ProductName Debug als *SortExpression*nach Ihrem Namen in umgekehrter alphabetischer Reihenfolge sortiert.</span><span class="sxs-lookup"><span data-stu-id="9068b-157">As Figure 4 shows, when using ProductName DESC as the *sortExpression*, the products are sorted by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="9068b-158">[![werden die Produkte nach Ihrem Namen in umgekehrter alphabetischer Reihenfolge sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-158">[![The Products are Sorted by their Name in Reverse Alphabetical Order](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image11.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image10.png)</span></span>

<span data-ttu-id="9068b-159">**Abbildung 4**: die Produkte werden nach Ihrem Namen in umgekehrter alphabetischer Reihenfolge sortiert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-159">**Figure 4**: The Products are Sorted by their Name in Reverse Alphabetical Order ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image12.png))</span></span>

## <a name="step-4-creating-the-sorting-interface-and-remembering-the-sort-expression-and-direction"></a><span data-ttu-id="9068b-160">Schritt 4: Erstellen der Sortierungs Schnittstelle und Speichern des Sortier Ausdrucks und der Richtung</span><span class="sxs-lookup"><span data-stu-id="9068b-160">Step 4: Creating the Sorting Interface and Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="9068b-161">Durch das Aktivieren der Sortier Unterstützung in der GridView wird jeder Header Text der sortierbaren Felder in einen LinkButton konvertiert, bei dem die Daten nach dem Klicken entsprechend sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-161">Turning on sorting support in the GridView converts each sortable field s header text into a LinkButton that, when clicked, sorts the data accordingly.</span></span> <span data-ttu-id="9068b-162">Eine solche Sortier Schnittstelle eignet sich für die GridView, bei der Ihre Daten in Spalten sauber angeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-162">Such a sorting interface makes sense for the GridView, where its data is neatly laid out in columns.</span></span> <span data-ttu-id="9068b-163">Für die Steuerelemente DataList und Repeater wird jedoch eine andere Sortier Schnittstelle benötigt.</span><span class="sxs-lookup"><span data-stu-id="9068b-163">For the DataList and Repeater controls, however, a different sorting interface is needed.</span></span> <span data-ttu-id="9068b-164">Eine allgemeine Sortier Schnittstelle für eine Liste von Daten (im Gegensatz zu einem Datenraster) ist eine Dropdown Liste, die die Felder bereitstellt, nach denen die Daten sortiert werden können.</span><span class="sxs-lookup"><span data-stu-id="9068b-164">A common sorting interface for a list of data (as opposed to a grid of data), is a drop-down list that provides the fields by which the data can be sorted.</span></span> <span data-ttu-id="9068b-165">Wir implementieren eine solche Schnittstelle für dieses Tutorial.</span><span class="sxs-lookup"><span data-stu-id="9068b-165">Let s implement such an interface for this tutorial.</span></span>

<span data-ttu-id="9068b-166">Fügen Sie ein Dropdown List-websteuer Element oberhalb der `SortableProducts` Repeater hinzu, und legen Sie dessen `ID`-Eigenschaft auf `SortBy`fest.</span><span class="sxs-lookup"><span data-stu-id="9068b-166">Add a DropDownList Web control above the `SortableProducts` Repeater and set its `ID` property to `SortBy`.</span></span> <span data-ttu-id="9068b-167">Klicken Sie im Eigenschaftenfenster auf die Auslassungs Punkte in der `Items`-Eigenschaft, um den ListItem-Auflistungs-Editor anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="9068b-167">From the Properties window, click the ellipses in the `Items` property to bring up the ListItem Collection Editor.</span></span> <span data-ttu-id="9068b-168">Fügen Sie `ListItem` s hinzu, um die Daten nach den Feldern `ProductName`, `CategoryName`und `SupplierName` zu sortieren.</span><span class="sxs-lookup"><span data-stu-id="9068b-168">Add `ListItem` s to sort the data by the `ProductName`, `CategoryName`, and `SupplierName` fields.</span></span> <span data-ttu-id="9068b-169">Fügen Sie außerdem eine `ListItem` hinzu, um die Produkte nach Ihrem Namen in umgekehrter alphabetischer Reihenfolge zu sortieren.</span><span class="sxs-lookup"><span data-stu-id="9068b-169">Also add a `ListItem` to sort the products by their name in reverse alphabetical order.</span></span>

<span data-ttu-id="9068b-170">Die `ListItem` `Text` Eigenschaften können auf einen beliebigen Wert (z. b. Name) festgelegt werden, die `Value` Eigenschaften müssen jedoch auf den Namen des Daten Felds (z. b. ProductName) festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-170">The `ListItem` `Text` properties can be set to any value (such as Name ), but the `Value` properties must be set to the name of the data field (such as ProductName ).</span></span> <span data-ttu-id="9068b-171">Um die Ergebnisse in absteigender Reihenfolge zu sortieren, fügen Sie die Zeichenfolge DESC an den Daten Feldnamen an, z. b. ProductName DESC.</span><span class="sxs-lookup"><span data-stu-id="9068b-171">To sort the results in descending order, append the string DESC to the data field name, like ProductName DESC .</span></span>

![Fügen Sie für jedes sortierbare Daten Feld ein ListItem-Element hinzu.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image13.png)

<span data-ttu-id="9068b-173">**Abbildung 5**: Hinzufügen eines `ListItem` für die einzelnen sortierbaren Datenfelder</span><span class="sxs-lookup"><span data-stu-id="9068b-173">**Figure 5**: Add a `ListItem` for Each of the Sortable Data Fields</span></span>

<span data-ttu-id="9068b-174">Fügen Sie schließlich rechts neben der Dropdown Liste ein Schaltflächen-websteuer Element hinzu.</span><span class="sxs-lookup"><span data-stu-id="9068b-174">Finally, add a Button Web control to the right of the DropDownList.</span></span> <span data-ttu-id="9068b-175">Legen Sie den `ID` auf `RefreshRepeater` und dessen `Text` Eigenschaft auf Aktualisieren fest.</span><span class="sxs-lookup"><span data-stu-id="9068b-175">Set its `ID` to `RefreshRepeater` and its `Text` property to Refresh .</span></span>

<span data-ttu-id="9068b-176">Nachdem Sie die `ListItem` s erstellt und die Schaltfläche Aktualisieren hinzugefügt haben, sollten die deklarative Syntax DropDownList und Button s in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="9068b-176">After creating the `ListItem` s and adding the Refresh button, the DropDownList and Button s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample3.aspx)]

<span data-ttu-id="9068b-177">Nachdem die DropDownList-Sortierung fertiggestellt wurde, müssen wir den ObjectDataSource s-`Selecting` Ereignishandler aktualisieren, sodass die ausgewählte `SortBy``ListItem` s-Eigenschaft `Value` anstelle eines hart codierten Sortier Ausdrucks verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-177">With the sorting DropDownList complete, we next need to update the ObjectDataSource s `Selecting` event handler so that it uses the selected `SortBy``ListItem` s `Value` property as opposed to a hard-coded sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample4.cs)]

<span data-ttu-id="9068b-178">An diesem Punkt werden die Produkte zunächst nach dem `ProductName` Datenfeld sortiert, da die `SortBy` `ListItem` standardmäßig ausgewählt ist (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="9068b-178">At this point when first visiting the page the products will initially be sorted by the `ProductName` data field, as it s the `SortBy` `ListItem` selected by default (see Figure 6).</span></span> <span data-ttu-id="9068b-179">Wenn Sie eine andere Sortieroption auswählen, z. b. Kategorie, und auf Aktualisieren klicken, wird ein Postback ausgelöst und die Daten nach dem Kategorienamen erneut sortiert, wie in Abbildung 7 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="9068b-179">Selecting a different sorting option such as Category and clicking Refresh will cause a postback and re-sort the data by the category name, as Figure 7 shows.</span></span>

<span data-ttu-id="9068b-180">[![werden die Produkte anfänglich nach Ihrem Namen sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-180">[![The Products are Initially Sorted by their Name](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image15.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image14.png)</span></span>

<span data-ttu-id="9068b-181">**Abbildung 6**: die Produkte werden anfänglich nach Ihrem Namen sortiert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-181">**Figure 6**: The Products are Initially Sorted by their Name ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image16.png))</span></span>

<span data-ttu-id="9068b-182">[![die Produkte nach Kategorie sortiert](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-182">[![The Products are Now Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image18.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image17.png)</span></span>

<span data-ttu-id="9068b-183">**Abbildung 7**: die Produkte sind jetzt nach Kategorie sortiert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-183">**Figure 7**: The Products are Now Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image19.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9068b-184">Wenn Sie auf die Schaltfläche "Aktualisieren" klicken, werden die Daten automatisch neu sortiert, da der Ansichts Zustand der Wiederholungsart deaktiviert wurde, sodass der Repeater bei jedem Postback eine erneute Bindung an seine Datenquelle bewirkt hat.</span><span class="sxs-lookup"><span data-stu-id="9068b-184">Clicking the Refresh button causes the data to automatically be re-sorted because the Repeater s view state has been disabled, thereby causing the Repeater to rebind to its data source on every postback.</span></span> <span data-ttu-id="9068b-185">Wenn Sie den Ansichts Zustand der Wiederholungs-s aktiviert haben, hat das Ändern der Dropdown Liste Sortierung keine Auswirkung auf die Sortierreihenfolge.</span><span class="sxs-lookup"><span data-stu-id="9068b-185">If you ve left the Repeater s view state enabled, changing the sorting drop-down list won't have any affect on the sort order.</span></span> <span data-ttu-id="9068b-186">Um dieses Problem zu beheben, erstellen Sie einen Ereignishandler für die Schaltfläche "Aktualisieren" `Click` Ereignis, und binden Sie den Repeater erneut an die zugehörige Datenquelle (durch Aufrufen der Repeater s `DataBind()`-Methode).</span><span class="sxs-lookup"><span data-stu-id="9068b-186">To remedy this, create an event handler for the Refresh Button s `Click` event and rebind the Repeater to its data source (by calling the Repeater s `DataBind()` method).</span></span>

## <a name="remembering-the-sort-expression-and-direction"></a><span data-ttu-id="9068b-187">Speichern des Sortier Ausdrucks und der Richtung</span><span class="sxs-lookup"><span data-stu-id="9068b-187">Remembering the Sort Expression and Direction</span></span>

<span data-ttu-id="9068b-188">Beim Erstellen eines sortierbaren DataList-oder Wiederholungs Moduls auf einer Seite, auf der nicht sortierende Postbacks auftreten können, ist es zwingend erforderlich, dass der Sortier Ausdruck und die Richtung über Postbacks hinweg gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-188">When creating a sortable DataList or Repeater on a page where non-sort related postbacks may occur, it s imperative that the sort expression and direction be remembered across postbacks.</span></span> <span data-ttu-id="9068b-189">Stellen Sie sich beispielsweise vor, dass wir den Repeater in diesem Tutorial aktualisiert haben, um die Schaltfläche "Löschen" für jedes Produkt einzuschließen</span><span class="sxs-lookup"><span data-stu-id="9068b-189">For example, imagine that we updated the Repeater in this tutorial to include a Delete button with each product.</span></span> <span data-ttu-id="9068b-190">Wenn der Benutzer auf die Schaltfläche "Löschen" klickt, führen wir Code aus, um das ausgewählte Produkt zu löschen, und binden dann die Daten erneut an den Wiederholungs-.</span><span class="sxs-lookup"><span data-stu-id="9068b-190">When the user clicks the Delete button we d run some code to delete the selected product and then rebind the data to the Repeater.</span></span> <span data-ttu-id="9068b-191">Wenn die Sortier Details nicht über Postbacks hinweg beibehalten werden, werden die auf dem Bildschirm angezeigten Daten auf die ursprüngliche Sortierreihenfolge zurückgesetzt.</span><span class="sxs-lookup"><span data-stu-id="9068b-191">If the sort details are not persisted across postback, the data displayed on screen will revert to the original sort order.</span></span>

<span data-ttu-id="9068b-192">In diesem Tutorial speichert DropDownList den Sortier Ausdruck und die Richtung implizit im Ansichts Zustand für uns.</span><span class="sxs-lookup"><span data-stu-id="9068b-192">For this tutorial, the DropDownList implicitly saves the sort expression and direction in its view state for us.</span></span> <span data-ttu-id="9068b-193">Wenn wir eine andere Sortier Schnittstelle verwendet haben, z. b. LinkButtons, die die verschiedenen Sortieroptionen bereitstellten, die wir für die Sortierreihenfolge in den Postbacks benötigen.</span><span class="sxs-lookup"><span data-stu-id="9068b-193">If we were using a different sorting interface one with, say, LinkButtons that provided the various sorting options we d need to take care to remember the sort order across postbacks.</span></span> <span data-ttu-id="9068b-194">Dies kann erreicht werden, indem die Sortierparameter im Ansichts Zustand der Seite gespeichert werden, indem der Sort-Parameter in QueryString oder eine andere Zustands persistenztechnik eingeschlossen wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-194">This could be accomplished by storing the sorting parameters in the page s view state, by including the sort parameter in the querystring, or through some other state persistence technique.</span></span>

<span data-ttu-id="9068b-195">In den zukünftigen Beispielen in diesem Tutorial wird erläutert, wie die Sortierungs Details im Ansichts Zustand der Seite persistent gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-195">Future examples in this tutorial explore how to persist the sorting details in the page s view state.</span></span>

## <a name="step-5-adding-sorting-support-to-a-datalist-that-uses-default-paging"></a><span data-ttu-id="9068b-196">Schritt 5: Hinzufügen von Sortierungs Unterstützung zu einem DataList, der Standard-Paging verwendet</span><span class="sxs-lookup"><span data-stu-id="9068b-196">Step 5: Adding Sorting Support to a DataList that Uses Default Paging</span></span>

<span data-ttu-id="9068b-197">Im [vorherigen Tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) wurde erläutert, wie standardpaginierung mit einem DataList implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-197">In the [preceding tutorial](paging-report-data-in-a-datalist-or-repeater-control-cs.md) we examined how to implement default paging with a DataList.</span></span> <span data-ttu-id="9068b-198">Lassen Sie das vorherige Beispiel erweitern, um die Möglichkeit zum Sortieren der auslagerenen Daten einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="9068b-198">Let s extend this previous example to include the ability to sort the paged data.</span></span> <span data-ttu-id="9068b-199">Öffnen Sie zunächst die Seiten `SortingWithDefaultPaging.aspx` und `Paging.aspx` im Ordner `PagingSortingDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="9068b-199">Start by opening the `SortingWithDefaultPaging.aspx` and `Paging.aspx` pages in the `PagingSortingDataListRepeater` folder.</span></span> <span data-ttu-id="9068b-200">Klicken Sie auf der Seite `Paging.aspx` auf die Schaltfläche Quelle, um das deklarative Markup der Seite anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="9068b-200">From the `Paging.aspx` page, click on the Source button to view the page s declarative markup.</span></span> <span data-ttu-id="9068b-201">Kopieren Sie den markierten Text (siehe Abbildung 8), und fügen Sie ihn in das deklarative Markup der `SortingWithDefaultPaging.aspx` zwischen den `<asp:Content>`-Tags ein.</span><span class="sxs-lookup"><span data-stu-id="9068b-201">Copy the selected text (see Figure 8) and paste it into the declarative markup of `SortingWithDefaultPaging.aspx` between the `<asp:Content>` tags.</span></span>

<span data-ttu-id="9068b-202">[![Replizieren des deklarativen Markups in den &lt;ASP: Content&gt; Tags von "Paging. aspx" in "sortingwithdefaultpaging. aspx".](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-202">[![Replicate the Declarative Markup in the &lt;asp:Content&gt; Tags from Paging.aspx to SortingWithDefaultPaging.aspx](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image21.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image20.png)</span></span>

<span data-ttu-id="9068b-203">**Abbildung 8**: Replizieren des deklarativen Markups in den `<asp:Content>` Tags von `Paging.aspx` auf `SortingWithDefaultPaging.aspx` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-203">**Figure 8**: Replicate the Declarative Markup in the `<asp:Content>` Tags from `Paging.aspx` to `SortingWithDefaultPaging.aspx` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image22.png))</span></span>

<span data-ttu-id="9068b-204">Nach dem Kopieren des deklarativen Markups kopieren Sie die Methoden und Eigenschaften in der Code Behind-Klasse der `Paging.aspx` Page s in die Code Behind-Klasse für `SortingWithDefaultPaging.aspx`.</span><span class="sxs-lookup"><span data-stu-id="9068b-204">After copying the declarative markup, copy the methods and properties in the `Paging.aspx` page s code-behind class to the code-behind class for `SortingWithDefaultPaging.aspx`.</span></span> <span data-ttu-id="9068b-205">Nehmen Sie als nächstes einen Moment Zeit, um die `SortingWithDefaultPaging.aspx` Seite in einem Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="9068b-205">Next, take a moment to view the `SortingWithDefaultPaging.aspx` page in a browser.</span></span> <span data-ttu-id="9068b-206">Es sollte die gleiche Funktionalität und Darstellung wie `Paging.aspx`aufweisen.</span><span class="sxs-lookup"><span data-stu-id="9068b-206">It should exhibit the same functionality and appearance as `Paging.aspx`.</span></span>

## <a name="enhancing-productsbll-to-include-a-default-paging-and-sorting-method"></a><span data-ttu-id="9068b-207">Erweitern von productbll um eine standardmäßige Paging-und Sortierungs Methode</span><span class="sxs-lookup"><span data-stu-id="9068b-207">Enhancing ProductsBLL to Include a Default Paging and Sorting Method</span></span>

<span data-ttu-id="9068b-208">Im vorherigen Tutorial haben wir eine `GetProductsAsPagedDataSource(pageIndex, pageSize)` Methode in der `ProductsBLL`-Klasse erstellt, die ein `PagedDataSource`-Objekt zurückgegeben hat.</span><span class="sxs-lookup"><span data-stu-id="9068b-208">In the previous tutorial we created a `GetProductsAsPagedDataSource(pageIndex, pageSize)` method in the `ProductsBLL` class that returned a `PagedDataSource` object.</span></span> <span data-ttu-id="9068b-209">Dieses `PagedDataSource` Objekt wurde mit *allen* Produkten aufgefüllt (über die BLL s `GetProducts()`-Methode), aber wenn es an den DataList gebunden ist, wurden nur die Datensätze angezeigt, die den angegebenen Eingabe Parametern *pageIndex* und *PageSize* entsprechen.</span><span class="sxs-lookup"><span data-stu-id="9068b-209">This `PagedDataSource` object was populated with *all* of the products (via the BLL s `GetProducts()` method), but when bound to the DataList only those records corresponding to the specified *pageIndex* and *pageSize* input parameters were displayed.</span></span>

<span data-ttu-id="9068b-210">An früherer Stelle in diesem Tutorial haben wir die Sortierungs Unterstützung durch Angabe des Sortier Ausdrucks aus dem ObjectDataSource s `Selecting`-Ereignishandler hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="9068b-210">Earlier in this tutorial we added sorting support by specifying the sort expression from the ObjectDataSource s `Selecting` event handler.</span></span> <span data-ttu-id="9068b-211">Dies funktioniert gut, wenn ObjectDataSource ein Objekt zurückgibt, das sortiert werden kann, wie z. b. die `ProductsDataTable`, die von der `GetProducts()`-Methode zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-211">This works well when the ObjectDataSource is returned an object that can be sorted, like the `ProductsDataTable` returned by the `GetProducts()` method.</span></span> <span data-ttu-id="9068b-212">Das `PagedDataSource` Objekt, das von der `GetProductsAsPagedDataSource`-Methode zurückgegeben wird, unterstützt das Sortieren der inneren Datenquelle jedoch nicht.</span><span class="sxs-lookup"><span data-stu-id="9068b-212">However, the `PagedDataSource` object returned by the `GetProductsAsPagedDataSource` method does not support sorting of its inner data source.</span></span> <span data-ttu-id="9068b-213">Stattdessen müssen die Ergebnisse, die von der `GetProducts()`-Methode zurückgegeben werden, sortiert werden, *bevor* Sie in der `PagedDataSource`abgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-213">Instead, we need to sort the results returned from the `GetProducts()` method *before* we put it in the `PagedDataSource`.</span></span>

<span data-ttu-id="9068b-214">Um dies zu erreichen, erstellen Sie eine neue Methode in der `ProductsBLL`-Klasse, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span><span class="sxs-lookup"><span data-stu-id="9068b-214">To accomplish this, create a new method in the `ProductsBLL` class, `GetProductsSortedAsPagedDataSource(sortExpression, pageIndex, pageSize)`.</span></span> <span data-ttu-id="9068b-215">Um die `ProductsDataTable` zu sortieren, die von der `GetProducts()`-Methode zurückgegeben wird, geben Sie die `Sort`-Eigenschaft ihrer Standard `DataTableView`an:</span><span class="sxs-lookup"><span data-stu-id="9068b-215">To sort the `ProductsDataTable` returned by the `GetProducts()` method, specify the `Sort` property of its default `DataTableView`:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample5.cs)]

<span data-ttu-id="9068b-216">Die `GetProductsSortedAsPagedDataSource`-Methode unterscheidet sich nur geringfügig von der `GetProductsAsPagedDataSource` Methode, die im vorherigen Tutorial erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="9068b-216">The `GetProductsSortedAsPagedDataSource` method differs only slightly from the `GetProductsAsPagedDataSource` method created in the previous tutorial.</span></span> <span data-ttu-id="9068b-217">Insbesondere akzeptiert `GetProductsSortedAsPagedDataSource` einen zusätzlichen Eingabeparameter `sortExpression` und weist diesen Wert der `Sort`-Eigenschaft der `ProductDataTable` s `DefaultView`zu.</span><span class="sxs-lookup"><span data-stu-id="9068b-217">In particular, `GetProductsSortedAsPagedDataSource` accepts an additional input parameter `sortExpression` and assigns this value to the `Sort` property of the `ProductDataTable` s `DefaultView`.</span></span> <span data-ttu-id="9068b-218">Ein paar Codezeilen später wird der Datenquelle des `PagedDataSource` Objekts die `ProductDataTable` s `DefaultView`zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="9068b-218">A few lines of code later, the `PagedDataSource` object s DataSource is assigned the `ProductDataTable` s `DefaultView`.</span></span>

## <a name="calling-the-getproductssortedaspageddatasource-method-and-specifying-the-value-for-the-sortexpression-input-parameter"></a><span data-ttu-id="9068b-219">Aufrufen der getproductssortedaspgeddatasource-Methode und angeben des Werts für den SortExpression-Eingabe Parameter</span><span class="sxs-lookup"><span data-stu-id="9068b-219">Calling the GetProductsSortedAsPagedDataSource Method and Specifying the Value for the SortExpression Input Parameter</span></span>

<span data-ttu-id="9068b-220">Wenn die `GetProductsSortedAsPagedDataSource`-Methode fertiggestellt ist, besteht der nächste Schritt darin, den Wert für diesen Parameter anzugeben.</span><span class="sxs-lookup"><span data-stu-id="9068b-220">With the `GetProductsSortedAsPagedDataSource` method complete, the next step is to provide the value for this parameter.</span></span> <span data-ttu-id="9068b-221">Die ObjectDataSource in `SortingWithDefaultPaging.aspx` ist zurzeit so konfiguriert, dass Sie die `GetProductsAsPagedDataSource`-Methode aufruft und die beiden Eingabeparameter über die beiden `QueryStringParameters`, die in der `SelectParameters` Auflistung angegeben sind, übergibt.</span><span class="sxs-lookup"><span data-stu-id="9068b-221">The ObjectDataSource in `SortingWithDefaultPaging.aspx` is currently configured to call the `GetProductsAsPagedDataSource` method and passes in the two input parameters through its two `QueryStringParameters`, which are specified in the `SelectParameters` collection.</span></span> <span data-ttu-id="9068b-222">Diese beiden `QueryStringParameters` anzeigen, dass die Quelle für die Parameter " *pageIndex* " und " *PageSize* " der `GetProductsAsPagedDataSource`-Methode aus den QueryString-Feldern `pageIndex` und `pageSize`stammt.</span><span class="sxs-lookup"><span data-stu-id="9068b-222">These two `QueryStringParameters` indicate that the source for the `GetProductsAsPagedDataSource` method s *pageIndex* and *pageSize* parameters come from the querystring fields `pageIndex` and `pageSize`.</span></span>

<span data-ttu-id="9068b-223">Aktualisieren Sie die ObjectDataSource s-`SelectMethod` Eigenschaft, sodass Sie die neue `GetProductsSortedAsPagedDataSource`-Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="9068b-223">Update the ObjectDataSource s `SelectMethod` property so that it invokes the new `GetProductsSortedAsPagedDataSource` method.</span></span> <span data-ttu-id="9068b-224">Fügen Sie dann eine neue `QueryStringParameter` hinzu, sodass der Zugriff auf den *SortExpression* -Eingabeparameter aus dem QueryString-Feld `sortExpression`erfolgt.</span><span class="sxs-lookup"><span data-stu-id="9068b-224">Then, add a new `QueryStringParameter` so that the *sortExpression* input parameter is accessed from the querystring field `sortExpression`.</span></span> <span data-ttu-id="9068b-225">Legen Sie die `QueryStringParameter` s `DefaultValue` auf ProductName fest.</span><span class="sxs-lookup"><span data-stu-id="9068b-225">Set the `QueryStringParameter` s `DefaultValue` to ProductName .</span></span>

<span data-ttu-id="9068b-226">Nach diesen Änderungen sollte das deklarative Markup von ObjectDataSource s wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="9068b-226">After these changes, the ObjectDataSource s declarative markup should look like:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample6.aspx)]

<span data-ttu-id="9068b-227">An diesem Punkt werden die Ergebnisse auf der Seite "`SortingWithDefaultPaging.aspx`" alphabetisch nach dem Produktnamen sortiert (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="9068b-227">At this point, the `SortingWithDefaultPaging.aspx` page will sort its results alphabetically by the product name (see Figure 9).</span></span> <span data-ttu-id="9068b-228">Der Grund hierfür ist, dass standardmäßig der Wert "ProductName" als Parameter für die `GetProductsSortedAsPagedDataSource`-Methode " *SortExpression* " übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-228">This is because, by default, a value of ProductName is passed in as the `GetProductsSortedAsPagedDataSource` method s *sortExpression* parameter.</span></span>

<span data-ttu-id="9068b-229">[![standardmäßig werden die Ergebnisse nach ProductName sortiert.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-229">[![By Default, the Results are Sorted by ProductName](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image24.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image23.png)</span></span>

<span data-ttu-id="9068b-230">**Abbildung 9**: Standardmäßig werden die Ergebnisse nach `ProductName` sortiert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-230">**Figure 9**: By Default, the Results are Sorted by `ProductName` ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image25.png))</span></span>

<span data-ttu-id="9068b-231">Wenn Sie manuell ein `sortExpression` QueryString-Feld hinzufügen, z. b. `SortingWithDefaultPaging.aspx?sortExpression=CategoryName`, werden die Ergebnisse nach der angegebenen `sortExpression`sortiert.</span><span class="sxs-lookup"><span data-stu-id="9068b-231">If you manually add a `sortExpression` querystring field such as `SortingWithDefaultPaging.aspx?sortExpression=CategoryName` the results will be sorted by the specified `sortExpression`.</span></span> <span data-ttu-id="9068b-232">Dieser `sortExpression` Parameter ist jedoch beim Verschieben auf eine andere Datenseite nicht in der Abfrage Zeichenfolge enthalten.</span><span class="sxs-lookup"><span data-stu-id="9068b-232">However, this `sortExpression` parameter is not included in the querystring when moving to a different page of data.</span></span> <span data-ttu-id="9068b-233">Wenn Sie auf die Schaltflächen "Next" oder "Last Page" klicken, werden Sie zum `Paging.aspx`zurückkehren!</span><span class="sxs-lookup"><span data-stu-id="9068b-233">In fact, clicking on the Next or Last page buttons takes us back to `Paging.aspx`!</span></span> <span data-ttu-id="9068b-234">Außerdem gibt es zurzeit keine Sortierungs Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="9068b-234">Furthermore, there s currently no sorting interface.</span></span> <span data-ttu-id="9068b-235">Die einzige Möglichkeit, wie Benutzer die Sortierreihenfolge der auslagerenen Daten ändern können, besteht darin, die QueryString direkt zu bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="9068b-235">The only way a user can change the sort order of the paged data is by manipulating the querystring directly.</span></span>

## <a name="creating-the-sorting-interface"></a><span data-ttu-id="9068b-236">Erstellen der Sortier Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="9068b-236">Creating the Sorting Interface</span></span>

<span data-ttu-id="9068b-237">Zuerst müssen wir die `RedirectUser`-Methode aktualisieren, um den Benutzer an `SortingWithDefaultPaging.aspx` (anstelle von `Paging.aspx`) zu senden und den `sortExpression` Wert in der Abfrage Zeichenfolge einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="9068b-237">We first need to update the `RedirectUser` method to send the user to `SortingWithDefaultPaging.aspx` (instead of `Paging.aspx`) and to include the `sortExpression` value in the querystring.</span></span> <span data-ttu-id="9068b-238">Außerdem sollten Sie eine schreibgeschützte, auf Seitenebene benannte `SortExpression`-Eigenschaft hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9068b-238">We should also add a read-only, page-level named `SortExpression` property.</span></span> <span data-ttu-id="9068b-239">Diese Eigenschaft, ähnlich wie die Eigenschaften `PageIndex` und `PageSize`, die im vorherigen Tutorial erstellt wurden, gibt den Wert des Felds `sortExpression` QueryString zurück, sofern vorhanden, und andernfalls den Standardwert (ProductName).</span><span class="sxs-lookup"><span data-stu-id="9068b-239">This property, similar to the `PageIndex` and `PageSize` properties created in the previous tutorial, returns the value of the `sortExpression` querystring field if it exists, and the default value ( ProductName ) otherwise.</span></span>

<span data-ttu-id="9068b-240">Die `RedirectUser`-Methode akzeptiert derzeit nur einen einzelnen Eingabeparameter, der den Index der anzuzeigenden Seite anzeigt.</span><span class="sxs-lookup"><span data-stu-id="9068b-240">Currently the `RedirectUser` method accepts only a single input parameter the index of the page to display.</span></span> <span data-ttu-id="9068b-241">Es kann jedoch vorkommen, dass der Benutzer mit einem anderen Sortier Ausdruck, der in der Abfrage Zeichenfolge angegeben ist, zu einer bestimmten Datenseite umgeleitet werden soll.</span><span class="sxs-lookup"><span data-stu-id="9068b-241">However, there may be times when we want to redirect the user to a particular page of data using a sort expression other than what s specified in the querystring.</span></span> <span data-ttu-id="9068b-242">In Kürze erstellen wir die Sortierungs Schnittstelle für diese Seite, die eine Reihe von Schaltflächen-websteuer Elementen zum Sortieren der Daten nach einer bestimmten Spalte enthält.</span><span class="sxs-lookup"><span data-stu-id="9068b-242">In a moment we'll create the sorting interface for this page, which will include a series of Button Web controls for sorting the data by a specified column.</span></span> <span data-ttu-id="9068b-243">Wenn auf eine dieser Schaltflächen geklickt wird, möchten wir den Benutzer umleiten, indem er den entsprechenden Sortierungs Ausdruckswert übergibt.</span><span class="sxs-lookup"><span data-stu-id="9068b-243">When one of those Buttons is clicked, we want to redirect the user passing in the appropriate sort expression value.</span></span> <span data-ttu-id="9068b-244">Um diese Funktionalität bereitzustellen, erstellen Sie zwei Versionen der `RedirectUser`-Methode.</span><span class="sxs-lookup"><span data-stu-id="9068b-244">To provide this functionality, create two versions of the `RedirectUser` method.</span></span> <span data-ttu-id="9068b-245">Der erste darf nur den anzuzeigenden Seitenindex akzeptieren, während der zweite den Seitenindex und den Sortier Ausdruck akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="9068b-245">The first one should accept just the page index to display, while the second one accepts the page index and sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample7.cs)]

<span data-ttu-id="9068b-246">Im ersten Beispiel in diesem Tutorial haben wir mithilfe einer Dropdown List eine Sortier Schnittstelle erstellt.</span><span class="sxs-lookup"><span data-stu-id="9068b-246">In the first example in this tutorial, we created a sorting interface using a DropDownList.</span></span> <span data-ttu-id="9068b-247">In diesem Beispiel verwenden Sie drei Schaltflächen-websteuer Elemente, die oberhalb des DataList-Steuer Elements für die Sortierung nach `ProductName`positioniert sind, eines für `CategoryName`und eines für `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="9068b-247">For this example, let s use three Button Web controls positioned above the DataList one for sorting by `ProductName`, one for `CategoryName`, and one for `SupplierName`.</span></span> <span data-ttu-id="9068b-248">Fügen Sie die drei Schaltflächen-websteuer Elemente hinzu, indem Sie Ihre `ID` und `Text` Eigenschaften entsprechend festlegen:</span><span class="sxs-lookup"><span data-stu-id="9068b-248">Add the three Button Web controls, setting their `ID` and `Text` properties appropriately:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample8.aspx)]

<span data-ttu-id="9068b-249">Erstellen Sie als nächstes einen `Click` Ereignishandler für jeden.</span><span class="sxs-lookup"><span data-stu-id="9068b-249">Next, create a `Click` event handler for each.</span></span> <span data-ttu-id="9068b-250">Die Ereignishandler sollten die `RedirectUser`-Methode abrufen und den Benutzer mithilfe des entsprechenden Sortier Ausdrucks an die erste Seite zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="9068b-250">The event handlers should call the `RedirectUser` method, returning the user to the first page using the appropriate sort expression.</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample9.cs)]

<span data-ttu-id="9068b-251">Beim ersten Besuch der Seite werden die Daten nach dem Produktnamen alphabetisch sortiert (siehe Abbildung 9).</span><span class="sxs-lookup"><span data-stu-id="9068b-251">When first visiting the page, the data is sorted by the product name alphabetically (refer back to Figure 9).</span></span> <span data-ttu-id="9068b-252">Klicken Sie auf die Schaltfläche Weiter, um zur zweiten Seite der Daten zu gelangen, und klicken Sie dann auf die Schaltfläche nach Kategorie sortieren.</span><span class="sxs-lookup"><span data-stu-id="9068b-252">Click the Next button to advance to the second page of data and then click the Sort by Category button.</span></span> <span data-ttu-id="9068b-253">Dadurch wird die erste Seite der Daten nach Kategorien Amen sortiert zurückgegeben (siehe Abbildung 10).</span><span class="sxs-lookup"><span data-stu-id="9068b-253">This returns us to the first page of data, sorted by category name (see Figure 10).</span></span> <span data-ttu-id="9068b-254">Wenn Sie auf die Schaltfläche nach Lieferant sortieren klicken, werden die Daten nach Lieferant sortiert, beginnend mit der ersten Seite der Daten.</span><span class="sxs-lookup"><span data-stu-id="9068b-254">Likewise, clicking the Sort by Supplier button sorts the data by supplier starting from the first page of data.</span></span> <span data-ttu-id="9068b-255">Die Sortier Auswahl wird beim Durchlaufen der Daten gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9068b-255">The sort choice is remembered as the data is paged through.</span></span> <span data-ttu-id="9068b-256">In Abbildung 11 wird die Seite nach der Sortierung nach Kategorie und dann auf die dreizehnte Seite der Daten gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9068b-256">Figure 11 shows the page after sorting by category and then advancing to the thirteenth page of data.</span></span>

<span data-ttu-id="9068b-257">[![die Produkte nach Kategorie sortiert](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-257">[![The Products are Sorted by Category](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image27.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image26.png)</span></span>

<span data-ttu-id="9068b-258">**Abbildung 10**: die Produkte sind nach Kategorie sortiert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-258">**Figure 10**: The Products are Sorted by Category ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image28.png))</span></span>

<span data-ttu-id="9068b-259">[![der Sortier Ausdruck beim Paging durch die Daten gespeichert wird.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-259">[![The Sort Expression is Remembered When Paging Through the Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image30.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image29.png)</span></span>

<span data-ttu-id="9068b-260">**Abbildung 11**: der Sortier Ausdruck wird beim Paging durch die Daten gespeichert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-260">**Figure 11**: The Sort Expression is Remembered When Paging Through the Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image31.png))</span></span>

## <a name="step-6-custom-paging-through-records-in-a-repeater"></a><span data-ttu-id="9068b-261">Schritt 6: benutzerdefiniertes Paging durch Datensätze in einem Repeater</span><span class="sxs-lookup"><span data-stu-id="9068b-261">Step 6: Custom Paging Through Records in a Repeater</span></span>

<span data-ttu-id="9068b-262">Das DataList-Beispiel, das in Schritt 5 untersucht wird, unter Verwendung des ineffizienten Standard pagingverfahrens.</span><span class="sxs-lookup"><span data-stu-id="9068b-262">The DataList example examined in step 5 pages through its data using the inefficient default paging technique.</span></span> <span data-ttu-id="9068b-263">Beim Paging durch ausreichend große Datenmengen ist es zwingend erforderlich, dass benutzerdefinierte Paginierung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-263">When paging through sufficiently large amounts of data, it is imperative that custom paging be used.</span></span> <span data-ttu-id="9068b-264">Zurück zum [effizienten Paging durch große Datenmengen](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) und zum Sortieren von Tutorials für [benutzerdefinierte](../paging-and-sorting/sorting-custom-paged-data-cs.md) Auslagerungs Daten untersuchen wir die Unterschiede zwischen der standardmäßigen und benutzerdefinierten Auslagerung und den erstellten Methoden in der BLL für die Verwendung von benutzerdefiniertem Paging und Sortieren von benutzerdefinierten Auslagerungs Daten.</span><span class="sxs-lookup"><span data-stu-id="9068b-264">Back in the [Efficiently Paging Through Large Amounts of Data](../paging-and-sorting/efficiently-paging-through-large-amounts-of-data-cs.md) and [Sorting Custom Paged Data](../paging-and-sorting/sorting-custom-paged-data-cs.md) tutorials, we examined the differences between default and custom paging and created methods in the BLL for utilizing custom paging and sorting custom paged data.</span></span> <span data-ttu-id="9068b-265">Insbesondere in diesen beiden vorherigen Tutorials haben wir die folgenden drei Methoden zur `ProductsBLL`-Klasse hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="9068b-265">In particular, in these two previous tutorials we added the following three methods to the `ProductsBLL` class:</span></span>

- <span data-ttu-id="9068b-266">`GetProductsPaged(startRowIndex, maximumRows)` gibt eine bestimmte Teilmenge von Datensätzen zurück, beginnend bei *startRowIndex* und nicht überschreitet *maximumRows*.</span><span class="sxs-lookup"><span data-stu-id="9068b-266">`GetProductsPaged(startRowIndex, maximumRows)` returns a particular subset of records starting at *startRowIndex* and not exceeding *maximumRows*.</span></span>
- <span data-ttu-id="9068b-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` gibt eine bestimmte Teilmenge von Datensätzen zurück, sortiert nach dem angegebenen *SortExpression* -Eingabeparameter.</span><span class="sxs-lookup"><span data-stu-id="9068b-267">`GetProductsPagedAndSorted(sortExpression, startRowIndex, maximumRows)` returns a particular subset of records sorted by the specified *sortExpression* input parameter.</span></span>
- <span data-ttu-id="9068b-268">`TotalNumberOfProducts()` gibt die Gesamtanzahl der Datensätze in der `Products` Datenbanktabelle an.</span><span class="sxs-lookup"><span data-stu-id="9068b-268">`TotalNumberOfProducts()` provides the total number of records in the `Products` database table.</span></span>

<span data-ttu-id="9068b-269">Diese Methoden können verwendet werden, um Daten mithilfe eines DataList-oder Repeater-Steuer Elements effizient zu sortieren und zu sortieren.</span><span class="sxs-lookup"><span data-stu-id="9068b-269">These methods can be used to efficiently page and sort through data using a DataList or Repeater control.</span></span> <span data-ttu-id="9068b-270">Um dies zu veranschaulichen, beginnen Sie mit dem Erstellen eines Repeater-Steuer Elements mit Unterstützung für benutzerdefinierte Paginierung. Anschließend fügen wir Sortierungs Funktionen hinzu.</span><span class="sxs-lookup"><span data-stu-id="9068b-270">To illustrate this, let s start by creating a Repeater control with custom paging support; we'll then add sorting capabilities.</span></span>

<span data-ttu-id="9068b-271">Öffnen Sie die Seite `SortingWithCustomPaging.aspx` im Ordner `PagingSortingDataListRepeater`, und fügen Sie der Seite einen Wiederholungs Modul hinzu. Legen Sie dessen Eigenschaft `ID` auf `Products`fest.</span><span class="sxs-lookup"><span data-stu-id="9068b-271">Open the `SortingWithCustomPaging.aspx` page in the `PagingSortingDataListRepeater` folder and add a Repeater to the page, setting its `ID` property to `Products`.</span></span> <span data-ttu-id="9068b-272">Erstellen Sie im smarttagwiederholungs-Tag eine neue ObjectDataSource mit dem Namen `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="9068b-272">From the Repeater s smart tag, create a new ObjectDataSource named `ProductsDataSource`.</span></span> <span data-ttu-id="9068b-273">Konfigurieren Sie Sie so, dass die Daten aus der `ProductsBLL` Klasse `GetProductsPaged` Methode ausgewählt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-273">Configure it to select its data from the `ProductsBLL` class s `GetProductsPaged` method.</span></span>

<span data-ttu-id="9068b-274">[![konfigurieren Sie ObjectDataSource für die Verwendung der getproductspaged-Methode der productbll-Klasse.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-274">[![Configure the ObjectDataSource to Use the ProductsBLL Class s GetProductsPaged Method](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image33.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image32.png)</span></span>

<span data-ttu-id="9068b-275">**Abbildung 12**: Konfigurieren von ObjectDataSource für die Verwendung der `ProductsBLL` Class s `GetProductsPaged`-Methode ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-275">**Figure 12**: Configure the ObjectDataSource to Use the `ProductsBLL` Class s `GetProductsPaged` Method ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image34.png))</span></span>

<span data-ttu-id="9068b-276">Legen Sie die Dropdown Listen auf den Registerkarten aktualisieren, einfügen und löschen auf (keine) fest, und klicken Sie dann auf die Schaltfläche Weiter.</span><span class="sxs-lookup"><span data-stu-id="9068b-276">Set the drop-down lists in the UPDATE, INSERT, and DELETE tabs to (None) and then click the Next button.</span></span> <span data-ttu-id="9068b-277">Der Assistent zum Konfigurieren von Datenquellen fordert nun zur Eingabe der Quellen der Eingabeparameter " *startRowIndex* " und " *maximumRows* " der `GetProductsPaged` Methode auf.</span><span class="sxs-lookup"><span data-stu-id="9068b-277">The Configure Data Source wizard now prompts for the sources of the `GetProductsPaged` method s *startRowIndex* and *maximumRows* input parameters.</span></span> <span data-ttu-id="9068b-278">In Wirklichkeit werden diese Eingabeparameter ignoriert.</span><span class="sxs-lookup"><span data-stu-id="9068b-278">In actuality, these input parameters are ignored.</span></span> <span data-ttu-id="9068b-279">Stattdessen werden die Werte *startRowIndex* und *maximumRows* durch die `Arguments`-Eigenschaft im ObjectDataSource s `Selecting`-Ereignishandler übergeben. Dies entspricht der Angabe von *SortExpression* in diesem Tutorial s First Demo.</span><span class="sxs-lookup"><span data-stu-id="9068b-279">Instead, the *startRowIndex* and *maximumRows* values will be passed in through the `Arguments` property in the ObjectDataSource s `Selecting` event handler, just like how we specified the *sortExpression* in this tutorial s first demo.</span></span> <span data-ttu-id="9068b-280">Lassen Sie daher die Dropdown Listen für Parameter Quelle im Assistenten auf keine festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9068b-280">Therefore, leave the parameter source drop-down lists in the wizard set at None .</span></span>

<span data-ttu-id="9068b-281">[![lassen Sie die Parameter Quellen auf None fest.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-281">[![Leave the Parameter Sources Set to None](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image36.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image35.png)</span></span>

<span data-ttu-id="9068b-282">**Abbildung 13**: belassen Sie die Parameter Quellen auf None ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-282">**Figure 13**: Leave the Parameter Sources Set to None ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image37.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9068b-283">Legen Sie die Eigenschaft ObjectDataSource s `EnablePaging` *nicht* auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="9068b-283">Do *not* set the ObjectDataSource s `EnablePaging` property to `true`.</span></span> <span data-ttu-id="9068b-284">Dies bewirkt, dass ObjectDataSource automatisch seine eigenen Parameter *startRowIndex* und *maximumRows* in die Liste der vorhandenen Parameter von `SelectMethod` s einschließt.</span><span class="sxs-lookup"><span data-stu-id="9068b-284">This will cause the ObjectDataSource to automatically include its own *startRowIndex* and *maximumRows* parameters to the `SelectMethod` s existing parameter list.</span></span> <span data-ttu-id="9068b-285">Die `EnablePaging`-Eigenschaft ist nützlich, wenn benutzerdefinierte auslagerbare Daten an ein GridView-, DetailsView-oder FormView-Steuerelement gebunden werden, da diese Steuerelemente ein bestimmtes Verhalten von ObjectDataSource erwarten, das nur verfügbar ist, wenn `EnablePaging` Eigenschaft `true`ist.</span><span class="sxs-lookup"><span data-stu-id="9068b-285">The `EnablePaging` property is useful when binding custom paged data to a GridView, DetailsView, or FormView control because these controls expect certain behavior from the ObjectDataSource that s only available when `EnablePaging` property is `true`.</span></span> <span data-ttu-id="9068b-286">Da wir die Paging-Unterstützung für DataList und Repeater manuell hinzufügen müssen, lassen Sie diese Eigenschaft auf `false` (Standardeinstellung) fest, da wir die erforderliche Funktionalität direkt auf unserer ASP.NET-Seite speichern.</span><span class="sxs-lookup"><span data-stu-id="9068b-286">Since we have to manually add the paging support for the DataList and Repeater, leave this property set to `false` (the default), as we'll bake in the needed functionality directly within our ASP.NET page.</span></span>

<span data-ttu-id="9068b-287">Definieren Sie abschließend die Repeater-`ItemTemplate`, sodass der Name, die Kategorie und der Lieferant des Produkts angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-287">Finally, define the Repeater s `ItemTemplate` so that the product s name, category, and supplier are shown.</span></span> <span data-ttu-id="9068b-288">Nach diesen Änderungen sollte die deklarative Syntax von Repeater und ObjectDataSource s in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="9068b-288">After these changes, the Repeater and ObjectDataSource s declarative syntax should look similar to the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample10.aspx)]

<span data-ttu-id="9068b-289">Nehmen Sie sich einen Moment Zeit, um die Seite über einen Browser zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="9068b-289">Take a moment to visit the page through a browser and note that no records are returned.</span></span> <span data-ttu-id="9068b-290">Der Grund hierfür ist, dass wir noch die Parameterwerte *startRowIndex* und *maximumRows* angeben müssen. Daher werden die Werte 0 für beide übermittelt.</span><span class="sxs-lookup"><span data-stu-id="9068b-290">This is because we ve yet to specify the *startRowIndex* and *maximumRows* parameter values; therefore, values of 0 are being passed in for both.</span></span> <span data-ttu-id="9068b-291">Um diese Werte anzugeben, erstellen Sie einen Ereignishandler für das Ereignis ObjectDataSource s `Selecting`, und legen Sie diese Parameterwerte Programm gesteuert auf hart codierte Werte von 0 bzw. 5 fest:</span><span class="sxs-lookup"><span data-stu-id="9068b-291">To specify these values, create an event handler for the ObjectDataSource s `Selecting` event and set these parameters values programmatically to hard-coded values of 0 and 5, respectively:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample11.cs)]

<span data-ttu-id="9068b-292">Durch diese Änderung zeigt die Seite, wenn Sie in einem Browser angezeigt wird, die ersten fünf Produkte.</span><span class="sxs-lookup"><span data-stu-id="9068b-292">With this change, the page, when viewed through a browser, shows the first five products.</span></span>

<span data-ttu-id="9068b-293">[![werden die ersten fünf Datensätze angezeigt.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-293">[![The First Five Records are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image39.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image38.png)</span></span>

<span data-ttu-id="9068b-294">**Abbildung 14**: die ersten fünf Datensätze werden angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-294">**Figure 14**: The First Five Records are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image40.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9068b-295">Die in Abbildung 14 aufgeführten Produkte werden nach dem Produktnamen sortiert, da die gespeicherte Prozedur `GetProductsPaged`, die die effiziente benutzerdefinierte Pagingabfrage ausführt, die Ergebnisse nach `ProductName`sortiert.</span><span class="sxs-lookup"><span data-stu-id="9068b-295">The products listed in Figure 14 happen to be sorted by product name because the `GetProductsPaged` stored procedure that performs the efficient custom paging query orders the results by `ProductName`.</span></span>

<span data-ttu-id="9068b-296">Damit der Benutzer die Seiten schrittweise durchlaufen kann, müssen wir den Start Zeilen Index und die maximalen Zeilen nachverfolgen und diese Werte über Postbacks hinweg speichern.</span><span class="sxs-lookup"><span data-stu-id="9068b-296">In order to allow the user to step through the pages, we need to keep track of the start row index and maximum rows and remember these values across postbacks.</span></span> <span data-ttu-id="9068b-297">Im standardmäßigen Paging-Beispiel haben wir QueryString-Felder verwendet, um diese Werte beizubehalten. Speichern Sie diese Informationen für diese Demo im Ansichts Zustand der Seite.</span><span class="sxs-lookup"><span data-stu-id="9068b-297">In the default paging example we used querystring fields to persist these values; for this demo, let s persist this information in the page s view state.</span></span> <span data-ttu-id="9068b-298">Erstellen Sie die folgenden beiden Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="9068b-298">Create the following two properties:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample12.cs)]

<span data-ttu-id="9068b-299">Aktualisieren Sie anschließend den Code im Auswahl Ereignishandler, sodass er die Eigenschaften `StartRowIndex` und `MaximumRows` anstelle der hart codierten Werte 0 und 5 verwendet:</span><span class="sxs-lookup"><span data-stu-id="9068b-299">Next, update the code in the Selecting event handler so that it uses the `StartRowIndex` and `MaximumRows` properties instead of the hard-coded values of 0 and 5:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample13.cs)]

<span data-ttu-id="9068b-300">An diesem Punkt zeigt unsere Seite weiterhin nur die ersten fünf Datensätze an.</span><span class="sxs-lookup"><span data-stu-id="9068b-300">At this point our page still shows just the first five records.</span></span> <span data-ttu-id="9068b-301">Wenn diese Eigenschaften jedoch vorhanden sind, können wir unsere pagingschnittstelle neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="9068b-301">However, with these properties in place, we re ready to create our paging interface.</span></span>

## <a name="adding-the-paging-interface"></a><span data-ttu-id="9068b-302">Hinzufügen der Paging-Schnittstelle</span><span class="sxs-lookup"><span data-stu-id="9068b-302">Adding the Paging Interface</span></span>

<span data-ttu-id="9068b-303">Verwenden Sie die gleiche erste, vorherige, nächste und letzte Paging-Schnittstelle, die im standardmäßigen Paging-Beispiel verwendet wird, einschließlich des Beschriftungs-websteuer Elements, das anzeigt, welche Seite der Daten angezeigt wird und wie viele Seiten insgesamt vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="9068b-303">Let s use the same First, Previous, Next, Last paging interface used in the default paging example, including the Label Web control that displays what page of data is being viewed and how many total pages exist.</span></span> <span data-ttu-id="9068b-304">Fügen Sie unter dem Repeater die vier Schaltflächen-websteuer Elemente und die Bezeichnung hinzu.</span><span class="sxs-lookup"><span data-stu-id="9068b-304">Add the four Button Web controls and Label below the Repeater.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample14.aspx)]

<span data-ttu-id="9068b-305">Erstellen Sie als nächstes `Click` Ereignishandler für die vier Schaltflächen.</span><span class="sxs-lookup"><span data-stu-id="9068b-305">Next, create `Click` event handlers for the four Buttons.</span></span> <span data-ttu-id="9068b-306">Wenn auf eine dieser Schaltflächen geklickt wird, müssen wir die `StartRowIndex` aktualisieren und die Daten erneut an den Repeater binden.</span><span class="sxs-lookup"><span data-stu-id="9068b-306">When one of these Buttons is clicked, we need to update the `StartRowIndex` and rebind the data to the Repeater.</span></span> <span data-ttu-id="9068b-307">Der Code für die Schaltflächen "First", "Previous" und "Next" ist einfach genug, aber für die letzte Schaltfläche wie bestimmen wir den Start Zeilen Index für die letzte Seite der Daten?</span><span class="sxs-lookup"><span data-stu-id="9068b-307">The code for the First, Previous, and Next buttons is simple enough, but for the Last button how do we determine the start row index for the last page of data?</span></span> <span data-ttu-id="9068b-308">Um diesen Index zu berechnen und zu bestimmen, ob die nächste und die letzte Schaltfläche aktiviert werden sollen, müssen wir wissen, wie viele Datensätze insgesamt ausgelagert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-308">To compute this index as well as being able to determine whether the Next and Last buttons should be enabled we need to know how many records in total are being paged through.</span></span> <span data-ttu-id="9068b-309">Dies können Sie durch Aufrufen der `ProductsBLL` Class s `TotalNumberOfProducts()`-Methode ermitteln.</span><span class="sxs-lookup"><span data-stu-id="9068b-309">We can determine this by calling the `ProductsBLL` class s `TotalNumberOfProducts()` method.</span></span> <span data-ttu-id="9068b-310">Erstellen Sie eine schreibgeschützte Eigenschaft auf Seitenebene mit dem Namen `TotalRowCount`, die die Ergebnisse der `TotalNumberOfProducts()` Methode zurückgibt:</span><span class="sxs-lookup"><span data-stu-id="9068b-310">Let s create a read-only, page-level property named `TotalRowCount` that returns the results of the `TotalNumberOfProducts()` method:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample15.cs)]

<span data-ttu-id="9068b-311">Mit dieser Eigenschaft können wir nun den Start Zeilen Index der letzten Seite festlegen.</span><span class="sxs-lookup"><span data-stu-id="9068b-311">With this property we can now determine the last page s start row index.</span></span> <span data-ttu-id="9068b-312">Dabei handelt es sich um das ganzzahlige Ergebnis des `TotalRowCount` minus 1 dividiert durch `MaximumRows`, multipliziert mit `MaximumRows`.</span><span class="sxs-lookup"><span data-stu-id="9068b-312">Specifically, it s the integer result of the `TotalRowCount` minus 1 divided by `MaximumRows`, multiplied by `MaximumRows`.</span></span> <span data-ttu-id="9068b-313">Wir können nun die `Click` Ereignishandler für die vier Schaltflächen für die Auslagerungs Schnittstelle schreiben:</span><span class="sxs-lookup"><span data-stu-id="9068b-313">We can now write the `Click` event handlers for the four paging interface buttons:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample16.cs)]

<span data-ttu-id="9068b-314">Zum Schluss müssen die Schaltflächen "erste" und "zurück" in der pagingschnittstelle deaktiviert werden, wenn die erste Seite der Daten angezeigt wird, und die Schaltflächen "weiter" und "letzte" beim Anzeigen der letzten Seite</span><span class="sxs-lookup"><span data-stu-id="9068b-314">Finally, we need to disable the First and Previous buttons in the paging interface when viewing the first page of data and the Next and Last buttons when viewing the last page.</span></span> <span data-ttu-id="9068b-315">Fügen Sie hierzu den folgenden Code zum ObjectDataSource s `Selecting`-Ereignishandler hinzu:</span><span class="sxs-lookup"><span data-stu-id="9068b-315">To accomplish this, add the following code to the ObjectDataSource s `Selecting` event handler:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample17.cs)]

<span data-ttu-id="9068b-316">Nachdem Sie diese `Click` Ereignishandler und den Code hinzugefügt haben, um die Paging-Schnittstellen Elemente basierend auf dem aktuellen Start Zeilen Index zu aktivieren oder zu deaktivieren, testen Sie die Seite in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="9068b-316">After adding these `Click` event handlers and the code to enable or disable the paging interface elements based on the current start row index, test the page in a browser.</span></span> <span data-ttu-id="9068b-317">Wie in Abbildung 15 dargestellt, werden beim ersten Besuch der Seite die Schaltflächen "erste" und "zurück" deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="9068b-317">As Figure 15 illustrates, when first visiting the page the First and Previous buttons will are disabled.</span></span> <span data-ttu-id="9068b-318">Wenn Sie auf Weiter klicken, wird die zweite Seite der Daten angezeigt. beim Klicken auf letzte wird die letzte Seite angezeigt (siehe Abbildung 16 und 17).</span><span class="sxs-lookup"><span data-stu-id="9068b-318">Clicking Next shows the second page of data, while clicking Last displays the final page (see Figures 16 and 17).</span></span> <span data-ttu-id="9068b-319">Beim Anzeigen der letzten Seite der Daten sind die Schaltflächen "weiter" und "letzte" deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="9068b-319">When viewing the last page of data both the Next and Last buttons are disabled.</span></span>

<span data-ttu-id="9068b-320">[![die Schaltflächen "Previous" und "Last" deaktiviert sind, wenn Sie die erste Seite der Produkte anzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-320">[![The Previous and Last Buttons are Disabled When Viewing the First Page of Products](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image42.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image41.png)</span></span>

<span data-ttu-id="9068b-321">**Abbildung 15**: die Schaltflächen "Previous" und "Last" sind beim Anzeigen der ersten Produktseite deaktiviert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-321">**Figure 15**: The Previous and Last Buttons are Disabled When Viewing the First Page of Products ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image43.png))</span></span>

<span data-ttu-id="9068b-322">[![die zweite Seite der Produkte angezeigt wird.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-322">[![The Second Page of Products are Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image45.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image44.png)</span></span>

<span data-ttu-id="9068b-323">**Abbildung 16**: die zweite Seite der Produkte wird angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-323">**Figure 16**: The Second Page of Products are Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image46.png))</span></span>

<span data-ttu-id="9068b-324">[![klicken auf letzte zeigt die letzte Seite der Daten an](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-324">[![Clicking Last Displays the Final Page of Data](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image48.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image47.png)</span></span>

<span data-ttu-id="9068b-325">**Abbildung 17**: Klicken auf "letzte" zeigt die letzte Seite mit Daten an ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-325">**Figure 17**: Clicking Last Displays the Final Page of Data ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image49.png))</span></span>

## <a name="step-7-including-sorting-support-with-the-custom-paged-repeater"></a><span data-ttu-id="9068b-326">Schritt 7: einschließen der Sortier Unterstützung mit dem benutzerdefinierten auslagerungssrepeater</span><span class="sxs-lookup"><span data-stu-id="9068b-326">Step 7: Including Sorting Support with the Custom Paged Repeater</span></span>

<span data-ttu-id="9068b-327">Nachdem das benutzerdefinierte Paging implementiert wurde, können wir nun die Sortier Unterstützung einschließen.</span><span class="sxs-lookup"><span data-stu-id="9068b-327">Now that custom paging has been implemented, we re ready to include sorting support.</span></span> <span data-ttu-id="9068b-328">Die `ProductsBLL` Class s `GetProductsPagedAndSorted`-Methode hat die gleichen *startRowIndex* -und *maximumRows* -Eingabeparameter wie `GetProductsPaged`, erlaubt aber einen zusätzlichen *SortExpression* -Eingabeparameter.</span><span class="sxs-lookup"><span data-stu-id="9068b-328">The `ProductsBLL` class s `GetProductsPagedAndSorted` method has the same *startRowIndex* and *maximumRows* input parameters as `GetProductsPaged`, but permits an additional *sortExpression* input parameter.</span></span> <span data-ttu-id="9068b-329">Um die `GetProductsPagedAndSorted`-Methode aus `SortingWithCustomPaging.aspx`verwenden zu können, müssen die folgenden Schritte ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="9068b-329">To use the `GetProductsPagedAndSorted` method from `SortingWithCustomPaging.aspx`, we need to perform the following steps:</span></span>

1. <span data-ttu-id="9068b-330">Ändern Sie die Eigenschaft ObjectDataSource s `SelectMethod` von `GetProductsPaged` in `GetProductsPagedAndSorted`.</span><span class="sxs-lookup"><span data-stu-id="9068b-330">Change the ObjectDataSource s `SelectMethod` property from `GetProductsPaged` to `GetProductsPagedAndSorted`.</span></span>
2. <span data-ttu-id="9068b-331">Fügen Sie der ObjectDataSource s `SelectParameters` Auflistung ein *SortExpression* -`Parameter` Objekt hinzu.</span><span class="sxs-lookup"><span data-stu-id="9068b-331">Add a *sortExpression* `Parameter` object to the ObjectDataSource s `SelectParameters` collection.</span></span>
3. <span data-ttu-id="9068b-332">Erstellen Sie eine private auf Seitenebene `SortExpression` Eigenschaft, die ihren Wert über Postbacks über den Ansichts Zustand der Seite beibehält.</span><span class="sxs-lookup"><span data-stu-id="9068b-332">Create a private, page-level `SortExpression` property that persists its value across postbacks through the page s view state.</span></span>
4. <span data-ttu-id="9068b-333">Aktualisieren Sie den ObjectDataSource s `Selecting`-Ereignishandler, um den Parameter ObjectDataSource s *SortExpression* dem Wert der `SortExpression` Eigenschaft auf Seitenebene zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="9068b-333">Update the ObjectDataSource s `Selecting` event handler to assign the ObjectDataSource s *sortExpression* parameter the value of the page-level `SortExpression` property.</span></span>
5. <span data-ttu-id="9068b-334">Erstellen Sie die Sortierungs Schnittstelle.</span><span class="sxs-lookup"><span data-stu-id="9068b-334">Create the sorting interface.</span></span>

<span data-ttu-id="9068b-335">Aktualisieren Sie zunächst die ObjectDataSource s `SelectMethod`-Eigenschaft, und fügen Sie einen *SortExpression* -`Parameter`hinzu.</span><span class="sxs-lookup"><span data-stu-id="9068b-335">Start by updating the ObjectDataSource s `SelectMethod` property and adding a *sortExpression* `Parameter`.</span></span> <span data-ttu-id="9068b-336">Stellen Sie sicher, dass die Eigenschaft *SortExpression* `Parameter` s `Type` auf `String`festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="9068b-336">Make sure that the *sortExpression* `Parameter` s `Type` property is set to `String`.</span></span> <span data-ttu-id="9068b-337">Nachdem Sie die ersten beiden Aufgaben abgeschlossen haben, sollte das deklarative Markup von ObjectDataSource s wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="9068b-337">After completing these first two tasks, the ObjectDataSource s declarative markup should look like the following:</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample18.aspx)]

<span data-ttu-id="9068b-338">Als nächstes benötigen wir eine `SortExpression` Eigenschaft auf Seitenebene, deren Wert zum Ansichts Zustand serialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-338">Next, we need a page-level `SortExpression` property whose value is serialized to view state.</span></span> <span data-ttu-id="9068b-339">Wenn kein Sortierungs Ausdruckswert festgelegt wurde, verwenden Sie ProductName als Standardwert:</span><span class="sxs-lookup"><span data-stu-id="9068b-339">If no sort expression value has been set, use ProductName as the default:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample19.cs)]

<span data-ttu-id="9068b-340">Bevor die ObjectDataSource die `GetProductsPagedAndSorted`-Methode aufruft, müssen wir den *SortExpression* -`Parameter` auf den Wert der `SortExpression`-Eigenschaft festlegen.</span><span class="sxs-lookup"><span data-stu-id="9068b-340">Before the ObjectDataSource invokes the `GetProductsPagedAndSorted` method we need to set the *sortExpression* `Parameter` to the value of the `SortExpression` property.</span></span> <span data-ttu-id="9068b-341">Fügen Sie im Ereignishandler `Selecting` die folgende Codezeile hinzu:</span><span class="sxs-lookup"><span data-stu-id="9068b-341">In the `Selecting` event handler, add the following line of code:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample20.cs)]

<span data-ttu-id="9068b-342">Sie müssen nur noch die Sortierungs Schnittstelle implementieren.</span><span class="sxs-lookup"><span data-stu-id="9068b-342">All that remains is to implement the sorting interface.</span></span> <span data-ttu-id="9068b-343">Wie im letzten Beispiel gezeigt, kann die Sortier Schnittstelle mit drei Schaltflächen-websteuer Elementen implementiert werden, die es dem Benutzer ermöglichen, die Ergebnisse nach Produktname, Kategorie oder Lieferanten zu sortieren.</span><span class="sxs-lookup"><span data-stu-id="9068b-343">As we did in the last example, let s have the sorting interface implemented using three Button Web controls that allow the user to sort the results by product name, category, or supplier.</span></span>

[!code-aspx[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample21.aspx)]

<span data-ttu-id="9068b-344">Erstellen Sie `Click` Ereignishandler für diese drei Schaltflächen-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="9068b-344">Create `Click` event handlers for these three Button controls.</span></span> <span data-ttu-id="9068b-345">Setzen Sie im-Ereignishandler die `StartRowIndex` auf 0 zurück, legen Sie die `SortExpression` auf den entsprechenden Wert fest, und binden Sie die Daten erneut an den Repeater:</span><span class="sxs-lookup"><span data-stu-id="9068b-345">In the event handler, reset the `StartRowIndex` to 0, set the `SortExpression` to the appropriate value, and rebind the data to the Repeater:</span></span>

[!code-csharp[Main](sorting-data-in-a-datalist-or-repeater-control-cs/samples/sample22.cs)]

<span data-ttu-id="9068b-346">Das ist schon alles!</span><span class="sxs-lookup"><span data-stu-id="9068b-346">That s all there is to it!</span></span> <span data-ttu-id="9068b-347">Es gab zwar eine Reihe von Schritten, um benutzerdefiniertes Paging und Sortierung implementiert zu haben, die Schritte waren jedoch sehr ähnlich wie bei der Standard Auslagerung.</span><span class="sxs-lookup"><span data-stu-id="9068b-347">While there were a number of steps to get custom paging and sorting implemented, the steps were very similar to those needed for default paging.</span></span> <span data-ttu-id="9068b-348">In Abbildung 18 werden die Produkte angezeigt, wenn die letzte Seite der Daten angezeigt wird, wenn Sie nach Kategorie sortiert werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-348">Figure 18 shows the products when viewing the last page of data when sorted by category.</span></span>

<span data-ttu-id="9068b-349">[![die letzte Seite der Daten sortiert nach Kategorie angezeigt wird.](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="9068b-349">[![The Last Page of Data, Sorted by Category, is Displayed](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image51.png)](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image50.png)</span></span>

<span data-ttu-id="9068b-350">**Abbildung 18**: die letzte Seite mit Daten, sortiert nach Kategorie, wird angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span><span class="sxs-lookup"><span data-stu-id="9068b-350">**Figure 18**: The Last Page of Data, Sorted by Category, is Displayed ([Click to view full-size image](sorting-data-in-a-datalist-or-repeater-control-cs/_static/image52.png))</span></span>

> [!NOTE]
> <span data-ttu-id="9068b-351">In den vorherigen Beispielen wurde das Sortieren nach dem Lieferanten von Supplier suppliername als Sortier Ausdruck verwendet.</span><span class="sxs-lookup"><span data-stu-id="9068b-351">In previous examples, when sorting by the supplier SupplierName was used as the sort expression.</span></span> <span data-ttu-id="9068b-352">Für die Implementierung der benutzerdefinierten Paginierung müssen wir jedoch "CompanyName" verwenden.</span><span class="sxs-lookup"><span data-stu-id="9068b-352">However, for the custom paging implementation, we need to use CompanyName.</span></span> <span data-ttu-id="9068b-353">Dies liegt daran, dass die gespeicherte Prozedur, die für die Implementierung von benutzerdefiniertem Paging zuständig ist `GetProductsPagedAndSorted` den Sortier Ausdruck an das `ROW_NUMBER()`-Schlüsselwort übergibt, das `ROW_NUMBER()`-Schlüsselwort den tatsächlichen Spaltennamen anstelle eines Alias.</span><span class="sxs-lookup"><span data-stu-id="9068b-353">This is because the stored procedure responsible for implementing custom paging `GetProductsPagedAndSorted` passes the sort expression into the `ROW_NUMBER()` keyword, The `ROW_NUMBER()` keyword requires the actual column name rather than an alias.</span></span> <span data-ttu-id="9068b-354">Daher müssen wir `CompanyName` (der Name der Spalte in der `Suppliers` Tabelle) anstelle des Alias verwenden, der in der `SELECT` Abfrage (`SupplierName`) für den Sortier Ausdruck verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-354">Therefore, we must use `CompanyName` (the name of the column in the `Suppliers` table) rather than the alias used in the `SELECT` query (`SupplierName`) for the sort expression.</span></span>

## <a name="summary"></a><span data-ttu-id="9068b-355">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="9068b-355">Summary</span></span>

<span data-ttu-id="9068b-356">Weder der DataList noch der Repeater bieten integrierte Sortier Unterstützung, aber mit etwas Code und einer benutzerdefinierten Sortier Schnittstelle können solche Funktionen hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-356">Neither the DataList nor Repeater offer built-in sorting support, but with a bit of code and a custom sorting interface, such functionality can be added.</span></span> <span data-ttu-id="9068b-357">Beim Implementieren von Sortierungen, aber nicht beim Paging, kann der Sortier Ausdruck über das `DataSourceSelectArguments` Objekt angegeben werden, das an die ObjectDataSource s `Select`-Methode übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="9068b-357">When implementing sorting, but not paging, the sort expression can be specified through the `DataSourceSelectArguments` object passed into the ObjectDataSource s `Select` method.</span></span> <span data-ttu-id="9068b-358">Diese `DataSourceSelectArguments` Objekt s `SortExpression` Eigenschaft kann im Ereignishandler von ObjectDataSource s `Selecting` zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-358">This `DataSourceSelectArguments` object s `SortExpression` property can be assigned in the ObjectDataSource s `Selecting` event handler.</span></span>

<span data-ttu-id="9068b-359">Zum Hinzufügen von Sortierungs Funktionen zu einem DataList-oder Wiederholungs Modul, das bereits Paging-Unterstützung bietet, besteht der einfachste Ansatz darin, die Geschäftslogik Schicht an eine Methode anzupassen, die einen Sortierungs Ausdruck annimmt.</span><span class="sxs-lookup"><span data-stu-id="9068b-359">To add sorting capabilities to a DataList or Repeater that already provides paging support, the easiest approach is to customize the Business Logic Layer to include a method that accepts a sort expression.</span></span> <span data-ttu-id="9068b-360">Diese Informationen können dann über einen Parameter in der ObjectDataSource s-`SelectParameters`übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="9068b-360">This information can then be passed in through a parameter in the ObjectDataSource s `SelectParameters`.</span></span>

<span data-ttu-id="9068b-361">In diesem Tutorial wird die Untersuchung von Paging und Sortierungen mit den Steuerelementen DataList und Repeater abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="9068b-361">This tutorial completes our examination of paging and sorting with the DataList and Repeater controls.</span></span> <span data-ttu-id="9068b-362">Im nächsten und abschließenden Tutorial wird erläutert, wie Sie Schaltflächen-websteuer Elemente zu den Vorlagen DataList und Repeater hinzufügen, um eine benutzerdefinierte, vom Benutzer initiierte Funktionalität für einzelne Elemente bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="9068b-362">Our next and final tutorial will examine how to add Button Web controls to the DataList and Repeater s templates in order to provide some custom, user-initiated functionality on a per-item basis.</span></span>

<span data-ttu-id="9068b-363">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="9068b-363">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9068b-364">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="9068b-364">About the Author</span></span>

<span data-ttu-id="9068b-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="9068b-365">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9068b-366">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="9068b-366">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9068b-367">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9068b-367">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9068b-368">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9068b-368">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="9068b-369">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9068b-369">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9068b-370">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="9068b-370">Special Thanks To</span></span>

<span data-ttu-id="9068b-371">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="9068b-371">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9068b-372">Lead Reviewer für dieses Tutorial war David suru.</span><span class="sxs-lookup"><span data-stu-id="9068b-372">Lead reviewer for this tutorial was David Suru.</span></span> <span data-ttu-id="9068b-373">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="9068b-373">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9068b-374">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9068b-374">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9068b-375">[Zurück](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
> [Weiter](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span><span class="sxs-lookup"><span data-stu-id="9068b-375">[Previous](paging-report-data-in-a-datalist-or-repeater-control-cs.md)
[Next](paging-report-data-in-a-datalist-or-repeater-control-vb.md)</span></span>
