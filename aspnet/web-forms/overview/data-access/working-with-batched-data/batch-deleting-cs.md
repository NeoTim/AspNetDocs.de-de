---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Batch Löschung (C#) | Microsoft-Dokumentation
author: rick-anderson
description: Erfahren Sie, wie Sie mehrere Datenbankdaten Sätze in einem einzigen Vorgang löschen. Auf der Benutzeroberflächen Ebene bauen wir auf einer erweiterten GridView auf, die in einem früheren tut erstellt wurde...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: ed832c38b4972f440ab64c141e29c85f0a9df920
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78476607"
---
# <a name="batch-deleting-c"></a><span data-ttu-id="47524-104">Löschen in Batches (C#)</span><span class="sxs-lookup"><span data-stu-id="47524-104">Batch Deleting (C#)</span></span>

<span data-ttu-id="47524-105">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="47524-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="47524-106">[Code herunterladen](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) oder [PDF herunterladen](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="47524-106">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="47524-107">Erfahren Sie, wie Sie mehrere Datenbankdaten Sätze in einem einzigen Vorgang löschen.</span><span class="sxs-lookup"><span data-stu-id="47524-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="47524-108">Auf der Benutzeroberflächen Ebene bauen wir auf einer erweiterten GridView auf, die in einem früheren Tutorial erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="47524-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="47524-109">In der Datenzugriffs Ebene werden mehrere Löschvorgänge in eine Transaktion eingeschlossen, um sicherzustellen, dass alle Löschvorgänge erfolgreich sind oder für alle Löschungen ein Rollback ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="47524-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="47524-110">Einführung</span><span class="sxs-lookup"><span data-stu-id="47524-110">Introduction</span></span>

<span data-ttu-id="47524-111">Im [vorherigen Tutorial](batch-updating-cs.md) wurde erläutert, wie eine Batch Bearbeitungs Schnittstelle mithilfe einer vollständig bearbeitbaren GridView erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="47524-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="47524-112">In Fällen, in denen Benutzer häufig viele Datensätze gleichzeitig bearbeiten, benötigt eine Batch Bearbeitungs Schnittstelle weitaus weniger Postbacks und Tastatur-zu-Maus-Kontextwechsel, wodurch die Effizienz der Endbenutzer verbessert wird.</span><span class="sxs-lookup"><span data-stu-id="47524-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="47524-113">Dieses Verfahren ist auf ähnliche Weise nützlich für Seiten, bei denen Benutzer häufig viele Datensätze in einem go löschen.</span><span class="sxs-lookup"><span data-stu-id="47524-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="47524-114">Jeder Benutzer, der einen Online-e-Mail-Client verwendet hat, ist bereits mit einer der gängigsten Schnittstellen zum Löschen von Batches vertraut: ein Kontrollkästchen in jeder Zeile in einem Raster mit der entsprechenden Schaltfläche alle aktivierten Elemente löschen (siehe Abbildung 1).</span><span class="sxs-lookup"><span data-stu-id="47524-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="47524-115">Dieses Lernprogramm ist recht kurz, da wir bereits alle harten arbeiten in vorherigen Tutorials unter Erstellen der webbasierten Schnittstelle und einer Methode zum Löschen einer Reihe von Datensätzen als einzelner atomarer Vorgang durchgeführt haben.</span><span class="sxs-lookup"><span data-stu-id="47524-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="47524-116">Im Tutorial [Hinzufügen einer GridView-Spalte mit Kontrollkästchen](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) haben wir ein GridView-Objekt mit einer Spalte mit Kontrollkästchen erstellt, und im Tutorial zum [Umpacken von Daten Bank Änderungen in einer Transaktion](wrapping-database-modifications-within-a-transaction-cs.md) haben wir eine Methode in der BLL erstellt, die eine Transaktion zum Löschen einer `List<T>` von `ProductID` Werten verwenden würde.</span><span class="sxs-lookup"><span data-stu-id="47524-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="47524-117">In diesem Tutorial erstellen wir unsere vorherigen Erfahrungen und führen Sie zusammen, um ein funktionierendes Beispiel für einen Batch Löschvorgang zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="47524-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>

<span data-ttu-id="47524-118">[![jede Zeile ein Kontrollkästchen enthält.](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="47524-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="47524-119">**Abbildung 1**: jede Zeile enthält ein Kontrollkästchen ([Klicken Sie, um das Bild in voller Größe anzuzeigen](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="47524-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>

## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="47524-120">Schritt 1: Erstellen der Schnittstelle zum Löschen von Batches</span><span class="sxs-lookup"><span data-stu-id="47524-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="47524-121">Da wir die Schnittstelle zum Löschen von Batches bereits im Tutorial [Hinzufügen einer GridView-Spalte mit Kontrollkästchen](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) erstellt haben, können wir Sie einfach in `BatchDelete.aspx` kopieren, anstatt Sie von Grund auf neu zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="47524-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="47524-122">Öffnen Sie zunächst die Seite `BatchDelete.aspx` im Ordner `BatchData` und die Seite `CheckBoxField.aspx` im Ordner `EnhancedGridView`.</span><span class="sxs-lookup"><span data-stu-id="47524-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="47524-123">Wechseln Sie auf der Seite "`CheckBoxField.aspx`" zur Quell Ansicht, und kopieren Sie das Markup zwischen den `<asp:Content>` Tags, wie in Abbildung 2 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="47524-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>

<span data-ttu-id="47524-124">[![das deklarative Markup von CheckBoxField. aspx in die Zwischenablage kopieren.](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="47524-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="47524-125">**Abbildung 2**: Kopieren des deklarativen Markups der `CheckBoxField.aspx` in die Zwischenablage ([Klicken Sie, um das Bild in voller Größe anzuzeigen](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="47524-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>

<span data-ttu-id="47524-126">Navigieren Sie als nächstes zur Quell Ansicht in `BatchDelete.aspx`, und fügen Sie den Inhalt der Zwischenablage in die `<asp:Content>` Tags ein.</span><span class="sxs-lookup"><span data-stu-id="47524-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="47524-127">Kopieren Sie außerdem den Code aus der Code Behind-Klasse in `CheckBoxField.aspx.cs` in die Code-Behind-Klasse in `BatchDelete.aspx.cs` (der `DeleteSelectedProducts` Schaltflächen `Click` Ereignishandler, die `ToggleCheckState`-Methode und die `Click`-Ereignishandler für die Schaltflächen `CheckAll` und `UncheckAll`).</span><span class="sxs-lookup"><span data-stu-id="47524-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="47524-128">Nachdem Sie den Inhalt kopiert haben, sollte die Code Behind-Klasse der `BatchDelete.aspx` Page s den folgenden Code enthalten:</span><span class="sxs-lookup"><span data-stu-id="47524-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="47524-129">Nehmen Sie sich nach dem Kopieren des deklarativen Markups und des Quellcodes einen Moment Zeit, um `BatchDelete.aspx` zu testen, indem Sie ihn über einen Browser anzeigen.</span><span class="sxs-lookup"><span data-stu-id="47524-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="47524-130">Es sollte eine GridView angezeigt werden, in der die ersten zehn Produkte in einer GridView aufgelistet sind, wobei jede Zeile den Namen, die Kategorie und den Preis des Produkts zusammen mit einem Kontrollkästchen auflistet.</span><span class="sxs-lookup"><span data-stu-id="47524-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="47524-131">Es sollten drei Schaltflächen vorhanden sein: alle überprüfen, alle deaktivieren und ausgewählte Produkte löschen.</span><span class="sxs-lookup"><span data-stu-id="47524-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="47524-132">Wenn Sie auf die Schaltfläche Alle überprüfen klicken, werden alle Kontrollkästchen aktiviert, während alle Kontrollkästchen deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="47524-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="47524-133">Wenn Sie auf ausgewählte Produkte löschen klicken, wird eine Meldung angezeigt, in der die `ProductID` Werte der ausgewählten Produkte aufgeführt sind. die Produkte werden jedoch nicht gelöscht.</span><span class="sxs-lookup"><span data-stu-id="47524-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>

<span data-ttu-id="47524-134">[![die Schnittstelle von CheckBoxField. aspx in batchlösch. aspx verschoben wurde.](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="47524-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="47524-135">**Abbildung 3**: die Schnittstelle aus `CheckBoxField.aspx` wurde in `BatchDeleting.aspx` verschoben ([Klicken Sie, um das Bild in voller Größe anzuzeigen](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="47524-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>

## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="47524-136">Schritt 2: Löschen der überprüften Produkte mithilfe von Transaktionen</span><span class="sxs-lookup"><span data-stu-id="47524-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="47524-137">Wenn die Schnittstelle zum Löschen des Batches erfolgreich in `BatchDeleting.aspx`kopiert wurde, besteht nur noch die Aktualisierung des Codes, sodass die Schaltfläche ausgewählte Produkte löschen die überprüften Produkte mithilfe der Methode `DeleteProductsWithTransaction` in der `ProductsBLL` Klasse löscht.</span><span class="sxs-lookup"><span data-stu-id="47524-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="47524-138">Diese Methode, die im Tutorial zum [Umpacken von Daten Bank Änderungen innerhalb einer Transaktion](wrapping-database-modifications-within-a-transaction-cs.md) hinzugefügt wird, akzeptiert als Eingabe eine `List<T>` `ProductID` Werte und löscht alle entsprechenden `ProductID` innerhalb des Gültigkeits Bereichs einer Transaktion.</span><span class="sxs-lookup"><span data-stu-id="47524-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="47524-139">Der `DeleteSelectedProducts` Schaltfläche s `Click` Ereignishandler verwendet derzeit die folgende `foreach` Schleife zum Durchlaufen der einzelnen GridView-Zeilen:</span><span class="sxs-lookup"><span data-stu-id="47524-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="47524-140">Für jede Zeile wird auf das websteuer Element für den `ProductSelector` CheckBox Programm gesteuert verwiesen.</span><span class="sxs-lookup"><span data-stu-id="47524-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="47524-141">Wenn diese Option aktiviert ist, wird die Zeile s `ProductID` aus der `DataKeys` Auflistung abgerufen, und die `DeleteResults` Bezeichnung s `Text` Eigenschaft wird aktualisiert, um eine Meldung zu enthalten, die angibt, dass die Zeile zum Löschen ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="47524-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="47524-142">Der obige Code löscht keine Datensätze, da der aufkommentierung der `ProductsBLL` Klasse `Delete`-Methode auskommentiert wird. Wenn diese Lösch Logik angewendet werden soll, würde der Code die Produkte löschen, jedoch nicht innerhalb einer atomaren Operation.</span><span class="sxs-lookup"><span data-stu-id="47524-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="47524-143">Das heißt, wenn die ersten Löschvorgänge in der Sequenz erfolgreich waren, aber eine spätere fehlgeschlagen ist (möglicherweise aufgrund einer Verletzung der Fremdschlüssel Einschränkung), wird eine Ausnahme ausgelöst, aber bereits gelöschte Produkte werden gelöscht.</span><span class="sxs-lookup"><span data-stu-id="47524-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="47524-144">Um die Atomizität sicherzustellen, müssen wir stattdessen die `ProductsBLL` Class s `DeleteProductsWithTransaction`-Methode verwenden.</span><span class="sxs-lookup"><span data-stu-id="47524-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="47524-145">Da diese Methode eine Liste mit `ProductID` Werten akzeptiert, müssen wir diese Liste zuerst aus dem Raster kompilieren und Sie dann als Parameter übergeben.</span><span class="sxs-lookup"><span data-stu-id="47524-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="47524-146">Zuerst erstellen wir eine Instanz eines `List<T>` vom Typ `int`.</span><span class="sxs-lookup"><span data-stu-id="47524-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="47524-147">Innerhalb der `foreach` Schleife müssen die ausgewählten Produkte `ProductID` Werte dieser `List<T>`hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="47524-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="47524-148">Nach der Schleife müssen diese `List<T>` an die `ProductsBLL` Class-Klasse `DeleteProductsWithTransaction`-Methode übermittelt werden.</span><span class="sxs-lookup"><span data-stu-id="47524-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="47524-149">Aktualisieren Sie die `DeleteSelectedProducts` Schaltfläche s `Click` Ereignishandler durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="47524-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="47524-150">Der aktualisierte Code erstellt einen `List<T>` vom Typ `int` (`productIDsToDelete`) und füllt ihn mit den zu löschenden `ProductID` Werten.</span><span class="sxs-lookup"><span data-stu-id="47524-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="47524-151">Wenn nach der `foreach`-Schleife mindestens ein Produkt ausgewählt ist, wird die `ProductsBLL` Class s `DeleteProductsWithTransaction`-Methode aufgerufen und an diese Liste übermittelt.</span><span class="sxs-lookup"><span data-stu-id="47524-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="47524-152">Außerdem wird die `DeleteResults` Bezeichnung angezeigt, und die Daten werden an die GridView-Ansicht zurückgebracht (sodass die neu gelöschten Datensätze nicht mehr als Zeilen im Raster angezeigt werden).</span><span class="sxs-lookup"><span data-stu-id="47524-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="47524-153">Abbildung 4 zeigt die GridView, nachdem eine Reihe von Zeilen zum Löschen ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="47524-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="47524-154">In Abbildung 5 wird der Bildschirm unmittelbar nach dem Klicken auf die Schaltfläche ausgewählte Produkte löschen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="47524-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="47524-155">Beachten Sie, dass in Abbildung 5 die `ProductID` Werte der gelöschten Datensätze in der Bezeichnung unterhalb der GridView angezeigt werden und diese Zeilen nicht mehr in der GridView angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="47524-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>

<span data-ttu-id="47524-156">[![die ausgewählten Produkte gelöscht werden.](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="47524-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="47524-157">**Abbildung 4**: die ausgewählten Produkte werden gelöscht ([Klicken Sie, um das Bild in voller Größe anzuzeigen](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="47524-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>

<span data-ttu-id="47524-158">[![der ProductID-Werte gelöschter Produkte werden unterhalb der GridView aufgeführt.](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="47524-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="47524-159">**Abbildung 5**: die gelöschten Produkte `ProductID` Werte werden unterhalb der GridView aufgelistet ([Klicken Sie, um das Bild in voller Größe anzuzeigen](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="47524-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>

> [!NOTE]
> <span data-ttu-id="47524-160">Fügen Sie zum Testen der `DeleteProductsWithTransaction` Method s Atomicity manuell einen Eintrag für ein Produkt in der `Order Details` Tabelle hinzu, und versuchen Sie dann, das Produkt (zusammen mit anderen) zu löschen.</span><span class="sxs-lookup"><span data-stu-id="47524-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="47524-161">Wenn Sie versuchen, das Produkt mit einer zugeordneten Bestellung zu löschen, erhalten Sie eine Verletzung der Fremdschlüssel Einschränkung, aber beachten Sie, dass für die anderen ausgewählten Produkt Löschungen ein Rollback ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="47524-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>

## <a name="summary"></a><span data-ttu-id="47524-162">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="47524-162">Summary</span></span>

<span data-ttu-id="47524-163">Das Erstellen einer Schnittstelle zum Löschen von Batches umfasst das Hinzufügen einer GridView-Spalte mit einer Spalte mit Kontrollkästchen und einem Schaltflächen-websteuer Element, mit dem alle ausgewählten Zeilen als einzelner atomarer Vorgang gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="47524-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="47524-164">In diesem Tutorial haben wir eine solche Schnittstelle erstellt, indem wir die Arbeit in zwei vorherigen Tutorials zusammengefasst, [eine GridView-Spalte mit Kontrollkästchen hinzugefügt](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) und [Daten Bank Änderungen innerhalb einer Transaktion](wrapping-database-modifications-within-a-transaction-cs.md)Umtragen.</span><span class="sxs-lookup"><span data-stu-id="47524-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="47524-165">Im ersten Tutorial haben wir eine GridView mit einer Spalte mit Kontrollkästchen erstellt, und in der letzteren Zeit haben wir eine Methode in der BLL implementiert, bei der eine `List<T>` `ProductID` Werte übertragen wurde, die alle innerhalb des Gültigkeits Bereichs einer Transaktion gelöscht wurden.</span><span class="sxs-lookup"><span data-stu-id="47524-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="47524-166">Im nächsten Tutorial erstellen wir eine Schnittstelle zum Ausführen von Batch Einfügungen.</span><span class="sxs-lookup"><span data-stu-id="47524-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="47524-167">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="47524-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="47524-168">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="47524-168">About the Author</span></span>

<span data-ttu-id="47524-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor der sieben ASP/ASP. net-Bücher und Gründer von [4GuysFromRolla.com](http://www.4guysfromrolla.com), hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="47524-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="47524-170">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="47524-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="47524-171">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 2,0 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="47524-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="47524-172">Er kann übermitchell@4GuysFromRolla.comerreicht werden [.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="47524-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="47524-173">oder über seinen Blog finden Sie unter [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="47524-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="47524-174">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="47524-174">Special Thanks To</span></span>

<span data-ttu-id="47524-175">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="47524-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="47524-176">Die führenden Reviewer für dieses Tutorial waren Hilton giesanow und Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="47524-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="47524-177">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="47524-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="47524-178">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.comablegen.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="47524-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="47524-179">[Zurück](batch-updating-cs.md)
> [Weiter](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="47524-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
