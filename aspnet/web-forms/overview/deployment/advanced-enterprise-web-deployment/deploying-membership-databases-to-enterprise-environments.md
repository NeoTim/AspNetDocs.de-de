---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: Bereitstellen von Datenbankrollenmitgliedschaften in Unternehmensumgebungen | Microsoft-Dokumentation
author: jrjlee
description: Dieser Artikel beschreibt die wichtigsten Überlegungen und Herausforderungen, die Sie zu umgehen, wenn Sie ASP.NET Application Services-Datenbanken (gängiger... bereitstellen müssen
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: eea0761ac85693553808e581a8712c822d19c226
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/09/2019
ms.locfileid: "59390479"
---
# <a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="0a259-103">Bereitstellen von Datenbankrollenmitgliedschaften in Unternehmensumgebungen</span><span class="sxs-lookup"><span data-stu-id="0a259-103">Deploying Membership Databases to Enterprise Environments</span></span>

<span data-ttu-id="0a259-104">durch [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="0a259-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="0a259-105">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="0a259-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="0a259-106">In diesem Thema wird erläutert, die wichtige Überlegungen und Herausforderungen, die Sie zum Lösen des Problems bereitstellen ASP.NET-Anwendung-Services-Datenbanken (häufig als Datenbankrollenmitgliedschaften bezeichnet) in Test-, Staging- und produktionsumgebungen Umgebungen benötigen.</span><span class="sxs-lookup"><span data-stu-id="0a259-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="0a259-107">Außerdem wird beschrieben, Ansätze, die Sie verwenden können, um diese Herausforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="0a259-107">It also describes approaches you can use to meet these challenges.</span></span>


<span data-ttu-id="0a259-108">In diesem Thema ist Teil einer Reihe von Tutorials, die auf der Basis der bereitstellungsanforderungen Enterprise ein fiktives Unternehmen, die mit dem Namen Fabrikam, Inc. Dieser tutorialreihe verwendet eine beispiellösung&#x2014;der [Contact Manager-Lösung](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;zur Darstellung einer Webanwendung mit einem realistischen Maß an Komplexität, einschließlich einer ASP.NET MVC 3-Anwendung, eine Windows-Kommunikation Foundation (WCF)-Dienst und ein Datenbankprojekt.</span><span class="sxs-lookup"><span data-stu-id="0a259-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="0a259-109">Die Methode für die Bereitstellung das Kernstück des in diesen Tutorials basiert auf den geteilten Projekt Dateiansatz beschrieben, die [Grundlegendes zur Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in dem der Buildprozess durch gesteuert wird zwei Projektdateien&#x2014;enthält Erstellen Sie die Anweisungen, die für jede zielumgebung, und enthält umgebungsspezifische Build & Deployment-Einstellungen gelten.</span><span class="sxs-lookup"><span data-stu-id="0a259-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="0a259-110">Zur Erstellungszeit wird die umgebungsspezifischen-Projektdatei in die Unabhängigkeit von der Umgebung Projektdatei, um einen vollständigen Satz von einrichtungsanweisungen bilden zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="0a259-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="0a259-111">Was sind die Probleme, wenn Sie eine Mitgliedschaftsdatenbank bereitstellen?</span><span class="sxs-lookup"><span data-stu-id="0a259-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="0a259-112">Wenn Sie eine Strategie für die Bereitstellung für eine Datenbank, entwickeln, ist zunächst, die Sie berücksichtigen müssen in den meisten Fällen welche Daten, die Sie bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0a259-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="0a259-113">In einer Entwicklungs- oder Test-Umgebung empfiehlt es sich um Benutzerkontodaten zum vereinfachten testen schnell und einfach bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0a259-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="0a259-114">In einer Umgebung Staging- oder produktionsumgebung ist es sehr unwahrscheinlich, dass Sie Benutzerkontodaten bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0a259-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="0a259-115">Leider führen Datenbankrollenmitgliedschaften ASP.NET einige spezielle Aufgaben, die diese Entscheidung zu treffen, die sehr viel komplizierter:</span><span class="sxs-lookup"><span data-stu-id="0a259-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="0a259-116">Eine Schema only-Bereitstellung wird die Mitgliedschaftsdatenbank in einen nicht betriebsfähigen Zustand belassen.</span><span class="sxs-lookup"><span data-stu-id="0a259-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="0a259-117">Dies ist, da die Mitgliedschaftsdatenbank einige Konfigurationsdaten enthält (in der **Aspnet\_SchemaVersions** Tabelle), die die Datenbank benötigt, um zu funktionieren.</span><span class="sxs-lookup"><span data-stu-id="0a259-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="0a259-118">Daher ist es möglich, wenn Sie eine Schema only-Bereitstellung einer Mitgliedschaftsdatenbank ausführen, um Benutzerkontodaten auszuschließen, müssen Sie zum Ausführen eines Skripts nach der Bereitstellung, um die erforderliche Konfigurationsdaten hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="0a259-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="0a259-119">Je nachdem, wie Ihre Mitgliedschaftsdatenbank konfiguriert ist kann der Mitgliedschaftsanbieter den Schlüssel des Computers zum Verschlüsseln von Kennwörtern, und speichern sie in der Datenbank verwenden.</span><span class="sxs-lookup"><span data-stu-id="0a259-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="0a259-120">In diesem Fall werden alle Benutzerdaten für das Konto, die Sie mit der Datenbank bereitstellen kann, die auf dem Zielserver nicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="0a259-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="0a259-121">Aus diesem Grund ist das Bereitstellen von Benutzerkontodaten nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="0a259-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="0a259-122">Auswählen einer Strategie für die Mitgliedschaft in Datenbank</span><span class="sxs-lookup"><span data-stu-id="0a259-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="0a259-123">Verwenden Sie diese Richtlinien bei der Auswahl eine Mitgliedschaftsdatenbank in einer Server-unternehmensumgebung bereitstellen:</span><span class="sxs-lookup"><span data-stu-id="0a259-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="0a259-124">Wo immer dies möglich ist, stellen Sie keine Mitgliedschaft Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="0a259-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="0a259-125">Erstellen Sie stattdessen die Mitgliedschaftsdatenbank manuell auf dem Zielserver für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="0a259-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="0a259-126">Wenn Sie Ihr Datenbankschema Mitgliedschaft nicht angepasst haben, können Sie einfach erstellen eine neue in situ an der mit dem Ziel der [ASP.NET SQL Server-Registrierungstool (Aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="0a259-127">Wenn keine Möglichkeit besteht jedoch eine Mitgliedschaftsdatenbank bereitzustellenden&#x2014;z. B., wenn Sie umfangreiche Änderungen am Datenbankschema vorgenommen haben&#x2014;sollten Sie eine Schema only-Bereitstellung von der Mitgliedschaftsdatenbank auszuschließende Benutzerkontodaten, ausführen und dann Führen Sie ein Skript nach der Bereitstellung, um alle erforderlichen Konfigurationsdaten hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="0a259-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="0a259-128">Zahlreiche allgemeine Anleitungen finden Sie auf diese Ansätze in [Vorgehensweise: Bereitstellen die ASP.NET-Mitgliedschaftsdatenbank ohne Benutzerkonten](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="0a259-129">Es ist wichtig zu beachten, dass *das Schema Ihrer Mitgliedschaft-Datenbank ist wahrscheinlich relativ statisch*.</span><span class="sxs-lookup"><span data-stu-id="0a259-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="0a259-130">Auch wenn Sie die Mitgliedschaftsdatenbank angepasst haben, es ist unwahrscheinlich, müssen Sie zum Aktualisieren des Schemas in regelmäßigen Abständen&#x2014;geht nicht mit der gleichen Häufigkeit als der Code in eine Webanwendung oder ein Datenbankprojekt ändern.</span><span class="sxs-lookup"><span data-stu-id="0a259-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="0a259-131">Daher sollte nicht müssen Sie automatisierte oder Schritt für Schritt Bereitstellungsprozesse die Mitgliedschaftsdatenbank einschließt.</span><span class="sxs-lookup"><span data-stu-id="0a259-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="0a259-132">Verwenden VSDBCMD ein Datenbankschema Mitgliedschaft aktualisieren</span><span class="sxs-lookup"><span data-stu-id="0a259-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="0a259-133">Wenn Sie die Struktur Ihrer Mitgliedschaft-Datenbank nach der ersten Bereitstellung ändern, sollten Sie nicht das Internet Information Services (IIS)-Webbereitstellungstool (Web Deploy) zu verwenden, um die Datenbank erneut bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0a259-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="0a259-134">Der Datenbankfunktionalität für die Bereitstellung in Web Deploy umfasst nicht die Möglichkeit, stellen differenzielle Updates in eine Zieldatenbank&#x2014;löschen Sie stattdessen Web Deploy muss und die Datenbank neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0a259-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="0a259-135">Dies bedeutet, dass Sie alle vorhandenen Benutzer-Konto-Daten verlieren, die in der Regel in Staging-oder produktionsumgebungen nicht erwünscht ist.</span><span class="sxs-lookup"><span data-stu-id="0a259-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="0a259-136">Die Alternative ist das VSDBCMD-Dienstprogramm verwenden, um das Schema der Zieldatenbank aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="0a259-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="0a259-137">VSDBCMD enthält zwei wichtige Funktionen.</span><span class="sxs-lookup"><span data-stu-id="0a259-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="0a259-138">Zunächst können sie das Schema einer vorhandenen Datenbank in eine DBSCHEMA-Datei importieren.</span><span class="sxs-lookup"><span data-stu-id="0a259-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="0a259-139">Andererseits können sie eine DBSCHEMA-Datei zu einer vorhandenen Datenbank als eine differenzielle Update bereitstellen Dies bedeutet, dass nur, die erforderlichen Änderungen vorgenommen an die Zieldatenbank, die auf dem neuesten Stand zu bringen und Sie keine Daten verlieren.</span><span class="sxs-lookup"><span data-stu-id="0a259-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="0a259-140">Sie können diese allgemeinen Schritte verwenden, um ein Datenbankschema Mitgliedschaft zu aktualisieren:</span><span class="sxs-lookup"><span data-stu-id="0a259-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="0a259-141">Verwenden Sie die VSDBCMD **Import** Aktion aus, um eine DBSCHEMA-Datei für die Quelldatenbank für die Mitgliedschaft zu generieren.</span><span class="sxs-lookup"><span data-stu-id="0a259-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="0a259-142">Dieses Verfahren wird beschrieben, [Vorgehensweise: Importieren eines Schemas an einer Eingabeaufforderung](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="0a259-143">Verwenden Sie die VSDBCMD **bereitstellen** Aktion aus, um die DBSCHEMA-Datei für die Zieldatenbank für die Gruppenmitgliedschaft bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0a259-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="0a259-144">Dieses Verfahren wird beschrieben, [Befehlszeilenreferenz für VSDBCMD. EXE-Datei ("Bereitstellung" und "Schema importieren")](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="0a259-145">Schlussbemerkung</span><span class="sxs-lookup"><span data-stu-id="0a259-145">Conclusion</span></span>

<span data-ttu-id="0a259-146">In diesem Thema beschrieben einige der Herausforderungen, die Sie möglicherweise stoßen, wenn Sie ASP.NET Membership-Datenbanken in verschiedenen zielumgebungen bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0a259-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="0a259-147">Insbesondere erläutert er, weshalb Schema only-Bereitstellungen die Mitgliedschaftsdatenbank in einen nicht betriebsfähigen Zustand belassen werden, und warum das Bereitstellen von Benutzerkontodaten nicht unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="0a259-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="0a259-148">Das Thema präsentiert auch Anleitungen zum Bereitstellen und Bereitstellen von Datenbankrollenmitgliedschaften in verschiedenen Szenarien zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="0a259-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="0a259-149">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="0a259-149">Further Reading</span></span>

<span data-ttu-id="0a259-150">Weitere Anleitungen und Beispiele zur Verwendung von VSDBCMD finden Sie unter [Befehlszeilenreferenz für VSDBCMD. EXE-Datei ("Bereitstellung" und "Schema importieren")](https://msdn.microsoft.com/library/dd193283.aspx) und [Vorgehensweise: Importieren eines Schemas an einer Eingabeaufforderung](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="0a259-151">Weitere Informationen zur Verwendung von Aspnet\_regsql.exe zum Erstellen von Datenbanken mit Mitgliedschaft, finden Sie unter [ASP.NET SQL Server-Registrierungstool (Aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="0a259-152">Eine allgemeine Anleitung zum Bereitstellen von Datenbankrollenmitgliedschaften, finden Sie unter [Vorgehensweise: Bereitstellen die ASP.NET-Mitgliedschaftsdatenbank ohne Benutzerkonten](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="0a259-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0a259-153">[Zurück](deploying-database-role-memberships-to-test-environments.md)
> [Weiter](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="0a259-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
