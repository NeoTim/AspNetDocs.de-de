---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
title: Bereitstellen von Mitgliedschafts Datenbanken in Unternehmensumgebungen | Microsoft-Dokumentation
author: jrjlee
description: In diesem Thema werden die wichtigsten Überlegungen und Probleme erläutert, die Sie bei der Bereitstellung von ASP.NET-Datenbanken (Common...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 3cf765df-d311-4f68-a295-c9685ceea830
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments
msc.type: authoredcontent
ms.openlocfilehash: 50f49af502b75aa5ad52756a76a5e7340aca53f7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78422157"
---
# <a name="deploying-membership-databases-to-enterprise-environments"></a><span data-ttu-id="4d55d-103">Bereitstellen von Datenbankrollenmitgliedschaften in Unternehmensumgebungen</span><span class="sxs-lookup"><span data-stu-id="4d55d-103">Deploying Membership Databases to Enterprise Environments</span></span>

<span data-ttu-id="4d55d-104">von [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="4d55d-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="4d55d-105">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="4d55d-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="4d55d-106">In diesem Thema werden die wichtigsten Überlegungen und Probleme erläutert, die Sie bei der Bereitstellung von ASP.NET-Anwendungs Dienst Datenbanken (häufig als Mitgliedschafts Datenbanken bezeichnet) in Test-, Staging-oder Produktionsumgebungen überwinden müssen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-106">This topic explains the key considerations and challenges you'll need to overcome when you provision ASP.NET application services databases (more commonly referred to as membership databases) in test, staging, or production environments.</span></span> <span data-ttu-id="4d55d-107">Außerdem werden die Ansätze beschrieben, die Sie verwenden können, um diese Herausforderungen zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-107">It also describes approaches you can use to meet these challenges.</span></span>

<span data-ttu-id="4d55d-108">Dieses Thema ist Teil einer Reihe von Tutorials, basierend auf den Anforderungen an die Unternehmens Bereitstellung eines fiktiven Unternehmens namens Fabrikam, Inc. In dieser tutorialreihe wird&#x2014;eine Beispiellösung der [Contact Manager-Lösung](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;verwendet, um eine Webanwendung mit einem realistischen Komplexitäts Grad darzustellen, einschließlich einer ASP.NET MVC 3-Anwendung, eines Windows Communication Foundation (WCF)-Diensts und eines Datenbankprojekts.</span><span class="sxs-lookup"><span data-stu-id="4d55d-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="4d55d-109">Die Bereitstellungs Methode im Kern dieser Tutorials basiert auf dem Untergrund Legendes [zur Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md)beschriebenen Ansatz, in dem der Buildprozess von zwei Projektdateien&#x2014;gesteuert wird, die Buildanweisungen enthalten, die für jede Zielumgebung gelten, und eine mit Umgebungs spezifischen Build-und Bereitstellungs Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="4d55d-110">Zum Zeitpunkt der Erstellung wird die Umgebungs spezifische Projektdatei in der Umgebungs unabhängigen Projektdatei zusammengeführt, um einen kompletten Satz von Buildanweisungen zu bilden.</span><span class="sxs-lookup"><span data-stu-id="4d55d-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="what-are-the-issues-when-you-deploy-a-membership-database"></a><span data-ttu-id="4d55d-111">Welche Probleme bestehen beim Bereitstellen einer Mitgliedschafts Datenbank?</span><span class="sxs-lookup"><span data-stu-id="4d55d-111">What Are the Issues When You Deploy a Membership Database?</span></span>

<span data-ttu-id="4d55d-112">In den meisten Fällen müssen Sie, wenn Sie eine Bereitstellungs Strategie für eine Datenbank entwickeln, die Daten, die Sie bereitstellen möchten, als erstes in Erwägung gezogen werden.</span><span class="sxs-lookup"><span data-stu-id="4d55d-112">In most cases, when you devise a deployment strategy for a database, the first thing you need to consider is what data you want to deploy.</span></span> <span data-ttu-id="4d55d-113">In einer Entwicklungs-oder Testumgebung können Sie Benutzerkontodaten bereitstellen, um schnelle und einfache Tests zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-113">In a development or test environment, you might want to deploy user account data to facilitate quick and easy testing.</span></span> <span data-ttu-id="4d55d-114">In einer Staging-oder Produktionsumgebung ist es sehr unwahrscheinlich, dass Sie Benutzerkontodaten bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="4d55d-114">In a staging or production environment, it's very unlikely that you'd want to deploy user account data.</span></span>

<span data-ttu-id="4d55d-115">Leider stellen ASP.net-Mitgliedschafts Datenbanken einige besondere Herausforderungen dar, die diese Entscheidung wesentlich komplexer machen:</span><span class="sxs-lookup"><span data-stu-id="4d55d-115">Unfortunately, ASP.NET membership databases introduce some specific challenges that make this decision a lot more complex:</span></span>

- <span data-ttu-id="4d55d-116">Bei einer reinen Schema Bereitstellung wird die Mitgliedschafts Datenbank in einem nicht funktionsfähigen Status belassen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-116">A schema-only deployment will leave the membership database in a non-operational state.</span></span> <span data-ttu-id="4d55d-117">Dies liegt daran, dass die Mitgliedschafts Datenbank einige Konfigurationsdaten (in der Tabelle **ASPNET\_schemaversions** ) enthält, die die Datenbank benötigt, damit Sie funktioniert.</span><span class="sxs-lookup"><span data-stu-id="4d55d-117">This is because the membership database includes some configuration data (in the **aspnet\_SchemaVersions** table) that the database requires in order to function.</span></span> <span data-ttu-id="4d55d-118">Wenn Sie also eine reine Schema Bereitstellung der Mitgliedschafts Datenbank durchführen, um Benutzerkontodaten auszuschließen, müssen Sie ein Skript nach der Bereitstellung ausführen, um die wichtigen Konfigurationsdaten hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-118">As such, if you perform a schema-only deployment of your membership database in order to exclude user account data, you'll need to run a post-deployment script to add the essential configuration data.</span></span>
- <span data-ttu-id="4d55d-119">Abhängig davon, wie die Mitgliedschafts Datenbank konfiguriert ist, kann der Mitgliedschafts Anbieter den Computer Schlüssel verwenden, um Kenn Wörter zu verschlüsseln und in der Datenbank zu speichern.</span><span class="sxs-lookup"><span data-stu-id="4d55d-119">Depending on how your membership database is configured, the membership provider may use the machine key to encrypt passwords and store them in the database.</span></span> <span data-ttu-id="4d55d-120">In diesem Fall können alle Benutzerkontodaten, die Sie mit der Datenbank bereitstellen, auf dem Zielserver unbrauchbar werden.</span><span class="sxs-lookup"><span data-stu-id="4d55d-120">In this case, any user account data you deploy with the database will become unusable on the destination server.</span></span> <span data-ttu-id="4d55d-121">Aus diesem Grund wird das Bereitstellen von Benutzerkontodaten nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="4d55d-121">For this reason, deploying user account data is not a supported scenario.</span></span>

## <a name="choosing-a-membership-database-strategy"></a><span data-ttu-id="4d55d-122">Auswählen einer Strategie für die Mitgliedschafts Datenbank</span><span class="sxs-lookup"><span data-stu-id="4d55d-122">Choosing a Membership Database Strategy</span></span>

<span data-ttu-id="4d55d-123">Verwenden Sie diese Richtlinien, wenn Sie auswählen, wie eine Mitgliedschafts Datenbank in einer Unternehmensserver Umgebung bereitgestellt werden soll:</span><span class="sxs-lookup"><span data-stu-id="4d55d-123">Use these guidelines when you choose how to provision a membership database in an enterprise server environment:</span></span>

- <span data-ttu-id="4d55d-124">Stellen Sie, sofern möglich, keine Mitgliedschafts Datenbanken bereit.</span><span class="sxs-lookup"><span data-stu-id="4d55d-124">Wherever possible, do not deploy membership databases.</span></span> <span data-ttu-id="4d55d-125">Erstellen Sie stattdessen die Mitgliedschafts Datenbank manuell auf dem Ziel Datenbankserver.</span><span class="sxs-lookup"><span data-stu-id="4d55d-125">Instead, create the membership database manually on the target database server.</span></span> <span data-ttu-id="4d55d-126">Wenn Sie Ihr Mitgliedschafts Datenbankschema nicht angepasst haben, können Sie einfach eine neue Datei am Ziel mit dem [ASP.NET SQL Server Registration-Tool (ASPNET\_RegSql. exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx)erstellen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-126">If you haven't customized your membership database schema, you can simply create a new one in situ at the destination using the [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span>
- <span data-ttu-id="4d55d-127">Wenn Sie über keine Option verfügen, aber zum Beispiel eine&#x2014;Mitgliedschafts Datenbank bereitstellen möchten, sollten Sie, wenn Sie Umfang&#x2014;reiche Änderungen am Datenbankschema vorgenommen haben, eine reine Schema Bereitstellung der Mitgliedschafts Datenbank durchführen, um Benutzerkontodaten auszuschließen und dann ein Skript nach der Bereitstellung auszuführen, um alle erforderlichen Konfigurationsdaten hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-127">If you have no option but to deploy a membership database&#x2014;for example, if you've made extensive modifications to the database schema&#x2014;you should perform a schema-only deployment of the membership database, to exclude user account data, and then run a post-deployment script to add any required configuration data.</span></span> <span data-ttu-id="4d55d-128">Eine umfassende Anleitung zu diesen Vorgehensweisen finden Sie unter Gewusst [wie: Bereitstellen der ASP.net-Mitgliedschafts Datenbank ohne Angabe von Benutzerkonten](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="4d55d-128">You can find broad guidance on these approaches in [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

<span data-ttu-id="4d55d-129">Beachten Sie, dass *das Schema Ihrer Mitgliedschafts Datenbank wahrscheinlich relativ statisch ist*.</span><span class="sxs-lookup"><span data-stu-id="4d55d-129">It's important to remember that *the schema of your membership database is likely to be fairly static*.</span></span> <span data-ttu-id="4d55d-130">Auch wenn Sie die Mitgliedschafts Datenbank angepasst haben, ist es unwahrscheinlich, dass Sie das Schema regelmäßig aktualisieren müssen, da&#x2014;es nicht mit der gleichen Häufigkeit wie der Code in einer Webanwendung oder einem Datenbankprojekt geändert wird.</span><span class="sxs-lookup"><span data-stu-id="4d55d-130">Even if you've customized the membership database, it's unlikely that you'll need to update the schema on a regular basis&#x2014;it's not going to change with the same frequency as the code in a web application or a database project.</span></span> <span data-ttu-id="4d55d-131">Daher sollten Sie die Mitgliedschafts Datenbank nicht in automatisierte oder einstufige Bereitstellungs Prozesse einschließen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-131">As such, you shouldn't need to include the membership database in any automated or single-step deployment processes.</span></span>

## <a name="using-vsdbcmd-to-update-a-membership-database-schema"></a><span data-ttu-id="4d55d-132">Verwenden von VSDBCMD zum Aktualisieren eines Mitgliedschafts Datenbankschemas</span><span class="sxs-lookup"><span data-stu-id="4d55d-132">Using VSDBCMD to Update a Membership Database Schema</span></span>

<span data-ttu-id="4d55d-133">Wenn Sie die Struktur der Mitgliedschafts Datenbank nach der ersten Bereitstellung ändern, empfiehlt es sich, das Internetinformationsdienste (IIS)-Webbereitstellungs Tool (Web deploy) zum erneuten Bereitstellen der Datenbank zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="4d55d-133">If you modify the structure of your membership database after your first deployment, you may not want to use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to redeploy the database.</span></span> <span data-ttu-id="4d55d-134">Die Funktion zur Daten Bank Bereitstellung in Web deploy umfasst nicht die Möglichkeit, stattdessen differenzielle Aktualisierungen&#x2014;an einer Zieldatenbank vorzunehmen, Web deploy muss die Datenbank löschen und neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-134">The database deployment functionality in Web Deploy doesn't include the capability to make differential updates to a destination database&#x2014;instead, Web Deploy must drop and re-create the database.</span></span> <span data-ttu-id="4d55d-135">Dies bedeutet, dass Sie alle vorhandenen Benutzerkontodaten verlieren, was in Staging-oder Produktionsumgebungen normalerweise unerwünscht ist.</span><span class="sxs-lookup"><span data-stu-id="4d55d-135">This means that you lose any existing user account data, which is typically undesirable in staging or production environments.</span></span>

<span data-ttu-id="4d55d-136">Alternativ können Sie das VSDBCmd-Hilfsprogramm verwenden, um das Schema der Zieldatenbank zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="4d55d-136">The alternative is to use the VSDBCMD utility to update the schema of your destination database.</span></span> <span data-ttu-id="4d55d-137">VSDBCMD umfasst zwei wichtige Funktionen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-137">VSDBCMD includes two important capabilities.</span></span> <span data-ttu-id="4d55d-138">Zuerst kann das Schema einer vorhandenen Datenbank in eine dbschema-Datei importiert werden.</span><span class="sxs-lookup"><span data-stu-id="4d55d-138">First, it can import the schema of an existing database into a .dbschema file.</span></span> <span data-ttu-id="4d55d-139">Zweitens kann es eine dbschema-Datei in einer vorhandenen Datenbank als differenzielles Update bereitstellen. Dies bedeutet, dass nur die Änderungen vorgenommen werden, die erforderlich sind, um die Zieldatenbank auf den neuesten Stand zu bringen, und dass keine Daten verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-139">Second, it can deploy a .dbschema file to an existing database as a differential update, which means that it only makes the changes required to bring the target database up to date and you don't lose any data.</span></span>

<span data-ttu-id="4d55d-140">Zum Aktualisieren eines Mitgliedschafts Datenbankschemas können Sie die folgenden Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="4d55d-140">You can use these high-level steps to update a membership database schema:</span></span>

1. <span data-ttu-id="4d55d-141">Verwenden Sie die **Import** Aktion von VSDBCMD, um eine dbschema-Datei für die Quell Mitgliedschafts Datenbank zu generieren.</span><span class="sxs-lookup"><span data-stu-id="4d55d-141">Use the VSDBCMD **Import** action to generate a .dbschema file for your source membership database.</span></span> <span data-ttu-id="4d55d-142">Dieses Verfahren wird unter Gewusst [wie: Importieren eines Schemas aus einer Eingabeaufforderung](https://msdn.microsoft.com/library/dd172135.aspx)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="4d55d-142">This procedure is described in [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span>
2. <span data-ttu-id="4d55d-143">Verwenden Sie die Bereitstellungs **Aktion "** VSDBCmd", um die dbschema-Datei in Ihrer Ziel Mitgliedschafts Datenbank bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-143">Use the VSDBCMD **Deploy** action to deploy the .dbschema file to your destination membership database.</span></span> <span data-ttu-id="4d55d-144">Dieses Verfahren wird in der [Befehlszeilen Referenz für VSDBCMD beschrieben. EXE (Bereitstellung und Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d55d-144">This procedure is described in [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="4d55d-145">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="4d55d-145">Conclusion</span></span>

<span data-ttu-id="4d55d-146">In diesem Thema wurden einige der Herausforderungen beschrieben, die möglicherweise auftreten, wenn Sie ASP.net-Mitgliedschafts Datenbanken in verschiedenen Ziel Umgebungen bereitstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="4d55d-146">This topic described some of the challenges you may face when you need to provision ASP.NET membership databases in various target environments.</span></span> <span data-ttu-id="4d55d-147">Insbesondere wurde erläutert, warum bei reinen Schema Bereitstellungen die Mitgliedschafts Datenbank nicht in Betrieb ist und die Bereitstellung von Benutzerkontodaten nicht unterstützt wird.</span><span class="sxs-lookup"><span data-stu-id="4d55d-147">In particular, it explained why schema-only deployments will leave the membership database in a non-operational state and why deploying user account data is not supported.</span></span> <span data-ttu-id="4d55d-148">Das Thema stellt auch Anleitungen zum Bereitstellen, bereitstellen und Aktualisieren von Mitgliedschafts Datenbanken in verschiedenen Szenarien bereit.</span><span class="sxs-lookup"><span data-stu-id="4d55d-148">The topic also presented guidance on how to provision, deploy, and update membership databases in different scenarios.</span></span>

## <a name="further-reading"></a><span data-ttu-id="4d55d-149">Weitere nützliche Informationen</span><span class="sxs-lookup"><span data-stu-id="4d55d-149">Further Reading</span></span>

<span data-ttu-id="4d55d-150">Weitere Anleitungen und Beispiele zur Verwendung von VSDBCMD finden Sie unter [Befehlszeilen Referenz für VSDBCMD. EXE (Bereitstellung und Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) und Gewusst [wie: Importieren eines Schemas von einer Eingabeaufforderung aus](https://msdn.microsoft.com/library/dd172135.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d55d-150">For more guidance and examples of how to use VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Import a Schema from a Command Prompt](https://msdn.microsoft.com/library/dd172135.aspx).</span></span> <span data-ttu-id="4d55d-151">Weitere Informationen zur Verwendung von ASPNET\_RegSql. exe zum Erstellen von Mitgliedschafts Datenbanken finden Sie unter [ASP.NET SQL Server Registration Tool (ASPNET\_RegSql. exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="4d55d-151">For more information on using aspnet\_regsql.exe to create membership databases, see [ASP.NET SQL Server Registration Tool (aspnet\_regsql.exe)](https://msdn.microsoft.com/library/ms229862(v=vs.100).aspx).</span></span> <span data-ttu-id="4d55d-152">Allgemeine Anleitungen zum Bereitstellen von Mitgliedschafts Datenbanken finden [Sie unter Gewusst wie: Bereitstellen der ASP.net-Mitgliedschafts Datenbank ohne einschließen von Benutzerkonten](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span><span class="sxs-lookup"><span data-stu-id="4d55d-152">For more general guidance on deploying membership databases, see [How to: Deploy the ASP.NET Membership Database Without Including User Accounts](https://msdn.microsoft.com/library/ff361972(v=vs.100).aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4d55d-153">[Zurück](deploying-database-role-memberships-to-test-environments.md)
> [Weiter](excluding-files-and-folders-from-deployment.md)</span><span class="sxs-lookup"><span data-stu-id="4d55d-153">[Previous](deploying-database-role-memberships-to-test-environments.md)
[Next](excluding-files-and-folders-from-deployment.md)</span></span>
