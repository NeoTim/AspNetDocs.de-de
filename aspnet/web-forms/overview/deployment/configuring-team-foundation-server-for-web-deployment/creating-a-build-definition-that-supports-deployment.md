---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Erstellen eine Builddefinition, unterstützt die Bereitstellung | Microsoft-Dokumentation
author: jrjlee
description: Wenn Sie jede Art von Build in Team Foundation Server (TFS) 2010 ausführen möchten, müssen Sie eine Builddefinition innerhalb des Teamprojekts erstellen. Dieses Thema des...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: 97a60274d9306ea0ee332fcc1ab9e487355dbedb
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/17/2019
ms.locfileid: "59384939"
---
# <a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="465da-104">Erstellen einer Builddefinition mit Unterstützung für Bereitstellungen</span><span class="sxs-lookup"><span data-stu-id="465da-104">Creating a Build Definition That Supports Deployment</span></span>

<span data-ttu-id="465da-105">durch [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="465da-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="465da-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="465da-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="465da-107">Wenn Sie jede Art von Build in Team Foundation Server (TFS) 2010 ausführen möchten, müssen Sie eine Builddefinition innerhalb des Teamprojekts erstellen.</span><span class="sxs-lookup"><span data-stu-id="465da-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="465da-108">In diesem Thema wird beschrieben, wie Sie eine neue Builddefinition in TFS erstellen und wie Sie Web-Bereitstellung im Rahmen des Buildprozesses in Team Build steuern.</span><span class="sxs-lookup"><span data-stu-id="465da-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>


<span data-ttu-id="465da-109">In diesem Thema ist Teil einer Reihe von Tutorials, die auf der Basis der bereitstellungsanforderungen Enterprise ein fiktives Unternehmen, die mit dem Namen Fabrikam, Inc. Dieser tutorialreihe verwendet eine beispiellösung&#x2014;der [Contact Manager-Lösung](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;zur Darstellung einer Webanwendung mit einem realistischen Maß an Komplexität, einschließlich einer ASP.NET MVC 3-Anwendung, eine Windows-Kommunikation Foundation (WCF)-Dienst und ein Datenbankprojekt.</span><span class="sxs-lookup"><span data-stu-id="465da-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="465da-110">Die Methode für die Bereitstellung das Kernstück des in diesen Tutorials basiert auf den geteilten Projekt Dateiansatz beschrieben, die [Grundlegendes zur Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in dem der Build & Deployment-Prozess von gesteuert wird zwei Projektdateien&#x2014;eine die Buildanweisungen, die für jede zielumgebung, und enthält umgebungsspezifische Einstellungen für Build & Deployment gelten enthält.</span><span class="sxs-lookup"><span data-stu-id="465da-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="465da-111">Zur Erstellungszeit wird die umgebungsspezifischen-Projektdatei in die Unabhängigkeit von der Umgebung Projektdatei, um einen vollständigen Satz von einrichtungsanweisungen bilden zusammengeführt.</span><span class="sxs-lookup"><span data-stu-id="465da-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="465da-112">Übersicht über den Task</span><span class="sxs-lookup"><span data-stu-id="465da-112">Task Overview</span></span>

<span data-ttu-id="465da-113">Eine Builddefinition ist ein Mechanismus, der steuert, wie und wann Builds für Teamprojekte in TFS auftreten.</span><span class="sxs-lookup"><span data-stu-id="465da-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="465da-114">Es gibt jede Builddefinition an:</span><span class="sxs-lookup"><span data-stu-id="465da-114">Each build definition specifies:</span></span>

- <span data-ttu-id="465da-115">Die Dinge, die Sie erstellen wie Visual Studio-Projektmappendateien oder benutzerdefiniertes Microsoft Build Engine (MSBuild)-Projektdateien, möchten.</span><span class="sxs-lookup"><span data-stu-id="465da-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="465da-116">Die Kriterien, die bestimmen, wann ein Build ausgeführt werden soll, platzieren, wie der manuelle Trigger, continuous Integration (CI), oder gated-Check-ins.</span><span class="sxs-lookup"><span data-stu-id="465da-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="465da-117">Der Speicherort, an den Team Build Buildausgaben, einschließlich der bereitstellungsartefakte wie Web-Pakete und Skripts senden sollen.</span><span class="sxs-lookup"><span data-stu-id="465da-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="465da-118">Die Zeitspanne, die jeden Build beibehalten werden sollen.</span><span class="sxs-lookup"><span data-stu-id="465da-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="465da-119">Verschiedene weitere Parameter des Buildprozesses.</span><span class="sxs-lookup"><span data-stu-id="465da-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="465da-120">Weitere Informationen zum Build-Definitionen, finden Sie unter [definieren Ihres Buildprozesses](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="465da-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>


<span data-ttu-id="465da-121">In diesem Thema erfahren Sie, wie die Erstellung eine Builddefinition, die Continuous Integration, verwendet, damit ein Build ausgelöst wird, wenn ein Entwickler in neue Inhalte prüft.</span><span class="sxs-lookup"><span data-stu-id="465da-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="465da-122">Wenn der Build erfolgreich ist, führt der Build-Dienst eine benutzerdefinierte Projektdatei, um die Lösung in einer testumgebung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="465da-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="465da-123">Wenn Sie einen Build auszulösen, müssen diese Aktionen ausgeführt:</span><span class="sxs-lookup"><span data-stu-id="465da-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="465da-124">Team Build sollten zunächst die Projektmappe erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="465da-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="465da-125">Im Rahmen dieses Prozesses wird das Web Publishing Pipeline (WPP) zur Bereitstellung von Webpaketen für jedes der Webanwendungsprojekte in der Projektmappe generiert Team Build aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="465da-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="465da-126">Teambuild führt auch keine Komponententests, die der Projektmappe zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="465da-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="465da-127">Wenn die Erstellung der Projektmappe ein Fehler auftritt, sollte das Team Build keine weiteren Maßnahmen ergreifen.</span><span class="sxs-lookup"><span data-stu-id="465da-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="465da-128">Skriptkomponententest sollten als Buildfehler behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="465da-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="465da-129">Bei erfolgreicher Erstellung der Projektmappe sollte das benutzerdefinierte Projektdatei Team Build ausgeführt, die die Bereitstellung der Lösung steuert.</span><span class="sxs-lookup"><span data-stu-id="465da-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="465da-130">Im Rahmen dieses Prozesses Team Build wird aufgerufen, die Internetinformationsdienste (Internet Information Services, IIS)-Webbereitstellungstool (Web Deploy) zum Installieren der verpackten Web-Anwendungen auf die Ziel-Webserver, und es wird aufgerufen, das VSDBCMD.exe-Dienstprogramm zum Erstellen der Datenbank ausführen. die Skripts auf dem Zielserver für die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="465da-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="465da-131">Dies verdeutlicht den Prozess:</span><span class="sxs-lookup"><span data-stu-id="465da-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="465da-132">Die [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) Beispielprojektmappe enthält eine benutzerdefinierte MSBuild-Projektdatei *Publish.proj*, die von MSBuild oder Team Build ausgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="465da-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="465da-133">Siehe [Verständnis des Prozesses erstellen](../web-deployment-in-the-enterprise/understanding-the-build-process.md), diese Projektdatei definiert die Logik, die die Web-Pakete und Datenbanken in einer zielumgebung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="465da-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="465da-134">Die Datei enthält die Logik, die die Erstellung und Verpackungsprozesses ausgelassen, wenn sie in Team Build, verlassen einfach die Bereitstellungsaufgaben ausführen ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="465da-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="465da-135">Dies liegt daran, dass wenn Sie die Bereitstellung auf diese Weise automatisieren, Sie in der Regel sicherstellen sollten, dass das Projekt erfolgreich erstellt und übergibt alle Komponententests, bevor der Bereitstellungsprozess beginnt.</span><span class="sxs-lookup"><span data-stu-id="465da-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="465da-136">Im nächste Abschnitt wird erläutert, wie Sie diesen Prozess zu implementieren, indem Sie eine neue Builddefinition erstellen.</span><span class="sxs-lookup"><span data-stu-id="465da-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="465da-137">Diese Prozedur&#x2014;in der ein einzelnes automatisierten Prozess erstellt wird, tests, und stellt eine Lösung bereit,&#x2014;ist wahrscheinlich sich am besten für die Bereitstellung in Umgebungen zu testen.</span><span class="sxs-lookup"><span data-stu-id="465da-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="465da-138">Für die Staging-und produktionsumgebungen können Sie viel eher Inhalte aus einem vorherigen Build bereitgestellt, die Sie bereits überprüft haben, und in einer testumgebung überprüft werden soll.</span><span class="sxs-lookup"><span data-stu-id="465da-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="465da-139">Dieser Ansatz wird im nächsten Thema beschrieben [Bereitstellen von einem bestimmten Build](deploying-a-specific-build.md).</span><span class="sxs-lookup"><span data-stu-id="465da-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>


### <a name="who-performs-this-procedure"></a><span data-ttu-id="465da-140">Mit dieser Prozedur werden ausgeführt?</span><span class="sxs-lookup"><span data-stu-id="465da-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="465da-141">In der Regel führt ein TFS-Administrator, dieses Verfahren.</span><span class="sxs-lookup"><span data-stu-id="465da-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="465da-142">In einigen Fällen kann ein Entwickler-Leiter Verantwortung für die teamprojektauflistung in TFS dauern.</span><span class="sxs-lookup"><span data-stu-id="465da-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="465da-143">Um eine neue Builddefinition erstellen, müssen Sie Mitglied der **Buildadministratoren für Projektsammlung** für die Teamprojektsammlung, die die Projektmappe enthält.</span><span class="sxs-lookup"><span data-stu-id="465da-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="465da-144">Erstellen einer Builddefinition für CI und Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="465da-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="465da-145">Im nächste Verfahren wird beschrieben, wie Sie eine Builddefinition erstellen, die CI-Trigger.</span><span class="sxs-lookup"><span data-stu-id="465da-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="465da-146">Wenn der Build erfolgreich ist, wird die Lösung bereitgestellt, mit der Logik in einer benutzerdefinierten MSBuild-Projektdatei.</span><span class="sxs-lookup"><span data-stu-id="465da-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="465da-147">**So erstellen eine Builddefinition für CI und Bereitstellung**</span><span class="sxs-lookup"><span data-stu-id="465da-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="465da-148">In Visual Studio 2010 in der **Team Explorer** Fenster Erweitern Ihres Teamprojektknotens, mit der rechten Maustaste **erstellt**, und klicken Sie dann auf **neue Builddefinition**.</span><span class="sxs-lookup"><span data-stu-id="465da-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="465da-149">Auf der **allgemeine** Registerkarte, benennen Sie der Builddefinition (z. B. **DeployToTest**) und eine optionale Beschreibung.</span><span class="sxs-lookup"><span data-stu-id="465da-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="465da-150">Auf der **Trigger** Registerkarte, wählen Sie die Kriterien an, auf denen einen neuen Build ausgelöst werden sollen.</span><span class="sxs-lookup"><span data-stu-id="465da-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="465da-151">Wählen Sie z. B. Wenn Sie verwenden möchten, erstellen Sie die Projektmappe, und in die testumgebung bereit, sobald ein Entwickler im neuen Code eincheckt, **Continuous Integration**.</span><span class="sxs-lookup"><span data-stu-id="465da-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="465da-152">Auf der **Build-Standardwerte** Registerkarte die **Kopieren der Buildausgabe in den folgenden Ablageordner** geben den Pfad der Universal Naming Convention (UNC) des Ordners "Drop" (z. B.  **\\TFSBUILD\Drops**).</span><span class="sxs-lookup"><span data-stu-id="465da-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="465da-153">Dieses Ablageorts speichert mehrere Builds, abhängig von der Aufbewahrungsrichtlinie, die Sie konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="465da-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="465da-154">Wenn Sie die bereitstellungsartefakte aus einem bestimmten Build in einer Umgebung Staging- oder produktionsumgebung veröffentlichen möchten, ist dies in der Sie diese finden.</span><span class="sxs-lookup"><span data-stu-id="465da-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="465da-155">Auf der **Prozess** Registerkarte die **Buildprozessdatei** Dropdown-Liste belassen **DefaultTemplate.xaml** ausgewählten.</span><span class="sxs-lookup"><span data-stu-id="465da-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="465da-156">Dies ist eine von der Standard-Buildprozessvorlagen, die zu allen neuen Teamprojekten hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="465da-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="465da-157">In der **Buildprozessparameter** Tabelle, klicken Sie in der **zu erstellende Elemente** Zeile, und klicken Sie dann auf die **Auslassungspunkte** Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="465da-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="465da-158">In der **zu erstellende Elemente** Dialogfeld klicken Sie auf **hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="465da-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="465da-159">Navigieren Sie zum Speicherort Ihrer Lösungsdatei, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="465da-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="465da-160">In der **zu erstellende Elemente** Dialogfeld klicken Sie auf **hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="465da-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="465da-161">In der **Elemente des Typs** Dropdownliste **MSBuild-Projektdateien**.</span><span class="sxs-lookup"><span data-stu-id="465da-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="465da-162">Navigieren Sie zum Speicherort der benutzerdefinierten Datei mit dem Sie den Bereitstellungsprozess zu steuern, wählen Sie die Datei, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="465da-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="465da-163">Die **zu erstellende Elemente** Dialogfeld sollte nun zwei Elemente angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="465da-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="465da-164">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="465da-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="465da-165">Auf der **Prozess** Registerkarte die **Buildprozessparameter** Tabelle, erweitern Sie die **erweitert** Abschnitt.</span><span class="sxs-lookup"><span data-stu-id="465da-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="465da-166">In der **MSBuild-Argumente** Zeile, die alle MSBuild-Befehlszeilenargumente hinzufügen, die *entweder* Elemente erstellen zu müssen.</span><span class="sxs-lookup"><span data-stu-id="465da-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="465da-167">In diesem Lösungsszenario Contact Manager-sind diese Argumente erforderlich:</span><span class="sxs-lookup"><span data-stu-id="465da-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="465da-168">In diesem Beispiel:</span><span class="sxs-lookup"><span data-stu-id="465da-168">In this example:</span></span>

    1. <span data-ttu-id="465da-169">Die **DeployOnBuild = True** und **DeployTarget = Paket** Argumente sind erforderlich, wenn Sie die Projektmappe Contact Manager erstellen.</span><span class="sxs-lookup"><span data-stu-id="465da-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="465da-170">Dies weist die MSBuild-Bereitstellungspakete erstellen nach der Erstellung der einzelnen Webanwendungsprojekt, siehe [erstellen und Verpacken von Webanwendungsprojekten](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="465da-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="465da-171">Die **TargetEnvPropsFile** Argument ist erforderlich, bei der Erstellung der *Publish.proj* Datei.</span><span class="sxs-lookup"><span data-stu-id="465da-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="465da-172">Diese Eigenschaft gibt den Speicherort der Datei umgebungsspezifischer Konfiguration an, wie in beschrieben [Verständnis des Prozesses erstellen](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="465da-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="465da-173">Auf der **Aufbewahrungsrichtlinie** Konfigurieren jedes Typs wie viele builds nach Bedarf beibehalten möchten.</span><span class="sxs-lookup"><span data-stu-id="465da-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="465da-174">Klicken Sie auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="465da-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="465da-175">Hinzufügen eines Builds zur Warteschlange</span><span class="sxs-lookup"><span data-stu-id="465da-175">Queue a Build</span></span>

<span data-ttu-id="465da-176">An diesem Punkt haben Sie mindestens eine neue Builddefinition erstellt.</span><span class="sxs-lookup"><span data-stu-id="465da-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="465da-177">Der Buildprozess, die, den Sie definiert, wird nun gemäß der Trigger ausgeführt, die Sie in der Builddefinition angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="465da-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="465da-178">Wenn Sie die Builddefinition, um CI verwenden konfiguriert haben, können Sie die Builddefinition auf zwei Arten testen:</span><span class="sxs-lookup"><span data-stu-id="465da-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="465da-179">Überprüfen Sie in Teil des Inhalts mit dem Teamprojekt einen automatische Build ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="465da-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="465da-180">Einen Build manuell zur Warteschlange.</span><span class="sxs-lookup"><span data-stu-id="465da-180">Queue a build manually.</span></span>

<span data-ttu-id="465da-181">**Um einen Build manuell in die Warteschlange**</span><span class="sxs-lookup"><span data-stu-id="465da-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="465da-182">In der **Team Explorer** rechten Maustaste auf die Builddefinition, und klicken Sie dann auf **neuen Build in Warteschlange**.</span><span class="sxs-lookup"><span data-stu-id="465da-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="465da-183">In der **Build zur Warteschlange hinzufügen** (Dialogfeld), überprüfen Sie die Buildeigenschaften, und klicken Sie dann auf **Warteschlange**.</span><span class="sxs-lookup"><span data-stu-id="465da-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="465da-184">Überprüfen Sie den Status und das Ergebnis eines Builds&#x2014;unabhängig davon, ob es manuell oder automatisch ausgelöst wird,&#x2014;Doppelklicken Sie auf die Builddefinition in die **Team Explorer** Fenster.</span><span class="sxs-lookup"><span data-stu-id="465da-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="465da-185">Dadurch wird geöffnet, eine **Build Explorer** Registerkarte.</span><span class="sxs-lookup"><span data-stu-id="465da-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="465da-186">Von hier aus können Sie die fehlerhaften Builds beheben.</span><span class="sxs-lookup"><span data-stu-id="465da-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="465da-187">Wenn Sie einen der Builds doppelklicken, können Sie Informationen anzeigen und klicken Sie, um ausführliche Protokolldateien.</span><span class="sxs-lookup"><span data-stu-id="465da-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="465da-188">Sie können diese Informationen zu fehlerhaften Builds Probleme zu beheben, bevor Sie, ein anderer Build versuchen verwenden.</span><span class="sxs-lookup"><span data-stu-id="465da-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="465da-189">Builds, durch die von Bereitstellungslogik ausführen, werden wahrscheinlich erst, wenn Sie dem Build-Server in der zielumgebung erforderlichen Berechtigungen erteilt haben.</span><span class="sxs-lookup"><span data-stu-id="465da-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="465da-190">Weitere Informationen finden Sie unter [Konfigurieren von Berechtigungen für Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="465da-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>


## <a name="monitor-the-build-process"></a><span data-ttu-id="465da-191">Überwachen des Buildprozesses</span><span class="sxs-lookup"><span data-stu-id="465da-191">Monitor the Build Process</span></span>

<span data-ttu-id="465da-192">TFS bietet eine Vielzahl von Funktionen für den Buildprozess zu überwachen.</span><span class="sxs-lookup"><span data-stu-id="465da-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="465da-193">Beispielsweise können TFS senden Ihnen eine e-Mail oder Warnungen in Ihre Infobereich der Taskleiste angezeigt wird, wenn ein Build abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="465da-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="465da-194">Weitere Informationen finden Sie unter [ausführen und Überwachen von Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="465da-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="465da-195">Schlussbemerkung</span><span class="sxs-lookup"><span data-stu-id="465da-195">Conclusion</span></span>

<span data-ttu-id="465da-196">In diesem Thema beschrieben, wie Sie eine Builddefinition in TFS zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="465da-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="465da-197">Die Builddefinition ist für Continuous Integration, konfiguriert, damit der Buildprozess ausgeführt wird, wenn ein Entwickler im Inhalt mit dem Teamprojekt eincheckt.</span><span class="sxs-lookup"><span data-stu-id="465da-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="465da-198">Die Builddefinition führt eine benutzerdefinierte MSBuild-Projektdatei zum Bereitstellen von Webpaketen und Datenbankskripts in einer zielumgebung für die Server aus.</span><span class="sxs-lookup"><span data-stu-id="465da-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="465da-199">In der Reihenfolge für eine automatische Bereitstellung im Rahmen des Buildvorgangs erfolgreich ist müssen Sie die entsprechenden Berechtigungen für das Build-Dienstkonto auf die Ziel-Webserver und den Zielserver für die Datenbank zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="465da-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="465da-200">Das letzte Thema in diesem Tutorial [Konfigurieren von Berechtigungen für Team Build Deployment](configuring-permissions-for-team-build-deployment.md), beschreibt, wie Sie ermitteln und konfigurieren Sie die erforderlichen Berechtigungen für die automatisierte Bereitstellung von einem Team Build-Server.</span><span class="sxs-lookup"><span data-stu-id="465da-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="465da-201">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="465da-201">Further Reading</span></span>

<span data-ttu-id="465da-202">Weitere Informationen zum Erstellen von Builddefinitionen finden Sie unter [Erstellen einer grundlegenden Builddefinition](https://msdn.microsoft.com/library/ms181716.aspx) und [definieren Ihres Buildprozesses](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="465da-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="465da-203">Weitere Anleitungen zum Abfragen von Builds, finden Sie unter [einen Build zur Warteschlange](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="465da-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="465da-204">[Zurück](configuring-a-tfs-build-server-for-web-deployment.md)
> [Weiter](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="465da-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>
