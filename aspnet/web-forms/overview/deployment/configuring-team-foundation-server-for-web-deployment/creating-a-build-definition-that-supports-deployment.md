---
uid: web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
title: Erstellen einer Builddefinition, die Bereitstellung unterstützt | Microsoft-Dokumentation
author: jrjlee
description: Wenn Sie eine beliebige Art von Build in Team Foundation Server (TFS) 2010 ausführen möchten, müssen Sie eine Builddefinition innerhalb des Team Projekts erstellen. In diesem Thema wird...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: fe47a018-f6d0-4979-80e7-5b1fa75a5865
msc.legacyurl: /web-forms/overview/deployment/configuring-team-foundation-server-for-web-deployment/creating-a-build-definition-that-supports-deployment
msc.type: authoredcontent
ms.openlocfilehash: e11c91a824446572aaf0b3bc6954b9b8ffb4eaff
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78489009"
---
# <a name="creating-a-build-definition-that-supports-deployment"></a><span data-ttu-id="1936b-104">Erstellen einer Builddefinition mit Unterstützung für Bereitstellungen</span><span class="sxs-lookup"><span data-stu-id="1936b-104">Creating a Build Definition That Supports Deployment</span></span>

<span data-ttu-id="1936b-105">von [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="1936b-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="1936b-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="1936b-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="1936b-107">Wenn Sie eine beliebige Art von Build in Team Foundation Server (TFS) 2010 ausführen möchten, müssen Sie eine Builddefinition innerhalb des Team Projekts erstellen.</span><span class="sxs-lookup"><span data-stu-id="1936b-107">If you want to perform any kind of build in Team Foundation Server (TFS) 2010, you need to create a build definition within your team project.</span></span> <span data-ttu-id="1936b-108">In diesem Thema wird beschrieben, wie Sie eine neue Builddefinition in TFS erstellen und wie Sie die Webbereitstellung als Teil des Buildprozesses in Team Build steuern können.</span><span class="sxs-lookup"><span data-stu-id="1936b-108">This topic describes how to create a new build definition in TFS and how to control web deployment as part of the build process in Team Build.</span></span>

<span data-ttu-id="1936b-109">Dieses Thema ist Teil einer Reihe von Tutorials, basierend auf den Anforderungen an die Unternehmens Bereitstellung eines fiktiven Unternehmens namens Fabrikam, Inc. In dieser tutorialreihe wird&#x2014;eine Beispiellösung der [Contact Manager-Lösung](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;verwendet, um eine Webanwendung mit einem realistischen Komplexitäts Grad darzustellen, einschließlich einer ASP.NET MVC 3-Anwendung, eines Windows Communication Foundation (WCF)-Diensts und eines Datenbankprojekts.</span><span class="sxs-lookup"><span data-stu-id="1936b-109">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="1936b-110">Die Bereitstellungs Methode im Kern dieser Tutorials basiert auf dem Untergrund Legendes [zur Projektdatei](../web-deployment-in-the-enterprise/understanding-the-project-file.md)beschriebenen Ansatz zum Aufteilen von Projektdateien, bei dem der Build-und Bereitstellungs Prozess von zwei Projekt&#x2014;Dateien gesteuert wird, die Buildanweisungen enthalten, die für jede Zielumgebung gelten, und eine mit Umgebungs spezifischen Build-und Bereitstellungs Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="1936b-110">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="1936b-111">Zum Zeitpunkt der Erstellung wird die Umgebungs spezifische Projektdatei in der Umgebungs unabhängigen Projektdatei zusammengeführt, um einen kompletten Satz von Buildanweisungen zu bilden.</span><span class="sxs-lookup"><span data-stu-id="1936b-111">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="task-overview"></a><span data-ttu-id="1936b-112">Aufgaben Übersicht</span><span class="sxs-lookup"><span data-stu-id="1936b-112">Task Overview</span></span>

<span data-ttu-id="1936b-113">Eine Builddefinition ist der Mechanismus, mit dem gesteuert wird, wie und wann Builds für Team Projekte in TFS auftreten.</span><span class="sxs-lookup"><span data-stu-id="1936b-113">A build definition is the mechanism that controls how and when builds occur for team projects in TFS.</span></span> <span data-ttu-id="1936b-114">Jede Builddefinition gibt Folgendes an:</span><span class="sxs-lookup"><span data-stu-id="1936b-114">Each build definition specifies:</span></span>

- <span data-ttu-id="1936b-115">Die Dinge, die Sie erstellen möchten, z. b. Visual Studio-Projektmappendateien oder Projektdateien für benutzerdefinierte Microsoft-Build-Engine (MSBuild)</span><span class="sxs-lookup"><span data-stu-id="1936b-115">The things you want to build, like Visual Studio solution files or custom Microsoft Build Engine (MSBuild) project files.</span></span>
- <span data-ttu-id="1936b-116">Die Kriterien, die bestimmen, wann ein Build stattfinden soll, wie z. b. manuelle Trigger, Continuous Integration (CI) oder Gated-Check-ins.</span><span class="sxs-lookup"><span data-stu-id="1936b-116">The criteria that determine when a build should take place, like manual triggers, continuous integration (CI), or gated check-ins.</span></span>
- <span data-ttu-id="1936b-117">Der Speicherort, an den der TeamBuild Buildausgaben senden soll, einschließlich Bereitstellungs Artefakte wie Webpaketen und Daten Bank Skripts.</span><span class="sxs-lookup"><span data-stu-id="1936b-117">The location to which Team Build should send build outputs, including deployment artifacts like web packages and database scripts.</span></span>
- <span data-ttu-id="1936b-118">Die Zeitspanne, für die jeder Build beibehalten werden soll.</span><span class="sxs-lookup"><span data-stu-id="1936b-118">The amount of time that each build should be retained.</span></span>
- <span data-ttu-id="1936b-119">Verschiedene andere Parameter des Buildprozesses.</span><span class="sxs-lookup"><span data-stu-id="1936b-119">Various other parameters of the build process.</span></span>

> [!NOTE]
> <span data-ttu-id="1936b-120">Weitere Informationen zu Builddefinitionen finden [Sie unter Definieren des Buildprozesses](https://msdn.microsoft.com/library/ms181715.aspx).</span><span class="sxs-lookup"><span data-stu-id="1936b-120">For more information on build definitions, see [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span>

<span data-ttu-id="1936b-121">In diesem Thema erfahren Sie, wie Sie eine Builddefinition erstellen, die CI verwendet, sodass ein Build ausgelöst wird, wenn ein Entwickler neuen Inhalt prüft.</span><span class="sxs-lookup"><span data-stu-id="1936b-121">This topic will show you how to create a build definition that uses CI, so that a build is triggered when a developer checks in new content.</span></span> <span data-ttu-id="1936b-122">Wenn der Build erfolgreich ist, führt der Builddienst eine benutzerdefinierte Projektdatei aus, um die Lösung in einer Testumgebung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="1936b-122">If the build succeeds, the build service runs a custom project file to deploy the solution to a test environment.</span></span>

<span data-ttu-id="1936b-123">Wenn Sie einen Build auslöst, müssen diese Aktionen ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="1936b-123">When you trigger a build, these actions need to happen:</span></span>

- <span data-ttu-id="1936b-124">Zuerst sollte Team Build die Projekt Mappe erstellen.</span><span class="sxs-lookup"><span data-stu-id="1936b-124">First, Team Build should build the solution.</span></span> <span data-ttu-id="1936b-125">Im Rahmen dieses Vorgangs wird die Web Publishing Pipeline (WPP) von Team Build aufgerufen, um Webbereitstellungs Pakete für jedes Webanwendungs Projekt in der Projekt Mappe zu generieren.</span><span class="sxs-lookup"><span data-stu-id="1936b-125">As part of this process, Team Build will invoke the Web Publishing Pipeline (WPP) to generate web deployment packages for each of the web application projects in the solution.</span></span> <span data-ttu-id="1936b-126">Team Build führt außerdem alle Komponententests aus, die der Projekt Mappe zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="1936b-126">Team Build will also run any unit tests associated with the solution.</span></span>
- <span data-ttu-id="1936b-127">Wenn der Projektmappenbuild fehlschlägt, sollte Team Build keine weiteren Maßnahmen ergreifen.</span><span class="sxs-lookup"><span data-stu-id="1936b-127">If the solution build fails, Team Build should take no further action.</span></span> <span data-ttu-id="1936b-128">Komponenten Test Fehler sollten als Buildfehler behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="1936b-128">Unit test failures should be treated as a build failure.</span></span>
- <span data-ttu-id="1936b-129">Wenn der Projektmappenbuild erfolgreich erstellt wurde, sollte Team Build die benutzerdefinierte Projektdatei ausführen, mit der die Bereitstellung der Lösung gesteuert wird.</span><span class="sxs-lookup"><span data-stu-id="1936b-129">If the solution build succeeds, Team Build should run the custom project file that controls the deployment of the solution.</span></span> <span data-ttu-id="1936b-130">Im Rahmen dieses Prozesses ruft Team Build das Internetinformationsdienste (IIS)-Webbereitstellungs Tool (Web deploy) auf, um die gepackten Webanwendungen auf den Zielweb Servern zu installieren, und ruft das Hilfsprogramm "VSDBCMD. exe" auf, um die Daten Bank Erstellung auszuführen. Skripts auf den Ziel Datenbankservern.</span><span class="sxs-lookup"><span data-stu-id="1936b-130">As part of this process, Team Build will invoke the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to install the packaged web applications on the destination web servers, and it will invoke the VSDBCMD.exe utility to run database creation scripts on the destination database servers.</span></span>

<span data-ttu-id="1936b-131">Dies veranschaulicht den Prozess:</span><span class="sxs-lookup"><span data-stu-id="1936b-131">This illustrates the process:</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image1.png)

<span data-ttu-id="1936b-132">Die Beispiellösung [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) enthält eine benutzerdefinierte MSBuild-Projektdatei ( *Publish. proj*), die Sie von MSBuild oder Team Build ausführen können.</span><span class="sxs-lookup"><span data-stu-id="1936b-132">The [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution includes a custom MSBuild project file, *Publish.proj*, that you can run from MSBuild or Team Build.</span></span> <span data-ttu-id="1936b-133">Wie in Grundlegendes [zum Buildprozess](../web-deployment-in-the-enterprise/understanding-the-build-process.md)beschrieben, definiert diese Projektdatei die Logik, mit der Ihre Webpakete und Datenbanken in einer Zielumgebung bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="1936b-133">As described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md), this project file defines the logic that deploys your web packages and databases to a target environment.</span></span> <span data-ttu-id="1936b-134">Die Datei enthält Logik, bei der der Erstellungs-und Paket Erstellungs Prozess ausgelassen wird, wenn er im TeamBuild ausgeführt wird, sodass nur die Bereitstellungs Aufgaben ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="1936b-134">The file includes logic that omits the building and packaging process if it's running in Team Build, leaving just the deployment tasks to run.</span></span> <span data-ttu-id="1936b-135">Dies liegt daran, dass Sie bei der Automatisierung der Bereitstellung auf diese Weise sicherstellen möchten, dass die Lösung erfolgreich erstellt wird und alle Komponententests durchgeführt werden, bevor der Bereitstellungs Prozess startet.</span><span class="sxs-lookup"><span data-stu-id="1936b-135">This is because when you automate deployment in this way, you'll typically want to ensure that the solution builds successfully and passes any unit tests before the deployment process commences.</span></span>

<span data-ttu-id="1936b-136">Im nächsten Abschnitt wird erläutert, wie dieser Prozess durch Erstellen einer neuen Builddefinition implementiert wird.</span><span class="sxs-lookup"><span data-stu-id="1936b-136">The next section explains how to implement this process by creating a new build definition.</span></span>

> [!NOTE]
> <span data-ttu-id="1936b-137">Dieses Verfahren&#x2014;, bei dem ein einzelner automatisierter Prozess eine Lösung&#x2014;erstellt, testet und bereitstellt, ist wahrscheinlich am besten für die Bereitstellung in Testumgebungen geeignet.</span><span class="sxs-lookup"><span data-stu-id="1936b-137">This procedure&#x2014;in which a single automated process builds, tests, and deploys a solution&#x2014;is likely to be most suited to deployment to test environments.</span></span> <span data-ttu-id="1936b-138">Für Staging-und Produktionsumgebungen ist es viel wahrscheinlicher, dass Sie Inhalte aus einem vorherigen Build bereitstellen möchten, den Sie bereits in einer Testumgebung überprüft und überprüft haben.</span><span class="sxs-lookup"><span data-stu-id="1936b-138">For staging and production environments you're a lot more likely to want to deploy content from a previous build that you've already verified and validated in a test environment.</span></span> <span data-ttu-id="1936b-139">Diese Vorgehensweise wird im nächsten Thema, dem bereitstellen [eines bestimmten Builds](deploying-a-specific-build.md), beschrieben.</span><span class="sxs-lookup"><span data-stu-id="1936b-139">This approach is described in the next topic, [Deploying a Specific Build](deploying-a-specific-build.md).</span></span>

### <a name="who-performs-this-procedure"></a><span data-ttu-id="1936b-140">Wer führt dieses Verfahren aus?</span><span class="sxs-lookup"><span data-stu-id="1936b-140">Who Performs This Procedure?</span></span>

<span data-ttu-id="1936b-141">In der Regel führt ein TFS-Administrator dieses Verfahren aus.</span><span class="sxs-lookup"><span data-stu-id="1936b-141">Typically, a TFS administrator performs this procedure.</span></span> <span data-ttu-id="1936b-142">In einigen Fällen kann ein Entwicklerteam Leiter die Verantwortung für die Teamprojekt Sammlung in TFS übernehmen.</span><span class="sxs-lookup"><span data-stu-id="1936b-142">In some cases, a developer team leader may take responsibility for the team project collection in TFS.</span></span> <span data-ttu-id="1936b-143">Um eine neue Builddefinition zu erstellen, müssen Sie Mitglied der Gruppe Projekt Auflistungs- **buildadministratoren** für die Teamprojekt Sammlung sein, in der die Projekt Mappe enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="1936b-143">In order to create a new build definition, you need to be a member of the **Project Collection Build Administrators** group for the team project collection that contains your solution.</span></span>

## <a name="create-a-build-definition-for-ci-and-deployment"></a><span data-ttu-id="1936b-144">Erstellen einer Builddefinition für CI und Bereitstellung</span><span class="sxs-lookup"><span data-stu-id="1936b-144">Create a Build Definition for CI and Deployment</span></span>

<span data-ttu-id="1936b-145">Im nächsten Verfahren wird beschrieben, wie Sie eine Builddefinition erstellen, die von CI ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="1936b-145">The next procedure describes how to create a build definition that CI triggers.</span></span> <span data-ttu-id="1936b-146">Wenn der Build erfolgreich ist, wird die Lösung mithilfe der Logik in einer benutzerdefinierten MSBuild-Projektdatei bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="1936b-146">If the build succeeds, the solution is deployed using the logic in a custom MSBuild project file.</span></span>

<span data-ttu-id="1936b-147">**So erstellen Sie eine Builddefinition für CI und die Bereitstellung**</span><span class="sxs-lookup"><span data-stu-id="1936b-147">**To create a build definition for CI and deployment**</span></span>

1. <span data-ttu-id="1936b-148">Erweitern Sie in Visual Studio 2010 im Fenster **Team Explorer** den Knoten Team Projekt, klicken Sie mit der rechten Maustaste auf **Builds**, und klicken Sie dann auf **neue Builddefinition**.</span><span class="sxs-lookup"><span data-stu-id="1936b-148">In Visual Studio 2010, in the **Team Explorer** window, expand your team project node, right-click **Builds**, and then click **New Build Definition**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image2.png)
2. <span data-ttu-id="1936b-149">Geben Sie auf der Registerkarte **Allgemein** einen Namen für die Builddefinition (z. b. **deploydetest**) und eine optionale Beschreibung ein.</span><span class="sxs-lookup"><span data-stu-id="1936b-149">On the **General** tab, give the build definition a name (for example, **DeployToTest**) and an optional description.</span></span>
3. <span data-ttu-id="1936b-150">Wählen Sie auf der Registerkarte "Registerkarte **" die Kriterien** aus, auf denen ein neuer Build auslöst werden soll.</span><span class="sxs-lookup"><span data-stu-id="1936b-150">On the **Trigger** tab, select the criteria on which you want to trigger a new build.</span></span> <span data-ttu-id="1936b-151">Wenn Sie z. b. die Projekt Mappe erstellen und in der Testumgebung bereitstellen möchten, wenn ein Entwickler neuen Code eincheckt, wählen Sie **Continuous Integration**aus.</span><span class="sxs-lookup"><span data-stu-id="1936b-151">For example, if you want to build the solution and deploy to the test environment every time a developer checks in new code, select **Continuous Integration**.</span></span>
4. <span data-ttu-id="1936b-152">Geben Sie auf der Registerkarte **Build-Standardwerte** im Feld Buildausgabe in **den folgenden Ablage Ordner kopieren** den Universal Naming Convention (UNC)-Pfad des Ablage Ordners ein (z. **b.\\tfsbuild\drops**).</span><span class="sxs-lookup"><span data-stu-id="1936b-152">On the **Build Defaults** tab, in the **Copy build output to the following drop folder** box, type the Universal Naming Convention (UNC) path of your drop folder (for example, **\\TFSBUILD\Drops**).</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image3.png)

    > [!NOTE]
    > <span data-ttu-id="1936b-153">In diesem Ablage Speicherort werden mehrere Builds gespeichert, abhängig von der konfigurierten Aufbewahrungs Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="1936b-153">This drop location stores several builds, depending on the retention policy you configure.</span></span> <span data-ttu-id="1936b-154">Wenn Sie Bereitstellungs Artefakte aus einem bestimmten Build in einer Staging-oder Produktionsumgebung veröffentlichen möchten, finden Sie diese hier.</span><span class="sxs-lookup"><span data-stu-id="1936b-154">When you want to publish deployment artifacts from a specific build to a staging or production environment, this is where you'll find them.</span></span>
5. <span data-ttu-id="1936b-155">Belassen Sie auf der Registerkarte **Prozess** in der Dropdown Liste **buildprozessdatei** die Option **DefaultTemplate. XAML** .</span><span class="sxs-lookup"><span data-stu-id="1936b-155">On the **Process** tab, in the **Build process file** dropdown list, leave **DefaultTemplate.xaml** selected.</span></span> <span data-ttu-id="1936b-156">Dies ist eine der Standard-buildprozessvorlagen, die allen neuen Team Projekten hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="1936b-156">This is one of the default build process templates that get added to all new team projects.</span></span>
6. <span data-ttu-id="1936b-157">Klicken Sie in der Tabelle **buildprozessparameter** **auf die Zeile** **Elemente zum Erstellen** , und klicken Sie dann auf die Schaltfläche mit den Auslassungs Zeichen</span><span class="sxs-lookup"><span data-stu-id="1936b-157">In the **Build process parameters** table, click in the **Items to Build** row, and then click the **ellipsis** button.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image4.png)
7. <span data-ttu-id="1936b-158">Klicken Sie im Dialogfeld **zu Buildelemente** auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="1936b-158">In the **Items to Build** dialog box, click **Add**.</span></span>
8. <span data-ttu-id="1936b-159">Navigieren Sie zum Speicherort Ihrer Projektmappendatei, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="1936b-159">Browse to the location of your solution file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image5.png)
9. <span data-ttu-id="1936b-160">Klicken Sie im Dialogfeld **zu Buildelemente** auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="1936b-160">In the **Items to Build** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="1936b-161">Wählen Sie in der Dropdown Liste **Elemente des Typs** die Option **MSBuild-Projektdateien**aus.</span><span class="sxs-lookup"><span data-stu-id="1936b-161">In the **Items of type** dropdown list, select **MSBuild Project files**.</span></span>
11. <span data-ttu-id="1936b-162">Navigieren Sie zum Speicherort der benutzerdefinierten Projektdatei, mit der Sie den Bereitstellungs Prozess steuern, wählen Sie die Datei aus, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="1936b-162">Browse to the location of the custom project file with which you control the deployment process, select the file, and then click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image6.png)
12. <span data-ttu-id="1936b-163">Im Dialogfeld **zu Buildelemente** sollten jetzt zwei Elemente angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="1936b-163">The **Items to Build** dialog box should now show two items.</span></span> <span data-ttu-id="1936b-164">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="1936b-164">Click **OK**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image7.png)
13. <span data-ttu-id="1936b-165">Erweitern Sie auf der Registerkarte **Prozess** in der Tabelle **buildprozessparameter** **den Abschnitt erweitert** .</span><span class="sxs-lookup"><span data-stu-id="1936b-165">On the **Process** tab, in the **Build process parameters** table, expand the **Advanced** section.</span></span>
14. <span data-ttu-id="1936b-166">Fügen Sie in der Zeile **MSBuild-Argumente** alle MSBuild-Befehlszeilenargumente hinzu *, die für die Erstellung* eines der Elemente erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1936b-166">In the **MSBuild Arguments** row, add any MSBuild command-line arguments that *either* of your items to build requires.</span></span> <span data-ttu-id="1936b-167">Im Szenario der Kontakt-Manager-Lösung sind diese Argumente erforderlich:</span><span class="sxs-lookup"><span data-stu-id="1936b-167">In the Contact Manager solution scenario, these arguments are required:</span></span>

    [!code-console[Main](creating-a-build-definition-that-supports-deployment/samples/sample1.cmd)]

    ![](creating-a-build-definition-that-supports-deployment/_static/image8.png)
15. <span data-ttu-id="1936b-168">Für dieses Beispiel gilt Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1936b-168">In this example:</span></span>

    1. <span data-ttu-id="1936b-169">Die Argumente **deployonbuild = true** und **deploytarget = Package** sind erforderlich, wenn Sie die Contact Manager-Lösung erstellen.</span><span class="sxs-lookup"><span data-stu-id="1936b-169">The **DeployOnBuild=true** and **DeployTarget=package** arguments are required when you build the Contact Manager solution.</span></span> <span data-ttu-id="1936b-170">Dies weist MSBuild an, nach dem Erstellen der einzelnen Webanwendungs Projekte Webbereitstellungs Pakete zu erstellen, wie unter [Erstellen und Verpacken von Webanwendungs Projekten](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="1936b-170">This instructs MSBuild to create web deployment packages after building each web application project, as described in [Building and Packaging Web Application Projects](../web-deployment-in-the-enterprise/building-and-packaging-web-application-projects.md).</span></span>
    2. <span data-ttu-id="1936b-171">Das **targetenvpropsfile** -Argument ist erforderlich, wenn Sie die *Publish. proj* -Datei erstellen.</span><span class="sxs-lookup"><span data-stu-id="1936b-171">The **TargetEnvPropsFile** argument is required when you build the *Publish.proj* file.</span></span> <span data-ttu-id="1936b-172">Diese Eigenschaft gibt den Speicherort der Umgebungs spezifischen Konfigurationsdatei an, wie Untergrund Legendes [zum Buildprozess](../web-deployment-in-the-enterprise/understanding-the-build-process.md)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="1936b-172">This property indicates the location of the environment-specific configuration file, as described in [Understanding the Build Process](../web-deployment-in-the-enterprise/understanding-the-build-process.md).</span></span>
16. <span data-ttu-id="1936b-173">Konfigurieren Sie auf der Registerkarte **Beibehaltungs Richtlinie** , wie viele Builds jedes Typs bei Bedarf beibehalten werden sollen.</span><span class="sxs-lookup"><span data-stu-id="1936b-173">On the **Retention Policy** tab, configure how many builds of each type you want to retain as required.</span></span>
17. <span data-ttu-id="1936b-174">Klicken Sie auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="1936b-174">Click **Save**.</span></span>

## <a name="queue-a-build"></a><span data-ttu-id="1936b-175">Hinzufügen eines Builds zur Warteschlange</span><span class="sxs-lookup"><span data-stu-id="1936b-175">Queue a Build</span></span>

<span data-ttu-id="1936b-176">An diesem Punkt haben Sie mindestens eine neue Builddefinition erstellt.</span><span class="sxs-lookup"><span data-stu-id="1936b-176">At this point, you have created at least one new build definition.</span></span> <span data-ttu-id="1936b-177">Der von Ihnen definierte Buildprozess wird nun entsprechend den in der Builddefinition angegebenen Triggern ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="1936b-177">The build process you defined will now run according to the triggers you specified in the build definition.</span></span>

<span data-ttu-id="1936b-178">Wenn Sie die Builddefinition für die Verwendung von CI konfiguriert haben, können Sie die Builddefinition auf zweierlei Weise testen:</span><span class="sxs-lookup"><span data-stu-id="1936b-178">If you've configured your build definition to use CI, you can test your build definition in two ways:</span></span>

- <span data-ttu-id="1936b-179">Checken Sie einen Inhalt in das Teamprojekt ein, um einen automatischen Buildvorgang zu initiieren.</span><span class="sxs-lookup"><span data-stu-id="1936b-179">Check in some content to the team project to trigger an automatic build.</span></span>
- <span data-ttu-id="1936b-180">Manuell einen Build in die Warteschlange stellen</span><span class="sxs-lookup"><span data-stu-id="1936b-180">Queue a build manually.</span></span>

<span data-ttu-id="1936b-181">**So erstellen Sie einen Build manuell**</span><span class="sxs-lookup"><span data-stu-id="1936b-181">**To queue a build manually**</span></span>

1. <span data-ttu-id="1936b-182">Klicken Sie im **Team Explorer** Fenster mit der rechten Maustaste auf die Builddefinition, und klicken Sie dann auf **neuen Build in Warteschlange**.</span><span class="sxs-lookup"><span data-stu-id="1936b-182">In the **Team Explorer** window, right-click the build definition, and then click **Queue New Build**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image9.png)
2. <span data-ttu-id="1936b-183">Überprüfen Sie im Dialogfeld **Warteschlangen Erstellung** die Buildeigenschaften, und klicken Sie dann auf **Warteschlange**.</span><span class="sxs-lookup"><span data-stu-id="1936b-183">In the **Queue Build** dialog box, review the build properties, and then click **Queue**.</span></span>

    ![](creating-a-build-definition-that-supports-deployment/_static/image10.png)

<span data-ttu-id="1936b-184">Um den Fortschritt und das Ergebnis eines Builds&#x2014;unabhängig davon, ob er manuell ausgelöst wurde, zu&#x2014;überprüfen, oder Doppelklicken Sie im **Team Explorer** Fenster automatisch auf die Builddefinition.</span><span class="sxs-lookup"><span data-stu-id="1936b-184">To review the progress and the outcome of a build&#x2014;regardless of whether it was triggered manually or automatically&#x2014;double-click the build definition in the **Team Explorer** window.</span></span> <span data-ttu-id="1936b-185">Dadurch wird eine **Build-Explorer** -Registerkarte geöffnet.</span><span class="sxs-lookup"><span data-stu-id="1936b-185">This will open a **Build Explorer** tab.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image11.png)

<span data-ttu-id="1936b-186">Von hier aus können Sie Fehler bei Builds beheben.</span><span class="sxs-lookup"><span data-stu-id="1936b-186">From here, you can troubleshoot failed builds.</span></span> <span data-ttu-id="1936b-187">Wenn Sie auf einen einzelnen Build doppelklicken, können Sie zusammenfassende Informationen anzeigen und zu detaillierten Protokolldateien klicken.</span><span class="sxs-lookup"><span data-stu-id="1936b-187">If you double-click an individual build, you can view summary information and click through to detailed log files.</span></span>

![](creating-a-build-definition-that-supports-deployment/_static/image12.png)

<span data-ttu-id="1936b-188">Sie können diese Informationen verwenden, um Fehler bei Builds zu beheben und Probleme zu beheben, bevor Sie einen anderen Build versuchen.</span><span class="sxs-lookup"><span data-stu-id="1936b-188">You can use this information to troubleshoot failed builds and address any problems before you attempt another build.</span></span>

> [!NOTE]
> <span data-ttu-id="1936b-189">Builds, die die Bereitstellungs Logik ausführen, schlagen wahrscheinlich fehl, bis Sie dem Buildserver alle Berechtigungen erteilt haben, die in der Zielumgebung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1936b-189">Builds that execute deployment logic are likely to fail until you have granted the build server any permissions required in the destination environment.</span></span> <span data-ttu-id="1936b-190">Weitere Informationen finden Sie unter [Konfigurieren von Berechtigungen für die Team Build-Bereitstellung](configuring-permissions-for-team-build-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="1936b-190">For more information, see [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md).</span></span>

## <a name="monitor-the-build-process"></a><span data-ttu-id="1936b-191">Überwachen des Buildprozesses</span><span class="sxs-lookup"><span data-stu-id="1936b-191">Monitor the Build Process</span></span>

<span data-ttu-id="1936b-192">TFS bietet eine Vielzahl von Funktionen, mit denen Sie den Buildprozess überwachen können.</span><span class="sxs-lookup"><span data-stu-id="1936b-192">TFS provides a broad range of functionality to help you monitor the build process.</span></span> <span data-ttu-id="1936b-193">Beispielsweise kann TFS Ihnen eine e-Mail senden oder Warnungen im Infobereich der Taskleiste anzeigen, wenn ein Build abgeschlossen wurde.</span><span class="sxs-lookup"><span data-stu-id="1936b-193">For example, TFS can send you an email or display alerts in your taskbar notification area when a build has completed.</span></span> <span data-ttu-id="1936b-194">Weitere Informationen finden Sie unter [ausführen und Überwachen von Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span><span class="sxs-lookup"><span data-stu-id="1936b-194">For more information, see [Run and Monitor Builds](https://msdn.microsoft.com/library/ms181721.aspx).</span></span>

## <a name="conclusion"></a><span data-ttu-id="1936b-195">Schlussbemerkung</span><span class="sxs-lookup"><span data-stu-id="1936b-195">Conclusion</span></span>

<span data-ttu-id="1936b-196">In diesem Thema wird beschrieben, wie eine Builddefinition in TFS erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="1936b-196">This topic described how to create a build definition in TFS.</span></span> <span data-ttu-id="1936b-197">Die Builddefinition ist für CI konfiguriert, sodass der Buildprozess immer dann ausgeführt wird, wenn ein Entwickler Inhalt in das Teamprojekt eincheckt.</span><span class="sxs-lookup"><span data-stu-id="1936b-197">The build definition is configured for CI, so the build process runs whenever a developer checks in content to the team project.</span></span> <span data-ttu-id="1936b-198">Die Builddefinition führt eine benutzerdefinierte MSBuild-Projektdatei aus, um Webpakete und Daten Bank Skripts in einer Zielserver Umgebung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="1936b-198">The build definition executes a custom MSBuild project file to deploy web packages and database scripts to a target server environment.</span></span>

<span data-ttu-id="1936b-199">Damit eine automatisierte Bereitstellung im Rahmen eines Buildprozesses erfolgreich ausgeführt werden kann, müssen Sie dem Builddienstkonto auf den Zielweb Servern und dem Ziel Datenbankserver entsprechende Berechtigungen erteilen.</span><span class="sxs-lookup"><span data-stu-id="1936b-199">In order for an automated deployment to succeed as part of a build process, you'll need to grant appropriate permissions to the build service account on the target web servers and the target database server.</span></span> <span data-ttu-id="1936b-200">Im letzten Thema dieses Tutorials, [Konfigurieren von Berechtigungen für die Team Build-Bereitstellung](configuring-permissions-for-team-build-deployment.md), wird beschrieben, wie Sie die Berechtigungen identifizieren und konfigurieren, die für die automatisierte Bereitstellung von einem Team Build Server erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="1936b-200">The final topic in this tutorial, [Configuring Permissions for Team Build Deployment](configuring-permissions-for-team-build-deployment.md), describes how to identify and configure the permissions required for automated deployment from a Team Build server.</span></span>

## <a name="further-reading"></a><span data-ttu-id="1936b-201">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="1936b-201">Further Reading</span></span>

<span data-ttu-id="1936b-202">Weitere Informationen zum Erstellen von Builddefinitionen finden Sie unter [Erstellen einer grundlegenden Builddefinition](https://msdn.microsoft.com/library/ms181716.aspx) und definieren des Buildprozesses. [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx)</span><span class="sxs-lookup"><span data-stu-id="1936b-202">For more information on creating build definitions, see [Create a Basic Build Definition](https://msdn.microsoft.com/library/ms181716.aspx) and [Define Your Build Process](https://msdn.microsoft.com/library/ms181715.aspx).</span></span> <span data-ttu-id="1936b-203">Weitere Informationen zur Warteschlange von Builds finden Sie unter [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span><span class="sxs-lookup"><span data-stu-id="1936b-203">For more guidance on queuing builds, see [Queue a Build](https://msdn.microsoft.com/library/ms181722.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1936b-204">[Zurück](configuring-a-tfs-build-server-for-web-deployment.md)
> [Weiter](deploying-a-specific-build.md)</span><span class="sxs-lookup"><span data-stu-id="1936b-204">[Previous](configuring-a-tfs-build-server-for-web-deployment.md)
[Next](deploying-a-specific-build.md)</span></span>
