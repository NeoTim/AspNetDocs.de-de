---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-iis
title: 'ASP.net-Webbereitstellung mithilfe von Visual Studio: Bereitstellung für Test | Microsoft-Dokumentation'
author: tdykstra
description: In dieser tutorialreihe erfahren Sie, wie Sie eine ASP.NET-Webanwendung bereitstellen (veröffentlichen), um Web-Apps oder einen Drittanbieter-Hostinganbieter zu Azure App Service.
ms.author: riande
ms.date: 01/16/2019
ms.assetid: 8bf2c4fb-4ee5-4841-bfc2-03462c1f7a7a
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-to-iis
msc.type: authoredcontent
ms.openlocfilehash: 738318cce442fdc5d58dd1e4c992d4941be2487e
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78520371"
---
# <a name="aspnet-web-deployment-using-visual-studio-deploying-to-test"></a><span data-ttu-id="ae1ab-103">ASP.net-Webbereitstellung mithilfe von Visual Studio: Bereitstellung zum Testen</span><span class="sxs-lookup"><span data-stu-id="ae1ab-103">ASP.NET Web Deployment using Visual Studio: Deploying to Test</span></span>

<span data-ttu-id="ae1ab-104">von [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ae1ab-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="ae1ab-105">Diese tutorialreihe zeigt, wie Sie eine ASP.NET-Webanwendung mithilfe von Visual Studio 2017 für die Azure App Service von Web-Apps oder eines Drittanbieter-hostinganbieters bereitstellen (veröffentlichen).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-105">This tutorial series shows how to deploy (publish) an ASP.NET web application to Azure App Service Web Apps or to a third-party hosting provider using Visual Studio 2017.</span></span> <span data-ttu-id="ae1ab-106">Weitere Informationen zur Reihe finden Sie [im ersten Tutorial der Reihe](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-106">For information about the series, see [the first tutorial in the series](introduction.md).</span></span>

<span data-ttu-id="ae1ab-107">Eine aktuelle Version der Bereitstellung in Azure finden Sie unter [Erstellen einer ASP.net Core-Web-App in Azure](/azure/app-service/app-service-web-get-started-dotnet).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-107">For a current version of deploying to Azure, see [Create an ASP.NET Core web app in Azure](/azure/app-service/app-service-web-get-started-dotnet).</span></span>

## <a name="overview"></a><span data-ttu-id="ae1ab-108">Übersicht</span><span class="sxs-lookup"><span data-stu-id="ae1ab-108">Overview</span></span>

<span data-ttu-id="ae1ab-109">In diesem Tutorial stellen Sie eine ASP.NET-Webanwendung für Internet Information Server (IIS) auf dem lokalen Computer bereit.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-109">In this tutorial, you'll deploy an ASP.NET web application to Internet Information Server (IIS) on your local computer.</span></span>

<span data-ttu-id="ae1ab-110">Wenn Sie eine Anwendung entwickeln, führen Sie Sie in der Regel aus, und testen Sie Sie in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-110">Generally when you develop an application, you run it and test it in Visual Studio.</span></span> <span data-ttu-id="ae1ab-111">Standardmäßig verwenden Webanwendungs Projekte in Visual Studio 2017 IIS Express als entwicklungsweb Server.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-111">By default, web application projects in Visual Studio 2017 use IIS Express as the development web server.</span></span> <span data-ttu-id="ae1ab-112">IIS Express verhält sich ähnlich wie die vollständige IIS als die Visual Studio Development Server (auch als Cassini bezeichnet), die Visual Studio 2017 standardmäßig verwendet.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-112">IIS Express behaves more like full IIS than the Visual Studio Development Server (also known as Cassini), which Visual Studio 2017 uses by default.</span></span> <span data-ttu-id="ae1ab-113">Aber keiner der Entwicklungs-Webserver funktioniert genau wie IIS.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-113">But neither development web server works exactly like IIS.</span></span> <span data-ttu-id="ae1ab-114">Folglich könnte eine app in Visual Studio ordnungsgemäß ausgeführt und getestet werden, schlägt jedoch fehl, wenn Sie in IIS bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-114">Consequently, an app could run and test correctly in Visual Studio but fail when it's deployed to IIS.</span></span>

<span data-ttu-id="ae1ab-115">Sie können Ihre Anwendung auf zwei Arten zuverlässig testen:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-115">You can reliably test your application in two ways:</span></span>

1. <span data-ttu-id="ae1ab-116">Stellen Sie die Anwendung auf Ihrem Entwicklungs Computer auf IIS bereit, und verwenden Sie dabei den gleichen Prozess, den Sie später für die Bereitstellung in Ihrer Produktionsumgebung verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-116">Deploy your application to IIS on your development computer using the same process that you'll use later to deploy it to your production environment.</span></span>

   <span data-ttu-id="ae1ab-117">Sie können Visual Studio so konfigurieren, dass IIS verwendet wird, wenn Sie ein Webprojekt ausführen, aber das würde den Bereitstellungs Prozess nicht testen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-117">You can configure Visual Studio to use IIS when you run a web project, but that wouldn't test your deployment process.</span></span> <span data-ttu-id="ae1ab-118">Mit dieser Methode wird der Bereitstellungs Prozess überprüft und die Anwendung unter IIS ordnungsgemäß ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-118">This method validates your deployment process and that your application runs correctly under IIS.</span></span>

2. <span data-ttu-id="ae1ab-119">Stellen Sie Ihre Anwendung in einer Testumgebung bereit, ähnlich der Produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-119">Deploy your application to a test environment similar to your production environment.</span></span> 
 
   <span data-ttu-id="ae1ab-120">Die Produktionsumgebung für diese Tutorials ist Web-Apps in Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-120">The production environment for these tutorials is Web Apps in Azure App Service.</span></span> <span data-ttu-id="ae1ab-121">Die ideale Testumgebung ist eine zusätzliche Web-App, die im Azure-Dienst erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-121">The ideal test environment is an additional web app created in the Azure Service.</span></span> <span data-ttu-id="ae1ab-122">Obwohl Sie auf dieselbe Weise wie eine Produktions-Web-App eingerichtet wird, würden Sie Sie nur für Testzwecke verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-122">Though it would be set up the same way as a production web app, you would only use it for testing.</span></span>

<span data-ttu-id="ae1ab-123">Option 2 ist die zuverlässigste Methode zum Testen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-123">Option 2 is the most reliable way to test.</span></span> <span data-ttu-id="ae1ab-124">Wenn Sie Option 2 verwenden, müssen Sie nicht unbedingt Option 1 verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-124">If you use option 2, you don't necessarily need to use option 1.</span></span> <span data-ttu-id="ae1ab-125">Wenn Sie jedoch für einen Drittanbieter-Hosting-Anbieter bereitstellen, ist Option 2 möglicherweise nicht möglich oder teuer, sodass in dieser tutorialreihe beide Methoden angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-125">However if you're deploying to a third-party hosting provider, option 2 might not be feasible or might be expensive, so this tutorial series shows both methods.</span></span> <span data-ttu-id="ae1ab-126">Eine Anleitung für Option 2 finden Sie im Tutorial bereitstellen [in der Produktionsumgebung](deploying-to-production.md) .</span><span class="sxs-lookup"><span data-stu-id="ae1ab-126">Guidance for option 2 is provided in the [Deploying to the Production Environment](deploying-to-production.md) tutorial.</span></span>

<span data-ttu-id="ae1ab-127">Weitere Informationen zur Verwendung von Webservern in Visual Studio finden Sie unter [Webserver in Visual Studio für ASP.NET-Webprojekte](https://msdn.microsoft.com/library/58wxa9w5.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-127">For more information about using web servers in Visual Studio, see [Web Servers in Visual Studio for ASP.NET Web Projects](https://msdn.microsoft.com/library/58wxa9w5.aspx).</span></span>

<span data-ttu-id="ae1ab-128">Erinnerung: Wenn Sie eine Fehlermeldung erhalten oder etwas nicht funktioniert, wenn Sie das Tutorial durchlaufen, überprüfen Sie die [Problem Behandlungs Seite](troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-128">Reminder: If you receive an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](troubleshooting.md).</span></span>

## <a name="download-the-contoso-university-starter-project"></a><span data-ttu-id="ae1ab-129">Herunterladen des Projekts "" der Projekt "" der "</span><span class="sxs-lookup"><span data-stu-id="ae1ab-129">Download the Contoso University starter project</span></span>

<span data-ttu-id="ae1ab-130">Laden Sie die Visual Studio-Startprojekt Mappe und das Projekt für die Projekt Mappe von Visual Studio herunter</span><span class="sxs-lookup"><span data-stu-id="ae1ab-130">Download and install the Contoso University Visual Studio starter solution and project.</span></span> <span data-ttu-id="ae1ab-131">Diese Lösung enthält das abgeschlossene Tutorial.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-131">This solution contains the completed tutorial.</span></span> 

[<span data-ttu-id="ae1ab-132">Starter Projekt herunterladen</span><span class="sxs-lookup"><span data-stu-id="ae1ab-132">Download Starter Project</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=282627)

## <a name="install-iis"></a><span data-ttu-id="ae1ab-133">Installieren von IIS</span><span class="sxs-lookup"><span data-stu-id="ae1ab-133">Install IIS</span></span>

<span data-ttu-id="ae1ab-134">Vergewissern Sie sich, dass IIS und Web deploy installiert sind, um Sie auf dem Entwicklungs Computer in IIS bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-134">To deploy to IIS on your development computer, confirm that IIS and Web Deploy are installed.</span></span> <span data-ttu-id="ae1ab-135">Standardmäßig installiert Visual Studio Web deploy, aber IIS ist nicht in der Standardkonfiguration von Windows 10, Windows 8 oder Windows 7 enthalten.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-135">By default, Visual Studio installs Web Deploy, but IIS isn't included in the default Windows 10, Windows 8, or Windows 7 configuration.</span></span> <span data-ttu-id="ae1ab-136">Wenn Sie IIS bereits installiert haben und der Standard Anwendungs Pool bereits auf .NET 4 festgelegt ist, fahren Sie mit [dem nächsten Abschnitt](#sqlexpress)fort.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-136">If you've already installed IIS and the default application pool is already set to .NET 4, skip to [the next section](#sqlexpress).</span></span>

1. <span data-ttu-id="ae1ab-137">Es wird empfohlen, dass Sie den [Webplattform-Installer (WPI)](https://www.microsoft.com/web/downloads/platform.aspx) zum Installieren von IIS und Web deploy verwenden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-137">It's recommended you use the [Web Platform Installer (WPI)](https://www.microsoft.com/web/downloads/platform.aspx) to install IIS and Web Deploy.</span></span> <span data-ttu-id="ae1ab-138">WPI installiert eine empfohlene IIS-Konfiguration, die IIS und ggf. Web deploy Voraussetzungen umfasst.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-138">WPI installs a recommended IIS configuration that includes IIS and Web Deploy prerequisites if necessary.</span></span>

   <span data-ttu-id="ae1ab-139">Wenn Sie bereits IIS, Web deploy oder eine der erforderlichen Komponenten installiert haben, installiert der WPI nur das, was fehlt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-139">If you've already installed IIS, Web Deploy, or any of their required components, the WPI installs only what is missing.</span></span>

   * <span data-ttu-id="ae1ab-140">Verwenden Sie den Webplattform-Installer zum Installieren von IIS und Web Deploy:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-140">Use the Web Platform Installer to install IIS and Web Deploy:</span></span>
    
     ![Installieren von IIS mit WPI](deploying-to-iis/_static/image30.png)

     ![Installieren von Web deploy mithilfe von WPI](deploying-to-iis/_static/image31.png)

     <span data-ttu-id="ae1ab-143">Es werden Meldungen angezeigt, die angeben, dass IIS 7 installiert wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-143">You'll see messages indicating that IIS 7 will be installed.</span></span> <span data-ttu-id="ae1ab-144">Der Link funktioniert für IIS 8 unter Windows 8. für Windows 8 und höher müssen Sie jedoch die folgenden Schritte durchführen, um sicherzustellen, dass ASP.NET 4,7 installiert ist:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-144">The link works for IIS 8 in Windows 8; but for Windows 8 and later, go through the following steps to make sure that ASP.NET 4.7 is installed:</span></span>

   * <span data-ttu-id="ae1ab-145">Öffnen Sie die **Systemsteuerung** > **Programme** > **Programme und Funktionen** , > aktivieren **oder deaktivieren Sie Windows-Funktionen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-145">Open **Control Panel** > **Programs** > **Programs and Features** > **Turn Windows features on or off**.</span></span>

   * <span data-ttu-id="ae1ab-146">Erweitern Sie **Internetinformationsdienste**, **World Wide Web Dienste**und **Features für die Anwendungsentwicklung**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-146">Expand **Internet Information Services**, **World Wide Web Services**, and **Application Development Features**.</span></span>
   
   * <span data-ttu-id="ae1ab-147">Vergewissern Sie sich, dass **ASP.NET 4,7** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-147">Confirm that **ASP.NET 4.7** is selected.</span></span>

     ![SELECT ASP.NET 4,7](deploying-to-iis/_static/image1a.png)

   * <span data-ttu-id="ae1ab-149">Vergewissern Sie sich, dass **World Wide Web Dienste** und die **IIS-Verwaltungskonsole** ausgewählt sind.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-149">Confirm that **World Wide Web Services** and **IIS Management Console** is selected.</span></span> <span data-ttu-id="ae1ab-150">Hierdurch werden IIS und IIS-Manager installiert.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-150">This installs IIS and IIS Manager.</span></span>
    
     ![World Wide Web Dienste auswählen](deploying-to-iis/_static/image24.png)    
  
   * <span data-ttu-id="ae1ab-152">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-152">Select **OK**.</span></span> <span data-ttu-id="ae1ab-153">Dialog Feld Meldungen mit dem Hinweis, dass die Installation stattfindet.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-153">Dialog box messages indicating installation is taking place appear.</span></span>

<span data-ttu-id="ae1ab-154">Führen Sie nach der Installation von IIS den **IIS-Manager** aus, um sicherzustellen, dass der .NET Framework Version 4 dem Standard Anwendungs Pool zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-154">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

1. <span data-ttu-id="ae1ab-155">Drücken Sie Windows + R, um das Dialogfeld **Ausführen** zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-155">Press WINDOWS+R to open the **Run** dialog box.</span></span>

   <span data-ttu-id="ae1ab-156">(Geben Sie auf der **Start** Seite unter Windows 8 oder höher "ausführen" ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-156">(On Windows 8 or later, enter "run" on the **Start** page.</span></span> <span data-ttu-id="ae1ab-157">Wählen Sie unter Windows 7 im **Startmenü** die Option **Ausführen** aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-157">In Windows 7, select **Run** from the **Start** menu.</span></span> <span data-ttu-id="ae1ab-158">Wenn **Ausführen** nicht im **Startmenü** angezeigt wird, klicken Sie mit der rechten Maustaste auf die Taskleiste, wählen Sie **Eigenschaften**aus, wählen Sie die Registerkarte **Start** , klicken Sie auf **Anpassen**, und wählen Sie dann **Befehl ausführen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-158">If **Run** isn't in the **Start** menu, right-click the taskbar, select **Properties**, select the **Start Menu** tab, select **Customize**, and select **Run command**.)</span></span>

2. <span data-ttu-id="ae1ab-159">Geben Sie "inetmgr" ein, und wählen Sie **OK**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-159">Enter "inetmgr" and select **OK**.</span></span>

3. <span data-ttu-id="ae1ab-160">Erweitern Sie im Bereich **Verbindungen** den Server Knoten, und wählen Sie **Anwendungs Pools**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-160">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="ae1ab-161">Wechseln Sie im Bereich **Anwendungs Pools** zum nächsten Abschnitt, wenn **DefaultAppPool** der .NET Framework-Version 4 zugewiesen ist, wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-161">In the **Application Pools** pane if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

   ![Inetmgr_showing_4.0_app_pools](deploying-to-iis/_static/image5a.png)

4. <span data-ttu-id="ae1ab-163">Wenn nur zwei Anwendungs Pools angezeigt werden und beide auf .NET Framework 2,0 festgelegt sind, installieren Sie ASP.NET 4 in IIS.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-163">If you see only two application pools and both are set to .NET Framework 2.0, install ASP.NET 4 in IIS.</span></span>

   <span data-ttu-id="ae1ab-164">Informationen zu Windows 8 oder höher finden Sie in den Anweisungen im vorherigen Abschnitt, um sicherzustellen, dass ASP.NET 4,7 installiert ist, oder erfahren Sie, [wie Sie ASP.NET 4,5 unter Windows 8 und Windows Server 2012 installieren](https://support.microsoft.com/kb/2736284).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-164">For Windows 8 or later, see the previous section's instructions for making sure that ASP.NET 4.7 is installed or see [How to install ASP.NET 4.5 on Windows 8 and Windows Server 2012](https://support.microsoft.com/kb/2736284).</span></span> <span data-ttu-id="ae1ab-165">Öffnen Sie für Windows 7 ein Eingabe Aufforderungs Fenster, indem Sie im Windows- **Startmenü** mit der rechten Maustaste auf **Eingabeaufforderung** klicken und **als Administrator ausführen**auswählen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-165">For Windows 7, open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="ae1ab-166">Führen Sie [ASPNET\_regiis. exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) aus, um ASP.NET 4 mit den folgenden Befehlen in IIS zu installieren.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-166">Run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS using the following commands.</span></span> <span data-ttu-id="ae1ab-167">(Ersetzen Sie in 32-Bit-Systemen "Framework64" durch "Framework".)</span><span class="sxs-lookup"><span data-stu-id="ae1ab-167">(In 32-bit systems, replace "Framework64" with "Framework".)</span></span>

   [!code-console[Main](deploying-to-iis/samples/sample1.cmd)]

   <span data-ttu-id="ae1ab-168">Mit diesem Befehl werden neue Anwendungs Pools für die .NET Framework 4 erstellt, aber der Standard Anwendungs Pool bleibt auf 2,0 festgelegt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-168">This command creates new application pools for the .NET Framework 4, but the default application pool will remain set to 2.0.</span></span> <span data-ttu-id="ae1ab-169">Sie stellen eine Anwendung, die auf .NET 4 ausgerichtet ist, für diesen Anwendungs Pool bereit. ändern Sie also den Anwendungs Pool in .NET 4.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-169">You're deploying an application that targets .NET 4 to that application pool, so change the application pool to .NET 4.</span></span>

5. <span data-ttu-id="ae1ab-170">Wenn Sie **IIS-Manager**geschlossen haben, führen Sie ihn erneut aus, erweitern Sie den Server Knoten, und wählen Sie dann **Anwendungs Pools**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-170">If you closed **IIS Manager**, run it again, expand the server node, and select **Application Pools**.</span></span>

6. <span data-ttu-id="ae1ab-171">Wählen Sie im Bereich **Anwendungs Pools** die Option **DefaultAppPool**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-171">In the **Application Pools** pane, select **DefaultAppPool**.</span></span> <span data-ttu-id="ae1ab-172">Wählen Sie im Bereich **Aktionen** die Option **Grundeinstellungen**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-172">In the **Actions** pane, select **Basic Settings**.</span></span>

   ![Inetmgr_selecting_Basic_Settings_for_app_pool](deploying-to-iis/_static/image25.png)

7. <span data-ttu-id="ae1ab-174">Ändern Sie im Dialogfeld **Anwendungs Pool bearbeiten** die **.NET CLR-Version** in **.NET CLR v 4.0.30319**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-174">In the **Edit Application Pool** dialog box, change the **.NET CLR version** to **.NET CLR v4.0.30319**.</span></span> <span data-ttu-id="ae1ab-175">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-175">Select **OK**.</span></span>

   ![Selecting_. NET_4_for_DefaultAppPool](deploying-to-iis/_static/image6a.png)

<span data-ttu-id="ae1ab-177">Sie sind jetzt bereit, eine Webanwendung in IIS zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-177">You're now ready to publish a web application to IIS.</span></span> <span data-ttu-id="ae1ab-178">Erstellen Sie zunächst jedoch Datenbanken zum Testen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-178">First, however, create databases for testing.</span></span>

<a id="sqlexpress"></a>

## <a name="install-sql-server-express"></a><span data-ttu-id="ae1ab-179">SQL Server Express installieren</span><span class="sxs-lookup"><span data-stu-id="ae1ab-179">Install SQL Server Express</span></span>

<span data-ttu-id="ae1ab-180">Localdb ist nicht für die Verwendung in IIS konzipiert, daher muss in Ihrer Testumgebung SQL Server Express installiert sein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-180">LocalDB isn't designed to work in IIS, so your test environment has to have SQL Server Express installed.</span></span> <span data-ttu-id="ae1ab-181">Wenn Sie Visual Studio 2010 SQL Server Express verwenden, ist es bereits standardmäßig installiert.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-181">If you're using Visual Studio 2010 SQL Server Express, it's already installed by default.</span></span> <span data-ttu-id="ae1ab-182">Wenn Sie Visual Studio 2012 oder höher verwenden, installieren Sie SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-182">If you're using Visual Studio 2012 or later, install SQL Server Express.</span></span>

<span data-ttu-id="ae1ab-183">Um SQL Server Express zu installieren, laden Sie es aus dem Download Center herunter, und installieren Sie es [: Microsoft SQL Server 2017 Express Edition](https://www.microsoft.com/sql-server/sql-server-editions-express).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-183">To install SQL Server Express, download and install it from [Download Center: Microsoft SQL Server 2017 Express edition](https://www.microsoft.com/sql-server/sql-server-editions-express).</span></span> 

<span data-ttu-id="ae1ab-184">Wählen Sie auf der ersten Seite des SQL Server-Installations Centers die **Option neu SQL Server eigenständige Installation aus, oder fügen Sie einer vorhandenen Installation Features hinzu** , und befolgen Sie die Anweisungen, um die Standardoptionen zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-184">On the first page of the SQL Server Installation Center, select **New SQL Server stand-alone installation or add features to an existing installation** and follow the instructions accepting the default choices.</span></span> <span data-ttu-id="ae1ab-185">Übernehmen Sie im Installations-Assistenten die Standardeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-185">In the installation wizard, accept the default settings.</span></span> <span data-ttu-id="ae1ab-186">Weitere Informationen zu Installationsoptionen finden Sie unter [Install SQL Server from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-186">For more information about installation options, see [Install SQL Server from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="create-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="ae1ab-187">Erstellen SQL Server Express Datenbanken für die Testumgebung</span><span class="sxs-lookup"><span data-stu-id="ae1ab-187">Create SQL Server Express databases for the test environment</span></span>

<span data-ttu-id="ae1ab-188">Die Anwendung "" der Anwendung "" der Anwendung "" der Anwendung "</span><span class="sxs-lookup"><span data-stu-id="ae1ab-188">The Contoso University application has two databases:</span></span> 

1. <span data-ttu-id="ae1ab-189">Mitgliedschafts Datenbank</span><span class="sxs-lookup"><span data-stu-id="ae1ab-189">Membership database</span></span> 
2. <span data-ttu-id="ae1ab-190">Anwendungsdatenbank</span><span class="sxs-lookup"><span data-stu-id="ae1ab-190">Application database</span></span> 

<span data-ttu-id="ae1ab-191">Sie können diese Datenbanken in zwei separaten Datenbanken oder in einer einzelnen Datenbank bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-191">You can deploy these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="ae1ab-192">Durch das kombinieren werden die Daten bankjoins vereinfacht.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-192">Combining them makes database joins between them easier.</span></span> 

<span data-ttu-id="ae1ab-193">Wenn Sie die Bereitstellung für einen Hosting-Anbieter eines Drittanbieters durchführen, gibt ihr Hostingplan möglicherweise auch einen Grund für die Kombination aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-193">If you're deploying to a third-party hosting provider, your hosting plan might also give you a reason to combine them.</span></span> <span data-ttu-id="ae1ab-194">Der Anbieter kann z. b. mehr für mehrere Datenbanken berechnen, oder er kann nicht einmal mehr als eine Datenbank zulassen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-194">For example, the provider might charge more for multiple databases or might not even allow more than one database.</span></span>

<span data-ttu-id="ae1ab-195">In diesem Tutorial stellen Sie zwei Datenbanken in der Testumgebung und eine Datenbank in der Stagingumgebung und in der Produktionsumgebung bereit.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-195">In this tutorial, you'll deploy to two databases in the test environment and to one database in the staging and production environments.</span></span>

<span data-ttu-id="ae1ab-196">Wählen Sie in Visual Studio im Menü **Ansicht** die Option **Server-Explorer** (**Datenbank-Explorer** in Visual Web Developer).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-196">From the **View** menu in Visual Studio, select **Server Explorer** (**Database Explorer** in Visual Web Developer).</span></span> <span data-ttu-id="ae1ab-197">Klicken Sie mit der rechten Maustaste auf **Datenverbindungen** , und wählen Sie **neue SQL Server Datenbank erstellen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-197">Right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deploying-to-iis/_static/image8.png)

<span data-ttu-id="ae1ab-199">Geben Sie im Dialogfeld **neue SQL Server Datenbank erstellen** im Feld **Server Name** den Namen ".\sqlexpress" ein, und geben Sie im Feld **Neuer Datenbankname** den Wert ASPNET-contosouniversity ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-199">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-ContosoUniversity" in the **New database name** box.</span></span> <span data-ttu-id="ae1ab-200">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-200">Select **OK**.</span></span>

![Erstellen von ASPNET-contosouniversity](deploying-to-iis/_static/image9.png)

<span data-ttu-id="ae1ab-202">Gehen Sie wie folgt vor, um eine neue SQL Server Express School-Datenbank mit dem Namen `ContosoUniversity`zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-202">Follow the same procedure to create a new SQL Server Express School database named `ContosoUniversity`.</span></span>

<span data-ttu-id="ae1ab-203">In **Server-Explorer** werden die beiden neuen Datenbanken angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-203">**Server Explorer** shows the two new databases.</span></span>

![Neue Datenbanken in Server-Explorer](deploying-to-iis/_static/image10.png)

## <a name="create-a-grant-script-for-the-new-databases"></a><span data-ttu-id="ae1ab-205">Erstellen eines Grant-Skripts für die neuen Datenbanken</span><span class="sxs-lookup"><span data-stu-id="ae1ab-205">Create a grant script for the new databases</span></span>

<span data-ttu-id="ae1ab-206">Wenn die Anwendung in IIS auf dem Entwicklungs Computer ausgeführt wird, verwendet die Anwendung die Anmelde Informationen des Standard Anwendungs Pools für den Zugriff auf die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-206">When the application runs in IIS on your development computer, the application uses the default application pool's credentials to access the database.</span></span> <span data-ttu-id="ae1ab-207">Der Anwendungs Pool verfügt jedoch standardmäßig nicht über die Berechtigung zum Öffnen der Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-207">However, by default, the application pool doesn't have permission to open the databases.</span></span> <span data-ttu-id="ae1ab-208">Dies bedeutet, dass Sie ein Skript ausführen müssen, um diese Berechtigung zu erteilen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-208">This means you need to run a script to grant that permission.</span></span> <span data-ttu-id="ae1ab-209">In diesem Abschnitt erstellen Sie das Skript und führen es später aus, um sicherzustellen, dass die Anwendung die Datenbanken öffnen kann, wenn Sie in IIS ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-209">In this section, you'll create that script and run it later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="ae1ab-210">Kopieren Sie in einem Text-Editor die folgenden SQL-Befehle in eine neue Datei, und speichern Sie Sie als *Grant. SQL*.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-210">In a text editor, copy the following SQL commands into a new file and save it as *Grant.sql*.</span></span> 

[!code-sql[Main](deploying-to-iis/samples/sample2.sql)]

<span data-ttu-id="ae1ab-211">Öffnen Sie in Visual Studio die Projekt Mappe "setoso University".</span><span class="sxs-lookup"><span data-stu-id="ae1ab-211">In Visual Studio, open the Contoso University solution.</span></span> <span data-ttu-id="ae1ab-212">Klicken Sie mit der rechten Maustaste auf die Projekt Mappe (nicht auf eines der Projekte), und wählen Sie **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-212">Right-click the solution (not one of the projects), and select **Add**.</span></span> <span data-ttu-id="ae1ab-213">Wählen Sie **Vorhandenes Element**aus, navigieren Sie zu *Grant. SQL*, und öffnen Sie es.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-213">Select **Existing Item**, browse to *Grant.sql*, and open it.</span></span>

> [!NOTE]
> <span data-ttu-id="ae1ab-214">Dieses Skript ist so konzipiert, dass es mit SQL Server Express 2012 oder höher und mit den IIS-Einstellungen in Windows 10, Windows 8 oder Windows 7 funktioniert, wie Sie in diesem Tutorial angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-214">This script is designed to work with SQL Server Express 2012 or later and with the IIS settings in Windows 10, Windows 8, or Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="ae1ab-215">Wenn Sie eine andere Version von SQL Server oder Windows verwenden oder IIS auf dem Computer anders einrichten, sind möglicherweise Änderungen an diesem Skript erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-215">If you're using a different version of SQL Server or Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="ae1ab-216">Weitere Informationen zu SQL Server Skripts finden Sie unter [SQL Server-Onlinedokumentation](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-216">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>

> [!NOTE] 
> <span data-ttu-id="ae1ab-217">**Sicherheitshinweis** Dieses Skript erteilt `db_owner` Berechtigungen für den Benutzer, der zur Laufzeit auf die Datenbank zugreift, was Sie in der Produktionsumgebung tun werden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-217">**Security Note** This script gives `db_owner` permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="ae1ab-218">In einigen Szenarien möchten Sie möglicherweise einen Benutzer angeben, der über vollständige Datenbankschema-Aktualisierungs Berechtigungen für die Bereitstellung verfügt, und für die Laufzeit einen anderen Benutzer angeben, der nur über Berechtigungen zum Lesen und Schreiben von Daten verfügt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-218">In some scenarios, you might want to specify a user that has full database schema update permissions only for deployment and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="ae1ab-219">Weitere Informationen finden Sie unter über [Prüfen der automatischen Änderungen an der Web. config-Datei für Code First-Migrationen](#reviewingmigrations) weiter unten in diesem Tutorial.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-219">For more information, see [Reviewing the Automatic Web.config Changes for Code First Migrations](#reviewingmigrations) later in this tutorial.</span></span>

<a id="publish"></a>

## <a name="run-the-grant-script-in-the-application-database"></a><span data-ttu-id="ae1ab-220">Ausführen des Grant-Skripts in der Anwendungsdatenbank</span><span class="sxs-lookup"><span data-stu-id="ae1ab-220">Run the grant script in the application database</span></span>

<span data-ttu-id="ae1ab-221">Sie können das Veröffentlichungs Profil so konfigurieren, dass das Grant-Skript in der Mitgliedschafts Datenbank während der Bereitstellung ausgeführt wird, da die Daten Bank Bereitstellung den [dbdacfx](https://docs.microsoft.com/iis/publish/using-web-deploy/dbdacfx-provider-for-incremental-database-publishing) -Anbieter verwendet</span><span class="sxs-lookup"><span data-stu-id="ae1ab-221">You can configure the publish profile to run the grant script in the membership database during deployment because that database deployment uses the [dbDacFx](https://docs.microsoft.com/iis/publish/using-web-deploy/dbdacfx-provider-for-incremental-database-publishing) provider.</span></span> <span data-ttu-id="ae1ab-222">Skripts können während der Code First-Migrationen Bereitstellung nicht ausgeführt werden, d. h. wie Sie die Anwendungsdatenbank bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-222">You can't run scripts during Code First Migrations deployment, which is how you're deploying the application database.</span></span> <span data-ttu-id="ae1ab-223">Dies bedeutet, dass Sie das Skript vor der Bereitstellung in der Anwendungsdatenbank manuell ausführen müssen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-223">This means you have to manually run the script before deployment in the application database.</span></span>

1. <span data-ttu-id="ae1ab-224">Öffnen Sie in Visual Studio die Datei *Grant. SQL* , die Sie zuvor erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-224">In Visual Studio, open the *Grant.sql* file that you created earlier.</span></span>

2. <span data-ttu-id="ae1ab-225">Wählen Sie **Verbinden**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-225">Select **Connect**.</span></span> 

    ![Schaltfläche „Verbinden“](deploying-to-iis/_static/image11.png)

3. <span data-ttu-id="ae1ab-227">Geben Sie im Dialogfeld **Verbindung mit Server herstellen** den Namen *.\sqlexpress* als **Servernamen**ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-227">In the **Connect to Server** dialog box, enter *.\SQLExpress* as the **Server Name**.</span></span> <span data-ttu-id="ae1ab-228">Wählen Sie **Verbinden**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-228">Select **Connect**.</span></span>

4. <span data-ttu-id="ae1ab-229">Wählen Sie in der Dropdown Liste Datenbank die Option **Conto souniversity**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-229">In the database drop-down list select **ContosoUniversity**.</span></span> <span data-ttu-id="ae1ab-230">Wählen Sie **Execute**(Ausführen).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-230">Select **Execute**.</span></span> 

   ![](deploying-to-iis/_static/image12.png)

<span data-ttu-id="ae1ab-231">Die standardmäßige Anwendungs Pool Identität verfügt jetzt über ausreichende Berechtigungen in der Anwendungsdatenbank, damit Code First-Migrationen die Datenbanktabellen erstellen können, wenn die Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-231">The default application pool identity now has sufficient permissions in the application database for Code First Migrations to create the database tables when the application runs.</span></span>

## <a name="publish-to-iis"></a><span data-ttu-id="ae1ab-232">Veröffentlichen in IIS</span><span class="sxs-lookup"><span data-stu-id="ae1ab-232">Publish to IIS</span></span>

<span data-ttu-id="ae1ab-233">Es gibt mehrere Möglichkeiten, wie Sie IIS mithilfe von Visual Studio und Web deploy bereitstellen können:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-233">There are several ways you can deploy to IIS using Visual Studio and Web Deploy:</span></span>

* <span data-ttu-id="ae1ab-234">Verwenden Sie Visual Studio One-Click-Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-234">Use Visual Studio one-click publish.</span></span>
* <span data-ttu-id="ae1ab-235">Veröffentlichen von der Befehlszeile aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-235">Publish from the command line.</span></span>
* <span data-ttu-id="ae1ab-236">Erstellen Sie ein Bereitstellungs Paket, und installieren Sie es mit IIS-Manager.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-236">Create a deployment package and install it using IIS Manager.</span></span> <span data-ttu-id="ae1ab-237">Das Paket verfügt über eine ZIP-Datei mit allen Dateien und Metadaten, die für die Installation eines Standorts in IIS erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-237">The package has a .zip file with all the files and metadata required to install a site in IIS.</span></span>
* <span data-ttu-id="ae1ab-238">Erstellen Sie ein Bereitstellungs Paket, und installieren Sie es mithilfe der Befehlszeile.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-238">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="ae1ab-239">Der Prozess, den Sie in den vorherigen Tutorials durchlaufen haben, um Visual Studio für die Automatisierung von Bereitstellungs Aufgaben einzurichten, gilt für alle diese Methoden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-239">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these methods.</span></span> <span data-ttu-id="ae1ab-240">In diesen Tutorials verwenden Sie die ersten beiden Methoden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-240">In these tutorials, you'll use the first two methods.</span></span> <span data-ttu-id="ae1ab-241">Weitere Informationen zur Verwendung von Bereitstellungs Paketen finden Sie unter Bereitstellen [einer Webanwendung durch Erstellen und Installieren eines Webbereitstellungs Pakets](https://go.microsoft.com/fwlink/p/?LinkId=282413#package) in der Webbereitstellungs-Inhalts Karte für Visual Studio und ASP.net.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-241">For information about using deployment packages, see [Deploying a web application by creating and installing a web deployment package](https://go.microsoft.com/fwlink/p/?LinkId=282413#package) in the Web Deployment Content Map for Visual Studio and ASP.NET.</span></span>

<span data-ttu-id="ae1ab-242">Vergewissern Sie sich vor dem veröffentlichen, dass Sie Visual Studio im Administrator Modus ausführen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-242">Before publishing, make sure that you're running Visual Studio in administrator mode.</span></span> <span data-ttu-id="ae1ab-243">Wenn **(Administrator)** nicht in der Titelleiste angezeigt wird, schließen Sie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-243">If you don't see **(Administrator)** in the title bar, close Visual Studio.</span></span> <span data-ttu-id="ae1ab-244">Klicken Sie auf der **Start** Seite von Windows 8 (oder höher) oder dem **Startmenü** von Windows 7 mit der rechten Maustaste auf das Visual Studio-Symbol, und wählen Sie **als Administrator ausführen**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-244">In the Windows 8 (or later) **Start** page or the Windows 7 **Start** menu, right-click the Visual Studio icon and select **Run as Administrator**.</span></span> <span data-ttu-id="ae1ab-245">Der Administrator Modus ist nur für die Veröffentlichung erforderlich, wenn Sie auf dem lokalen Computer auf IIS veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-245">Administrator mode is only required for publishing when you're publishing to IIS on the local computer.</span></span>

### <a name="create-the-publish-profile"></a><span data-ttu-id="ae1ab-246">Erstellen des Veröffentlichungs Profils</span><span class="sxs-lookup"><span data-stu-id="ae1ab-246">Create the publish profile</span></span>

1. <span data-ttu-id="ae1ab-247">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt **conjesouniversity** (nicht auf das Projekt **Conto souniversity. dal** ).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-247">In **Solution Explorer**, right-click the **ContosoUniversity** project (not the **ContosoUniversity.DAL** project).</span></span> <span data-ttu-id="ae1ab-248">Wählen Sie **Veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-248">Select **Publish**.</span></span> <span data-ttu-id="ae1ab-249">Die Seite **veröffentlichen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-249">The **Publish** page appears.</span></span>

2. <span data-ttu-id="ae1ab-250">Wählen Sie **Neues Profil**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-250">Select **New Profile**.</span></span> <span data-ttu-id="ae1ab-251">Das Dialogfeld **Veröffentlichungsziel auswählen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-251">The **Pick a publish target** dialog box appears.</span></span>

3. <span data-ttu-id="ae1ab-252">Wählen Sie **IIS, FTP usw**. Wählen Sie **Profil erstellen**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-252">Select **IIS, FTP, etc**. Select **Create Profile**.</span></span> <span data-ttu-id="ae1ab-253">Der **Veröffentlichungs** -Assistent wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-253">The **Publish** wizard appears.</span></span>

   ![Registerkarte "Profil veröffentlichen" des Assistenten](deploying-to-iis/_static/image26.png)

4. <span data-ttu-id="ae1ab-255">Wählen Sie im Dropdown Menü **Veröffentlichungs Methode** die Option **Web deploy**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-255">From the **Publish method** drop-down menu, select **Web Deploy**.</span></span>

5. <span data-ttu-id="ae1ab-256">Geben Sie unter **Server**den *Namen localhost*ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-256">For **Server**, enter *localhost*.</span></span>

6. <span data-ttu-id="ae1ab-257">Geben Sie unter **Standort Name den Namen** *Default Web Site/Conto souniversity*ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-257">For **Site name**, enter *Default Web Site/ContosoUniversity*.</span></span>

7. <span data-ttu-id="ae1ab-258">Geben Sie *http://localhost/ContosoUniversity* für die **Ziel-URL**ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-258">For **Destination URL**, enter *http://localhost/ContosoUniversity*.</span></span>

   <span data-ttu-id="ae1ab-259">Die Einstellung für die **Ziel-URL** ist nicht erforderlich.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-259">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="ae1ab-260">Wenn Visual Studio die Bereitstellung der Anwendung abgeschlossen hat, öffnet sie automatisch Ihren Standardbrowser mit dieser URL.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-260">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="ae1ab-261">Wenn Sie nicht möchten, dass der Browser nach der Bereitstellung automatisch geöffnet wird, lassen Sie dieses Feld leer.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-261">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

8. <span data-ttu-id="ae1ab-262">Wählen Sie **Verbindung** überprüfen, um zu überprüfen, ob die Einstellungen korrekt sind, und Sie können eine Verbindung mit IIS auf dem lokalen Computer herstellen</span><span class="sxs-lookup"><span data-stu-id="ae1ab-262">Select **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

   <span data-ttu-id="ae1ab-263">Ein grünes Häkchen überprüft, ob die Verbindung erfolgreich hergestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-263">A green check mark verifies that the connection is successful.</span></span>

   ![Registerkarte "Web-Assistent veröffentlichen"](deploying-to-iis/_static/image27.png)

9. <span data-ttu-id="ae1ab-265">Wählen Sie **weiter** aus, um zur Registerkarte **Einstellungen** zu gelangen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-265">Select **Next** to advance to the **Settings** tab.</span></span>

10. <span data-ttu-id="ae1ab-266">Das Dropdown Feld **Konfiguration** gibt die Buildkonfiguration an, die bereitgestellt werden soll.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-266">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="ae1ab-267">Legen Sie den Standardwert **Release**fest.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-267">Leave it set to the default value of **Release**.</span></span> <span data-ttu-id="ae1ab-268">Sie werden in diesem Tutorial keine Debugbuilds bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-268">You won't be deploying Debug builds in this tutorial.</span></span>

11. <span data-ttu-id="ae1ab-269">Erweitern Sie **Datei Veröffentlichungs Optionen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-269">Expand **File Publish Options**.</span></span> <span data-ttu-id="ae1ab-270">Wählen Sie **Dateien aus dem App-\_Datenordner ausschließen aus**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-270">Select **Exclude files from the App\_Data folder**.</span></span>

    <span data-ttu-id="ae1ab-271">In der Testumgebung greift die Anwendung auf die Datenbanken zu, die Sie in der lokalen SQL Server Express Instanz erstellt haben, nicht auf die MDF-Dateien im Ordner *App\_Data* .</span><span class="sxs-lookup"><span data-stu-id="ae1ab-271">In the test environment, the application accesses the databases that you created in the local SQL Server Express instance, not the .mdf files in the *App\_Data* folder.</span></span>

12. <span data-ttu-id="ae1ab-272">Lassen Sie das Kontrollkästchen **Vorkompilierung beim Veröffentlichen** und **Entfernen zusätzlicher Dateien am Ziel** deaktiviert.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-272">Leave the **Precompile during publishing** and **Remove additional files at destination** check boxes cleared.</span></span>

    ![Datei Veröffentlichungs Optionen auf der Registerkarte "Einstellungen"](deploying-to-iis/_static/image15a.png)

    <span data-ttu-id="ae1ab-274">Vorkompilierung ist eine Option, die in erster Linie für große Websites nützlich ist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-274">Precompiling is an option that is useful mainly for large sites.</span></span> <span data-ttu-id="ae1ab-275">Die Startzeit kann reduziert werden, wenn nach der Veröffentlichung der Website das erste Mal eine Seite angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-275">It can reduce startup time the first time a page is requested after the site is published.</span></span>

    <span data-ttu-id="ae1ab-276">Sie müssen keine zusätzlichen Dateien entfernen, da es sich hierbei um die erste Bereitstellung handelt und noch keine Dateien im Zielordner vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-276">You don't need to remove additional files since this is your first deployment and there won't be any files in the destination folder yet.</span></span>

    > [!NOTE] 
    > <span data-ttu-id="ae1ab-277">Wenn Sie für eine nachfolgende Bereitstellung auf demselben Standort **zusätzliche Dateien am Ziel entfernen** auswählen, stellen Sie sicher, dass Sie das Vorschau Feature verwenden, damit Sie im voraussehen, welche Dateien gelöscht werden, bevor Sie bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-277">If you select **Remove additional files at destination** for a subsequent deployment to the same site, make sure that you use the preview feature so that you see in advance which files will be deleted before you deploy.</span></span> <span data-ttu-id="ae1ab-278">Das erwartete Verhalten ist, dass Web deploy Dateien auf dem Zielserver löscht, die Sie im Projekt gelöscht haben.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-278">The expected behavior is that Web Deploy will delete files on the destination server that you have deleted in your project.</span></span> <span data-ttu-id="ae1ab-279">Die gesamte Ordnerstruktur unter den Quell-und Ziel Ordnern wird jedoch verglichen. in einigen Szenarios können Web deploy Dateien löschen, die Sie nicht löschen möchten.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-279">However, the entire folder structure under the source and destination folders is compared; and in some scenarios, Web Deploy might delete files you don't want to delete.</span></span>
    > 
    > <span data-ttu-id="ae1ab-280">Wenn Sie z. b. eine Webanwendung in einem Unterordner auf dem Server haben, wenn Sie ein Projekt im Stamm Ordner bereitstellen, wird der Unterordner gelöscht.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-280">For example if you have a web application in a subfolder on the server when you deploy a project to the root folder, the subfolder will be deleted.</span></span> <span data-ttu-id="ae1ab-281">Möglicherweise verfügen Sie über ein Projekt für die Hauptwebsite unter contoso.com und ein weiteres Projekt für einen Blog unter contoso.com/Blog.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-281">You might have one project for the main site at contoso.com and another project for a blog at contoso.com/blog.</span></span> <span data-ttu-id="ae1ab-282">Die Blog Anwendung befindet sich in einem Unterordner.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-282">The blog application is in a subfolder.</span></span> <span data-ttu-id="ae1ab-283">Wenn Sie beim Bereitstellen des Haupt Standorts **Weitere Dateien am Ziel entfernen** auswählen, wird die Blog Anwendung gelöscht.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-283">If you select **Remove additional files at destination** when you deploy the main site, the blog application will be deleted.</span></span>
    > 
    > <span data-ttu-id="ae1ab-284">Ein weiteres Beispiel ist, dass Ihr App-\_Datenordner möglicherweise unerwartet gelöscht wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-284">For another example, your App\_Data folder might get deleted unexpectedly.</span></span> <span data-ttu-id="ae1ab-285">Bestimmte Datenbanken, z. b. SQL Server Compact, speichern Datenbankdateien im App-\_Datenordner.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-285">Certain databases such as SQL Server Compact store database files in the App\_Data folder.</span></span> <span data-ttu-id="ae1ab-286">Nach der erstmaligen Bereitstellung möchten Sie die Datenbankdateien nicht mehr in nachfolgenden bereit Stellungen kopieren, daher wählen Sie auf der Registerkarte "Web packen/veröffentlichen" die Option **App-\_Daten ausschließen** aus. Nachdem Sie die **zusätzlichen Dateien am Ziel** ausgewählt haben, werden die Datenbankdateien und der APP-\_Datenordner selbst gelöscht, wenn Sie das nächste Mal veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-286">After the initial deployment, you don't want to keep copying the database files in subsequent deployments, so you select  **Exclude App\_Data** on the Package/Publish Web tab. After you do that if you have **Remove additional files at destination** selected, your database files and the App\_Data folder itself will be deleted the next time you publish.</span></span>

### <a name="configure-deployment-for-the-membership-database"></a><span data-ttu-id="ae1ab-287">Konfigurieren der Bereitstellung für die Mitgliedschafts Datenbank</span><span class="sxs-lookup"><span data-stu-id="ae1ab-287">Configure deployment for the membership database</span></span>

<span data-ttu-id="ae1ab-288">Die folgenden Schritte gelten für die **DefaultConnection** -Datenbank im Abschnitt **Datenbanken** des Dialog Felds.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-288">The following steps apply to the **DefaultConnection** database in the dialog box's **Databases** section.</span></span>

1. <span data-ttu-id="ae1ab-289">Geben Sie im Feld **Remote Verbindungs Zeichenfolge** die folgende Verbindungs Zeichenfolge ein, die auf die neue SQL Server Express Mitgliedschafts Datenbank verweist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-289">In the **Remote connection string** box, enter the following connection string that points to the new SQL Server Express membership database.</span></span>

   [!code-console[Main](deploying-to-iis/samples/sample3.cmd)]

   <span data-ttu-id="ae1ab-290">Beim Bereitstellungs Prozess wird diese Verbindungs Zeichenfolge in die bereitgestellte Web. config-Datei eingefügt, weil **Diese Verbindungs Zeichenfolge zur Laufzeit verwenden** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-290">The deployment process puts this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

    <span data-ttu-id="ae1ab-291">Sie können auch die Verbindungs Zeichenfolge aus **Server-Explorer**erhalten.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-291">You can also get the connection string from **Server Explorer**.</span></span> <span data-ttu-id="ae1ab-292">Erweitern Sie in **Server-Explorer**den Knoten **Datenverbindungen** , und wählen Sie den **&lt;MachineName&gt;\sqlexpress.Aspnet-condesouniversity** aus, und kopieren Sie dann im **Eigenschaften** Fenster den Wert der **Verbindungs Zeichenfolge** .</span><span class="sxs-lookup"><span data-stu-id="ae1ab-292">In **Server Explorer**, expand **Data Connections** and select the **&lt;machinename&gt;\sqlexpress.aspnet-ContosoUniversity** database, then from the **Properties** window copy the **Connection String** value.</span></span> <span data-ttu-id="ae1ab-293">Diese Verbindungs Zeichenfolge verfügt über eine zusätzliche Einstellung, die Sie löschen können: `Pooling=False`.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-293">That connection string will have one additional setting that you can delete: `Pooling=False`.</span></span>

2. <span data-ttu-id="ae1ab-294">Wählen Sie **Datenbank aktualisieren**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-294">Select **Update database**.</span></span>

   <span data-ttu-id="ae1ab-295">Dies bewirkt, dass das Datenbankschema während der Bereitstellung in der Zieldatenbank erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-295">This causes the database schema to be created in the destination database during deployment.</span></span> <span data-ttu-id="ae1ab-296">In den nächsten Schritten geben Sie die zusätzlichen Skripts an, die Sie ausführen müssen: eine zum Gewähren des Datenbankzugriffs auf den Standard Anwendungs Pool und eine zum Bereitstellen von Daten.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-296">In next steps, you specify the additional scripts that you need to run: one to grant database access to the default application pool and one to deploy data.</span></span>

3. <span data-ttu-id="ae1ab-297">Wählen Sie **Datenbankupdates konfigurieren**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-297">Select **Configure database updates**.</span></span>
 
4. <span data-ttu-id="ae1ab-298">Wählen Sie im Dialogfeld **Daten Bank Updates konfigurieren** die Option **SQL-Skript hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-298">In the **Configure Database Updates** dialog box, select **Add SQL Script**.</span></span> <span data-ttu-id="ae1ab-299">Navigieren Sie zum *Grant. SQL* -Skript, das Sie zuvor im Projektmappenordner gespeichert haben.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-299">Navigate to the *Grant.sql* script that you saved earlier in the solution folder.</span></span>

5. <span data-ttu-id="ae1ab-300">Wiederholen Sie den Vorgang zum Hinzufügen des *ASPNET-Data-dev. SQL* -Skripts.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-300">Repeat the process to add the *aspnet-data-dev.sql* script.</span></span>

   ![Konfigurieren von Datenbankaktualisierungen für die Mitgliedschafts Datenbank](deploying-to-iis/_static/image16.png)

6. <span data-ttu-id="ae1ab-302">Klicken Sie auf **Schließen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-302">Select **Close**.</span></span>

### <a name="configure-deployment-for-the-application-database"></a><span data-ttu-id="ae1ab-303">Konfigurieren der Bereitstellung für die Anwendungsdatenbank</span><span class="sxs-lookup"><span data-stu-id="ae1ab-303">Configure deployment for the application database</span></span>

<span data-ttu-id="ae1ab-304">Wenn Visual Studio eine Entity Framework `DbContext` Klasse erkennt, wird ein Eintrag im **Daten** Bank Abschnitt erstellt, der anstelle des Kontrollkästchens **Datenbank aktualisieren** über das Kontrollkästchen **Code First-Migrationen ausführen** verfügt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-304">When Visual Studio detects an Entity Framework `DbContext` class, it creates an entry in the **Databases** section that has an **Execute Code First Migrations** check box instead of an **Update Database** check box.</span></span> <span data-ttu-id="ae1ab-305">In diesem Tutorial verwenden Sie dieses Kontrollkästchen, um Code First-Migrationen Bereitstellung anzugeben.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-305">For this tutorial, you'll use that check box to specify Code First Migrations deployment.</span></span>

<span data-ttu-id="ae1ab-306">In einigen Szenarien verwenden Sie möglicherweise eine `DbContext` Datenbank, aber Sie möchten den dbdacfx-Anbieter anstelle von Migrationen verwenden, um die Datenbank bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-306">In some scenarios, you might be using a `DbContext` database but you want to use the dbDacFx provider instead of Migrations to deploy the database.</span></span> <span data-ttu-id="ae1ab-307">Weitere Informationen finden Sie unter [Gewusst wie Bereitstellen einer Code First Datenbank ohne Migrationen?](https://msdn.microsoft.com/library/ee942158.aspx#deploy_code_first_without_migrations) in den FAQ zur ASP.net-Webbereitstellung auf MSDN.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-307">In that case, see [How do I deploy a Code First database without Migrations?](https://msdn.microsoft.com/library/ee942158.aspx#deploy_code_first_without_migrations) in the ASP.NET Web Deployment FAQ on MSDN.</span></span>

<span data-ttu-id="ae1ab-308">Die folgenden Schritte gelten für die **School Context** -Datenbank im Abschnitt **Datenbanken** des Dialog Felds.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-308">The following steps apply to the **SchoolContext** database in the dialog box's **Databases** section.</span></span>

1. <span data-ttu-id="ae1ab-309">Geben Sie im Feld **Remote Verbindungs Zeichenfolge** die folgende Verbindungs Zeichenfolge ein, die auf die neue SQL Server Express Anwendungsdatenbank verweist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-309">In the **Remote connection string** box, enter the following connection string that points to the new SQL Server Express application database.</span></span>

   [!code-console[Main](deploying-to-iis/samples/sample4.cmd)]

   <span data-ttu-id="ae1ab-310">Beim Bereitstellungs Prozess wird diese Verbindungs Zeichenfolge in die bereitgestellte Web. config-Datei eingefügt, weil **Diese Verbindungs Zeichenfolge zur Laufzeit verwenden** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-310">The deployment process puts this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

   <span data-ttu-id="ae1ab-311">Sie können die Verbindungs Zeichenfolge für die Anwendungsdatenbank auch aus **Server-Explorer** auf die gleiche Weise wie die Verbindungs Zeichenfolge der Mitgliedschafts Datenbank erhalten.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-311">You can also get the application database connection string from **Server Explorer** in the same way you got the membership database connection string.</span></span>

2. <span data-ttu-id="ae1ab-312">Wählen Sie **Code First-Migrationen ausführen (wird beim Anwendungsstart ausgeführt) aus**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-312">Select **Execute Code First Migrations (runs on application start)**.</span></span>

   <span data-ttu-id="ae1ab-313">Diese Option bewirkt, dass der Bereitstellungs Prozess die bereitgestellte Web. config-Datei konfiguriert, um den `MigrateDatabaseToLatestVersion` Initialisierer anzugeben.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-313">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="ae1ab-314">Dieser Initialisierer aktualisiert die Datenbank automatisch auf die neueste Version, wenn die Anwendung zum ersten Mal nach der Bereitstellung auf die Datenbank zugreift.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-314">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

### <a name="configure-publish-profile-transforms"></a><span data-ttu-id="ae1ab-315">Konfigurieren von Transformationen für Veröffentlichungs profile</span><span class="sxs-lookup"><span data-stu-id="ae1ab-315">Configure publish profile transforms</span></span>

1. <span data-ttu-id="ae1ab-316">Klicken Sie auf **Schließen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-316">Select **Close**.</span></span> <span data-ttu-id="ae1ab-317">Wählen Sie **Ja** aus, wenn Sie gefragt werden, ob Sie die Änderungen speichern möchten.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-317">Select **Yes** when you are asked if you want to save changes.</span></span>

2. <span data-ttu-id="ae1ab-318">Erweitern Sie in **Projektmappen-Explorer**den Knoten **Eigenschaften**, und erweitern Sie **publishprofiles**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-318">In **Solution Explorer**, expand **Properties**, expand **PublishProfiles**.</span></span>

3. <span data-ttu-id="ae1ab-319">Klicken Sie mit der rechten Maustaste auf *CustomProfile. pubxml* , und benennen Sie es *Test. pubxml*um.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-319">Right-click *CustomProfile.pubxml* and rename it *Test.pubxml*.</span></span>

4. <span data-ttu-id="ae1ab-320">Klicken Sie mit der rechten Maustaste auf *Test. pubxml*.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-320">Right-click *Test.pubxml*.</span></span> <span data-ttu-id="ae1ab-321">Wählen Sie **Konfigurations Transformation hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-321">Select **Add Config Transform**.</span></span>

   ![Menü zum Hinzufügen einer Konfigurations Transformation](deploying-to-iis/_static/image17.png)

   <span data-ttu-id="ae1ab-323">Visual Studio erstellt die Transformations Datei *Web. Test. config* und öffnet sie.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-323">Visual Studio creates the *Web.Test.config* transform file and opens it.</span></span>

5. <span data-ttu-id="ae1ab-324">Fügen Sie in der Transformations Datei *Web. Test. config* den folgenden Code direkt nach dem öffnenden Konfigurationstag ein.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-324">In the *Web.Test.config* transform file, insert the following code immediately after the opening configuration tag.</span></span>

   [!code-xml[Main](deploying-to-iis/samples/sample5.xml)]

    <span data-ttu-id="ae1ab-325">Wenn Sie das Profil für die Test Veröffentlichung verwenden, legt diese Transformation den Umgebungs Indikator auf "Test" fest.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-325">When you use the Test publish profile, this transform sets the environment indicator to "Test".</span></span> <span data-ttu-id="ae1ab-326">An der bereitgestellten Site sehen Sie "(Test)" nach der H1-Überschrift "TSO University".</span><span class="sxs-lookup"><span data-stu-id="ae1ab-326">In the deployed site, you'll see "(Test)" after the "Contoso University" H1 heading.</span></span>

6. <span data-ttu-id="ae1ab-327">Speichern und schließen Sie die Datei.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-327">Save and close the file.</span></span>

7. <span data-ttu-id="ae1ab-328">Klicken Sie mit der rechten Maustaste auf die Datei *Web. Test. config* , und wählen Sie **Vorschau Transformation** aus, um sicherzustellen, dass die codierte Transformation die erwarteten Änderungen erzeugt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-328">Right-click the *Web.Test.config* file and select **Preview Transform** to make sure that the transform you coded produces the expected changes.</span></span>

    <span data-ttu-id="ae1ab-329">Das **Web. config-Vorschau** Fenster zeigt das Ergebnis der Anwendung der Transformationen " *Web. Release. config* " und " *Web. Test. config* " an.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-329">The **Web.config Preview** window shows the result of applying both the *Web.Release.config* transforms and the *Web.Test.config* transforms.</span></span>

### <a name="preview-the-deployment-updates"></a><span data-ttu-id="ae1ab-330">Anzeigen einer Vorschau der Bereitstellungs Updates</span><span class="sxs-lookup"><span data-stu-id="ae1ab-330">Preview the deployment updates</span></span>

1. <span data-ttu-id="ae1ab-331">Öffnen Sie erneut den Assistenten **Web veröffentlichen** (Klicken Sie mit der rechten Maustaste auf das Projekt contosouniversity, wählen Sie **veröffentlichen**und dann **Vorschau**) aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-331">Open the **Publish Web** wizard again (right-click the ContosoUniversity project, select **Publish**, then **Preview**).</span></span>

2. <span data-ttu-id="ae1ab-332">Klicken Sie im Dialogfeld **Vorschau** auf **Vorschau starten** , um eine Liste der Dateien anzuzeigen, die kopiert werden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-332">In the **Preview** dialog box, select **Start Preview** to see a list of the files that will be copied.</span></span> 

   ![Vorschau veröffentlichen](deploying-to-iis/_static/image29.png)

   <span data-ttu-id="ae1ab-334">Sie können auch den Link **Datenbank anzeigen** auswählen, um die Skripts anzuzeigen, die in der Mitgliedschafts Datenbank ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-334">You can also select the **Preview database** link to see the scripts that will run in the membership database.</span></span> <span data-ttu-id="ae1ab-335">(Für Code First-Migrationen Bereitstellung werden keine Skripts ausgeführt, sodass für die Anwendungsdatenbank keine Vorschau angezeigt werden kann.)</span><span class="sxs-lookup"><span data-stu-id="ae1ab-335">(No scripts are run for Code First Migrations deployment, so there's nothing to preview for the application database.)</span></span>

3. <span data-ttu-id="ae1ab-336">Wählen Sie **Veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-336">Select **Publish**.</span></span>

   <span data-ttu-id="ae1ab-337">Wenn Visual Studio nicht im Administrator Modus ist, erhalten Sie möglicherweise eine Berechtigungs Fehlermeldung.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-337">If Visual Studio is not in administrator mode, you might get a permissions error message.</span></span> <span data-ttu-id="ae1ab-338">Schließen Sie in diesem Fall Visual Studio, öffnen Sie es im Administrator Modus, und versuchen Sie erneut, zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-338">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

   <span data-ttu-id="ae1ab-339">Wenn sich Visual Studio im Administrator Modus befindet, meldet das **Ausgabe** Fenster den erfolgreichen Build und die Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-339">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

   ![Output_window_publish_Test](deploying-to-iis/_static/image20.png)

   <span data-ttu-id="ae1ab-341">Wenn Sie die URL in das Feld **Ziel-URL** auf der Registerkarte Veröffentlichungs Profil **Verbindung** eingegeben haben, wird der Browser automatisch mit der Startseite der Configuration Manager-Startseite in IIS auf Ihrem Computer geöffnet.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-341">If you entered the URL in the **Destination URL** box on the publish profile **Connection** tab, the browser automatically opens to the Contoso University Home page running in IIS on your computer.</span></span>

## <a name="test-in-the-test-environment"></a><span data-ttu-id="ae1ab-342">Testen in der Testumgebung</span><span class="sxs-lookup"><span data-stu-id="ae1ab-342">Test in the test environment</span></span>

<span data-ttu-id="ae1ab-343">Beachten Sie, dass der Umgebungs Indikator "(Test)" anstelle von "(dev)" anzeigt, der anzeigt, dass die *Web. config* -Transformation für den Umgebungs Indikator erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-343">Notice that the environment indicator shows "(Test)" instead of "(Dev)," which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="ae1ab-344">Führen Sie die Seite **Dozenten** aus, um zu überprüfen, ob die Datenbank mit den Dozenten Daten Code First.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-344">Run the **Instructors** page to verify that Code First seeded the database with instructor data.</span></span> <span data-ttu-id="ae1ab-345">Wenn Sie diese Seite auswählen, kann es einige Minuten dauern, bis Code First die Datenbank erstellt und dann die `Seed`-Methode ausführt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-345">When you select this page, it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="ae1ab-346">(Dies ist nicht der Fall, wenn Sie auf der Startseite waren, weil die Anwendung noch nicht versucht hat, auf die Datenbank zuzugreifen.)</span><span class="sxs-lookup"><span data-stu-id="ae1ab-346">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="ae1ab-347">Wählen Sie die Registerkarte **Studenten** aus, um zu überprüfen, ob die bereitgestellte Datenbank keine Studenten</span><span class="sxs-lookup"><span data-stu-id="ae1ab-347">Select the **Students** tab to verify that the deployed database has no students.</span></span>

<span data-ttu-id="ae1ab-348">Wählen Sie im Menü " **Students** " die Option " **Students** "</span><span class="sxs-lookup"><span data-stu-id="ae1ab-348">Select **Add Students** from the **Students** menu.</span></span> <span data-ttu-id="ae1ab-349">Fügen Sie einen Studenten hinzu, und zeigen Sie dann den neuen Studenten auf der Seite " **Students** " an.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-349">Add a student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="ae1ab-350">Dadurch wird sichergestellt, dass Sie erfolgreich in die Datenbank schreiben können.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-350">This verifies that you can successfully write to the database.</span></span>

<span data-ttu-id="ae1ab-351">Wählen Sie im Menü **Kurse** die Option **Guthaben aktualisieren**aus.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-351">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="ae1ab-352">Die Seite " **Guthaben aktualisieren** " erfordert Administrator Berechtigungen, sodass die **Anmelde** Seite angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-352">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="ae1ab-353">Geben Sie die Anmelde Informationen für das Administrator Konto ein, die Sie zuvor erstellt haben ("admin" und "devpwd").</span><span class="sxs-lookup"><span data-stu-id="ae1ab-353">Enter the administrator account credentials that you created earlier ("admin" and "devpwd").</span></span> <span data-ttu-id="ae1ab-354">Die Seite " **Guthaben aktualisieren** " wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-354">The **Update Credits** page is displayed.</span></span> <span data-ttu-id="ae1ab-355">Dadurch wird überprüft, ob das Administrator Konto, das Sie im vorherigen Tutorial erstellt haben, ordnungsgemäß in der Testumgebung bereitgestellt wurde.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-355">This verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="ae1ab-356">Stellen Sie sicher, dass ein *ELMAH* -Ordner im Ordner " *c:\inetpub\wwwroot\condesouniversity* " vorhanden ist, der nur die Platzhalter Datei enthält.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-356">Verify that an *ELMAH* folder exists in the *c:\inetpub\wwwroot\ContosoUniversity* folder with only the placeholder file in it.</span></span>

<a id="reviewingmigrations"></a>

## <a name="review-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="ae1ab-357">Überprüfen Sie die automatischen Änderungen an "Web. config" für Code First-Migrationen</span><span class="sxs-lookup"><span data-stu-id="ae1ab-357">Review the automatic Web.config changes for Code First Migrations</span></span>

<span data-ttu-id="ae1ab-358">Öffnen Sie die Datei " *Web. config* " in der bereitgestellten Anwendung unter " *c:\inetpub\wwwroot\contosouniversity* ". Sie können sehen, wo der von Ihnen konfigurierte Bereitstellungs Prozess Code First-Migrationen, um die Datenbank automatisch auf die neueste Version zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-358">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deploying-to-iis/_static/image21.png)

<span data-ttu-id="ae1ab-359">Beim Bereitstellungs Prozess wurde außerdem eine neue Verbindungs Zeichenfolge für Code First-Migrationen erstellt, die ausschließlich zum Aktualisieren des Datenbankschemas verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-359">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![Verbindungs Zeichenfolge Database_Publish](deploying-to-iis/_static/image22.png)

<span data-ttu-id="ae1ab-361">Mit dieser zusätzlichen Verbindungs Zeichenfolge können Sie ein Benutzerkonto für Datenbankschema Updates und ein anderes Benutzerkonto für den Zugriff auf Anwendungsdaten angeben.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-361">This additional connection string enables you to specify one user account for database schema updates and a different user account for application data access.</span></span> <span data-ttu-id="ae1ab-362">Beispielsweise können Sie der Anwendung die Rolle " **DB\_Owner** " Code First-Migrationen und **DB-\_DataReader** mit **DB-\_-DataWriter** -Rollen zuweisen.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-362">For example, you could assign the **db\_owner** role to Code First Migrations and **db\_datareader** with **db\_datawriter** roles to the application.</span></span> <span data-ttu-id="ae1ab-363">Dies ist ein gängiges tiefgreifendes Verteidigungs Muster, das verhindert, dass potenziell bösartiger Code in der Anwendung das Datenbankschema ändert.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-363">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="ae1ab-364">(Dies kann beispielsweise bei einem erfolgreichen SQL Injection-Angriff vorkommen.) In diesen Tutorials wird dieses Muster nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-364">(For example, this might happen in a successful SQL injection attack.) These tutorials don't use this pattern.</span></span> <span data-ttu-id="ae1ab-365">Gehen Sie folgendermaßen vor, um dieses Muster in Ihrem Szenario zu implementieren:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-365">To implement this pattern in your scenario, take these steps:</span></span>

1. <span data-ttu-id="ae1ab-366">Geben Sie im Assistenten **Web veröffentlichen** auf der Registerkarte **Einstellungen** die Verbindungs Zeichenfolge ein, die einen Benutzer mit vollständigen Datenbankschema-Aktualisierungs Berechtigungen angibt.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-366">In the **Publish Web** wizard under the **Settings** tab, enter the connection string that specifies a user with full database schema update permissions.</span></span> <span data-ttu-id="ae1ab-367">Deaktivieren Sie das Kontrollkästchen **Diese Verbindungs Zeichenfolge zur Laufzeit verwenden** .</span><span class="sxs-lookup"><span data-stu-id="ae1ab-367">Clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="ae1ab-368">In der bereitgestellten Web. config-Datei wird dies die `DatabasePublish` Verbindungs Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-368">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>

2. <span data-ttu-id="ae1ab-369">Erstellen Sie eine Transformation für die Datei "Web. config" für die Verbindungs Zeichenfolge, die von der Anwendung zur Laufzeit verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-369">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

## <a name="summary"></a><span data-ttu-id="ae1ab-370">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="ae1ab-370">Summary</span></span>

<span data-ttu-id="ae1ab-371">Sie haben Ihre Anwendung nun auf dem Entwicklungs Computer auf IIS bereitgestellt und dort getestet.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-371">You've now deployed your application to IIS on your development computer and tested it there.</span></span>

![Startseite im Test](deploying-to-iis/_static/image23.png)

<span data-ttu-id="ae1ab-373">Dadurch wird sichergestellt, dass der Inhalt der Anwendung vom Bereitstellungs Prozess an den richtigen Speicherort kopiert wurde (ausgenommen der Dateien, die Sie nicht bereitstellen wollten) und dass IIS während der Bereitstellung ordnungsgemäß konfiguriert Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-373">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy) and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="ae1ab-374">Im nächsten Tutorial führen Sie einen weiteren Test aus, der einen Bereitstellungs Task findet, der noch nicht ausgeführt wurde: das Festlegen der Ordner Berechtigungen für den Ordner " *Elm AH* ".</span><span class="sxs-lookup"><span data-stu-id="ae1ab-374">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elm ah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="ae1ab-375">Weitere Informationen</span><span class="sxs-lookup"><span data-stu-id="ae1ab-375">More information</span></span>

<span data-ttu-id="ae1ab-376">Informationen zum Ausführen von IIS oder IIS Express in Visual Studio finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="ae1ab-376">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="ae1ab-377">[IIS Express Übersicht](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) auf der IIS.NET-Website.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-377">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="ae1ab-378">[Einführung in IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) von Scott Guthrie Blog.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-378">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="ae1ab-379">[Webserver in Visual Studio für ASP.NET-Webprojekte](https://msdn.microsoft.com/library/58wxa9w5.aspx).</span><span class="sxs-lookup"><span data-stu-id="ae1ab-379">[Web Servers in Visual Studio for ASP.NET Web Projects](https://msdn.microsoft.com/library/58wxa9w5.aspx).</span></span>
- <span data-ttu-id="ae1ab-380">[Grundlegende Unterschiede zwischen IIS und der ASP.NET Development Server](../../older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) auf der ASP.NET-Website.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-380">[Core Differences Between IIS and the ASP.NET Development Server](../../older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>

<span data-ttu-id="ae1ab-381">Informationen zu den Problemen, die auftreten können, wenn Ihre Anwendung mit mittlerer Vertrauenswürdigkeit ausgeführt wird, finden Sie unter [Hosting ASP.NET Applications in Mittel Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) auf den vier Guys von Rolla Site.</span><span class="sxs-lookup"><span data-stu-id="ae1ab-381">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the four Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ae1ab-382">[Zurück](project-properties.md)
> [Weiter](setting-folder-permissions.md)</span><span class="sxs-lookup"><span data-stu-id="ae1ab-382">[Previous](project-properties.md)
[Next](setting-folder-permissions.md)</span></span>
