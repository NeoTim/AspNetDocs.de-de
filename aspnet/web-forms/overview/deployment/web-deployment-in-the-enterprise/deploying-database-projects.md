---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
title: Bereitstellen von Datenbankprojekten | Microsoft-Dokumentation
author: jrjlee
description: 'Hinweis: in vielen Szenarien für die Unternehmens Bereitstellung ist es erforderlich, inkrementelle Updates für eine bereitgestellte Datenbank zu veröffentlichen. Die Alternative besteht darin, neu zu erstellen...'
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 832f226a-1aa3-4093-8c29-ce4196793259
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/deploying-database-projects
msc.type: authoredcontent
ms.openlocfilehash: 221808758492aedb8e8329364e511df28fd11105
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78514941"
---
# <a name="deploying-database-projects"></a><span data-ttu-id="0b785-104">Bereitstellen von Datenbankprojekten</span><span class="sxs-lookup"><span data-stu-id="0b785-104">Deploying Database Projects</span></span>

<span data-ttu-id="0b785-105">von [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="0b785-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="0b785-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="0b785-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> [!NOTE]
> <span data-ttu-id="0b785-107">In vielen Szenarien für die Unternehmens Bereitstellung benötigen Sie die Möglichkeit, inkrementelle Updates für eine bereitgestellte Datenbank zu veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="0b785-107">In lots of enterprise deployment scenarios, you need the ability to publish incremental updates to a deployed database.</span></span> <span data-ttu-id="0b785-108">Die Alternative besteht darin, die Datenbank bei jeder Bereitstellung neu zu erstellen. das bedeutet, dass alle Daten in der vorhandenen Datenbank verloren gehen.</span><span class="sxs-lookup"><span data-stu-id="0b785-108">The alternative is to recreate the database on every deployment, which means you lose any data in the existing database.</span></span> <span data-ttu-id="0b785-109">Wenn Sie mit Visual Studio 2010 arbeiten, ist die Verwendung von VSDBCMD der empfohlene Ansatz für die inkrementelle Daten Bank Veröffentlichung.</span><span class="sxs-lookup"><span data-stu-id="0b785-109">When you work with Visual Studio 2010, using VSDBCMD is the recommended approach to incremental database publishing.</span></span> <span data-ttu-id="0b785-110">Die nächste Version von Visual Studio und die Web Publishing Pipeline (WPP) enthalten jedoch Tools, die die inkrementelle Veröffentlichung direkt unterstützen.</span><span class="sxs-lookup"><span data-stu-id="0b785-110">However, the next version of Visual Studio and the Web Publishing Pipeline (WPP) will include tooling that supports incremental publishing directly.</span></span>

<span data-ttu-id="0b785-111">Wenn Sie die Beispiellösung Contact Manager in Visual Studio 2010 öffnen, sehen Sie, dass das Datenbankprojekt einen Ordner properties enthält, der vier Dateien enthält.</span><span class="sxs-lookup"><span data-stu-id="0b785-111">If you open the Contact Manager sample solution in Visual Studio 2010, you'll see that the database project includes a Properties folder that contains four files.</span></span>

![](deploying-database-projects/_static/image1.png)

<span data-ttu-id="0b785-112">Mit der Projektdatei (in diesem Fall "*ContactManager. Database. dbproj* ") können diese Dateien verschiedene Aspekte des Build-und Bereitstellungs Prozesses steuern:</span><span class="sxs-lookup"><span data-stu-id="0b785-112">Together with the project file (*ContactManager.Database.dbproj* in this case), these files control various aspects of the build and deployment process:</span></span>

- <span data-ttu-id="0b785-113">Die Datei *Database. sqlcmdvars* enthält Werte für alle sqlcmd-Variablen, die Sie verwenden, wenn Sie das Projekt bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-113">The *Database.sqlcmdvars* file provides values for any SQLCMD variables you use when you deploy the project.</span></span> <span data-ttu-id="0b785-114">Jede Projektmappenkonfiguration (z. b. Debug und Release) kann eine andere sqlcmdvars-Datei angeben.</span><span class="sxs-lookup"><span data-stu-id="0b785-114">Each solution configuration (for example, debug and release) can specify a different .sqlcmdvars file.</span></span>
- <span data-ttu-id="0b785-115">Die Datei *Database. sqldeployment* stellt Bereitstellungs spezifische Einstellungen bereit, z. b. ob die im Projekt definierte Sortierung oder die Sortierung des Zielservers verwendet werden soll, ob die Zieldatenbank jedes Mal neu erstellt oder einfach die vorhandene Datenbank geändert werden soll, um Sie auf den neuesten Stand zu bringen usw.</span><span class="sxs-lookup"><span data-stu-id="0b785-115">The *Database.sqldeployment* file provides deployment-specific settings, like whether to use the collation defined in your project or the collation of the destination server, whether to recreate the destination database every time or simply amend the existing database to bring it up to date, and so on.</span></span> <span data-ttu-id="0b785-116">In jeder Projektmappenkonfiguration kann eine andere sqldeployment-Datei angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="0b785-116">Each solution configuration can specify a different .sqldeployment file.</span></span>
- <span data-ttu-id="0b785-117">Die *Datenbank. sqlberechtigungs* Datei ist ein XML-Dokument, das Sie verwenden können, um alle Berechtigungen zu definieren, die Sie der Zieldatenbank hinzufügen möchten.</span><span class="sxs-lookup"><span data-stu-id="0b785-117">The *Database.sqlpermissions* file is an XML document that you can use to define any permissions you want to add to the target database.</span></span> <span data-ttu-id="0b785-118">Alle Projektmappenkonfigurationen verwenden die gleiche. sqlberechtigungs Datei.</span><span class="sxs-lookup"><span data-stu-id="0b785-118">All solution configurations share the same .sqlpermissions file.</span></span>
- <span data-ttu-id="0b785-119">Die *Datenbank. sqlsettings* -Datei gibt die Eigenschaften auf Datenbankebene an, die beim Erstellen der Datenbank verwendet werden sollen, wie z. b. die zu verwendende Sortierung, das Verhalten von Vergleichs Operatoren usw.</span><span class="sxs-lookup"><span data-stu-id="0b785-119">The *Database.sqlsettings* file specifies the database-level properties to use when creating the database, like the collation to use, the behavior of comparison operators, and so on.</span></span> <span data-ttu-id="0b785-120">Alle Projektmappenkonfigurationen verwenden dieselbe sqlsettings-Datei.</span><span class="sxs-lookup"><span data-stu-id="0b785-120">All solution configurations share the same .sqlsettings file.</span></span>

<span data-ttu-id="0b785-121">Es lohnt sich, diese Dateien in Visual Studio zu öffnen und sich mit den Inhalten vertraut zu machen.</span><span class="sxs-lookup"><span data-stu-id="0b785-121">It's worth taking a moment to open these files in Visual Studio and familiarize yourself with the contents.</span></span>

<span data-ttu-id="0b785-122">Beim Erstellen eines Datenbankprojekts werden vom Buildprozess zwei Dateien erstellt:</span><span class="sxs-lookup"><span data-stu-id="0b785-122">When you build a database project, the build process creates two files:</span></span>

- <span data-ttu-id="0b785-123">Ein *Datenbankschema* (dbschema-Datei).</span><span class="sxs-lookup"><span data-stu-id="0b785-123">A *database schema* (.dbschema file).</span></span> <span data-ttu-id="0b785-124">Dies beschreibt das Schema der Datenbank, die Sie im XML-Format erstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0b785-124">This describes the schema of the database you want to create in XML format.</span></span>
- <span data-ttu-id="0b785-125">Ein *Bereitstellungs Manifest* (. DeployManifest-Datei).</span><span class="sxs-lookup"><span data-stu-id="0b785-125">A *deployment manifest* (.deploymanifest file).</span></span> <span data-ttu-id="0b785-126">Diese enthält alle Informationen, die zum Erstellen und Bereitstellen der Datenbank erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="0b785-126">This contains all the information required to create and deploy your database.</span></span> <span data-ttu-id="0b785-127">Er verweist auf die dbschema-Datei zusammen mit anderen Ressourcen, wie z. b. die Bereitstellungs Anweisungen (sqldeployment-Datei) und alle SQL-Skripts vor oder nach der Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="0b785-127">It references the .dbschema file along with other resources, like the deployment instructions (the .sqldeployment file) and any pre-deployment or post-deployment SQL scripts.</span></span>

<span data-ttu-id="0b785-128">Dadurch wird die Beziehung zwischen diesen Ressourcen angezeigt:</span><span class="sxs-lookup"><span data-stu-id="0b785-128">This shows the relationship between these resources:</span></span>

![](deploying-database-projects/_static/image2.png)

<span data-ttu-id="0b785-129">Wie Sie sehen können, sind die sqlsettings-Datei und die sqlberechtigungs-Datei Eingaben für den Buildprozess.</span><span class="sxs-lookup"><span data-stu-id="0b785-129">As you can see, the .sqlsettings file and the .sqlpermissions file are inputs to the build process.</span></span> <span data-ttu-id="0b785-130">Diese Dateien werden zusammen mit der Datenbankprojekt Datei zum Erstellen der Datenbankschema Datei verwendet.</span><span class="sxs-lookup"><span data-stu-id="0b785-130">Along with the database project file, these files are used to create the database schema file.</span></span> <span data-ttu-id="0b785-131">Die sqldeployment-Datei und die sqlcmdvars-Datei durchlaufen den Buildprozess unverändert.</span><span class="sxs-lookup"><span data-stu-id="0b785-131">The .sqldeployment file and the .sqlcmdvars file pass through the build process unchanged.</span></span> <span data-ttu-id="0b785-132">Das Bereitstellungs Manifest gibt den Speicherort des Datenbankschemas, die sqldeployment-Datei, die sqlcmdvars-Datei und alle SQL-Skripts vor oder nach der Bereitstellung an.</span><span class="sxs-lookup"><span data-stu-id="0b785-132">The deployment manifest indicates the location of the database schema, the .sqldeployment file, the .sqlcmdvars file, and any pre-deployment or post-deployment SQL scripts.</span></span>

## <a name="why-use-vsdbcmd-to-deploy-a-database-project"></a><span data-ttu-id="0b785-133">Gründe für die Bereitstellung eines Datenbankprojekts mit VSDBCmd</span><span class="sxs-lookup"><span data-stu-id="0b785-133">Why Use VSDBCMD to Deploy a Database Project?</span></span>

<span data-ttu-id="0b785-134">Es gibt verschiedene Ansätze zum Bereitstellen von Datenbankprojekten.</span><span class="sxs-lookup"><span data-stu-id="0b785-134">There are various different approaches to deploying database projects.</span></span> <span data-ttu-id="0b785-135">Allerdings sind nicht alle für die Bereitstellung eines Datenbankprojekts auf Remote Servern in einer Unternehmensumgebung geeignet.</span><span class="sxs-lookup"><span data-stu-id="0b785-135">However, not all of them are suitable for deploying a database project to remote servers in an enterprise environment.</span></span> <span data-ttu-id="0b785-136">Beachten Sie, was Sie in einer Datenbankprojekt Bereitstellung wünschen.</span><span class="sxs-lookup"><span data-stu-id="0b785-136">Consider what you want from a database project deployment.</span></span> <span data-ttu-id="0b785-137">In Szenarien für die Unternehmens Bereitstellung benötigen Sie wahrscheinlich Folgendes:</span><span class="sxs-lookup"><span data-stu-id="0b785-137">In enterprise deployment scenarios, you're likely to want:</span></span>

- <span data-ttu-id="0b785-138">Die Möglichkeit, das Datenbankprojekt von einem Remote Standort aus bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-138">The ability to deploy the database project from a remote location.</span></span>
- <span data-ttu-id="0b785-139">Die Möglichkeit, inkrementelle Aktualisierungen für eine vorhandene Datenbank vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="0b785-139">The ability to make incremental updates to an existing database.</span></span>
- <span data-ttu-id="0b785-140">Die Möglichkeit, Skripts vor der Bereitstellung oder Skripts nach der Bereitstellung einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="0b785-140">The ability to include pre-deployment scripts or post-deployment scripts.</span></span>
- <span data-ttu-id="0b785-141">Die Möglichkeit, die Bereitstellung auf mehrere Ziel Umgebungen abzustimmen.</span><span class="sxs-lookup"><span data-stu-id="0b785-141">The ability to tailor the deployment to multiple destination environments.</span></span>
- <span data-ttu-id="0b785-142">Die Möglichkeit zur Bereitstellung des Datenbankprojekts als Teil einer größeren, in der Regel bereitgestellten Lösung für die Bereitstellung von Einzelschritten.</span><span class="sxs-lookup"><span data-stu-id="0b785-142">The ability to deploy the database project as part of a larger, typically scripted, single-step solution deployment.</span></span>

<span data-ttu-id="0b785-143">Es gibt drei Hauptansätze, die Sie verwenden können, um ein Datenbankprojekt bereitzustellen:</span><span class="sxs-lookup"><span data-stu-id="0b785-143">There are three main approaches you can use to deploy a database project:</span></span>

- <span data-ttu-id="0b785-144">Sie können die Bereitstellungs Funktion mit dem Daten Bank Projekttyp in Visual Studio 2010 verwenden.</span><span class="sxs-lookup"><span data-stu-id="0b785-144">You can use the deployment functionality with the database project type in Visual Studio 2010.</span></span> <span data-ttu-id="0b785-145">Wenn Sie ein Datenbankprojekt in Visual Studio 2010 erstellen und bereitstellen, verwendet der Bereitstellungs Prozess das Bereitstellungs Manifest, um eine für die Buildkonfiguration spezifische SQL-basierte Bereitstellungs Datei zu generieren.</span><span class="sxs-lookup"><span data-stu-id="0b785-145">When you build and deploy a database project in Visual Studio 2010, the deployment process uses the deployment manifest to generate a SQL-based deployment file specific to the build configuration.</span></span> <span data-ttu-id="0b785-146">Dadurch wird die Datenbank erstellt, wenn Sie noch nicht vorhanden ist, oder es werden erforderliche Änderungen an der Datenbank vorgenommen, wenn Sie bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="0b785-146">This will create the database if it doesn't already exist or make any necessary changes to the database if it does already exist.</span></span> <span data-ttu-id="0b785-147">Sie können "sqlcmd. exe" verwenden, um diese Datei auf dem Zielserver auszuführen, oder Sie können festlegen, dass Visual Studio die Datei erstellt und ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="0b785-147">You can use SQLCMD.exe to run this file on your destination server, or you can set Visual Studio to create and run the file.</span></span> <span data-ttu-id="0b785-148">Der Nachteil dieses Ansatzes besteht darin, dass Sie nur eingeschränkte Kontrolle über die Bereitstellungs Einstellungen haben.</span><span class="sxs-lookup"><span data-stu-id="0b785-148">The disadvantage of this approach is that you have only limited control over the deployment settings.</span></span> <span data-ttu-id="0b785-149">Möglicherweise müssen Sie auch die SQL-Bereitstellungs Datei ändern, um Umgebungs spezifische Variablen Werte bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-149">You may often also need to modify the SQL deployment file to provide environment-specific variable values.</span></span> <span data-ttu-id="0b785-150">Sie können diesen Ansatz nur auf einem Computer verwenden, auf dem Visual Studio 2010 installiert ist, und der Entwickler muss die Verbindungs Zeichenfolgen und Anmelde Informationen für alle Ziel Umgebungen kennen.</span><span class="sxs-lookup"><span data-stu-id="0b785-150">You can only use this approach from a computer with Visual Studio 2010 installed, and the developer would need to know and provide connection strings and credentials for all destination environments.</span></span>
- <span data-ttu-id="0b785-151">Sie können das Internetinformationsdienste (IIS)-Webbereitstellungs Tool (Web deploy) verwenden, um [eine Datenbank als Teil eines Webanwendungs Projekts](https://msdn.microsoft.com/library/dd465343.aspx)bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-151">You can use the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) to [deploy a database as part of a web application project](https://msdn.microsoft.com/library/dd465343.aspx).</span></span> <span data-ttu-id="0b785-152">Dieser Ansatz ist jedoch viel komplexer, wenn Sie ein Datenbankprojekt bereitstellen möchten, anstatt einfach eine vorhandene lokale Datenbank auf einem Zielserver zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="0b785-152">However, this approach is a lot more complex if you want to deploy a database project rather than simply replicate an existing local database on a destination server.</span></span> <span data-ttu-id="0b785-153">Sie können Web deploy konfigurieren, um das SQL-Bereitstellungs Skript auszuführen, das vom Datenbankprojekt generiert wird. hierfür müssen Sie jedoch eine benutzerdefinierte WPP-Zieldatei für das Webanwendungs Projekt erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-153">You can configure Web Deploy to run the SQL deployment script that the database project generates, but in order to do this, you need to create a custom WPP targets file for your web application project.</span></span> <span data-ttu-id="0b785-154">Dadurch wird der Bereitstellungs Prozess erheblich komplexer.</span><span class="sxs-lookup"><span data-stu-id="0b785-154">This adds a substantial amount of complexity to the deployment process.</span></span> <span data-ttu-id="0b785-155">Darüber hinaus unterstützt Web deploy inkrementelle Updates für vorhandene Datenbanken nicht direkt.</span><span class="sxs-lookup"><span data-stu-id="0b785-155">In addition, Web Deploy does not directly support incremental updates to existing databases.</span></span> <span data-ttu-id="0b785-156">Weitere Informationen zu diesem Ansatz finden Sie unter [Erweitern der Webpublishing Pipeline auf die Paketdaten Bank Projekt](https://go.microsoft.com/?linkid=9805121)bereitgestellte SQL-Datei.</span><span class="sxs-lookup"><span data-stu-id="0b785-156">For more information on this approach, see [Extending the Web Publishing Pipeline to package database project deployed SQL file](https://go.microsoft.com/?linkid=9805121).</span></span>
- <span data-ttu-id="0b785-157">Sie können das Hilfsprogramm VSDBCmd verwenden, um die Datenbank mithilfe des Datenbankschemas oder des Bereitstellungs Manifests bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-157">You can use the VSDBCMD utility to deploy the database, using either the database schema or the deployment manifest.</span></span> <span data-ttu-id="0b785-158">Sie können "VSDBCMD. exe" von einem MSBuild-Ziel aus anrufen, mit dem Sie Datenbanken im Rahmen eines größeren, Skript gesteuerten Bereitstellungs Prozesses veröffentlichen können.</span><span class="sxs-lookup"><span data-stu-id="0b785-158">You can call VSDBCMD.exe from an MSBuild target, which lets you publish databases as part of a larger, scripted deployment process.</span></span> <span data-ttu-id="0b785-159">Sie können die Variablen in der sqlcmdvars-Datei und viele andere Daten Bank Eigenschaften aus einem VSDBCmd-Befehl überschreiben, sodass Sie die Bereitstellung für verschiedene Umgebungen anpassen können, ohne mehrere Buildkonfigurationen zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-159">You can override the variables in your .sqlcmdvars file and lots of other database properties from a VSDBCMD command, which allows you to customize your deployment for different environments without creating multiple build configurations.</span></span> <span data-ttu-id="0b785-160">VSDBCMD bietet Differenzierungs Funktionen. Dies bedeutet, dass nur die erforderlichen Änderungen vorgenommen werden müssen, um eine Zieldatenbank mit dem Datenbankschema auszurichten.</span><span class="sxs-lookup"><span data-stu-id="0b785-160">VSDBCMD provides differentiation functionality, which means it will make only the necessary changes to align a destination database with your database schema.</span></span> <span data-ttu-id="0b785-161">VSDBCMD bietet auch eine große Bandbreite an Befehlszeilenoptionen, mit denen Sie den Bereitstellungs Prozess präzise steuern können.</span><span class="sxs-lookup"><span data-stu-id="0b785-161">VSDBCMD also offers a wide range of command-line options, which give you fine-grained control over the deployment process.</span></span>

<span data-ttu-id="0b785-162">In dieser Übersicht können Sie sehen, dass die Verwendung von VSDBCMD mit MSBuild der Ansatz ist, der sich am besten für ein typisches Szenario für die Unternehmens Bereitstellung eignet:</span><span class="sxs-lookup"><span data-stu-id="0b785-162">From this overview, you can see that using VSDBCMD with MSBuild is the approach best suited to a typical enterprise deployment scenario:</span></span>

|  | <span data-ttu-id="0b785-163">Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="0b785-163">Visual Studio 2010</span></span> | <span data-ttu-id="0b785-164">Web Deploy 2.0</span><span class="sxs-lookup"><span data-stu-id="0b785-164">Web Deploy 2.0</span></span> | <span data-ttu-id="0b785-165">VSDBCMD.exe</span><span class="sxs-lookup"><span data-stu-id="0b785-165">VSDBCMD.exe</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="0b785-166">Unterstützt die Remote Bereitstellung?</span><span class="sxs-lookup"><span data-stu-id="0b785-166">Supports remote deployment?</span></span> | <span data-ttu-id="0b785-167">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-167">Yes</span></span> | <span data-ttu-id="0b785-168">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-168">Yes</span></span> | <span data-ttu-id="0b785-169">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-169">Yes</span></span> |
| <span data-ttu-id="0b785-170">Unterstützt inkrementelle Updates</span><span class="sxs-lookup"><span data-stu-id="0b785-170">Supports incremental updates?</span></span> | <span data-ttu-id="0b785-171">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-171">Yes</span></span> | <span data-ttu-id="0b785-172">Nein</span><span class="sxs-lookup"><span data-stu-id="0b785-172">No</span></span> | <span data-ttu-id="0b785-173">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-173">Yes</span></span> |
| <span data-ttu-id="0b785-174">Unterstützt Skripts vor und nach der Bereitstellung?</span><span class="sxs-lookup"><span data-stu-id="0b785-174">Supports pre/post-deployment scripts?</span></span> | <span data-ttu-id="0b785-175">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-175">Yes</span></span> | <span data-ttu-id="0b785-176">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-176">Yes</span></span> | <span data-ttu-id="0b785-177">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-177">Yes</span></span> |
| <span data-ttu-id="0b785-178">Unterstützt die Bereitstellung in mehreren Umgebungen?</span><span class="sxs-lookup"><span data-stu-id="0b785-178">Supports multi-environment deployment?</span></span> | <span data-ttu-id="0b785-179">Eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="0b785-179">Limited</span></span> | <span data-ttu-id="0b785-180">Eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="0b785-180">Limited</span></span> | <span data-ttu-id="0b785-181">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-181">Yes</span></span> |
| <span data-ttu-id="0b785-182">Unterstützt die Skript gesteuerte Bereitstellung?</span><span class="sxs-lookup"><span data-stu-id="0b785-182">Supports scripted deployment?</span></span> | <span data-ttu-id="0b785-183">Eingeschränkt</span><span class="sxs-lookup"><span data-stu-id="0b785-183">Limited</span></span> | <span data-ttu-id="0b785-184">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-184">Yes</span></span> | <span data-ttu-id="0b785-185">Ja</span><span class="sxs-lookup"><span data-stu-id="0b785-185">Yes</span></span> |

<span data-ttu-id="0b785-186">Im restlichen Teil dieses Themas wird die Verwendung von VSDBCMD mit MSBuild zum Bereitstellen von Datenbankprojekten beschrieben.</span><span class="sxs-lookup"><span data-stu-id="0b785-186">The remainder of this topic describes the use of VSDBCMD with MSBuild to deploy database projects.</span></span>

## <a name="understanding-the-deployment-process"></a><span data-ttu-id="0b785-187">Grundlegendes zum Bereitstellungs Prozess</span><span class="sxs-lookup"><span data-stu-id="0b785-187">Understanding the Deployment Process</span></span>

<span data-ttu-id="0b785-188">Mit dem VSDBCmd-Hilfsprogramm können Sie eine Datenbank entweder mit dem Datenbankschema (dbschema-Datei) oder dem Bereitstellungs Manifest (DeployManifest-Datei) bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-188">The VSDBCMD utility lets you deploy a database using either the database schema (the .dbschema file) or the deployment manifest (the .deploymanifest file).</span></span> <span data-ttu-id="0b785-189">In der Praxis verwenden Sie fast immer das Bereitstellungs Manifest, da Sie mit dem Bereitstellungs Manifest Standardwerte für verschiedene Bereitstellungs Eigenschaften bereitstellen und alle SQL-Skripts vor oder nach der Bereitstellung identifizieren können, die Sie ausführen möchten.</span><span class="sxs-lookup"><span data-stu-id="0b785-189">In practice, you'll almost always use the deployment manifest, as the deployment manifest lets you provide default values for various deployment properties and identify any pre-deployment or post-deployment SQL scripts you want to run.</span></span> <span data-ttu-id="0b785-190">Beispielsweise wird dieser VSDBCmd-Befehl verwendet, um die **ContactManager** -Datenbank auf einem Datenbankserver in einer Testumgebung bereitzustellen:</span><span class="sxs-lookup"><span data-stu-id="0b785-190">For example, this VSDBCMD command is used to deploy the **ContactManager** database to a database server in a test environment:</span></span>

[!code-console[Main](deploying-database-projects/samples/sample1.cmd)]

<span data-ttu-id="0b785-191">In diesem Fall:</span><span class="sxs-lookup"><span data-stu-id="0b785-191">In this case:</span></span>

- <span data-ttu-id="0b785-192">Der Schalter **/a** (oder **/Action**) gibt an, was VSDBCmd tun soll.</span><span class="sxs-lookup"><span data-stu-id="0b785-192">The **/a** (or **/Action**) switch specifies what you want VSDBCMD to do.</span></span> <span data-ttu-id="0b785-193">Sie können diese Einstellung **importieren** **oder bereit**stellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-193">You can set this to **Import** or **Deploy**.</span></span> <span data-ttu-id="0b785-194">Die **Import** Option wird verwendet, um eine dbschema-Datei aus einer vorhandenen Datenbank zu generieren, **und die** Bereitstellungs Option wird verwendet, um eine dbschema-Datei in einer Zieldatenbank bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-194">The **Import** option is used to generate a .dbschema file from an existing database, and the **Deploy** option is used to deploy a .dbschema file to a target database.</span></span>
- <span data-ttu-id="0b785-195">Der Schalter **/Manifest** (oder **/MANIFESTFILE**) identifiziert die. DeployManifest-Datei, die Sie bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0b785-195">The **/manifest** (or **/ManifestFile**) switch identifies the .deploymanifest file you want to deploy.</span></span> <span data-ttu-id="0b785-196">Wenn Sie stattdessen die dbschema-Datei verwenden möchten, verwenden Sie den Schalter **/Model** (oder **/ModelFile**).</span><span class="sxs-lookup"><span data-stu-id="0b785-196">If you wanted to use the .dbschema file instead, you'd use the **/model** (or **/ModelFile**) switch.</span></span>
- <span data-ttu-id="0b785-197">Der Schalter **/CS** (oder **'/ConnectionString '** ) stellt die Verbindungs Zeichenfolge für den Ziel Datenbankserver bereit.</span><span class="sxs-lookup"><span data-stu-id="0b785-197">The **/cs** (or **/ConnectionString**) switch provides the connection string for the target database server.</span></span> <span data-ttu-id="0b785-198">Beachten Sie, dass dies nicht den Namen der Datenbank&#x2014;enthält, mit der VSDBCmd eine Verbindung mit dem Server herstellen muss, um die Datenbank zu erstellen. Es muss keine Verbindung mit einer einzelnen Datenbank hergestellt werden.</span><span class="sxs-lookup"><span data-stu-id="0b785-198">Note that this doesn't include the name of the database&#x2014;VSDBCMD needs to connect to the server to create the database; it doesn't need to connect to an individual database.</span></span> <span data-ttu-id="0b785-199">Wenn Ihre DeployManifest-Datei eine Verbindungs Zeichenfolge enthält, können Sie diesen Schalter weglassen.</span><span class="sxs-lookup"><span data-stu-id="0b785-199">If your .deploymanifest file includes a connection string, you can omit this switch.</span></span> <span data-ttu-id="0b785-200">Wenn Sie den Switch trotzdem verwenden, wird der Wert von ". DeployManifest" durch den Schalter Wert überschrieben.</span><span class="sxs-lookup"><span data-stu-id="0b785-200">If you use the switch anyway, the switch value will override the .deploymanifest value.</span></span>
- <span data-ttu-id="0b785-201">Die <strong>/p: TargetDatabase</strong> -Eigenschaft gibt den Namen an, der der Zieldatenbank bei der Erstellung zugewiesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="0b785-201">The <strong>/p:TargetDatabase</strong> property provides the name you want to assign to the target database on creation.</span></span> <span data-ttu-id="0b785-202">Dies überschreibt den Wert der <strong>TargetDatabase</strong> -Eigenschaft in der DeployManifest-Datei.</span><span class="sxs-lookup"><span data-stu-id="0b785-202">This overrides the value of the <strong>TargetDatabase</strong> property in the .deploymanifest file.</span></span> <span data-ttu-id="0b785-203">Sie können die Syntax <strong>/p:</strong> <em>[Property Name]</em>verwenden, um eine Vielzahl von Bereitstellungs Eigenschaften festzulegen und alle sqlcmd-Variablen zu überschreiben, die in der sqlcmdvars-Datei deklariert sind.</span><span class="sxs-lookup"><span data-stu-id="0b785-203">You can use the <strong>/p:</strong> <em>[property name]</em>syntax to set a wide variety of deployment properties and to override any SQLCMD variables declared in your .sqlcmdvars file.</span></span>
- <span data-ttu-id="0b785-204">Der Schalter **/DD +** (oder **/DeployToDatabase +** ) gibt an, dass Sie eine Bereitstellung erstellen und in der Zielumgebung bereitstellen möchten.</span><span class="sxs-lookup"><span data-stu-id="0b785-204">The **/dd+** (or **/DeployToDatabase+**) switch indicates that you want to create a deployment and deploy it to the target environment.</span></span> <span data-ttu-id="0b785-205">Wenn Sie **/DD-** angeben oder den Schalter weglassen, wird von VSDBCMD ein Bereitstellungs Skript generiert, aber nicht in der Zielumgebung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0b785-205">If you specify **/dd-**, or omit the switch, VSDBCMD will generate a deployment script but will not deploy it to the target environment.</span></span> <span data-ttu-id="0b785-206">Dieser Schalter ist häufig die Ursache für Verwirrung und wird im nächsten Abschnitt ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="0b785-206">This switch is often the source of confusion and is explained in more detail in the next section.</span></span>
- <span data-ttu-id="0b785-207">Der Schalter **/Script** (oder **/DeploymentScriptFile**) gibt an, wo Sie das Bereitstellungs Skript generieren möchten.</span><span class="sxs-lookup"><span data-stu-id="0b785-207">The **/script** (or **/DeploymentScriptFile**) switch specifies where you want to generate the deployment script.</span></span> <span data-ttu-id="0b785-208">Dieser Wert hat keine Auswirkung auf den Bereitstellungs Prozess.</span><span class="sxs-lookup"><span data-stu-id="0b785-208">This value does not affect the deployment process.</span></span>

<span data-ttu-id="0b785-209">Weitere Informationen zu VSDBCmd finden Sie unter [Befehlszeilen Referenz für "VSDBCmd". EXE (Bereitstellung und Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) und Vorgehens [Weise: Vorbereiten einer Datenbank für die Bereitstellung über eine Eingabeaufforderung mithilfe von VSDBCMD. EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span><span class="sxs-lookup"><span data-stu-id="0b785-209">For more information on VSDBCMD, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx) and [How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE](https://msdn.microsoft.com/library/dd193258.aspx).</span></span>

<span data-ttu-id="0b785-210">Ein Beispiel für die Verwendung von VSDBCMD aus einer MSBuild-Projektdatei finden Sie Untergrund Legendes [zum Buildprozess](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="0b785-210">For an example of how you can use VSDBCMD from an MSBuild project file, see [Understanding the Build Process](understanding-the-build-process.md).</span></span> <span data-ttu-id="0b785-211">Beispiele zum Konfigurieren von Einstellungen für die Daten Bank Bereitstellung für mehrere Umgebungen finden Sie unter [Anpassen von Daten Bank Bereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="0b785-211">For examples of how to configure database deployment settings for multiple environments, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="understanding-the-deploytodatabase-switch"></a><span data-ttu-id="0b785-212">Grundlegendes zum "deploydedatabase"-Schalter</span><span class="sxs-lookup"><span data-stu-id="0b785-212">Understanding the DeployToDatabase Switch</span></span>

<span data-ttu-id="0b785-213">Das Verhalten des **/DD** -oder **/DeployToDatabase** -Schalters hängt davon ab, ob Sie VSDBCmd mit einer dbschema-Datei oder einer DeployManifest-Datei verwenden.</span><span class="sxs-lookup"><span data-stu-id="0b785-213">The behavior of the **/dd** or **/DeployToDatabase** switch depends on whether you're using VSDBCMD with a .dbschema file or a .deploymanifest file.</span></span> <span data-ttu-id="0b785-214">Wenn Sie eine dbschema-Datei verwenden, ist das Verhalten recht einfach:</span><span class="sxs-lookup"><span data-stu-id="0b785-214">If you're using a .dbschema file, the behavior is fairly straightforward:</span></span>

- <span data-ttu-id="0b785-215">Wenn Sie **/DD +** oder **/DD**angeben, generiert VSDBCmd ein Bereitstellungs Skript und stellt die Datenbank bereit.</span><span class="sxs-lookup"><span data-stu-id="0b785-215">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="0b785-216">Wenn Sie **/DD-** angeben oder den Schalter weglassen, wird von VSDBCMD nur ein Bereitstellungs Skript generiert.</span><span class="sxs-lookup"><span data-stu-id="0b785-216">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

<span data-ttu-id="0b785-217">Wenn Sie eine DeployManifest-Datei verwenden, ist das Verhalten viel komplizierter.</span><span class="sxs-lookup"><span data-stu-id="0b785-217">If you're using a .deploymanifest file, the behavior is a lot more complicated.</span></span> <span data-ttu-id="0b785-218">Dies liegt daran, dass die DeployManifest-Datei einen Eigenschaften Namen **deploydedatabase** enthält, der auch bestimmt, ob die Datenbank bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="0b785-218">This is because the .deploymanifest file contains a property name **DeployToDatabase** that also determines whether the database is deployed.</span></span>

[!code-xml[Main](deploying-database-projects/samples/sample2.xml)]

<span data-ttu-id="0b785-219">Der Wert dieser Eigenschaft wird entsprechend den Eigenschaften des Datenbankprojekts festgelegt.</span><span class="sxs-lookup"><span data-stu-id="0b785-219">The value of this property is set according to the properties of the database project.</span></span> <span data-ttu-id="0b785-220">Wenn Sie die **Aktion** bereitstellen so festlegen, dass **ein Bereitstellungs Skript (. SQL) erstellt**wird, lautet der Wert **false**.</span><span class="sxs-lookup"><span data-stu-id="0b785-220">If you set the **Deploy action** to **Create a deployment script (.sql)**, the value will be **False**.</span></span> <span data-ttu-id="0b785-221">Wenn Sie die **Aktion** bereitstellen zum **Erstellen eines Bereitstellungs Skripts (. SQL) und zum Bereitstellen in der Datenbank**festlegen, ist der Wert **true**.</span><span class="sxs-lookup"><span data-stu-id="0b785-221">If you set the **Deploy action** to **Create a deployment script (.sql) and deploy to the database**, the value will be **True**.</span></span>

> [!NOTE]
> <span data-ttu-id="0b785-222">Diese Einstellungen sind einer bestimmten Buildkonfiguration und Plattform zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="0b785-222">These settings are associated with a specific build configuration and platform.</span></span> <span data-ttu-id="0b785-223">Wenn Sie z. b. Einstellungen für die **Debugkonfiguration** konfigurieren und dann mithilfe der **Releasekonfiguration** veröffentlichen, werden Ihre Einstellungen nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="0b785-223">For example, if you configure settings for the **Debug** configuration and then publish using the **Release** configuration, your settings will not be used.</span></span>

![](deploying-database-projects/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="0b785-224">In diesem Szenario sollte die Bereitstellungs **Aktion** immer so festgelegt werden, dass Sie **ein Bereitstellungs Skript (. SQL) erstellt**, da Sie nicht möchten, dass Visual Studio 2010 Ihre Datenbank bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="0b785-224">In this scenario, the **Deploy action** should always be set to **Create a deployment script (.sql)**, because you don't want Visual Studio 2010 to deploy your database.</span></span> <span data-ttu-id="0b785-225">Anders ausgedrückt: die **deploydedatabase** -Eigenschaft sollte immer **false**sein.</span><span class="sxs-lookup"><span data-stu-id="0b785-225">In other words, the **DeployToDatabase** property should always be **False**.</span></span>

<span data-ttu-id="0b785-226">Wenn eine **deploydedatabase** -Eigenschaft angegeben wird, überschreibt der **/DD** -Schalter nur die-Eigenschaft, wenn der-Eigenschafts Wert " **false**" lautet:</span><span class="sxs-lookup"><span data-stu-id="0b785-226">When a **DeployToDatabase** property is specified, the **/dd** switch will only override the property if the property value is **false**:</span></span>

- <span data-ttu-id="0b785-227">Wenn die Eigenschaft **deploydedatabase** den Wert **false**hat und Sie **/DD +** oder **/DD**angeben, überschreibt VSDBCmd die Eigenschaft **deploydedatabase** und stellt die Datenbank bereit.</span><span class="sxs-lookup"><span data-stu-id="0b785-227">If the **DeployToDatabase** property is **False**, and you specify **/dd+** or **/dd**, VSDBCMD will override the **DeployToDatabase** property and deploy the database.</span></span>
- <span data-ttu-id="0b785-228">Wenn die **deploydedatabase** -Eigenschaft auf **false**festgelegt ist und Sie **/DD-** angeben oder den Schalter weglassen, wird die Datenbank von VSDBCMD nicht bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="0b785-228">If the **DeployToDatabase** property is **False**, and you specify **/dd-** or omit the switch, VSDBCMD will not deploy the database.</span></span>
- <span data-ttu-id="0b785-229">Wenn die **deploydedatabase** -Eigenschaft den Wert **true**hat, ignoriert VSDBCmd den Switch und stellt die Datenbank bereit.</span><span class="sxs-lookup"><span data-stu-id="0b785-229">If the **DeployToDatabase** property is **True**, VSDBCMD will ignore the switch and deploy the database.</span></span>
- <span data-ttu-id="0b785-230">In jedem Fall wird ein Bereitstellungs Skript generiert, unabhängig davon, ob Sie die Datenbank ebenfalls bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="0b785-230">A deployment script is generated in each case, regardless of whether you're deploying the database as well.</span></span>

## <a name="conclusion"></a><span data-ttu-id="0b785-231">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="0b785-231">Conclusion</span></span>

<span data-ttu-id="0b785-232">Dieses Thema bietet einen Überblick über den Build-und Bereitstellungs Prozess für Datenbankprojekte in Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="0b785-232">This topic provided an overview of the build and deployment process for database projects in Visual Studio 2010.</span></span> <span data-ttu-id="0b785-233">Außerdem wird beschrieben, wie Sie VSDBCMD. exe mit MSBuild verwenden können, um die Daten Bank Bereitstellung auf Unternehmens Niveau zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="0b785-233">It also described how you can use VSDBCMD.exe with MSBuild to support enterprise-scale database deployment.</span></span>

<span data-ttu-id="0b785-234">Weitere Informationen zur Vorgehensweise in der Praxis finden Sie unter [Anpassen von Daten Bank Bereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="0b785-234">For more information on how this works in practice, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span>

## <a name="further-reading"></a><span data-ttu-id="0b785-235">Weitere nützliche Informationen</span><span class="sxs-lookup"><span data-stu-id="0b785-235">Further Reading</span></span>

<span data-ttu-id="0b785-236">Informationen zum Anpassen von Daten Bank Bereitstellungen durch Erstellen einer separaten Bereitstellungs Konfigurationsdatei für jede Umgebung finden Sie unter [Anpassen von Daten Bank Bereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="0b785-236">For information on how to customize database deployments by creating a separate deployment configuration file for each environment, see [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="0b785-237">Eine Anleitung zum Konfigurieren von Daten bankrollen Mitgliedschaften durch Ausführen eines Skripts nach der Bereitstellung finden Sie unter Bereitstellen von [Daten bankrollen Mitgliedschaften in Test Umgebungen](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span><span class="sxs-lookup"><span data-stu-id="0b785-237">For guidance on how to configure database role memberships by running a post-deployment script, see [Deploying Database Role Memberships to Test Environments](../advanced-enterprise-web-deployment/deploying-database-role-memberships-to-test-environments.md).</span></span> <span data-ttu-id="0b785-238">Anleitungen zum Verwalten einiger der besonderen Herausforderungen, die von Mitgliedschafts Datenbanken auferlegt werden, finden Sie unter Bereitstellen von [Mitgliedschafts Datenbanken in Unternehmensumgebungen](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span><span class="sxs-lookup"><span data-stu-id="0b785-238">For guidance on managing some of the unique challenges that membership databases impose, see [Deploying Membership Databases to Enterprise Environments](../advanced-enterprise-web-deployment/deploying-membership-databases-to-enterprise-environments.md).</span></span>

<span data-ttu-id="0b785-239">Diese Themen auf MSDN bieten umfassendere Anleitungen und Hintergrundinformationen zu Visual Studio-Datenbankprojekten und zum Daten Bank Bereitstellungs Prozess:</span><span class="sxs-lookup"><span data-stu-id="0b785-239">These topics on MSDN provide broader guidance and background information on Visual Studio database projects and the database deployment process:</span></span>

- [<span data-ttu-id="0b785-240">Visual Studio 2010 SQL Server-Datenbankprojekte</span><span class="sxs-lookup"><span data-stu-id="0b785-240">Visual Studio 2010 SQL Server Database Projects</span></span>](https://msdn.microsoft.com/library/ff678491.aspx)
- [<span data-ttu-id="0b785-241">Verwalten von Daten Bank Änderungen</span><span class="sxs-lookup"><span data-stu-id="0b785-241">Managing Database Change</span></span>](https://msdn.microsoft.com/library/aa833404.aspx)
- [<span data-ttu-id="0b785-242">Vorgehensweise: Vorbereiten einer Datenbank für die Bereitstellung über eine Eingabeaufforderung mithilfe von VSDBCMD. Speichert</span><span class="sxs-lookup"><span data-stu-id="0b785-242">How to: Prepare a Database for Deployment From a Command Prompt by Using VSDBCMD.EXE</span></span>](https://msdn.microsoft.com/library/dd193258.aspx)
- [<span data-ttu-id="0b785-243">Eine Übersicht über die Daten Bank Build & Deployment</span><span class="sxs-lookup"><span data-stu-id="0b785-243">An Overview of Database Build and Deployment</span></span>](https://msdn.microsoft.com/library/aa833165.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="0b785-244">[Zurück](deploying-web-packages.md)
> [Weiter](creating-and-running-a-deployment-command-file.md)</span><span class="sxs-lookup"><span data-stu-id="0b785-244">[Previous](deploying-web-packages.md)
[Next](creating-and-running-a-deployment-command-file.md)</span></span>
