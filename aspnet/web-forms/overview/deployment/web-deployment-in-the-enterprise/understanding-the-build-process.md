---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
title: Grundlegendes zum Buildprozess | Microsoft-Dokumentation
author: jrjlee
description: Dieses Thema enthält eine exemplarische Vorgehensweise für einen Build-und Bereitstellungs Prozess auf Unternehmens Niveau. Der in diesem Thema beschriebene Ansatz verwendet benutzerdefinierte Microsoft Build Engin...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 5b982451-547b-4a2f-a5dc-79bc64d84d40
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-build-process
msc.type: authoredcontent
ms.openlocfilehash: 802d93f7ca987d018967275bae68b8c56d883a25
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78520833"
---
# <a name="understanding-the-build-process"></a><span data-ttu-id="c951b-104">Grundlegendes zum Buildprozess</span><span class="sxs-lookup"><span data-stu-id="c951b-104">Understanding the Build Process</span></span>

<span data-ttu-id="c951b-105">von [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="c951b-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="c951b-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="c951b-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="c951b-107">Dieses Thema enthält eine exemplarische Vorgehensweise für einen Build-und Bereitstellungs Prozess auf Unternehmens Niveau.</span><span class="sxs-lookup"><span data-stu-id="c951b-107">This topic provides a walkthrough of an enterprise-scale build and deployment process.</span></span> <span data-ttu-id="c951b-108">Die in diesem Thema beschriebene Vorgehensweise verwendet benutzerdefinierte Microsoft-Build-Engine (MSBuild)-Projektdateien, um eine präzise Kontrolle über alle Aspekte des Prozesses zu bieten.</span><span class="sxs-lookup"><span data-stu-id="c951b-108">The approach described in this topic uses custom Microsoft Build Engine (MSBuild) project files to provide fine-grained control over every aspect of the process.</span></span> <span data-ttu-id="c951b-109">Innerhalb der Projektdateien werden benutzerdefinierte MSBuild-Ziele zum Ausführen von Bereitstellungs Dienstprogrammen verwendet, wie z. b. das Webbereitstellungs Tool Internetinformationsdienste (IIS) und das Hilfsprogramm VSDBCMD. exe für die Daten Bank Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="c951b-109">Within the project files, custom MSBuild targets are used to run deployment utilities like the Internet Information Services (IIS) Web Deployment Tool (MSDeploy.exe) and the database deployment utility VSDBCMD.exe.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="c951b-110">Im vorherigen Thema, Grundlegendes [zur Projektdatei](understanding-the-project-file.md), wurden die Hauptkomponenten einer MSBuild-Projektdatei beschrieben und das Konzept der geteilten Projektdateien eingeführt, um die Bereitstellung in mehreren Ziel Umgebungen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="c951b-110">The previous topic, [Understanding the Project File](understanding-the-project-file.md), described the key components of an MSBuild project file and introduced the concept of split project files to support deployment to multiple target environments.</span></span> <span data-ttu-id="c951b-111">Wenn Sie mit diesen Konzepten noch nicht vertraut sind, sollten Sie sich über [das Verständnis der Projektdatei](understanding-the-project-file.md) informieren, bevor Sie dieses Thema durcharbeiten.</span><span class="sxs-lookup"><span data-stu-id="c951b-111">If you're not already familiar with these concepts, you should review [Understanding the Project File](understanding-the-project-file.md) before you work through this topic.</span></span>

<span data-ttu-id="c951b-112">Dieses Thema ist Teil einer Reihe von Tutorials, basierend auf den Anforderungen an die Unternehmens Bereitstellung eines fiktiven Unternehmens namens Fabrikam, Inc. In dieser tutorialreihe wird&#x2014;eine Beispiellösung der [Contact Manager-Lösung](the-contact-manager-solution.md)&#x2014;verwendet, um eine Webanwendung mit einem realistischen Komplexitäts Grad darzustellen, einschließlich einer ASP.NET MVC 3-Anwendung, eines Windows Communication Foundation (WCF)-Diensts und eines Datenbankprojekts.</span><span class="sxs-lookup"><span data-stu-id="c951b-112">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="c951b-113">Die Bereitstellungs Methode im Kern dieser Tutorials basiert auf dem Untergrund Legendes [zur Projektdatei](understanding-the-project-file.md)beschriebenen Ansatz, in dem der Buildprozess von zwei Projektdateien&#x2014;gesteuert wird, die Buildanweisungen enthalten, die für jede Zielumgebung gelten, und eine mit Umgebungs spezifischen Build-und Bereitstellungs Einstellungen.</span><span class="sxs-lookup"><span data-stu-id="c951b-113">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](understanding-the-project-file.md), in which the build process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="c951b-114">Zum Zeitpunkt der Erstellung wird die Umgebungs spezifische Projektdatei in der Umgebungs unabhängigen Projektdatei zusammengeführt, um einen kompletten Satz von Buildanweisungen zu bilden.</span><span class="sxs-lookup"><span data-stu-id="c951b-114">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="build-and-deployment-overview"></a><span data-ttu-id="c951b-115">Übersicht über Build & Deployment</span><span class="sxs-lookup"><span data-stu-id="c951b-115">Build and Deployment Overview</span></span>

<span data-ttu-id="c951b-116">In der [Contact Manager-Lösung](the-contact-manager-solution.md)steuern drei Dateien den Build-und Bereitstellungs Prozess:</span><span class="sxs-lookup"><span data-stu-id="c951b-116">In the [Contact Manager solution](the-contact-manager-solution.md), three files control the build and deployment process:</span></span>

- <span data-ttu-id="c951b-117">Eine *universelle Projektdatei* (*Publish. proj*).</span><span class="sxs-lookup"><span data-stu-id="c951b-117">A *universal project file* (*Publish.proj*).</span></span> <span data-ttu-id="c951b-118">Diese enthält Anweisungen zum Erstellen und bereitstellen, die sich nicht Zwischenziel Umgebungen ändern.</span><span class="sxs-lookup"><span data-stu-id="c951b-118">This contains build and deployment instructions that do not change between destination environments.</span></span>
- <span data-ttu-id="c951b-119">Eine *Umgebungs spezifische Projektdatei* ("*en v-dev. proj*").</span><span class="sxs-lookup"><span data-stu-id="c951b-119">An *environment-specific project file* (*Env-Dev.proj*).</span></span> <span data-ttu-id="c951b-120">Dies umfasst Build-und Bereitstellungs Einstellungen, die spezifisch für eine bestimmte Zielumgebung sind.</span><span class="sxs-lookup"><span data-stu-id="c951b-120">This contains build and deployment settings that are specific to a particular destination environment.</span></span> <span data-ttu-id="c951b-121">Beispielsweise können Sie die Datei " *env-dev. proj* " verwenden, um Einstellungen für einen Entwickler oder eine Testumgebung bereitzustellen und eine Alternative Datei mit dem Namen " *env-Stage. proj* " zu erstellen, um Einstellungen für eine Stagingumgebung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="c951b-121">For example, you could use the *Env-Dev.proj* file to provide settings for a developer or test environment and create an alternative file named *Env-Stage.proj* to provide settings for a staging environment.</span></span>
- <span data-ttu-id="c951b-122">Eine *Befehlsdatei* (*Publish-dev. cmd*).</span><span class="sxs-lookup"><span data-stu-id="c951b-122">A *command file* (*Publish-Dev.cmd*).</span></span> <span data-ttu-id="c951b-123">Diese enthält einen MSBuild. exe-Befehl, der angibt, welche Projektdateien Sie ausführen möchten.</span><span class="sxs-lookup"><span data-stu-id="c951b-123">This contains an MSBuild.exe command that specifies which project files you want to execute.</span></span> <span data-ttu-id="c951b-124">Sie können eine Befehlsdatei für jede Zielumgebung erstellen, in der jede Datei einen MSBuild. exe-Befehl enthält, der eine andere Umgebungs spezifische Projektdatei angibt.</span><span class="sxs-lookup"><span data-stu-id="c951b-124">You can create a command file for every destination environment, where each file contains an MSBuild.exe command that specifies a different environment-specific project file.</span></span> <span data-ttu-id="c951b-125">Dadurch kann der Entwickler die Bereitstellung in verschiedenen Umgebungen durchführen, indem er einfach die entsprechende Befehlsdatei ausführen kann.</span><span class="sxs-lookup"><span data-stu-id="c951b-125">This lets the developer deploy to different environments simply by running the appropriate command file.</span></span>

<span data-ttu-id="c951b-126">In der Beispiellösung finden Sie diese drei Dateien im Ordner Projekt Mappe veröffentlichen.</span><span class="sxs-lookup"><span data-stu-id="c951b-126">In the sample solution, you can find these three files in the Publish solution folder.</span></span>

![](understanding-the-build-process/_static/image1.png)

<span data-ttu-id="c951b-127">Bevor Sie sich diese Dateien ausführlicher ansehen, werfen wir einen Blick darauf, wie der allgemeine Buildprozess bei der Verwendung dieses Ansatzes funktioniert.</span><span class="sxs-lookup"><span data-stu-id="c951b-127">Before you look at these files in more detail, let's take a look at how the overall build process works when you use this approach.</span></span> <span data-ttu-id="c951b-128">Auf hoher Ebene sieht der Build-und Bereitstellungs Prozess wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="c951b-128">At a high level, the build and deployment process looks like this:</span></span>

![](understanding-the-build-process/_static/image2.png)

<span data-ttu-id="c951b-129">Der erste Schritt besteht darin, dass die beiden Projektdateien&#x2014;, die eine universelle Build-und Bereitstellungs Anleitung enthalten, und eine&#x2014;mit Umgebungs spezifischen Einstellungen in eine einzelne Projektdatei zusammengeführt werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-129">The first thing that happens is that the two project files&#x2014;one containing universal build and deployment instructions, and one containing environment-specific settings&#x2014;are merged into a single project file.</span></span> <span data-ttu-id="c951b-130">MSBuild arbeitet dann mit den Anweisungen in der Projektdatei.</span><span class="sxs-lookup"><span data-stu-id="c951b-130">MSBuild then works through the instructions in the project file.</span></span> <span data-ttu-id="c951b-131">Alle Projekte in der Projekt Mappe werden mithilfe der Projektdatei für jedes Projekt erstellt.</span><span class="sxs-lookup"><span data-stu-id="c951b-131">It builds each of the projects in the solution, using the project file for each project.</span></span> <span data-ttu-id="c951b-132">Anschließend werden andere Tools wie Web deploy (msbereitstellungs. exe) und das Hilfsprogramm VSDBCmd aufgerufen, um Ihre Webinhalte und Datenbanken in der Zielumgebung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="c951b-132">It then calls out to other tools, like Web Deploy (MSDeploy.exe) and the VSDBCMD utility to deploy your web content and databases to the target environment.</span></span>

<span data-ttu-id="c951b-133">Von Anfang bis Ende führt der Build-und Bereitstellungs Prozess die folgenden Aufgaben aus:</span><span class="sxs-lookup"><span data-stu-id="c951b-133">From start to finish, the build and deployment process performs these tasks:</span></span>

1. <span data-ttu-id="c951b-134">Der Inhalt des Ausgabeverzeichnisses wird in Vorbereitung auf einen neuen Build gelöscht.</span><span class="sxs-lookup"><span data-stu-id="c951b-134">It deletes the contents of the output directory, in preparation for a fresh build.</span></span>
2. <span data-ttu-id="c951b-135">Jedes Projekt in der Projekt Mappe wird erstellt:</span><span class="sxs-lookup"><span data-stu-id="c951b-135">It builds each project in the solution:</span></span>

    1. <span data-ttu-id="c951b-136">Bei Webprojekten&#x2014;wird in diesem Fall eine ASP.NET MVC-Webanwendung und ein WCF&#x2014;-Webdienst durch den Buildprozess ein Webbereitstellungs Paket für jedes Projekt erstellt.</span><span class="sxs-lookup"><span data-stu-id="c951b-136">For web projects&#x2014;in this case, an ASP.NET MVC web application and a WCF web service&#x2014;the build process creates a web deployment package for each project.</span></span>
    2. <span data-ttu-id="c951b-137">Bei Datenbankprojekten wird vom Buildprozess ein Bereitstellungs Manifest (DeployManifest-Datei) für jedes Projekt erstellt.</span><span class="sxs-lookup"><span data-stu-id="c951b-137">For database projects, the build process creates a deployment manifest (.deploymanifest file) for each project.</span></span>
3. <span data-ttu-id="c951b-138">Mithilfe des Hilfsprogramms "VSDBCMD. exe" wird jedes Datenbankprojekt in der Projekt Mappe bereitgestellt. dabei werden&#x2014;verschiedene Eigenschaften aus den Projektdateien verwendet,&#x2014;um eine Ziel Verbindungs Zeichenfolge und einen Datenbanknamen sowie die DeployManifest-Datei zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="c951b-138">It uses the VSDBCMD.exe utility to deploy each database project in the solution, using various properties from the project files&#x2014;a target connection string and a database name&#x2014;together with the .deploymanifest file.</span></span>
4. <span data-ttu-id="c951b-139">Mithilfe des Hilfsprogramms "msdeployment. exe" wird jedes Webprojekt in der Projekt Mappe bereitgestellt. dabei werden verschiedene Eigenschaften aus den Projektdateien verwendet, um den Bereitstellungs Prozess zu steuern.</span><span class="sxs-lookup"><span data-stu-id="c951b-139">It uses the MSDeploy.exe utility to deploy each web project in the solution, using various properties from the project files to control the deployment process.</span></span>

<span data-ttu-id="c951b-140">Sie können die Beispiellösung verwenden, um diesen Prozess ausführlicher zu verfolgen.</span><span class="sxs-lookup"><span data-stu-id="c951b-140">You can use the sample solution to trace this process in more detail.</span></span>

> [!NOTE]
> <span data-ttu-id="c951b-141">Anleitungen zum Anpassen der Umgebungs spezifischen Projektdateien für Ihre eigenen Serverumgebungen finden Sie unter [Konfigurieren von Bereitstellungs Eigenschaften für eine Zielumgebung](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="c951b-141">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="invoking-the-build-and-deployment-process"></a><span data-ttu-id="c951b-142">Aufrufen des Build & Deployment Prozesses</span><span class="sxs-lookup"><span data-stu-id="c951b-142">Invoking the Build and Deployment Process</span></span>

<span data-ttu-id="c951b-143">Zum Bereitstellen der Contact Manager-Lösung in einer Entwickler Testumgebung führt der Entwickler die Befehlsdatei *Publish-dev. cmd* aus.</span><span class="sxs-lookup"><span data-stu-id="c951b-143">To deploy the Contact Manager solution to a developer test environment, the developer runs the *Publish-Dev.cmd* command file.</span></span> <span data-ttu-id="c951b-144">Dadurch wird "MSBuild. exe" aufgerufen, wobei " *Publish. proj* " als Projektdatei zum Ausführen und " *enumv-dev. proj* " als Parameterwert angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-144">This invokes MSBuild.exe, specifying *Publish.proj* as the project file to execute and *Env-Dev.proj* as a parameter value.</span></span>

[!code-console[Main](understanding-the-build-process/samples/sample1.cmd)]

> [!NOTE]
> <span data-ttu-id="c951b-145">Der Schalter **/FL** (Short für **/FileLogger**) protokolliert die Buildausgabe in einer Datei namens *MSBuild. log* im aktuellen Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="c951b-145">The **/fl** switch (short for **/fileLogger**) logs the build output to a file named *msbuild.log* in the current directory.</span></span> <span data-ttu-id="c951b-146">Weitere Informationen finden Sie in der [MSBuild-Befehlszeilen Referenz](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="c951b-146">For more information, see the [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="c951b-147">An diesem Punkt wird die Ausführung von MSBuild gestartet, die Datei " *Publish. proj* " geladen und mit der Verarbeitung der darin enthaltenen Anweisungen begonnen.</span><span class="sxs-lookup"><span data-stu-id="c951b-147">At this point, MSBuild starts running, loads the *Publish.proj* file, and starts processing the instructions within it.</span></span> <span data-ttu-id="c951b-148">Die erste Anweisung weist MSBuild an, die Projektdatei zu importieren, die vom **targetenvpropsfile** -Parameter angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-148">The first instruction tells MSBuild to import the project file that the **TargetEnvPropsFile** parameter specifies.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample2.xml)]

<span data-ttu-id="c951b-149">Der **targetenvpropsfile** -Parameter gibt die Datei " *dev-dev. proj* " an, sodass MSBuild den Inhalt der Datei " *Rev-dev. proj* " in der Datei " *Publish. proj* " zusammenfasst.</span><span class="sxs-lookup"><span data-stu-id="c951b-149">The **TargetEnvPropsFile** parameter specifies the *Env-Dev.proj* file, so MSBuild merges the contents of the *Env-Dev.proj* file into the *Publish.proj* file.</span></span>

<span data-ttu-id="c951b-150">Die nächsten Elemente, auf die MSBuild in der zusammengeführten Projektdatei stößt, sind Eigenschafts Gruppen.</span><span class="sxs-lookup"><span data-stu-id="c951b-150">The next elements that MSBuild encounters in the merged project file are property groups.</span></span> <span data-ttu-id="c951b-151">Eigenschaften werden in der Reihenfolge verarbeitet, in der Sie in der Datei angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-151">Properties are processed in the order in which they appear in the file.</span></span> <span data-ttu-id="c951b-152">MSBuild erstellt ein Schlüssel-Wert-Paar für jede Eigenschaft, sodass bestimmte Bedingungen erfüllt sind.</span><span class="sxs-lookup"><span data-stu-id="c951b-152">MSBuild creates a key-value pair for each property, providing that any specified conditions are met.</span></span> <span data-ttu-id="c951b-153">Eigenschaften, die später in der Datei definiert werden, überschreiben alle Eigenschaften mit dem gleichen Namen, die zuvor in der Datei definiert wurden.</span><span class="sxs-lookup"><span data-stu-id="c951b-153">Properties defined later in the file will overwrite any properties with the same name defined earlier in the file.</span></span> <span data-ttu-id="c951b-154">Beachten Sie z. b. die **outputroot** -Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="c951b-154">For example, consider the **OutputRoot** properties.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample3.xml)]

<span data-ttu-id="c951b-155">Wenn MSBuild das erste **outputroot** -Element verarbeitet und ein ähnlich benannter Parameter nicht bereitgestellt wird, wird der Wert der **outputroot** -Eigenschaft auf. festgelegt.  **\Publish\out**. Wenn das zweite **outputroot** -Element gefunden wird, wird der Wert der **outputroot** -Eigenschaft mit dem Wert des **OutDir** -Parameters überschrieben, wenn die Bedingung als **true**ausgewertet wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-155">When MSBuild processes the first **OutputRoot** element, providing a similarly named parameter has not been provided, it sets the value of the **OutputRoot** property to **..\Publish\Out**. When it encounters the second **OutputRoot** element, if the condition evaluates to **true**, it will overwrite the value of the **OutputRoot** property with the value of the **OutDir** parameter.</span></span>

<span data-ttu-id="c951b-156">Das nächste Element, das von MSBuild erkannt wird, ist eine einzelne Element Gruppe, die ein Element mit dem Namen **projectstobuild**enthält.</span><span class="sxs-lookup"><span data-stu-id="c951b-156">The next element that MSBuild encounters is a single item group, containing an item named **ProjectsToBuild**.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample4.xml)]

<span data-ttu-id="c951b-157">MSBuild verarbeitet diese Anweisung, indem eine Elementliste mit dem Namen **projectstobuild erstellt**wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-157">MSBuild processes this instruction by building an item list named **ProjectsToBuild**.</span></span> <span data-ttu-id="c951b-158">In diesem Fall enthält die Elementliste einen einzelnen Wert&#x2014;für den Pfad und den Dateinamen der Projektmappendatei.</span><span class="sxs-lookup"><span data-stu-id="c951b-158">In this case, the item list contains a single value&#x2014;the path and filename of the solution file.</span></span>

<span data-ttu-id="c951b-159">An diesem Punkt sind die restlichen Elemente Ziele.</span><span class="sxs-lookup"><span data-stu-id="c951b-159">At this point, the remaining elements are targets.</span></span> <span data-ttu-id="c951b-160">Ziele werden von Eigenschaften und Elementen&#x2014;anders verarbeitet. Ziele werden nur dann verarbeitet, wenn Sie entweder explizit vom Benutzer angegeben oder von einem anderen Konstrukt in der Projektdatei aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-160">Targets are processed differently from properties and items&#x2014;essentially, targets are not processed unless they are either explicitly specified by the user or invoked by another construct within the project file.</span></span> <span data-ttu-id="c951b-161">Beachten Sie, dass das öffnende **projekttags ein DefaultTargets** -Attribut enthält.</span><span class="sxs-lookup"><span data-stu-id="c951b-161">Recall that the opening **Project** tag includes a **DefaultTargets** attribute.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample5.xml)]

<span data-ttu-id="c951b-162">Dadurch wird MSBuild angewiesen, das **fullpublish** -Ziel aufzurufen, wenn keine Ziele angegeben werden, wenn "MSBuild. exe" aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-162">This instructs MSBuild to invoke the **FullPublish** target, if targets are not specified when MSBuild.exe is invoked.</span></span> <span data-ttu-id="c951b-163">Das **fullpublish** -Ziel enthält keine Tasks. Stattdessen wird einfach eine Liste von Abhängigkeiten angegeben.</span><span class="sxs-lookup"><span data-stu-id="c951b-163">The **FullPublish** target doesn't contain any tasks; instead it simply specifies a list of dependencies.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample6.xml)]

<span data-ttu-id="c951b-164">Diese Abhängigkeit teilt MSBuild mit, dass die Liste der Ziele in der angegebenen Reihenfolge aufgerufen werden muss, um das **fullpublish** -Ziel auszuführen:</span><span class="sxs-lookup"><span data-stu-id="c951b-164">This dependency tells MSBuild that in order to execute the **FullPublish** target, it needs to invoke this list of targets in the order provided:</span></span>

1. <span data-ttu-id="c951b-165">Das **Clean** -Ziel muss aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-165">It must invoke the **Clean** target.</span></span>
2. <span data-ttu-id="c951b-166">Das **buildprojects** -Ziel muss aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-166">It must invoke the **BuildProjects** target.</span></span>
3. <span data-ttu-id="c951b-167">Er muss das **gatherpackagesforpublishing** -Ziel aufrufen.</span><span class="sxs-lookup"><span data-stu-id="c951b-167">It must invoke the **GatherPackagesForPublishing** target.</span></span>
4. <span data-ttu-id="c951b-168">Er muss das **publishdbpackages** -Ziel aufrufen.</span><span class="sxs-lookup"><span data-stu-id="c951b-168">It must invoke the **PublishDbPackages** target.</span></span>
5. <span data-ttu-id="c951b-169">Er muss das **publishwebpackages** -Ziel aufrufen.</span><span class="sxs-lookup"><span data-stu-id="c951b-169">It must invoke the **PublishWebPackages** target.</span></span>

### <a name="the-clean-target"></a><span data-ttu-id="c951b-170">Das Clean-Ziel</span><span class="sxs-lookup"><span data-stu-id="c951b-170">The Clean Target</span></span>

<span data-ttu-id="c951b-171">Das **Clean** -Ziel löscht im Grunde das Ausgabeverzeichnis und seinen gesamten Inhalt, als Vorbereitung für einen neuen Build.</span><span class="sxs-lookup"><span data-stu-id="c951b-171">The **Clean** target basically deletes the output directory and all its contents, as preparation for a fresh build.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample7.xml)]

<span data-ttu-id="c951b-172">Beachten Sie, dass das Ziel ein **ItemGroup** -Element enthält.</span><span class="sxs-lookup"><span data-stu-id="c951b-172">Notice that the target includes an **ItemGroup** element.</span></span> <span data-ttu-id="c951b-173">Wenn Sie Eigenschaften oder Elemente innerhalb eines **target** -Elements definieren, erstellen Sie *dynamische* Eigenschaften und Elemente.</span><span class="sxs-lookup"><span data-stu-id="c951b-173">When you define properties or items within a **Target** element, you're creating *dynamic* properties and items.</span></span> <span data-ttu-id="c951b-174">Mit anderen Worten, die Eigenschaften oder Elemente werden erst verarbeitet, wenn das Ziel ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-174">In other words, the properties or items aren't processed until the target is executed.</span></span> <span data-ttu-id="c951b-175">Das Ausgabeverzeichnis ist möglicherweise nicht vorhanden oder enthält bis zum Beginn des Buildprozesses Dateien, sodass Sie die **\_filestodelete** -Liste nicht als statisches Element erstellen können. Sie müssen warten, bis die Ausführung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-175">The output directory might not exist or contain any files until the build process begins, so you can't build the **\_FilesToDelete** list as a static item; you have to wait until execution is underway.</span></span> <span data-ttu-id="c951b-176">Daher erstellen Sie die Liste als dynamisches Element innerhalb des Ziels.</span><span class="sxs-lookup"><span data-stu-id="c951b-176">As such, you build the list as a dynamic item within the target.</span></span>

> [!NOTE]
> <span data-ttu-id="c951b-177">In diesem Fall ist es nicht erforderlich, eine dynamische Element Gruppe zu verwenden, da das **Clean** -Ziel das erste auszuführen ist.</span><span class="sxs-lookup"><span data-stu-id="c951b-177">In this case, because the **Clean** target is the first to be executed, there's no real need to use a dynamic item group.</span></span> <span data-ttu-id="c951b-178">Es empfiehlt sich jedoch, dynamische Eigenschaften und Elemente in dieser Art von Szenario zu verwenden, da Sie Ziele möglicherweise zu einem bestimmten Zeitpunkt in einer anderen Reihenfolge ausführen möchten.</span><span class="sxs-lookup"><span data-stu-id="c951b-178">However, it's good practice to use dynamic properties and items in this type of scenario, as you might want to execute targets in a different order at some point.</span></span>  
> <span data-ttu-id="c951b-179">Sie sollten auch vermeiden, Elemente zu deklarieren, die nie verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-179">You should also aim to avoid declaring items that will never be used.</span></span> <span data-ttu-id="c951b-180">Wenn Sie über Elemente verfügen, die nur von einem bestimmten Ziel verwendet werden, erwägen Sie, diese innerhalb des Ziels zu platzieren, um unnötige Verwaltungsaufwand für den Buildprozess zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="c951b-180">If you have items that will only be used by a specific target, consider placing them inside the target to remove any unnecessary overhead on the build process.</span></span>

<span data-ttu-id="c951b-181">Dynamische Elemente: das **Clean** -Ziel ist recht unkompliziert und nutzt die integrierten **Message**-, **Delete**-und **RemoveDir** -Aufgaben für folgende Aufgaben:</span><span class="sxs-lookup"><span data-stu-id="c951b-181">Dynamic items aside, the **Clean** target is fairly straightforward and makes use of the built-in **Message**, **Delete**, and **RemoveDir** tasks to:</span></span>

1. <span data-ttu-id="c951b-182">Sendet eine Nachricht an die Protokollierung.</span><span class="sxs-lookup"><span data-stu-id="c951b-182">Send a message to the logger.</span></span>
2. <span data-ttu-id="c951b-183">Erstellen Sie eine Liste der zu löschenden Dateien.</span><span class="sxs-lookup"><span data-stu-id="c951b-183">Build a list of files to delete.</span></span>
3. <span data-ttu-id="c951b-184">Löschen Sie die Dateien.</span><span class="sxs-lookup"><span data-stu-id="c951b-184">Delete the files.</span></span>
4. <span data-ttu-id="c951b-185">Entfernen Sie das Ausgabeverzeichnis.</span><span class="sxs-lookup"><span data-stu-id="c951b-185">Remove the output directory.</span></span>

### <a name="the-buildprojects-target"></a><span data-ttu-id="c951b-186">Das buildprojects-Ziel</span><span class="sxs-lookup"><span data-stu-id="c951b-186">The BuildProjects Target</span></span>

<span data-ttu-id="c951b-187">Das **buildprojects** -Ziel erstellt im Grunde alle Projekte in der Beispiel Projekt Mappe.</span><span class="sxs-lookup"><span data-stu-id="c951b-187">The **BuildProjects** target basically builds all the projects in the sample solution.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample8.xml)]

<span data-ttu-id="c951b-188">Dieses Ziel wurde im vorherigen Thema, Grundlegendes [zur Projektdatei](understanding-the-project-file.md), ausführlich beschrieben, um zu veranschaulichen, wie Tasks und Ziele auf Eigenschaften und Elemente verweisen.</span><span class="sxs-lookup"><span data-stu-id="c951b-188">This target was described in some detail in the previous topic, [Understanding the Project File](understanding-the-project-file.md), to illustrate how tasks and targets reference properties and items.</span></span> <span data-ttu-id="c951b-189">An diesem Punkt sind Sie hauptsächlich an der **MSBuild** -Aufgabe interessiert.</span><span class="sxs-lookup"><span data-stu-id="c951b-189">At this point, you're mainly interested in the **MSBuild** task.</span></span> <span data-ttu-id="c951b-190">Sie können diesen Task verwenden, um mehrere Projekte zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="c951b-190">You can use this task to build multiple projects.</span></span> <span data-ttu-id="c951b-191">Der Task erstellt keine neue Instanz von "MSBuild. exe". Es verwendet die aktuell aktive Instanz, um die einzelnen Projekte zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="c951b-191">The task does not create a new instance of MSBuild.exe; it uses the current running instance to build each project.</span></span> <span data-ttu-id="c951b-192">Die wichtigsten wichtigen Punkte in diesem Beispiel sind die Bereitstellungs Eigenschaften:</span><span class="sxs-lookup"><span data-stu-id="c951b-192">The key points of interest in this example are the deployment properties:</span></span>

- <span data-ttu-id="c951b-193">Die **deployonbuild** -Eigenschaft weist MSBuild an, Bereitstellungs Anweisungen in den Projekteinstellungen auszuführen, wenn der Build der einzelnen Projekte fertiggestellt ist.</span><span class="sxs-lookup"><span data-stu-id="c951b-193">The **DeployOnBuild** property instructs MSBuild to run any deployment instructions in the project settings when the build of each project is complete.</span></span>
- <span data-ttu-id="c951b-194">Die **deploytarget** -Eigenschaft identifiziert das Ziel, das Sie nach dem Erstellen des Projekts aufrufen möchten.</span><span class="sxs-lookup"><span data-stu-id="c951b-194">The **DeployTarget** property identifies the target that you want to invoke after the project is built.</span></span> <span data-ttu-id="c951b-195">In diesem Fall erstellt das **Paketziel** die Projekt Ausgabe in ein bereitstell bares Webpaket.</span><span class="sxs-lookup"><span data-stu-id="c951b-195">In this case, the **Package** target builds the project output into a deployable web package.</span></span>

> [!NOTE]
> <span data-ttu-id="c951b-196">Das **Paketziel** Ruft die Webpublishing Pipeline (WPP) auf, die die Integration zwischen MSBuild und Web deploy ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="c951b-196">The **Package** target invokes the Web Publishing Pipeline (WPP), which provides integration between MSBuild and Web Deploy.</span></span> <span data-ttu-id="c951b-197">Wenn Sie sich die integrierten Ziele ansehen möchten, die die WPP bietet, überprüfen Sie die Datei " *Microsoft. Web. Publishing. targets* " im Ordner "% Program Files (x86)% \ msbuild\microsoft\visualstudio\v10.0\web".</span><span class="sxs-lookup"><span data-stu-id="c951b-197">If you want to take a look at the built-in targets that the WPP provides, review the *Microsoft.Web.Publishing.targets* file in the %PROGRAMFILES(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\Web folder.</span></span>

### <a name="the-gatherpackagesforpublishing-target"></a><span data-ttu-id="c951b-198">Das gatherpackagesforpublishing-Ziel</span><span class="sxs-lookup"><span data-stu-id="c951b-198">The GatherPackagesForPublishing Target</span></span>

<span data-ttu-id="c951b-199">Wenn Sie das **gatherpackagesforpublishing** -Ziel untersuchen, werden Sie feststellen, dass es keine Aufgaben enthält.</span><span class="sxs-lookup"><span data-stu-id="c951b-199">If you study the **GatherPackagesForPublishing** target, you'll notice that it doesn't actually contain any tasks.</span></span> <span data-ttu-id="c951b-200">Stattdessen enthält Sie eine einzelne Element Gruppe, die drei dynamische Elemente definiert.</span><span class="sxs-lookup"><span data-stu-id="c951b-200">Instead, it contains a single item group that defines three dynamic items.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample9.xml)]

<span data-ttu-id="c951b-201">Diese Elemente beziehen sich auf die Bereitstellungs Pakete, die beim Ausführen des **buildprojects** -Ziels erstellt wurden.</span><span class="sxs-lookup"><span data-stu-id="c951b-201">These items refer to the deployment packages that were created when the **BuildProjects** target was executed.</span></span> <span data-ttu-id="c951b-202">Diese Elemente konnten nicht statisch in der Projektdatei definiert werden, da die Dateien, auf die die Elemente verweisen, erst vorhanden sind, wenn das **buildprojects** -Ziel ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-202">You couldn't define these items statically in the project file, because the files to which the items refer don't exist until the **BuildProjects** target is executed.</span></span> <span data-ttu-id="c951b-203">Stattdessen müssen die Elemente dynamisch innerhalb eines Ziels definiert werden, das erst aufgerufen wird, nachdem das **buildprojects** -Ziel ausgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="c951b-203">Instead, the items must be defined dynamically within a target that is not invoked until after the **BuildProjects** target is executed.</span></span>

<span data-ttu-id="c951b-204">Die Elemente werden in diesem Ziel&#x2014;nicht verwendet. dieses Ziel erstellt lediglich die Elemente und die Metadaten, die den einzelnen Element Werten zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="c951b-204">The items are not used within this target&#x2014;this target simply builds the items and the metadata associated with each item value.</span></span> <span data-ttu-id="c951b-205">Nachdem diese Elemente verarbeitet wurden, enthält das **publishpackages** -Element zwei Werte, den Pfad zur Datei " *ContactManager. MVC.* Bereitstellungs Datei" und den Pfad zur Datei " *ContactManager. Service. Bereitstellungs. cmd* ".</span><span class="sxs-lookup"><span data-stu-id="c951b-205">Once these elements are processed, the **PublishPackages** item will contain two values, the path to the *ContactManager.Mvc.deploy.cmd* file and the path to the *ContactManager.Service.deploy.cmd* file.</span></span> <span data-ttu-id="c951b-206">Web deploy diese Dateien als Teil des Webpakets für die einzelnen Projekte erstellt, und dies sind die Dateien, die Sie auf dem Zielserver aufrufen müssen, um die Pakete bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="c951b-206">Web Deploy creates these files as part of the web package for each project, and these are the files that you must invoke on the destination server in order to deploy the packages.</span></span> <span data-ttu-id="c951b-207">Wenn Sie eine dieser Dateien öffnen, sehen Sie im Grunde einen msbereitstellungs. exe-Befehl mit verschiedenen buildspezifischen Parameterwerten.</span><span class="sxs-lookup"><span data-stu-id="c951b-207">If you open up one of these files, you'll basically see an MSDeploy.exe command with various build-specific parameter values.</span></span>

<span data-ttu-id="c951b-208">Das Element " **dbpublishpackages** " enthält einen einzelnen Wert, den Pfad zur Datei " *ContactManager. Database. DeployManifest* ".</span><span class="sxs-lookup"><span data-stu-id="c951b-208">The **DbPublishPackages** item will contain a single value, the path to the *ContactManager.Database.deploymanifest* file.</span></span>

> [!NOTE]
> <span data-ttu-id="c951b-209">Eine DeployManifest-Datei wird generiert, wenn Sie ein Datenbankprojekt erstellen, und es wird das gleiche Schema wie eine MSBuild-Projektdatei verwendet.</span><span class="sxs-lookup"><span data-stu-id="c951b-209">A .deploymanifest file is generated when you build a database project, and it uses the same schema as an MSBuild project file.</span></span> <span data-ttu-id="c951b-210">Sie enthält alle Informationen, die zum Bereitstellen einer Datenbank erforderlich sind, einschließlich des Speicher Orts des Datenbankschemas (. dbschema) und Details zu allen Skripts vor und nach der Bereitstellung.</span><span class="sxs-lookup"><span data-stu-id="c951b-210">It contains all the information required to deploy a database, including the location of the database schema (.dbschema) and details of any pre-deployment and post-deployment scripts.</span></span> <span data-ttu-id="c951b-211">Weitere Informationen finden Sie unter [Übersicht über die Daten Bank Build & Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span><span class="sxs-lookup"><span data-stu-id="c951b-211">For more information, see [An Overview of Database Build and Deployment](https://msdn.microsoft.com/library/aa833165.aspx).</span></span>

<span data-ttu-id="c951b-212">Erfahren Sie mehr darüber, wie Bereitstellungs-und datenbankbereitstellungsmanifeste erstellt und zum [Erstellen und Verpacken von Webanwendungs Projekten](building-and-packaging-web-application-projects.md) und Bereitstellen von [Datenbankprojekten](deploying-database-projects.md)verwendet werden</span><span class="sxs-lookup"><span data-stu-id="c951b-212">You'll learn more about how deployment packages and database deployment manifests are created and used in [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md) and [Deploying Database Projects](deploying-database-projects.md).</span></span>

### <a name="the-publishdbpackages-target"></a><span data-ttu-id="c951b-213">Das publishdbpackages-Ziel</span><span class="sxs-lookup"><span data-stu-id="c951b-213">The PublishDbPackages Target</span></span>

<span data-ttu-id="c951b-214">Kurz gesagt: das Ziel " **publishdbpackages** " Ruft das Hilfsprogramm "VSDBCmd" auf, um die Datenbank " **ContactManager** " in einer Zielumgebung bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="c951b-214">Briefly speaking, the **PublishDbPackages** target invokes the VSDBCMD utility to deploy the **ContactManager** database to a target environment.</span></span> <span data-ttu-id="c951b-215">Das Konfigurieren der Daten Bank Bereitstellung umfasst viele Entscheidungen und Nuancen. Weitere Informationen hierzu finden Sie unter Bereitstellen von [Datenbankprojekten](deploying-database-projects.md) und [Anpassen von Daten Bank Bereitstellungen für mehrere Umgebungen](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span><span class="sxs-lookup"><span data-stu-id="c951b-215">Configuring database deployment involves lots of decisions and nuances, and you'll learn more about this in [Deploying Database Projects](deploying-database-projects.md) and [Customizing Database Deployments for Multiple Environments](../advanced-enterprise-web-deployment/customizing-database-deployments-for-multiple-environments.md).</span></span> <span data-ttu-id="c951b-216">In diesem Thema konzentrieren wir uns auf die Funktionsweise dieses Ziels.</span><span class="sxs-lookup"><span data-stu-id="c951b-216">In this topic, we'll focus on how this target actually functions.</span></span>

<span data-ttu-id="c951b-217">Beachten Sie zunächst, dass das öffnende Tag ein **Outputs** -Attribut enthält.</span><span class="sxs-lookup"><span data-stu-id="c951b-217">First, notice that the opening tag includes an **Outputs** attribute.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample10.xml)]

<span data-ttu-id="c951b-218">Dies ist ein Beispiel für die Batch Verarbeitung von *Zielen*.</span><span class="sxs-lookup"><span data-stu-id="c951b-218">This is an example of *target batching*.</span></span> <span data-ttu-id="c951b-219">In MSBuild-Projektdateien ist die Batch Verarbeitung eine Technik zum Durchlaufen von Auflistungen.</span><span class="sxs-lookup"><span data-stu-id="c951b-219">In MSBuild project files, batching is a technique for iterating over collections.</span></span> <span data-ttu-id="c951b-220">Der Wert des **Outputs** -Attributs **"% (dbpublishpackages. Identity)"** verweist auf die **identitätsmetadateneigenschaft** der **dbpublishpackages** -Elementliste.</span><span class="sxs-lookup"><span data-stu-id="c951b-220">The value of the **Outputs** attribute, **"%(DbPublishPackages.Identity)"**, refers to the **Identity** metadata property of the **DbPublishPackages** item list.</span></span> <span data-ttu-id="c951b-221">Diese Notation, \**Outputs =% \* \* \* (itemList. ItemMetaDataName)* , wird übersetzt als:</span><span class="sxs-lookup"><span data-stu-id="c951b-221">This notation, \**Outputs=%\*\*\*(ItemList.ItemMetadataName)*, is translated as:</span></span>

- <span data-ttu-id="c951b-222">Teilen Sie die Elemente in **dbpublishpackages** in Batches von Elementen auf, die denselben **Identitäts** Metadatenwert enthalten.</span><span class="sxs-lookup"><span data-stu-id="c951b-222">Split the items in **DbPublishPackages** into batches of items that contain the same **Identity** metadata value.</span></span>
- <span data-ttu-id="c951b-223">Führen Sie das Ziel einmal pro Batch aus.</span><span class="sxs-lookup"><span data-stu-id="c951b-223">Execute the target once per batch.</span></span>

> [!NOTE]
> <span data-ttu-id="c951b-224">**Identity** ist einer der [integrierten Metadatenwerte](https://msdn.microsoft.com/library/ms164313.aspx) , der jedem Element bei der Erstellung zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-224">**Identity** is one of the [built-in metadata values](https://msdn.microsoft.com/library/ms164313.aspx) that is assigned to every item on creation.</span></span> <span data-ttu-id="c951b-225">Er verweist auf den Wert des **include** -Attributs im **Item** -&#x2014;Element, d. h. auf den Pfad und den Dateinamen des Elements.</span><span class="sxs-lookup"><span data-stu-id="c951b-225">It refers to the value of the **Include** attribute in the **Item** element&#x2014;in other words, the path and filename of the item.</span></span>

<span data-ttu-id="c951b-226">Da in diesem Fall nie mehr als ein Element mit demselben Pfad und Dateinamen vorhanden sein sollte, arbeiten wir im Wesentlichen mit den Batch Größen von einem.</span><span class="sxs-lookup"><span data-stu-id="c951b-226">In this case, because there should never be more than one item with the same path and filename, we're essentially working with batch sizes of one.</span></span> <span data-ttu-id="c951b-227">Das Ziel wird für jedes Daten Bank Paket einmal ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="c951b-227">The target is executed once for every database package.</span></span>

<span data-ttu-id="c951b-228">Sie können eine ähnliche Notation in der **\_cmd** -Eigenschaft sehen, die einen VSDBCmd-Befehl mit den entsprechenden Schaltern erstellt.</span><span class="sxs-lookup"><span data-stu-id="c951b-228">You can see a similar notation in the **\_Cmd** property, which builds a VSDBCMD command with the appropriate switches.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample11.xml)]

<span data-ttu-id="c951b-229">In diesem Fall verweisen **% (dbpublishpackages. databaseconnectionstring)** , **% (dbpublishpackages. TargetDatabase)** und **% (dbpublishpackages. FullPath)** alle auf Metadatenwerte der **dbpublishpackages** -Element Auflistung.</span><span class="sxs-lookup"><span data-stu-id="c951b-229">In this case, **%(DbPublishPackages.DatabaseConnectionString)**, **%(DbPublishPackages.TargetDatabase)**, and **%(DbPublishPackages.FullPath)** all refer to metadata values of the **DbPublishPackages** item collection.</span></span> <span data-ttu-id="c951b-230">Die **\_cmd** -Eigenschaft wird von der **exec** -Aufgabe verwendet, die den Befehl aufruft.</span><span class="sxs-lookup"><span data-stu-id="c951b-230">The **\_Cmd** property is used by the **Exec** task, which invokes the command.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample12.xml)]

<span data-ttu-id="c951b-231">Aufgrund dieser Notation erstellt der **exec** -Task Batches auf der Grundlage eindeutiger Kombinationen aus den Metadatenwerten **databaseconnectionstring**, **TargetDatabase**und **FullPath** , und die Aufgabe wird für jeden Batch einmal ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="c951b-231">As a result of this notation, the **Exec** task will create batches based on unique combinations of the **DatabaseConnectionString**, **TargetDatabase**, and **FullPath** metadata values, and the task will execute once for each batch.</span></span> <span data-ttu-id="c951b-232">Dies ist ein Beispiel für die Batch Verarbeitung von *Aufgaben*.</span><span class="sxs-lookup"><span data-stu-id="c951b-232">This is an example of *task batching*.</span></span> <span data-ttu-id="c951b-233">Da die Batch Verarbeitung auf Ziel Ebene jedoch die Element Auflistung bereits in Einzelelement Batches aufgeteilt hat, wird der **exec** -Task nur einmal für jede Iterations Iterationen ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="c951b-233">However, because the target-level batching has already divided our item collection into single-item batches, the **Exec** task will run once and only once for each iteration of the target.</span></span> <span data-ttu-id="c951b-234">Mit anderen Worten: diese Aufgabe ruft das Hilfsprogramm "VSDBCmd" für jedes Daten Bank Paket in der Lösung einmal auf.</span><span class="sxs-lookup"><span data-stu-id="c951b-234">In other words, this task invokes the VSDBCMD utility once for each database package in the solution.</span></span>

> [!NOTE]
> <span data-ttu-id="c951b-235">Weitere Informationen zur Batch Verarbeitung von Ziel-und Aufgaben finden Sie unter MSBuild- [Batch](https://msdn.microsoft.com/library/ms171473.aspx)Verarbeitung, [Element Metadaten in Ziel Batch](https://msdn.microsoft.com/library/ms228229.aspx)Verarbeitung und [Element Metadaten in der Task Batch](https://msdn.microsoft.com/library/ms171474.aspx)Verarbeitung.</span><span class="sxs-lookup"><span data-stu-id="c951b-235">For more information on target and task batching, see MSBuild [Batching](https://msdn.microsoft.com/library/ms171473.aspx), [Item Metadata in Target Batching](https://msdn.microsoft.com/library/ms228229.aspx), and [Item Metadata in Task Batching](https://msdn.microsoft.com/library/ms171474.aspx).</span></span>

### <a name="the-publishwebpackages-target"></a><span data-ttu-id="c951b-236">Das publishwebpackages-Ziel</span><span class="sxs-lookup"><span data-stu-id="c951b-236">The PublishWebPackages Target</span></span>

<span data-ttu-id="c951b-237">An diesem Punkt haben Sie das Ziel " **buildprojects** " aufgerufen, das für jedes Projekt in der Beispiellösung ein Webbereitstellungs Paket generiert.</span><span class="sxs-lookup"><span data-stu-id="c951b-237">By this point, you've invoked the **BuildProjects** target, which generates a web deployment package for each project in the sample solution.</span></span> <span data-ttu-id="c951b-238">Das zugehörige Paket ist eine Datei "bereitstellen *. cmd* ", die die für die Bereitstellung des Pakets in der Zielumgebung erforderlichen msset. exe-Befehle sowie die Datei " *SetParameters. XML* " enthält, in der die erforderlichen Details der Zielumgebung angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="c951b-238">Accompanying each package is a *deploy.cmd* file, which contains the MSDeploy.exe commands required to deploy the package to the target environment, and a *SetParameters.xml* file, which specifies the necessary details of the target environment.</span></span> <span data-ttu-id="c951b-239">Sie haben auch das Ziel " **gatherpackagesforpublishing** " aufgerufen, das eine Element Sammlung mit den für Sie interessanten *cmd* -Dateien für die Bereitstellung generiert.</span><span class="sxs-lookup"><span data-stu-id="c951b-239">You've also invoked the **GatherPackagesForPublishing** target, which generates an item collection containing the *deploy.cmd* files you're interested in.</span></span> <span data-ttu-id="c951b-240">Im wesentlichen führt das **publishwebpackages** -Ziel die folgenden Funktionen aus:</span><span class="sxs-lookup"><span data-stu-id="c951b-240">Essentially, the **PublishWebPackages** target performs these functions:</span></span>

- <span data-ttu-id="c951b-241">Mithilfe der **XmlPoke** -Aufgabe wird die Datei " *SetParameters. XML* " für jedes Paket so manipuliert, dass die richtigen Details für die Zielumgebung enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="c951b-241">It manipulates the *SetParameters.xml* file for each package to include the correct details for the target environment, using the **XmlPoke** task.</span></span>
- <span data-ttu-id="c951b-242">Die Datei "bereitstellen *. cmd* " wird für jedes Paket mit den entsprechenden Switches aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="c951b-242">It invokes the *deploy.cmd* file for each package, using the appropriate switches.</span></span>

<span data-ttu-id="c951b-243">Ebenso wie das **publishdbpackages** -Ziel verwendet das **publishwebpackages** -Ziel die Ziel-Batch Verarbeitung, um sicherzustellen, dass das Ziel für jedes Webpaket einmal ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="c951b-243">Just like the **PublishDbPackages** target, the **PublishWebPackages** target uses target batching to ensure that the target is executed once for each web package.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample13.xml)]

<span data-ttu-id="c951b-244">Innerhalb des Ziels wird die **exec** -Aufgabe verwendet, um die Datei "bereitstellen *. cmd* " für jedes Webpaket auszuführen.</span><span class="sxs-lookup"><span data-stu-id="c951b-244">Within the target, the **Exec** task is used to run the *deploy.cmd* file for each web package.</span></span>

[!code-xml[Main](understanding-the-build-process/samples/sample14.xml)]

<span data-ttu-id="c951b-245">Weitere Informationen zum Konfigurieren der Bereitstellung von Webpaketen finden Sie im Thema zum entwickeln [und Verpacken von Webanwendungs Projekten](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="c951b-245">For more information on configuring the deployment of web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="c951b-246">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="c951b-246">Conclusion</span></span>

<span data-ttu-id="c951b-247">Dieses Thema bietet eine exemplarische Vorgehensweise für die Verwendung von Split-Projektdateien zum Steuern des Build-und Bereitstellungs Prozesses für die Contact Manager-Beispiellösung von Anfang bis Ende.</span><span class="sxs-lookup"><span data-stu-id="c951b-247">This topic provided a walkthrough of how split project files are used to control the build and deployment process from start to finish for the Contact Manager sample solution.</span></span> <span data-ttu-id="c951b-248">Mithilfe dieses Ansatzes können Sie komplexe bereit Stellungen auf Unternehmensebene in einem einzelnen, wiederholbaren Schritt ausführen, indem Sie einfach eine Umgebungs spezifische Befehlsdatei ausführen.</span><span class="sxs-lookup"><span data-stu-id="c951b-248">Using this approach lets you run complex, enterprise-scale deployments in a single, repeatable step, simply by running an environment-specific command file.</span></span>

## <a name="further-reading"></a><span data-ttu-id="c951b-249">Weitere nützliche Informationen</span><span class="sxs-lookup"><span data-stu-id="c951b-249">Further Reading</span></span>

<span data-ttu-id="c951b-250">Eine ausführlichere Einführung in Projektdateien und WPP finden Sie unter [in der Microsoft-Build-Engine: Verwenden von MSBuild und Team Foundation Build](http://amzn.com/0735645248) von Sayed Ibrahim Hashimi und William Bartholomew, ISBN: 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="c951b-250">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c951b-251">[Zurück](understanding-the-project-file.md)
> [Weiter](building-and-packaging-web-application-projects.md)</span><span class="sxs-lookup"><span data-stu-id="c951b-251">[Previous](understanding-the-project-file.md)
[Next](building-and-packaging-web-application-projects.md)</span></span>
