---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal
title: Kasse und Zahlung mit PayPal | Microsoft Docs
author: Erikre
description: In dieser Lernprogrammreihe werden Sie die Grundlagen zum Erstellen einer ASP.NET Web Forms-Anwendung mit ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für Wir...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 664ec95e-b0c9-4f43-a39f-798d0f2a7e08
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal
msc.type: authoredcontent
ms.openlocfilehash: 62d00a86c6c5845fb894896df65002c7086d039f
ms.sourcegitcommit: ce28244209db8615bc9bdd576a2e2c88174d318d
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/06/2020
ms.locfileid: "80675688"
---
# <a name="checkout-and-payment-with-paypal"></a><span data-ttu-id="a7d56-103">Bezahlvorgang und Zahlung mit PayPal</span><span class="sxs-lookup"><span data-stu-id="a7d56-103">Checkout and Payment with PayPal</span></span>

<span data-ttu-id="a7d56-104">von [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="a7d56-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="a7d56-105">[Wingtip Toys Sample Project herunterladen oder](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) [E-Book herunterladen (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="a7d56-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="a7d56-106">In dieser Lernprogrammreihe werden die Grundlagen zum Erstellen einer ASP.NET Web Forms-Anwendung mithilfe ASP.NET 4.5 und Microsoft Visual Studio Express 2013 für Web erläutert.</span><span class="sxs-lookup"><span data-stu-id="a7d56-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="a7d56-107">Zur Begleitung dieser Lernprogrammreihe steht ein Visual Studio 2013-Projekt mit dem Quellcode von [C-Code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="a7d56-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="a7d56-108">In diesem Tutorial wird beschrieben, wie Sie die Wingtip Toys-Beispielanwendung so ändern, dass sie Benutzerautorisierung, Registrierung und Zahlung mit PayPal einschließt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-108">This tutorial describes how to modify the Wingtip Toys sample application to include user authorization, registration, and payment using PayPal.</span></span> <span data-ttu-id="a7d56-109">Nur Benutzer, die angemeldet sind, haben die Berechtigung zum Kauf von Produkten.</span><span class="sxs-lookup"><span data-stu-id="a7d56-109">Only users who are logged in will have authorization to purchase products.</span></span> <span data-ttu-id="a7d56-110">Die integrierte Benutzerregistrierungsfunktion der ASP.NET 4.5 Web Forms-Projektvorlage enthält bereits viele snotwendige Funktionen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-110">The ASP.NET 4.5 Web Forms project template's built-in user registration functionality already includes much of what you need.</span></span> <span data-ttu-id="a7d56-111">Sie fügen PayPal Express Checkout-Funktionalität hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-111">You will add PayPal Express Checkout functionality.</span></span> <span data-ttu-id="a7d56-112">In diesem Tutorial verwenden Sie die Testumgebung für PayPal-Entwickler, sodass keine tatsächlichen Mittel übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-112">In this tutorial you be using the PayPal developer testing environment, so no actual funds will be transferred.</span></span> <span data-ttu-id="a7d56-113">Am Ende des Tutorials testen Sie die Anwendung, indem Sie Produkte auswählen, die dem Warenkorb hinzugefügt werden sollen, auf die Schaltfläche "Auschecken" klicken und Daten an die PayPal-Testwebsite übertragen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-113">At the end of the tutorial, you will test the application by selecting products to add to the shopping cart, clicking the checkout button, and transferring data to the PayPal testing web site.</span></span> <span data-ttu-id="a7d56-114">Auf der PayPal-Testwebsite bestätigen Sie Ihre Versand- und Zahlungsinformationen und kehren dann zur lokalen Wingtip Toys-Beispielanwendung zurück, um den Kauf zu bestätigen und abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-114">On the PayPal testing web site, you will confirm your shipping and payment information and then return to the local Wingtip Toys sample application to confirm and complete the purchase.</span></span>

<span data-ttu-id="a7d56-115">Es gibt mehrere erfahrene Zahlungsabwickler von Drittanbietern, die sich auf Online-Shopping spezialisiert haben, die skalierbarkeit und Sicherheit ansprechen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-115">There are several experienced third-party payment processors that specialize in online shopping that address scalability and security.</span></span> <span data-ttu-id="a7d56-116">ASP.NET Entwickler sollten die Vorteile der Verwendung einer Zahlungslösung von Drittanbietern in Betracht ziehen, bevor Sie eine Einkaufs- und Einkaufslösung implementieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-116">ASP.NET developers should consider the advantages of utilizing a third party payment solution before implementing a shopping and purchasing solution.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="a7d56-117">Die Wingtip Toys-Beispielanwendung wurde entwickelt, um spezifische ASP.NET Konzepte und Funktionen zu zeigen, die ASP.NET Webentwicklern zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-117">The Wingtip Toys sample application was designed to shown specific ASP.NET concepts and features available to ASP.NET web developers.</span></span> <span data-ttu-id="a7d56-118">Diese Beispielanwendung wurde nicht für alle möglichen Umstände in Bezug auf Skalierbarkeit und Sicherheit optimiert.</span><span class="sxs-lookup"><span data-stu-id="a7d56-118">This sample application was not optimized for all possible circumstances in regard to scalability and security.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="a7d56-119">Sie lernen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-119">What you'll learn:</span></span>

- <span data-ttu-id="a7d56-120">So beschränken Sie den Zugriff auf bestimmte Seiten in einem Ordner.</span><span class="sxs-lookup"><span data-stu-id="a7d56-120">How to restrict access to specific pages in a folder.</span></span>
- <span data-ttu-id="a7d56-121">So erstellen Sie einen bekannten Warenkorb aus einem anonymen Warenkorb.</span><span class="sxs-lookup"><span data-stu-id="a7d56-121">How to create a known shopping cart from an anonymous shopping cart.</span></span>
- <span data-ttu-id="a7d56-122">So aktivieren Sie SSL für das Projekt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-122">How to enable SSL for the project.</span></span>
- <span data-ttu-id="a7d56-123">So fügen Sie dem Projekt einen OAuth-Anbieter hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-123">How to add an OAuth provider to the project.</span></span>
- <span data-ttu-id="a7d56-124">So verwenden Sie PayPal, um Produkte über die PayPal-Testumgebung zu kaufen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-124">How to use PayPal to purchase products using the PayPal testing environment.</span></span>
- <span data-ttu-id="a7d56-125">Anzeigen von Details aus PayPal in einem **DetailsView-Steuerelement.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-125">How to display details from PayPal in a **DetailsView** control.</span></span>
- <span data-ttu-id="a7d56-126">So aktualisieren Sie die Datenbank der Wingtip Toys-Anwendung mit Details von PayPal.</span><span class="sxs-lookup"><span data-stu-id="a7d56-126">How to update the database of the Wingtip Toys application with details obtained from PayPal.</span></span>

## <a name="adding-order-tracking"></a><span data-ttu-id="a7d56-127">Hinzufügen von Auftragsverfolgung</span><span class="sxs-lookup"><span data-stu-id="a7d56-127">Adding Order Tracking</span></span>

<span data-ttu-id="a7d56-128">In diesem Tutorial erstellen Sie zwei neue Klassen, um Daten aus der Reihenfolge zu verfolgen, die ein Benutzer erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="a7d56-128">In this tutorial, you'll create two new classes to track data from the order a user has created.</span></span> <span data-ttu-id="a7d56-129">Die Klassen verfolgen Daten zu Versandinformationen, Einkaufssumme und Zahlungsbestätigung.</span><span class="sxs-lookup"><span data-stu-id="a7d56-129">The classes will track data regarding shipping information, purchase total, and payment confirmation.</span></span>

### <a name="add-the-order-and-orderdetail-model-classes"></a><span data-ttu-id="a7d56-130">Hinzufügen der Modellklassen Order und OrderDetail</span><span class="sxs-lookup"><span data-stu-id="a7d56-130">Add the Order and OrderDetail Model Classes</span></span>

<span data-ttu-id="a7d56-131">Zuvor haben Sie in dieser Lernprogrammreihe das Schema für Kategorien, `Category` `Product`Produkte `CartItem` und Einkaufswagenelemente definiert, indem Sie die , und Klassen im Ordner *Modelle* erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-131">Earlier in this tutorial series, you defined the schema for categories, products, and shopping cart items by creating the `Category`, `Product`, and `CartItem` classes in the *Models* folder.</span></span> <span data-ttu-id="a7d56-132">Jetzt fügen Sie zwei neue Klassen hinzu, um das Schema für den Produktauftrag und die Details des Auftrags zu definieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-132">Now you will add two new classes to define the schema for the product order and the details of the order.</span></span>

1. <span data-ttu-id="a7d56-133">Fügen Sie im Ordner **"Modelle"** eine neue Klasse mit dem Namen *Order.cs*hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-133">In the **Models** folder, add a new class named *Order.cs*.</span></span>   
   <span data-ttu-id="a7d56-134">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-134">The new class file is displayed in the editor.</span></span>
2. <span data-ttu-id="a7d56-135">Ersetzen Sie den Standardcode durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-135">Replace the default code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample1.cs)]
3. <span data-ttu-id="a7d56-136">Fügen Sie dem Ordner *Models* eine *OrderDetail.cs* Klasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-136">Add an *OrderDetail.cs* class to the *Models* folder.</span></span>
4. <span data-ttu-id="a7d56-137">Ersetzen Sie den Standardcode durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a7d56-137">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample2.cs)]

<span data-ttu-id="a7d56-138">Die `Order` `OrderDetail` und-Klassen enthalten das Schema, um die Auftragsinformationen zu definieren, die für den Einkauf und versanden verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-138">The `Order` and `OrderDetail` classes contain the schema to define the order information used for purchasing and shipping.</span></span>

<span data-ttu-id="a7d56-139">Darüber hinaus müssen Sie die Datenbankkontextklasse aktualisieren, die die Entitätsklassen verwaltet und Datenzugriff auf die Datenbank bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-139">In addition, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="a7d56-140">Dazu fügen Sie der `OrderDetail` `ProductContext` Klasse die neu erstellten Auftrags- und Modellklassen hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-140">To do this, you will add the newly created Order and `OrderDetail` model classes to `ProductContext` class.</span></span>

1. <span data-ttu-id="a7d56-141">Suchen und öffnen Sie im **Projektmappen-Explorer**die *ProductContext.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="a7d56-141">In **Solution Explorer**, find and open the *ProductContext.cs* file.</span></span>
2. <span data-ttu-id="a7d56-142">Fügen Sie den hervorgehobenen Code zur *ProductContext.cs* Datei hinzu, wie unten gezeigt:</span><span class="sxs-lookup"><span data-stu-id="a7d56-142">Add the highlighted code to the *ProductContext.cs* file as shown below:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample3.cs?highlight=14-15)]

<span data-ttu-id="a7d56-143">Wie bereits in dieser Lernprogrammreihe *ProductContext.cs* erwähnt, fügt `System.Data.Entity` der Code in der ProductContext.cs Datei den Namespace hinzu, sodass Sie Zugriff auf alle Kernfunktionen des Entity Framework haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-143">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="a7d56-144">Diese Funktionalität umfasst die Möglichkeit, Daten abzufragen, einzufügen, zu aktualisieren und zu löschen, indem Sie mit stark typisierten Objekten arbeiten.</span><span class="sxs-lookup"><span data-stu-id="a7d56-144">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="a7d56-145">Der obige `ProductContext` Code in der Klasse fügt `Order` `OrderDetail` Entity Framework-Zugriff auf die neu hinzugefügten Und Klassen hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-145">The above code in the `ProductContext` class adds Entity Framework access to the newly added `Order` and `OrderDetail` classes.</span></span>

## <a name="adding-checkout-access"></a><span data-ttu-id="a7d56-146">Hinzufügen von Kassenzugriff</span><span class="sxs-lookup"><span data-stu-id="a7d56-146">Adding Checkout Access</span></span>

<span data-ttu-id="a7d56-147">Die Wingtip Toys-Beispielanwendung ermöglicht anonymen Benutzern, Produkte zu überprüfen und einem Warenkorb hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-147">The Wingtip Toys sample application allows anonymous users to review and add products to a shopping cart.</span></span> <span data-ttu-id="a7d56-148">Wenn sich jedoch anonyme Benutzer dafür entscheiden, die Produkte zu kaufen, die sie dem Warenkorb hinzugefügt haben, müssen sie sich bei der Website anmelden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-148">However, when anonymous users choose to purchase the products they added to the shopping cart, they must log on to the site.</span></span> <span data-ttu-id="a7d56-149">Sobald sie sich angemeldet haben, können sie auf die eingeschränkten Seiten der Webanwendung zugreifen, die den Auscheck- und Kaufvorgang verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="a7d56-149">Once they have logged on, they can access the restricted pages of the Web application that handle the checkout and purchase process.</span></span> <span data-ttu-id="a7d56-150">Diese eingeschränkten Seiten sind im *Auscheckordner* der Anwendung enthalten.</span><span class="sxs-lookup"><span data-stu-id="a7d56-150">These restricted pages are contained in the *Checkout* folder of the application.</span></span>

### <a name="add-a-checkout-folder-and-pages"></a><span data-ttu-id="a7d56-151">Hinzufügen eines Auscheckordners und von Seiten</span><span class="sxs-lookup"><span data-stu-id="a7d56-151">Add a Checkout Folder and Pages</span></span>

<span data-ttu-id="a7d56-152">Sie erstellen nun den *Ordner "Auschecken"* und die darin angezeigten Seiten, die der Kunde während des Becheckvorgangs sehen wird.</span><span class="sxs-lookup"><span data-stu-id="a7d56-152">You will now create the *Checkout* folder and the pages in it that the customer will see during the checkout process.</span></span> <span data-ttu-id="a7d56-153">Sie werden diese Seiten später in diesem Tutorial aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-153">You will update these pages later in this tutorial.</span></span>

1. <span data-ttu-id="a7d56-154">Klicken Sie im **Projektmappen-Explorer** mit der rechten Maustaste auf den Projektnamen (**Wingtip Toys**), und wählen Sie **Einen neuen Ordner hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-154">Right-click the project name (**Wingtip Toys**) in **Solution Explorer** and select **Add a New Folder**.</span></span> 

    ![Kasse und Zahlung mit PayPal - Neuer Ordner](checkout-and-payment-with-paypal/_static/image1.png)
2. <span data-ttu-id="a7d56-156">Benennen Sie den neuen Ordner *Auschecken*.</span><span class="sxs-lookup"><span data-stu-id="a7d56-156">Name the new folder *Checkout*.</span></span>
3. <span data-ttu-id="a7d56-157">Klicken Sie mit der rechten Maustaste auf den Ordner *Auschecken,* und wählen Sie dann**Neues Element** **hinzufügen**-&gt;aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-157">Right-click the *Checkout* folder and then select **Add**-&gt;**New Item**.</span></span> 

    ![Kasse und Zahlung mit PayPal - Neuer Artikel](checkout-and-payment-with-paypal/_static/image2.png)
4. <span data-ttu-id="a7d56-159">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-159">The **Add New Item** dialog box is displayed.</span></span>
5. <span data-ttu-id="a7d56-160">Wählen Sie auf der linken Seite die Gruppe **"Visual C-Webvorlagen"**  - &gt; **Web** aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-160">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="a7d56-161">Wählen Sie dann im mittleren Bereich **Webformular mit Masterseite**aus und nennen Sie es *CheckoutStart.aspx*.</span><span class="sxs-lookup"><span data-stu-id="a7d56-161">Then, from the middle pane, select **Web Form with Master Page**and name it *CheckoutStart.aspx*.</span></span> 

    ![Auschecken und Bezahlen mit PayPal - Neues Artikel-Dialog hinzufügen](checkout-and-payment-with-paypal/_static/image3.png)
6. <span data-ttu-id="a7d56-163">Wählen Sie wie zuvor die *Site.Master-Datei* als Masterseite aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-163">As before, select the *Site.Master* file as the master page.</span></span>
7. <span data-ttu-id="a7d56-164">Fügen Sie die folgenden zusätzlichen Seiten mit den oben beschriebenen Schritten zum *Auscheckordner* hinzu:</span><span class="sxs-lookup"><span data-stu-id="a7d56-164">Add the following additional pages to the *Checkout* folder using the same steps above:</span></span>   

    - <span data-ttu-id="a7d56-165">CheckoutReview.aspx</span><span class="sxs-lookup"><span data-stu-id="a7d56-165">CheckoutReview.aspx</span></span>
    - <span data-ttu-id="a7d56-166">CheckoutComplete.aspx</span><span class="sxs-lookup"><span data-stu-id="a7d56-166">CheckoutComplete.aspx</span></span>
    - <span data-ttu-id="a7d56-167">CheckoutCancel.aspx</span><span class="sxs-lookup"><span data-stu-id="a7d56-167">CheckoutCancel.aspx</span></span>
    - <span data-ttu-id="a7d56-168">CheckoutError.aspx</span><span class="sxs-lookup"><span data-stu-id="a7d56-168">CheckoutError.aspx</span></span>

### <a name="add-a-webconfig-file"></a><span data-ttu-id="a7d56-169">Hinzufügen einer Web.config-Datei</span><span class="sxs-lookup"><span data-stu-id="a7d56-169">Add a Web.config File</span></span>

<span data-ttu-id="a7d56-170">Durch Hinzufügen einer neuen *Web.config-Datei* zum *Ordner Auschecken* können Sie den Zugriff auf alle im Ordner enthaltenen Seiten einschränken.</span><span class="sxs-lookup"><span data-stu-id="a7d56-170">By adding a new *Web.config* file to the *Checkout* folder, you will be able to restrict access to all the pages contained in the folder.</span></span>

1. <span data-ttu-id="a7d56-171">Klicken Sie mit der rechten Maustaste auf den Ordner *Auschecken,* und wählen Sie **Neues Element** **hinzufügen**  - &gt; aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-171">Right-click the *Checkout* folder and select **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="a7d56-172">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-172">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="a7d56-173">Wählen Sie auf der linken Seite die Gruppe **"Visual C-Webvorlagen"**  - &gt; **Web** aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-173">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="a7d56-174">Wählen Sie dann im mittleren Bereich **Webkonfigurationsdatei**aus , akzeptieren Sie den Standardnamen *von Web.config*, und wählen Sie dann **Hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-174">Then, from the middle pane, select **Web Configuration File**, accept the default name of *Web.config*, and then select **Add**.</span></span>
3. <span data-ttu-id="a7d56-175">Ersetzen Sie den vorhandenen XML-Inhalt in der Datei *Web.config* durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a7d56-175">Replace the existing XML content in the *Web.config* file with the following:</span></span>  

    [!code-xml[Main](checkout-and-payment-with-paypal/samples/sample4.xml)]
4. <span data-ttu-id="a7d56-176">Speichern Sie die *web.config*-Datei.</span><span class="sxs-lookup"><span data-stu-id="a7d56-176">Save the *Web.config* file.</span></span>

<span data-ttu-id="a7d56-177">Die *Datei Web.config* gibt an, dass allen unbekannten Benutzern der Webanwendung der Zugriff auf die im Ordner *Auschecken* enthaltenen Seiten verweigert werden muss.</span><span class="sxs-lookup"><span data-stu-id="a7d56-177">The *Web.config* file specifies that all unknown users of the Web application must be denied access to the pages contained in the *Checkout* folder.</span></span> <span data-ttu-id="a7d56-178">Wenn der Benutzer jedoch ein Konto registriert hat und angemeldet ist, handelt es sich um einen bekannten Benutzer, der Zugriff auf die Seiten im Ordner *Auschecken* hat.</span><span class="sxs-lookup"><span data-stu-id="a7d56-178">However, if the user has registered an account and is logged on, they will be a known user and will have access to the pages in the *Checkout* folder.</span></span>

<span data-ttu-id="a7d56-179">Es ist wichtig zu beachten, dass ASP.NET Konfiguration einer Hierarchie folgt, in der jede *Web.config-Datei* Konfigurationseinstellungen auf den Ordner anwendet, in dem sie sich befindet, und auf alle untergeordneten Verzeichnisse darunter.</span><span class="sxs-lookup"><span data-stu-id="a7d56-179">It's important to note that ASP.NET configuration follows a hierarchy, where each *Web.config* file applies configuration settings to the folder that it is in and to all of the child directories below it.</span></span>

<a id="SSLWebForms"></a>
## <a name="enable-ssl-for-the-project"></a><span data-ttu-id="a7d56-180">Aktivieren von SSL für das Projekt</span><span class="sxs-lookup"><span data-stu-id="a7d56-180">Enable SSL for the Project</span></span>

 <span data-ttu-id="a7d56-181">Secure Sockets Layer (SSL) ist ein Protokoll, das Webservern und Webclients eine sichere Kommunikation durch Verschlüsselung ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="a7d56-181">Secure Sockets Layer (SSL) is a protocol defined to allow Web servers and Web clients to communicate more securely through the use of encryption.</span></span> <span data-ttu-id="a7d56-182">Wird kein SSL verwendet, können die zwischen Client und Server gesendeten Daten von jedem mit physischem Zugriff auf das Netzwerk per Paket-Sniffing ausgespäht werden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-182">When SSL is not used, data sent between the client and server is open to packet sniffing by anyone with physical access to the network.</span></span> <span data-ttu-id="a7d56-183">Außerdem sind verschiedene häufig verwendete Authentifizierungsschemas über einfaches HTTP nicht sicher.</span><span class="sxs-lookup"><span data-stu-id="a7d56-183">Additionally, several common authentication schemes are not secure over plain HTTP.</span></span> <span data-ttu-id="a7d56-184">Insbesondere senden die einfache Authentifizierung und Formularauthentifizierung unverschlüsselte Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-184">In particular, Basic authentication and forms authentication send unencrypted credentials.</span></span> <span data-ttu-id="a7d56-185">Aus Sicherheitsgründen sollten diese Authentifizierungsschemas SSL verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-185">To be secure, these authentication schemes must use SSL.</span></span> 

1. <span data-ttu-id="a7d56-186">Klicken Sie im **Projektmappen-Explorer**auf das **WingtipToys-Projekt,** und drücken Sie dann **F4,** um das **Eigenschaftenfenster** anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-186">In **Solution Explorer**, click the **WingtipToys** project, then press **F4** to display the **Properties** window.</span></span>
2. <span data-ttu-id="a7d56-187">Ändern Von `true`SSL **Aktiviert** in .</span><span class="sxs-lookup"><span data-stu-id="a7d56-187">Change **SSL Enabled** to `true`.</span></span>
3. <span data-ttu-id="a7d56-188">Kopieren Sie die **SSL-URL** , damit Sie sie später verwenden können.</span><span class="sxs-lookup"><span data-stu-id="a7d56-188">Copy the **SSL URL** so you can use it later.</span></span>   
 <span data-ttu-id="a7d56-189">Die SSL-URL `https://localhost:44300/` wird angezeigt, es sei denn, Sie haben zuvor SSL-Websites erstellt (wie unten gezeigt).</span><span class="sxs-lookup"><span data-stu-id="a7d56-189">The SSL URL will be `https://localhost:44300/` unless you've previously created SSL Web Sites (as shown below).</span></span>   
    <span data-ttu-id="a7d56-190">![Projekteigenschaften](checkout-and-payment-with-paypal/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-190">![Project Properties](checkout-and-payment-with-paypal/_static/image4.png)</span></span>
4. <span data-ttu-id="a7d56-191">Klicken Sie im **Projektmappen-Explorer**mit der rechten Maustaste auf das **WingtipToys-Projekt,** und klicken Sie auf **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-191">In **Solution Explorer**, right click the **WingtipToys** project and click **Properties**.</span></span>
5. <span data-ttu-id="a7d56-192">Klicken Sie auf der linken Registerkarte auf **Web**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-192">In the left tab, click **Web**.</span></span>
6. <span data-ttu-id="a7d56-193">Ändern Sie die **Projekt-URL,** um die **SSL-URL** zu verwenden, die Sie zuvor gespeichert haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-193">Change the **Project Url** to use the **SSL URL** that you saved earlier.</span></span>   
    <span data-ttu-id="a7d56-194">![Projekt-Webeigenschaften](checkout-and-payment-with-paypal/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-194">![Project Web Properties](checkout-and-payment-with-paypal/_static/image5.png)</span></span>
7. <span data-ttu-id="a7d56-195">Drücken Sie **STRG+S**, um die Seite zu speichern.</span><span class="sxs-lookup"><span data-stu-id="a7d56-195">Save the page by pressing **CTRL+S**.</span></span>
8. <span data-ttu-id="a7d56-196">Drücken Sie **STRG+F5** , um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-196">Press **Ctrl+F5** to run the application.</span></span> <span data-ttu-id="a7d56-197">Visual Studio zeigt eine Option an, die es Ihnen ermöglicht, SSL-Warnungen zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-197">Visual Studio will display an option to allow you to avoid SSL warnings.</span></span>
9. <span data-ttu-id="a7d56-198">Klicken Sie auf **Ja** , um dem IIS Express SSL-Zertifikat zu vertrauen und fortzufahren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-198">Click **Yes** to trust the IIS Express SSL certificate and continue.</span></span>   
    <span data-ttu-id="a7d56-199">![IIS Express SSL-Zertifikatdetails](checkout-and-payment-with-paypal/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-199">![IIS Express SSL certificate details](checkout-and-payment-with-paypal/_static/image6.png)</span></span>  
 <span data-ttu-id="a7d56-200"> Es wird eine Sicherheitswarnung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-200">A Security Warning is displayed.</span></span>
10. <span data-ttu-id="a7d56-201">Klicken Sie auf **Ja** , um das Zertifikat zu Ihrem Localhost zu installieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-201">Click **Yes** to install the certificate to your localhost.</span></span>   
    <span data-ttu-id="a7d56-202">![Dialogfeld "Sicherheitswarnung"](checkout-and-payment-with-paypal/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-202">![Security Warning dialog box](checkout-and-payment-with-paypal/_static/image7.png)</span></span>  
 <span data-ttu-id="a7d56-203"> Das Browserfenster wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-203">The browser window will be displayed.</span></span>

<span data-ttu-id="a7d56-204">Sie können Ihre Webanwendung jetzt ganz einfach lokal mit SSL testen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-204">You can now easily test your Web application locally using SSL.</span></span>

<a id="OAuthWebForms"></a>
## <a name="add-an-oauth-20-provider"></a><span data-ttu-id="a7d56-205">Hinzufügen eines OAuth 2.0-Anbieters</span><span class="sxs-lookup"><span data-stu-id="a7d56-205">Add an OAuth 2.0 Provider</span></span>

<span data-ttu-id="a7d56-206">ASP.NET Web Forms bietet erweiterte Optionen für Mitgliedschaft und Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="a7d56-206">ASP.NET Web Forms provides enhanced options for membership and authentication.</span></span> <span data-ttu-id="a7d56-207">Diese Erweiterungen umfassen OAuth.</span><span class="sxs-lookup"><span data-stu-id="a7d56-207">These enhancements include OAuth.</span></span> <span data-ttu-id="a7d56-208">OAuth ist ein offenes Protokoll, das die sichere Autorisierung in einer einfachen und Standardmethode von Web-, Mobil- und Desktopanwendungen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="a7d56-208">OAuth is an open protocol that allows secure authorization in a simple and standard method from web, mobile, and desktop applications.</span></span> <span data-ttu-id="a7d56-209">Die ASP.NET Web Forms-Vorlage verwendet OAuth, um Facebook, Twitter, Google und Microsoft als Authentifizierungsanbieter verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-209">The ASP.NET Web Forms template uses OAuth to expose Facebook, Twitter, Google and Microsoft as authentication providers.</span></span> <span data-ttu-id="a7d56-210">Auch wenn in diesem Lernprogramm nur Google als Authentifizierungsanbieter eingesetzt wird, können Sie den Code problemlos für die Verwendung einer der anderen Anbieter anpassen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-210">Although this tutorial uses only Google as the authentication provider, you can easily modify the code to use any of the providers.</span></span> <span data-ttu-id="a7d56-211">Die Schritte zur Implementierung anderer Anbieter unterscheiden sich kaum von den Schritten in diesem Lernprogramm.</span><span class="sxs-lookup"><span data-stu-id="a7d56-211">The steps to implement other providers are very similar to the steps you will see in this tutorial.</span></span>

<span data-ttu-id="a7d56-212">Abgesehen von der Authentifizierung werden in diesem Lernprogramm auch Rollen verwendet, um die Autorisierung zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-212">In addition to authentication, the tutorial will also use roles to implement authorization.</span></span> <span data-ttu-id="a7d56-213">Nur Benutzer, die Sie der Rolle `canEdit` hinzufügen, können Daten ändern (Kontakte erstellen, bearbeiten oder löschen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-213">Only those users you add to the `canEdit` role will be able to change data (create, edit, or delete contacts).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="a7d56-214">Windows Live-Anwendungen akzeptieren nur eine Live-URL für eine funktionierende Website, sodass Sie keine lokale Website-URL zum Testen von Anmeldungen verwenden können.</span><span class="sxs-lookup"><span data-stu-id="a7d56-214">Windows Live applications only accept a live URL for a working website, so you cannot use a local website URL for testing logins.</span></span>

<span data-ttu-id="a7d56-215">Mit den folgenden Schritten können Sie einen Google-Authentifizierungsanbieter hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-215">The following steps will allow you to add a Google authentication provider.</span></span>

1. <span data-ttu-id="a7d56-216">Öffnen Sie die Datei *App\_Start.Auth.cs.*</span><span class="sxs-lookup"><span data-stu-id="a7d56-216">Open the *App\_Start\Startup.Auth.cs* file.</span></span>
2. <span data-ttu-id="a7d56-217">Entfernen Sie die Kommentarzeichen aus der `app.UseGoogleAuthentication()` -Methode, sodass sie wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="a7d56-217">Remove the comment characters from the `app.UseGoogleAuthentication()` method so that the method appears as follows:</span></span> 

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample5.cs)]
3. <span data-ttu-id="a7d56-218">Navigieren Sie zur [Google Developers Console](https://console.developers.google.com/).</span><span class="sxs-lookup"><span data-stu-id="a7d56-218">Navigate to the [Google Developers Console](https://console.developers.google.com/).</span></span> <span data-ttu-id="a7d56-219">Außerdem müssen Sie sich mit Ihrem Google Entwickler-E-Mail-Konto anmelden (gmail.com).</span><span class="sxs-lookup"><span data-stu-id="a7d56-219">You will also need to sign-in with your Google developer email account (gmail.com).</span></span> <span data-ttu-id="a7d56-220">Wenn Sie nicht über ein Google-Konto verfügen, wählen Sie den Link **Konto erstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-220">If you do not have a Google account, select the **Create an account** link.</span></span>   
   <span data-ttu-id="a7d56-221">Danach sehen Sie die **Google Entwickler-Konsole**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-221">Next, you'll see the **Google Developers Console**.</span></span>   
    <span data-ttu-id="a7d56-222">![Google Developers Console](checkout-and-payment-with-paypal/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-222">![Google Developers Console](checkout-and-payment-with-paypal/_static/image8.png)</span></span>
4. <span data-ttu-id="a7d56-223">Klicken Sie auf die Schaltfläche **Projekt** erstellen, und geben Sie einen Projektnamen und eine Projekt-ID ein (Sie können die Standardwerte verwenden).</span><span class="sxs-lookup"><span data-stu-id="a7d56-223">Click the **Create Project** button and enter a project name and ID (you can use the default values).</span></span> <span data-ttu-id="a7d56-224">Klicken Sie dann auf das **Kontrollkästchen Vereinbarung** und die Schaltfläche **Erstellen.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-224">Then, click the **agreement checkbox** and the **Create** button.</span></span>  

    ![Google - Neues Projekt](checkout-and-payment-with-paypal/_static/image9.png)

   <span data-ttu-id="a7d56-226"> In wenigen Sekunden wird das neue Projekt erstellt, und Ihr Browser zeigt die Seite für neue Projekte an.</span><span class="sxs-lookup"><span data-stu-id="a7d56-226">In a few seconds the new project will be created and your browser will display the new projects page.</span></span>
5. <span data-ttu-id="a7d56-227">Klicken Sie auf der linken Registerkarte auf **APIs &amp; auth**, und dann auf **Anmeldeinformationen**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-227">In the left tab, click **APIs &amp; auth**, and then click **Credentials**.</span></span>
6. <span data-ttu-id="a7d56-228">Klicken Sie unter **OAuth**auf die **Create New Client ID** .</span><span class="sxs-lookup"><span data-stu-id="a7d56-228">Click the **Create New Client ID** under **OAuth**.</span></span>   
   <span data-ttu-id="a7d56-229">Das Dialogfeld **Client-ID erstellen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-229">The **Create Client ID** dialog will be displayed.</span></span>   
    <span data-ttu-id="a7d56-230">![Google - Client-ID erstellen](checkout-and-payment-with-paypal/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-230">![Google - Create Client ID](checkout-and-payment-with-paypal/_static/image10.png)</span></span>
7. <span data-ttu-id="a7d56-231">Behalten Sie im Dialogfeld **Client-ID erstellen** die **Standardwebanwendung** für den Anwendungstyp bei.</span><span class="sxs-lookup"><span data-stu-id="a7d56-231">In the **Create Client ID** dialog, keep the default **Web application** for the application type.</span></span>
8. <span data-ttu-id="a7d56-232">Legen Sie die **autorisierteJavaScript-Ursprung** auf die SSL-URL fest, die Sie zuvor in diesem Tutorial verwendet haben (es`https://localhost:44300/` sei denn, Sie haben andere SSL-Projekte erstellt).</span><span class="sxs-lookup"><span data-stu-id="a7d56-232">Set the **Authorized JavaScript Origins** to the SSL URL you used earlier in this tutorial (`https://localhost:44300/` unless you've created other SSL projects).</span></span>   
   <span data-ttu-id="a7d56-233">Diese URL ist der Ursprung für Ihre Anwendung.</span><span class="sxs-lookup"><span data-stu-id="a7d56-233">This URL is the origin for your application.</span></span> <span data-ttu-id="a7d56-234">In diesem Beispiel geben Sie nur die Test-URL "localhost" ein.</span><span class="sxs-lookup"><span data-stu-id="a7d56-234">For this sample, you will only enter the localhost test URL.</span></span> <span data-ttu-id="a7d56-235">Sie können jedoch mehrere URLs eingeben, um localhost und production zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-235">However, you can enter multiple URLs to account for localhost and production.</span></span>
9. <span data-ttu-id="a7d56-236">Legen Sie **Authorized Redirect URI** folgendermaßen fest:</span><span class="sxs-lookup"><span data-stu-id="a7d56-236">Set the **Authorized Redirect URI** to the following:</span></span> 

    [!code-html[Main](checkout-and-payment-with-paypal/samples/sample6.html)]

   <span data-ttu-id="a7d56-237">Dieser Wert steht für den URI, den ASP.NET OAuth-Benutzer zur Kommunikation mit dem Google OAuth-Server verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-237">This value is the URI that ASP.NET OAuth users to communicate with the google OAuth server.</span></span> <span data-ttu-id="a7d56-238">Merken Sie sich die `https://localhost:44300/` SSL-URL, die Sie oben verwendet haben (es sei denn, Sie haben andere SSL-Projekte erstellt).</span><span class="sxs-lookup"><span data-stu-id="a7d56-238">Remember the SSL URL you used above (    `https://localhost:44300/` unless you've created other SSL projects).</span></span>
10. <span data-ttu-id="a7d56-239">Klicken Sie auf die Schaltfläche **Client-ID erstellen.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-239">Click the **Create Client ID** button.</span></span>
11. <span data-ttu-id="a7d56-240">Klicken Sie im linken Menü der Google Developers Console auf den Menüpunkt **Zustimmung** und legen Sie dann Ihre E-Mail-Adresse und Ihren Produktnamen fest.</span><span class="sxs-lookup"><span data-stu-id="a7d56-240">On the left menu of the Google Developers Console, click the **Consent screen** menu item, then set your email address and product name.</span></span> <span data-ttu-id="a7d56-241">Wenn Sie das Formular ausgefüllt haben, klicken Sie auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-241">When you have completed the form, click **Save**.</span></span>
12. <span data-ttu-id="a7d56-242">Klicken Sie auf das **Menüelement APIs,** scrollen Sie nach unten und klicken Sie auf die Schaltfläche **aus** neben der **Google+ API**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-242">Click the **APIs** menu item, scroll down and click the **off** button next to **Google+ API**.</span></span>   
    <span data-ttu-id="a7d56-243">Wenn Sie diese Option akzeptieren, wird die Google+ API aktiviert.</span><span class="sxs-lookup"><span data-stu-id="a7d56-243">Accepting this option will enable the Google+ API.</span></span>
13. <span data-ttu-id="a7d56-244">Sie müssen auch das **Microsoft.Owin** NuGet-Paket auf Version 3.0.0 aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-244">You must also update the **Microsoft.Owin** NuGet package to version 3.0.0.</span></span>   
    <span data-ttu-id="a7d56-245">Wählen Sie im Menü **Extras** **NuGet Package Manager** und dann **NuGet-Pakete für Lösung verwalten**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-245">From the **Tools** menu, select **NuGet Package Manager** and then select **Manage NuGet Packages for Solution**.</span></span>  
    <span data-ttu-id="a7d56-246">Suchen und aktualisieren Sie das **Microsoft.Owin-Paket** im Fenster **NuGet-Pakete** verwalten auf Version 3.0.0.</span><span class="sxs-lookup"><span data-stu-id="a7d56-246">From the **Manage NuGet Packages** window, find and update the **Microsoft.Owin** package to version 3.0.0.</span></span>
14. <span data-ttu-id="a7d56-247">Aktualisieren Sie in `UseGoogleAuthentication` Visual Studio die Methode der *Startup.Auth.cs* Seite, indem Sie die **Client-ID** und den **geheimen Clientschlüssel** in die Methode kopieren und einfügen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-247">In Visual Studio, update the `UseGoogleAuthentication` method of the *Startup.Auth.cs* page by copying and pasting the **Client ID** and **Client Secret** into the method.</span></span> <span data-ttu-id="a7d56-248">Die unten angezeigten **Client-ID-** und **Client-Geheimwerte** sind Beispiele und funktionieren nicht.</span><span class="sxs-lookup"><span data-stu-id="a7d56-248">The **Client ID** and **Client Secret** values shown below are samples and will not work.</span></span> 

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample7.cs?highlight=64-65)]
15. <span data-ttu-id="a7d56-249">Drücken Sie **STRG+F5,** um die Anwendung zu erstellen und auszuführen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-249">Press **CTRL+F5** to build and run the application.</span></span> <span data-ttu-id="a7d56-250">Klicken Sie auf den Link **Log in** .</span><span class="sxs-lookup"><span data-stu-id="a7d56-250">Click the **Log in** link.</span></span>
16. <span data-ttu-id="a7d56-251">Klicken Sie unter **Einen anderen Dienst zum Anmelden**verwenden auf **Google**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-251">Under **Use another service to log in**, click **Google**.</span></span>  
    <span data-ttu-id="a7d56-252">![Anmelden](checkout-and-payment-with-paypal/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-252">![Log in](checkout-and-payment-with-paypal/_static/image11.png)</span></span>
17. <span data-ttu-id="a7d56-253">Wenn Sie Ihre Anmeldeinformationen eingeben müssen, werden Sie zur Google-Website umgeleitet, wo Sie Ihre Anmeldeinformationen eingeben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-253">If you need to enter your credentials, you will be redirected to the google site where you will enter your credentials.</span></span>  
    ![Google - Anmeldung](checkout-and-payment-with-paypal/_static/image12.png)
18. <span data-ttu-id="a7d56-255">Nachdem Sie Ihre Anmeldeinformationen eingegeben haben, werden Sie aufgefordert, der gerade erstellten Webanwendung Berechtigungen zu erteilen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-255">After you enter your credentials, you will be prompted to give permissions to the web application you just created.</span></span>  
    ![Standard-Dienstkonto für Projekt](checkout-and-payment-with-paypal/_static/image13.png)
19. <span data-ttu-id="a7d56-257">Klicken Sie auf **Annehmen**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-257">Click **Accept**.</span></span> <span data-ttu-id="a7d56-258">Sie werden nun zurück zur **Registrierungsseite** der **WingtipToys-Anwendung** weitergeleitet, wo Sie Ihr Google-Konto registrieren können.</span><span class="sxs-lookup"><span data-stu-id="a7d56-258">You will now be redirected back to the **Register** page of the **WingtipToys** application where you can register your Google account.</span></span>  
    <span data-ttu-id="a7d56-259">![Registrieren Sie sich mit Ihrem Google-Konto](checkout-and-payment-with-paypal/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="a7d56-259">![Register with your Google Account](checkout-and-payment-with-paypal/_static/image14.png)</span></span>
20. <span data-ttu-id="a7d56-260">Sie können zwar den lokalen E-Mail-Registrierungsnamen in Ihr Gmail-Konto ändern, im Allgemeinen sollten Sie jedoch den Standard-E-Mail-Aliasnamen beibehalten (den Sie für die Authentifizierung verwendet haben).</span><span class="sxs-lookup"><span data-stu-id="a7d56-260">You have the option of changing the local email registration name used for your Gmail account, but you generally want to keep the default email alias (that is, the one you used for authentication).</span></span> <span data-ttu-id="a7d56-261">Klicken Sie auf **Anmelden** wie oben gezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-261">Click **Log in** as shown above.</span></span>

### <a name="modifying-login-functionality"></a><span data-ttu-id="a7d56-262">Ändern der Anmeldefunktionalität</span><span class="sxs-lookup"><span data-stu-id="a7d56-262">Modifying Login Functionality</span></span>

<span data-ttu-id="a7d56-263">Wie bereits in dieser Lernprogrammreihe erwähnt, wurde ein Großteil der Benutzerregistrierungsfunktionalität standardmäßig in die Vorlage ASP.NET Web Forms aufgenommen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-263">As previously mentioned in this tutorial series, much of the user registration functionality has been included in the ASP.NET Web Forms template by default.</span></span> <span data-ttu-id="a7d56-264">Nun ändern Sie die Standardmäßigen Seiten *Login.aspx* `MigrateCart` und *Register.aspx,* um die Methode aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-264">Now you will modify the default *Login.aspx* and *Register.aspx* pages to call the `MigrateCart` method.</span></span> <span data-ttu-id="a7d56-265">Die `MigrateCart` Methode ordnet einem neu angemeldeten Benutzer einen anonymen Warenkorb zu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-265">The `MigrateCart` method associates a newly logged in user with an anonymous shopping cart.</span></span> <span data-ttu-id="a7d56-266">Durch die Zuordnung des Benutzers und des Warenkorbs wird die Wingtip Toys-Beispielanwendung in der Lage sein, den Warenkorb des Benutzers zwischen den Besuchen zu pflegen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-266">By associating the user and shopping cart, the Wingtip Toys sample application will be able to maintain the shopping cart of the user between visits.</span></span>

1. <span data-ttu-id="a7d56-267">Suchen und öffnen Sie im **Projektmappen-Explorer**den *Ordner "Konto",* und öffnen Sie ihn.</span><span class="sxs-lookup"><span data-stu-id="a7d56-267">In **Solution Explorer**, find and open the *Account* folder.</span></span>
2. <span data-ttu-id="a7d56-268">Ändern Sie die CodeBehind-Seite mit dem Namen *Login.aspx.cs,* um den gelb markierten Code einzuschließen, sodass er wie folgt angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="a7d56-268">Modify the code-behind page named *Login.aspx.cs* to include the code highlighted in yellow, so that it appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample8.cs?highlight=41-43)]
3. <span data-ttu-id="a7d56-269">Speichern Sie die *Login.aspx.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="a7d56-269">Save the *Login.aspx.cs* file.</span></span>

<span data-ttu-id="a7d56-270">Im Moment können Sie die Warnung ignorieren, `MigrateCart` dass es keine Definition für die Methode gibt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-270">For now, you can ignore the warning that there is no definition for the `MigrateCart` method.</span></span> <span data-ttu-id="a7d56-271">Sie werden es etwas später in diesem Tutorial hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-271">You will be adding it a bit later in this tutorial.</span></span>

<span data-ttu-id="a7d56-272">Die *Login.aspx.cs* CodeBehind-Datei unterstützt eine LogIn-Methode.</span><span class="sxs-lookup"><span data-stu-id="a7d56-272">The *Login.aspx.cs* code-behind file supports a LogIn method.</span></span> <span data-ttu-id="a7d56-273">Wenn Sie die Seite Login.aspx überprüfen, sehen Sie, dass diese Seite eine Schaltfläche `LogIn` "Anmelden" enthält, die beim Klicken den Handler auf dem CodeBehind auslöst.</span><span class="sxs-lookup"><span data-stu-id="a7d56-273">By inspecting the Login.aspx page, you'll see that this page includes a "Log in" button that when click triggers the `LogIn` handler on the code-behind.</span></span>

<span data-ttu-id="a7d56-274">Wenn `Login` die Methode auf der *Login.aspx.cs* aufgerufen wird, `usersShoppingCart` wird eine neue Instanz des mit Namen benannten Einkaufswagens erstellt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-274">When the `Login` method on the *Login.aspx.cs* is called, a new instance of the shopping cart named `usersShoppingCart` is created.</span></span> <span data-ttu-id="a7d56-275">Die ID des Warenkorbs (eine GUID) `cartId` wird abgerufen und auf die Variable gesetzt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-275">The ID of the shopping cart (a GUID) is retrieved and set to the `cartId` variable.</span></span> <span data-ttu-id="a7d56-276">Anschließend wird `MigrateCart` die Methode aufgerufen `cartId` und übergibt sowohl den Namen als auch den Namen des angemeldeten Benutzers an diese Methode.</span><span class="sxs-lookup"><span data-stu-id="a7d56-276">Then, the `MigrateCart` method is called, passing both the `cartId` and the name of the logged-in user to this method.</span></span> <span data-ttu-id="a7d56-277">Wenn der Warenkorb migriert wird, wird die GUID, die zum Identifizieren des anonymen Warenkorbs verwendet wird, durch den Benutzernamen ersetzt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-277">When the shopping cart is migrated, the GUID used to identify the anonymous shopping cart is replaced with the user name.</span></span>

<span data-ttu-id="a7d56-278">Zusätzlich zum Ändern der *Login.aspx.cs* CodeBehind-Datei, um den Warenkorb zu migrieren, wenn sich der Benutzer anmeldet, müssen Sie auch die *Register.aspx.cs CodeBehind-Datei* ändern, um den Warenkorb zu migrieren, wenn der Benutzer ein neues Konto erstellt und sich anmeldet.</span><span class="sxs-lookup"><span data-stu-id="a7d56-278">In addition to modifying the *Login.aspx.cs* code-behind file to migrate the shopping cart when the user logs in, you must also modify the *Register.aspx.cs code-behind file* to migrate the shopping cart when the user creates a new account and logs in.</span></span>

1. <span data-ttu-id="a7d56-279">Öffnen Sie im *Ordner Konto* die CodeBehind-Datei mit dem Namen *Register.aspx.cs*.</span><span class="sxs-lookup"><span data-stu-id="a7d56-279">In the *Account* folder, open the code-behind file named *Register.aspx.cs*.</span></span>
2. <span data-ttu-id="a7d56-280">Ändern Sie die CodeBehind-Datei, indem Sie den Code gelb einschließen, sodass er wie folgt angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="a7d56-280">Modify the code-behind file by including the code in yellow, so that it appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample9.cs?highlight=28-32)]
3. <span data-ttu-id="a7d56-281">Speichern Sie die *Register.aspx.cs* Datei.</span><span class="sxs-lookup"><span data-stu-id="a7d56-281">Save the *Register.aspx.cs* file.</span></span> <span data-ttu-id="a7d56-282">Ignorieren Sie erneut die `MigrateCart` Warnung über die Methode.</span><span class="sxs-lookup"><span data-stu-id="a7d56-282">Once again, ignore the warning about the `MigrateCart` method.</span></span>

<span data-ttu-id="a7d56-283">Beachten Sie, dass der `CreateUser_Click` Code, den Sie im Ereignishandler `LogIn` verwendet haben, dem Code sehr ähnlich ist, den Sie in der Methode verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-283">Notice that the code you used in the `CreateUser_Click` event handler is very similar to the code you used in the `LogIn` method.</span></span> <span data-ttu-id="a7d56-284">Wenn sich der Benutzer an der Website registriert `MigrateCart` oder sich anmeldet, wird die Methode aufruft.</span><span class="sxs-lookup"><span data-stu-id="a7d56-284">When the user registers or logs in to the site, a call to the `MigrateCart` method will be made.</span></span>

## <a name="migrating-the-shopping-cart"></a><span data-ttu-id="a7d56-285">Migrieren des Warenkorbs</span><span class="sxs-lookup"><span data-stu-id="a7d56-285">Migrating the Shopping Cart</span></span>

<span data-ttu-id="a7d56-286">Nachdem Sie den Anmelde- und Registrierungsprozess aktualisiert haben, können Sie den `MigrateCart` Code hinzufügen, um den Warenkorb mit der Methode zu migrieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-286">Now that you have the log-in and registration process updated, you can add the code to migrate the shopping cart using the `MigrateCart` method.</span></span>

1. <span data-ttu-id="a7d56-287">Suchen Sie im **Projektmappen-Explorer**den *Ordner "Logik",* und öffnen Sie die ShoppingCartActions.cs-Klassendatei. *ShoppingCartActions.cs*</span><span class="sxs-lookup"><span data-stu-id="a7d56-287">In **Solution Explorer**, find the *Logic* folder and open the *ShoppingCartActions.cs* class file.</span></span>
2. <span data-ttu-id="a7d56-288">Fügen Sie den gelb markierten Code dem vorhandenen Code in der *ShoppingCartActions.cs-Datei* hinzu, sodass der Code in der *ShoppingCartActions.cs* Datei wie folgt angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="a7d56-288">Add the code highlighted in yellow to the existing code in the *ShoppingCartActions.cs* file, so that the code in the *ShoppingCartActions.cs* file appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample10.cs?highlight=215-224)]

<span data-ttu-id="a7d56-289">Die `MigrateCart` Methode verwendet die vorhandene cartId, um den Warenkorb des Benutzers zu finden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-289">The `MigrateCart` method uses the existing cartId to find the shopping cart of the user.</span></span> <span data-ttu-id="a7d56-290">Als Nächstes durchläuft der Code alle Warenkorbartikel `CartId` und ersetzt die `CartItem` Eigenschaft (wie im Schema angegeben) durch den angemeldeten Benutzernamen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-290">Next, the code loops through all the shopping cart items and replaces the `CartId` property (as specified by the `CartItem` schema) with the logged-in user name.</span></span>

### <a name="updating-the-database-connection"></a><span data-ttu-id="a7d56-291">Aktualisieren der Datenbankverbindung</span><span class="sxs-lookup"><span data-stu-id="a7d56-291">Updating the Database Connection</span></span>

<span data-ttu-id="a7d56-292">Wenn Sie diesem Tutorial mit der **vorgefertigten** Wingtip Toys-Beispielanwendung folgen, müssen Sie die Standardmitgliedschaftsdatenbank neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-292">If you are following this tutorial using the **prebuilt** Wingtip Toys sample application, you must recreate the default membership database.</span></span> <span data-ttu-id="a7d56-293">Durch Ändern der Standardverbindungszeichenfolge wird die Mitgliedschaftsdatenbank bei der nächsten Anwendung erstellt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-293">By modifying the default connection string, the membership database will be created the next time the application runs.</span></span>

1. <span data-ttu-id="a7d56-294">Öffnen Sie die Datei *Web.config* im Stammverzeichnis des Projekts.</span><span class="sxs-lookup"><span data-stu-id="a7d56-294">Open the *Web.config* file at the root of the project.</span></span>
2. <span data-ttu-id="a7d56-295">Aktualisieren Sie die Standardverbindungszeichenfolge so, dass sie wie folgt angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="a7d56-295">Update the default connection string so that it appears as follows:</span></span>   

    [!code-xml[Main](checkout-and-payment-with-paypal/samples/sample11.xml)]

<a id="PayPalWebForms"></a>
## <a name="integrating-paypal"></a><span data-ttu-id="a7d56-296">Integration von PayPal</span><span class="sxs-lookup"><span data-stu-id="a7d56-296">Integrating PayPal</span></span>

<span data-ttu-id="a7d56-297">PayPal ist eine webbasierte Abrechnungsplattform, die Zahlungen von Online-Händlern akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="a7d56-297">PayPal is a web-based billing platform that accepts payments by online merchants.</span></span> <span data-ttu-id="a7d56-298">In diesem Tutorial wird erläutert, wie Sie die Express Checkout-Funktionalität von PayPal in Ihre Anwendung integrieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-298">This tutorial next explains how to integrate PayPal's Express Checkout functionality into your application.</span></span> <span data-ttu-id="a7d56-299">Express Checkout ermöglicht es Ihren Kunden, PayPal zu verwenden, um für die Artikel zu bezahlen, die sie ihrem Warenkorb hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-299">Express Checkout allows your customers to use PayPal to pay for the items they have added to their shopping cart.</span></span>

### <a name="create-paypal-test-accounts"></a><span data-ttu-id="a7d56-300">Erstellen von PayPal-Testkonten</span><span class="sxs-lookup"><span data-stu-id="a7d56-300">Create PayPal Test Accounts</span></span>

<span data-ttu-id="a7d56-301">Um die PayPal-Testumgebung verwenden zu können, müssen Sie ein Entwicklertestkonto erstellen und überprüfen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-301">To use the PayPal testing environment, you must create and verify a developer test account.</span></span> <span data-ttu-id="a7d56-302">Sie verwenden das Entwicklertestkonto, um ein Käufertestkonto und ein Verkäufertestkonto zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-302">You will use the developer test account to create a buyer test account and a seller test account.</span></span> <span data-ttu-id="a7d56-303">Die Anmeldeinformationen für Entwicklertestkonten ermöglichen der Wingtip Toys-Beispielanwendung auch den Zugriff auf die PayPal-Testumgebung.</span><span class="sxs-lookup"><span data-stu-id="a7d56-303">The developer test account credentials also will allow the Wingtip Toys sample application to access the PayPal testing environment.</span></span>

1. <span data-ttu-id="a7d56-304">Navigieren Sie in einem Browser zur Testwebsite für PayPal-Entwickler:</span><span class="sxs-lookup"><span data-stu-id="a7d56-304">In a browser, navigate to the PayPal developer testing site:</span></span>   
    [https://developer.paypal.com](https://developer.paypal.com/)
2. <span data-ttu-id="a7d56-305">Wenn Sie kein PayPal-Entwicklerkonto haben, erstellen Sie ein neues Konto, indem Sie auf **Anmelden**klicken und die Anmeldeschritte befolgen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-305">If you don't have a PayPal developer account, create a new account by clicking **Sign Up**and following the sign up steps.</span></span> <span data-ttu-id="a7d56-306">Wenn Sie über ein vorhandenes PayPal-Entwicklerkonto verfügen, melden Sie sich an, indem Sie auf **Anmelden**klicken.</span><span class="sxs-lookup"><span data-stu-id="a7d56-306">If you have an existing PayPal developer account, sign in by clicking **Log In**.</span></span> <span data-ttu-id="a7d56-307">Sie benötigen Ihr PayPal-Entwicklerkonto, um die Wingtip Toys-Beispielanwendung später in diesem Tutorial zu testen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-307">You will need your PayPal developer account to test the Wingtip Toys sample application later in this tutorial.</span></span>
3. <span data-ttu-id="a7d56-308">Wenn Sie sich gerade für Ihr PayPal-Entwicklerkonto angemeldet haben, müssen Sie möglicherweise Ihr PayPal-Entwicklerkonto bei PayPal überprüfen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-308">If you have just signed up for your PayPal developer account, you may need to verify your PayPal developer account with PayPal.</span></span> <span data-ttu-id="a7d56-309">Sie können Ihr Konto überprüfen, indem Sie die Schritte ausführen, die PayPal an Ihr E-Mail-Konto gesendet hat.</span><span class="sxs-lookup"><span data-stu-id="a7d56-309">You can verify your account by following the steps that PayPal sent to your email account.</span></span> <span data-ttu-id="a7d56-310">Sobald Sie Ihr PayPal-Entwicklerkonto verifiziert haben, melden Sie sich wieder bei der PayPal-Entwicklertestwebsite an.</span><span class="sxs-lookup"><span data-stu-id="a7d56-310">Once you have verified your PayPal developer account, log back into the PayPal developer testing site.</span></span>
4. <span data-ttu-id="a7d56-311">Nachdem Sie mit Ihrem PayPal-Entwicklerkonto bei der PayPal-Entwicklerwebsite angemeldet sind, müssen Sie ein PayPal-Käufertestkonto erstellen, wenn Sie noch keins haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-311">After you are logged in to the PayPal developer site with your PayPal developer account you need to create a PayPal buyer test account if you don't already have one.</span></span> <span data-ttu-id="a7d56-312">Um ein Käufertestkonto zu erstellen, klicken Sie auf der PayPal-Website auf die Registerkarte **Anwendungen,** und klicken Sie dann auf **Sandbox-Konten**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-312">To create a buyer test account, on the PayPal site click the **Applications** tab and then click **Sandbox accounts**.</span></span>   
 <span data-ttu-id="a7d56-313">Die Seite **Sandbox-Testkonten** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-313">The **Sandbox test accounts** page is shown.</span></span>   

    > [!NOTE] 
    > 
    > <span data-ttu-id="a7d56-314">Die PayPal Developer-Website stellt bereits ein Händlertestkonto bereit.</span><span class="sxs-lookup"><span data-stu-id="a7d56-314">The PayPal Developer site already provides a merchant test account.</span></span>

    ![Checkout und Zahlung mit PayPal - Sandbox-Testkonten](checkout-and-payment-with-paypal/_static/image15.png)
5. <span data-ttu-id="a7d56-316">Klicken Sie auf der Seite Sandbox-Testkonten auf **Konto erstellen**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-316">On the Sandbox test accounts page, click **Create Account**.</span></span>
6. <span data-ttu-id="a7d56-317">Wählen Sie auf der Seite **Testkonto erstellen** eine E-Mail und ein Kennwort für das Käufertestkonto Ihrer Wahl aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-317">On the **Create test account** page choose a buyer test account email and password of your choice.</span></span>   

    > [!NOTE] 
    > 
    > <span data-ttu-id="a7d56-318">Sie benötigen die E-Mail-Adressen und das Kennwort des Käufers, um die Wingtip Toys-Beispielanwendung am Ende dieses Tutorials zu testen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-318">You will need the buyer email addresses and password to test the Wingtip Toys sample application at the end of this tutorial.</span></span>

    ![Checkout und Zahlung mit PayPal - Sandbox-Testkonten](checkout-and-payment-with-paypal/_static/image16.png)
7. <span data-ttu-id="a7d56-320">Erstellen Sie das Käufertestkonto, indem Sie auf die Schaltfläche **Konto erstellen** klicken.</span><span class="sxs-lookup"><span data-stu-id="a7d56-320">Create the buyer test account by clicking the **Create Account** button.</span></span>  
 <span data-ttu-id="a7d56-321">Die Seite **Sandbox-Testkonten** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-321">The **Sandbox Test accounts** page is displayed.</span></span> 

    ![Kasse und Zahlung mit PayPal - PayPal-Konten](checkout-and-payment-with-paypal/_static/image17.png)
8. <span data-ttu-id="a7d56-323">Klicken Sie auf der Seite **Sandbox-Testkonten** auf das E-Mail-Konto des **Moderators.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-323">On the **Sandbox test accounts** page, click the **facilitator** email account.</span></span>  
    <span data-ttu-id="a7d56-324">**Profil-** und **Benachrichtigungsoptionen** werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-324">**Profile** and **Notification** options appear.</span></span>
9. <span data-ttu-id="a7d56-325">Wählen Sie die Option **Profil aus,** und klicken Sie dann auf **API-Anmeldeinformationen,** um Ihre API-Anmeldeinformationen für das Händlertestkonto anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-325">Select the **Profile** option, then click **API credentials** to view your API credentials for the merchant test account.</span></span>
10. <span data-ttu-id="a7d56-326">Kopieren Sie die TEST-API-Anmeldeinformationen in den Notizblock.</span><span class="sxs-lookup"><span data-stu-id="a7d56-326">Copy the TEST API credentials to notepad.</span></span>

<span data-ttu-id="a7d56-327">Sie benötigen Ihre angezeigten Classic TEST-API-Anmeldeinformationen (Benutzername, Kennwort und Signatur), um API-Aufrufe von der Wingtip Toys-Beispielanwendung an die PayPal-Testumgebung durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-327">You will need your displayed Classic TEST API credentials (Username, Password, and Signature) to make API calls from the Wingtip Toys sample application to the PayPal testing environment.</span></span> <span data-ttu-id="a7d56-328">Sie fügen die Anmeldeinformationen im nächsten Schritt hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-328">You will add the credentials in the next step.</span></span>

### <a name="add-paypal-class-and-api-credentials"></a><span data-ttu-id="a7d56-329">Hinzufügen von PayPal-Klassen- und API-Anmeldeinformationen</span><span class="sxs-lookup"><span data-stu-id="a7d56-329">Add PayPal Class and API Credentials</span></span>

<span data-ttu-id="a7d56-330">Sie platzieren den Großteil des PayPal-Codes in einer einzigen Klasse.</span><span class="sxs-lookup"><span data-stu-id="a7d56-330">You will place the majority of the PayPal code into a single class.</span></span> <span data-ttu-id="a7d56-331">Diese Klasse enthält die Methoden, die für die Kommunikation mit PayPal verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-331">This class contains the methods used to communicate with PayPal.</span></span> <span data-ttu-id="a7d56-332">Außerdem fügen Sie Ihre PayPal-Anmeldeinformationen zu dieser Klasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-332">Also, you will add your PayPal credentials to this class.</span></span>

1. <span data-ttu-id="a7d56-333">Klicken Sie in der Wingtip Toys-Beispielanwendung in Visual Studio mit der rechten Maustaste auf den Ordner **"Logik",** und wählen Sie dann **Neues Element** **hinzufügen**  - &gt; aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-333">In the Wingtip Toys sample application within Visual Studio, right-click the **Logic** folder and then select **Add** -&gt; **New Item**.</span></span>   
   <span data-ttu-id="a7d56-334">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-334">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="a7d56-335">Wählen Sie unter **Visual C'** aus dem Bereich **Installiert** auf der linken Seite **Code**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-335">Under **Visual C#** from the **Installed** pane on the left, select **Code**.</span></span>
3. <span data-ttu-id="a7d56-336">Wählen Sie im mittleren Bereich **Klasse**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-336">From the middle pane, select **Class**.</span></span> <span data-ttu-id="a7d56-337">Benennen Sie diese neue Klasse **PayPalFunctions.cs**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-337">Name this new class **PayPalFunctions.cs**.</span></span>
4. <span data-ttu-id="a7d56-338">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-338">Click **Add**.</span></span>  
   <span data-ttu-id="a7d56-339">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-339">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="a7d56-340">Ersetzen Sie den Standardcode durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a7d56-340">Replace the default code with the following code:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample12.cs)]
6. <span data-ttu-id="a7d56-341">Fügen Sie die Anmeldeinformationen der Händler-API (Benutzername, Kennwort und Signatur) hinzu, die Sie zuvor in diesem Tutorial angezeigt haben, damit Sie Funktionsaufrufe an die PayPal-Testumgebung durchführen können.</span><span class="sxs-lookup"><span data-stu-id="a7d56-341">Add the Merchant API credentials (Username, Password, and Signature) that you displayed earlier in this tutorial so that you can make function calls to the PayPal testing environment.</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample13.cs)]

> [!NOTE] 
> 
> <span data-ttu-id="a7d56-342">In dieser Beispielanwendung fügen Sie einfach Anmeldeinformationen zu einer C-Datei (.cs) hinzu.</span><span class="sxs-lookup"><span data-stu-id="a7d56-342">In this sample application you are simply adding credentials to a C# file (.cs).</span></span> <span data-ttu-id="a7d56-343">In einer implementierten Lösung sollten Sie jedoch erwägen, Ihre Anmeldeinformationen in einer Konfigurationsdatei zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="a7d56-343">However, in a implemented solution, you should consider encrypting your credentials in a configuration file.</span></span>

<span data-ttu-id="a7d56-344">Die NVPAPICaller-Klasse enthält den Großteil der PayPal-Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="a7d56-344">The NVPAPICaller class contains the majority of the PayPal functionality.</span></span> <span data-ttu-id="a7d56-345">Der Code in der Klasse stellt die Methoden bereit, die für einen Testkauf in der PayPal-Testumgebung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="a7d56-345">The code in the class provides the methods needed to make a test purchase from the PayPal testing environment.</span></span> <span data-ttu-id="a7d56-346">Die folgenden drei PayPal-Funktionen werden verwendet, um Einkäufe zu tätigen:</span><span class="sxs-lookup"><span data-stu-id="a7d56-346">The following three PayPal functions are used to make purchases:</span></span>

- <span data-ttu-id="a7d56-347">`SetExpressCheckout`-Funktion</span><span class="sxs-lookup"><span data-stu-id="a7d56-347">`SetExpressCheckout` function</span></span>
- <span data-ttu-id="a7d56-348">`GetExpressCheckoutDetails`-Funktion</span><span class="sxs-lookup"><span data-stu-id="a7d56-348">`GetExpressCheckoutDetails` function</span></span>
- <span data-ttu-id="a7d56-349">`DoExpressCheckoutPayment`-Funktion</span><span class="sxs-lookup"><span data-stu-id="a7d56-349">`DoExpressCheckoutPayment` function</span></span>

<span data-ttu-id="a7d56-350">Die `ShortcutExpressCheckout` Methode erfasst die Testkaufinformationen und Produktdetails aus `SetExpressCheckout` dem Warenkorb und ruft die PayPal-Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="a7d56-350">The `ShortcutExpressCheckout` method collects the test purchase information and product details from the shopping cart and calls the `SetExpressCheckout` PayPal function.</span></span> <span data-ttu-id="a7d56-351">Die `GetCheckoutDetails` Methode bestätigt Kaufdetails `GetExpressCheckoutDetails` und ruft die PayPal-Funktion auf, bevor Sie den Testkauf tätigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-351">The `GetCheckoutDetails` method confirms purchase details and calls the `GetExpressCheckoutDetails` PayPal function before making the test purchase.</span></span> <span data-ttu-id="a7d56-352">Die `DoCheckoutPayment` Methode schließt den Testkauf aus der `DoExpressCheckoutPayment` Testumgebung ab, indem sie die PayPal-Funktion aufruft.</span><span class="sxs-lookup"><span data-stu-id="a7d56-352">The `DoCheckoutPayment` method completes the test purchase from the testing environment by calling the `DoExpressCheckoutPayment` PayPal function.</span></span> <span data-ttu-id="a7d56-353">Der verbleibende Code unterstützt die PayPal-Methoden und -Prozesse, z. B. Codierungszeichenfolgen, Dekodierung von Zeichenfolgen, Verarbeitung von Arrays und Bestimmen von Anmeldeinformationen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-353">The remaining code supports the PayPal methods and process, such as encoding strings, decoding strings, processing arrays, and determining credentials.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="a7d56-354">Mit PayPal können Sie optionale Kaufdetails basierend auf der [API-Spezifikation von PayPal](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)einschließen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-354">PayPal allows you to include optional purchase details based on [PayPal's API specification](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout).</span></span> <span data-ttu-id="a7d56-355">Durch Die Erweiterung des Codes in der Wingtip Toys-Beispielanwendung können Sie Lokalisierungsdetails, Produktbeschreibungen, Steuern, eine Kundendienstnummer sowie viele andere optionale Felder einschließen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-355">By extending the code in the Wingtip Toys sample application, you can include localization details, product descriptions, tax, a customer service number, as well as many other optional fields.</span></span>

<span data-ttu-id="a7d56-356">Beachten Sie, dass die in der **ShortcutExpressCheckout-Methode** angegebenen Rückgabe- und Abbruch-URLs eine Portnummer verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-356">Notice that the return and cancel URLs that are specified in the **ShortcutExpressCheckout** method use a port number.</span></span>

[!code-html[Main](checkout-and-payment-with-paypal/samples/sample14.html)]

<span data-ttu-id="a7d56-357">Wenn Visual Web Developer ein Webprojekt mit SSL ausführt, wird normalerweise der Port 44300 für den Webserver verwendet.</span><span class="sxs-lookup"><span data-stu-id="a7d56-357">When Visual Web Developer runs a web project using SSL, commonly the port 44300 is used for the web server.</span></span> <span data-ttu-id="a7d56-358">Wie oben gezeigt, ist die Portnummer 44300.</span><span class="sxs-lookup"><span data-stu-id="a7d56-358">As shown above, the port number is 44300.</span></span> <span data-ttu-id="a7d56-359">Wenn Sie die Anwendung ausführen, wird möglicherweise eine andere Portnummer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-359">When you run the application, you could see a different port number.</span></span> <span data-ttu-id="a7d56-360">Ihre Portnummer muss im Code korrekt festgelegt werden, damit Sie die Wingtip Toys-Beispielanwendung am Ende dieses Tutorials erfolgreich ausführen können.</span><span class="sxs-lookup"><span data-stu-id="a7d56-360">Your port number needs to be correctly set in the code so that you can successful run the Wingtip Toys sample application at the end of this tutorial.</span></span> <span data-ttu-id="a7d56-361">Im nächsten Abschnitt dieses Tutorials wird erläutert, wie Sie die lokale Hostportnummer abrufen und die PayPal-Klasse aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-361">The next section of this tutorial explains how to retrieve the local host port number and update the PayPal class.</span></span>

### <a name="update-the-localhost-port-number-in-the-paypal-class"></a><span data-ttu-id="a7d56-362">Aktualisieren der LokalenHost-Portnummer in der PayPal-Klasse</span><span class="sxs-lookup"><span data-stu-id="a7d56-362">Update the LocalHost Port Number in the PayPal Class</span></span>

<span data-ttu-id="a7d56-363">Die Wingtip Toys-Beispielanwendung kauft Produkte, indem sie zur PayPal-Testwebsite navigiert und zu Ihrer lokalen Instanz der Wingtip Toys-Beispielanwendung zurückkehrt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-363">The Wingtip Toys sample application purchases products by navigating to the PayPal testing site and returning to your local instance of the Wingtip Toys sample application.</span></span> <span data-ttu-id="a7d56-364">Damit PayPal zur richtigen URL zurückkehrt, müssen Sie die Portnummer der lokal ausgeführten Beispielanwendung im oben genannten PayPal-Code angeben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-364">In order to have PayPal return to the correct URL, you need to specify the port number of the locally running sample application in the PayPal code mentioned above.</span></span>

1. <span data-ttu-id="a7d56-365">Klicken Sie im **Projektmappen-Explorer** mit der rechten Maustaste auf den Projektnamen (**WingtipToys**), und wählen Sie **Eigenschaften**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-365">Right-click the project name (**WingtipToys**) in **Solution Explorer** and select **Properties**.</span></span>
2. <span data-ttu-id="a7d56-366">Wählen Sie in der linken Spalte die Registerkarte **Web** aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-366">In the left column, select the **Web** tab.</span></span>
3. <span data-ttu-id="a7d56-367">Rufen Sie die Portnummer aus dem Feld **Projekt-Url** ab.</span><span class="sxs-lookup"><span data-stu-id="a7d56-367">Retrieve the port number from the **Project Url** box.</span></span>
4. <span data-ttu-id="a7d56-368">Aktualisieren Sie bei `returnURL` `cancelURL` Bedarf die und`NVPAPICaller`in der PayPal-Klasse ( ) in der *PayPalFunctions.cs-Datei,* um die Portnummer Ihrer Webanwendung zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="a7d56-368">If needed, update the `returnURL` and `cancelURL` in the PayPal class (`NVPAPICaller`) in the *PayPalFunctions.cs* file to use the port number of your web application:</span></span>   

    [!code-html[Main](checkout-and-payment-with-paypal/samples/sample15.html?highlight=1-2)]

<span data-ttu-id="a7d56-369">Der hinzugefügte Code stimmt nun mit dem erwarteten Port für Ihre lokale Webanwendung überein.</span><span class="sxs-lookup"><span data-stu-id="a7d56-369">Now the code that you added will match the expected port for your local Web application.</span></span> <span data-ttu-id="a7d56-370">PayPal kann zur richtigen URL auf Ihrem lokalen Computer zurückkehren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-370">PayPal will be able to return to the correct URL on your local machine.</span></span>

### <a name="add-the-paypal-checkout-button"></a><span data-ttu-id="a7d56-371">Hinzufügen der PayPal-Checkout-Schaltfläche</span><span class="sxs-lookup"><span data-stu-id="a7d56-371">Add the PayPal Checkout Button</span></span>

<span data-ttu-id="a7d56-372">Nachdem die primären PayPal-Funktionen der Beispielanwendung hinzugefügt wurden, können Sie mit dem Hinzufügen des Markups und des Codes beginnen, der zum Aufrufen dieser Funktionen erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="a7d56-372">Now that the primary PayPal functions have been added to the sample application, you can begin adding the markup and code needed to call these functions.</span></span> <span data-ttu-id="a7d56-373">Zuerst müssen Sie die Auscheck-Schaltfläche hinzufügen, die der Benutzer auf der Warenkorbseite sehen wird.</span><span class="sxs-lookup"><span data-stu-id="a7d56-373">First, you must add the checkout button that the user will see on the shopping cart page.</span></span>

1. <span data-ttu-id="a7d56-374">Öffnen Sie die Datei *ShoppingCart.aspx.*</span><span class="sxs-lookup"><span data-stu-id="a7d56-374">Open the *ShoppingCart.aspx* file.</span></span>
2. <span data-ttu-id="a7d56-375">Scrollen Sie zum Ende der `<!--Checkout Placeholder -->` Datei, und suchen Sie nach dem Kommentar.</span><span class="sxs-lookup"><span data-stu-id="a7d56-375">Scroll to the bottom of the file and find the `<!--Checkout Placeholder -->` comment.</span></span>
3. <span data-ttu-id="a7d56-376">Ersetzen Sie den `ImageButton` Kommentar durch ein Steuerelement, sodass das Markup wie folgt ersetzt wird:</span><span class="sxs-lookup"><span data-stu-id="a7d56-376">Replace the comment with an `ImageButton` control so that the mark up is replaced as follows:</span></span>  

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample16.aspx)]
4. <span data-ttu-id="a7d56-377">Fügen *ShoppingCart.aspx.cs* Sie in der `UpdateBtn_Click` ShoppingCart.aspx.cs Datei nach dem Ereignishandler `CheckOutBtn_Click` am Ende der Datei den Ereignishandler hinzu:</span><span class="sxs-lookup"><span data-stu-id="a7d56-377">In the *ShoppingCart.aspx.cs* file, after the `UpdateBtn_Click` event handler near the end of the file, add the `CheckOutBtn_Click` event handler:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample17.cs)]
5. <span data-ttu-id="a7d56-378">Fügen Sie *ShoppingCart.aspx.cs* auch in der ShoppingCart.aspx.cs `CheckoutBtn`Datei einen Verweis auf die hinzu, sodass auf die Schaltfläche "Neues Bild" wie folgt verwiesen wird:</span><span class="sxs-lookup"><span data-stu-id="a7d56-378">Also in the *ShoppingCart.aspx.cs* file, add a reference to the `CheckoutBtn`, so that the new image button is referenced as follows:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample18.cs?highlight=18)]
6. <span data-ttu-id="a7d56-379">Speichern Sie Ihre Änderungen sowohl in der *Datei ShoppingCart.aspx* als auch in der *ShoppingCart.aspx.cs-Datei.*</span><span class="sxs-lookup"><span data-stu-id="a7d56-379">Save your changes to both the *ShoppingCart.aspx* file and the *ShoppingCart.aspx.cs* file.</span></span>
7. <span data-ttu-id="a7d56-380">Wählen Sie im Menü **Debug**-&gt;**Build WingtipToys**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-380">From the menu, select **Debug**-&gt;**Build WingtipToys**.</span></span>  
   <span data-ttu-id="a7d56-381">Das Projekt wird mit dem neu hinzugefügten **ImageButton-Steuerelement** neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-381">The project will be rebuilt with the newly added **ImageButton** control.</span></span>

### <a name="send-purchase-details-to-paypal"></a><span data-ttu-id="a7d56-382">Kaufdetails an PayPal senden</span><span class="sxs-lookup"><span data-stu-id="a7d56-382">Send Purchase Details to PayPal</span></span>

<span data-ttu-id="a7d56-383">Wenn der Benutzer auf der Warenkorbseite (*ShoppingCart.aspx*) auf die Schaltfläche **Auschecken** klickt, beginnt er mit dem Kaufvorgang.</span><span class="sxs-lookup"><span data-stu-id="a7d56-383">When the user clicks the **Checkout** button on the shopping cart page (*ShoppingCart.aspx*), they'll begin the purchase process.</span></span> <span data-ttu-id="a7d56-384">Der folgende Code ruft die erste PayPal-Funktion auf, die zum Kauf von Produkten erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="a7d56-384">The following code calls the first PayPal function needed to purchase products.</span></span>

1. <span data-ttu-id="a7d56-385">Öffnen Sie im Ordner *Auschecken* die CodeBehind-Datei mit dem Namen *CheckoutStart.aspx.cs*.</span><span class="sxs-lookup"><span data-stu-id="a7d56-385">From the *Checkout* folder, open the code-behind file named *CheckoutStart.aspx.cs*.</span></span>   
   <span data-ttu-id="a7d56-386">Achten Sie darauf, die CodeBehind-Datei zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-386">Be sure to open the code-behind file.</span></span>
2. <span data-ttu-id="a7d56-387">Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="a7d56-387">Replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample19.cs)]

<span data-ttu-id="a7d56-388">Wenn der Benutzer der Anwendung auf der Warenkorbseite auf die Schaltfläche **Auschecken** klickt, navigiert der Browser zur Seite *CheckoutStart.aspx.*</span><span class="sxs-lookup"><span data-stu-id="a7d56-388">When the user of the application clicks the **Checkout** button on the shopping cart page, the browser will navigate to the *CheckoutStart.aspx* page.</span></span> <span data-ttu-id="a7d56-389">Wenn die Seite *CheckoutStart.aspx* geladen wird, wird die `ShortcutExpressCheckout` Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-389">When the *CheckoutStart.aspx* page loads, the `ShortcutExpressCheckout` method is called.</span></span> <span data-ttu-id="a7d56-390">An dieser Stelle wird der Benutzer auf die PayPal-Testwebsite übertragen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-390">At this point, the user is transferred to the PayPal testing web site.</span></span> <span data-ttu-id="a7d56-391">Auf der PayPal-Website gibt der Benutzer seine PayPal-Anmeldeinformationen ein, überprüft die Kaufdetails, akzeptiert `ShortcutExpressCheckout` die PayPal-Vereinbarung und kehrt zur Wingtip Toys-Beispielanwendung zurück, bei der die Methode abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="a7d56-391">On the PayPal site, the user enters their PayPal credentials, reviews the purchase details, accepts the PayPal agreement and returns to the Wingtip Toys sample application where the `ShortcutExpressCheckout` method completes.</span></span> <span data-ttu-id="a7d56-392">Wenn `ShortcutExpressCheckout` die Methode abgeschlossen ist, wird der Benutzer zur in der `ShortcutExpressCheckout` Methode angegebenen Seite *CheckoutReview.aspx* umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="a7d56-392">When the `ShortcutExpressCheckout` method is complete, it will redirect the user to the *CheckoutReview.aspx* page specified in the `ShortcutExpressCheckout` method.</span></span> <span data-ttu-id="a7d56-393">Auf diese Weise kann der Benutzer die Bestelldetails in der Wingtip Toys-Beispielanwendung überprüfen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-393">This allows the user to review the order details from within the Wingtip Toys sample application.</span></span>

### <a name="review-order-details"></a><span data-ttu-id="a7d56-394">Bestelldetails überprüfen</span><span class="sxs-lookup"><span data-stu-id="a7d56-394">Review Order Details</span></span>

<span data-ttu-id="a7d56-395">Nach der Rückkehr von PayPal werden auf der Seite *CheckoutReview.aspx* der Wingtip Toys-Beispielanwendung die Bestelldetails angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-395">After returning from PayPal, the *CheckoutReview.aspx* page of the Wingtip Toys sample application displays the order details.</span></span> <span data-ttu-id="a7d56-396">Auf dieser Seite kann der Benutzer die Bestelldetails vor dem Kauf der Produkte überprüfen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-396">This page allows the user to review the order details before purchasing the products.</span></span> <span data-ttu-id="a7d56-397">Die Seite *CheckoutReview.aspx* muss wie folgt erstellt werden:</span><span class="sxs-lookup"><span data-stu-id="a7d56-397">The *CheckoutReview.aspx* page must be created as follows:</span></span>

1. <span data-ttu-id="a7d56-398">Öffnen Sie im Ordner *Auschecken* die Seite mit dem Namen *CheckoutReview.aspx*.</span><span class="sxs-lookup"><span data-stu-id="a7d56-398">In the *Checkout* folder, open the page named *CheckoutReview.aspx*.</span></span>
2. <span data-ttu-id="a7d56-399">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-399">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample20.aspx)]
3. <span data-ttu-id="a7d56-400">Öffnen Sie die CodeBehind-Seite mit dem Namen *CheckoutReview.aspx.cs,* und ersetzen Sie den vorhandenen Code durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-400">Open the code-behind page named *CheckoutReview.aspx.cs* and replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample21.cs)]

<span data-ttu-id="a7d56-401">Das **DetailsView-Steuerelement** wird verwendet, um die Auftragsdetails anzuzeigen, die von PayPal zurückgegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-401">The **DetailsView** control is used to display the order details that have been returned from PayPal.</span></span> <span data-ttu-id="a7d56-402">Außerdem speichert der obige Code die Bestelldetails in `OrderDetail` der Wingtip Toys-Datenbank als Objekt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-402">Also, the above code saves the order details to the Wingtip Toys database as an `OrderDetail` object.</span></span> <span data-ttu-id="a7d56-403">Wenn der Benutzer auf die Schaltfläche **"Bestellung abschließen"** klickt, wird er zur Seite *CheckoutComplete.aspx* weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="a7d56-403">When the user clicks on the **Complete Order** button, they are redirected to the *CheckoutComplete.aspx* page.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="a7d56-404">**Tipp**</span><span class="sxs-lookup"><span data-stu-id="a7d56-404">**Tip**</span></span>
> 
> <span data-ttu-id="a7d56-405">Beachten Sie im Markup der *Seite CheckoutReview.aspx,* dass das `<ItemStyle>` Tag verwendet wird, um den Stil der Elemente im **DetailsView-Steuerelement** am unteren Rand der Seite zu ändern.</span><span class="sxs-lookup"><span data-stu-id="a7d56-405">In the markup of the *CheckoutReview.aspx* page, notice that the `<ItemStyle>` tag is used to change the style of the items within the **DetailsView** control near the bottom of the page.</span></span> <span data-ttu-id="a7d56-406">Wenn Sie die Seite in der **Entwurfsansicht** anzeigen (durch Auswählen von **Entwurf** in der unteren linken Ecke von Visual Studio), dann das **DetailsView-Steuerelement** und das **Smarttag** (das Pfeilsymbol oben rechts im Steuerelement) auswählen, können Sie die **DetailsView-Aufgaben**anzeigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-406">By viewing the page in **Design View** (by selecting **Design** at the lower left corner of Visual Studio), then selecting the **DetailsView** control, and selecting the **Smart Tag** (the arrow icon at the top right of the control), you will be able to see the **DetailsView Tasks**.</span></span>
> 
> ![Auschecken und Bezahlen mit PayPal - Felder bearbeiten](checkout-and-payment-with-paypal/_static/image18.png)
> 
> <span data-ttu-id="a7d56-408">Wenn Sie **Felder bearbeiten**auswählen, wird das Dialogfeld **Felder** angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-408">By selecting **Edit Fields**, the **Fields** dialog box will appear.</span></span> <span data-ttu-id="a7d56-409">In diesem Dialogfeld können Sie die visuellen Eigenschaften, z. B. **ItemStyle**, des **DetailsView-Steuerelements** problemlos steuern.</span><span class="sxs-lookup"><span data-stu-id="a7d56-409">In this dialog box you can easily control the visual properties, such as **ItemStyle**, of the **DetailsView** control.</span></span>
> 
> ![Checkout und Zahlung mit PayPal - Felder Dialog](checkout-and-payment-with-paypal/_static/image19.png)

### <a name="complete-purchase"></a><span data-ttu-id="a7d56-411">Kompletter Kauf</span><span class="sxs-lookup"><span data-stu-id="a7d56-411">Complete Purchase</span></span>

<span data-ttu-id="a7d56-412">*CheckoutComplete.aspx* Seite macht den Kauf von PayPal.</span><span class="sxs-lookup"><span data-stu-id="a7d56-412">*CheckoutComplete.aspx* page makes the purchase from PayPal.</span></span> <span data-ttu-id="a7d56-413">Wie oben erwähnt, muss der Benutzer auf die Schaltfläche **Bestellung abschließen** klicken, bevor die Anwendung zur Seite *CheckoutComplete.aspx* navigiert.</span><span class="sxs-lookup"><span data-stu-id="a7d56-413">As mentioned above, the user must click on the **Complete Order** button before the application will navigate to the *CheckoutComplete.aspx* page.</span></span>

1. <span data-ttu-id="a7d56-414">Öffnen Sie im Ordner *Auschecken* die Seite mit dem Namen *CheckoutComplete.aspx*.</span><span class="sxs-lookup"><span data-stu-id="a7d56-414">In the *Checkout* folder, open the page named *CheckoutComplete.aspx*.</span></span>
2. <span data-ttu-id="a7d56-415">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-415">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample22.aspx)]
3. <span data-ttu-id="a7d56-416">Öffnen Sie die CodeBehind-Seite mit dem Namen *CheckoutComplete.aspx.cs,* und ersetzen Sie den vorhandenen Code durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-416">Open the code-behind page named *CheckoutComplete.aspx.cs* and replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample23.cs)]

<span data-ttu-id="a7d56-417">Wenn die Seite *CheckoutComplete.aspx* `DoCheckoutPayment` geladen wird, wird die Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-417">When the *CheckoutComplete.aspx* page is loaded, the `DoCheckoutPayment` method is called.</span></span> <span data-ttu-id="a7d56-418">Wie bereits erwähnt, schließt die `DoCheckoutPayment` Methode den Kauf aus der PayPal-Testumgebung ab.</span><span class="sxs-lookup"><span data-stu-id="a7d56-418">As mentioned earlier, the `DoCheckoutPayment` method completes the purchase from the PayPal testing environment.</span></span> <span data-ttu-id="a7d56-419">Sobald PayPal den Kauf der Bestellung abgeschlossen hat, zeigt die `ID` Seite *CheckoutComplete.aspx* dem Käufer eine Zahlungstransaktion an.</span><span class="sxs-lookup"><span data-stu-id="a7d56-419">Once PayPal has completed the purchase of the order, the *CheckoutComplete.aspx* page displays a payment transaction `ID` to the purchaser.</span></span>

### <a name="handle-cancel-purchase"></a><span data-ttu-id="a7d56-420">Handle Cancel Purchase</span><span class="sxs-lookup"><span data-stu-id="a7d56-420">Handle Cancel Purchase</span></span>

<span data-ttu-id="a7d56-421">Wenn der Benutzer beschließt, den Kauf zu stornieren, wird er auf die Seite *CheckoutCancel.aspx* weitergeleitet, auf der er sieht, dass seine Bestellung storniert wurde.</span><span class="sxs-lookup"><span data-stu-id="a7d56-421">If the user decides to cancel the purchase, they will be directed to the *CheckoutCancel.aspx* page where they will see that their order has been cancelled.</span></span>

1. <span data-ttu-id="a7d56-422">Öffnen Sie die Seite mit dem Namen *CheckoutCancel.aspx* im *Ordner Auschecken.*</span><span class="sxs-lookup"><span data-stu-id="a7d56-422">Open the page named *CheckoutCancel.aspx* in the *Checkout* folder.</span></span>
2. <span data-ttu-id="a7d56-423">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-423">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample24.aspx)]

### <a name="handle-purchase-errors"></a><span data-ttu-id="a7d56-424">Behandeln von Kauffehlern</span><span class="sxs-lookup"><span data-stu-id="a7d56-424">Handle Purchase Errors</span></span>

<span data-ttu-id="a7d56-425">Fehler während des Kaufvorgangs werden von der Seite *CheckoutError.aspx* behandelt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-425">Errors during the purchase process will be handled by the *CheckoutError.aspx* page.</span></span> <span data-ttu-id="a7d56-426">Der Codebehind der *Seite CheckoutStart.aspx,* der Seite *CheckoutReview.aspx* und der Seite *CheckoutComplete.aspx* wird jeweils zur Seite *CheckoutError.aspx* umgeleitet, wenn ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-426">The code-behind of the *CheckoutStart.aspx* page, the *CheckoutReview.aspx* page, and the *CheckoutComplete.aspx* page will each redirect to the *CheckoutError.aspx* page if an error occurs.</span></span>

1. <span data-ttu-id="a7d56-427">Öffnen Sie die Seite mit dem Namen *CheckoutError.aspx* im *Ordner Auschecken.*</span><span class="sxs-lookup"><span data-stu-id="a7d56-427">Open the page named *CheckoutError.aspx* in the *Checkout* folder.</span></span>
2. <span data-ttu-id="a7d56-428">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a7d56-428">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample25.aspx)]

<span data-ttu-id="a7d56-429">Die Seite *CheckoutError.aspx* wird mit den Fehlerdetails angezeigt, wenn während des Auscheckvorgangs ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-429">The *CheckoutError.aspx* page is displayed with the error details when an error occurs during the checkout process.</span></span>

## <a name="running-the-application"></a><span data-ttu-id="a7d56-430">Ausführen der Anwendung</span><span class="sxs-lookup"><span data-stu-id="a7d56-430">Running the Application</span></span>

<span data-ttu-id="a7d56-431">Führen Sie die Anwendung aus, um zu sehen, wie Produkte gekauft werden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-431">Run the application to see how to purchase products.</span></span> <span data-ttu-id="a7d56-432">Beachten Sie, dass Sie in der PayPal-Testumgebung ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-432">Note that you will be running in the PayPal testing environment.</span></span> <span data-ttu-id="a7d56-433">Es wird kein tatsächliches Geld umgetauscht.</span><span class="sxs-lookup"><span data-stu-id="a7d56-433">No actual money is being exchanged.</span></span>

1. <span data-ttu-id="a7d56-434">Stellen Sie sicher, dass alle Dateien in Visual Studio gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="a7d56-434">Make sure all your files are saved in Visual Studio.</span></span>
2. <span data-ttu-id="a7d56-435">Öffnen Sie einen Webbrowser, und navigieren Sie zu [https://developer.paypal.com](https://developer.paypal.com/).</span><span class="sxs-lookup"><span data-stu-id="a7d56-435">Open a Web browser and navigate to [https://developer.paypal.com](https://developer.paypal.com/).</span></span>
3. <span data-ttu-id="a7d56-436">Melden Sie sich mit Ihrem PayPal-Entwicklerkonto an, das Sie zuvor in diesem Tutorial erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-436">Login with your PayPal developer account that you created earlier in this tutorial.</span></span>  
   <span data-ttu-id="a7d56-437">Für die Entwickler-Sandbox von PayPal müssen [https://developer.paypal.com](https://developer.paypal.com/) Sie eingeloggt sein, um express checkout zu testen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-437">For PayPal's developer sandbox, you need to be logged in at [https://developer.paypal.com](https://developer.paypal.com/) to test express checkout.</span></span> <span data-ttu-id="a7d56-438">Dies gilt nur für PayPals Sandbox-Tests, nicht für die Live-Umgebung von PayPal.</span><span class="sxs-lookup"><span data-stu-id="a7d56-438">This only applies to PayPal's sandbox testing, not to PayPal's live environment.</span></span>
4. <span data-ttu-id="a7d56-439">Drücken Sie in Visual Studio **F5,** um die Wingtip Toys-Beispielanwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-439">In Visual Studio, press **F5** to run the Wingtip Toys sample application.</span></span>  
   <span data-ttu-id="a7d56-440">Nachdem die Datenbank neu erstellt wurde, wird der Browser geöffnet und zeigt die Seite *Default.aspx* an.</span><span class="sxs-lookup"><span data-stu-id="a7d56-440">After the database rebuilds, the browser will open and show the *Default.aspx* page.</span></span>
5. <span data-ttu-id="a7d56-441">Fügen Sie dem Warenkorb drei verschiedene Produkte hinzu, indem Sie die Produktkategorie auswählen, z. B. "Autos", und dann neben jedem Produkt auf **Zum Warenkorb** hinzufügen klicken.</span><span class="sxs-lookup"><span data-stu-id="a7d56-441">Add three different products to the shopping cart by selecting the product category, such as "Cars" and then clicking **Add to Cart** next to each product.</span></span>  
   <span data-ttu-id="a7d56-442">Im Warenkorb wird das ausgewählte Produkt angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-442">The shopping cart will display the product you have selected.</span></span>
6. <span data-ttu-id="a7d56-443">Klicken Sie auf die **PayPal-Schaltfläche,** um zur Kasse zu schauen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-443">Click the **PayPal** button to checkout.</span></span> 

    ![Kasse und Zahlung mit PayPal - Cart](checkout-and-payment-with-paypal/_static/image20.png)

   <span data-ttu-id="a7d56-445">Für das Auschecken müssen Sie über ein Benutzerkonto für die Wingtip Toys-Beispielanwendung verfügen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-445">Checking out will require that you have a user account for the Wingtip Toys sample application.</span></span>
7. <span data-ttu-id="a7d56-446">Klicken Sie auf den **Google-Link** auf der rechten Seite der Seite, um sich mit einem vorhandenen gmail.com-E-Mail-Konto anzumelden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-446">Click the **Google** link on the right of the page to log in with an existing gmail.com email account.</span></span>  
   <span data-ttu-id="a7d56-447">Wenn Sie kein gmail.com Konto haben, können Sie ein Konto zu Testzwecken [unter www.gmail.com](https://www.gmail.com/)erstellen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-447">If you do not have a gmail.com account, you can create one for testing purposes at [www.gmail.com](https://www.gmail.com/).</span></span> <span data-ttu-id="a7d56-448">Sie können auch ein lokales Standardkonto verwenden, indem Sie auf "Registrieren" klicken.</span><span class="sxs-lookup"><span data-stu-id="a7d56-448">You can also use a standard local account by clicking "Register".</span></span> 

    ![Checkout und Zahlung mit PayPal - Anmelden](checkout-and-payment-with-paypal/_static/image21.png)
8. <span data-ttu-id="a7d56-450">Melden Sie sich mit Ihrem Gmail-Konto und Passwort an.</span><span class="sxs-lookup"><span data-stu-id="a7d56-450">Sign in with your gmail account and password.</span></span> 

    ![Checkout und Zahlung mit PayPal - Gmail Anmelden](checkout-and-payment-with-paypal/_static/image22.png)
9. <span data-ttu-id="a7d56-452">Klicken Sie auf die Schaltfläche **Anmelden,** um Ihr Gmail-Konto mit Ihrem Wingtip Toys-Beispielanwendungsbenutzernamen zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="a7d56-452">Click the **Log in** button to register your gmail account with your Wingtip Toys sample application user name.</span></span> 

    ![Auschecken und Bezahlen mit PayPal - Konto registrieren](checkout-and-payment-with-paypal/_static/image23.png)
10. <span data-ttu-id="a7d56-454">Fügen Sie auf der PayPal-Testwebsite Ihre Käufer-E-Mail-Adresse und Ihr Kennwort hinzu, die Sie zuvor in diesem Tutorial erstellt haben, und klicken Sie dann auf die Schaltfläche **Anmelden.** **buyer**</span><span class="sxs-lookup"><span data-stu-id="a7d56-454">On the PayPal test site, add your **buyer** email address and password that you created earlier in this tutorial, then click the **Log In** button.</span></span> 

    ![Checkout und Zahlung mit PayPal - PayPal anmelden](checkout-and-payment-with-paypal/_static/image24.png)
11. <span data-ttu-id="a7d56-456">Stimmen Sie der PayPal-Richtlinie zu und klicken Sie auf die Schaltfläche **"Zustimmen" und "Weiter".**</span><span class="sxs-lookup"><span data-stu-id="a7d56-456">Agree to the PayPal policy and click the **Agree and Continue** button.</span></span>  
    <span data-ttu-id="a7d56-457">Beachten Sie, dass diese Seite nur angezeigt wird, wenn Sie dieses PayPal-Konto zum ersten Mal verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-457">Note that this page is only displayed the first time you use this PayPal account.</span></span> <span data-ttu-id="a7d56-458">Beachten Sie nochmals, dass dies ein Testkonto ist, kein echtes Geld wird umgetauscht.</span><span class="sxs-lookup"><span data-stu-id="a7d56-458">Again note that this is a test account, no real money is exchanged.</span></span> 

    ![Checkout und Zahlung mit PayPal - PayPal-Richtlinien](checkout-and-payment-with-paypal/_static/image25.png)
12. <span data-ttu-id="a7d56-460">Überprüfen Sie die Bestellinformationen auf der Überprüfungsseite der PayPal-Testumgebung, und klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="a7d56-460">Review the order information on the PayPal testing environment review page and click **Continue**.</span></span> 

    ![Checkout und Zahlung mit PayPal - Informationen überprüfen](checkout-and-payment-with-paypal/_static/image26.png)
13. <span data-ttu-id="a7d56-462">Überprüfen Sie auf der Seite *CheckoutReview.aspx* den Bestellbetrag, und zeigen Sie die generierte Lieferadresse an.</span><span class="sxs-lookup"><span data-stu-id="a7d56-462">On the *CheckoutReview.aspx* page, verify the order amount and view the generated shipping address.</span></span> <span data-ttu-id="a7d56-463">Klicken Sie dann auf die Schaltfläche **Bestellung abschließen.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-463">Then, click the **Complete Order** button.</span></span> 

    ![Checkout und Zahlung mit PayPal - Bestellüberprüfung](checkout-and-payment-with-paypal/_static/image27.png)
14. <span data-ttu-id="a7d56-465">Die Seite **CheckoutComplete.aspx** wird mit einer Zahlungstransaktions-ID angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-465">The **CheckoutComplete.aspx** page is displayed with a payment transaction ID.</span></span> 

    ![Checkout und Zahlung mit PayPal - Checkout abgeschlossen](checkout-and-payment-with-paypal/_static/image28.png)

<a id="ReviewDBWebForms"></a>
## <a name="reviewing-the-database"></a><span data-ttu-id="a7d56-467">Überprüfen der Datenbank</span><span class="sxs-lookup"><span data-stu-id="a7d56-467">Reviewing the Database</span></span>

<span data-ttu-id="a7d56-468">Wenn Sie die aktualisierten Daten in der Wingtip Toys-Beispielanwendungsdatenbank nach dem Ausführen der Anwendung überprüfen, können Sie sehen, dass die Anwendung den Kauf der Produkte erfolgreich aufgezeichnet hat.</span><span class="sxs-lookup"><span data-stu-id="a7d56-468">By reviewing the updated data in the Wingtip Toys sample application database after running the application, you can see that the application successfully recorded the purchase of the products.</span></span>

<span data-ttu-id="a7d56-469">Sie können die in der Datenbankdatei *Wingtiptoys.mdf* enthaltenen Daten mithilfe des **Fensters Datenbank-Explorer** **(Fenster Server-Explorer** in Visual Studio) überprüfen, wie Sie es zuvor in dieser Lernprogrammreihe getan haben.</span><span class="sxs-lookup"><span data-stu-id="a7d56-469">You can inspect the data contained in the *Wingtiptoys.mdf* database file by using the **Database Explorer** window (**Server Explorer** window in Visual Studio) as you did earlier in this tutorial series.</span></span>

1. <span data-ttu-id="a7d56-470">Schließen Sie das Browserfenster, wenn es noch geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="a7d56-470">Close the browser window if it is still open.</span></span>
2. <span data-ttu-id="a7d56-471">Wählen Sie in Visual Studio oben im **Projektmappen-Explorer** das Symbol **Alle Dateien** anzeigen aus, damit Sie den Ordner **App-Daten\_** erweitern können.</span><span class="sxs-lookup"><span data-stu-id="a7d56-471">In Visual Studio, select the **Show All Files** icon at the top of **Solution Explorer** to allow you to expand the **App\_Data** folder.</span></span>
3. <span data-ttu-id="a7d56-472">Erweitern Sie den Ordner **App-Daten.\_**</span><span class="sxs-lookup"><span data-stu-id="a7d56-472">Expand the **App\_Data** folder.</span></span>  
 <span data-ttu-id="a7d56-473">Möglicherweise müssen Sie das Symbol **Alle Dateien** anzeigen für den Ordner auswählen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-473">You may need to select the **Show All Files** icon for the folder.</span></span>
4. <span data-ttu-id="a7d56-474">Klicken Sie mit der rechten Maustaste auf die Datenbankdatei *Wingtiptoys.mdf,* und wählen Sie **Öffnen**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-474">Right-click the *Wingtiptoys.mdf* database file and select **Open**.</span></span>  
    <span data-ttu-id="a7d56-475">**Server Explorer** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-475">**Server Explorer** is displayed.</span></span>
5. <span data-ttu-id="a7d56-476">Erweitern Sie den Ordner **Tabellen** .</span><span class="sxs-lookup"><span data-stu-id="a7d56-476">Expand the **Tables** folder.</span></span>
6. <span data-ttu-id="a7d56-477">Klicken Sie mit der rechten Maustaste auf die Tabelle **"Bestellungen",** und wählen Sie **Tabellendaten anzeigen**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-477">Right-click the **Orders**table and select **Show Table Data**.</span></span>  
 <span data-ttu-id="a7d56-478">Die Tabelle **"Orders"** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-478">The **Orders** table is displayed.</span></span>
7. <span data-ttu-id="a7d56-479">Überprüfen Sie die Spalte **PaymentTransactionID,** um erfolgreiche Transaktionen zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-479">Review the **PaymentTransactionID** column to confirm successful transactions.</span></span> 

    ![Checkout und Zahlung mit PayPal - Testdatenbank](checkout-and-payment-with-paypal/_static/image29.png)
8. <span data-ttu-id="a7d56-481">Schließen Sie das Tabellenfenster **"Orders".**</span><span class="sxs-lookup"><span data-stu-id="a7d56-481">Close the **Orders** table window.</span></span>
9. <span data-ttu-id="a7d56-482">Klicken Sie im Server-Explorer mit der rechten Maustaste auf die Tabelle **OrderDetails,** und wählen Sie **Tabellendaten anzeigen**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-482">In the Server Explorer, right-click the **OrderDetails** table and select **Show Table Data**.</span></span>
10. <span data-ttu-id="a7d56-483">Überprüfen `OrderId` Sie `Username` die und-Werte in der Tabelle **OrderDetails.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-483">Review the `OrderId` and `Username` values in the **OrderDetails** table.</span></span> <span data-ttu-id="a7d56-484">Beachten Sie, dass `OrderId` `Username` diese Werte mit den und Werten übereinstimmen, die in der Tabelle **"Orders"** enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="a7d56-484">Note that these values match the `OrderId` and `Username` values included in the **Orders** table.</span></span>
11. <span data-ttu-id="a7d56-485">Schließen Sie das Tabellenfenster **OrderDetails.**</span><span class="sxs-lookup"><span data-stu-id="a7d56-485">Close the **OrderDetails** table window.</span></span>
12. <span data-ttu-id="a7d56-486">Klicken Sie mit der rechten Maustaste auf die Wingtip Toys-Datenbankdatei (*Wingtiptoys.mdf*) und wählen **Sie Verbindung schließen**aus.</span><span class="sxs-lookup"><span data-stu-id="a7d56-486">Right-click the Wingtip Toys database file (*Wingtiptoys.mdf*) and select **Close Connection**.</span></span>
13. <span data-ttu-id="a7d56-487">Wenn das **Projektmappen-Explorer-Fenster** nicht angezeigt wird, klicken Sie unten im **Fenster Server-Explorer** auf **Projektmappen-Explorer,** um den **Projektmappen-Explorer** erneut anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-487">If you do not see the **Solution Explorer** window, click **Solution Explorer** at the bottom of the **Server Explorer** window to show the **Solution Explorer** again.</span></span>

## <a name="summary"></a><span data-ttu-id="a7d56-488">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="a7d56-488">Summary</span></span>

<span data-ttu-id="a7d56-489">In diesem Tutorial haben Sie Auftrags- und Bestelldetailschemas hinzugefügt, um den Kauf von Produkten nachzuverfolgen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-489">In this tutorial you added order and order detail schemas to track the purchase of products.</span></span> <span data-ttu-id="a7d56-490">Sie haben auch die PayPal-Funktionalität in die Wingtip Toys-Beispielanwendung integriert.</span><span class="sxs-lookup"><span data-stu-id="a7d56-490">You also integrated PayPal functionality into the Wingtip Toys sample application.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="a7d56-491">Weitere Ressourcen</span><span class="sxs-lookup"><span data-stu-id="a7d56-491">Additional Resources</span></span>

<span data-ttu-id="a7d56-492">[ASP.NET-Konfigurationsübersicht](https://msdn.microsoft.com/library/ms178683(v=vs.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="a7d56-492">[ASP.NET Configuration Overview](https://msdn.microsoft.com/library/ms178683(v=vs.100).aspx)</span></span>  
[<span data-ttu-id="a7d56-493">Bereitstellen einer Secure ASP.NET Web Forms App mit Mitgliedschaft, OAuth und SQL-Datenbank in Azure App Service</span><span class="sxs-lookup"><span data-stu-id="a7d56-493">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="a7d56-494">Microsoft Azure – Kostenlose Testversion</span><span class="sxs-lookup"><span data-stu-id="a7d56-494">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

## <a name="disclaimer"></a><span data-ttu-id="a7d56-495">Haftungsausschluss</span><span class="sxs-lookup"><span data-stu-id="a7d56-495">Disclaimer</span></span>

<span data-ttu-id="a7d56-496">Dieses Tutorial enthält Beispielcode.</span><span class="sxs-lookup"><span data-stu-id="a7d56-496">This tutorial contains sample code.</span></span> <span data-ttu-id="a7d56-497">Dieser Beispielcode wird "wie besehen" ohne jegliche Gewährleistung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="a7d56-497">Such sample code is provided "as is" without warranty of any kind.</span></span> <span data-ttu-id="a7d56-498">Dementsprechend übernimmt Microsoft keine Garantie für die Genauigkeit, Integrität oder Qualität des Beispielcodes.</span><span class="sxs-lookup"><span data-stu-id="a7d56-498">Accordingly, Microsoft does not guarantee the accuracy, integrity, or quality of the sample code.</span></span> <span data-ttu-id="a7d56-499">Sie erklären sich damit einverstanden, den Beispielcode auf eigenes Risiko zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="a7d56-499">You agree to use the sample code at your own risk.</span></span> <span data-ttu-id="a7d56-500">Unter keinen Umständen haftet Microsoft Ihnen gegenüber in irgendeiner Weise für Beispielcode, Inhalte, einschließlich, aber nicht beschränkt auf Fehler oder Auslassungen in Beispielcode, Inhalt oder Verluste oder Schäden jeglicher Art, die durch die Verwendung von Beispielcode entstehen.</span><span class="sxs-lookup"><span data-stu-id="a7d56-500">Under no circumstances will Microsoft be liable to you in any way for any sample code, content, including but not limited to, any errors or omissions in any sample code, content, or any loss or damage of any kind incurred as a result of the use of any sample code.</span></span> <span data-ttu-id="a7d56-501">Sie werden hiermit benachrichtigt und erklären sich hiermit damit einverstanden, Microsoft von jeglichem Verlust, Verlust, Verletzungen oder Schäden jeglicher Art, einschließlich, aber nicht beschränkt auf Daseinsionen, die durch Material, das Sie posten, übertragen, verwenden oder auf das Sie sich verlassen, zu entschädigen, zu speichern und zu halten, einschließlich, aber nicht beschränkt auf die darin geäußerten Ansichten.</span><span class="sxs-lookup"><span data-stu-id="a7d56-501">You are hereby notified and do hereby agree to indemnify, save and hold Microsoft harmless from and against any and all loss, claims of loss, injury or damage of any kind including, without limitation, those occasioned by or arising from material that you post, transmit, use or rely on including, but not limited to, the views expressed therein.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a7d56-502">[Zurück](shopping-cart.md)
> [Weiter](membership-and-administration.md)</span><span class="sxs-lookup"><span data-stu-id="a7d56-502">[Previous](shopping-cart.md)
[Next](membership-and-administration.md)</span></span>
