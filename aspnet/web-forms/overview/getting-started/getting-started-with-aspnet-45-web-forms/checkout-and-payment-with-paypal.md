---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal
title: Auschecken und bezahlen mit PayPal | Microsoft-Dokumentation
author: Erikre
description: Diese tutorialreihe vermittelt Ihnen die Grundlagen zum Entwickeln einer ASP.net Web Forms Anwendung mit ASP.NET 4,5 und Microsoft Visual Studio Express 2013 für wir...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 664ec95e-b0c9-4f43-a39f-798d0f2a7e08
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/checkout-and-payment-with-paypal
msc.type: authoredcontent
ms.openlocfilehash: 62d00a86c6c5845fb894896df65002c7086d039f
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2019
ms.locfileid: "74615147"
---
# <a name="checkout-and-payment-with-paypal"></a><span data-ttu-id="33cef-103">Bezahlvorgang und Zahlung mit PayPal</span><span class="sxs-lookup"><span data-stu-id="33cef-103">Checkout and Payment with PayPal</span></span>

<span data-ttu-id="33cef-104">von [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="33cef-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="33cef-105">[Herunterladen eines Wingtip Toys-C#Beispielprojekts ()](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) oder [Herunterladen von E-Book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="33cef-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="33cef-106">Diese tutorialreihe vermittelt Ihnen die Grundlagen der Entwicklung einer ASP.net Web Forms-Anwendung mit ASP.NET 4,5 und Microsoft Visual Studio Express 2013 für das Web.</span><span class="sxs-lookup"><span data-stu-id="33cef-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="33cef-107">Für diese tutorialreihe steht ein Visual Studio 2013- [Projekt mit C# Quellcode](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="33cef-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="33cef-108">In diesem Tutorial wird beschrieben, wie Sie die Wingtip Toys-Beispielanwendung so ändern, dass Sie die Benutzer Autorisierung, Registrierung und Zahlung mithilfe von PayPal einschließt.</span><span class="sxs-lookup"><span data-stu-id="33cef-108">This tutorial describes how to modify the Wingtip Toys sample application to include user authorization, registration, and payment using PayPal.</span></span> <span data-ttu-id="33cef-109">Nur Benutzer, die angemeldet sind, verfügen über die Autorisierung zum Kauf von Produkten.</span><span class="sxs-lookup"><span data-stu-id="33cef-109">Only users who are logged in will have authorization to purchase products.</span></span> <span data-ttu-id="33cef-110">Die integrierte Benutzer Registrierungsfunktion der Projektvorlage "ASP.NET 4,5 Web Forms" enthält bereits einen Großteil der benötigten Elemente.</span><span class="sxs-lookup"><span data-stu-id="33cef-110">The ASP.NET 4.5 Web Forms project template's built-in user registration functionality already includes much of what you need.</span></span> <span data-ttu-id="33cef-111">Sie werden die PayPal Express Checkout-Funktion hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="33cef-111">You will add PayPal Express Checkout functionality.</span></span> <span data-ttu-id="33cef-112">In diesem Tutorial verwenden Sie die PayPal-Testumgebung für Entwickler, sodass keine tatsächlichen Beträge übertragen werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-112">In this tutorial you be using the PayPal developer testing environment, so no actual funds will be transferred.</span></span> <span data-ttu-id="33cef-113">Am Ende des Tutorials testen Sie die Anwendung, indem Sie Produkte auswählen, die dem Warenkorb hinzugefügt werden sollen, indem Sie auf die Schaltfläche "Auschecken" klicken und Daten auf die Website "PayPal testing" übertragen.</span><span class="sxs-lookup"><span data-stu-id="33cef-113">At the end of the tutorial, you will test the application by selecting products to add to the shopping cart, clicking the checkout button, and transferring data to the PayPal testing web site.</span></span> <span data-ttu-id="33cef-114">Auf der Website für die PayPal-Tests bestätigen Sie Ihre Versand-und Zahlungsinformationen, und kehren Sie dann zur lokalen Wingtip Toys-Beispielanwendung zurück, um den Kauf zu bestätigen und abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="33cef-114">On the PayPal testing web site, you will confirm your shipping and payment information and then return to the local Wingtip Toys sample application to confirm and complete the purchase.</span></span>

<span data-ttu-id="33cef-115">Es gibt mehrere erfahrene Zahlungsprozessoren von Drittanbietern, die sich auf den Online Einkauf spezialisiert haben, der die Skalierbarkeit und Sicherheit adressiert.</span><span class="sxs-lookup"><span data-stu-id="33cef-115">There are several experienced third-party payment processors that specialize in online shopping that address scalability and security.</span></span> <span data-ttu-id="33cef-116">ASP.NET-Entwickler sollten die Vorteile der Verwendung einer Drittanbieter-Zahlungslösung berücksichtigen, bevor Sie eine Einkaufs-und Kauf Lösung implementieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-116">ASP.NET developers should consider the advantages of utilizing a third party payment solution before implementing a shopping and purchasing solution.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="33cef-117">Die Wingtip Toys-Beispielanwendung wurde entwickelt, um spezifische ASP.net-Konzepte und Features anzuzeigen, die für ASP.NET-Webentwickler zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="33cef-117">The Wingtip Toys sample application was designed to shown specific ASP.NET concepts and features available to ASP.NET web developers.</span></span> <span data-ttu-id="33cef-118">Diese Beispielanwendung wurde nicht für alle möglichen Umstände in Bezug auf die Skalierbarkeit und Sicherheit optimiert.</span><span class="sxs-lookup"><span data-stu-id="33cef-118">This sample application was not optimized for all possible circumstances in regard to scalability and security.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="33cef-119">Lernen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-119">What you'll learn:</span></span>

- <span data-ttu-id="33cef-120">Einschränken des Zugriffs auf bestimmte Seiten in einem Ordner.</span><span class="sxs-lookup"><span data-stu-id="33cef-120">How to restrict access to specific pages in a folder.</span></span>
- <span data-ttu-id="33cef-121">Erstellen eines bekannten Warenkorbs aus einem anonymen Warenkorb</span><span class="sxs-lookup"><span data-stu-id="33cef-121">How to create a known shopping cart from an anonymous shopping cart.</span></span>
- <span data-ttu-id="33cef-122">Aktivieren von SSL für das Projekt.</span><span class="sxs-lookup"><span data-stu-id="33cef-122">How to enable SSL for the project.</span></span>
- <span data-ttu-id="33cef-123">Vorgehensweise beim Hinzufügen eines OAuth-Anbieters zum Projekt.</span><span class="sxs-lookup"><span data-stu-id="33cef-123">How to add an OAuth provider to the project.</span></span>
- <span data-ttu-id="33cef-124">Verwenden von PayPal zum Erwerb von Produkten mithilfe der PayPal-Testumgebung.</span><span class="sxs-lookup"><span data-stu-id="33cef-124">How to use PayPal to purchase products using the PayPal testing environment.</span></span>
- <span data-ttu-id="33cef-125">Anzeigen von Details aus PayPal in einem **DetailsView** -Steuerelement</span><span class="sxs-lookup"><span data-stu-id="33cef-125">How to display details from PayPal in a **DetailsView** control.</span></span>
- <span data-ttu-id="33cef-126">Aktualisieren der Datenbank der Wingtip Toys-Anwendung mit Details, die von PayPal abgerufen wurden.</span><span class="sxs-lookup"><span data-stu-id="33cef-126">How to update the database of the Wingtip Toys application with details obtained from PayPal.</span></span>

## <a name="adding-order-tracking"></a><span data-ttu-id="33cef-127">Hinzufügen der Auftrags Überwachung</span><span class="sxs-lookup"><span data-stu-id="33cef-127">Adding Order Tracking</span></span>

<span data-ttu-id="33cef-128">In diesem Tutorial erstellen Sie zwei neue Klassen zum Nachverfolgen von Daten aus der Reihenfolge, die ein Benutzer erstellt hat.</span><span class="sxs-lookup"><span data-stu-id="33cef-128">In this tutorial, you'll create two new classes to track data from the order a user has created.</span></span> <span data-ttu-id="33cef-129">Die Klassen verfolgen Daten zu Versandinformationen, Kauf Summe und Zahlungsbestätigung.</span><span class="sxs-lookup"><span data-stu-id="33cef-129">The classes will track data regarding shipping information, purchase total, and payment confirmation.</span></span>

### <a name="add-the-order-and-orderdetail-model-classes"></a><span data-ttu-id="33cef-130">Hinzufügen der Order-und Order Detail-Modellklassen</span><span class="sxs-lookup"><span data-stu-id="33cef-130">Add the Order and OrderDetail Model Classes</span></span>

<span data-ttu-id="33cef-131">Weiter oben in dieser tutorialreihe haben Sie das Schema für Kategorien, Produkte und waren Korb Elemente definiert, indem Sie die Klassen `Category`, `Product`und `CartItem` im Ordner *Modelle* erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-131">Earlier in this tutorial series, you defined the schema for categories, products, and shopping cart items by creating the `Category`, `Product`, and `CartItem` classes in the *Models* folder.</span></span> <span data-ttu-id="33cef-132">Nun fügen Sie zwei neue Klassen hinzu, um das Schema für die Produktbestellung und die Details der Bestellung zu definieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-132">Now you will add two new classes to define the schema for the product order and the details of the order.</span></span>

1. <span data-ttu-id="33cef-133">Fügen Sie im Ordner **Models** eine neue Klasse mit dem Namen *Order.cs*hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-133">In the **Models** folder, add a new class named *Order.cs*.</span></span>   
   <span data-ttu-id="33cef-134">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-134">The new class file is displayed in the editor.</span></span>
2. <span data-ttu-id="33cef-135">Ersetzen Sie den Standardcode durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-135">Replace the default code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample1.cs)]
3. <span data-ttu-id="33cef-136">Fügen Sie dem Ordner " *Models* " eine *OrderDetail.cs* -Klasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-136">Add an *OrderDetail.cs* class to the *Models* folder.</span></span>
4. <span data-ttu-id="33cef-137">Ersetzen Sie den Standard Code durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="33cef-137">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample2.cs)]

<span data-ttu-id="33cef-138">Die Klassen `Order` und `OrderDetail` enthalten das Schema zum Definieren der Auftrags Informationen, die für den Einkauf und Versand verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-138">The `Order` and `OrderDetail` classes contain the schema to define the order information used for purchasing and shipping.</span></span>

<span data-ttu-id="33cef-139">Außerdem müssen Sie die Daten Bank Kontext Klasse aktualisieren, die die Entitäts Klassen verwaltet und den Datenzugriff auf die Datenbank ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="33cef-139">In addition, you will need to update the database context class that manages the entity classes and that provides data access to the database.</span></span> <span data-ttu-id="33cef-140">Zu diesem Zweck fügen Sie der Klasse `ProductContext` Klasse die neu erstellten Order-und `OrderDetail` Modellklassen hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-140">To do this, you will add the newly created Order and `OrderDetail` model classes to `ProductContext` class.</span></span>

1. <span data-ttu-id="33cef-141">Suchen und öffnen Sie in **Projektmappen-Explorer**die Datei *ProductContext.cs* .</span><span class="sxs-lookup"><span data-stu-id="33cef-141">In **Solution Explorer**, find and open the *ProductContext.cs* file.</span></span>
2. <span data-ttu-id="33cef-142">Fügen Sie der Datei *ProductContext.cs* den markierten Code hinzu, wie unten gezeigt:</span><span class="sxs-lookup"><span data-stu-id="33cef-142">Add the highlighted code to the *ProductContext.cs* file as shown below:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample3.cs?highlight=14-15)]

<span data-ttu-id="33cef-143">Wie bereits in dieser tutorialreihe erwähnt, fügt der Code in der *ProductContext.cs* -Datei den `System.Data.Entity`-Namespace hinzu, damit Sie auf alle Kernfunktionen des Entity Framework zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="33cef-143">As mentioned previously in this tutorial series, the code in the *ProductContext.cs* file adds the `System.Data.Entity` namespace so that you have access to all the core functionality of the Entity Framework.</span></span> <span data-ttu-id="33cef-144">Diese Funktion bietet die Möglichkeit, Daten durcharbeiten mit stark typisierten Objekten abzufragen, einzufügen, zu aktualisieren und zu löschen.</span><span class="sxs-lookup"><span data-stu-id="33cef-144">This functionality includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span> <span data-ttu-id="33cef-145">Der obige Code in der `ProductContext`-Klasse fügt Entity Framework Zugriff auf die neu hinzugefügten `Order`-und `OrderDetail`-Klassen hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-145">The above code in the `ProductContext` class adds Entity Framework access to the newly added `Order` and `OrderDetail` classes.</span></span>

## <a name="adding-checkout-access"></a><span data-ttu-id="33cef-146">Hinzufügen des Checkout Zugriffs</span><span class="sxs-lookup"><span data-stu-id="33cef-146">Adding Checkout Access</span></span>

<span data-ttu-id="33cef-147">Die Wingtip Toys-Beispielanwendung ermöglicht anonymen Benutzern das überprüfen und Hinzufügen von Produkten zu einem Einkaufswagen.</span><span class="sxs-lookup"><span data-stu-id="33cef-147">The Wingtip Toys sample application allows anonymous users to review and add products to a shopping cart.</span></span> <span data-ttu-id="33cef-148">Wenn anonyme Benutzer jedoch entscheiden, die Produkte zu kaufen, die Sie dem Warenkorb hinzugefügt haben, müssen Sie sich an der Website anmelden.</span><span class="sxs-lookup"><span data-stu-id="33cef-148">However, when anonymous users choose to purchase the products they added to the shopping cart, they must log on to the site.</span></span> <span data-ttu-id="33cef-149">Nachdem Sie sich angemeldet haben, können Sie auf die eingeschränkten Seiten der Webanwendung zugreifen, die den Checkout-und Kaufprozess verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="33cef-149">Once they have logged on, they can access the restricted pages of the Web application that handle the checkout and purchase process.</span></span> <span data-ttu-id="33cef-150">Diese eingeschränkten Seiten sind im Ordner *Checkout* der Anwendung enthalten.</span><span class="sxs-lookup"><span data-stu-id="33cef-150">These restricted pages are contained in the *Checkout* folder of the application.</span></span>

### <a name="add-a-checkout-folder-and-pages"></a><span data-ttu-id="33cef-151">Hinzufügen eines Checkout Ordners und von Seiten</span><span class="sxs-lookup"><span data-stu-id="33cef-151">Add a Checkout Folder and Pages</span></span>

<span data-ttu-id="33cef-152">Nun erstellen Sie den Ordner " *Checkout* " und die Seiten darin, die dem Kunden während des Auscheck Vorgangs angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-152">You will now create the *Checkout* folder and the pages in it that the customer will see during the checkout process.</span></span> <span data-ttu-id="33cef-153">Diese Seiten werden später in diesem Tutorial aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="33cef-153">You will update these pages later in this tutorial.</span></span>

1. <span data-ttu-id="33cef-154">Klicken Sie in **Projektmappen-Explorer** mit der rechten Maustaste auf den Projektnamen (**Wingtip Toys**), und wählen Sie **neuen Ordner hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-154">Right-click the project name (**Wingtip Toys**) in **Solution Explorer** and select **Add a New Folder**.</span></span> 

    ![Auschecken und bezahlen mit PayPal: neuer Ordner](checkout-and-payment-with-paypal/_static/image1.png)
2. <span data-ttu-id="33cef-156">Benennen Sie den neuen *Ordner.*</span><span class="sxs-lookup"><span data-stu-id="33cef-156">Name the new folder *Checkout*.</span></span>
3. <span data-ttu-id="33cef-157">Klicken Sie mit der rechten Maustaste auf den Ordner *Checkout* , und wählen Sie-&gt;**Neues Element** **Hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-157">Right-click the *Checkout* folder and then select **Add**-&gt;**New Item**.</span></span> 

    ![Auschecken und bezahlen mit PayPal-neues Element](checkout-and-payment-with-paypal/_static/image2.png)
4. <span data-ttu-id="33cef-159">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-159">The **Add New Item** dialog box is displayed.</span></span>
5. <span data-ttu-id="33cef-160">Wählen Sie auf der linken Seite die Gruppe **Visual C#**  -&gt; **Web** Templates aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-160">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="33cef-161">Wählen Sie dann im mittleren Bereich die Option **Web Form mit Master Seite**aus, und nennen Sie Sie *checkoutstart. aspx*.</span><span class="sxs-lookup"><span data-stu-id="33cef-161">Then, from the middle pane, select **Web Form with Master Page**and name it *CheckoutStart.aspx*.</span></span> 

    ![Auschecken und bezahlen mit PayPal-Dialog Feld "Neues Element hinzufügen](checkout-and-payment-with-paypal/_static/image3.png)
6. <span data-ttu-id="33cef-163">Wählen Sie wie zuvor die Datei *Site. Master* als Master Seite aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-163">As before, select the *Site.Master* file as the master page.</span></span>
7. <span data-ttu-id="33cef-164">Fügen Sie dem Ordner *Checkout* die folgenden zusätzlichen Seiten hinzu, indem Sie die oben genannten Schritte ausführen:</span><span class="sxs-lookup"><span data-stu-id="33cef-164">Add the following additional pages to the *Checkout* folder using the same steps above:</span></span>   

    - <span data-ttu-id="33cef-165">Checkeinview. aspx</span><span class="sxs-lookup"><span data-stu-id="33cef-165">CheckoutReview.aspx</span></span>
    - <span data-ttu-id="33cef-166">Checkoutcomplete. aspx</span><span class="sxs-lookup"><span data-stu-id="33cef-166">CheckoutComplete.aspx</span></span>
    - <span data-ttu-id="33cef-167">Checkoutcancel. aspx</span><span class="sxs-lookup"><span data-stu-id="33cef-167">CheckoutCancel.aspx</span></span>
    - <span data-ttu-id="33cef-168">Checkouterror. aspx</span><span class="sxs-lookup"><span data-stu-id="33cef-168">CheckoutError.aspx</span></span>

### <a name="add-a-webconfig-file"></a><span data-ttu-id="33cef-169">Fügen Sie eine Web. config-Datei hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-169">Add a Web.config File</span></span>

<span data-ttu-id="33cef-170">Wenn Sie dem *Checkout* Ordner eine neue Datei " *Web. config* " hinzufügen, können Sie den Zugriff auf alle im Ordner enthaltenen Seiten einschränken.</span><span class="sxs-lookup"><span data-stu-id="33cef-170">By adding a new *Web.config* file to the *Checkout* folder, you will be able to restrict access to all the pages contained in the folder.</span></span>

1. <span data-ttu-id="33cef-171">Klicken Sie mit der rechten Maustaste auf den Ordner *Checkout* , und wählen Sie **Hinzufügen** -&gt; **Neues Element**</span><span class="sxs-lookup"><span data-stu-id="33cef-171">Right-click the *Checkout* folder and select **Add** -&gt; **New Item**.</span></span>  
   <span data-ttu-id="33cef-172">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-172">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="33cef-173">Wählen Sie auf der linken Seite die Gruppe **Visual C#**  -&gt; **Web** Templates aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-173">Select the **Visual C#** -&gt; **Web** templates group on the left.</span></span> <span data-ttu-id="33cef-174">Wählen Sie dann im mittleren Bereich **Webkonfigurationsdatei**aus, übernehmen Sie den Standardnamen " *Web. config*", und wählen Sie dann **Hinzufügen**aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-174">Then, from the middle pane, select **Web Configuration File**, accept the default name of *Web.config*, and then select **Add**.</span></span>
3. <span data-ttu-id="33cef-175">Ersetzen Sie den vorhandenen XML-Inhalt in der Datei " *Web. config* " durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-175">Replace the existing XML content in the *Web.config* file with the following:</span></span>  

    [!code-xml[Main](checkout-and-payment-with-paypal/samples/sample4.xml)]
4. <span data-ttu-id="33cef-176">Speichern Sie die Datei " *Web. config* ".</span><span class="sxs-lookup"><span data-stu-id="33cef-176">Save the *Web.config* file.</span></span>

<span data-ttu-id="33cef-177">Die Datei " *Web. config* " gibt an, dass allen unbekannten Benutzern der Webanwendung der Zugriff auf die im Ordner " *Checkout* " enthaltenen Seiten verweigert werden muss.</span><span class="sxs-lookup"><span data-stu-id="33cef-177">The *Web.config* file specifies that all unknown users of the Web application must be denied access to the pages contained in the *Checkout* folder.</span></span> <span data-ttu-id="33cef-178">Wenn der Benutzer jedoch ein Konto registriert hat und angemeldet ist, handelt es sich um einen bekannten Benutzer, der Zugriff auf die Seiten im Ordner " *Checkout* " hat.</span><span class="sxs-lookup"><span data-stu-id="33cef-178">However, if the user has registered an account and is logged on, they will be a known user and will have access to the pages in the *Checkout* folder.</span></span>

<span data-ttu-id="33cef-179">Beachten Sie, dass die ASP.NET-Konfiguration auf eine Hierarchie folgt, wobei jede *Web. config* -Datei Konfigurationseinstellungen auf den Ordner anwendet, in dem Sie sich befindet, sowie auf alle untergeordneten Verzeichnisse darunter.</span><span class="sxs-lookup"><span data-stu-id="33cef-179">It's important to note that ASP.NET configuration follows a hierarchy, where each *Web.config* file applies configuration settings to the folder that it is in and to all of the child directories below it.</span></span>

<a id="SSLWebForms"></a>
## <a name="enable-ssl-for-the-project"></a><span data-ttu-id="33cef-180">Aktivieren von SSL für das Projekt</span><span class="sxs-lookup"><span data-stu-id="33cef-180">Enable SSL for the Project</span></span>

 <span data-ttu-id="33cef-181">Bei Secure Sockets Layer (SSL) handelt es sich um ein Protokoll, das es Webservern und Webclients ermöglicht, mithilfe der Verschlüsselung sicherer zu kommunizieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-181">Secure Sockets Layer (SSL) is a protocol defined to allow Web servers and Web clients to communicate more securely through the use of encryption.</span></span> <span data-ttu-id="33cef-182">Wenn SSL nicht verwendet wird, sind die zwischen Client und Server gesendeten Daten für die Paket Ermittlung durch beliebige Personen mit physischem Zugriff auf das Netzwerk geöffnet.</span><span class="sxs-lookup"><span data-stu-id="33cef-182">When SSL is not used, data sent between the client and server is open to packet sniffing by anyone with physical access to the network.</span></span> <span data-ttu-id="33cef-183">Außerdem sind mehrere allgemeine Authentifizierungs Schemas über einfaches http nicht sicher.</span><span class="sxs-lookup"><span data-stu-id="33cef-183">Additionally, several common authentication schemes are not secure over plain HTTP.</span></span> <span data-ttu-id="33cef-184">Insbesondere senden Standard Authentifizierung und Formular Authentifizierung unverschlüsselte Anmelde Informationen.</span><span class="sxs-lookup"><span data-stu-id="33cef-184">In particular, Basic authentication and forms authentication send unencrypted credentials.</span></span> <span data-ttu-id="33cef-185">Um sicher zu sein, müssen diese Authentifizierungs Schemas SSL verwenden.</span><span class="sxs-lookup"><span data-stu-id="33cef-185">To be secure, these authentication schemes must use SSL.</span></span> 

1. <span data-ttu-id="33cef-186">Klicken Sie in **Projektmappen-Explorer**auf das Projekt **wingtiptoys** , und drücken Sie dann **F4** , um das Fenster **Eigenschaften** anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="33cef-186">In **Solution Explorer**, click the **WingtipToys** project, then press **F4** to display the **Properties** window.</span></span>
2. <span data-ttu-id="33cef-187">Ändern Sie **SSL** in `true`.</span><span class="sxs-lookup"><span data-stu-id="33cef-187">Change **SSL Enabled** to `true`.</span></span>
3. <span data-ttu-id="33cef-188">Kopieren Sie die **SSL-URL** , damit Sie Sie später verwenden können.</span><span class="sxs-lookup"><span data-stu-id="33cef-188">Copy the **SSL URL** so you can use it later.</span></span>   
 <span data-ttu-id="33cef-189">Die SSL-URL wird `https://localhost:44300/`, es sei denn, Sie haben zuvor SSL-Websites erstellt (wie unten gezeigt).</span><span class="sxs-lookup"><span data-stu-id="33cef-189">The SSL URL will be `https://localhost:44300/` unless you've previously created SSL Web Sites (as shown below).</span></span>   
    <span data-ttu-id="33cef-190">![Projekteigenschaften](checkout-and-payment-with-paypal/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-190">![Project Properties](checkout-and-payment-with-paypal/_static/image4.png)</span></span>
4. <span data-ttu-id="33cef-191">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt **wingtiptoys** und dann auf **Eigenschaften**.</span><span class="sxs-lookup"><span data-stu-id="33cef-191">In **Solution Explorer**, right click the **WingtipToys** project and click **Properties**.</span></span>
5. <span data-ttu-id="33cef-192">Klicken Sie auf der linken Registerkarte auf **Web**.</span><span class="sxs-lookup"><span data-stu-id="33cef-192">In the left tab, click **Web**.</span></span>
6. <span data-ttu-id="33cef-193">Ändern Sie die **Projekt-URL** , um die zuvor gespeicherte SSL- **URL** zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="33cef-193">Change the **Project Url** to use the **SSL URL** that you saved earlier.</span></span>   
    <span data-ttu-id="33cef-194">![Projekt-Webeigenschaften](checkout-and-payment-with-paypal/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-194">![Project Web Properties](checkout-and-payment-with-paypal/_static/image5.png)</span></span>
7. <span data-ttu-id="33cef-195">Speichern Sie die Seite durch Drücken von **STRG + S**.</span><span class="sxs-lookup"><span data-stu-id="33cef-195">Save the page by pressing **CTRL+S**.</span></span>
8. <span data-ttu-id="33cef-196">Drücken Sie **STRG+F5**, um die Anwendung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="33cef-196">Press **Ctrl+F5** to run the application.</span></span> <span data-ttu-id="33cef-197">In Visual Studio wird eine Option angezeigt, mit der Sie SSL-Warnungen vermeiden können.</span><span class="sxs-lookup"><span data-stu-id="33cef-197">Visual Studio will display an option to allow you to avoid SSL warnings.</span></span>
9. <span data-ttu-id="33cef-198">Klicken Sie auf **Ja** , um dem IIS Express SSL-Zertifikat zu Vertrauen und fortzufahren</span><span class="sxs-lookup"><span data-stu-id="33cef-198">Click **Yes** to trust the IIS Express SSL certificate and continue.</span></span>   
    <span data-ttu-id="33cef-199">![IIS Express SSL-Zertifikats Details](checkout-and-payment-with-paypal/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-199">![IIS Express SSL certificate details](checkout-and-payment-with-paypal/_static/image6.png)</span></span>  
 <span data-ttu-id="33cef-200">Es wird eine Sicherheitswarnung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-200">A Security Warning is displayed.</span></span>
10. <span data-ttu-id="33cef-201">Klicken Sie auf **Ja** , um das Zertifikat auf Ihrem localhost zu installieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-201">Click **Yes** to install the certificate to your localhost.</span></span>   
    <span data-ttu-id="33cef-202">Dialogfeld "Sicherheitswarnung !["](checkout-and-payment-with-paypal/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-202">![Security Warning dialog box](checkout-and-payment-with-paypal/_static/image7.png)</span></span>  
 <span data-ttu-id="33cef-203">Das Browserfenster wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-203">The browser window will be displayed.</span></span>

<span data-ttu-id="33cef-204">Sie können Ihre Webanwendung jetzt problemlos lokal mit SSL testen.</span><span class="sxs-lookup"><span data-stu-id="33cef-204">You can now easily test your Web application locally using SSL.</span></span>

<a id="OAuthWebForms"></a>
## <a name="add-an-oauth-20-provider"></a><span data-ttu-id="33cef-205">Hinzufügen eines OAuth 2,0-Anbieters</span><span class="sxs-lookup"><span data-stu-id="33cef-205">Add an OAuth 2.0 Provider</span></span>

<span data-ttu-id="33cef-206">ASP.net Web Forms bietet erweiterte Optionen für die Mitgliedschaft und Authentifizierung.</span><span class="sxs-lookup"><span data-stu-id="33cef-206">ASP.NET Web Forms provides enhanced options for membership and authentication.</span></span> <span data-ttu-id="33cef-207">Diese Verbesserungen umfassen OAuth.</span><span class="sxs-lookup"><span data-stu-id="33cef-207">These enhancements include OAuth.</span></span> <span data-ttu-id="33cef-208">OAuth ist ein offenes Protokoll, das die sichere Autorisierung in einer einfachen und Standardmethode von Web-, Mobil-und Desktop Anwendungen ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="33cef-208">OAuth is an open protocol that allows secure authorization in a simple and standard method from web, mobile, and desktop applications.</span></span> <span data-ttu-id="33cef-209">Die ASP.net-Web Forms Vorlage verwendet OAuth, um Facebook, Twitter, Google und Microsoft als Authentifizierungs Anbieter verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="33cef-209">The ASP.NET Web Forms template uses OAuth to expose Facebook, Twitter, Google and Microsoft as authentication providers.</span></span> <span data-ttu-id="33cef-210">Obwohl in diesem Tutorial nur Google als Authentifizierungs Anbieter verwendet wird, können Sie den Code so ändern, dass er einen beliebigen Anbieter verwendet.</span><span class="sxs-lookup"><span data-stu-id="33cef-210">Although this tutorial uses only Google as the authentication provider, you can easily modify the code to use any of the providers.</span></span> <span data-ttu-id="33cef-211">Die Schritte zur Implementierung anderer Anbieter ähneln den Schritten, die Sie in diesem Tutorial sehen werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-211">The steps to implement other providers are very similar to the steps you will see in this tutorial.</span></span>

<span data-ttu-id="33cef-212">Zusätzlich zur Authentifizierung verwendet das Tutorial auch Rollen, um die Autorisierung zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-212">In addition to authentication, the tutorial will also use roles to implement authorization.</span></span> <span data-ttu-id="33cef-213">Nur die Benutzer, die Sie der `canEdit` Rolle hinzufügen, können Daten ändern (erstellen, bearbeiten oder Löschen von Kontakten).</span><span class="sxs-lookup"><span data-stu-id="33cef-213">Only those users you add to the `canEdit` role will be able to change data (create, edit, or delete contacts).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="33cef-214">Windows Live-Anwendungen akzeptieren nur eine Live-URL für eine funktionierende Website, sodass Sie keine lokale Website-URL zum Testen von Anmeldungen verwenden können.</span><span class="sxs-lookup"><span data-stu-id="33cef-214">Windows Live applications only accept a live URL for a working website, so you cannot use a local website URL for testing logins.</span></span>

<span data-ttu-id="33cef-215">Mit den folgenden Schritten können Sie einen Google-Authentifizierungs Anbieter hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="33cef-215">The following steps will allow you to add a Google authentication provider.</span></span>

1. <span data-ttu-id="33cef-216">Öffnen Sie die Datei *App\_Start\Startup.auth.cs* .</span><span class="sxs-lookup"><span data-stu-id="33cef-216">Open the *App\_Start\Startup.Auth.cs* file.</span></span>
2. <span data-ttu-id="33cef-217">Entfernen Sie die Kommentarzeichen aus der `app.UseGoogleAuthentication()`-Methode, sodass die-Methode wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="33cef-217">Remove the comment characters from the `app.UseGoogleAuthentication()` method so that the method appears as follows:</span></span> 

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample5.cs)]
3. <span data-ttu-id="33cef-218">Navigieren Sie zur [Google Developers Console](https://console.developers.google.com/).</span><span class="sxs-lookup"><span data-stu-id="33cef-218">Navigate to the [Google Developers Console](https://console.developers.google.com/).</span></span> <span data-ttu-id="33cef-219">Sie müssen sich auch mit Ihrem Google Developer-e-Mail-Konto (gmail.com) anmelden.</span><span class="sxs-lookup"><span data-stu-id="33cef-219">You will also need to sign-in with your Google developer email account (gmail.com).</span></span> <span data-ttu-id="33cef-220">Wenn Sie nicht über ein Google-Konto verfügen, wählen Sie den Link **Konto erstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-220">If you do not have a Google account, select the **Create an account** link.</span></span>   
   <span data-ttu-id="33cef-221">Als nächstes sehen Sie die **Google-Entwickler Konsole**.</span><span class="sxs-lookup"><span data-stu-id="33cef-221">Next, you'll see the **Google Developers Console**.</span></span>   
    <span data-ttu-id="33cef-222">![Google-Entwickler Konsole](checkout-and-payment-with-paypal/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-222">![Google Developers Console](checkout-and-payment-with-paypal/_static/image8.png)</span></span>
4. <span data-ttu-id="33cef-223">Klicken Sie auf die Schaltfläche **Projekt erstellen** , und geben Sie einen Projektnamen und eine ID ein (Sie können die Standardwerte verwenden).</span><span class="sxs-lookup"><span data-stu-id="33cef-223">Click the **Create Project** button and enter a project name and ID (you can use the default values).</span></span> <span data-ttu-id="33cef-224">Klicken Sie dann auf das **Kontrollkästchen Vereinbarung** und die Schaltfläche **Erstellen** .</span><span class="sxs-lookup"><span data-stu-id="33cef-224">Then, click the **agreement checkbox** and the **Create** button.</span></span>  

    ![Google-neues Projekt](checkout-and-payment-with-paypal/_static/image9.png)

   <span data-ttu-id="33cef-226">In wenigen Sekunden wird das neue Projekt erstellt, und in Ihrem Browser wird die Seite "neue Projekte" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-226">In a few seconds the new project will be created and your browser will display the new projects page.</span></span>
5. <span data-ttu-id="33cef-227">Klicken Sie auf der linken Registerkarte auf **APIs &amp;** Authentifizierung, und klicken Sie dann auf **Anmelde**Informationen.</span><span class="sxs-lookup"><span data-stu-id="33cef-227">In the left tab, click **APIs &amp; auth**, and then click **Credentials**.</span></span>
6. <span data-ttu-id="33cef-228">Klicken Sie unter **OAuth**auf die **neue Client-ID erstellen** .</span><span class="sxs-lookup"><span data-stu-id="33cef-228">Click the **Create New Client ID** under **OAuth**.</span></span>   
   <span data-ttu-id="33cef-229">Das Dialogfeld **Client-ID erstellen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-229">The **Create Client ID** dialog will be displayed.</span></span>   
    <span data-ttu-id="33cef-230">![Google-Create Client ID](checkout-and-payment-with-paypal/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-230">![Google - Create Client ID](checkout-and-payment-with-paypal/_static/image10.png)</span></span>
7. <span data-ttu-id="33cef-231">Behalten Sie im Dialogfeld **Client-ID erstellen** die **Standardweb Anwendung** für den Anwendungstyp bei.</span><span class="sxs-lookup"><span data-stu-id="33cef-231">In the **Create Client ID** dialog, keep the default **Web application** for the application type.</span></span>
8. <span data-ttu-id="33cef-232">Legen Sie die **autorisierten JavaScript-Ursprünge** auf die SSL-URL fest, die Sie zuvor in diesem Tutorial verwendet haben (`https://localhost:44300/`, es sei denn, Sie haben andere SSL-Projekte</span><span class="sxs-lookup"><span data-stu-id="33cef-232">Set the **Authorized JavaScript Origins** to the SSL URL you used earlier in this tutorial (`https://localhost:44300/` unless you've created other SSL projects).</span></span>   
   <span data-ttu-id="33cef-233">Diese URL ist der Ursprung für Ihre Anwendung.</span><span class="sxs-lookup"><span data-stu-id="33cef-233">This URL is the origin for your application.</span></span> <span data-ttu-id="33cef-234">In diesem Beispiel geben Sie nur die localhost-Test-URL ein.</span><span class="sxs-lookup"><span data-stu-id="33cef-234">For this sample, you will only enter the localhost test URL.</span></span> <span data-ttu-id="33cef-235">Sie können jedoch mehrere URLs eingeben, um localhost und die Produktion zu berücksichtigen.</span><span class="sxs-lookup"><span data-stu-id="33cef-235">However, you can enter multiple URLs to account for localhost and production.</span></span>
9. <span data-ttu-id="33cef-236">Legen Sie den **autorisierten Umleitungs-URI** auf Folgendes fest:</span><span class="sxs-lookup"><span data-stu-id="33cef-236">Set the **Authorized Redirect URI** to the following:</span></span> 

    [!code-html[Main](checkout-and-payment-with-paypal/samples/sample6.html)]

   <span data-ttu-id="33cef-237">Dieser Wert ist der URI, mit dem ASP.net OAuth-Benutzer mit dem Google OAuth-Server kommunizieren können.</span><span class="sxs-lookup"><span data-stu-id="33cef-237">This value is the URI that ASP.NET OAuth users to communicate with the google OAuth server.</span></span> <span data-ttu-id="33cef-238">Merken Sie sich die zuvor verwendete SSL-URL (`https://localhost:44300/`, es sei denn, Sie haben andere SSL-Projekte erstellt).</span><span class="sxs-lookup"><span data-stu-id="33cef-238">Remember the SSL URL you used above (    `https://localhost:44300/` unless you've created other SSL projects).</span></span>
10. <span data-ttu-id="33cef-239">Klicken Sie auf die Schaltfläche **Client-ID erstellen** .</span><span class="sxs-lookup"><span data-stu-id="33cef-239">Click the **Create Client ID** button.</span></span>
11. <span data-ttu-id="33cef-240">Klicken Sie im linken Menü der Google Developers Console auf das Menü Element **Zustimmungs Bildschirm** , und legen Sie dann Ihre e-Mail-Adresse und den Produktnamen fest.</span><span class="sxs-lookup"><span data-stu-id="33cef-240">On the left menu of the Google Developers Console, click the **Consent screen** menu item, then set your email address and product name.</span></span> <span data-ttu-id="33cef-241">Wenn Sie das Formular ausgefüllt haben, klicken Sie auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="33cef-241">When you have completed the form, click **Save**.</span></span>
12. <span data-ttu-id="33cef-242">Klicken Sie auf das Menü Element **APIs** , Scrollen Sie nach unten, und klicken Sie auf die Schaltfläche **aus** neben **Google + API**.</span><span class="sxs-lookup"><span data-stu-id="33cef-242">Click the **APIs** menu item, scroll down and click the **off** button next to **Google+ API**.</span></span>   
    <span data-ttu-id="33cef-243">Wenn Sie diese Option akzeptieren, wird die Google +-API aktiviert.</span><span class="sxs-lookup"><span data-stu-id="33cef-243">Accepting this option will enable the Google+ API.</span></span>
13. <span data-ttu-id="33cef-244">Außerdem müssen Sie das nuget-Paket **Microsoft. owin** auf Version 3.0.0 aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-244">You must also update the **Microsoft.Owin** NuGet package to version 3.0.0.</span></span>   
    <span data-ttu-id="33cef-245">Klicken Sie **im Menü** Extras auf **nuget-Paket-Manager** , und wählen Sie dann **nuget-Pakete für**Projekt Mappe verwalten aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-245">From the **Tools** menu, select **NuGet Package Manager** and then select **Manage NuGet Packages for Solution**.</span></span>  
    <span data-ttu-id="33cef-246">Suchen Sie im Fenster **nuget-Pakete verwalten** das Paket **Microsoft. owin** auf Version 3.0.0, und aktualisieren Sie es.</span><span class="sxs-lookup"><span data-stu-id="33cef-246">From the **Manage NuGet Packages** window, find and update the **Microsoft.Owin** package to version 3.0.0.</span></span>
14. <span data-ttu-id="33cef-247">Aktualisieren Sie in Visual Studio die `UseGoogleAuthentication`-Methode der *Startup.auth.cs* -Seite, indem Sie die **Client-ID** und den **geheimen Client** Schlüssel in die-Methode kopieren und einfügen.</span><span class="sxs-lookup"><span data-stu-id="33cef-247">In Visual Studio, update the `UseGoogleAuthentication` method of the *Startup.Auth.cs* page by copying and pasting the **Client ID** and **Client Secret** into the method.</span></span> <span data-ttu-id="33cef-248">Die unten gezeigten Werte für **Client-ID** und **geheimer Client** Schlüssel sind Beispiele und können nicht verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-248">The **Client ID** and **Client Secret** values shown below are samples and will not work.</span></span> 

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample7.cs?highlight=64-65)]
15. <span data-ttu-id="33cef-249">Drücken Sie **STRG + F5** , um die Anwendung zu erstellen und auszuführen.</span><span class="sxs-lookup"><span data-stu-id="33cef-249">Press **CTRL+F5** to build and run the application.</span></span> <span data-ttu-id="33cef-250">Klicken Sie auf den Link **Anmelden** .</span><span class="sxs-lookup"><span data-stu-id="33cef-250">Click the **Log in** link.</span></span>
16. <span data-ttu-id="33cef-251">Klicken Sie unter **anderen Dienst zum Anmelden verwenden auf** **Google**.</span><span class="sxs-lookup"><span data-stu-id="33cef-251">Under **Use another service to log in**, click **Google**.</span></span>  
    <span data-ttu-id="33cef-252">![anmelden](checkout-and-payment-with-paypal/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-252">![Log in](checkout-and-payment-with-paypal/_static/image11.png)</span></span>
17. <span data-ttu-id="33cef-253">Wenn Sie Ihre Anmelde Informationen eingeben müssen, werden Sie auf die Google-Website umgeleitet, auf der Sie Ihre Anmelde Informationen eingeben.</span><span class="sxs-lookup"><span data-stu-id="33cef-253">If you need to enter your credentials, you will be redirected to the google site where you will enter your credentials.</span></span>  
    ![Google-anmelden](checkout-and-payment-with-paypal/_static/image12.png)
18. <span data-ttu-id="33cef-255">Nachdem Sie Ihre Anmelde Informationen eingegeben haben, werden Sie aufgefordert, der soeben erstellten Webanwendung Berechtigungen zu geben.</span><span class="sxs-lookup"><span data-stu-id="33cef-255">After you enter your credentials, you will be prompted to give permissions to the web application you just created.</span></span>  
    ![Standard Dienst Konto für Projekt](checkout-and-payment-with-paypal/_static/image13.png)
19. <span data-ttu-id="33cef-257">Klicken Sie auf **annehmen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-257">Click **Accept**.</span></span> <span data-ttu-id="33cef-258">Sie werden nun zurück zur **Register** Seite der **wingtiptoys** -Anwendung umgeleitet, in der Sie Ihr Google-Konto registrieren können.</span><span class="sxs-lookup"><span data-stu-id="33cef-258">You will now be redirected back to the **Register** page of the **WingtipToys** application where you can register your Google account.</span></span>  
    <span data-ttu-id="33cef-259">![registrieren Sie sich bei Ihrem Google-Konto](checkout-and-payment-with-paypal/_static/image14.png)</span><span class="sxs-lookup"><span data-stu-id="33cef-259">![Register with your Google Account](checkout-and-payment-with-paypal/_static/image14.png)</span></span>
20. <span data-ttu-id="33cef-260">Sie haben die Möglichkeit, den Namen für die lokale e-Mail-Registrierung zu ändern, der für Ihr Gmail-Konto verwendet wird. Sie möchten jedoch im Allgemeinen den Standard-e-Mail-Alias (d. h. den für die Authentifizierung verwendeten)</span><span class="sxs-lookup"><span data-stu-id="33cef-260">You have the option of changing the local email registration name used for your Gmail account, but you generally want to keep the default email alias (that is, the one you used for authentication).</span></span> <span data-ttu-id="33cef-261">Klicken Sie auf **Anmelden** , wie oben gezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-261">Click **Log in** as shown above.</span></span>

### <a name="modifying-login-functionality"></a><span data-ttu-id="33cef-262">Ändern der Anmelde Funktionalität</span><span class="sxs-lookup"><span data-stu-id="33cef-262">Modifying Login Functionality</span></span>

<span data-ttu-id="33cef-263">Wie bereits in dieser tutorialreihe erwähnt, ist der Großteil der Benutzer Registrierungsfunktionen standardmäßig in der ASP.net-Web Forms Vorlage enthalten.</span><span class="sxs-lookup"><span data-stu-id="33cef-263">As previously mentioned in this tutorial series, much of the user registration functionality has been included in the ASP.NET Web Forms template by default.</span></span> <span data-ttu-id="33cef-264">Nun ändern Sie die standardmäßigen *Login. aspx* -und *Register. aspx* -Seiten, um die `MigrateCart`-Methode aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="33cef-264">Now you will modify the default *Login.aspx* and *Register.aspx* pages to call the `MigrateCart` method.</span></span> <span data-ttu-id="33cef-265">Die `MigrateCart`-Methode ordnet einem neuen angemeldeten Benutzer einen anonymen Einkaufswagen zu.</span><span class="sxs-lookup"><span data-stu-id="33cef-265">The `MigrateCart` method associates a newly logged in user with an anonymous shopping cart.</span></span> <span data-ttu-id="33cef-266">Durch Zuordnen des Benutzers und Warenkorb kann die Wingtip Toys-Beispielanwendung den Einkaufswagen des Benutzers zwischen den besuchen verwalten.</span><span class="sxs-lookup"><span data-stu-id="33cef-266">By associating the user and shopping cart, the Wingtip Toys sample application will be able to maintain the shopping cart of the user between visits.</span></span>

1. <span data-ttu-id="33cef-267">Suchen Sie in **Projektmappen-Explorer**den *Konto* Ordner, und öffnen Sie ihn.</span><span class="sxs-lookup"><span data-stu-id="33cef-267">In **Solution Explorer**, find and open the *Account* folder.</span></span>
2. <span data-ttu-id="33cef-268">Ändern Sie die Code Behind-Seite mit dem Namen *Login.aspx.cs* , um den in gelb markierten Code einzuschließen, sodass Sie wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="33cef-268">Modify the code-behind page named *Login.aspx.cs* to include the code highlighted in yellow, so that it appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample8.cs?highlight=41-43)]
3. <span data-ttu-id="33cef-269">Speichern Sie die Datei *Login.aspx.cs* .</span><span class="sxs-lookup"><span data-stu-id="33cef-269">Save the *Login.aspx.cs* file.</span></span>

<span data-ttu-id="33cef-270">Vorerst können Sie die Warnung ignorieren, dass keine Definition für die `MigrateCart`-Methode vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="33cef-270">For now, you can ignore the warning that there is no definition for the `MigrateCart` method.</span></span> <span data-ttu-id="33cef-271">Sie werden Sie später in diesem Tutorial hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="33cef-271">You will be adding it a bit later in this tutorial.</span></span>

<span data-ttu-id="33cef-272">Die *Login.aspx.cs* -Code Behind-Datei unterstützt eine Anmelde Methode.</span><span class="sxs-lookup"><span data-stu-id="33cef-272">The *Login.aspx.cs* code-behind file supports a LogIn method.</span></span> <span data-ttu-id="33cef-273">Durch die Überprüfung der Login. aspx-Seite sehen Sie, dass diese Seite eine Schaltfläche "Anmelden" enthält, die beim Klicken auf den `LogIn` Handler im Code Behind auslöst.</span><span class="sxs-lookup"><span data-stu-id="33cef-273">By inspecting the Login.aspx page, you'll see that this page includes a "Log in" button that when click triggers the `LogIn` handler on the code-behind.</span></span>

<span data-ttu-id="33cef-274">Wenn die `Login`-Methode in der *Login.aspx.cs* -Methode aufgerufen wird, wird eine neue Instanz des Warenkorbs namens `usersShoppingCart` erstellt.</span><span class="sxs-lookup"><span data-stu-id="33cef-274">When the `Login` method on the *Login.aspx.cs* is called, a new instance of the shopping cart named `usersShoppingCart` is created.</span></span> <span data-ttu-id="33cef-275">Die ID des Warenkorbs (eine GUID) wird abgerufen und auf die `cartId` Variable festgelegt.</span><span class="sxs-lookup"><span data-stu-id="33cef-275">The ID of the shopping cart (a GUID) is retrieved and set to the `cartId` variable.</span></span> <span data-ttu-id="33cef-276">Anschließend wird die `MigrateCart`-Methode aufgerufen, wobei sowohl der `cartId` als auch der Name des angemeldeten Benutzers an diese Methode übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-276">Then, the `MigrateCart` method is called, passing both the `cartId` and the name of the logged-in user to this method.</span></span> <span data-ttu-id="33cef-277">Wenn der Warenkorb migriert wird, wird die GUID, die zum Identifizieren des anonymen Warenkorbs verwendet wird, durch den Benutzernamen ersetzt.</span><span class="sxs-lookup"><span data-stu-id="33cef-277">When the shopping cart is migrated, the GUID used to identify the anonymous shopping cart is replaced with the user name.</span></span>

<span data-ttu-id="33cef-278">Zusätzlich zum Ändern der *Login.aspx.cs* -Code Behind-Datei zum Migrieren des Warenkorbs, wenn sich der Benutzer anmeldet, müssen Sie auch die *Register.aspx.cs-Code Behind-Datei* ändern, um den Warenkorb zu migrieren, wenn der Benutzer ein neues Konto erstellt und sich anmeldet.</span><span class="sxs-lookup"><span data-stu-id="33cef-278">In addition to modifying the *Login.aspx.cs* code-behind file to migrate the shopping cart when the user logs in, you must also modify the *Register.aspx.cs code-behind file* to migrate the shopping cart when the user creates a new account and logs in.</span></span>

1. <span data-ttu-id="33cef-279">Öffnen Sie im *Konto* Ordner die Code-Behind-Datei mit dem Namen *Register.aspx.cs*.</span><span class="sxs-lookup"><span data-stu-id="33cef-279">In the *Account* folder, open the code-behind file named *Register.aspx.cs*.</span></span>
2. <span data-ttu-id="33cef-280">Ändern Sie die Code Behind-Datei, indem Sie den Code in gelb einschließen, damit Sie wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="33cef-280">Modify the code-behind file by including the code in yellow, so that it appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample9.cs?highlight=28-32)]
3. <span data-ttu-id="33cef-281">Speichern Sie die Datei *Register.aspx.cs* .</span><span class="sxs-lookup"><span data-stu-id="33cef-281">Save the *Register.aspx.cs* file.</span></span> <span data-ttu-id="33cef-282">Ignorieren Sie die Warnung über die `MigrateCart` Methode.</span><span class="sxs-lookup"><span data-stu-id="33cef-282">Once again, ignore the warning about the `MigrateCart` method.</span></span>

<span data-ttu-id="33cef-283">Beachten Sie, dass der Code, den Sie im `CreateUser_Click` Ereignishandler verwendet haben, dem Code sehr ähnlich ist, den Sie in der `LogIn`-Methode verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-283">Notice that the code you used in the `CreateUser_Click` event handler is very similar to the code you used in the `LogIn` method.</span></span> <span data-ttu-id="33cef-284">Wenn sich der Benutzer registriert oder bei der Website anmeldet, wird ein `MigrateCart` Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="33cef-284">When the user registers or logs in to the site, a call to the `MigrateCart` method will be made.</span></span>

## <a name="migrating-the-shopping-cart"></a><span data-ttu-id="33cef-285">Migrieren des Warenkorbs</span><span class="sxs-lookup"><span data-stu-id="33cef-285">Migrating the Shopping Cart</span></span>

<span data-ttu-id="33cef-286">Nachdem Sie nun den Anmelde-und Registrierungsprozess aktualisiert haben, können Sie den Code zum Migrieren des Warenkorbs mithilfe der `MigrateCart`-Methode hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="33cef-286">Now that you have the log-in and registration process updated, you can add the code to migrate the shopping cart using the `MigrateCart` method.</span></span>

1. <span data-ttu-id="33cef-287">Suchen Sie in **Projektmappen-Explorer**den Ordner " *Logic* ", und öffnen Sie die *ShoppingCartActions.cs* -Klassendatei.</span><span class="sxs-lookup"><span data-stu-id="33cef-287">In **Solution Explorer**, find the *Logic* folder and open the *ShoppingCartActions.cs* class file.</span></span>
2. <span data-ttu-id="33cef-288">Fügen Sie den in gelb markierten Code dem vorhandenen Code in der *ShoppingCartActions.cs* -Datei hinzu, sodass der Code in der *ShoppingCartActions.cs* -Datei wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="33cef-288">Add the code highlighted in yellow to the existing code in the *ShoppingCartActions.cs* file, so that the code in the *ShoppingCartActions.cs* file appears as follows:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample10.cs?highlight=215-224)]

<span data-ttu-id="33cef-289">Die `MigrateCart`-Methode verwendet die vorhandene "cartId", um den Warenkorb des Benutzers zu suchen.</span><span class="sxs-lookup"><span data-stu-id="33cef-289">The `MigrateCart` method uses the existing cartId to find the shopping cart of the user.</span></span> <span data-ttu-id="33cef-290">Als nächstes durchläuft der Code alle waren Korb Elemente und ersetzt die `CartId`-Eigenschaft (wie durch das `CartItem` Schema angegeben) durch den angemeldeten Benutzernamen.</span><span class="sxs-lookup"><span data-stu-id="33cef-290">Next, the code loops through all the shopping cart items and replaces the `CartId` property (as specified by the `CartItem` schema) with the logged-in user name.</span></span>

### <a name="updating-the-database-connection"></a><span data-ttu-id="33cef-291">Aktualisieren der Datenbankverbindung</span><span class="sxs-lookup"><span data-stu-id="33cef-291">Updating the Database Connection</span></span>

<span data-ttu-id="33cef-292">Wenn Sie dieses Tutorial mithilfe der **vorgefertigten** Wingtip Toys-Beispielanwendung ausführen, müssen Sie die Standard-Mitgliedschafts Datenbank neu erstellen.</span><span class="sxs-lookup"><span data-stu-id="33cef-292">If you are following this tutorial using the **prebuilt** Wingtip Toys sample application, you must recreate the default membership database.</span></span> <span data-ttu-id="33cef-293">Durch Ändern der Standard Verbindungs Zeichenfolge wird die Mitgliedschafts Datenbank erstellt, wenn die Anwendung das nächste Mal ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="33cef-293">By modifying the default connection string, the membership database will be created the next time the application runs.</span></span>

1. <span data-ttu-id="33cef-294">Öffnen Sie die Datei " *Web. config* " im Stammverzeichnis des Projekts.</span><span class="sxs-lookup"><span data-stu-id="33cef-294">Open the *Web.config* file at the root of the project.</span></span>
2. <span data-ttu-id="33cef-295">Aktualisieren Sie die Standard Verbindungs Zeichenfolge so, dass Sie wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="33cef-295">Update the default connection string so that it appears as follows:</span></span>   

    [!code-xml[Main](checkout-and-payment-with-paypal/samples/sample11.xml)]

<a id="PayPalWebForms"></a>
## <a name="integrating-paypal"></a><span data-ttu-id="33cef-296">Integrieren von PayPal</span><span class="sxs-lookup"><span data-stu-id="33cef-296">Integrating PayPal</span></span>

<span data-ttu-id="33cef-297">Bei PayPal handelt es sich um eine webbasierte Abrechnungs Plattform, die Zahlungen durch Onlinehändler akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="33cef-297">PayPal is a web-based billing platform that accepts payments by online merchants.</span></span> <span data-ttu-id="33cef-298">In diesem Tutorial wird als nächstes erläutert, wie Sie die Express Checkout-Funktion von PayPal in Ihre Anwendung integrieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-298">This tutorial next explains how to integrate PayPal's Express Checkout functionality into your application.</span></span> <span data-ttu-id="33cef-299">Express Checkout ermöglicht Ihren Kunden die Verwendung von PayPal zum bezahlen der Elemente, die Sie dem Warenkorb hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-299">Express Checkout allows your customers to use PayPal to pay for the items they have added to their shopping cart.</span></span>

### <a name="create-paypal-test-accounts"></a><span data-ttu-id="33cef-300">Erstellen von Paypal-Test Konten</span><span class="sxs-lookup"><span data-stu-id="33cef-300">Create PayPal Test Accounts</span></span>

<span data-ttu-id="33cef-301">Um die PayPal-Testumgebung zu verwenden, müssen Sie ein Entwickler Testkonto erstellen und überprüfen.</span><span class="sxs-lookup"><span data-stu-id="33cef-301">To use the PayPal testing environment, you must create and verify a developer test account.</span></span> <span data-ttu-id="33cef-302">Sie verwenden das Test Konto des Entwicklers, um ein Käufer Testkonto und ein Verkäufer Testkonto zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="33cef-302">You will use the developer test account to create a buyer test account and a seller test account.</span></span> <span data-ttu-id="33cef-303">Die Anmelde Informationen für das Entwickler-Test Konto ermöglichen der Wingtip Toys-Beispielanwendung auch den Zugriff auf die PayPal-Testumgebung.</span><span class="sxs-lookup"><span data-stu-id="33cef-303">The developer test account credentials also will allow the Wingtip Toys sample application to access the PayPal testing environment.</span></span>

1. <span data-ttu-id="33cef-304">Navigieren Sie in einem Browser zur Website "PayPal-Entwickler Test":</span><span class="sxs-lookup"><span data-stu-id="33cef-304">In a browser, navigate to the PayPal developer testing site:</span></span>   
    [https://developer.paypal.com](https://developer.paypal.com/)
2. <span data-ttu-id="33cef-305">Wenn Sie nicht über ein PayPal-Entwicklerkonto verfügen, erstellen Sie ein neues Konto, indem Sie auf **registrieren**klicken, und befolgen Sie die Schritte zur Registrierung.</span><span class="sxs-lookup"><span data-stu-id="33cef-305">If you don't have a PayPal developer account, create a new account by clicking **Sign Up**and following the sign up steps.</span></span> <span data-ttu-id="33cef-306">Wenn Sie über ein vorhandenes PayPal-Entwicklerkonto verfügen, melden Sie sich an, indem Sie auf **Anmelden**klicken.</span><span class="sxs-lookup"><span data-stu-id="33cef-306">If you have an existing PayPal developer account, sign in by clicking **Log In**.</span></span> <span data-ttu-id="33cef-307">Sie benötigen Ihr PayPal-Entwicklerkonto, um die Wingtip Toys-Beispielanwendung später in diesem Tutorial zu testen.</span><span class="sxs-lookup"><span data-stu-id="33cef-307">You will need your PayPal developer account to test the Wingtip Toys sample application later in this tutorial.</span></span>
3. <span data-ttu-id="33cef-308">Wenn Sie sich gerade für Ihr PayPal-Entwicklerkonto registriert haben, müssen Sie möglicherweise Ihr PayPal-Entwicklerkonto mit PayPal verifizieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-308">If you have just signed up for your PayPal developer account, you may need to verify your PayPal developer account with PayPal.</span></span> <span data-ttu-id="33cef-309">Sie können Ihr Konto überprüfen, indem Sie die Schritte befolgen, die an Ihr e-Mail-Konto gesendet wurden.</span><span class="sxs-lookup"><span data-stu-id="33cef-309">You can verify your account by following the steps that PayPal sent to your email account.</span></span> <span data-ttu-id="33cef-310">Nachdem Sie Ihr PayPal-Entwicklerkonto überprüft haben, melden Sie sich wieder bei der Website für die PayPal-Entwickler Tests an.</span><span class="sxs-lookup"><span data-stu-id="33cef-310">Once you have verified your PayPal developer account, log back into the PayPal developer testing site.</span></span>
4. <span data-ttu-id="33cef-311">Nachdem Sie sich mit Ihrem PayPal-Entwicklerkonto bei der PayPal-Entwickler Website angemeldet haben, müssen Sie ein PayPal-Käufer Testkonto erstellen, falls Sie noch keines besitzen.</span><span class="sxs-lookup"><span data-stu-id="33cef-311">After you are logged in to the PayPal developer site with your PayPal developer account you need to create a PayPal buyer test account if you don't already have one.</span></span> <span data-ttu-id="33cef-312">Um ein Käufer Testkonto zu erstellen, klicken Sie auf der Website PayPal auf die Registerkarte **Anwendungen** , und klicken Sie dann auf **Sandbox-Konten**.</span><span class="sxs-lookup"><span data-stu-id="33cef-312">To create a buyer test account, on the PayPal site click the **Applications** tab and then click **Sandbox accounts**.</span></span>   
 <span data-ttu-id="33cef-313">Die Seite **Sandbox-Testkonten** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-313">The **Sandbox test accounts** page is shown.</span></span>   

    > [!NOTE] 
    > 
    > <span data-ttu-id="33cef-314">Die Website für die PayPal-Entwickler stellt bereits ein Händler Testkonto bereit.</span><span class="sxs-lookup"><span data-stu-id="33cef-314">The PayPal Developer site already provides a merchant test account.</span></span>

    ![Auschecken und bezahlen mit PayPal-Sandbox-Testkonten](checkout-and-payment-with-paypal/_static/image15.png)
5. <span data-ttu-id="33cef-316">Klicken Sie auf der Seite Sandbox-Testkonten auf **Konto erstellen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-316">On the Sandbox test accounts page, click **Create Account**.</span></span>
6. <span data-ttu-id="33cef-317">Wählen Sie auf der Seite **Testkonto erstellen** eine e-Mail und ein Kennwort Ihrer Wahl für das Käufer Test Konto aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-317">On the **Create test account** page choose a buyer test account email and password of your choice.</span></span>   

    > [!NOTE] 
    > 
    > <span data-ttu-id="33cef-318">Sie benötigen die Käufer-e-Mail-Adressen und das Kennwort, um die Wingtip Toys-Beispielanwendung am Ende dieses Tutorials zu testen.</span><span class="sxs-lookup"><span data-stu-id="33cef-318">You will need the buyer email addresses and password to test the Wingtip Toys sample application at the end of this tutorial.</span></span>

    ![Auschecken und bezahlen mit PayPal-Sandbox-Testkonten](checkout-and-payment-with-paypal/_static/image16.png)
7. <span data-ttu-id="33cef-320">Erstellen Sie das Käufer Testkonto, indem Sie auf die Schaltfläche **Konto erstellen** klicken.</span><span class="sxs-lookup"><span data-stu-id="33cef-320">Create the buyer test account by clicking the **Create Account** button.</span></span>  
 <span data-ttu-id="33cef-321">Die Seite **Sandbox-Test Konten** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-321">The **Sandbox Test accounts** page is displayed.</span></span> 

    ![Auschecken und bezahlen mit PayPal-PayPal-Konten](checkout-and-payment-with-paypal/_static/image17.png)
8. <span data-ttu-id="33cef-323">Klicken Sie auf der Seite **Sandbox-Testkonten** auf das e-Mail-Konto für den **Vermittler** .</span><span class="sxs-lookup"><span data-stu-id="33cef-323">On the **Sandbox test accounts** page, click the **facilitator** email account.</span></span>  
    <span data-ttu-id="33cef-324">**Profil** -und **Benachrichtigungs** Optionen werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-324">**Profile** and **Notification** options appear.</span></span>
9. <span data-ttu-id="33cef-325">Wählen Sie die Option **Profil** aus, und klicken Sie dann auf **API-Anmelde** Informationen, um Ihre API-Anmelde Informationen für das Händler Testkonto</span><span class="sxs-lookup"><span data-stu-id="33cef-325">Select the **Profile** option, then click **API credentials** to view your API credentials for the merchant test account.</span></span>
10. <span data-ttu-id="33cef-326">Kopieren Sie die Test-API-Anmelde Informationen in Notepad.</span><span class="sxs-lookup"><span data-stu-id="33cef-326">Copy the TEST API credentials to notepad.</span></span>

<span data-ttu-id="33cef-327">Sie benötigen die angezeigten klassischen Test-API-Anmelde Informationen (Benutzername, Kennwort und Signatur), um API-Aufrufe von der Wingtip Toys-Beispielanwendung an die PayPal-Testumgebung vorzunehmen.</span><span class="sxs-lookup"><span data-stu-id="33cef-327">You will need your displayed Classic TEST API credentials (Username, Password, and Signature) to make API calls from the Wingtip Toys sample application to the PayPal testing environment.</span></span> <span data-ttu-id="33cef-328">Die Anmelde Informationen werden im nächsten Schritt hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="33cef-328">You will add the credentials in the next step.</span></span>

### <a name="add-paypal-class-and-api-credentials"></a><span data-ttu-id="33cef-329">Hinzufügen von PayPal-und API-Anmelde Informationen</span><span class="sxs-lookup"><span data-stu-id="33cef-329">Add PayPal Class and API Credentials</span></span>

<span data-ttu-id="33cef-330">Der Großteil des PayPal-Codes wird in einer einzigen Klasse platziert.</span><span class="sxs-lookup"><span data-stu-id="33cef-330">You will place the majority of the PayPal code into a single class.</span></span> <span data-ttu-id="33cef-331">Diese Klasse enthält die Methoden, die für die Kommunikation mit PayPal verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-331">This class contains the methods used to communicate with PayPal.</span></span> <span data-ttu-id="33cef-332">Außerdem fügen Sie dieser Klasse Ihre PayPal-Anmelde Informationen hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-332">Also, you will add your PayPal credentials to this class.</span></span>

1. <span data-ttu-id="33cef-333">Klicken Sie in der Wingtip Toys-Beispielanwendung in Visual Studio mit der rechten Maustaste auf den Ordner **Logic** , und wählen Sie dann -&gt; **Neues Element** **Hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-333">In the Wingtip Toys sample application within Visual Studio, right-click the **Logic** folder and then select **Add** -&gt; **New Item**.</span></span>   
   <span data-ttu-id="33cef-334">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-334">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="33cef-335">Wählen Sie unter  **C# Visual** im Bereich **installiert** auf der linken Seite die Option **Code**aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-335">Under **Visual C#** from the **Installed** pane on the left, select **Code**.</span></span>
3. <span data-ttu-id="33cef-336">Wählen Sie im mittleren Bereich die Option **Klasse**aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-336">From the middle pane, select **Class**.</span></span> <span data-ttu-id="33cef-337">Benennen Sie diese neue Klasse **PayPalFunctions.cs**.</span><span class="sxs-lookup"><span data-stu-id="33cef-337">Name this new class **PayPalFunctions.cs**.</span></span>
4. <span data-ttu-id="33cef-338">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-338">Click **Add**.</span></span>  
   <span data-ttu-id="33cef-339">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-339">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="33cef-340">Ersetzen Sie den Standard Code durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="33cef-340">Replace the default code with the following code:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample12.cs)]
6. <span data-ttu-id="33cef-341">Fügen Sie die Anmelde Informationen für die Händler-API (Benutzername, Kennwort und Signatur) hinzu, die Sie zuvor in diesem Tutorial angezeigt haben, damit Sie Funktionsaufrufe an die PayPal-Testumgebung durchführen können.</span><span class="sxs-lookup"><span data-stu-id="33cef-341">Add the Merchant API credentials (Username, Password, and Signature) that you displayed earlier in this tutorial so that you can make function calls to the PayPal testing environment.</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample13.cs)]

> [!NOTE] 
> 
> <span data-ttu-id="33cef-342">In dieser Beispielanwendung fügen Sie einfach Anmelde Informationen zu einer C# Datei (. cs) hinzu.</span><span class="sxs-lookup"><span data-stu-id="33cef-342">In this sample application you are simply adding credentials to a C# file (.cs).</span></span> <span data-ttu-id="33cef-343">In einer implementierten Lösung sollten Sie jedoch in Erwägung gezogen werden, Ihre Anmelde Informationen in einer Konfigurationsdatei zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="33cef-343">However, in a implemented solution, you should consider encrypting your credentials in a configuration file.</span></span>

<span data-ttu-id="33cef-344">Die nvpapicaller-Klasse enthält die Mehrzahl der PayPal-Funktionen.</span><span class="sxs-lookup"><span data-stu-id="33cef-344">The NVPAPICaller class contains the majority of the PayPal functionality.</span></span> <span data-ttu-id="33cef-345">Der Code in der-Klasse stellt die Methoden bereit, die erforderlich sind, um einen Test Einkauf aus der PayPal-Testumgebung zu tätigen.</span><span class="sxs-lookup"><span data-stu-id="33cef-345">The code in the class provides the methods needed to make a test purchase from the PayPal testing environment.</span></span> <span data-ttu-id="33cef-346">Zum tätigen von Käufen werden die folgenden drei PayPal-Funktionen verwendet:</span><span class="sxs-lookup"><span data-stu-id="33cef-346">The following three PayPal functions are used to make purchases:</span></span>

- <span data-ttu-id="33cef-347">`SetExpressCheckout`-Funktion</span><span class="sxs-lookup"><span data-stu-id="33cef-347">`SetExpressCheckout` function</span></span>
- <span data-ttu-id="33cef-348">`GetExpressCheckoutDetails`-Funktion</span><span class="sxs-lookup"><span data-stu-id="33cef-348">`GetExpressCheckoutDetails` function</span></span>
- <span data-ttu-id="33cef-349">`DoExpressCheckoutPayment`-Funktion</span><span class="sxs-lookup"><span data-stu-id="33cef-349">`DoExpressCheckoutPayment` function</span></span>

<span data-ttu-id="33cef-350">Die `ShortcutExpressCheckout`-Methode sammelt die Test Kauf Informationen und Produktdetails aus dem Warenkorb und ruft die `SetExpressCheckout` PayPal-Funktion auf.</span><span class="sxs-lookup"><span data-stu-id="33cef-350">The `ShortcutExpressCheckout` method collects the test purchase information and product details from the shopping cart and calls the `SetExpressCheckout` PayPal function.</span></span> <span data-ttu-id="33cef-351">Die `GetCheckoutDetails`-Methode bestätigt Kauf Details und ruft die `GetExpressCheckoutDetails` PayPal-Funktion auf, bevor der Test gekauft wird.</span><span class="sxs-lookup"><span data-stu-id="33cef-351">The `GetCheckoutDetails` method confirms purchase details and calls the `GetExpressCheckoutDetails` PayPal function before making the test purchase.</span></span> <span data-ttu-id="33cef-352">Die `DoCheckoutPayment`-Methode schließt den Test Kauf aus der Testumgebung ab, indem die `DoExpressCheckoutPayment` PayPal-Funktion aufgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="33cef-352">The `DoCheckoutPayment` method completes the test purchase from the testing environment by calling the `DoExpressCheckoutPayment` PayPal function.</span></span> <span data-ttu-id="33cef-353">Der verbleibende Code unterstützt die PayPal-Methoden und-Prozesse, z. b. Codieren von Zeichen folgen, Decodieren von Zeichen folgen, Verarbeiten von Arrays und</span><span class="sxs-lookup"><span data-stu-id="33cef-353">The remaining code supports the PayPal methods and process, such as encoding strings, decoding strings, processing arrays, and determining credentials.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="33cef-354">Mithilfe von PayPal können Sie optionale Kauf Details basierend auf [der API-Spezifikation von PayPal](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout)einschließen.</span><span class="sxs-lookup"><span data-stu-id="33cef-354">PayPal allows you to include optional purchase details based on [PayPal's API specification](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&amp;content_ID=developer/e_howto_api_nvp_r_SetExpressCheckout).</span></span> <span data-ttu-id="33cef-355">Indem Sie den Code in der Wingtip Toys-Beispielanwendung erweitern, können Sie Lokalisierungs Details, Produktbeschreibungen, Steuern, eine Kundendienstnummer sowie viele weitere optionale Felder einschließen.</span><span class="sxs-lookup"><span data-stu-id="33cef-355">By extending the code in the Wingtip Toys sample application, you can include localization details, product descriptions, tax, a customer service number, as well as many other optional fields.</span></span>

<span data-ttu-id="33cef-356">Beachten Sie, dass die Rückgabe-und Abbruch-URLs, die in der **shortcutexpresscheckout** -Methode angegeben sind, eine Portnummer verwenden.</span><span class="sxs-lookup"><span data-stu-id="33cef-356">Notice that the return and cancel URLs that are specified in the **ShortcutExpressCheckout** method use a port number.</span></span>

[!code-html[Main](checkout-and-payment-with-paypal/samples/sample14.html)]

<span data-ttu-id="33cef-357">Wenn Visual Web Developer ein Webprojekt mit SSL ausführt, wird in der Regel der Port 44300 für den Webserver verwendet.</span><span class="sxs-lookup"><span data-stu-id="33cef-357">When Visual Web Developer runs a web project using SSL, commonly the port 44300 is used for the web server.</span></span> <span data-ttu-id="33cef-358">Wie oben gezeigt, lautet die Portnummer 44300.</span><span class="sxs-lookup"><span data-stu-id="33cef-358">As shown above, the port number is 44300.</span></span> <span data-ttu-id="33cef-359">Wenn Sie die Anwendung ausführen, wird möglicherweise eine andere Portnummer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-359">When you run the application, you could see a different port number.</span></span> <span data-ttu-id="33cef-360">Die Portnummer muss im Code korrekt festgelegt werden, damit Sie die Wingtip Toys-Beispielanwendung am Ende dieses Tutorials erfolgreich ausführen können.</span><span class="sxs-lookup"><span data-stu-id="33cef-360">Your port number needs to be correctly set in the code so that you can successful run the Wingtip Toys sample application at the end of this tutorial.</span></span> <span data-ttu-id="33cef-361">Im nächsten Abschnitt dieses Tutorials wird erläutert, wie die Portnummer des lokalen Hosts abgerufen und die PayPal-Klasse aktualisiert wird.</span><span class="sxs-lookup"><span data-stu-id="33cef-361">The next section of this tutorial explains how to retrieve the local host port number and update the PayPal class.</span></span>

### <a name="update-the-localhost-port-number-in-the-paypal-class"></a><span data-ttu-id="33cef-362">Aktualisieren der localhost-Port Nummer in der PayPal-Klasse</span><span class="sxs-lookup"><span data-stu-id="33cef-362">Update the LocalHost Port Number in the PayPal Class</span></span>

<span data-ttu-id="33cef-363">Die Wingtip Toys-Beispielanwendung kauft Produkte, indem Sie zur Website für die PayPal-Tests navigieren und Ihre lokale Instanz der Wingtip Toys-Beispielanwendung zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="33cef-363">The Wingtip Toys sample application purchases products by navigating to the PayPal testing site and returning to your local instance of the Wingtip Toys sample application.</span></span> <span data-ttu-id="33cef-364">Damit PayPal zur richtigen URL zurückkehren kann, müssen Sie die Portnummer der lokal laufenden Beispielanwendung in dem oben erwähnten Paypal-Code angeben.</span><span class="sxs-lookup"><span data-stu-id="33cef-364">In order to have PayPal return to the correct URL, you need to specify the port number of the locally running sample application in the PayPal code mentioned above.</span></span>

1. <span data-ttu-id="33cef-365">Klicken Sie in **Projektmappen-Explorer** mit der rechten Maustaste auf den Projektnamen (**wingtiptoys**), und wählen Sie **Eigenschaften**aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-365">Right-click the project name (**WingtipToys**) in **Solution Explorer** and select **Properties**.</span></span>
2. <span data-ttu-id="33cef-366">Wählen Sie in der linken Spalte die Registerkarte **Web** aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-366">In the left column, select the **Web** tab.</span></span>
3. <span data-ttu-id="33cef-367">Rufen Sie die Portnummer aus dem Feld **Projekt-URL** ab.</span><span class="sxs-lookup"><span data-stu-id="33cef-367">Retrieve the port number from the **Project Url** box.</span></span>
4. <span data-ttu-id="33cef-368">Aktualisieren Sie bei Bedarf die `returnURL` und `cancelURL` in der PayPal-Klasse (`NVPAPICaller`) in der *PayPalFunctions.cs* -Datei, um die Portnummer Ihrer Webanwendung zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="33cef-368">If needed, update the `returnURL` and `cancelURL` in the PayPal class (`NVPAPICaller`) in the *PayPalFunctions.cs* file to use the port number of your web application:</span></span>   

    [!code-html[Main](checkout-and-payment-with-paypal/samples/sample15.html?highlight=1-2)]

<span data-ttu-id="33cef-369">Nun entspricht der Code, den Sie hinzugefügt haben, dem erwarteten Port für Ihre lokale Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="33cef-369">Now the code that you added will match the expected port for your local Web application.</span></span> <span data-ttu-id="33cef-370">PayPal kann zur richtigen URL auf dem lokalen Computer zurückkehren.</span><span class="sxs-lookup"><span data-stu-id="33cef-370">PayPal will be able to return to the correct URL on your local machine.</span></span>

### <a name="add-the-paypal-checkout-button"></a><span data-ttu-id="33cef-371">Hinzufügen der PayPal-Schaltfläche</span><span class="sxs-lookup"><span data-stu-id="33cef-371">Add the PayPal Checkout Button</span></span>

<span data-ttu-id="33cef-372">Nachdem der Beispielanwendung die primären PayPal-Funktionen hinzugefügt wurden, können Sie damit beginnen, das Markup und den Code hinzuzufügen, die erforderlich sind, um diese Funktionen aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="33cef-372">Now that the primary PayPal functions have been added to the sample application, you can begin adding the markup and code needed to call these functions.</span></span> <span data-ttu-id="33cef-373">Zuerst müssen Sie die Schaltfläche "Auschecken" hinzufügen, die dem Benutzer auf der Seite "Warenkorb" angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="33cef-373">First, you must add the checkout button that the user will see on the shopping cart page.</span></span>

1. <span data-ttu-id="33cef-374">Öffnen Sie die Datei " *ShoppingCart. aspx* ".</span><span class="sxs-lookup"><span data-stu-id="33cef-374">Open the *ShoppingCart.aspx* file.</span></span>
2. <span data-ttu-id="33cef-375">Scrollen Sie zum Ende der Datei, und suchen Sie den `<!--Checkout Placeholder -->` Kommentar.</span><span class="sxs-lookup"><span data-stu-id="33cef-375">Scroll to the bottom of the file and find the `<!--Checkout Placeholder -->` comment.</span></span>
3. <span data-ttu-id="33cef-376">Ersetzen Sie den Kommentar durch ein `ImageButton`-Steuerelement, sodass die Markierung wie folgt ersetzt wird:</span><span class="sxs-lookup"><span data-stu-id="33cef-376">Replace the comment with an `ImageButton` control so that the mark up is replaced as follows:</span></span>  

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample16.aspx)]
4. <span data-ttu-id="33cef-377">Fügen Sie in der Datei *ShoppingCart.aspx.cs* hinter dem `UpdateBtn_Click`-Ereignishandler in der Nähe des Datei Endes den `CheckOutBtn_Click`-Ereignishandler hinzu:</span><span class="sxs-lookup"><span data-stu-id="33cef-377">In the *ShoppingCart.aspx.cs* file, after the `UpdateBtn_Click` event handler near the end of the file, add the `CheckOutBtn_Click` event handler:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample17.cs)]
5. <span data-ttu-id="33cef-378">Fügen Sie in der Datei *ShoppingCart.aspx.cs* auch einen Verweis auf die `CheckoutBtn`hinzu, damit auf die Schaltfläche Neues Bild wie folgt verwiesen wird:</span><span class="sxs-lookup"><span data-stu-id="33cef-378">Also in the *ShoppingCart.aspx.cs* file, add a reference to the `CheckoutBtn`, so that the new image button is referenced as follows:</span></span>  

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample18.cs?highlight=18)]
6. <span data-ttu-id="33cef-379">Speichern Sie die Änderungen in der Datei " *ShoppingCart. aspx* " und in der Datei " *ShoppingCart.aspx.cs* ".</span><span class="sxs-lookup"><span data-stu-id="33cef-379">Save your changes to both the *ShoppingCart.aspx* file and the *ShoppingCart.aspx.cs* file.</span></span>
7. <span data-ttu-id="33cef-380">Wählen Sie im Menü **Debuggen**-aus, um **wingtiptoys &gt;erstellen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-380">From the menu, select **Debug**-&gt;**Build WingtipToys**.</span></span>  
   <span data-ttu-id="33cef-381">Das Projekt wird mit dem neu hinzugefügten **ImageButton** -Steuerelement neu erstellt.</span><span class="sxs-lookup"><span data-stu-id="33cef-381">The project will be rebuilt with the newly added **ImageButton** control.</span></span>

### <a name="send-purchase-details-to-paypal"></a><span data-ttu-id="33cef-382">Kauf Details an PayPal senden</span><span class="sxs-lookup"><span data-stu-id="33cef-382">Send Purchase Details to PayPal</span></span>

<span data-ttu-id="33cef-383">Wenn der Benutzer auf der Warenkorb-Seite (*ShoppingCart. aspx*) auf **die Schaltfläche** "Auschecken" klickt, beginnt er mit dem Kaufvorgang.</span><span class="sxs-lookup"><span data-stu-id="33cef-383">When the user clicks the **Checkout** button on the shopping cart page (*ShoppingCart.aspx*), they'll begin the purchase process.</span></span> <span data-ttu-id="33cef-384">Der folgende Code Ruft die erste PayPal-Funktion auf, die zum Erwerb von Produkten benötigt wird.</span><span class="sxs-lookup"><span data-stu-id="33cef-384">The following code calls the first PayPal function needed to purchase products.</span></span>

1. <span data-ttu-id="33cef-385">Öffnen Sie im Ordner *Checkout* die Code-Behind-Datei mit dem Namen *CheckoutStart.aspx.cs*.</span><span class="sxs-lookup"><span data-stu-id="33cef-385">From the *Checkout* folder, open the code-behind file named *CheckoutStart.aspx.cs*.</span></span>   
   <span data-ttu-id="33cef-386">Stellen Sie sicher, dass Sie die Code Behind-Datei öffnen.</span><span class="sxs-lookup"><span data-stu-id="33cef-386">Be sure to open the code-behind file.</span></span>
2. <span data-ttu-id="33cef-387">Ersetzen Sie den vorhandenen Code durch folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="33cef-387">Replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample19.cs)]

<span data-ttu-id="33cef-388">Wenn der Benutzer der Anwendung auf der Warenkorb-Seite auf **die Schaltfläche** Auschecken klickt, wird der Browser zur *checkoutstart. aspx* -Seite navigiert.</span><span class="sxs-lookup"><span data-stu-id="33cef-388">When the user of the application clicks the **Checkout** button on the shopping cart page, the browser will navigate to the *CheckoutStart.aspx* page.</span></span> <span data-ttu-id="33cef-389">Wenn die *checkoutstart. aspx* -Seite geladen wird, wird die `ShortcutExpressCheckout`-Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="33cef-389">When the *CheckoutStart.aspx* page loads, the `ShortcutExpressCheckout` method is called.</span></span> <span data-ttu-id="33cef-390">An diesem Punkt wird der Benutzer auf die Website für das PayPal-testen übertragen.</span><span class="sxs-lookup"><span data-stu-id="33cef-390">At this point, the user is transferred to the PayPal testing web site.</span></span> <span data-ttu-id="33cef-391">Auf der Website von PayPal gibt der Benutzer seine PayPal-Anmelde Informationen ein, überprüft die Kauf Details, akzeptiert die PayPal-Vereinbarung und kehrt zur Wingtip Toys-Beispielanwendung zurück, in der die `ShortcutExpressCheckout`-Methode abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="33cef-391">On the PayPal site, the user enters their PayPal credentials, reviews the purchase details, accepts the PayPal agreement and returns to the Wingtip Toys sample application where the `ShortcutExpressCheckout` method completes.</span></span> <span data-ttu-id="33cef-392">Wenn die `ShortcutExpressCheckout`-Methode beendet ist, wird der Benutzer an die in der `ShortcutExpressCheckout`-Methode angegebene *checkeinview. aspx* -Seite umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="33cef-392">When the `ShortcutExpressCheckout` method is complete, it will redirect the user to the *CheckoutReview.aspx* page specified in the `ShortcutExpressCheckout` method.</span></span> <span data-ttu-id="33cef-393">Dadurch kann der Benutzer die Bestelldetails innerhalb der Wingtip Toys-Beispielanwendung überprüfen.</span><span class="sxs-lookup"><span data-stu-id="33cef-393">This allows the user to review the order details from within the Wingtip Toys sample application.</span></span>

### <a name="review-order-details"></a><span data-ttu-id="33cef-394">Bestell Details überprüfen</span><span class="sxs-lookup"><span data-stu-id="33cef-394">Review Order Details</span></span>

<span data-ttu-id="33cef-395">Nach der Rückgabe von PayPal zeigt die Seite *checkstartview. aspx* der Wingtip Toys-Beispielanwendung die Bestelldetails an.</span><span class="sxs-lookup"><span data-stu-id="33cef-395">After returning from PayPal, the *CheckoutReview.aspx* page of the Wingtip Toys sample application displays the order details.</span></span> <span data-ttu-id="33cef-396">Auf dieser Seite kann der Benutzer die Bestelldetails vor dem Erwerb der Produkte überprüfen.</span><span class="sxs-lookup"><span data-stu-id="33cef-396">This page allows the user to review the order details before purchasing the products.</span></span> <span data-ttu-id="33cef-397">Die Seite *checkstartview. aspx* muss wie folgt erstellt werden:</span><span class="sxs-lookup"><span data-stu-id="33cef-397">The *CheckoutReview.aspx* page must be created as follows:</span></span>

1. <span data-ttu-id="33cef-398">Öffnen Sie im Ordner *Checkout* die Seite mit dem Namen *checkeinview. aspx*.</span><span class="sxs-lookup"><span data-stu-id="33cef-398">In the *Checkout* folder, open the page named *CheckoutReview.aspx*.</span></span>
2. <span data-ttu-id="33cef-399">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-399">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample20.aspx)]
3. <span data-ttu-id="33cef-400">Öffnen Sie die Code Behind-Seite mit dem Namen *CheckoutReview.aspx.cs* , und ersetzen Sie den vorhandenen Code durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-400">Open the code-behind page named *CheckoutReview.aspx.cs* and replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample21.cs)]

<span data-ttu-id="33cef-401">Das **DetailsView** -Steuerelement wird zum Anzeigen der Auftragsdetails verwendet, die von PayPal zurückgegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="33cef-401">The **DetailsView** control is used to display the order details that have been returned from PayPal.</span></span> <span data-ttu-id="33cef-402">Der obige Code speichert außerdem die Bestelldetails in der Wingtip Toys-Datenbank als `OrderDetail` Objekt.</span><span class="sxs-lookup"><span data-stu-id="33cef-402">Also, the above code saves the order details to the Wingtip Toys database as an `OrderDetail` object.</span></span> <span data-ttu-id="33cef-403">Wenn der Benutzer auf die Schaltfläche " **Bestellung vervollständigen** " klickt, wird er auf die Seite *checkoutcomplete. aspx* umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="33cef-403">When the user clicks on the **Complete Order** button, they are redirected to the *CheckoutComplete.aspx* page.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="33cef-404">**PP**</span><span class="sxs-lookup"><span data-stu-id="33cef-404">**Tip**</span></span>
> 
> <span data-ttu-id="33cef-405">Beachten Sie im Markup der Seite *checkstartview. aspx* , dass das `<ItemStyle>`-Tag verwendet wird, um den Stil der Elemente innerhalb des **DetailsView** -Steuer Elements am unteren Rand der Seite zu ändern.</span><span class="sxs-lookup"><span data-stu-id="33cef-405">In the markup of the *CheckoutReview.aspx* page, notice that the `<ItemStyle>` tag is used to change the style of the items within the **DetailsView** control near the bottom of the page.</span></span> <span data-ttu-id="33cef-406">Wenn Sie die Seite in der **Entwurfs Ansicht** anzeigen (indem Sie in der unteren linken Ecke von Visual Studio die Option **Entwurf** auswählen), dann das **DetailsView** -Steuerelement auswählen und das **Smarttag** (das Pfeilsymbol oben rechts im Steuerelement) auswählen, können Sie die **DetailsView-Aufgaben**sehen.</span><span class="sxs-lookup"><span data-stu-id="33cef-406">By viewing the page in **Design View** (by selecting **Design** at the lower left corner of Visual Studio), then selecting the **DetailsView** control, and selecting the **Smart Tag** (the arrow icon at the top right of the control), you will be able to see the **DetailsView Tasks**.</span></span>
> 
> ![Auschecken und bezahlen mit PayPal-Bearbeitungs Feldern](checkout-and-payment-with-paypal/_static/image18.png)
> 
> <span data-ttu-id="33cef-408">Wenn Sie **Felder bearbeiten**auswählen, wird das Dialogfeld **Felder** angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-408">By selecting **Edit Fields**, the **Fields** dialog box will appear.</span></span> <span data-ttu-id="33cef-409">In diesem Dialogfeld können Sie die visuellen Eigenschaften, z. b. **ItemStyle**, des **DetailsView** -Steuer Elements leicht steuern.</span><span class="sxs-lookup"><span data-stu-id="33cef-409">In this dialog box you can easily control the visual properties, such as **ItemStyle**, of the **DetailsView** control.</span></span>
> 
> ![Dialog Feld "Auschecken und bezahlen mit PayPal-Fields](checkout-and-payment-with-paypal/_static/image19.png)

### <a name="complete-purchase"></a><span data-ttu-id="33cef-411">Abschluss des Kaufs</span><span class="sxs-lookup"><span data-stu-id="33cef-411">Complete Purchase</span></span>

<span data-ttu-id="33cef-412">Die Seite *checkoutcomplete. aspx* macht den Kauf von PayPal.</span><span class="sxs-lookup"><span data-stu-id="33cef-412">*CheckoutComplete.aspx* page makes the purchase from PayPal.</span></span> <span data-ttu-id="33cef-413">Wie bereits erwähnt, muss der Benutzer auf die Schaltfläche " **Bestellung vervollständigen** " klicken, bevor die Anwendung zur *checkoutcomplete. aspx* -Seite navigiert.</span><span class="sxs-lookup"><span data-stu-id="33cef-413">As mentioned above, the user must click on the **Complete Order** button before the application will navigate to the *CheckoutComplete.aspx* page.</span></span>

1. <span data-ttu-id="33cef-414">Öffnen Sie im Ordner *Checkout* die Seite *checkoutcomplete. aspx*.</span><span class="sxs-lookup"><span data-stu-id="33cef-414">In the *Checkout* folder, open the page named *CheckoutComplete.aspx*.</span></span>
2. <span data-ttu-id="33cef-415">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-415">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample22.aspx)]
3. <span data-ttu-id="33cef-416">Öffnen Sie die Code Behind-Seite mit dem Namen *CheckoutComplete.aspx.cs* , und ersetzen Sie den vorhandenen Code durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-416">Open the code-behind page named *CheckoutComplete.aspx.cs* and replace the existing code with the following:</span></span>   

    [!code-csharp[Main](checkout-and-payment-with-paypal/samples/sample23.cs)]

<span data-ttu-id="33cef-417">Wenn die Seite *checkoutcomplete. aspx* geladen wird, wird die `DoCheckoutPayment`-Methode aufgerufen.</span><span class="sxs-lookup"><span data-stu-id="33cef-417">When the *CheckoutComplete.aspx* page is loaded, the `DoCheckoutPayment` method is called.</span></span> <span data-ttu-id="33cef-418">Wie bereits erwähnt, schließt die `DoCheckoutPayment`-Methode den Kauf aus der PayPal-Testumgebung ab.</span><span class="sxs-lookup"><span data-stu-id="33cef-418">As mentioned earlier, the `DoCheckoutPayment` method completes the purchase from the PayPal testing environment.</span></span> <span data-ttu-id="33cef-419">Nachdem PayPal den Kauf der Bestellung abgeschlossen hat, wird auf der Seite *checkoutcomplete. aspx* eine Zahlungs Transaktion `ID` dem Käufer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-419">Once PayPal has completed the purchase of the order, the *CheckoutComplete.aspx* page displays a payment transaction `ID` to the purchaser.</span></span>

### <a name="handle-cancel-purchase"></a><span data-ttu-id="33cef-420">Handle beim Abbruch beenden</span><span class="sxs-lookup"><span data-stu-id="33cef-420">Handle Cancel Purchase</span></span>

<span data-ttu-id="33cef-421">Wenn der Benutzer entscheidet, den Kauf abzubrechen, wird er an die Seite *checkoutcancel. aspx* weitergeleitet, auf der Sie sehen, dass die Bestellung abgebrochen wurde.</span><span class="sxs-lookup"><span data-stu-id="33cef-421">If the user decides to cancel the purchase, they will be directed to the *CheckoutCancel.aspx* page where they will see that their order has been cancelled.</span></span>

1. <span data-ttu-id="33cef-422">Öffnen Sie im Ordner *Checkout* die Seite *checkoutcancel. aspx* .</span><span class="sxs-lookup"><span data-stu-id="33cef-422">Open the page named *CheckoutCancel.aspx* in the *Checkout* folder.</span></span>
2. <span data-ttu-id="33cef-423">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-423">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample24.aspx)]

### <a name="handle-purchase-errors"></a><span data-ttu-id="33cef-424">Behandeln von Kauf Fehlern</span><span class="sxs-lookup"><span data-stu-id="33cef-424">Handle Purchase Errors</span></span>

<span data-ttu-id="33cef-425">Fehler während des Kaufvorgangs werden von der Seite *checkouterror. aspx* verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="33cef-425">Errors during the purchase process will be handled by the *CheckoutError.aspx* page.</span></span> <span data-ttu-id="33cef-426">Der Code Behind der Seite *checkoutstart. aspx* , der Seite *checkoutview. aspx* und der Seite *checkoutcomplete. aspx* werden bei einem Fehler an die Seite *checkouterror. aspx* umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="33cef-426">The code-behind of the *CheckoutStart.aspx* page, the *CheckoutReview.aspx* page, and the *CheckoutComplete.aspx* page will each redirect to the *CheckoutError.aspx* page if an error occurs.</span></span>

1. <span data-ttu-id="33cef-427">Öffnen Sie die Seite mit dem Namen *checkouterror. aspx* im Ordner *Checkout* .</span><span class="sxs-lookup"><span data-stu-id="33cef-427">Open the page named *CheckoutError.aspx* in the *Checkout* folder.</span></span>
2. <span data-ttu-id="33cef-428">Ersetzen Sie das vorhandene Markup durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="33cef-428">Replace the existing markup with the following:</span></span>   

    [!code-aspx[Main](checkout-and-payment-with-paypal/samples/sample25.aspx)]

<span data-ttu-id="33cef-429">Die Seite *checkouterror. aspx* wird mit den Fehlerdetails angezeigt, wenn während des Auscheck Vorgangs ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="33cef-429">The *CheckoutError.aspx* page is displayed with the error details when an error occurs during the checkout process.</span></span>

## <a name="running-the-application"></a><span data-ttu-id="33cef-430">Ausführen der Anwendung</span><span class="sxs-lookup"><span data-stu-id="33cef-430">Running the Application</span></span>

<span data-ttu-id="33cef-431">Führen Sie die Anwendung aus, um zu sehen, wie Produkte gekauft werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-431">Run the application to see how to purchase products.</span></span> <span data-ttu-id="33cef-432">Beachten Sie, dass Sie in der PayPal-Testumgebung ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-432">Note that you will be running in the PayPal testing environment.</span></span> <span data-ttu-id="33cef-433">Es wird kein tatsächliches Geld ausgetauscht.</span><span class="sxs-lookup"><span data-stu-id="33cef-433">No actual money is being exchanged.</span></span>

1. <span data-ttu-id="33cef-434">Stellen Sie sicher, dass alle Dateien in Visual Studio gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="33cef-434">Make sure all your files are saved in Visual Studio.</span></span>
2. <span data-ttu-id="33cef-435">Öffnen Sie einen Webbrowser, und navigieren Sie zu [https://developer.paypal.com](https://developer.paypal.com/).</span><span class="sxs-lookup"><span data-stu-id="33cef-435">Open a Web browser and navigate to [https://developer.paypal.com](https://developer.paypal.com/).</span></span>
3. <span data-ttu-id="33cef-436">Melden Sie sich mit Ihrem PayPal-Entwicklerkonto an, das Sie zuvor in diesem Tutorial erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-436">Login with your PayPal developer account that you created earlier in this tutorial.</span></span>  
   <span data-ttu-id="33cef-437">Für die Developer Sandbox von PayPal müssen Sie bei [https://developer.paypal.com](https://developer.paypal.com/) angemeldet sein, um Express Checkout testen zu können.</span><span class="sxs-lookup"><span data-stu-id="33cef-437">For PayPal's developer sandbox, you need to be logged in at [https://developer.paypal.com](https://developer.paypal.com/) to test express checkout.</span></span> <span data-ttu-id="33cef-438">Dies gilt nur für Sandbox-Tests von PayPal, nicht für die-Live Umgebung von PayPal.</span><span class="sxs-lookup"><span data-stu-id="33cef-438">This only applies to PayPal's sandbox testing, not to PayPal's live environment.</span></span>
4. <span data-ttu-id="33cef-439">Drücken Sie in Visual Studio die **Taste F5** , um die Beispielanwendung Wingtip Toys auszuführen.</span><span class="sxs-lookup"><span data-stu-id="33cef-439">In Visual Studio, press **F5** to run the Wingtip Toys sample application.</span></span>  
   <span data-ttu-id="33cef-440">Nachdem die Datenbank neu erstellt wurde, wird der Browser geöffnet und zeigt die Seite *default. aspx* an.</span><span class="sxs-lookup"><span data-stu-id="33cef-440">After the database rebuilds, the browser will open and show the *Default.aspx* page.</span></span>
5. <span data-ttu-id="33cef-441">Fügen Sie dem Warenkorb drei verschiedene Produkte hinzu, indem Sie die Produktkategorie auswählen, z. b. "Auto", und klicken Sie dann neben jedem Produkt **auf zum Warenkorb hinzufügen** .</span><span class="sxs-lookup"><span data-stu-id="33cef-441">Add three different products to the shopping cart by selecting the product category, such as "Cars" and then clicking **Add to Cart** next to each product.</span></span>  
   <span data-ttu-id="33cef-442">Der Warenkorb zeigt das Produkt an, das Sie ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-442">The shopping cart will display the product you have selected.</span></span>
6. <span data-ttu-id="33cef-443">Klicken Sie zum Auschecken auf die Schaltfläche **PayPal** .</span><span class="sxs-lookup"><span data-stu-id="33cef-443">Click the **PayPal** button to checkout.</span></span> 

    ![Auschecken und bezahlen mit PayPal-Cart](checkout-and-payment-with-paypal/_static/image20.png)

   <span data-ttu-id="33cef-445">Das Auschecken erfordert, dass Sie über ein Benutzerkonto für die Wingtip Toys-Beispielanwendung verfügen.</span><span class="sxs-lookup"><span data-stu-id="33cef-445">Checking out will require that you have a user account for the Wingtip Toys sample application.</span></span>
7. <span data-ttu-id="33cef-446">Klicken Sie rechts auf der Seite auf den Link **Google** , um sich mit einem vorhandenen gmail.com-e-Mail-Konto anzumelden.</span><span class="sxs-lookup"><span data-stu-id="33cef-446">Click the **Google** link on the right of the page to log in with an existing gmail.com email account.</span></span>  
   <span data-ttu-id="33cef-447">Wenn Sie nicht über ein gmail.com-Konto verfügen, können Sie es für Testzwecke unter [www.gmail.com](https://www.gmail.com/)erstellen.</span><span class="sxs-lookup"><span data-stu-id="33cef-447">If you do not have a gmail.com account, you can create one for testing purposes at [www.gmail.com](https://www.gmail.com/).</span></span> <span data-ttu-id="33cef-448">Sie können auch ein lokales Standardkonto verwenden, indem Sie auf "registrieren" klicken.</span><span class="sxs-lookup"><span data-stu-id="33cef-448">You can also use a standard local account by clicking "Register".</span></span> 

    ![Auschecken und bezahlen mit PayPal-Log in](checkout-and-payment-with-paypal/_static/image21.png)
8. <span data-ttu-id="33cef-450">Melden Sie sich mit Ihrem Gmail-Konto und-Kennwort an.</span><span class="sxs-lookup"><span data-stu-id="33cef-450">Sign in with your gmail account and password.</span></span> 

    ![Auschecken und bezahlen mit der PayPal-Gmail-Anmeldung](checkout-and-payment-with-paypal/_static/image22.png)
9. <span data-ttu-id="33cef-452">Klicken Sie auf die Schaltfläche **Anmelden** , um Ihr Gmail-Konto mit dem Benutzernamen ihrer Wingtip Toys-Beispielanwendung zu registrieren.</span><span class="sxs-lookup"><span data-stu-id="33cef-452">Click the **Log in** button to register your gmail account with your Wingtip Toys sample application user name.</span></span> 

    ![Auschecken und bezahlen mit einem PayPal-Register Konto](checkout-and-payment-with-paypal/_static/image23.png)
10. <span data-ttu-id="33cef-454">Fügen Sie auf der Website "Paypal-Test" Ihre e-Mail-Adresse und das Kennwort **für den** **Käufer** ein, die Sie zuvor in diesem Tutorial erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-454">On the PayPal test site, add your **buyer** email address and password that you created earlier in this tutorial, then click the **Log In** button.</span></span> 

    ![Auschecken und bezahlen mit der PayPal-PayPal-Anmeldung](checkout-and-payment-with-paypal/_static/image24.png)
11. <span data-ttu-id="33cef-456">Stimmen Sie der PayPal-Richtlinie zu, und klicken Sie auf die Schaltfläche **zustimmen**</span><span class="sxs-lookup"><span data-stu-id="33cef-456">Agree to the PayPal policy and click the **Agree and Continue** button.</span></span>  
    <span data-ttu-id="33cef-457">Beachten Sie, dass diese Seite nur angezeigt wird, wenn Sie dieses PayPal-Konto zum ersten Mal verwenden.</span><span class="sxs-lookup"><span data-stu-id="33cef-457">Note that this page is only displayed the first time you use this PayPal account.</span></span> <span data-ttu-id="33cef-458">Beachten Sie, dass es sich hierbei um ein Testkonto handelt. es werden keine echten Kosten ausgetauscht.</span><span class="sxs-lookup"><span data-stu-id="33cef-458">Again note that this is a test account, no real money is exchanged.</span></span> 

    ![Auschecken und bezahlen mit PayPal-PayPal-Richtlinie](checkout-and-payment-with-paypal/_static/image25.png)
12. <span data-ttu-id="33cef-460">Überprüfen Sie die Bestellinformationen auf der Überprüfungs Seite der PayPal-Testumgebung, und klicken Sie auf **weiter**.</span><span class="sxs-lookup"><span data-stu-id="33cef-460">Review the order information on the PayPal testing environment review page and click **Continue**.</span></span> 

    ![Auschecken und bezahlen mit PayPal-Review-Informationen](checkout-and-payment-with-paypal/_static/image26.png)
13. <span data-ttu-id="33cef-462">Überprüfen Sie auf der Seite *checkstartview. aspx* den Bestellbetrag, und zeigen Sie die generierte Lieferadresse an.</span><span class="sxs-lookup"><span data-stu-id="33cef-462">On the *CheckoutReview.aspx* page, verify the order amount and view the generated shipping address.</span></span> <span data-ttu-id="33cef-463">Klicken Sie dann auf die Schaltfläche **Bestellung vervollständigen** .</span><span class="sxs-lookup"><span data-stu-id="33cef-463">Then, click the **Complete Order** button.</span></span> 

    ![Auschecken und bezahlen mit der PayPal-Bestell Überprüfung](checkout-and-payment-with-paypal/_static/image27.png)
14. <span data-ttu-id="33cef-465">Die Seite **checkoutcomplete. aspx** wird mit einer Zahlungs Transaktions-ID angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-465">The **CheckoutComplete.aspx** page is displayed with a payment transaction ID.</span></span> 

    ![Auschecken und Zahlung mit PayPal-Checkout fertiggestellt](checkout-and-payment-with-paypal/_static/image28.png)

<a id="ReviewDBWebForms"></a>
## <a name="reviewing-the-database"></a><span data-ttu-id="33cef-467">Überprüfen der Datenbank</span><span class="sxs-lookup"><span data-stu-id="33cef-467">Reviewing the Database</span></span>

<span data-ttu-id="33cef-468">Wenn Sie die aktualisierten Daten in der Wingtip Toys-Beispiel Anwendungsdatenbank nach dem Ausführen der Anwendung überprüfen, können Sie sehen, dass die Anwendung den Kauf der Produkte erfolgreich aufgezeichnet hat.</span><span class="sxs-lookup"><span data-stu-id="33cef-468">By reviewing the updated data in the Wingtip Toys sample application database after running the application, you can see that the application successfully recorded the purchase of the products.</span></span>

<span data-ttu-id="33cef-469">Sie können die Daten in der Datenbankdatei *wingtiptoys. mdf* überprüfen, indem Sie das Fenster **Datenbank-Explorer** (**Server-Explorer** Fenster in Visual Studio) wie zuvor in dieser tutorialreihe verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="33cef-469">You can inspect the data contained in the *Wingtiptoys.mdf* database file by using the **Database Explorer** window (**Server Explorer** window in Visual Studio) as you did earlier in this tutorial series.</span></span>

1. <span data-ttu-id="33cef-470">Schließen Sie das Browserfenster, wenn es noch geöffnet ist.</span><span class="sxs-lookup"><span data-stu-id="33cef-470">Close the browser window if it is still open.</span></span>
2. <span data-ttu-id="33cef-471">Wählen Sie in Visual Studio das Symbol **alle Dateien anzeigen** oben in **Projektmappen-Explorer** aus, damit Sie den Ordner **App\_Data** erweitern können.</span><span class="sxs-lookup"><span data-stu-id="33cef-471">In Visual Studio, select the **Show All Files** icon at the top of **Solution Explorer** to allow you to expand the **App\_Data** folder.</span></span>
3. <span data-ttu-id="33cef-472">Erweitern Sie den Ordner **App\_Data** .</span><span class="sxs-lookup"><span data-stu-id="33cef-472">Expand the **App\_Data** folder.</span></span>  
 <span data-ttu-id="33cef-473">Möglicherweise müssen Sie das Symbol **alle Dateien anzeigen** für den Ordner auswählen.</span><span class="sxs-lookup"><span data-stu-id="33cef-473">You may need to select the **Show All Files** icon for the folder.</span></span>
4. <span data-ttu-id="33cef-474">Klicken Sie mit der rechten Maustaste auf die Datenbankdatei *wingtiptoys. mdf* , und wählen Sie **Öffnen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-474">Right-click the *Wingtiptoys.mdf* database file and select **Open**.</span></span>  
    <span data-ttu-id="33cef-475">**Server-Explorer** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-475">**Server Explorer** is displayed.</span></span>
5. <span data-ttu-id="33cef-476">Erweitern Sie den Ordner **Tabellen** .</span><span class="sxs-lookup"><span data-stu-id="33cef-476">Expand the **Tables** folder.</span></span>
6. <span data-ttu-id="33cef-477">Klicken Sie mit der rechten Maustaste auf die Tabelle **Orders**, und wählen Sie **Tabellendaten anzeigen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-477">Right-click the **Orders**table and select **Show Table Data**.</span></span>  
 <span data-ttu-id="33cef-478">Die Tabelle **Orders** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="33cef-478">The **Orders** table is displayed.</span></span>
7. <span data-ttu-id="33cef-479">Überprüfen Sie die Spalte " **paymenttransaktionid** ", um erfolgreiche Transaktionen zu bestätigen.</span><span class="sxs-lookup"><span data-stu-id="33cef-479">Review the **PaymentTransactionID** column to confirm successful transactions.</span></span> 

    ![Auschecken und bezahlen mit der PayPal-Review-Datenbank](checkout-and-payment-with-paypal/_static/image29.png)
8. <span data-ttu-id="33cef-481">Schließen Sie das Tabellenfenster **Orders** .</span><span class="sxs-lookup"><span data-stu-id="33cef-481">Close the **Orders** table window.</span></span>
9. <span data-ttu-id="33cef-482">Klicken Sie im Server-Explorer mit der rechten Maustaste auf die Tabelle **Order Details** , und wählen Sie **Tabellendaten anzeigen**aus.</span><span class="sxs-lookup"><span data-stu-id="33cef-482">In the Server Explorer, right-click the **OrderDetails** table and select **Show Table Data**.</span></span>
10. <span data-ttu-id="33cef-483">Überprüfen Sie die Werte für `OrderId` und `Username` in der Tabelle **Order Details** .</span><span class="sxs-lookup"><span data-stu-id="33cef-483">Review the `OrderId` and `Username` values in the **OrderDetails** table.</span></span> <span data-ttu-id="33cef-484">Beachten Sie, dass diese Werte den Werten für `OrderId` und `Username` entsprechen, die in der Tabelle **Orders** enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="33cef-484">Note that these values match the `OrderId` and `Username` values included in the **Orders** table.</span></span>
11. <span data-ttu-id="33cef-485">Schließen Sie das Fenster **Order Details** Table.</span><span class="sxs-lookup"><span data-stu-id="33cef-485">Close the **OrderDetails** table window.</span></span>
12. <span data-ttu-id="33cef-486">Klicken Sie mit der rechten Maustaste auf die Wingtip Toys-Datenbankdatei (*wingtiptoys. mdf*), und wählen Sie **Verbindung schließen**.</span><span class="sxs-lookup"><span data-stu-id="33cef-486">Right-click the Wingtip Toys database file (*Wingtiptoys.mdf*) and select **Close Connection**.</span></span>
13. <span data-ttu-id="33cef-487">Wenn das **Projektmappen-Explorer** Fenster nicht angezeigt wird, klicken Sie unten im **Server-Explorer** Fenster auf **Projektmappen-Explorer** , um die **Projektmappen-Explorer** erneut anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="33cef-487">If you do not see the **Solution Explorer** window, click **Solution Explorer** at the bottom of the **Server Explorer** window to show the **Solution Explorer** again.</span></span>

## <a name="summary"></a><span data-ttu-id="33cef-488">Summary</span><span class="sxs-lookup"><span data-stu-id="33cef-488">Summary</span></span>

<span data-ttu-id="33cef-489">In diesem Tutorial haben Sie Auftrags-und Bestell Detail Schemas hinzugefügt, um den Kauf von Produkten zu verfolgen.</span><span class="sxs-lookup"><span data-stu-id="33cef-489">In this tutorial you added order and order detail schemas to track the purchase of products.</span></span> <span data-ttu-id="33cef-490">Außerdem haben Sie die PayPal-Funktionalität in die Wingtip Toys-Beispielanwendung integriert.</span><span class="sxs-lookup"><span data-stu-id="33cef-490">You also integrated PayPal functionality into the Wingtip Toys sample application.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="33cef-491">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="33cef-491">Additional Resources</span></span>

<span data-ttu-id="33cef-492">[ASP.NET Konfiguration (Übersicht)](https://msdn.microsoft.com/library/ms178683(v=vs.100).aspx)</span><span class="sxs-lookup"><span data-stu-id="33cef-492">[ASP.NET Configuration Overview](https://msdn.microsoft.com/library/ms178683(v=vs.100).aspx)</span></span>  
[<span data-ttu-id="33cef-493">Stellen Sie eine sichere ASP.net Web Forms-App mit Mitgliedschaft, OAuth und SQL-Datenbank bereit, um Azure App Service</span><span class="sxs-lookup"><span data-stu-id="33cef-493">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="33cef-494">Kostenlose Testversion Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="33cef-494">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

## <a name="disclaimer"></a><span data-ttu-id="33cef-495">Haftungsausschluss</span><span class="sxs-lookup"><span data-stu-id="33cef-495">Disclaimer</span></span>

<span data-ttu-id="33cef-496">Dieses Tutorial enthält Beispielcode.</span><span class="sxs-lookup"><span data-stu-id="33cef-496">This tutorial contains sample code.</span></span> <span data-ttu-id="33cef-497">Dieser Beispielcode wird "wie immer" ohne jegliche Gewährleistung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="33cef-497">Such sample code is provided "as is" without warranty of any kind.</span></span> <span data-ttu-id="33cef-498">Dementsprechend garantiert Microsoft nicht die Genauigkeit, Integrität oder Qualität des Beispielcodes.</span><span class="sxs-lookup"><span data-stu-id="33cef-498">Accordingly, Microsoft does not guarantee the accuracy, integrity, or quality of the sample code.</span></span> <span data-ttu-id="33cef-499">Sie erklären sich damit einverstanden, den Beispielcode auf eigene Gefahr zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="33cef-499">You agree to use the sample code at your own risk.</span></span> <span data-ttu-id="33cef-500">Unter keinen Umständen ist Microsoft für Sie in irgendeiner Weise für den Beispielcode, Inhalte, einschließlich, aber nicht beschränkt auf Fehler oder Ausfälle in beliebigen Beispielcodes, Inhalten oder jeglichen Verlusten oder Schäden jeglicher Art, die durch die Verwendung von Beispielcode verursacht werden.</span><span class="sxs-lookup"><span data-stu-id="33cef-500">Under no circumstances will Microsoft be liable to you in any way for any sample code, content, including but not limited to, any errors or omissions in any sample code, content, or any loss or damage of any kind incurred as a result of the use of any sample code.</span></span> <span data-ttu-id="33cef-501">Sie werden benachrichtigt und erklären sich damit einverstanden, dass Microsoft vor und nach dem Verlust, dem Verlust, dem Verlust oder der Beschädigung jeglicher Art und ohne Einschränkung, die von Ihnen oder von Ihnen bereitgestellten Materialien verursacht wurden, nicht sicher ist. Verwenden Sie die in diesem Beispiel enthaltenen Sichten, um Sie zu übertragen, zu verwenden oder zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="33cef-501">You are hereby notified and do hereby agree to indemnify, save and hold Microsoft harmless from and against any and all loss, claims of loss, injury or damage of any kind including, without limitation, those occasioned by or arising from material that you post, transmit, use or rely on including, but not limited to, the views expressed therein.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="33cef-502">[Zurück](shopping-cart.md)
> [Weiter](membership-and-administration.md)</span><span class="sxs-lookup"><span data-stu-id="33cef-502">[Previous](shopping-cart.md)
[Next](membership-and-administration.md)</span></span>
