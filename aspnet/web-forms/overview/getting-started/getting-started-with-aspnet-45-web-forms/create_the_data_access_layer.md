---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer
title: Erstellen der Datenzugriffs Ebene | Microsoft-Dokumentation
author: Erikre
description: Diese tutorialreihe vermittelt Ihnen die Grundlagen zum Entwickeln einer ASP.net Web Forms Anwendung mit ASP.NET 4,5 und Microsoft Visual Studio Express 2013 für wir...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 0bbf7a6e-d7eb-4091-91e4-fff892777f32
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/create_the_data_access_layer
msc.type: authoredcontent
ms.openlocfilehash: 0fcf050474a57be9ed53ec0783a6d6b7dde2bf4c
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2019
ms.locfileid: "74575750"
---
# <a name="create-the-data-access-layer"></a><span data-ttu-id="19ac3-103">Erstellen der Datenzugriffsschicht</span><span class="sxs-lookup"><span data-stu-id="19ac3-103">Create the Data Access Layer</span></span>

<span data-ttu-id="19ac3-104">von [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="19ac3-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="19ac3-105">[Herunterladen eines Wingtip Toys-C#Beispielprojekts ()](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) oder [Herunterladen von E-Book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="19ac3-105">[Download Wingtip Toys Sample Project (C#)](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](https://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="19ac3-106">Diese tutorialreihe vermittelt Ihnen die Grundlagen der Entwicklung einer ASP.net Web Forms-Anwendung mit ASP.NET 4,5 und Microsoft Visual Studio Express 2013 für das Web.</span><span class="sxs-lookup"><span data-stu-id="19ac3-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="19ac3-107">Für diese tutorialreihe steht ein Visual Studio 2013- [Projekt mit C# Quellcode](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) zur Verfügung.</span><span class="sxs-lookup"><span data-stu-id="19ac3-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>

<span data-ttu-id="19ac3-108">In diesem Tutorial wird das Erstellen, zugreifen auf und Überprüfen von Daten aus einer Datenbank mithilfe von ASP.net Web Forms und Entity Framework Code First beschrieben.</span><span class="sxs-lookup"><span data-stu-id="19ac3-108">This tutorial describes how to create, access, and review data from a database using ASP.NET Web Forms and Entity Framework Code First.</span></span> <span data-ttu-id="19ac3-109">Dieses Tutorial baut auf dem vorherigen Tutorial "Erstellen des Projekts" auf und ist Teil der Wingtip Toy Store-tutorialreihe.</span><span class="sxs-lookup"><span data-stu-id="19ac3-109">This tutorial builds on the previous tutorial "Create the Project" and is part of the Wingtip Toy Store tutorial series.</span></span> <span data-ttu-id="19ac3-110">Wenn Sie dieses Tutorial abgeschlossen haben, haben Sie eine Gruppe von Datenzugriffsklassen erstellt, die sich im Ordner " *Models* " des Projekts befinden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-110">When you've completed this tutorial, you will have built a group of data-access classes that are in the *Models* folder of the project.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="19ac3-111">Lernen Sie Folgendes:</span><span class="sxs-lookup"><span data-stu-id="19ac3-111">What you'll learn:</span></span>

- <span data-ttu-id="19ac3-112">Erstellen der Datenmodelle.</span><span class="sxs-lookup"><span data-stu-id="19ac3-112">How to create the data models.</span></span>
- <span data-ttu-id="19ac3-113">Initialisieren und Seed der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="19ac3-113">How to initialize and seed the database.</span></span>
- <span data-ttu-id="19ac3-114">Aktualisieren und Konfigurieren der Anwendung zur Unterstützung der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="19ac3-114">How to update and configure the application to support the database.</span></span>

### <a name="these-are-the-features-introduced-in-the-tutorial"></a><span data-ttu-id="19ac3-115">Dies sind die im Tutorial eingeführten Features:</span><span class="sxs-lookup"><span data-stu-id="19ac3-115">These are the features introduced in the tutorial:</span></span>

- <span data-ttu-id="19ac3-116">Entity Framework Code First</span><span class="sxs-lookup"><span data-stu-id="19ac3-116">Entity Framework Code First</span></span>
- <span data-ttu-id="19ac3-117">LocalDB</span><span class="sxs-lookup"><span data-stu-id="19ac3-117">LocalDB</span></span>
- <span data-ttu-id="19ac3-118">Datenanmerkungen</span><span class="sxs-lookup"><span data-stu-id="19ac3-118">Data Annotations</span></span>

## <a name="creating-the-data-models"></a><span data-ttu-id="19ac3-119">Erstellen der Datenmodelle</span><span class="sxs-lookup"><span data-stu-id="19ac3-119">Creating the Data Models</span></span>

<span data-ttu-id="19ac3-120">[Entity Framework](https://msdn.microsoft.com/data/aa937723) ist ein ORM-Framework (Object-Relational Mapping).</span><span class="sxs-lookup"><span data-stu-id="19ac3-120">[Entity Framework](https://msdn.microsoft.com/data/aa937723) is an object-relational mapping (ORM) framework.</span></span> <span data-ttu-id="19ac3-121">Sie können mit relationalen Daten als Objekte arbeiten und den größten Teil des Datenzugriffs Codes eliminieren, den Sie normalerweise schreiben müssen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-121">It lets you work with relational data as objects, eliminating most of the data-access code that you'd usually need to write.</span></span> <span data-ttu-id="19ac3-122">Mithilfe Entity Framework können Sie Abfragen mithilfe von [LINQ](https://msdn.microsoft.com/library/bb397926.aspx)ausgeben und Daten dann als stark typisierte Objekte abrufen und bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="19ac3-122">Using Entity Framework, you can issue queries using [LINQ](https://msdn.microsoft.com/library/bb397926.aspx), then retrieve and manipulate data as strongly typed objects.</span></span> <span data-ttu-id="19ac3-123">LINQ stellt Muster zum Abfragen und Aktualisieren von Daten bereit.</span><span class="sxs-lookup"><span data-stu-id="19ac3-123">LINQ provides patterns for querying and updating data.</span></span> <span data-ttu-id="19ac3-124">Wenn Sie Entity Framework verwenden, können Sie sich auf das Erstellen der restlichen Anwendung konzentrieren, anstatt sich auf die Grundlagen des Datenzugriffs zu konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="19ac3-124">Using Entity Framework allows you to focus on creating the rest of your application, rather than focusing on the data access fundamentals.</span></span> <span data-ttu-id="19ac3-125">Später in dieser tutorialreihe erfahren Sie, wie die Daten zum Auffüllen von Navigations-und Produkt Abfragen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-125">Later in this tutorial series, we'll show you how to use the data to populate navigation and product queries.</span></span>

<span data-ttu-id="19ac3-126">Entity Framework unterstützt ein Entwicklungsparadigma namens *Code First*.</span><span class="sxs-lookup"><span data-stu-id="19ac3-126">Entity Framework supports a development paradigm called *Code First*.</span></span> <span data-ttu-id="19ac3-127">Mit Code First können Sie die Datenmodelle mithilfe von Klassen definieren.</span><span class="sxs-lookup"><span data-stu-id="19ac3-127">Code First lets you define your data models using classes.</span></span> <span data-ttu-id="19ac3-128">Eine Klasse ist ein Konstrukt, mit dem Sie eigene benutzerdefinierte Typen erstellen können, indem Sie Variablen anderer Typen, Methoden und Ereignisse gruppieren.</span><span class="sxs-lookup"><span data-stu-id="19ac3-128">A class is a construct that enables you to create your own custom types by grouping together variables of other types, methods and events.</span></span> <span data-ttu-id="19ac3-129">Sie können Klassen einer vorhandenen Datenbank zuordnen oder Sie verwenden, um eine Datenbank zu generieren.</span><span class="sxs-lookup"><span data-stu-id="19ac3-129">You can map classes to an existing database or use them to generate a database.</span></span> <span data-ttu-id="19ac3-130">In diesem Tutorial erstellen Sie die Datenmodelle, indem Sie Datenmodell Klassen schreiben.</span><span class="sxs-lookup"><span data-stu-id="19ac3-130">In this tutorial, you'll create the data models by writing data model classes.</span></span> <span data-ttu-id="19ac3-131">Anschließend können Sie Entity Framework die Datenbank dynamisch aus diesen neuen Klassen erstellen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-131">Then, you'll let Entity Framework create the database on the fly from these new classes.</span></span>

<span data-ttu-id="19ac3-132">Zunächst erstellen Sie die Entitäts Klassen, die die Datenmodelle für die Web Forms Anwendung definieren.</span><span class="sxs-lookup"><span data-stu-id="19ac3-132">You will begin by creating the entity classes that define the data models for the Web Forms application.</span></span> <span data-ttu-id="19ac3-133">Anschließend erstellen Sie eine Kontext Klasse, die die Entitäts Klassen verwaltet und den Datenzugriff auf die Datenbank ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="19ac3-133">Then you will create a context class that manages the entity classes and provides data access to the database.</span></span> <span data-ttu-id="19ac3-134">Außerdem erstellen Sie eine Initialisiererklasse, die Sie zum Auffüllen der Datenbank verwenden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-134">You will also create an initializer class that you will use to populate the database.</span></span>

### <a name="entity-framework-and-references"></a><span data-ttu-id="19ac3-135">Entity Framework und Verweise</span><span class="sxs-lookup"><span data-stu-id="19ac3-135">Entity Framework and References</span></span>

<span data-ttu-id="19ac3-136">Standardmäßig ist Entity Framework enthalten, wenn Sie eine neue **ASP.NET-Webanwendung** mithilfe der **Web Forms** Vorlage erstellen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-136">By default, Entity Framework is included when you create a new **ASP.NET Web Application** using the **Web Forms** template.</span></span> <span data-ttu-id="19ac3-137">Entity Framework können als nuget-Paket installiert, deinstalliert und aktualisiert werden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-137">Entity Framework can be installed, uninstalled, and updated as a NuGet package.</span></span>

<span data-ttu-id="19ac3-138">Dieses nuget-Paket enthält die folgenden **Laufzeitassemblys** in Ihrem Projekt:</span><span class="sxs-lookup"><span data-stu-id="19ac3-138">This NuGet package includes the following **runtime** assemblies within your project:</span></span>

- <span data-ttu-id="19ac3-139">EntityFramework. dll – sämtlicher allgemeiner Lauf Zeit Code, der von Entity Framework</span><span class="sxs-lookup"><span data-stu-id="19ac3-139">EntityFramework.dll – All the common runtime code used by Entity Framework</span></span>
- <span data-ttu-id="19ac3-140">EntityFramework. SqlServer. dll – der Microsoft SQL Server Anbieter für Entity Framework</span><span class="sxs-lookup"><span data-stu-id="19ac3-140">EntityFramework.SqlServer.dll – The Microsoft SQL Server provider for Entity Framework</span></span>

### <a name="entity-classes"></a><span data-ttu-id="19ac3-141">Entitäts Klassen</span><span class="sxs-lookup"><span data-stu-id="19ac3-141">Entity Classes</span></span>

<span data-ttu-id="19ac3-142">Die Klassen, die Sie erstellen, um das Schema der Daten zu definieren, werden als Entitäts Klassen bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="19ac3-142">The classes you create to define the schema of the data are called entity classes.</span></span> <span data-ttu-id="19ac3-143">Wenn Sie mit dem Daten bankentwurf noch nicht vertraut sind, stellen Sie sich die Entitäts Klassen als Tabellendefinitionen einer Datenbank vor.</span><span class="sxs-lookup"><span data-stu-id="19ac3-143">If you're new to database design, think of the entity classes as table definitions of a database.</span></span> <span data-ttu-id="19ac3-144">Jede Eigenschaft in der Klasse gibt eine Spalte in der Tabelle der Datenbank an.</span><span class="sxs-lookup"><span data-stu-id="19ac3-144">Each property in the class specifies a column in the table of the database.</span></span> <span data-ttu-id="19ac3-145">Diese Klassen stellen eine kompakte, Objekt relationale Schnittstelle zwischen objektorientiertem Code und der relationalen Tabellenstruktur der Datenbank bereit.</span><span class="sxs-lookup"><span data-stu-id="19ac3-145">These classes provide a lightweight, object-relational interface between object-oriented code and the relational table structure of the database.</span></span>

<span data-ttu-id="19ac3-146">In diesem Tutorial beginnen Sie mit dem Hinzufügen einfacher Entitäts Klassen, die die Schemas für Produkte und Kategorien darstellen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-146">In this tutorial, you'll start out by adding simple entity classes representing the schemas for products and categories.</span></span> <span data-ttu-id="19ac3-147">Die Products-Klasse enthält Definitionen für jedes Produkt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-147">The products class will contain definitions for each product.</span></span> <span data-ttu-id="19ac3-148">Die Namen der einzelnen Member der Product-Klasse werden `ProductID`, `ProductName`, `Description`, `ImagePath`, `UnitPrice`, `CategoryID`und `Category`.</span><span class="sxs-lookup"><span data-stu-id="19ac3-148">The name of each of the members of the product class will be `ProductID`, `ProductName`, `Description`, `ImagePath`, `UnitPrice`, `CategoryID`, and `Category`.</span></span> <span data-ttu-id="19ac3-149">Die Kategorieklasse enthält Definitionen für jede Kategorie, zu der ein Produkt gehören kann, z. b. Auto, Boots oder Plane.</span><span class="sxs-lookup"><span data-stu-id="19ac3-149">The category class will contain definitions for each category that a product can belong to, such as Car, Boat, or Plane.</span></span> <span data-ttu-id="19ac3-150">Die Namen der einzelnen Member der Category-Klasse werden `CategoryID`, `CategoryName`, `Description`und `Products`.</span><span class="sxs-lookup"><span data-stu-id="19ac3-150">The name of each of the members of the category class will be `CategoryID`, `CategoryName`, `Description`, and `Products`.</span></span> <span data-ttu-id="19ac3-151">Jedes Produkt gehört zu einer der Kategorien.</span><span class="sxs-lookup"><span data-stu-id="19ac3-151">Each product will belong to one of the categories.</span></span> <span data-ttu-id="19ac3-152">Diese Entitäts Klassen werden dem Ordner "vorhandene *Modelle* " des Projekts hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-152">These entity classes will be added to the project's existing *Models* folder.</span></span>

1. <span data-ttu-id="19ac3-153">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf den Ordner *Modelle* , und wählen Sie dann -&gt; **Neues Element** **Hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="19ac3-153">In **Solution Explorer**, right-click the *Models* folder and then select **Add** -&gt; **New Item**.</span></span> 

    ![Erstellen der Datenzugriffs Ebene-Menü "Neues Element"](create_the_data_access_layer/_static/image1.png)

   <span data-ttu-id="19ac3-155">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-155">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="19ac3-156">Wählen Sie unter  **C# Visual** im Bereich **installiert** auf der linken Seite die Option **Code**aus.</span><span class="sxs-lookup"><span data-stu-id="19ac3-156">Under **Visual C#** from the **Installed** pane on the left, select **Code**.</span></span> 

    ![Erstellen der Datenzugriffs Ebene-Menü "Neues Element"](create_the_data_access_layer/_static/image2.png)
3. <span data-ttu-id="19ac3-158">Wählen Sie im mittleren Bereich **Klasse** aus, und benennen Sie diese neue Klasse *Product.cs*.</span><span class="sxs-lookup"><span data-stu-id="19ac3-158">Select **Class** from the middle pane and name this new class *Product.cs*.</span></span>
4. <span data-ttu-id="19ac3-159">Klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="19ac3-159">Click **Add**.</span></span>  
   <span data-ttu-id="19ac3-160">Die neue Klassendatei wird im Editor angezeigt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-160">The new class file is displayed in the editor.</span></span>
5. <span data-ttu-id="19ac3-161">Ersetzen Sie den Standard Code durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="19ac3-161">Replace the default code with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample1.cs)]
6. <span data-ttu-id="19ac3-162">Erstellen Sie eine weitere Klasse, indem Sie die Schritte 1 bis 4 wiederholen, benennen Sie jedoch die neue Klasse *Category.cs* , und ersetzen Sie den Standard Code durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="19ac3-162">Create another class by repeating steps 1 through 4, however, name the new class *Category.cs* and replace the default code with the following code:</span></span>  

    [!code-csharp[Main](create_the_data_access_layer/samples/sample2.cs)]

<span data-ttu-id="19ac3-163">Wie bereits erwähnt, stellt die `Category`-Klasse den Typ des Produkts dar, das die Anwendung verkaufen soll (z <a id="a"></a> . b.&quot;Cars&quot;, &quot;Boote&quot;, &quot;-&quot;-`Product`), und die-Klasse stellt die einzelnen Produkte (Toys) in der-Datenbank dar.</span><span class="sxs-lookup"><span data-stu-id="19ac3-163">As previously mentioned, the `Category` class represents the type of product that the application is designed to sell (such as <a id="a"></a>&quot;Cars&quot;, &quot;Boats&quot;, &quot;Rockets&quot;, and so on), and the `Product` class represents the individual products (toys) in the database.</span></span> <span data-ttu-id="19ac3-164">Jede Instanz eines `Product` Objekts entspricht einer Zeile in einer relationalen Datenbanktabelle, und jede Eigenschaft der Product-Klasse wird einer Spalte in der relationalen Datenbanktabelle zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="19ac3-164">Each instance of a `Product` object will correspond to a row within a relational database table, and each property of the Product class will map to a column in the relational database table.</span></span> <span data-ttu-id="19ac3-165">Später in diesem Tutorial überprüfen Sie die in der-Datenbank enthaltenen Produktdaten.</span><span class="sxs-lookup"><span data-stu-id="19ac3-165">Later in this tutorial, you'll review the product data contained in the database.</span></span>

### <a name="data-annotations"></a><span data-ttu-id="19ac3-166">Datenanmerkungen</span><span class="sxs-lookup"><span data-stu-id="19ac3-166">Data Annotations</span></span>

<span data-ttu-id="19ac3-167">Möglicherweise haben Sie bemerkt, dass bestimmte Member der Klassen über Attribute verfügen, die Details zum Element angeben, z. b. `[ScaffoldColumn(false)]`.</span><span class="sxs-lookup"><span data-stu-id="19ac3-167">You may have noticed that certain members of the classes have attributes specifying details about the member, such as `[ScaffoldColumn(false)]`.</span></span> <span data-ttu-id="19ac3-168">Hierbei handelt es sich um *Daten Anmerkungen*.</span><span class="sxs-lookup"><span data-stu-id="19ac3-168">These are *data annotations*.</span></span> <span data-ttu-id="19ac3-169">Die Attribute für die Daten Anmerkung können beschreiben, wie Benutzereingaben für diesen Member überprüft werden, wie Formatierungen für ihn festgelegt werden und wie er beim Erstellen der Datenbank modelliert wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-169">The data annotation attributes can describe how to validate user input for that member, to specify formatting for it, and to specify how it is modeled when the database is created.</span></span>

### <a name="context-class"></a><span data-ttu-id="19ac3-170">Context-Klasse</span><span class="sxs-lookup"><span data-stu-id="19ac3-170">Context Class</span></span>

<span data-ttu-id="19ac3-171">Um mit der Verwendung der Klassen für den Datenzugriff zu beginnen, müssen Sie eine Kontext Klasse definieren.</span><span class="sxs-lookup"><span data-stu-id="19ac3-171">To start using the classes for data access, you must define a context class.</span></span> <span data-ttu-id="19ac3-172">Wie bereits erwähnt, verwaltet die Context-Klasse die Entitäts Klassen (z. b. die `Product`-Klasse und die `Category`-Klasse) und ermöglicht den Datenzugriff auf die Datenbank.</span><span class="sxs-lookup"><span data-stu-id="19ac3-172">As mentioned previously, the context class manages the entity classes (such as the `Product` class and the `Category` class) and provides data access to the database.</span></span>

<span data-ttu-id="19ac3-173">Diese Prozedur fügt dem Ordner C# " *Models* " eine neue Kontext Klasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="19ac3-173">This procedure adds a new C# context class to the *Models* folder.</span></span>

1. <span data-ttu-id="19ac3-174">Klicken Sie mit der rechten Maustaste auf den Ordner *Modelle* , und wählen Sie -&gt; **Neues Element** **Hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="19ac3-174">Right-click the *Models* folder and then select **Add** -&gt; **New Item**.</span></span>   
   <span data-ttu-id="19ac3-175">Das Dialogfeld **Neues Element hinzufügen** wird angezeigt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-175">The **Add New Item** dialog box is displayed.</span></span>
2. <span data-ttu-id="19ac3-176">Wählen Sie im mittleren Bereich **Klasse** aus, nennen Sie Sie *ProductContext.cs* , und klicken Sie auf **Hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="19ac3-176">Select **Class** from the middle pane, name it *ProductContext.cs* and click **Add**.</span></span>
3. <span data-ttu-id="19ac3-177">Ersetzen Sie den in der-Klasse enthaltenen Standard Code durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="19ac3-177">Replace the default code contained in the class with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample3.cs)]

<span data-ttu-id="19ac3-178">Mit diesem Code wird der `System.Data.Entity`-Namespace hinzugefügt, sodass Sie auf alle Kernfunktionen von Entity Framework zugreifen können. dazu gehört auch die Möglichkeit, Daten durcharbeiten mit stark typisierten Objekten abzufragen, einzufügen, zu aktualisieren und zu löschen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-178">This code adds the `System.Data.Entity` namespace so that you have access to all the core functionality of Entity Framework, which includes the capability to query, insert, update, and delete data by working with strongly typed objects.</span></span>

<span data-ttu-id="19ac3-179">Die `ProductContext`-Klasse stellt Entity Framework Produktdaten Bank Kontext dar, der das Abrufen, speichern und Aktualisieren von `Product`-Klassen Instanzen in der Datenbank behandelt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-179">The `ProductContext` class represents Entity Framework product database context, which handles fetching, storing, and updating `Product` class instances in the database.</span></span> <span data-ttu-id="19ac3-180">Die `ProductContext`-Klasse wird von der `DbContext` Basisklasse abgeleitet, die von Entity Framework bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-180">The `ProductContext` class derives from the `DbContext` base class provided by Entity Framework.</span></span>

### <a name="initializer-class"></a><span data-ttu-id="19ac3-181">Initialisiererklasse</span><span class="sxs-lookup"><span data-stu-id="19ac3-181">Initializer Class</span></span>

<span data-ttu-id="19ac3-182">Sie müssen eine benutzerdefinierte Logik ausführen, um die Datenbank zu initialisieren, wenn der Kontext zum ersten Mal verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-182">You will need to run some custom logic to initialize the database the first time the context is used.</span></span> <span data-ttu-id="19ac3-183">Dadurch können Seed-Daten zur Datenbank hinzugefügt werden, sodass Sie sofort Produkte und Kategorien anzeigen können.</span><span class="sxs-lookup"><span data-stu-id="19ac3-183">This will allow seed data to be added to the database so that you can immediately display products and categories.</span></span>

<span data-ttu-id="19ac3-184">Diese Prozedur fügt dem Ordner C# " *Models* " eine neue Initialisiererklasse hinzu.</span><span class="sxs-lookup"><span data-stu-id="19ac3-184">This procedure adds a new C# initializer class to the *Models* folder.</span></span>

1. <span data-ttu-id="19ac3-185">Erstellen Sie einen weiteren `Class` im Ordner *Models* , und nennen Sie ihn *ProductDatabaseInitializer.cs*.</span><span class="sxs-lookup"><span data-stu-id="19ac3-185">Create another `Class` in the *Models* folder and name it *ProductDatabaseInitializer.cs*.</span></span>
2. <span data-ttu-id="19ac3-186">Ersetzen Sie den in der-Klasse enthaltenen Standard Code durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="19ac3-186">Replace the default code contained in the class with the following code:</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample4.cs)]

<span data-ttu-id="19ac3-187">Wie Sie aus dem obigen Code sehen können, wird die `Seed`-Eigenschaft beim Erstellen und Initialisieren der Datenbank überschrieben und festgelegt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-187">As you can see from the above code, when the database is created and initialized, the `Seed` property is overridden and set.</span></span> <span data-ttu-id="19ac3-188">Wenn die `Seed`-Eigenschaft festgelegt ist, werden die Werte aus den Kategorien und Produkten zum Auffüllen der Datenbank verwendet.</span><span class="sxs-lookup"><span data-stu-id="19ac3-188">When the `Seed` property is set, the values from the categories and products are used to populate the database.</span></span> <span data-ttu-id="19ac3-189">Wenn Sie versuchen, die Ausgangsdaten zu aktualisieren, indem Sie den obigen Code ändern, nachdem die Datenbank erstellt wurde, werden keine Updates angezeigt, wenn Sie die-Webanwendung ausführen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-189">If you attempt to update the seed data by modifying the above code after the database has been created, you won't see any updates when you run the Web application.</span></span> <span data-ttu-id="19ac3-190">Der Grund ist, dass der obige Code eine Implementierung der `DropCreateDatabaseIfModelChanges`-Klasse verwendet, um zu erkennen, ob sich das Modell (Schema) vor dem Zurücksetzen der Seed-Daten geändert hat.</span><span class="sxs-lookup"><span data-stu-id="19ac3-190">The reason is the above code uses an implementation of the `DropCreateDatabaseIfModelChanges` class to recognize if the model (schema) has changed before resetting the seed data.</span></span> <span data-ttu-id="19ac3-191">Wenn keine Änderungen an den `Category`-und `Product` Entitäts Klassen vorgenommen werden, wird die Datenbank nicht mit den Seed-Daten erneut initialisiert.</span><span class="sxs-lookup"><span data-stu-id="19ac3-191">If no changes are made to the `Category` and `Product` entity classes, the database will not be reinitialized with the seed data.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="19ac3-192">Wenn Sie möchten, dass die Datenbank jedes Mal, wenn Sie die Anwendung ausgeführt haben, neu erstellt wird, können Sie die `DropCreateDatabaseAlways`-Klasse anstelle der `DropCreateDatabaseIfModelChanges`-Klasse verwenden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-192">If you wanted the database to be recreated every time you ran the application, you could use the `DropCreateDatabaseAlways` class instead of the `DropCreateDatabaseIfModelChanges` class.</span></span> <span data-ttu-id="19ac3-193">Verwenden Sie für diese tutorialreihe jedoch die `DropCreateDatabaseIfModelChanges`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="19ac3-193">However for this tutorial series, use the `DropCreateDatabaseIfModelChanges` class.</span></span>

<span data-ttu-id="19ac3-194">An dieser Stelle dieses Tutorials verfügen Sie über einen Ordner " *Models* " mit vier neuen Klassen und einer Standardklasse:</span><span class="sxs-lookup"><span data-stu-id="19ac3-194">At this point in this tutorial, you will have a *Models* folder with four new classes and one default class:</span></span>

![Erstellen des Ordners "Datenzugriffs Schicht-Modelle"](create_the_data_access_layer/_static/image3.png)

### <a name="configuring-the-application-to-use-the-data-model"></a><span data-ttu-id="19ac3-196">Konfigurieren der Anwendung für die Verwendung des Datenmodells</span><span class="sxs-lookup"><span data-stu-id="19ac3-196">Configuring the Application to Use the Data Model</span></span>

<span data-ttu-id="19ac3-197">Nachdem Sie die Klassen erstellt haben, die die Daten darstellen, müssen Sie die Anwendung so konfigurieren, dass die Klassen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-197">Now that you've created the classes that represent the data, you must configure the application to use the classes.</span></span> <span data-ttu-id="19ac3-198">Fügen Sie in der Datei *Global. asax* Code hinzu, mit dem das Modell initialisiert wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-198">In the *Global.asax* file, you add code that initializes the model.</span></span> <span data-ttu-id="19ac3-199">In der Datei *Web. config* fügen Sie Informationen hinzu, die der Anwendung mitteilen, welche Datenbank Sie zum Speichern der Daten verwenden, die von den neuen Daten Klassen dargestellt werden.</span><span class="sxs-lookup"><span data-stu-id="19ac3-199">In the *Web.config* file you add information that tells the application what database you'll use to store the data that's represented by the new data classes.</span></span> <span data-ttu-id="19ac3-200">Die Datei " *Global. asax* " kann verwendet werden, um Anwendungs Ereignisse oder-Methoden zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="19ac3-200">The *Global.asax* file can be used to handle application events or methods.</span></span> <span data-ttu-id="19ac3-201">Mithilfe der Datei " *Web. config* " können Sie die Konfiguration Ihrer ASP.NET-Webanwendung steuern.</span><span class="sxs-lookup"><span data-stu-id="19ac3-201">The *Web.config* file allows you to control the configuration of your ASP.NET web application.</span></span>

#### <a name="updating-the-globalasax-file"></a><span data-ttu-id="19ac3-202">Aktualisieren der Datei "Global. asax"</span><span class="sxs-lookup"><span data-stu-id="19ac3-202">Updating the Global.asax file</span></span>

<span data-ttu-id="19ac3-203">Um die Datenmodelle zu initialisieren, wenn die Anwendung gestartet wird, aktualisieren Sie den `Application_Start`-Handler in der Datei *Global.asax.cs* .</span><span class="sxs-lookup"><span data-stu-id="19ac3-203">To initialize the data models when the application starts, you will update the `Application_Start` handler in the *Global.asax.cs* file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="19ac3-204">In Projektmappen-Explorer können Sie entweder die Datei " *Global. asax* " oder die Datei " *Global.asax.cs* " auswählen, um die *Global.asax.cs* -Datei zu bearbeiten.</span><span class="sxs-lookup"><span data-stu-id="19ac3-204">In Solution Explorer, you can select either the *Global.asax* file or the *Global.asax.cs* file to edit the *Global.asax.cs* file.</span></span>

1. <span data-ttu-id="19ac3-205">Fügen Sie den folgenden Code, der in gelb hervorgehoben ist, der `Application_Start`-Methode in der Datei *Global.asax.cs* hinzu.</span><span class="sxs-lookup"><span data-stu-id="19ac3-205">Add the following code highlighted in yellow to the `Application_Start` method in the *Global.asax.cs* file.</span></span>   

    [!code-csharp[Main](create_the_data_access_layer/samples/sample5.cs?highlight=9-10,22-23)]

> [!NOTE] 
> 
> <span data-ttu-id="19ac3-206">Ihr Browser muss HTML5 unterstützen, um den in gelb markierten Code anzuzeigen, wenn Sie diese tutorialreihe in einem Browser anzeigen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-206">Your browser must support HTML5 to view the code highlighted in yellow when viewing this tutorial series in a browser.</span></span>

<span data-ttu-id="19ac3-207">Wie im obigen Code gezeigt, gibt die Anwendung beim Starten der Anwendung den Initialisierer an, der beim ersten Zugriff auf die Daten ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-207">As shown in the above code, when the application starts, the application specifies the initializer that will run during the first time the data is accessed.</span></span> <span data-ttu-id="19ac3-208">Die beiden zusätzlichen Namespaces sind erforderlich, um auf das `Database` Objekt und das `ProductDatabaseInitializer` Objekt zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-208">The two additional namespaces are required to access the `Database` object and the `ProductDatabaseInitializer` object.</span></span>

 <span data-ttu-id="19ac3-209">Ändern der Datei "Web. config"</span><span class="sxs-lookup"><span data-stu-id="19ac3-209">Modifying the Web.Config File</span></span> 

<span data-ttu-id="19ac3-210">Obwohl Entity Framework Code First eine Datenbank für Sie an einem Standard Speicherort generiert, wenn die Datenbank mit Ausgangsdaten aufgefüllt wird, erhalten Sie durch das Hinzufügen Ihrer eigenen Verbindungsinformationen zu Ihrer Anwendung die Kontrolle über den Speicherort der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="19ac3-210">Although Entity Framework Code First will generate a database for you in a default location when the database is populated with seed data, adding your own connection information to your application gives you control of the database location.</span></span> <span data-ttu-id="19ac3-211">Sie geben diese Datenbankverbindung mithilfe einer Verbindungs Zeichenfolge in der Datei " *Web. config* " der Anwendung im Stammverzeichnis des Projekts an.</span><span class="sxs-lookup"><span data-stu-id="19ac3-211">You specify this database connection using a connection string in the application's *Web.config* file at the root of the project.</span></span> <span data-ttu-id="19ac3-212">Indem Sie eine neue Verbindungs Zeichenfolge hinzufügen, können Sie den Speicherort der Datenbank (*wingtiptoys. mdf*), der im Datenverzeichnis der Anwendung (*App\_Daten*) erstellt werden soll, anstelle des Standard Speicher Orts weiterleiten.</span><span class="sxs-lookup"><span data-stu-id="19ac3-212">By adding a new connection string, you can direct the location of the database (*wingtiptoys.mdf*) to be built in the application's data directory (*App\_Data*), rather than its default location.</span></span> <span data-ttu-id="19ac3-213">Wenn Sie diese Änderung vornehmen, können Sie die Datenbankdatei später in diesem Tutorial suchen und überprüfen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-213">Making this change will allow you to find and inspect the database file later in this tutorial.</span></span>

1. <span data-ttu-id="19ac3-214">Suchen Sie in **Projektmappen-Explorer**nach der Datei *Web. config* , und öffnen Sie Sie.</span><span class="sxs-lookup"><span data-stu-id="19ac3-214">In **Solution Explorer**, find and open the *Web.config* file.</span></span>
2. <span data-ttu-id="19ac3-215">Fügen Sie die Verbindungs Zeichenfolge, die gelb hervorgehoben ist, dem `<connectionStrings>` Abschnitt der Datei " *Web. config* " wie folgt hinzu:</span><span class="sxs-lookup"><span data-stu-id="19ac3-215">Add the connection string highlighted in yellow to the `<connectionStrings>` section of the *Web.config* file as follows:</span></span>  

    [!code-xml[Main](create_the_data_access_layer/samples/sample6.xml?highlight=4-7)]

<span data-ttu-id="19ac3-216">Wenn die Anwendung zum ersten Mal ausgeführt wird, erstellt Sie die Datenbank an dem Speicherort, der durch die Verbindungs Zeichenfolge angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-216">When the application is run for the first time, it will build the database at the location specified by the connection string.</span></span> <span data-ttu-id="19ac3-217">Bevor Sie die Anwendung ausführen, erstellen wir Sie zunächst.</span><span class="sxs-lookup"><span data-stu-id="19ac3-217">But before running the application, let's build it first.</span></span>

## <a name="building-the-application"></a><span data-ttu-id="19ac3-218">Erstellen der Anwendung</span><span class="sxs-lookup"><span data-stu-id="19ac3-218">Building the Application</span></span>

<span data-ttu-id="19ac3-219">Um sicherzustellen, dass alle Klassen und Änderungen an der Webanwendung funktionieren, sollten Sie die Anwendung erstellen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-219">To make sure that all the classes and changes to your Web application work, you should build the application.</span></span>

1. <span data-ttu-id="19ac3-220">Wählen Sie im Menü **Debuggen** die Option **wingtiptoys erstellen**aus.</span><span class="sxs-lookup"><span data-stu-id="19ac3-220">From the **Debug** menu, select **Build WingtipToys**.</span></span>  
 <span data-ttu-id="19ac3-221">Das Fenster **Ausgabe** wird angezeigt, und wenn alles gut funktioniert, wird eine Nachricht *erfolgreich* angezeigt.</span><span class="sxs-lookup"><span data-stu-id="19ac3-221">The **Output** window is displayed, and if all went well, you see a *succeeded* message.</span></span>  

    ![Erstellen der Datenzugriffs Ebene: Ausgabefenster](create_the_data_access_layer/_static/image4.png)

<span data-ttu-id="19ac3-223">Wenn ein Fehler auftritt, überprüfen Sie die obigen Schritte erneut.</span><span class="sxs-lookup"><span data-stu-id="19ac3-223">If you run into an error, re-check the above steps.</span></span> <span data-ttu-id="19ac3-224">Die Informationen im **Ausgabe** Fenster geben an, in welcher Datei ein Problem aufgetreten ist und wo in der Datei eine Änderung erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="19ac3-224">The information in the **Output** window will indicate which file has a problem and where in the file a change is required.</span></span> <span data-ttu-id="19ac3-225">Mithilfe dieser Informationen können Sie bestimmen, welcher Teil der obigen Schritte in Ihrem Projekt überprüft und korrigiert werden muss.</span><span class="sxs-lookup"><span data-stu-id="19ac3-225">This information will enable you to determine what part of the above steps need to be reviewed and fixed in your project.</span></span>

## <a name="summary"></a><span data-ttu-id="19ac3-226">Summary</span><span class="sxs-lookup"><span data-stu-id="19ac3-226">Summary</span></span>

<span data-ttu-id="19ac3-227">In diesem Tutorial der Reihe, in der Sie das Datenmodell erstellt haben, und wurde der Code hinzugefügt, der verwendet wird, um die Datenbank zu initialisieren und zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="19ac3-227">In this tutorial of the series you have created the data model, as well as, added the code that will be used to initialize and seed the database.</span></span> <span data-ttu-id="19ac3-228">Außerdem haben Sie die Anwendung so konfiguriert, dass Sie die Datenmodelle verwendet, wenn die Anwendung ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="19ac3-228">You have also configured the application to use the data models when the application is run.</span></span>

<span data-ttu-id="19ac3-229">Im nächsten Tutorial aktualisieren Sie die Benutzeroberfläche, fügen die Navigation hinzu und rufen Daten aus der Datenbank ab.</span><span class="sxs-lookup"><span data-stu-id="19ac3-229">In the next tutorial, you'll update the UI, add navigation, and retrieve data from the database.</span></span> <span data-ttu-id="19ac3-230">Dies führt dazu, dass die Datenbank automatisch basierend auf den Entitäts Klassen erstellt wird, die Sie in diesem Tutorial erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="19ac3-230">This will result in the database being automatically created based on the entity classes that you created in this tutorial.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="19ac3-231">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="19ac3-231">Additional Resources</span></span>

<span data-ttu-id="19ac3-232">[Entity Framework Übersicht](https://msdn.microsoft.com/library/bb399567.aspx) </span><span class="sxs-lookup"><span data-stu-id="19ac3-232">[Entity Framework Overview](https://msdn.microsoft.com/library/bb399567.aspx) </span></span>  
<span data-ttu-id="19ac3-233">[Leitfaden für Einsteiger zum ADO.NET-Entity Framework](https://msdn.microsoft.com/data/ee712907) </span><span class="sxs-lookup"><span data-stu-id="19ac3-233">[Beginner's Guide to the ADO.NET Entity Framework](https://msdn.microsoft.com/data/ee712907) </span></span>  
<span data-ttu-id="19ac3-234">[Code First Entwicklung mit Entity Framework](http://www.msteched.com/2010/Europe/DEV212) (Video)</span><span class="sxs-lookup"><span data-stu-id="19ac3-234">[Code First Development with Entity Framework](http://www.msteched.com/2010/Europe/DEV212) (video)</span></span>   
<span data-ttu-id="19ac3-235">  der [Code First-Beziehung](https://msdn.microsoft.com/data/hh134698)</span><span class="sxs-lookup"><span data-stu-id="19ac3-235">[Code First Relationships Fluent API](https://msdn.microsoft.com/data/hh134698) </span></span>  
[<span data-ttu-id="19ac3-236">Code First von Daten Anmerkungen</span><span class="sxs-lookup"><span data-stu-id="19ac3-236">Code First Data Annotations</span></span>](https://msdn.microsoft.com/data/gg193958)  
[<span data-ttu-id="19ac3-237">Produktivitätsverbesserungen für die Entity Framework</span><span class="sxs-lookup"><span data-stu-id="19ac3-237">Productivity Improvements for the Entity Framework</span></span>](https://blogs.msdn.com/b/efdesign/archive/2010/06/21/productivity-improvements-for-the-entity-framework.aspx?wa=wsignin1.0)

> [!div class="step-by-step"]
> <span data-ttu-id="19ac3-238">[Zurück](create-the-project.md)
> [Weiter](ui_and_navigation.md)</span><span class="sxs-lookup"><span data-stu-id="19ac3-238">[Previous](create-the-project.md)
[Next](ui_and_navigation.md)</span></span>
