---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Grundlegendes zu ASP.NET AJAX-Webdiensten | Microsoft-Dokumentation
author: scottcate
description: Webdienste sind ein integraler Bestandteil von .NET Framework, die eine plattformübergreifende Lösung zum Austauschen von Daten zwischen verteilten Systemen bereitstellen. Obwohl Web...
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: eac3d53fd871d0cb5a2870488ce752c057cc5b1a
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "86162807"
---
# <a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="00d58-104">Grundlegendes zu Webdiensten von ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="00d58-104">Understanding ASP.NET AJAX Web Services</span></span>

<span data-ttu-id="00d58-105">von [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="00d58-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="00d58-106">PDF herunterladen</span><span class="sxs-lookup"><span data-stu-id="00d58-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="00d58-107">Webdienste sind ein integraler Bestandteil von .NET Framework, die eine plattformübergreifende Lösung zum Austauschen von Daten zwischen verteilten Systemen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="00d58-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="00d58-108">Obwohl Webdienste normalerweise verwendet werden, um unterschiedliche Betriebssysteme, Objekt Modelle und Programmiersprachen zu ermöglichen, Daten zu senden und zu empfangen, können Sie auch zum dynamischen Einfügen von Daten in eine ASP.NET AJAX-Seite oder zum Senden von Daten von einer Seite an ein Back-End-System verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="00d58-109">All dies ist möglich, ohne dass auf Post Back Vorgänge zurückgegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-109">All of this can be done without resorting to postback operations.</span></span>

## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="00d58-110">Aufrufen von Webdiensten mit ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="00d58-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="00d58-111">Dan Wahlin</span><span class="sxs-lookup"><span data-stu-id="00d58-111">Dan Wahlin</span></span>

<span data-ttu-id="00d58-112">Webdienste sind ein integraler Bestandteil von .NET Framework, die eine plattformübergreifende Lösung zum Austauschen von Daten zwischen verteilten Systemen bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="00d58-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="00d58-113">Obwohl Webdienste normalerweise verwendet werden, um unterschiedliche Betriebssysteme, Objekt Modelle und Programmiersprachen zu ermöglichen, Daten zu senden und zu empfangen, können Sie auch zum dynamischen Einfügen von Daten in eine ASP.NET AJAX-Seite oder zum Senden von Daten von einer Seite an ein Back-End-System verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="00d58-114">All dies ist möglich, ohne dass auf Post Back Vorgänge zurückgegriffen wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="00d58-115">Obwohl das ASP.NET AJAX-Update Panel-Steuerelement eine einfache Möglichkeit zum Aktivieren einer beliebigen ASP.NET-Seite bietet, kann es vorkommen, dass Sie dynamisch auf Daten auf dem Server zugreifen müssen, ohne ein Update Panel zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="00d58-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="00d58-116">In diesem Artikel erfahren Sie, wie Sie dies erreichen, indem Sie Webdienste in ASP.NET-AJAX-Seiten erstellen und nutzen.</span><span class="sxs-lookup"><span data-stu-id="00d58-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="00d58-117">Dieser Artikel konzentriert sich auf die Funktionalität, die in den Core ASP.NET AJAX-Erweiterungen sowie in einem Webdienst-aktivierten Steuerelement im ASP.NET AJAX-Toolkit mit dem Namen AutoCompleteExtender verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="00d58-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="00d58-118">Zu den behandelten Themen gehören das definieren AJAX-fähiger Webdienste, das Erstellen von Client Proxys und das Aufrufen von Webdiensten mit JavaScript</span><span class="sxs-lookup"><span data-stu-id="00d58-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="00d58-119">Sie sehen auch, wie Webdienst Aufrufe direkt an ASP.net page-Methoden durchgeführt werden können.</span><span class="sxs-lookup"><span data-stu-id="00d58-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="00d58-120">Webdienst Konfiguration</span><span class="sxs-lookup"><span data-stu-id="00d58-120">Web Services Configuration</span></span>

<span data-ttu-id="00d58-121">Wenn ein neues Website Projekt mit Visual Studio 2008 erstellt wird, enthält die web.config Datei eine Reihe neuer Ergänzungen, die Benutzern früherer Versionen von Visual Studio möglicherweise nicht vertraut sind.</span><span class="sxs-lookup"><span data-stu-id="00d58-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="00d58-122">Einige dieser Änderungen ordnen das "ASP"-Präfix den ASP.NET AJAX-Steuerelementen zu, sodass Sie in Seiten verwendet werden können, während andere erforderliche httpHandlers und httpModules definieren.</span><span class="sxs-lookup"><span data-stu-id="00d58-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="00d58-123">In der Liste 1 werden Änderungen an dem- `<httpHandlers>` Element in web.config angezeigt, die sich auf Webdienst Aufrufe auswirken.</span><span class="sxs-lookup"><span data-stu-id="00d58-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="00d58-124">Der zum Verarbeiten von ASMX-aufrufen verwendete HttpHandler-Standard Handler wird entfernt und durch eine ScriptHandlerFactory-Klasse ersetzt, die sich in der System.Web.Extensions.dll-Assembly befindet.</span><span class="sxs-lookup"><span data-stu-id="00d58-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="00d58-125">System.Web.Extensions.dll enthält alle Kernfunktionen, die von ASP.NET AJAX verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

<span data-ttu-id="00d58-126">**Codebeispiel 1. ASP.NET AJAX-webdiensthandlerkonfiguration**</span><span class="sxs-lookup"><span data-stu-id="00d58-126">**Listing 1. ASP.NET AJAX Web Service Handler Configuration**</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="00d58-127">Diese HttpHandler-Ersetzung erfolgt, um JavaScript Object Notation (JSON)-Aufrufen von ASP.NET AJAX-Seiten an .NET-Webdienste mithilfe eines JavaScript-Webdienst Proxys zuzulassen.</span><span class="sxs-lookup"><span data-stu-id="00d58-127">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="00d58-128">ASP.NET AJAX sendet JSON-Nachrichten anstelle der standardmäßigen SOAP-Aufrufe (Simple Object Access Protocol), die normalerweise Webdiensten zugeordnet sind, an Webdienste.</span><span class="sxs-lookup"><span data-stu-id="00d58-128">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="00d58-129">Dies führt zu kleineren Anforderungs-und Antwort Nachrichten.</span><span class="sxs-lookup"><span data-stu-id="00d58-129">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="00d58-130">Außerdem ist eine effizientere Client seitige Verarbeitung von Daten möglich, da die ASP.NET AJAX-JavaScript-Bibliothek für die Arbeit mit JSON-Objekten optimiert ist.</span><span class="sxs-lookup"><span data-stu-id="00d58-130">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="00d58-131">In der Liste 2 und in der Liste 3 werden Beispiele für Webdienst-Anforderungs-und-Antwort Nachrichten angezeigt, die im JSON-Format</span><span class="sxs-lookup"><span data-stu-id="00d58-131">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="00d58-132">Die in der Liste 2 angezeigte Anforderungs Nachricht übergibt einen Country-Parameter mit dem Wert "Belgien", während die Antwortnachricht in der Liste 3 ein Array von Kunden Objekten und deren zugeordneten Eigenschaften übergibt.</span><span class="sxs-lookup"><span data-stu-id="00d58-132">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

<span data-ttu-id="00d58-133">**Codebeispiel 2. Nach JSON serialisierte Webdienst-Anforderungs Nachricht**</span><span class="sxs-lookup"><span data-stu-id="00d58-133">**Listing 2. Web Service Request Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> <span data-ttu-id="00d58-134">*>[!NOTE]der Vorgangs Name wird als Teil der URL zum Webdienst definiert. Darüber hinaus werden Anforderungs Nachrichten nicht immer über JSON übermittelt. Webdienste können das ScriptMethod-Attribut verwenden, bei dem der UseHttpGet-Parameter auf "true" festgelegt ist. Dadurch werden Parameter über die Abfrage Zeichenfolgen-Parameter übergeben.*</span><span class="sxs-lookup"><span data-stu-id="00d58-134">*> [!NOTE] the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON. Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.*</span></span>

<span data-ttu-id="00d58-135">**Codebeispiel 3. In JSON serialisierte Webdienst-Antwortnachricht**</span><span class="sxs-lookup"><span data-stu-id="00d58-135">**Listing 3. Web Service Response Message Serialized to JSON**</span></span>

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="00d58-136">Im nächsten Abschnitt erfahren Sie, wie Sie Webdienste erstellen können, mit denen JSON-Anforderungs Nachrichten verarbeitet und sowohl mit einfachen als auch komplexen Typen beantwortet werden können.</span><span class="sxs-lookup"><span data-stu-id="00d58-136">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="00d58-137">Erstellen von AJAX-aktivierten Webdiensten</span><span class="sxs-lookup"><span data-stu-id="00d58-137">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="00d58-138">Das ASP.NET AJAX-Framework bietet verschiedene Methoden zum Aufrufen von Webdiensten.</span><span class="sxs-lookup"><span data-stu-id="00d58-138">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="00d58-139">Sie können das AutoCompleteExtender-Steuerelement (verfügbar im ASP.NET AJAX Toolkit) oder JavaScript verwenden.</span><span class="sxs-lookup"><span data-stu-id="00d58-139">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="00d58-140">Vor dem Aufrufen eines Dienstanbieter müssen Sie es jedoch AJAX-aktivieren, damit es von Client-Skriptcode aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="00d58-140">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="00d58-141">Unabhängig davon, ob Sie noch nicht mit ASP.NET-Webdiensten vertraut sind, ist es einfach, Dienste zu erstellen und AJAX-Dienste zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="00d58-141">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="00d58-142">.NET Framework hat die Erstellung von ASP.NET-Webdiensten seit der ersten Veröffentlichung in 2002 und den ASP.NET AJAX-Erweiterungen unterstützt, die zusätzliche AJAX-Funktionen bereitstellen, die auf dem Standardsatz von Features von .NET Framework aufbauen.</span><span class="sxs-lookup"><span data-stu-id="00d58-142">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="00d58-143">Visual Studio .net 2008 Beta 2 verfügt über integrierte Unterstützung für das Erstellen von ASMX-Webdienst Dateien und leitet den zugeordneten Code neben Klassen aus der System. Web. Services. WebService-Klasse automatisch ab.</span><span class="sxs-lookup"><span data-stu-id="00d58-143">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="00d58-144">Wenn Sie der-Klasse Methoden hinzufügen, müssen Sie das WebMethod-Attribut anwenden, damit Sie von webdienstconsumern aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-144">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="00d58-145">Codebeispiel 4 zeigt ein Beispiel für das Anwenden des WebMethod-Attributs auf eine Methode mit dem Namen getcustomersbycountry ().</span><span class="sxs-lookup"><span data-stu-id="00d58-145">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

<span data-ttu-id="00d58-146">**Codebeispiel 4. Verwenden des WebMethod-Attributs in einem Webdienst**</span><span class="sxs-lookup"><span data-stu-id="00d58-146">**Listing 4. Using the WebMethod Attribute in a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="00d58-147">Die getcustomersbycountry ()-Methode akzeptiert einen Country-Parameter und gibt ein Customer-Objekt Array zurück.</span><span class="sxs-lookup"><span data-stu-id="00d58-147">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="00d58-148">Der an die Methode übergebenen Länder Wert wird an eine Geschäfts Schicht Klasse weitergeleitet, die wiederum eine datenebenenklasse aufruft, um die Daten aus der Datenbank abzurufen, die Eigenschaften des Kunden Objekts mit Daten füllen und das Array zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="00d58-148">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="00d58-149">Verwenden des ScriptService-Attributs</span><span class="sxs-lookup"><span data-stu-id="00d58-149">Using the ScriptService Attribute</span></span>

<span data-ttu-id="00d58-150">Beim Hinzufügen des WebMethod-Attributs kann die getcustomersbycountry ()-Methode von Clients aufgerufen werden, die Standard-SOAP-Nachrichten an den Webdienst senden. es ist nicht zulässig, dass JSON-Aufrufe von ASP.NET AJAX-Anwendungen standardmäßig durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-150">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="00d58-151">Damit JSON-Aufrufe durchgeführt werden können, müssen Sie das-Attribut der ASP.NET AJAX-Erweiterung `ScriptService` auf die Webdienst Klasse anwenden.</span><span class="sxs-lookup"><span data-stu-id="00d58-151">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="00d58-152">Dies ermöglicht es einem Webdienst, mithilfe von JSON formatierte Antwort Nachrichten zu senden und Client seitiges Skript das Abrufen eines Diensts durch Senden von JSON-Nachrichten zu ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="00d58-152">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="00d58-153">In der Liste 5 wird ein Beispiel für das Anwenden des ScriptService-Attributs auf eine Webdienst Klasse mit dem Namen CustomersService veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="00d58-153">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

<span data-ttu-id="00d58-154">**Codebeispiel 5. Verwenden des ScriptService-Attributs für AJAX: Aktivieren eines Webdiensts**</span><span class="sxs-lookup"><span data-stu-id="00d58-154">**Listing 5. Using the ScriptService Attribute to AJAX-enable a Web Service**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="00d58-155">Das ScriptService-Attribut fungiert als Marker, das angibt, dass es von AJAX-Skriptcode aufgerufen werden kann.</span><span class="sxs-lookup"><span data-stu-id="00d58-155">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="00d58-156">Sie verarbeitet keine der JSON-Serialisierungs-oder deserialisierungsaufgaben, die im Hintergrund auftreten.</span><span class="sxs-lookup"><span data-stu-id="00d58-156">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="00d58-157">Die ScriptHandlerFactory (in web.config konfiguriert) und andere verwandte Klassen führen den Großteil der JSON-Verarbeitung aus.</span><span class="sxs-lookup"><span data-stu-id="00d58-157">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="00d58-158">Verwenden des ScriptMethod-Attributs</span><span class="sxs-lookup"><span data-stu-id="00d58-158">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="00d58-159">Das ScriptService-Attribut ist das einzige ASP.NET AJAX-Attribut, das in einem .NET-Webdienst definiert werden muss, damit es von ASP.NET AJAX-Seiten verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="00d58-159">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="00d58-160">Ein anderes Attribut mit dem Namen "ScriptMethod" kann jedoch auch direkt auf Webmethoden in einem Dienst angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-160">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="00d58-161">ScriptMethod definiert drei Eigenschaften `UseHttpGet` , einschließlich, `ResponseFormat` und `XmlSerializeString` .</span><span class="sxs-lookup"><span data-stu-id="00d58-161">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="00d58-162">Das Ändern der Werte dieser Eigenschaften kann in Fällen nützlich sein, in denen der von einer Webmethode akzeptierte Anforderungstyp zu Get geändert werden muss, wenn eine Webmethode unformatierte XML-Daten in Form eines-oder-Objekts zurückgeben muss `XmlDocument` `XmlElement` oder wenn Daten, die von einem Dienst zurückgegeben werden, immer als XML anstelle von JSON serialisiert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="00d58-162">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="00d58-163">Die UseHttpGet-Eigenschaft kann verwendet werden, wenn eine Webmethode Get-Anforderungen anstelle von Post-Anforderungen akzeptieren soll.</span><span class="sxs-lookup"><span data-stu-id="00d58-163">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="00d58-164">Anforderungen werden mithilfe einer URL gesendet, bei der Eingabeparameter für die Webmethode in QueryString-Parameter konvertiert wurden.</span><span class="sxs-lookup"><span data-stu-id="00d58-164">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="00d58-165">Die UseHttpGet-Eigenschaft ist standardmäßig auf false festgelegt und sollte nur auf festgelegt werden, `true` Wenn Vorgänge bekanntermaßen sicher sind und sensible Daten nicht an einen Webdienst übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-165">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="00d58-166">In der Liste 6 wird ein Beispiel für die Verwendung des ScriptMethod-Attributs mit der UseHttpGet-Eigenschaft gezeigt.</span><span class="sxs-lookup"><span data-stu-id="00d58-166">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

<span data-ttu-id="00d58-167">**Codebeispiel 6. Verwenden des ScriptMethod-Attributs mit der UseHttpGet-Eigenschaft.**</span><span class="sxs-lookup"><span data-stu-id="00d58-167">**Listing 6. Using the ScriptMethod attribute with the UseHttpGet property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="00d58-168">Ein Beispiel für die Header, die gesendet werden, wenn die in Auflistung 6 gezeigte Webmethode httpgetecho aufgerufen wird, wird als nächstes angezeigt:</span><span class="sxs-lookup"><span data-stu-id="00d58-168">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="00d58-169">Das ScriptMethod-Attribut kann nicht nur zum Zulassen von HTTP GET-Anforderungen, sondern auch verwendet werden, wenn XML-Antworten von einem Dienst anstelle von JSON zurückgegeben werden müssen.</span><span class="sxs-lookup"><span data-stu-id="00d58-169">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="00d58-170">Ein Webdienst kann z. b. einen RSS-Feed von einer Remote Website abrufen und als XmlDocument-oder XmlElement-Objekt zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="00d58-170">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="00d58-171">Die Verarbeitung der XML-Daten kann dann auf dem Client erfolgen.</span><span class="sxs-lookup"><span data-stu-id="00d58-171">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="00d58-172">In der Liste 7 wird ein Beispiel für die Verwendung der Response Format-Eigenschaft verwendet, um anzugeben, dass XML-Daten von einer Webmethode zurückgegeben werden sollen.</span><span class="sxs-lookup"><span data-stu-id="00d58-172">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

<span data-ttu-id="00d58-173">**Codebeispiel 7: Verwenden des ScriptMethod-Attributs mit der Response Format-Eigenschaft.**</span><span class="sxs-lookup"><span data-stu-id="00d58-173">**Listing 7. Using the ScriptMethod attribute with the ResponseFormat property.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="00d58-174">Die Response Format-Eigenschaft kann auch zusammen mit der XmlSerializeString-Eigenschaft verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-174">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="00d58-175">Die XmlSerializeString-Eigenschaft hat den Standardwert false. Dies bedeutet, dass alle Rückgabe Typen außer Zeichen folgen, die von einer Webmethode zurückgegeben werden, als XML serialisiert werden, wenn die- `ResponseFormat` Eigenschaft auf festgelegt ist `ResponseFormat.Xml` .</span><span class="sxs-lookup"><span data-stu-id="00d58-175">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="00d58-176">Wenn `XmlSerializeString` auf festgelegt ist `true` , werden alle Typen, die von einer Webmethode zurückgegeben werden, als XML-Zeichen folgen Typen serialisiert.</span><span class="sxs-lookup"><span data-stu-id="00d58-176">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="00d58-177">Wenn die Response Format-Eigenschaft den Wert hat, `ResponseFormat.Json` wird die XmlSerializeString-Eigenschaft ignoriert.</span><span class="sxs-lookup"><span data-stu-id="00d58-177">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="00d58-178">In der Liste 8 ist ein Beispiel für die Verwendung der XmlSerializeString-Eigenschaft zum Erzwingen der Serialisierung von Zeichen folgen als XML dargestellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-178">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

<span data-ttu-id="00d58-179">**Codebeispiel 8. Verwenden des ScriptMethod-Attributs mit der XmlSerializeString-Eigenschaft**</span><span class="sxs-lookup"><span data-stu-id="00d58-179">**Listing 8. Using the ScriptMethod attribute with the XmlSerializeString property**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="00d58-180">Der Wert, der durch Aufrufen der in der Liste 8 dargestellten getxmlstring-Webmethode zurückgegeben wird, wird als nächstes angezeigt:</span><span class="sxs-lookup"><span data-stu-id="00d58-180">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="00d58-181">Obwohl das standardmäßige JSON-Format die Gesamtgröße der Anforderungs-und Antwort Nachrichten minimiert und leichter von ASP.NET AJAX-Clients in einem Browser übergreifenden Weise genutzt werden kann, können die Eigenschaften Response Format und XmlSerializeString verwendet werden, wenn Client Anwendungen wie Internet Explorer 5 oder höher davon ausgehen, dass XML-Daten von einer Webmethode zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-181">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="00d58-182">Arbeiten mit komplexen Typen</span><span class="sxs-lookup"><span data-stu-id="00d58-182">Working with Complex Types</span></span>

<span data-ttu-id="00d58-183">In der Liste 5 wurde ein Beispiel für das Zurückgeben eines komplexen Typs mit dem Namen Customer von einem Webdienst gezeigt.</span><span class="sxs-lookup"><span data-stu-id="00d58-183">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="00d58-184">Die Customer-Klasse definiert mehrere verschiedene einfache Typen intern als Eigenschaften wie "FirstName" und "LastName".</span><span class="sxs-lookup"><span data-stu-id="00d58-184">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="00d58-185">Komplexe Typen, die als Eingabeparameter oder Rückgabetyp für eine AJAX-aktivierte Webmethode verwendet werden, werden automatisch in JSON serialisiert, bevor Sie an die Clientseite gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-185">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="00d58-186">Allerdings werden geschachtelte komplexe Typen (die intern in einem anderen Typ definiert sind) dem Client nicht standardmäßig als eigenständige Objekte zur Verfügung gestellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-186">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="00d58-187">In Fällen, in denen ein von einem Webdienst verwendeter, von einem Webdienst verwendeter komplexer Typ auch auf einer Clientseite verwendet werden muss, kann das ASP.NET AJAX GenerateScriptType-Attribut zum Webdienst hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-187">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="00d58-188">Beispielsweise enthält die in der Liste 9 angezeigte customerdetails-Klasse Adress-und Geschlecht-Eigenschaften, die die in der Liste enthaltenen ***komplexen Typen darstellen.***</span><span class="sxs-lookup"><span data-stu-id="00d58-188">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

<span data-ttu-id="00d58-189">**Codebeispiel 9. Die hier gezeigte customerdetails-Klasse enthält zwei komplexe komplexe Typen.**</span><span class="sxs-lookup"><span data-stu-id="00d58-189">**Listing 9. The CustomerDetails class shown here contains two nested complex types.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="00d58-190">Die Adress-und Geschlecht-Objekte, die in der customerdetails-Klasse in der Liste 9 definiert sind, werden nicht automatisch zur Verwendung auf der Clientseite über JavaScript zur Verfügung gestellt, da es sich um geschachtelte Typen handelt (Adresse ist eine Klasse und Geschlecht ist eine Enumeration).</span><span class="sxs-lookup"><span data-stu-id="00d58-190">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="00d58-191">In Fällen, in denen ein geschachtelter Typ, der in einem Webdienst verwendet wird, auf der Clientseite verfügbar sein muss, kann das zuvor erwähnte GenerateScriptType-Attribut verwendet werden (siehe Codebeispiel 10).</span><span class="sxs-lookup"><span data-stu-id="00d58-191">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="00d58-192">Dieses Attribut kann mehrmals hinzugefügt werden, wenn verschiedene, komplexe komplexe Typen von einem Dienst zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-192">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="00d58-193">Sie kann direkt auf die Webdienst Klasse oder über bestimmte Webmethoden angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-193">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

<span data-ttu-id="00d58-194">**Codebeispiel 10. Verwenden des generatescriptservice-Attributs zum Definieren von für den Client verfügbaren Typen.**</span><span class="sxs-lookup"><span data-stu-id="00d58-194">**Listing 10. Using the GenerateScriptService attribute to define nested types that should be available to the client.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="00d58-195">Durch Anwenden des `GenerateScriptType` -Attributs auf den Webdienst werden die Adress-und die Geschlecht-Typen automatisch zur Verwendung durch Client seitigen ASP.NET AJAX-JavaScript-Code zur Verfügung gestellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-195">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="00d58-196">Ein Beispiel für das JavaScript, das automatisch generiert und an den Client gesendet wird, indem das GenerateScriptType-Attribut für einen Webdienst hinzugefügt wird, wird in der Liste 11 angezeigt.</span><span class="sxs-lookup"><span data-stu-id="00d58-196">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="00d58-197">Weiter unten in diesem Artikel erfahren Sie, wie Sie die folgenden komplexen Typen verwenden.</span><span class="sxs-lookup"><span data-stu-id="00d58-197">You'll see how to use nested complex types later in the article.</span></span>

<span data-ttu-id="00d58-198">**Codebeispiel 11. Die für eine ASP.NET AJAX-Seite zur Verfügung gestellten komplexen komplexen Typen.**</span><span class="sxs-lookup"><span data-stu-id="00d58-198">**Listing 11. Nested complex types made available to an ASP.NET AJAX page.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="00d58-199">Nachdem Sie nun gesehen haben, wie Sie Webdienste erstellen und für ASP.NET AJAX-Seiten zugänglich machen, betrachten wir nun die Erstellung und Verwendung von JavaScript-Proxys, damit Daten abgerufen oder an Webdienste gesendet werden können.</span><span class="sxs-lookup"><span data-stu-id="00d58-199">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="00d58-200">JavaScript-Proxys</span><span class="sxs-lookup"><span data-stu-id="00d58-200">Creating JavaScript Proxies</span></span>

<span data-ttu-id="00d58-201">Das Aufrufen eines Standardweb Diensts (.net oder eine andere Plattform) umfasst in der Regel das Erstellen eines Proxy Objekts, das Sie vor den Komplexitäten zum Senden von SOAP-Anforderungs-und Antwort Nachrichten</span><span class="sxs-lookup"><span data-stu-id="00d58-201">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="00d58-202">Mit ASP.NET AJAX-Webdienst aufrufen können JavaScript-Proxys erstellt und verwendet werden, um problemlos Dienste aufzurufen, ohne sich Gedanken über das Serialisieren und Deserialisieren von JSON-Nachrichten</span><span class="sxs-lookup"><span data-stu-id="00d58-202">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="00d58-203">JavaScript-Proxys können automatisch mit dem ASP.NET AJAX-ScriptManager-Steuerelement generiert werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-203">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="00d58-204">Das Erstellen eines JavaScript-Proxys, der Webdienste aufzurufen, erfolgt mithilfe der Services-Eigenschaft von ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="00d58-204">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="00d58-205">Mit dieser Eigenschaft können Sie einen oder mehrere Dienste definieren, die von einer ASP.NET AJAX-Seite asynchron aufgerufen werden können, um Daten zu senden oder zu empfangen, ohne dass Post Back Vorgänge erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="00d58-205">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="00d58-206">Sie definieren einen Dienst, indem Sie das ASP.NET AJAX `ServiceReference` -Steuerelement verwenden und die Webdienst-URL der-Eigenschaft des Steuer Elements zuweisen `Path` .</span><span class="sxs-lookup"><span data-stu-id="00d58-206">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="00d58-207">In der Liste 12 wird ein Beispiel für den Verweis auf einen Dienst mit dem Namen "CustomersService. asmx" veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="00d58-207">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

<span data-ttu-id="00d58-208">**Auflistung 12. Definieren eines Webdiensts, der auf einer ASP.NET AJAX-Seite verwendet wird.**</span><span class="sxs-lookup"><span data-stu-id="00d58-208">**Listing 12. Defining a Web Service used in an ASP.NET AJAX page.**</span></span>

<span data-ttu-id="00d58-209">Durch das Hinzufügen eines Verweises auf "CustomersService. asmx" über das ScriptManager-Steuerelement wird ein JavaScript-Proxy dynamisch generiert und auf die Seite verwiesen.</span><span class="sxs-lookup"><span data-stu-id="00d58-209">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="00d58-210">Der Proxy wird mithilfe des &lt; &gt; Skripttags eingebettet und dynamisch geladen, indem die Datei CustomersService. asmx aufgerufen und/JS am Ende der Datei angehängt wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-210">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="00d58-211">Im folgenden Beispiel wird gezeigt, wie der JavaScript-Proxy auf der Seite eingebettet wird, wenn das Debuggen in web.config deaktiviert ist:</span><span class="sxs-lookup"><span data-stu-id="00d58-211">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> <span data-ttu-id="00d58-212">*>[!NOTE]Wenn Sie den tatsächlich generierten JavaScript-Proxycode anzeigen möchten, können Sie die URL für den gewünschten .NET-Webdienst in das Adressfeld von Internet Explorer eingeben und/JS am Ende der Datei anfügen.*</span><span class="sxs-lookup"><span data-stu-id="00d58-212">*> [!NOTE] If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.*</span></span>

<span data-ttu-id="00d58-213">Wenn das Debuggen in aktiviert ist web.config wird eine Debugversion des JavaScript-Proxys auf der Seite eingebettet, wie im folgenden dargestellt:</span><span class="sxs-lookup"><span data-stu-id="00d58-213">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="00d58-214">Der von ScriptManager erstellte JavaScript-Proxy kann auch direkt in die Seite eingebettet werden, anstatt mit dem &lt; &gt; src-Attribut des Skripttags darauf zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="00d58-214">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="00d58-215">Dies kann erreicht werden, indem die InlineScript-Eigenschaft des servicereferenzierungssteuerelements auf true festgelegt wird (der Standardwert ist false).</span><span class="sxs-lookup"><span data-stu-id="00d58-215">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="00d58-216">Dies kann hilfreich sein, wenn ein Proxy nicht über mehrere Seiten hinweg gemeinsam genutzt wird und Sie die Anzahl der Netzwerk Aufrufe verringern möchten, die an den Server gerichtet sind.</span><span class="sxs-lookup"><span data-stu-id="00d58-216">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="00d58-217">Wenn InlineScript auf true festgelegt ist, wird das Proxy Skript nicht vom Browser zwischengespeichert, sodass der Standardwert false in Fällen empfohlen wird, in denen der Proxy von mehreren Seiten in einer ASP.NET AJAX-Anwendung verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-217">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="00d58-218">Im folgenden wird ein Beispiel für die Verwendung der InlineScript-Eigenschaft angezeigt:</span><span class="sxs-lookup"><span data-stu-id="00d58-218">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="00d58-219">JavaScript-Proxys</span><span class="sxs-lookup"><span data-stu-id="00d58-219">Using JavaScript Proxies</span></span>

<span data-ttu-id="00d58-220">Sobald auf einen Webdienst durch eine ASP.NET AJAX-Seite mithilfe des ScriptManager-Steuer Elements verwiesen wird, kann ein-Rückruf an den Webdienst gesendet werden, und die zurückgegebenen Daten können mithilfe von Rückruf Funktionen verarbeitet werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-220">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="00d58-221">Ein Webdienst wird aufgerufen, indem auf seinen Namespace (sofern vorhanden), den Klassennamen und den Namen der Webmethode verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-221">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="00d58-222">Alle Parameter, die an den Webdienst übermittelt werden, können zusammen mit einer Rückruffunktion definiert werden, die die zurückgegebenen Daten verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="00d58-222">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="00d58-223">Ein Beispiel für die Verwendung eines JavaScript-Proxys zum Aufrufen einer Webmethode namens getcustomersbycountry () finden Sie in der Liste 13.</span><span class="sxs-lookup"><span data-stu-id="00d58-223">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="00d58-224">Die getcustomersbycountry ()-Funktion wird aufgerufen, wenn ein Endbenutzer auf eine Schaltfläche auf der Seite klickt.</span><span class="sxs-lookup"><span data-stu-id="00d58-224">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

<span data-ttu-id="00d58-225">**Codebeispiel 13. Aufrufen eines Webdiensts mit einem JavaScript-Proxy**</span><span class="sxs-lookup"><span data-stu-id="00d58-225">**Listing 13. Calling a Web Service with a JavaScript proxy.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="00d58-226">Dieser Rückruf verweist auf den interfacetraining-Namespace, die CustomersService-Klasse und die getcustomersbycountry-Webmethode, die im Dienst definiert sind.</span><span class="sxs-lookup"><span data-stu-id="00d58-226">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="00d58-227">Sie übergibt einen Länder Wert, der aus einem Textfeld abgerufen wurde, sowie eine Rückruffunktion mit dem Namen "onwsrequestcomplete", die aufgerufen werden soll, wenn der asynchrone Webdienst Aufruf zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-227">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="00d58-228">Onwsrequestcomplete verarbeitet das Array von Kunden Objekten, die vom Dienst zurückgegeben werden, und konvertiert sie in eine Tabelle, die auf der Seite angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-228">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="00d58-229">Die aus dem-Befehl generierte Ausgabe ist in Abbildung 1 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-229">The output generated from the call is shown in Figure 1.</span></span>

<span data-ttu-id="00d58-230">[![Binden von Daten, die durch einen asynchronen AJAX-Aufrufe eines Webdiensts abgerufen werden.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="00d58-230">[![Binding data obtained by making an asynchronous AJAX call to a Web Service.](understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)</span></span>

<span data-ttu-id="00d58-231">**Abbildung 1**: Binden von Daten, die durch das Ausführen eines asynchronen AJAX-Aufrufes an einen Webdienst abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-231">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="00d58-232">([Klicken Sie, um das Bild in voller Größe anzuzeigen](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="00d58-232">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>

<span data-ttu-id="00d58-233">JavaScript-Proxys können auch unidirektionale Aufrufe an Webdienste durchführen, wenn eine Webmethode aufgerufen werden soll, der Proxy jedoch nicht auf eine Antwort warten sollte.</span><span class="sxs-lookup"><span data-stu-id="00d58-233">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="00d58-234">Beispielsweise können Sie einen Webdienst zum Starten eines Prozesses, z. b. eines Arbeits Flusses, abrufen, jedoch nicht auf einen Rückgabewert vom Dienst warten.</span><span class="sxs-lookup"><span data-stu-id="00d58-234">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="00d58-235">In Fällen, in denen ein unidirektionaler Aufrufs an einen Dienst vorgenommen werden muss, kann die in der Liste 13 gezeigte Rückruffunktion einfach ausgelassen werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-235">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="00d58-236">Da keine Rückruffunktion definiert ist, wartet das Proxy Objekt nicht, bis der Webdienst Daten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="00d58-236">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="00d58-237">Behandeln von Fehlern</span><span class="sxs-lookup"><span data-stu-id="00d58-237">Handling Errors</span></span>

<span data-ttu-id="00d58-238">Asynchrone Rückrufe an Webdienste können auf unterschiedliche Arten von Fehlern stoßen, z. b. wenn das Netzwerk ausfällt, der Webdienst nicht verfügbar ist oder eine Ausnahme zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-238">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="00d58-239">Glücklicherweise ermöglichen JavaScript-Proxy Objekte, die vom ScriptManager generiert werden, dass mehrere Rückrufe definiert werden, um Fehler und Fehler zusätzlich zu dem zuvor gezeigten Erfolgs Rückruf zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="00d58-239">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="00d58-240">Eine Fehler Rückruffunktion kann direkt nach der Standard Rückruffunktion im-Befehl der Webmethode definiert werden, wie in der Liste 14 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-240">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

<span data-ttu-id="00d58-241">**Codebeispiel 14. Definieren einer Fehler Rückruffunktion und Anzeigen von Fehlern.**</span><span class="sxs-lookup"><span data-stu-id="00d58-241">**Listing 14. Defining an error callback function and displaying errors.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="00d58-242">Alle Fehler, die auftreten, wenn der Webdienst aufgerufen wird, veranlassen, dass die onwsrequestfailed ()-Rückruffunktion aufgerufen wird, die ein Objekt akzeptiert, das den Fehler als Parameter darstellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-242">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="00d58-243">Das Error-Objekt stellt mehrere verschiedene Funktionen zur Verfügung, um die Ursache des Fehlers zu ermitteln, und gibt an, ob der-Timeout abgebrochen wurde. In der Liste 14 wird ein Beispiel für die Verwendung der verschiedenen Fehlerfunktionen veranschaulicht, und Abbildung 2 zeigt ein Beispiel für die Ausgabe, die von den Funktionen generiert wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-243">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>

<span data-ttu-id="00d58-244">[![Ausgabe, die durch Aufrufen von ASP.NET AJAX-Fehlerfunktionen generiert wird.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="00d58-244">[![Output generated by calling ASP.NET AJAX error functions.](understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)</span></span>

<span data-ttu-id="00d58-245">**Abbildung 2**: Ausgabe, die durch den Aufruf von ASP.NET AJAX-Fehlerfunktionen generiert wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-245">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="00d58-246">([Klicken Sie, um das Bild in voller Größe anzuzeigen](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="00d58-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>

## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="00d58-247">Verarbeiten von von einem Webdienst zurückgegebenen XML-Daten</span><span class="sxs-lookup"><span data-stu-id="00d58-247">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="00d58-248">Früher haben Sie gesehen, wie eine Webmethode unformatierte XML-Daten zurückgeben kann, indem das ScriptMethod-Attribut zusammen mit der Response Format-Eigenschaft verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-248">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="00d58-249">Wenn Response Format auf ResponseFormat.Xml festgelegt ist, werden vom Webdienst zurückgegebene Daten als XML und nicht als JSON serialisiert.</span><span class="sxs-lookup"><span data-stu-id="00d58-249">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="00d58-250">Dies kann hilfreich sein, wenn XML-Daten für die Verarbeitung mithilfe von JavaScript oder XSLT direkt an den Client übermittelt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="00d58-250">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="00d58-251">Zum aktuellen Zeitpunkt stellt Internet Explorer 5 oder höher das beste Client seitige Objektmodell zum Durchsuchen und Filtern von XML-Daten aufgrund der integrierten Unterstützung für MSXML bereit.</span><span class="sxs-lookup"><span data-stu-id="00d58-251">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="00d58-252">Das Abrufen von XML-Daten von einem Webdienst unterscheidet sich nicht vom Abrufen anderer Datentypen.</span><span class="sxs-lookup"><span data-stu-id="00d58-252">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="00d58-253">Starten Sie, indem Sie den JavaScript-Proxy aufrufen, um die entsprechende Funktion aufzurufen und eine Rückruffunktion zu definieren.</span><span class="sxs-lookup"><span data-stu-id="00d58-253">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="00d58-254">Nachdem der Rückruf zurückgegeben wurde, können Sie die Daten in der Rückruffunktion verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="00d58-254">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="00d58-255">In der Liste 15 wird ein Beispiel für den Aufruf einer Webmethode namens getrssfeed () gezeigt, die ein XmlElement-Objekt zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="00d58-255">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="00d58-256">Getrssfeed () akzeptiert einen einzelnen Parameter, der die URL für den abzurufenden RSS-Feed darstellt.</span><span class="sxs-lookup"><span data-stu-id="00d58-256">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

<span data-ttu-id="00d58-257">**Codebeispiel 15. Arbeiten mit XML-Daten, die von einem Webdienst zurückgegeben werden.**</span><span class="sxs-lookup"><span data-stu-id="00d58-257">**Listing 15. Working with XML data returned from a Web Service.**</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="00d58-258">In diesem Beispiel wird eine URL an einen RSS-Feed weitergeleitet, und die zurückgegebenen XML-Daten werden in der onwsrequestcomplete ()-Funktion verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="00d58-258">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="00d58-259">Onwsrequestcomplete () prüft zunächst, ob der Browser Internet Explorer ist, um zu ermitteln, ob der MSXML-Parser verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="00d58-259">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="00d58-260">Wenn dies der Fall ist, wird eine XPath-Anweisung verwendet, um alle &lt; Element &gt; Tags im RSS-Feed zu suchen.</span><span class="sxs-lookup"><span data-stu-id="00d58-260">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="00d58-261">Jedes Element wird dann durchlaufen, und die zugeordneten &lt; Titel und Verknüpfungs &gt; &lt; &gt; Tags werden gefunden und verarbeitet, um die Daten jedes Elements anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="00d58-261">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="00d58-262">Abbildung 3 zeigt ein Beispiel für die Ausgabe, die bei einem ASP.NET AJAX-Aufrufe über einen JavaScript-Proxy zur getrssfeed ()-Webmethode generiert wurde.</span><span class="sxs-lookup"><span data-stu-id="00d58-262">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="00d58-263">Behandeln komplexer Typen</span><span class="sxs-lookup"><span data-stu-id="00d58-263">Handling Complex Types</span></span>

<span data-ttu-id="00d58-264">Komplexe Typen, die von einem Webdienst akzeptiert oder zurückgegeben werden, werden automatisch über einen JavaScript-Proxy verfügbar gemacht.</span><span class="sxs-lookup"><span data-stu-id="00d58-264">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="00d58-265">Es ist jedoch nicht möglich, auf die auf der Clientseite basierenden komplexen Typen direkt zu zugreifen, es sei denn, das GenerateScriptType-Attribut wird wie zuvor erläutert auf den Dienst angewendet.</span><span class="sxs-lookup"><span data-stu-id="00d58-265">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="00d58-266">Warum möchten Sie einen geschosteten komplexen Typ auf der Clientseite verwenden?</span><span class="sxs-lookup"><span data-stu-id="00d58-266">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="00d58-267">Um diese Frage zu beantworten, gehen Sie davon aus, dass eine ASP.NET AJAX-Seite Kundendaten anzeigt und es Endbenutzern ermöglicht, die Adresse eines Kunden zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="00d58-267">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="00d58-268">Wenn der Webdienst angibt, dass der Adresstyp (ein komplexer Typ, der in einer customerdetails-Klasse definiert ist) an den Client gesendet werden kann, kann der Aktualisierungsprozess in separate Funktionen aufgeteilt werden, um die Wiederverwendung des Codes zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="00d58-268">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>

<span data-ttu-id="00d58-269">[![Ausgabe aus dem Aufrufen eines Webdiensts, der RSS-Daten zurückgibt.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="00d58-269">[![Output creating from calling a Web Service that returns RSS data.](understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)</span></span>

<span data-ttu-id="00d58-270">**Abbildung 3**: Ausgabe aus dem Aufrufen eines Webdiensts, der RSS-Daten zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="00d58-270">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="00d58-271">([Klicken Sie, um das Bild in voller Größe anzuzeigen](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="00d58-271">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>

<span data-ttu-id="00d58-272">Codebeispiel 16 zeigt ein Beispiel für Client seitigen Code, der ein Adress Objekt aufruft, das in einem Modell Namespace definiert ist, es mit aktualisierten Daten füllt und es der Address-Eigenschaft eines customerdetails-Objekts zuweist.</span><span class="sxs-lookup"><span data-stu-id="00d58-272">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="00d58-273">Das customerdetails-Objekt wird dann zur Verarbeitung an den Webdienst weitergegeben.</span><span class="sxs-lookup"><span data-stu-id="00d58-273">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

<span data-ttu-id="00d58-274">**Codebeispiel 16. Verwenden von komplexen komplexen Typen**</span><span class="sxs-lookup"><span data-stu-id="00d58-274">**Listing 16. Using nested complex types**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="00d58-275">Erstellen und Verwenden von Seiten Methoden</span><span class="sxs-lookup"><span data-stu-id="00d58-275">Creating and Using Page Methods</span></span>

<span data-ttu-id="00d58-276">Webdienste stellen eine hervorragende Möglichkeit dar, wiederverwendbare Dienste für eine Vielzahl von Clients verfügbar zu machen, einschließlich ASP.NET AJAX-Seiten.</span><span class="sxs-lookup"><span data-stu-id="00d58-276">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="00d58-277">Es gibt jedoch Fälle, in denen eine Seite Daten abrufen muss, die nie von anderen Seiten verwendet oder freigegeben werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-277">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="00d58-278">In diesem Fall scheint eine ASMX-Datei so zu sein, dass die Seite auf die Daten zugreifen kann, da der Dienst nur von einer einzelnen Seite verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-278">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="00d58-279">ASP.NET AJAX bietet einen weiteren Mechanismus zum Erstellen von Webdienst ähnlichen aufrufen, ohne eigenständige ASMX-Dateien zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="00d58-279">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="00d58-280">Dies erfolgt mithilfe einer Technik, die als "Seiten Methoden" bezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-280">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="00d58-281">Seiten Methoden sind statische (Shared in VB.net) Methoden, die direkt in eine Seite oder eine Code neben Datei eingebettet sind, auf die das WebMethod-Attribut angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-281">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="00d58-282">Durch Anwenden des WebMethod-Attributs können Sie mithilfe eines speziellen JavaScript-Objekts namens PageMethods aufgerufen werden, das zur Laufzeit dynamisch erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-282">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="00d58-283">Das PageMethods-Objekt fungiert als Proxy, der Sie vor dem JSON-Serialisierungs-/Deserialisierungsprozess schützt.</span><span class="sxs-lookup"><span data-stu-id="00d58-283">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="00d58-284">Beachten Sie, dass Sie die EnablePageMethods-Eigenschaft von ScriptManager auf true festlegen müssen, damit Sie das PageMethods-Objekt verwenden können.</span><span class="sxs-lookup"><span data-stu-id="00d58-284">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="00d58-285">In der Liste 17 finden Sie ein Beispiel für die Definition von zwei Seiten Methoden in einer ASP.NET-Code-neben Klasse.</span><span class="sxs-lookup"><span data-stu-id="00d58-285">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="00d58-286">Diese Methoden rufen Daten von einer Geschäfts Schicht Klasse ab, die sich im APP- \_ Code Ordner der Website befindet.</span><span class="sxs-lookup"><span data-stu-id="00d58-286">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

<span data-ttu-id="00d58-287">**Codebeispiel 17. Definieren von Seiten Methoden**</span><span class="sxs-lookup"><span data-stu-id="00d58-287">**Listing 17. Defining page methods.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="00d58-288">Wenn ScriptManager das vorhanden sein von Webmethoden auf der Seite erkennt, generiert es einen dynamischen Verweis auf das zuvor erwähnte PageMethods-Objekt.</span><span class="sxs-lookup"><span data-stu-id="00d58-288">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="00d58-289">Der Aufruf einer Webmethode erfolgt durch Verweisen auf die PageMethods-Klasse, gefolgt vom Namen der Methode und allen erforderlichen Parameterdaten, die übergeben werden sollten.</span><span class="sxs-lookup"><span data-stu-id="00d58-289">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="00d58-290">In der Liste 18 werden Beispiele für das Aufrufen der zuvor gezeigten zwei Seiten Methoden veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="00d58-290">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

<span data-ttu-id="00d58-291">**Codebeispiel 18. Aufrufen von Seiten Methoden mit dem PageMethods JavaScript-Objekt.**</span><span class="sxs-lookup"><span data-stu-id="00d58-291">**Listing 18. Calling page methods with the PageMethods JavaScript object.**</span></span>

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="00d58-292">Die Verwendung des PageMethods-Objekts ähnelt sehr der Verwendung eines JavaScript-Proxy Objekts.</span><span class="sxs-lookup"><span data-stu-id="00d58-292">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="00d58-293">Sie geben zuerst alle Parameterdaten an, die an die Seiten Methode übergeben werden sollen, und definieren dann die Rückruffunktion, die aufgerufen werden soll, wenn der asynchrone Aufruf zurückgegeben wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-293">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="00d58-294">Ein Fehler Rückruf kann auch angegeben werden (in der Liste 14 finden Sie ein Beispiel für das Behandeln von Fehlern).</span><span class="sxs-lookup"><span data-stu-id="00d58-294">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="00d58-295">AutoCompleteExtender und das ASP.NET AJAX-Toolkit</span><span class="sxs-lookup"><span data-stu-id="00d58-295">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="00d58-296">Das ASP.NET AJAX Toolkit (verfügbar [http://ajax.asp.net](http://ajax.asp.net) über) bietet mehrere Steuerelemente, die für den Zugriff auf Webdienste verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="00d58-296">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="00d58-297">Insbesondere enthält das Toolkit ein nützliches Steuerelement mit dem Namen `AutoCompleteExtender` , das verwendet werden kann, um Webdienste aufzurufen und Daten auf Seiten anzuzeigen, ohne JavaScript-Code schreiben zu müssen.</span><span class="sxs-lookup"><span data-stu-id="00d58-297">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="00d58-298">Das AutoCompleteExtender-Steuerelement kann verwendet werden, um vorhandene Funktionen eines Textfelds zu erweitern und Benutzern das Auffinden von Daten zu erleichtern, nach denen Sie suchen.</span><span class="sxs-lookup"><span data-stu-id="00d58-298">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="00d58-299">Beim eingeben in ein Textfeld kann das Steuerelement verwendet werden, um einen Webdienst abzufragen und die Ergebnisse unter dem Textfeld dynamisch anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="00d58-299">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="00d58-300">Abbildung 4 zeigt ein Beispiel für die Verwendung des AutoCompleteExtender-Steuer Elements, um Kunden-IDs für eine Support Anwendung anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="00d58-300">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="00d58-301">Wenn der Benutzer unterschiedliche Zeichen in das Textfeld eingibt, werden unterschiedliche Elemente basierend auf der Eingabe angezeigt.</span><span class="sxs-lookup"><span data-stu-id="00d58-301">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="00d58-302">Benutzer können dann die gewünschte Kunden-ID auswählen.</span><span class="sxs-lookup"><span data-stu-id="00d58-302">Users can then select the desired customer id.</span></span>

<span data-ttu-id="00d58-303">Die Verwendung von AutoCompleteExtender innerhalb einer ASP.NET AJAX-Seite erfordert, dass die AjaxControlToolkit.dll-Assembly dem Ordner "bin" der Website hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-303">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="00d58-304">Nachdem die Toolkit-Assembly hinzugefügt wurde, möchten Sie in web.config darauf verweisen, sodass die darin enthaltenen Steuerelemente für alle Seiten in einer Anwendung verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="00d58-304">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="00d58-305">Dies kann durch Hinzufügen des folgenden Tags innerhalb des Tags der web.config Steuerelemente erreicht werden &lt; &gt; :</span><span class="sxs-lookup"><span data-stu-id="00d58-305">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="00d58-306">In Fällen, in denen Sie nur das-Steuerelement auf einer bestimmten Seite verwenden müssen, können Sie darauf verweisen, indem Sie die Reference-Direktive am oberen Rand einer Seite hinzufügen, anstatt web.config zu aktualisieren:</span><span class="sxs-lookup"><span data-stu-id="00d58-306">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]

<span data-ttu-id="00d58-307">[![Verwenden des AutoCompleteExtender-Steuer Elements.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="00d58-307">[![Using the AutoCompleteExtender control.](understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)</span></span>

<span data-ttu-id="00d58-308">**Abbildung 4**: Verwenden des AutoCompleteExtender-Steuer Elements</span><span class="sxs-lookup"><span data-stu-id="00d58-308">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="00d58-309">([Klicken Sie, um das Bild in voller Größe anzuzeigen](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="00d58-309">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>

<span data-ttu-id="00d58-310">Nachdem die Website für die Verwendung des ASP.NET AJAX-Toolkits konfiguriert wurde, kann der Seite ein AutoCompleteExtender-Steuerelement hinzugefügt werden, ähnlich wie Sie ein reguläres ASP.NET-Server Steuerelement hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="00d58-310">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="00d58-311">In der Liste 19 wird ein Beispiel für die Verwendung des-Steuer Elements zum Abrufen eines Webdiensts gezeigt.</span><span class="sxs-lookup"><span data-stu-id="00d58-311">Listing 19 shows an example of using the control to call a Web Service.</span></span>

<span data-ttu-id="00d58-312">**Codebeispiel 19. Verwenden des ASP.NET AJAX Toolkit AutoCompleteExtender-Steuer Elements.**</span><span class="sxs-lookup"><span data-stu-id="00d58-312">**Listing 19. Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="00d58-313">Der AutoCompleteExtender verfügt über verschiedene Eigenschaften, einschließlich der Standard-ID und der runat-Eigenschaften, die auf Server Steuerelementen gefunden werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-313">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="00d58-314">Darüber hinaus können Sie mit dieser Option definieren, wie viele Zeichen ein Endbenutzer eingibt, bevor der Webdienst Daten abgefragt.</span><span class="sxs-lookup"><span data-stu-id="00d58-314">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="00d58-315">Die in der Liste 19 angezeigte MinimumPrefixLength-Eigenschaft bewirkt, dass der Dienst jedes Mal aufgerufen wird, wenn ein Zeichen in das Textfeld eingegeben wird.</span><span class="sxs-lookup"><span data-stu-id="00d58-315">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="00d58-316">Sie sollten darauf achten, diesen Wert festzulegen, da der Benutzer jedes Mal ein Zeichen eingibt, dass der Webdienst nach Werten sucht, die mit den Zeichen im Textfeld verglichen werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-316">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="00d58-317">Der aufzurufende Webdienst und die Ziel-Webmethode werden mithilfe der servicepath-bzw. ServiceMethod-Eigenschaften definiert.</span><span class="sxs-lookup"><span data-stu-id="00d58-317">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="00d58-318">Schließlich gibt die TargetControlID-Eigenschaft an, an welches Textfeld das AutoCompleteExtender-Steuerelement gebunden werden soll.</span><span class="sxs-lookup"><span data-stu-id="00d58-318">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="00d58-319">Für den aufgerufenen Webdienst muss das ScriptService-Attribut wie bereits erläutert angewendet werden, und die Ziel-Webmethode muss zwei Parameter mit den Namen "PrefixText" und "count" akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="00d58-319">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="00d58-320">Der PrefixText-Parameter stellt die vom Endbenutzer eingegebenen Zeichen dar, und der count-Parameter gibt an, wie viele Elemente zurückgegeben werden sollen (der Standardwert ist 10).</span><span class="sxs-lookup"><span data-stu-id="00d58-320">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="00d58-321">In der Liste 20 wird ein Beispiel für die getcustomerids-Webmethode angezeigt, die vom AutoCompleteExtender-Steuerelement aufgerufen wird, das zuvor in der Liste 19</span><span class="sxs-lookup"><span data-stu-id="00d58-321">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="00d58-322">Die Webmethode Ruft eine Geschäfts Schicht Methode auf, die wiederum eine datenebenenmethode aufruft, die das Filtern der Daten und das Zurückgeben der übereinstimmenden Ergebnisse behandelt.</span><span class="sxs-lookup"><span data-stu-id="00d58-322">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="00d58-323">Der Code für die Datenschicht Methode wird in der Liste 21 angezeigt.</span><span class="sxs-lookup"><span data-stu-id="00d58-323">The code for the data layer method is shown in Listing 21.</span></span>

<span data-ttu-id="00d58-324">**Auflistung 20. Filtern von Daten, die vom AutoCompleteExtender-Steuerelement gesendet werden.**</span><span class="sxs-lookup"><span data-stu-id="00d58-324">**Listing 20. Filtering data sent from the AutoCompleteExtender control.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

<span data-ttu-id="00d58-325">**Codebeispiel 21. Filtern von Ergebnissen basierend auf der Eingabe von Endbenutzern.**</span><span class="sxs-lookup"><span data-stu-id="00d58-325">**Listing 21. Filtering results based upon end user input.**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="00d58-326">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="00d58-326">Conclusion</span></span>

<span data-ttu-id="00d58-327">ASP.NET AJAX bietet hervorragende Unterstützung für das Aufrufen von Webdiensten, ohne viel benutzerdefinierten JavaScript-Code zum Verarbeiten der Anforderungs-und Antwort Nachrichten zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="00d58-327">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="00d58-328">In diesem Artikel haben Sie erfahren, wie Sie .NET-Webdienste mit AJAX aktivieren, damit sie JSON-Nachrichten verarbeiten und JavaScript-Proxys mit dem ScriptManager-Steuerelement definieren können.</span><span class="sxs-lookup"><span data-stu-id="00d58-328">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="00d58-329">Sie haben auch gesehen, wie JavaScript-Proxys verwendet werden können, um Webdienste aufzurufen, einfache und komplexe Typen zu verarbeiten und Fehler zu behandeln.</span><span class="sxs-lookup"><span data-stu-id="00d58-329">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="00d58-330">Schließlich haben Sie gesehen, wie Seiten Methoden verwendet werden können, um den Prozess der Erstellung und Erstellung von Webdienst aufrufen zu vereinfachen, und wie das AutoCompleteExtender-Steuerelement den Endbenutzern bei der Eingabehilfe zur Verfügung stellen kann.</span><span class="sxs-lookup"><span data-stu-id="00d58-330">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="00d58-331">Obwohl das in ASP.NET AJAX verfügbare Update Panel sicherlich die Wahl für viele AJAX-Programmierer ist, ist dies aufgrund seiner Einfachheit von Bedeutung. das wissen, wie Webdienste über JavaScript-Proxys aufgerufen werden können, kann in vielen Anwendungen nützlich sein.</span><span class="sxs-lookup"><span data-stu-id="00d58-331">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="00d58-332">Basierten</span><span class="sxs-lookup"><span data-stu-id="00d58-332">Bio</span></span>

<span data-ttu-id="00d58-333">Dan Wahlin (Microsoft Most Valuable Professional für ASP.net und XML Web Services) ist ein .net-Entwicklungs Dozenten und-architekturberater bei Interface Technical Training ( [http://www.interfacett.com](http://www.interfacett.com) ).</span><span class="sxs-lookup"><span data-stu-id="00d58-333">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="00d58-334">Dan gründete die XML for ASP.NET Developers-Website ([www.XMLforASP.net](http://www.XMLforASP.NET)), ist im Büro des INETA-Referenten und spricht auf mehreren Konferenzen.</span><span class="sxs-lookup"><span data-stu-id="00d58-334">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="00d58-335">Dan hat eine professionelle Windows-DNA (Wrox), ASP.net: Tipps, Tutorials und Code (Sams), ASP.NET 1,1 Insider Solutions, Professional ASP.NET 2,0 AJAX (Wrox), ASP.NET 2,0 MVP-Hacks und erstellte XML for ASP.NET Developers (Sams) verfasst.</span><span class="sxs-lookup"><span data-stu-id="00d58-335">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="00d58-336">Beim Schreiben von Code, Artikeln oder Büchern hat Dan das Schreiben und Aufzeichnen von Musik und das Spielen von Golf und Basketball mit seiner Frau und ihren Kindern.</span><span class="sxs-lookup"><span data-stu-id="00d58-336">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="00d58-337">Scott Cate arbeitet seit 1997 mit Microsoft-Webtechnologien und ist der Präsident von myKB.com ([www.myKB.com](http://www.myKB.com)), wo er sich darauf spezialisiert hat, ASP.NET basierte Anwendungen zu schreiben, die sich auf die Software Lösungen der Wissensdatenbank konzentrieren.</span><span class="sxs-lookup"><span data-stu-id="00d58-337">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="00d58-338">Scott kann per e-Mail unter oder in [scott.cate@myKB.com](mailto:scott.cate@myKB.com) seinem Blog unter [ScottCate.com](http://ScottCate.com) kontaktiert werden.</span><span class="sxs-lookup"><span data-stu-id="00d58-338">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="00d58-339">[Zurück](understanding-asp-net-ajax-localization.md)
> [Weiter](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="00d58-339">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>
