---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
title: Konfigurieren einer Website, die Anwendungsdienste verwendetC#() | Microsoft-Dokumentation
author: rick-anderson
description: In ASP.NET Version 2,0 wurde eine Reihe von Anwendungsdiensten eingeführt, die Teil der .NET Framework sind und als eine Suite von Baustein Diensten fungieren, die yo...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 1e33d1c6-3f9f-4c26-81e2-2a8f8907bb05
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-a-website-that-uses-application-services-cs
msc.type: authoredcontent
ms.openlocfilehash: 72aaca84b8c8d6e558d4c946faa57fa999d48bf8
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2019
ms.locfileid: "74570064"
---
# <a name="configuring-a-website-that-uses-application-services-c"></a><span data-ttu-id="a0799-103">Konfigurieren einer Website mit Anwendungsdiensten (C#)</span><span class="sxs-lookup"><span data-stu-id="a0799-103">Configuring a Website that Uses Application Services (C#)</span></span>

<span data-ttu-id="a0799-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a0799-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a0799-105">[Code herunterladen](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) oder [PDF herunterladen](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="a0799-105">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_09_CS.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial09_AppServicesConfig_cs.pdf)</span></span>

> <span data-ttu-id="a0799-106">In ASP.NET Version 2,0 wurde eine Reihe von Anwendungsdiensten eingeführt, die Teil der .NET Framework sind und als eine Reihe von Baustein Diensten dienen, mit denen Sie Ihrer Webanwendung umfangreiche Funktionen hinzufügen können.</span><span class="sxs-lookup"><span data-stu-id="a0799-106">ASP.NET version 2.0 introduced a series of application services, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="a0799-107">In diesem Tutorial wird erläutert, wie Sie eine Website in der Produktionsumgebung für die Verwendung von Anwendungsdiensten konfigurieren und häufige Probleme beim Verwalten von Benutzerkonten und Rollen in der Produktionsumgebung beheben.</span><span class="sxs-lookup"><span data-stu-id="a0799-107">This tutorial explores how to configure a website in the production environment to use application services and addresses common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="introduction"></a><span data-ttu-id="a0799-108">Einführung</span><span class="sxs-lookup"><span data-stu-id="a0799-108">Introduction</span></span>

<span data-ttu-id="a0799-109">In ASP.NET Version 2,0 wurde eine Reihe von *Anwendungsdiensten*eingeführt, die Teil der .NET Framework sind und als eine Reihe von Baustein Diensten dienen, mit denen Sie Ihrer Webanwendung umfangreiche Funktionen hinzufügen können.</span><span class="sxs-lookup"><span data-stu-id="a0799-109">ASP.NET version 2.0 introduced a series of *application services*, which are part of the .NET Framework and serve as a suite of building block services that you can use to add rich functionality to your web application.</span></span> <span data-ttu-id="a0799-110">Die Anwendungsdienste umfassen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="a0799-110">The application services include:</span></span>

- <span data-ttu-id="a0799-111">**Mitgliedschaft** : eine API zum Erstellen und Verwalten von Benutzerkonten.</span><span class="sxs-lookup"><span data-stu-id="a0799-111">**Membership** - an API for creating and managing user accounts.</span></span>
- <span data-ttu-id="a0799-112">**Rollen** : eine API zum Kategorisierung von Benutzern in Gruppen.</span><span class="sxs-lookup"><span data-stu-id="a0799-112">**Roles** - an API for categorizing users into groups.</span></span>
- <span data-ttu-id="a0799-113">**Profile** : eine API zum Speichern von benutzerdefiniertem, Benutzer spezifischem Inhalt.</span><span class="sxs-lookup"><span data-stu-id="a0799-113">**Profile** - an API for storing custom, user-specific content.</span></span>
- <span data-ttu-id="a0799-114">**Site Map** : eine API zum Definieren einer logischen Struktur einer Site in Form einer Hierarchie, die dann über Navigations Steuerelemente wie Menüs und Brotkrümel angezeigt werden kann.</span><span class="sxs-lookup"><span data-stu-id="a0799-114">**Site Map** - an API for defining a site s logical structure in the form of a hierarchy, which can then be displayed via navigation controls, such as menus and breadcrumbs.</span></span>
- <span data-ttu-id="a0799-115">**Personalisierung** : eine API zum Verwalten von Anpassungs Einstellungen, die am häufigsten mit [*Webparts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx)verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="a0799-115">**Personalization** - an API for maintaining customization preferences, most often used with [*WebParts*](https://msdn.microsoft.com/library/e0s9t4ck.aspx).</span></span>
- <span data-ttu-id="a0799-116">System **Überwachung** : eine API zum Überwachen von Leistung, Sicherheit, Fehlern und anderen Systemintegritäts-Metriken für eine laufende Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="a0799-116">**Health Monitoring** - an API for monitoring performance, security, errors, and other system health metrics for a running web application.</span></span>

<span data-ttu-id="a0799-117">Die Anwendungsdienste-APIs sind nicht an eine bestimmte Implementierung gebunden.</span><span class="sxs-lookup"><span data-stu-id="a0799-117">The application services APIs are not tied to a specific implementation.</span></span> <span data-ttu-id="a0799-118">Stattdessen weisen Sie die Anwendungsdienste an, einen bestimmten *Anbieter*zu verwenden, und dieser Anbieter implementiert den Dienst mithilfe einer bestimmten Technologie.</span><span class="sxs-lookup"><span data-stu-id="a0799-118">Instead, you instruct the application services to use a particular *provider*, and that provider implements the service using a particular technology.</span></span> <span data-ttu-id="a0799-119">Die am häufigsten verwendeten Anbieter für Internet basierte Webanwendungen, die auf einem Webhostingunternehmen gehostet werden, sind Anbieter, die eine SQL Server Datenbankimplementierung verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0799-119">The most commonly used providers for Internet-based web applications hosted at a web hosting company are those providers that use a SQL Server database implementation.</span></span> <span data-ttu-id="a0799-120">Der `SqlMembershipProvider` ist beispielsweise ein Anbieter für die Mitgliedschafts-API, die Benutzerkontoinformationen in einer Microsoft SQL Server-Datenbank speichert.</span><span class="sxs-lookup"><span data-stu-id="a0799-120">For example, the `SqlMembershipProvider` is a provider for the Membership API that stores user account information in a Microsoft SQL Server database.</span></span>

<span data-ttu-id="a0799-121">Wenn Sie die Anwendungsdienste und SQL Server Anbieter verwenden, werden beim Bereitstellen der Anwendung einige Herausforderungen hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="a0799-121">Using the application services and SQL Server providers adds some challenges when deploying the application.</span></span> <span data-ttu-id="a0799-122">Zunächst müssen die Anwendungs Dienst-Datenbankobjekte für die Entwicklungs-und Produktionsdatenbanken ordnungsgemäß erstellt und entsprechend initialisiert werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-122">For starters, the application services database objects must be properly created on both the development and production databases and appropriately initialized.</span></span> <span data-ttu-id="a0799-123">Es müssen auch wichtige Konfigurationseinstellungen vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-123">There are also important configuration settings that need to be made.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-124">Die Anwendungsdienste-APIs wurden mit dem [*Anbieter Modell*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx)entworfen, einem Entwurfsmuster, das die Bereitstellung von API-Implementierungsdetails zur Laufzeit ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="a0799-124">The application services APIs were designed using the [*provider model*](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), a design pattern that allows for an API s implementation details to be provided at runtime.</span></span> <span data-ttu-id="a0799-125">Die .NET Framework wird mit einer Reihe von Anwendungs Dienstanbietern ausgeliefert, die verwendet werden können, wie z. b. die `SqlMembershipProvider` und `SqlRoleProvider`, die Anbieter für die Mitgliedschafts-und Rollen-APIs sind, die eine SQL Server Datenbankimplementierung verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0799-125">The .NET Framework ships with a number of application service providers that can be used, such as the `SqlMembershipProvider` and `SqlRoleProvider`, which are providers for the Membership and Roles APIs that use a SQL Server database implementation.</span></span> <span data-ttu-id="a0799-126">Sie können auch einen benutzerdefinierten Anbieter erstellen und einbinden.</span><span class="sxs-lookup"><span data-stu-id="a0799-126">You can also create and plug-in a custom provider.</span></span> <span data-ttu-id="a0799-127">Tatsächlich enthält die Webanwendung "Book Reviews" bereits einen benutzerdefinierten Anbieter für die Site Map-API (`ReviewSiteMapProvider`), die die Site Übersicht aus den Daten in den Tabellen "`Genres`" und "`Books`" in der Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="a0799-127">In fact, the Book Reviews web application already contains a custom provider for the Site Map API (`ReviewSiteMapProvider`), which constructs the site map from the data in the `Genres` and `Books` tables in the database.</span></span>

<span data-ttu-id="a0799-128">In diesem Tutorial wird erläutert, wie ich die Webanwendung "Book Reviews" für die Verwendung der Mitgliedschafts-und Rollen-APIs erweitert habe.</span><span class="sxs-lookup"><span data-stu-id="a0799-128">This tutorial starts with a look at how I extended the Book Reviews web application to use the Membership and Roles APIs.</span></span> <span data-ttu-id="a0799-129">Anschließend wird die Bereitstellung einer Webanwendung erläutert, die Anwendungsdienste mit einer SQL Server-Datenbankimplementierung verwendet, und es wird durch die Behandlung allgemeiner Probleme bei der Verwaltung von Benutzerkonten und Rollen in der Produktionsumgebung erläutert.</span><span class="sxs-lookup"><span data-stu-id="a0799-129">It then walks through deploying a web application that uses application services with a SQL Server database implementation, and concludes by addressing common issues with managing user accounts and roles on the production environment.</span></span>

## <a name="updates-to-the-book-reviews-application"></a><span data-ttu-id="a0799-130">Aktualisierungen der Anwendung "Book Reviews"</span><span class="sxs-lookup"><span data-stu-id="a0799-130">Updates to the Book Reviews Application</span></span>

<span data-ttu-id="a0799-131">In den letzten Lernprogrammen wurde das Buch Reviews-Webanwendung von einer statischen Website in eine dynamische, datengesteuerte Webanwendung mit einer Reihe von Verwaltungs Seiten für die Verwaltung von Genres und Reviews aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="a0799-131">Over the past couple tutorials the Book Reviews web application was updated from a static website to a dynamic, data-driven web application complete with a set of administration pages for managing genres and reviews.</span></span> <span data-ttu-id="a0799-132">Dieser Verwaltungsabschnitt ist jedoch zurzeit nicht geschützt, und jeder Benutzer, der die URL der Verwaltungsseite kennt (oder erraten) kann, kann auf unserer Website Überprüfungen erstellen, bearbeiten oder löschen.</span><span class="sxs-lookup"><span data-stu-id="a0799-132">However, this administration section is currently not protected - any user who knows (or guesses) the administration page URL can waltz in and create, edit, or delete reviews on our site.</span></span> <span data-ttu-id="a0799-133">Eine gängige Methode, bestimmte Teile einer Website zu schützen, ist die Implementierung von Benutzerkonten und die anschließende Verwendung von URL-Autorisierungs Regeln, um den Zugriff auf bestimmte Benutzer oder Rollen einzuschränken.</span><span class="sxs-lookup"><span data-stu-id="a0799-133">A common way to protect certain portions of a website is to implement user accounts and then use URL authorization rules to restrict access to certain users or roles.</span></span> <span data-ttu-id="a0799-134">Die in diesem Tutorial zum Herunterladen verfügbare Webanwendung "Book Reviews" unterstützt Benutzerkonten und Rollen.</span><span class="sxs-lookup"><span data-stu-id="a0799-134">The Book Reviews web application available for download with this tutorial supports user accounts and roles.</span></span> <span data-ttu-id="a0799-135">Es ist eine einzige Rolle mit dem Namen admin definiert, und nur Benutzer mit dieser Rolle können auf die Verwaltungs Seiten zugreifen.</span><span class="sxs-lookup"><span data-stu-id="a0799-135">It has a single role defined named Admin and only users in this role can access the administration pages.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-136">Ich habe drei Benutzerkonten in der "Book Reviews"-Webanwendung erstellt: Scott, jisun und Alice.</span><span class="sxs-lookup"><span data-stu-id="a0799-136">I ve created three user accounts in the Book Reviews web application: Scott, Jisun, and Alice.</span></span> <span data-ttu-id="a0799-137">Alle drei Benutzer haben dasselbe Kennwort: **Kennwort!**</span><span class="sxs-lookup"><span data-stu-id="a0799-137">All three users have the same password: **password!**</span></span> <span data-ttu-id="a0799-138">Scott und jisun sind in der Administrator Rolle, Alice nicht.</span><span class="sxs-lookup"><span data-stu-id="a0799-138">Scott and Jisun are in the Admin role, Alice is not.</span></span> <span data-ttu-id="a0799-139">Die nicht-Verwaltungs Seiten der Website sind für anonyme Benutzer weiterhin zugänglich.</span><span class="sxs-lookup"><span data-stu-id="a0799-139">The site s non-administration pages are still accessible to anonymous users.</span></span> <span data-ttu-id="a0799-140">Das heißt, Sie müssen sich nicht mehr anmelden, um die Website zu besuchen, es sei denn, Sie möchten Sie verwalten. in diesem Fall müssen Sie sich als Benutzer in der Rolle "Administrator" anmelden.</span><span class="sxs-lookup"><span data-stu-id="a0799-140">That is, you do not need to sign in to visit the site, unless you want to administer it, in which case you must sign in as a user in the Admin role.</span></span>

<span data-ttu-id="a0799-141">Die Master Seite für die Buch Reviews-Anwendung wurde aktualisiert und enthält so eine andere Benutzeroberfläche für authentifizierte und anonyme Benutzer.</span><span class="sxs-lookup"><span data-stu-id="a0799-141">The Book Reviews application s master page has been updated to include a different user interface for authenticated and anonymous users.</span></span> <span data-ttu-id="a0799-142">Wenn ein anonymer Benutzer die Website besucht, wird ein Anmeldelink in der oberen rechten Ecke angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a0799-142">If an anonymous user visits the site she sees a Login link in the upper right corner.</span></span> <span data-ttu-id="a0799-143">Einem authentifizierten Benutzer wird die Meldung "Willkommen zurück, *username*!" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a0799-143">An authenticated user sees the message, "Welcome back, *username*!"</span></span> <span data-ttu-id="a0799-144">und einen Link zum Abmelden. Es gibt auch eine Anmeldeseite (`~/Login.aspx`), die ein Anmeldungs-websteuer Element enthält, das die Benutzeroberfläche und die Logik zum Authentifizieren eines Besuchers bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="a0799-144">and a link to log out. There s also a login page (`~/Login.aspx`), which contains a Login Web control that provides the user interface and logic for authenticating a visitor.</span></span> <span data-ttu-id="a0799-145">Nur Administratoren können neue Konten erstellen.</span><span class="sxs-lookup"><span data-stu-id="a0799-145">Only administrators can create new accounts.</span></span> <span data-ttu-id="a0799-146">(Es gibt Seiten zum Erstellen und Verwalten von Benutzerkonten im Ordner "`~/Admin`".)</span><span class="sxs-lookup"><span data-stu-id="a0799-146">(There are pages for creating and managing user accounts in the `~/Admin` folder.)</span></span>

### <a name="configuring-the-membership-and-roles-apis"></a><span data-ttu-id="a0799-147">Konfigurieren der Mitgliedschafts-und Rollen-APIs</span><span class="sxs-lookup"><span data-stu-id="a0799-147">Configuring the Membership and Roles APIs</span></span>

<span data-ttu-id="a0799-148">Die Webanwendung Book Reviews verwendet die Mitgliedschafts-und Rollen-APIs, um Benutzerkonten zu unterstützen und diese Benutzer in Rollen zu gruppieren (nämlich als Administrator Rolle).</span><span class="sxs-lookup"><span data-stu-id="a0799-148">The Book Reviews web application uses the Membership and Roles APIs to support user accounts and to group those users into roles (namely, the Admin role).</span></span> <span data-ttu-id="a0799-149">Die `SqlMembershipProvider`-und `SqlRoleProvider` Provider-Klassen werden verwendet, da wir Konto-und Rollen Informationen in einer SQL Server-Datenbank speichern möchten.</span><span class="sxs-lookup"><span data-stu-id="a0799-149">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes are used because we want to store account and role information in a SQL Server database.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-150">Dieses Tutorial soll nicht als ausführliche Untersuchung der Konfiguration einer Webanwendung für die Unterstützung der Mitgliedschafts-und Rollen-APIs dienen.</span><span class="sxs-lookup"><span data-stu-id="a0799-150">This tutorial is not intended to be a detailed examination at configuring a web application to support the Membership and Roles APIs.</span></span> <span data-ttu-id="a0799-151">Ausführliche Informationen zu diesen APIs und den Schritten, die Sie ausführen müssen, um eine Website für deren Verwendung zu konfigurieren, finden Sie in den [*Tutorials zur Website Sicherheit*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="a0799-151">For a thorough look at these APIs and the steps you need to take to configure a website to use them, please read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

<span data-ttu-id="a0799-152">Um die Anwendungsdienste mit einer SQL Server Datenbank zu verwenden, müssen Sie zuerst die Datenbankobjekte, die von diesen Anbietern verwendet werden, der Datenbank hinzufügen, in der das Benutzerkonto und die Rollen Informationen gespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="a0799-152">To use the application services with a SQL Server database you must first add the database objects used by these providers to the database where you want the user account and role information stored.</span></span> <span data-ttu-id="a0799-153">Diese erforderlichen Datenbankobjekte umfassen eine Vielzahl von Tabellen, Sichten und gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="a0799-153">These requisite database objects include a variety of tables, views, and stored procedures.</span></span> <span data-ttu-id="a0799-154">Sofern nicht anders angegeben, verwenden die Anbieter Klassen `SqlMembershipProvider` und `SqlRoleProvider` eine SQL Server Express Edition-Datenbank mit dem Namen `ASPNETDB`, die sich im `App_Data` Ordner der Anwendung befindet. Wenn eine solche Datenbank nicht vorhanden ist, wird Sie von diesen Anbietern zur Laufzeit automatisch mit den erforderlichen Datenbankobjekten erstellt.</span><span class="sxs-lookup"><span data-stu-id="a0799-154">Unless specified otherwise, the `SqlMembershipProvider` and `SqlRoleProvider` provider classes use a SQL Server Express Edition database named `ASPNETDB` located in the application s `App_Data` folder; if such a database does not exist, it is automatically created with the necessary database objects by these providers at runtime.</span></span>

<span data-ttu-id="a0799-155">Es ist möglich und in der Regel ideal, die Anwendungs Dienst-Datenbankobjekte in derselben Datenbank zu erstellen, in der die anwendungsspezifischen Daten der Website gespeichert sind.</span><span class="sxs-lookup"><span data-stu-id="a0799-155">It is possible, and usually ideal, to create the application services database objects in the same database where the website s application-specific data is stored.</span></span> <span data-ttu-id="a0799-156">Der .NET Framework enthält ein Tool mit dem Namen `aspnet_regsql.exe`, mit dem die Datenbankobjekte in einer angegebenen Datenbank installiert werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-156">The .NET Framework ships with a tool named `aspnet_regsql.exe` that installs the database objects on a specified database.</span></span> <span data-ttu-id="a0799-157">Ich habe dieses Tool verwendet, um diese Objekte der `Reviews.mdf` Datenbank im Ordner "`App_Data`" (der Entwicklungs Datenbank) hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="a0799-157">I have gone ahead and used this tool to add these objects to the `Reviews.mdf` database in the `App_Data` folder (the development database).</span></span> <span data-ttu-id="a0799-158">Wir werden später in diesem Tutorial erfahren, wie Sie dieses Tool verwenden, wenn wir diese Objekte der Produktionsdatenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a0799-158">We'll see how to use this tool later in this tutorial when we add these objects to the production database.</span></span>

<span data-ttu-id="a0799-159">Wenn Sie die Anwendungs Dienst-Datenbankobjekte einer anderen Datenbank als `ASPNETDB` hinzufügen, müssen Sie die Konfigurationen `SqlMembershipProvider` und `SqlRoleProvider` Anbieter Klassen so anpassen, dass Sie die entsprechende Datenbank verwenden.</span><span class="sxs-lookup"><span data-stu-id="a0799-159">If you add the application services database objects to a database other than `ASPNETDB` you will need to customize the `SqlMembershipProvider` and `SqlRoleProvider` provider classes configurations so that they use the appropriate database.</span></span> <span data-ttu-id="a0799-160">Fügen Sie zum Anpassen des Mitgliedschafts Anbieters ein [ *&lt;Mitgliedschafts&gt; Element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) innerhalb des `<system.web>` Abschnitts in `Web.config`; Verwenden Sie das [ *&gt;-Element&lt;roleManager*](https://msdn.microsoft.com/library/ms164660.aspx) , um den Rollen Anbieter zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="a0799-160">To customize the Membership provider add a [*&lt;membership&gt; element*](https://msdn.microsoft.com/library/1b9hw62f.aspx) within the `<system.web>` section in `Web.config`; use the [*&lt;roleManager&gt; element*](https://msdn.microsoft.com/library/ms164660.aspx) to configure the Roles provider.</span></span> <span data-ttu-id="a0799-161">Der folgende Code Ausschnitt stammt aus der `Web.config` für die Buch Überprüfungen und zeigt die Konfigurationseinstellungen für die Mitgliedschafts-und Rollen-APIs.</span><span class="sxs-lookup"><span data-stu-id="a0799-161">The following snippet is taken from the Book Reviews application s `Web.config` and shows the configure settings for the Membership and Roles APIs.</span></span> <span data-ttu-id="a0799-162">Beachten Sie, dass beide einen neuen Anbieter registrieren: `ReviewMembership` und `ReviewRole`, der die `SqlMembershipProvider`-und `SqlRoleProvider` Anbieter verwendet.</span><span class="sxs-lookup"><span data-stu-id="a0799-162">Note that both register a new provider - `ReviewMembership` and `ReviewRole` - that use the `SqlMembershipProvider` and `SqlRoleProvider` providers, respectively.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample1.xml)]

<span data-ttu-id="a0799-163">Das `Web.config` File s `<authentication>`-Element wurde ebenfalls für die Unterstützung der Formular basierten Authentifizierung konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="a0799-163">The `Web.config` file s `<authentication>` element has also been configured to support forms-based authentication.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample2.xml)]

### <a name="limiting-access-to-the-administration-pages"></a><span data-ttu-id="a0799-164">Einschränken des Zugriffs auf die Verwaltungs Seiten</span><span class="sxs-lookup"><span data-stu-id="a0799-164">Limiting Access to the Administration Pages</span></span>

<span data-ttu-id="a0799-165">ASP.NET vereinfacht das gewähren oder Verweigern des Zugriffs auf eine bestimmte Datei oder einen bestimmten Ordner über das *URL-Autorisierungs* Feature durch einen Benutzer oder eine Rolle.</span><span class="sxs-lookup"><span data-stu-id="a0799-165">ASP.NET makes it easy to grant or deny access to a particular file or folder by user or by role via its *URL authorization* feature.</span></span> <span data-ttu-id="a0799-166">(Die URL-Autorisierung wurde in den *wichtigsten Unterschieden zwischen IIS und dem ASP.NET Development Server* -Tutorial kurz erläutert, und es wurde gezeigt, wie IIS und die ASP.NET Development Server URL-Autorisierungs Regeln für statische und dynamische Inhalte anders anwenden.) Da der Zugriff auf den `~/Admin` Ordner außer den Benutzern in der Administrator Rolle untersagt werden soll, müssen wir diesem Ordner URL-Autorisierungs Regeln hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a0799-166">(We briefly discussed URL authorization in the *Core Differences Between IIS and the ASP.NET Development Server* tutorial and showed how IIS and the ASP.NET Development Server apply URL authorization rules differently for static versus dynamic content.) Because we want to prohibit access to the `~/Admin` folder except for those users in the Admin role, we need to add URL authorization rules to this folder.</span></span> <span data-ttu-id="a0799-167">Insbesondere müssen die URL-Autorisierungs Regeln Benutzern die Administrator Rolle gestatten und alle anderen Benutzer verweigern.</span><span class="sxs-lookup"><span data-stu-id="a0799-167">Specifically, the URL authorization rules need to allow users in the Admin role and deny all other users.</span></span> <span data-ttu-id="a0799-168">Dies wird durch Hinzufügen einer `Web.config` Datei zum Ordner `~/Admin` mit folgendem Inhalt erreicht:</span><span class="sxs-lookup"><span data-stu-id="a0799-168">This is accomplished by adding a `Web.config` file to the `~/Admin` folder with the following contents:</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample3.xml)]

<span data-ttu-id="a0799-169">Weitere Informationen zum ASP.net s-URL-Autorisierungs Feature und dazu, wie Sie es verwenden, um Autorisierungs Regeln für Benutzer und Rollen zu benennen, finden Sie in den Tutorials zur [*benutzerbasierten Autorisierung*](../../older-versions-security/membership/user-based-authorization-cs.md) und [*rollenbasierten Autorisierung*](../../older-versions-security/roles/role-based-authorization-cs.md) aus den Lernprogrammen für meine [*Website Sicherheit*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="a0799-169">For more information on ASP.NET s URL authorization feature and how to use it to spell out authorization rules for users and for roles, be sure to read the [*User-Based Authorization*](../../older-versions-security/membership/user-based-authorization-cs.md) and [*Role-Based Authorization*](../../older-versions-security/roles/role-based-authorization-cs.md) tutorials from my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

## <a name="deploying-a-web-application-that-uses-application-services"></a><span data-ttu-id="a0799-170">Bereitstellen einer Webanwendung, die Anwendungsdienste verwendet</span><span class="sxs-lookup"><span data-stu-id="a0799-170">Deploying a Web Application That Uses Application Services</span></span>

<span data-ttu-id="a0799-171">Beim Bereitstellen einer Website, die Anwendungsdienste und einen Anbieter verwendet, der die Anwendungs Dienst Informationen in einer-Datenbank speichert, ist es zwingend erforderlich, dass die von den Anwendungsdiensten benötigten Datenbankobjekte in der Produktionsdatenbank erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-171">When deploying a website that uses application services and a provider that stores the application services information in a database, it is imperative that the database objects needed by the application services be created on the production database.</span></span> <span data-ttu-id="a0799-172">Anfänglich enthält die Produktionsdatenbank diese Objekte nicht, d. h., wenn die Anwendung zum ersten Mal bereitgestellt wird (oder wenn Sie nach dem Hinzufügen von Anwendungsdiensten zum ersten Mal bereitgestellt wird), müssen Sie zusätzliche Schritte ausführen, um diese erforderlichen Datenbankobjekte zu erhalten. Produktionsdatenbank.</span><span class="sxs-lookup"><span data-stu-id="a0799-172">Initially the production database does not contain these objects, so when the application is first deployed (or when it is deployed for the first time after application services have been added), you must take extra steps to get these requisite database objects on the production database.</span></span>

<span data-ttu-id="a0799-173">Eine weitere Herausforderung kann auftreten, wenn Sie eine Website bereitstellen, die Anwendungsdienste verwendet, wenn Sie beabsichtigen, die in der Entwicklungsumgebung erstellten Benutzerkonten in der Produktionsumgebung zu replizieren.</span><span class="sxs-lookup"><span data-stu-id="a0799-173">Another challenge can arise when deploying a website that uses application services if you intend to replicate the user accounts created in the development environment to the production environment.</span></span> <span data-ttu-id="a0799-174">Abhängig von der Mitgliedschafts-und Rollen Konfiguration ist es möglich, dass selbst dann, wenn Sie die Benutzerkonten, die in der Entwicklungsumgebung erstellt wurden, erfolgreich in die Produktionsdatenbank kopiert wurde, diese Benutzer sich nicht bei der Webanwendung in der Produktion anmelden können.</span><span class="sxs-lookup"><span data-stu-id="a0799-174">Depending on the Membership and Roles configuration, it is possible that even if you successfully copy the user accounts that were created in the development environment to the production database, these users cannot sign into the web application in production.</span></span> <span data-ttu-id="a0799-175">Wir sehen uns die Ursache für dieses Problem an und erörtern, wie Sie es verhindern können.</span><span class="sxs-lookup"><span data-stu-id="a0799-175">We'll look at the cause of this issue and discuss how to prevent it from happening.</span></span>

<span data-ttu-id="a0799-176">ASP.NET enthält ein nettes [*Websiteverwaltungs-Tool (WSAT)* ](https://msdn.microsoft.com/library/yy40ytx0.aspx) , das von Visual Studio aus gestartet werden kann und die Verwaltung von Benutzerkonten, Rollen und Autorisierungs Regeln über eine webbasierte Schnittstelle ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="a0799-176">ASP.NET ships with a nice [*Web Site Administration Tool (WSAT)*](https://msdn.microsoft.com/library/yy40ytx0.aspx) that can be launched from Visual Studio and allows the user account, roles, and authorization rules to be managed through a web-based interface.</span></span> <span data-ttu-id="a0799-177">Leider funktioniert das WSAT nur für lokale Websites. Dies bedeutet, dass es nicht zur Remote Verwaltung von Benutzerkonten, Rollen und Autorisierungs Regeln für die Webanwendung in der Produktionsumgebung verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="a0799-177">Unfortunately, the WSAT only works for local websites, meaning that it cannot be used to remotely manage user accounts, roles, and authorization rules for the web application in the production environment.</span></span> <span data-ttu-id="a0799-178">Wir sehen uns verschiedene Möglichkeiten zum Implementieren von WSAT-ähnlichen Verhalten von Ihrer Produktions Website an.</span><span class="sxs-lookup"><span data-stu-id="a0799-178">We'll look at different ways to implement WSAT-like behavior from your production website.</span></span>

### <a name="adding-the-database-objects-using-aspnet_regsqlexe"></a><span data-ttu-id="a0799-179">Hinzufügen der Datenbankobjekte mithilfe von ASPNET\_RegSql. exe</span><span class="sxs-lookup"><span data-stu-id="a0799-179">Adding the Database Objects Using aspnet\_regsql.exe</span></span>

<span data-ttu-id="a0799-180">Im Tutorial zum Bereitstellen *einer Datenbank* wurde gezeigt, wie die Tabellen und Daten aus der Entwicklungs Datenbank in die Produktionsdatenbank kopiert werden. diese Techniken können auch verwendet werden, um die Anwendungs Dienst-Datenbankobjekte in die Produktionsdatenbank zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="a0799-180">The *Deploying a Database* tutorial showed how to copy the tables and data from the development database to the production database, and these techniques can certainly be used to copy the application services database objects to the production database.</span></span> <span data-ttu-id="a0799-181">Eine weitere Option ist das `aspnet_regsql.exe` Tool, mit dem die Anwendungs Dienst-Datenbankobjekte einer Datenbank hinzugefügt oder daraus entfernt werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-181">Another option is the `aspnet_regsql.exe` tool, which adds or removes the application services database objects from a database.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-182">Das `aspnet_regsql.exe` Tool erstellt die Datenbankobjekte in einer angegebenen Datenbank.</span><span class="sxs-lookup"><span data-stu-id="a0799-182">The `aspnet_regsql.exe` tool creates the database objects on a specified database.</span></span> <span data-ttu-id="a0799-183">Daten in diesen Datenbankobjekten werden von der Entwicklungs Datenbank nicht in die Produktionsdatenbank migriert.</span><span class="sxs-lookup"><span data-stu-id="a0799-183">It does not migrate data in those database objects from the development database to the production database.</span></span> <span data-ttu-id="a0799-184">Wenn Sie das Benutzerkonto und die Rollen Informationen in der Entwicklungs Datenbank in die Produktionsdatenbank kopieren möchten, verwenden Sie die im Tutorial zum Bereitstellen *einer Datenbank* behandelten Verfahren.</span><span class="sxs-lookup"><span data-stu-id="a0799-184">If you mean to copy the user account and role information in the development database to the production database use the techniques covered in the *Deploying a Database* tutorial.</span></span>

<span data-ttu-id="a0799-185">Sehen Sie sich an, wie Sie die Datenbankobjekte mit dem `aspnet_regsql.exe` Tool der Produktionsdatenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="a0799-185">Let s look at how to add the database objects to the production database using the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="a0799-186">Öffnen Sie zunächst Windows-Explorer, und navigieren Sie zum Verzeichnis .NET Framework Version 2,0 auf Ihrem Computer,% windir% \ Microsoft. NET\Framework\v2.0.50727.</span><span class="sxs-lookup"><span data-stu-id="a0799-186">Start by opening Windows Explorer and navigating to the .NET Framework version 2.0 directory on your computer, %WINDIR%\ Microsoft.NET\Framework\v2.0.50727.</span></span> <span data-ttu-id="a0799-187">Dort finden Sie das `aspnet_regsql.exe` Tool.</span><span class="sxs-lookup"><span data-stu-id="a0799-187">There you should find the `aspnet_regsql.exe` tool.</span></span> <span data-ttu-id="a0799-188">Dieses Tool kann über die Befehlszeile verwendet werden, enthält aber auch eine grafische Benutzeroberfläche. Doppelklicken Sie auf die Datei `aspnet_regsql.exe`, um die grafische Komponente zu starten.</span><span class="sxs-lookup"><span data-stu-id="a0799-188">This tool can be used from the command-line, but it also includes a graphical user interface; double-click the `aspnet_regsql.exe` file to launch its graphical component.</span></span>

<span data-ttu-id="a0799-189">Das Tool beginnt mit dem Anzeigen eines Begrüßungs Bildschirms, in dem der Zweck erläutert wird.</span><span class="sxs-lookup"><span data-stu-id="a0799-189">The tool starts by displaying a splash screen explaining its purpose.</span></span> <span data-ttu-id="a0799-190">Klicken Sie auf Weiter, um zum Bildschirm "Setup Option auswählen" zu gelangen, der in Abbildung 1 dargestellt wird.</span><span class="sxs-lookup"><span data-stu-id="a0799-190">Click Next to advance to the "Select a Setup Option" screen, which is shown in Figure 1.</span></span> <span data-ttu-id="a0799-191">Von hier aus können Sie die Anwendungs Dienst-Datenbankobjekte hinzufügen oder aus einer Datenbank entfernen.</span><span class="sxs-lookup"><span data-stu-id="a0799-191">From here you can choose to add the application services database objects or remove them from a database.</span></span> <span data-ttu-id="a0799-192">Da wir diese Objekte der Produktionsdatenbank hinzufügen möchten, wählen Sie die Option "SQL Server für Anwendungsdienste konfigurieren" aus, und klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="a0799-192">Because we want to add these objects to the production database, select the "Configure SQL Server for application services" option and click Next.</span></span>

<span data-ttu-id="a0799-193">[![konfigurieren Sie SQL Server für Anwendungsdienste](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0799-193">[![Choose to Configure SQL Server for Application Services](configuring-a-website-that-uses-application-services-cs/_static/image2.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image1.jpg)</span></span>

<span data-ttu-id="a0799-194">**Abbildung 1**: Konfigurieren der SQL Server für Anwendungsdienste ([Klicken Sie, um das Bild in voller Größe anzuzeigen](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="a0799-194">**Figure 1**: Choose to Configure SQL Server for Application Services ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image3.jpg))</span></span>

<span data-ttu-id="a0799-195">Auf der Seite "Server und Datenbank auswählen" werden Informationen zur Eingabe von Informationen für die Verbindung mit der Datenbank angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a0799-195">In "Select the Server and Database" screen prompts for information to connect to the database.</span></span> <span data-ttu-id="a0799-196">Geben Sie den Datenbankserver, die Sicherheits Anmelde Informationen und den von Ihrem Webhostingunternehmen bereitgestellten Datenbanknamen ein, und klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="a0799-196">Enter the database server, the security credentials, and the database name supplied to you by your web hosting company and click Next.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-197">Nachdem Sie den Datenbankserver und die Anmelde Informationen eingegeben haben, erhalten Sie möglicherweise eine Fehlermeldung beim Erweitern der Dropdown Liste Datenbank.</span><span class="sxs-lookup"><span data-stu-id="a0799-197">After entering your database server and credentials you may get an error when expanding the database drop-down list.</span></span> <span data-ttu-id="a0799-198">Das `aspnet_regsql.exe` Tool fragt die `sysdatabases` Systemtabelle ab, um eine Liste der Datenbanken auf dem Server abzurufen, aber einige Webhostingunternehmen Sperren Ihre Datenbankserver, sodass diese Informationen nicht öffentlich verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="a0799-198">The `aspnet_regsql.exe` tool queries the `sysdatabases` system table to retrieve a list of databases on the server, but some web hosting companies lock down their database servers so that this information is not publicly available.</span></span> <span data-ttu-id="a0799-199">Wenn Sie diesen Fehler erhalten, können Sie den Datenbanknamen direkt in die Dropdown Liste eingeben.</span><span class="sxs-lookup"><span data-stu-id="a0799-199">If you get this error you can type the database name directly into the drop-down list.</span></span>

<span data-ttu-id="a0799-200">[![Bereitstellen des Tools mit den Verbindungsinformationen Ihrer Datenbank](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0799-200">[![Supply the Tool With Your Database s Connection Information](configuring-a-website-that-uses-application-services-cs/_static/image5.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image4.jpg)</span></span>

<span data-ttu-id="a0799-201">**Abbildung 2**: Bereitstellen des Tools mit den Verbindungsinformationen Ihrer Datenbank ([Klicken Sie, um das Bild in voller Größe anzuzeigen](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="a0799-201">**Figure 2**: Supply the Tool With Your Database s Connection Information ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image6.jpg))</span></span>

<span data-ttu-id="a0799-202">Auf dem nachfolgenden Bildschirm werden die Aktionen zusammengefasst, die durchgeführt werden müssen, nämlich, dass die Anwendungs Dienst-Datenbankobjekte der angegebenen Datenbank hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-202">The subsequent screen summarizes the actions that are about to take place, namely that the application services database objects are going to be added to the specified database.</span></span> <span data-ttu-id="a0799-203">Klicken Sie auf Weiter, um diese Aktion abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="a0799-203">Click Next to complete this action.</span></span> <span data-ttu-id="a0799-204">Nach einigen Augenblicken wird der letzte Bildschirm angezeigt, der darauf hinweist, dass die Datenbankobjekte hinzugefügt wurden (siehe Abbildung 3).</span><span class="sxs-lookup"><span data-stu-id="a0799-204">After a few moments, the final screen is displayed, noting that the database objects have been added (see Figure 3).</span></span>

<span data-ttu-id="a0799-205">[![Erfolg! Die Anwendungsdienste-Datenbankobjekte wurden der Produktionsdatenbank hinzugefügt.](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0799-205">[![Success! The Application Services Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image8.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image7.jpg)</span></span>

<span data-ttu-id="a0799-206">**Abbildung 3**: Erfolg!</span><span class="sxs-lookup"><span data-stu-id="a0799-206">**Figure 3**: Success!</span></span> <span data-ttu-id="a0799-207">Die Anwendungsdienste Datenbankobjekte wurden der Produktionsdatenbank hinzugefügt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg)).</span><span class="sxs-lookup"><span data-stu-id="a0799-207">The Application Services Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image9.jpg))</span></span>

<span data-ttu-id="a0799-208">Öffnen Sie SQL Server Management Studio, und stellen Sie eine Verbindung mit der Produktionsdatenbank her, um zu überprüfen, ob die Anwendungs Dienst-Datenbankobjekte der Produktionsdatenbank erfolgreich hinzugefügt</span><span class="sxs-lookup"><span data-stu-id="a0799-208">To verify that the application services database objects were successfully added to the production database, open SQL Server Management Studio and connect to your production database.</span></span> <span data-ttu-id="a0799-209">Wie in Abbildung 4 gezeigt, sollten die Anwendungs Dienst-Datenbanktabellen nun in Ihrer Datenbank, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`usw. angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-209">As Figure 4 shows, you should now see the application services database tables in your database, `aspnet_Applications`, `aspnet_Membership`, `aspnet_Users`, and so forth.</span></span>

<span data-ttu-id="a0799-210">[![bestätigen, dass die Datenbankobjekte der Produktionsdatenbank hinzugefügt wurden.](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0799-210">[![Confirm That the Database Objects Were Added to the Production Database](configuring-a-website-that-uses-application-services-cs/_static/image11.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image10.jpg)</span></span>

<span data-ttu-id="a0799-211">**Abbildung 4**: sicherstellen, dass die Datenbankobjekte der Produktionsdatenbank hinzugefügt wurden ([Klicken Sie, um das Bild in voller Größe anzuzeigen](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="a0799-211">**Figure 4**: Confirm That the Database Objects Were Added to the Production Database ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image12.jpg))</span></span>

<span data-ttu-id="a0799-212">Sie müssen das `aspnet_regsql.exe` Tool nur verwenden, wenn Sie Ihre Webanwendung zum ersten Mal oder zum ersten Mal verwenden, nachdem Sie die Anwendungsdienste verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="a0799-212">You will only need to use the `aspnet_regsql.exe` tool when deploying your web application for the first time or for the first time after you have started using the application services.</span></span> <span data-ttu-id="a0799-213">Sobald sich diese Datenbankobjekte in der Produktionsdatenbank befinden, müssen Sie nicht erneut hinzugefügt oder geändert werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-213">Once these database objects are on the production database they won't need to be re-added or modified.</span></span>

### <a name="copying-user-accounts-from-development-to-production"></a><span data-ttu-id="a0799-214">Kopieren von Benutzerkonten aus der Entwicklung in die Produktion</span><span class="sxs-lookup"><span data-stu-id="a0799-214">Copying User Accounts from Development to Production</span></span>

<span data-ttu-id="a0799-215">Wenn Sie die `SqlMembershipProvider`-und `SqlRoleProvider` Anbieter Klassen verwenden, um die Anwendungs Dienst Informationen in einer SQL Server-Datenbank zu speichern, werden das Benutzerkonto und die Rollen Informationen in einer Vielzahl von Datenbanktabellen gespeichert, einschließlich `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`und `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="a0799-215">When using the `SqlMembershipProvider` and `SqlRoleProvider` provider classes to store the application services information in a SQL Server database, the user account and role information is stored in a variety of database tables, including `aspnet_Users`, `aspnet_Membership`, `aspnet_Roles`, and `aspnet_UsersInRoles`, among others.</span></span> <span data-ttu-id="a0799-216">Wenn Sie während der Entwicklung Benutzerkonten in der Entwicklungsumgebung erstellen, können Sie diese Benutzerkonten in der Produktionsumgebung replizieren, indem Sie die entsprechenden Datensätze aus den entsprechenden Datenbanktabellen kopieren.</span><span class="sxs-lookup"><span data-stu-id="a0799-216">If during development you create user accounts in the development environment you can replicate those user accounts in production by copying the corresponding records from the applicable database tables.</span></span> <span data-ttu-id="a0799-217">Wenn Sie den Datenbankveröffentlichungs-Assistenten zum Bereitstellen von Anwendungs Dienst-Datenbankobjekten verwendet haben, haben Sie möglicherweise auch die Datensätze kopiert, was dazu führen würde, dass die Benutzerkonten, die in der Entwicklung erstellt werden, auch in der Produktion</span><span class="sxs-lookup"><span data-stu-id="a0799-217">If you used the Database Publishing Wizard to deploy the application services database objects you may have also elected to copy the records, which would result in the user accounts created in development to also be on production.</span></span> <span data-ttu-id="a0799-218">Abhängig von Ihren Konfigurationseinstellungen können Sie jedoch feststellen, dass die Benutzer, deren Konten in der Entwicklung erstellt und in die Produktion kopiert wurden, sich nicht auf der Produktions Website anmelden können.</span><span class="sxs-lookup"><span data-stu-id="a0799-218">But, depending on your configuration settings, you may find that those users whose accounts were created in development and copied to production are unable to login from the production website.</span></span> <span data-ttu-id="a0799-219">Was bietet?</span><span class="sxs-lookup"><span data-stu-id="a0799-219">What gives?</span></span>

<span data-ttu-id="a0799-220">Die `SqlMembershipProvider`-und `SqlRoleProvider` Anbieter Klassen wurden so entworfen, dass eine einzelne Datenbank als Benutzerspeicher für mehrere Anwendungen fungieren könnte, wobei jede Anwendung theoretisch Benutzer mit überlappenden Benutzernamen und Rollen mit dem gleichen Namen haben könnte.</span><span class="sxs-lookup"><span data-stu-id="a0799-220">The `SqlMembershipProvider` and `SqlRoleProvider` provider classes were designed such that a single database could serve as a user store for multiple applications, where each application could, in theory, have users with overlapping usernames and roles with the same name.</span></span> <span data-ttu-id="a0799-221">Um diese Flexibilität zu ermöglichen, verwaltet die Datenbank eine Liste der Anwendungen in der `aspnet_Applications` Tabelle, und jeder Benutzer ist einer dieser Anwendungen zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="a0799-221">To allow for this flexibility, the database maintains a list of applications in the `aspnet_Applications` table, and each user is associated with one of these applications.</span></span> <span data-ttu-id="a0799-222">Die `aspnet_Users` Tabelle verfügt insbesondere über eine `ApplicationId` Spalte, die jeden Benutzer mit einem Datensatz in der `aspnet_Applications` Tabelle verknüpft.</span><span class="sxs-lookup"><span data-stu-id="a0799-222">Specifically, the `aspnet_Users` table has an `ApplicationId` column that ties each user to a record in the `aspnet_Applications` table.</span></span>

<span data-ttu-id="a0799-223">Neben der Spalte `ApplicationId` enthält die `aspnet_Applications` Tabelle auch eine `ApplicationName` Spalte, die einen benutzerfreundlicheren Namen für die Anwendung bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="a0799-223">In addition to the `ApplicationId` column, the `aspnet_Applications` table also includes an `ApplicationName` column, which provides a more human-friendly name for the application.</span></span> <span data-ttu-id="a0799-224">Wenn eine Website versucht, mit einem Benutzerkonto zu arbeiten, wie z. b. das Überprüfen der Anmelde Informationen eines Benutzers auf der Anmeldeseite, muss die `SqlMembershipProvider` Klasse angeben, mit welcher Anwendung gearbeitet werden soll.</span><span class="sxs-lookup"><span data-stu-id="a0799-224">When a website attempts to work with a user account, such as validating a user s credentials from the login page, it must tell the `SqlMembershipProvider` class what application to work with.</span></span> <span data-ttu-id="a0799-225">Dies erfolgt in der Regel durch Bereitstellen des Anwendungs namens, und der Wert stammt aus der Konfiguration des Anbieters in `Web.config`, insbesondere über das `applicationName`-Attribut.</span><span class="sxs-lookup"><span data-stu-id="a0799-225">It usually does this by supplying the application name, and the this value comes from the provider s configuration in `Web.config` - specifically via the `applicationName` attribute.</span></span>

<span data-ttu-id="a0799-226">Was geschieht jedoch, wenn das `applicationName`-Attribut in `Web.config`nicht angegeben ist?</span><span class="sxs-lookup"><span data-stu-id="a0799-226">But what happens if the `applicationName` attribute is not specified in `Web.config`?</span></span> <span data-ttu-id="a0799-227">In einem solchen Fall verwendet das Mitgliedschaftssystem den Anwendungs Stamm Pfad als `applicationName` Wert.</span><span class="sxs-lookup"><span data-stu-id="a0799-227">In such a case the Membership system uses the application root path as the `applicationName` value.</span></span> <span data-ttu-id="a0799-228">Wenn das `applicationName`-Attribut in `Web.config`nicht explizit festgelegt ist, besteht die Möglichkeit, dass die Entwicklungsumgebung und die Produktionsumgebung einen anderen Anwendungs Stamm verwenden und daher verschiedenen Anwendungsnamen in den Anwendungsdiensten zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-228">If the `applicationName` attribute is not explicitly set in `Web.config`, then, there is the possibility that the development environment and production environment use a different application root and therefore will be associated with different application names in the application services.</span></span> <span data-ttu-id="a0799-229">Wenn dies nicht der Fall ist, verfügen die Benutzer, die in der Entwicklungsumgebung erstellt werden, über einen `ApplicationId` Wert, der nicht mit dem `ApplicationId` Wert für die Produktionsumgebung übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="a0799-229">If such a mismatch occurs then those users created in the development environment will have an `ApplicationId` value that does not match with the `ApplicationId` value for the production environment.</span></span> <span data-ttu-id="a0799-230">Das Ergebnis ist, dass sich diese Benutzer nicht anmelden können.</span><span class="sxs-lookup"><span data-stu-id="a0799-230">The net result is that those users won't be able to login.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-231">Wenn Sie sich in dieser Situation befinden, wenn Benutzerkonten mit einem nicht übereinstimmenden `ApplicationId` Wert in die Produktion kopiert werden, können Sie eine Abfrage schreiben, um diese falschen `ApplicationId` Werte auf die `ApplicationId` zu aktualisieren, die in der Produktionsumgebung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-231">If you find yourself in this situation - with user accounts copied to production with a mismatched `ApplicationId` value - you could write a query to update these incorrect `ApplicationId` values to the `ApplicationId` used on production.</span></span> <span data-ttu-id="a0799-232">Nach der Aktualisierung können sich die Benutzer, deren Konten in der Entwicklungsumgebung erstellt wurden, jetzt bei der Webanwendung in der Produktion anmelden.</span><span class="sxs-lookup"><span data-stu-id="a0799-232">Once updated, the users whose accounts were created on the development environment would now be able to sign into the web application on production.</span></span>

<span data-ttu-id="a0799-233">Die gute Nachricht ist, dass es einen einfachen Schritt gibt, den Sie ausführen können, um sicherzustellen, dass die beiden Umgebungen denselben `ApplicationId` verwenden. Legen Sie das `applicationName`-Attribut in `Web.config` für alle Ihre Anwendungs Dienstanbieter explizit fest.</span><span class="sxs-lookup"><span data-stu-id="a0799-233">The good news is that there is a simple step you can take to ensure that the two environments use the same `ApplicationId` - explicitly set the `applicationName` attribute in `Web.config` for all of your application services providers.</span></span> <span data-ttu-id="a0799-234">Das `applicationName`-Attribut wird in den `<membership>`-und `<roleManager>`-Elementen explizit auf "BookReviews" festgelegt, wie in diesem Ausschnitt aus `Web.config` angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a0799-234">I explicitly set the `applicationName` attribute to "BookReviews" in the `<membership>` and `<roleManager>` elements as this snippet from `Web.config` shows.</span></span>

[!code-xml[Main](configuring-a-website-that-uses-application-services-cs/samples/sample4.xml)]

<span data-ttu-id="a0799-235">Weitere Informationen zum Festlegen des `applicationName` Attributs und der zugrunde liegenden Begründung finden Sie im Blogbeitrag von [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s. [*legen Sie die ApplicationName-Eigenschaft immer fest, wenn Sie die ASP.NET-Mitgliedschaft und andere Anbieter konfigurieren*](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="a0799-235">For more discussion on setting the `applicationName` attribute and the rationale behind it, refer to [*Scott Guthrie*](https://weblogs.asp.net/scottgu/) s blog post, [*Always set the applicationName property when configuring ASP.NET Membership and other Providers*](https://weblogs.asp.net/scottgu/443634).</span></span>

### <a name="managing-user-accounts-in-the-production-environment"></a><span data-ttu-id="a0799-236">Verwalten von Benutzerkonten in der Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="a0799-236">Managing User Accounts in the Production Environment</span></span>

<span data-ttu-id="a0799-237">Das ASP.net Web Site Administration Tool (WSAT) vereinfacht das Erstellen und Verwalten von Benutzerkonten, das definieren und Anwenden von Rollen und das Buchstabieren von Benutzer-und rollenbasierten Autorisierungs Regeln.</span><span class="sxs-lookup"><span data-stu-id="a0799-237">The ASP.NET Web Site Administration Tool (WSAT) makes it easy to create and manage user accounts, define and apply roles, and spell out user- and role-based authorization rules.</span></span> <span data-ttu-id="a0799-238">Sie können das WSAT von Visual Studio aus starten, indem Sie zum Projektmappen-Explorer navigieren und auf das Konfigurations Symbol "ASP.net" klicken, oder indem Sie zu den Menüs "Website" oder "Projekt" navigieren und das Menü Element "ASP.net Configuration" auswählen</span><span class="sxs-lookup"><span data-stu-id="a0799-238">You can launch the WSAT from Visual Studio by going to the Solution Explorer and clicking the ASP.NET Configuration icon or by going to the Website or Project menus and selecting the ASP.NET Configuration menu item.</span></span> <span data-ttu-id="a0799-239">Leider kann das WSAT nur mit lokalen Websites funktionieren.</span><span class="sxs-lookup"><span data-stu-id="a0799-239">Unfortunately, the WSAT can only work with local websites.</span></span> <span data-ttu-id="a0799-240">Aus diesem Grund können Sie das WSAT nicht auf Ihrer Arbeitsstation verwenden, um die Website in der Produktionsumgebung zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="a0799-240">Therefore, you cannot use the WSAT from your workstation to manage the website in the production environment.</span></span>

<span data-ttu-id="a0799-241">Die gute Nachricht ist, dass die gesamte Funktionalität, die vom WSAT verfügbar gemacht wird, Programm gesteuert über die APIs für Mitgliedschaften und Rollen verfügbar ist. Außerdem verwenden viele der WSAT-Bildschirme die standardmäßigen ASP.NET-Steuerelemente für die Anmeldung.</span><span class="sxs-lookup"><span data-stu-id="a0799-241">The good news is that all of the functionality exposed provided by the WSAT is available programmatically through the Membership and Roles APIs; furthermore, many of the WSAT screens use the standard ASP.NET Login-related controls.</span></span> <span data-ttu-id="a0799-242">Kurz gesagt: Sie können Ihrer Website ASP.NET Seiten hinzufügen, die die erforderlichen Verwaltungsfunktionen bieten.</span><span class="sxs-lookup"><span data-stu-id="a0799-242">In short, you can add ASP.NET pages to your website that offer the necessary management capabilities.</span></span>

<span data-ttu-id="a0799-243">Beachten Sie, dass ein früheres Tutorial die Webanwendung Book Reviews so aktualisiert hat, dass Sie einen `~/Admin` Ordner enthält. dieser Ordner wurde so konfiguriert, dass nur Benutzer in der Administrator Rolle zugelassen werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-243">Recall that an earlier tutorial updated the Book Reviews web application to include an `~/Admin` folder, and this folder has been configured to only allow users in the Admin role.</span></span> <span data-ttu-id="a0799-244">Ich fügte dem Ordner eine Seite mit dem Namen `CreateAccount.aspx` hinzu, von der ein Administrator ein neues Benutzerkonto erstellen kann.</span><span class="sxs-lookup"><span data-stu-id="a0799-244">I added a page to that folder named `CreateAccount.aspx` from which an administrator can create a new user account.</span></span> <span data-ttu-id="a0799-245">Auf dieser Seite werden die Benutzeroberfläche und die Back-End-Logik zum Erstellen eines neuen Benutzerkontos mithilfe des Steuer Elements "kreateuserwizard" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="a0799-245">This page uses the CreateUserWizard control to display the user interface and backend logic for creating a new user account.</span></span> <span data-ttu-id="a0799-246">Weitere Informationen: Ich habe das Steuerelement so angepasst, dass es ein Kontrollkästchen enthält, das auffordert, ob der neue Benutzer auch der Administrator Rolle hinzugefügt werden soll (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="a0799-246">What s more, I customized the control to include a CheckBox that prompts whether the new user should also be added to the Admin role (see Figure 5).</span></span> <span data-ttu-id="a0799-247">Mit etwas Arbeit können Sie einen benutzerdefinierten Satz von Seiten erstellen, der die Aufgaben für Benutzer-und Rollen Verwaltung implementiert, die andernfalls von WSAT bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="a0799-247">With a little bit of work you can build a custom set of pages that implements the user and role management-related tasks that would otherwise be provided by the WSAT.</span></span>

> [!NOTE]
> <span data-ttu-id="a0799-248">Weitere Informationen zur Verwendung der Mitgliedschafts-und Rollen-APIs zusammen mit den Anmelde bezogenen ASP.net-websteuer Elementen finden Sie in den Lernprogrammen für die [*Website Sicherheit*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="a0799-248">For more information on using the Membership and Roles APIs along with the Login-related ASP.NET Web controls, be sure to read my [*Website Security Tutorials*](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span> <span data-ttu-id="a0799-249">Weitere Informationen zum Anpassen des Steuer Elements "kreateuserwizard" [*finden Sie in*](http://www.erichpeterson.com/) den Tutorials [*Erstellen von Benutzerkonten*](../../older-versions-security/membership/creating-user-accounts-cs.md) und [*Speichern zusätzlicher Benutzerinformationen*](../../older-versions-security/membership/storing-additional-user-information-cs.md) . Sie können auch den Artikel zum [*Anpassen des Steuer Elements "kreateuserwizard*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx)" ansehen.</span><span class="sxs-lookup"><span data-stu-id="a0799-249">For more on customizing the CreateUserWizard control refer to the [*Creating User Accounts*](../../older-versions-security/membership/creating-user-accounts-cs.md) and [*Storing Additional User Information*](../../older-versions-security/membership/storing-additional-user-information-cs.md) tutorials, or check out [*Erich Peterson*](http://www.erichpeterson.com/) s article, [*Customizing the CreateUserWizard Control*](http://aspnet.4guysfromrolla.com/articles/070506-1.aspx).</span></span>

<span data-ttu-id="a0799-250">[![Administratoren können neue Benutzerkonten erstellen.](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span><span class="sxs-lookup"><span data-stu-id="a0799-250">[![Administrators Can Create New User Accounts](configuring-a-website-that-uses-application-services-cs/_static/image14.jpg)](configuring-a-website-that-uses-application-services-cs/_static/image13.jpg)</span></span>

<span data-ttu-id="a0799-251">**Abbildung 5**: Administratoren können neue Benutzerkonten erstellen ([Klicken Sie, um das Bild in voller Größe anzuzeigen](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span><span class="sxs-lookup"><span data-stu-id="a0799-251">**Figure 5**: Administrators Can Create New User Accounts ([Click to view full-size image](configuring-a-website-that-uses-application-services-cs/_static/image15.jpg))</span></span>

<span data-ttu-id="a0799-252">Wenn Sie die vollständige Funktionalität von WSAT benötigen, sehen Sie sich das [*Rollout Ihres eigenen Websiteverwaltungs-Tools*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)an, in dem Autor Dan Clem den Prozess der Erstellung eines benutzerdefinierten WSAT-ähnlichen Tools erläutert.</span><span class="sxs-lookup"><span data-stu-id="a0799-252">If you need the full functionality of the WSAT check out [*Rolling Your Own Web Site Administration Tool*](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx), in which author Dan Clem walks through the process of building a custom WSAT-like tool.</span></span> <span data-ttu-id="a0799-253">Dan gibt den Quellcode der Anwendung (in C#) frei und bietet schrittweise Anleitungen zum Hinzufügen des Codes zu ihrer gehosteten Website.</span><span class="sxs-lookup"><span data-stu-id="a0799-253">Dan shares his application s source code (in C#) and provides step-by-step instructions for adding it to your hosted website.</span></span>

## <a name="summary"></a><span data-ttu-id="a0799-254">Summary</span><span class="sxs-lookup"><span data-stu-id="a0799-254">Summary</span></span>

<span data-ttu-id="a0799-255">Beim Bereitstellen einer Webanwendung, die die Anwendungs Dienst-Datenbankimplementierung verwendet, müssen Sie zunächst sicherstellen, dass die Produktionsdatenbank über die erforderlichen Datenbankobjekte verfügt</span><span class="sxs-lookup"><span data-stu-id="a0799-255">When deploying a web application that uses the application services database implementation you must first ensure that the production database has the requisite database objects.</span></span> <span data-ttu-id="a0799-256">Diese Objekte können mithilfe der Techniken hinzugefügt werden, die im Tutorial zum Bereitstellen *einer Datenbank* erläutert werden. Alternativ können Sie das `aspnet_regsql.exe` Tool verwenden, wie in diesem Tutorial gezeigt.</span><span class="sxs-lookup"><span data-stu-id="a0799-256">These objects can be added using the techniques discussed in the *Deploying a Database* tutorial; alternatively, you can use the `aspnet_regsql.exe` tool, as we saw in this tutorial.</span></span> <span data-ttu-id="a0799-257">Andere Herausforderungen, die wir im Zusammenhang mit der Synchronisierung des in den Entwicklungs-und Produktionsumgebungen verwendeten Anwendungs namensfest gestellt haben (Dies ist wichtig, wenn Benutzer und Rollen, die in der Entwicklungsumgebung erstellt werden, in der Produktion gültig sein soll) und Techniken für Verwalten der Benutzer und Rollen in der Produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="a0799-257">Other challenges we touched on center around synchronizing the application name used in the development and production environments (which is important if you want users and roles created in the development environment to be valid on production) and techniques for managing the users and roles in the production environment.</span></span>

<span data-ttu-id="a0799-258">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="a0799-258">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="a0799-259">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="a0799-259">Further Reading</span></span>

<span data-ttu-id="a0799-260">Weitere Informationen zu den in diesem Tutorial behandelten Themen finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="a0799-260">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="a0799-261">*ASP.NET SQL Server Registrierungs Tool (Aspnet_regsql. exe)* </span><span class="sxs-lookup"><span data-stu-id="a0799-261">*ASP.NET SQL Server Registration Tool (aspnet_regsql.exe)*</span></span>](https://msdn.microsoft.com/library/ms229862.aspx)
- [<span data-ttu-id="a0799-262">*Erstellen der Anwendungsdienste Datenbank für SQL Server*</span><span class="sxs-lookup"><span data-stu-id="a0799-262">*Creating the Application Services Database for SQL Server*</span></span>](https://msdn.microsoft.com/library/x28wfk74.aspx)
- [<span data-ttu-id="a0799-263">*Erstellen des Mitgliedschafts Schemas in SQL Server*</span><span class="sxs-lookup"><span data-stu-id="a0799-263">*Creating the Membership Schema in SQL Server*</span></span>](../../older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs.md)
- [<span data-ttu-id="a0799-264">*Überprüfen der ASP.net s-Mitgliedschaft,-Rollen und-profile*</span><span class="sxs-lookup"><span data-stu-id="a0799-264">*Examining ASP.NET s Membership, Roles, and Profile*</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="a0799-265">*Parallele Websiteverwaltungs-Tools*</span><span class="sxs-lookup"><span data-stu-id="a0799-265">*Rolling Your Own Web Site Administration Tool*</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)
- [<span data-ttu-id="a0799-266">*Tutorials zur Website Sicherheit*</span><span class="sxs-lookup"><span data-stu-id="a0799-266">*Website Security Tutorials*</span></span>](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md)
- [<span data-ttu-id="a0799-267">*Übersicht über das Websiteverwaltungs-Tool*</span><span class="sxs-lookup"><span data-stu-id="a0799-267">*Web Site Administration Tool Overview*</span></span>](https://msdn.microsoft.com/library/yy40ytx0.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="a0799-268">[Zurück](configuring-the-production-web-application-to-use-the-production-database-cs.md)
> [Weiter](strategies-for-database-development-and-deployment-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a0799-268">[Previous](configuring-the-production-web-application-to-use-the-production-database-cs.md)
[Next](strategies-for-database-development-and-deployment-cs.md)</span></span>
