---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: 'Bereitstellen einer ASP.NET-Webanwendung mit SQL Server Compact mithilfe von Visual Studio oder Visual Web Developer: Migrieren zu SQL Server-10 von 12 | Microsoft-Dokumentation'
author: tdykstra
description: In dieser Reihe von Tutorials wird gezeigt, wie Sie ein ASP.NET-Webanwendungs Projekt bereitstellen (veröffentlichen), das eine SQL Server Compact-Datenbank mit Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: c5281a42596d95e725b32e652c75785abe0fd64e
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78462837"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="e62b6-103">Bereitstellen einer ASP.NET-Webanwendung mit SQL Server Compact mithilfe von Visual Studio oder Visual Web Developer: Migrieren zu SQL Server-10 von 12</span><span class="sxs-lookup"><span data-stu-id="e62b6-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>

<span data-ttu-id="e62b6-104">von [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="e62b6-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="e62b6-105">Starter Projekt herunterladen</span><span class="sxs-lookup"><span data-stu-id="e62b6-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="e62b6-106">In dieser Reihe von Tutorials erfahren Sie, wie Sie ein ASP.NET-Webanwendungs Projekt, das eine SQL Server Compact Datenbank enthält, mithilfe von Visual Studio 2012 RC oder Visual Studio Express 2012 RC für das Web bereitstellen (veröffentlichen).</span><span class="sxs-lookup"><span data-stu-id="e62b6-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="e62b6-107">Sie können auch Visual Studio 2010 verwenden, wenn Sie das Webveröffentlichungs Update installieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="e62b6-108">Eine Einführung in die Reihe finden Sie [im ersten Tutorial der Reihe](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="e62b6-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="e62b6-109">Ein Tutorial, das nach der RC-Version von Visual Studio 2012 eingeführte Bereitstellungs Funktionen zeigt, zeigt, wie SQL Server Editionen außer SQL Server Compact bereitgestellt werden, und zeigt, wie Sie die Bereitstellung für Azure App Service Web-Apps ausführen. Weitere Informationen finden Sie unter [ASP.net Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="e62b6-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="e62b6-110">Übersicht</span><span class="sxs-lookup"><span data-stu-id="e62b6-110">Overview</span></span>

<span data-ttu-id="e62b6-111">In diesem Tutorial wird gezeigt, wie Sie von SQL Server Compact zu SQL Server migrieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="e62b6-112">Ein Grund hierfür ist, dass Sie die Vorteile von SQL Server Features nutzen können, die SQL Server Compact nicht unterstützt, wie z. b. gespeicherte Prozeduren, Trigger, Sichten oder Replikation.</span><span class="sxs-lookup"><span data-stu-id="e62b6-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="e62b6-113">Weitere Informationen zu den Unterschieden zwischen SQL Server Compact und SQL Server finden Sie im Tutorial bereitstellen [SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) .</span><span class="sxs-lookup"><span data-stu-id="e62b6-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="e62b6-114">SQL Server Express im Vergleich zu vollständigen SQL Server für die Entwicklung</span><span class="sxs-lookup"><span data-stu-id="e62b6-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="e62b6-115">Wenn Sie sich für ein Upgrade auf SQL Server entschieden haben, möchten Sie möglicherweise SQL Server oder SQL Server Express in ihren Entwicklungs-und Testumgebungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="e62b6-116">Zusätzlich zu den Unterschieden in der Tool Unterstützung und in Funktionen der Datenbank-Engine gibt es Unterschiede in den Anbieter Implementierungen zwischen SQL Server Compact und anderen Versionen von SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e62b6-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="e62b6-117">Diese Unterschiede können dazu führen, dass derselbe Code andere Ergebnisse generiert.</span><span class="sxs-lookup"><span data-stu-id="e62b6-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="e62b6-118">Wenn Sie sich entscheiden, SQL Server Compact als Entwicklungs Datenbank beizubehalten, sollten Sie daher Ihre Website in SQL Server oder SQL Server Express in einer Testumgebung gründlich testen, bevor Sie die Bereitstellung in der Produktion durchführen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="e62b6-119">Im Gegensatz zu SQL Server Compact ist SQL Server Express im Wesentlichen die gleiche Datenbank-Engine und verwendet denselben .NET-Anbieter wie die voll SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e62b6-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="e62b6-120">Wenn Sie mit SQL Server Express testen, können Sie sicher sein, dass Sie die gleichen Ergebnisse wie bei SQL Server erhalten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="e62b6-121">Sie können die meisten der gleichen Datenbanktools mit SQL Server Express verwenden, die Sie mit SQL Server verwenden können (eine wichtige Ausnahme ist [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)) und andere Features von SQL Server wie gespeicherte Prozeduren, Sichten, Trigger und Replikation unterstützen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="e62b6-122">(In der Regel müssen Sie jedoch vollständige SQL Server auf einer Produktions Website verwenden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="e62b6-123">SQL Server Express können in einer freigegebenen Hostingumgebung ausgeführt werden, aber Sie wurde nicht dafür entworfen, und viele Hostinganbieter unterstützen Sie nicht.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="e62b6-124">Wenn Sie Visual Studio 2012 verwenden, wählen Sie in der Regel SQL Server Express localdb für Ihre Entwicklungsumgebung aus, da dies mit Visual Studio standardmäßig installiert wird.</span><span class="sxs-lookup"><span data-stu-id="e62b6-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="e62b6-125">Allerdings funktioniert localdb in IIS nicht, sodass Sie für Ihre Testumgebung entweder SQL Server oder SQL Server Express verwenden müssen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="e62b6-126">Kombinieren und trennen von Datenbanken</span><span class="sxs-lookup"><span data-stu-id="e62b6-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="e62b6-127">Die Anwendung der Anwendung "" der Anwendung "der Anwendung" hat zwei SQL Server Compact Datenbanken: die Mitgliedschafts Datenbank (*ASPNET. sdf*) und die Anwendungsdatenbank (*School. sdf*).</span><span class="sxs-lookup"><span data-stu-id="e62b6-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="e62b6-128">Bei der Migration können Sie diese Datenbanken zu zwei separaten Datenbanken oder zu einer einzelnen Datenbank migrieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="e62b6-129">Möglicherweise möchten Sie diese kombinieren, um datenbankjoins zwischen Ihrer Anwendungsdatenbank und der Mitgliedschafts Datenbank zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="e62b6-130">Ihr Hostingplan kann auch einen Grund für die Kombination der Werte darstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="e62b6-131">Beispielsweise kann der Hostinganbieter mehr als eine Datenbank mehr als eine Datenbank berechnen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="e62b6-132">Dies ist der Fall mit dem in diesem Tutorial verwendeten cytanium Lite-Hostingkonto, das nur eine einzige SQL Server Datenbank zulässt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="e62b6-133">In diesem Tutorial migrieren Sie Ihre beiden Datenbanken auf folgende Weise:</span><span class="sxs-lookup"><span data-stu-id="e62b6-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="e62b6-134">Migrieren Sie zu zwei localdb-Datenbanken in der Entwicklungsumgebung.</span><span class="sxs-lookup"><span data-stu-id="e62b6-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="e62b6-135">Migrieren Sie zu zwei SQL Server Express Datenbanken in der Testumgebung.</span><span class="sxs-lookup"><span data-stu-id="e62b6-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="e62b6-136">Migrieren Sie zu einer kombinierten vollständigen SQL Server-Datenbank in der Produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="e62b6-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="e62b6-137">Erinnerung: Wenn Sie eine Fehlermeldung erhalten oder etwas nicht funktioniert, wenn Sie das Tutorial durchlaufen, achten Sie darauf, dass Sie die [Seite Problem](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md)Behandlung überprüfen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="e62b6-138">Installieren von SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="e62b6-138">Installing SQL Server Express</span></span>

<span data-ttu-id="e62b6-139">SQL Server Express wird standardmäßig automatisch mit Visual Studio 2010 installiert, wird jedoch standardmäßig nicht mit Visual Studio 2012 installiert.</span><span class="sxs-lookup"><span data-stu-id="e62b6-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="e62b6-140">Um SQL Server 2012 Express zu installieren, klicken Sie auf den folgenden Link:</span><span class="sxs-lookup"><span data-stu-id="e62b6-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="e62b6-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="e62b6-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="e62b6-142">Wählen Sie deu */x64/sqlexpr\_x64\_deu. exe* oder deu */x86/sqlexpr\_x86\_deu. exe*aus, und übernehmen Sie im Installations-Assistenten die Standardeinstellungen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="e62b6-143">Weitere Informationen zu Installationsoptionen finden Sie unter [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="e62b6-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="e62b6-144">Erstellen von SQL Server Express-Datenbanken für die Test Umgebung</span><span class="sxs-lookup"><span data-stu-id="e62b6-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="e62b6-145">Der nächste Schritt besteht im Erstellen der ASP.net-Mitgliedschafts-und Schul Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="e62b6-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="e62b6-146">Wählen Sie im Menü **Ansicht** die Option **Server-Explorer** (**Datenbank-Explorer** in Visual Web Developer) aus, klicken Sie dann mit der rechten Maustaste auf **Datenverbindungen** , und wählen Sie **neue SQL Server Datenbank erstellen**aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="e62b6-148">Geben Sie im Dialogfeld **neue SQL Server Datenbank erstellen** im Feld **Server Name** den Namen ".\sqlexpress" ein, und klicken Sie im Feld Name der **neuen Datenbank** auf "ASPNET-Test". Klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="e62b6-150">Führen Sie das gleiche Verfahren aus, um eine neue SQL Server Express School-Datenbank mit dem Namen "School-Test" zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="e62b6-151">(Sie fügen "Test" an diese Datenbanknamen an, da Sie später eine zusätzliche Instanz der einzelnen Datenbanken für die Entwicklungsumgebung erstellen und Sie in der Lage sein müssen, die beiden Gruppen von Datenbanken zu unterscheiden.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="e62b6-152">**Server-Explorer** zeigt nun die beiden neuen Datenbanken an.</span><span class="sxs-lookup"><span data-stu-id="e62b6-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="e62b6-154">Erstellen eines Grant-Skripts für die neuen Datenbanken</span><span class="sxs-lookup"><span data-stu-id="e62b6-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="e62b6-155">Wenn die Anwendung in IIS auf dem Entwicklungs Computer ausgeführt wird, greift die Anwendung mithilfe der Anmelde Informationen des Standard Anwendungs Pools auf die Datenbank zu.</span><span class="sxs-lookup"><span data-stu-id="e62b6-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="e62b6-156">Standardmäßig verfügt die Anwendungs Pool Identität jedoch nicht über die Berechtigung zum Öffnen der Datenbanken.</span><span class="sxs-lookup"><span data-stu-id="e62b6-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="e62b6-157">Sie müssen also ein Skript ausführen, um diese Berechtigung zu erteilen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="e62b6-158">In diesem Abschnitt erstellen Sie das Skript, das Sie später ausführen werden, um sicherzustellen, dass die Anwendung die Datenbanken öffnen kann, wenn Sie in IIS ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e62b6-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="e62b6-159">Erstellen Sie im *Projektmappenordner* Projektmappendatei, den Sie im Tutorial bereitstellen [in der Produktionsumgebung](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) erstellt haben, eine neue SQL-Datei mit dem Namen *Grant. SQL*.</span><span class="sxs-lookup"><span data-stu-id="e62b6-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="e62b6-160">Kopieren Sie die folgenden SQL-Befehle in die Datei, und speichern und schließen Sie dann die Datei:</span><span class="sxs-lookup"><span data-stu-id="e62b6-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="e62b6-161">Dieses Skript ist so konzipiert, dass es mit SQL Server 2008 und mit den IIS-Einstellungen in Windows 7 funktioniert, wie Sie in diesem Tutorial angegeben sind.</span><span class="sxs-lookup"><span data-stu-id="e62b6-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="e62b6-162">Wenn Sie eine andere Version von SQL Server oder Windows verwenden oder IIS auf dem Computer anders einrichten, sind möglicherweise Änderungen an diesem Skript erforderlich.</span><span class="sxs-lookup"><span data-stu-id="e62b6-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="e62b6-163">Weitere Informationen zu SQL Server Skripts finden Sie unter [SQL Server-Onlinedokumentation](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="e62b6-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e62b6-164">**Sicherheitshinweis** Mit diesem Skript erhalten Daten Bank\_Besitzer Berechtigungen für den Benutzer, der zur Laufzeit auf die Datenbank zugreift, was Sie in der Produktionsumgebung tun werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="e62b6-165">In einigen Szenarien möchten Sie möglicherweise einen Benutzer angeben, der über vollständige Datenbankschema-Aktualisierungs Berechtigungen nur für die Bereitstellung verfügt, und für die Laufzeit einen anderen Benutzer angeben, der nur über Berechtigungen zum Lesen und Schreiben von Daten verfügt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="e62b6-166">Weitere Informationen finden Sie unter über **Prüfen der automatischen Web. config-Änderungen für Code First-Migrationen bei der** Bereitstellung in [IIS als Test Umgebung](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="e62b6-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>

## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="e62b6-167">Konfigurieren der Daten Bank Bereitstellung für die Test Umgebung</span><span class="sxs-lookup"><span data-stu-id="e62b6-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="e62b6-168">Als Nächstes konfigurieren Sie Visual Studio so, dass für jede Datenbank die folgenden Aufgaben ausgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="e62b6-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="e62b6-169">Generieren Sie ein SQL-Skript, das die Struktur der Quelldatenbank (Tabellen, Spalten, Einschränkungen usw.) in der Zieldatenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="e62b6-170">Generieren Sie ein SQL-Skript, das die Daten der Quelldatenbank in die Tabellen in der Zieldatenbank einfügt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="e62b6-171">Führen Sie die generierten Skripts und das von Ihnen erstellte Grant-Skript in der Zieldatenbank aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="e62b6-172">Öffnen Sie das Fenster **Projekteigenschaften** , und wählen Sie die Registerkarte **SQL Verpacken/veröffentlichen** aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e62b6-173">Stellen Sie sicher, dass in der Dropdown Liste **Konfiguration** die Option **aktiv (Release)** oder **Release** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="e62b6-174">Klicken Sie auf **Diese Seite aktivieren**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="e62b6-176">Die Registerkarte **Paket-/Veröffentlichungs-SQL** ist normalerweise deaktiviert, da Sie eine Legacy Bereitstellungs Methode angibt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="e62b6-177">In den meisten Szenarien sollten Sie die Daten Bank Bereitstellung im Assistenten **Web veröffentlichen** konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="e62b6-178">Das Migrieren von SQL Server Compact zu SQL Server oder SQL Server Express ist ein Sonderfall, bei dem diese Methode eine gute Wahl ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="e62b6-179">Klicken Sie auf **aus "Web. config" Importieren**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web.config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="e62b6-181">Visual Studio sucht in der Datei " *Web. config* " nach Verbindungs Zeichenfolgen, sucht einen für die Mitgliedschafts Datenbank und einen für die Datenbank "School" und fügt eine Zeile hinzu, die jeder Verbindungs Zeichenfolge in der Tabelle " **Datenbankeinträge** " entspricht.</span><span class="sxs-lookup"><span data-stu-id="e62b6-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="e62b6-182">Die gefundenen Verbindungs Zeichenfolgen gelten für die vorhandenen SQL Server Compact-Datenbanken. der nächste Schritt besteht darin, zu konfigurieren, wie und wo diese Datenbanken bereitgestellt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="e62b6-183">Sie geben Einstellungen für die Daten Bank Bereitstellung im Abschnitt **Daten Bank Eingabe Details** unterhalb der Tabelle **Datenbankeinträge** ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="e62b6-184">Die im Abschnitt Details zum **Datenbankeintrag** angezeigten Einstellungen beziehen sich auf die ausgewählte Zeile in der Tabelle **Datenbankeinträge** , wie in der folgenden Abbildung dargestellt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="e62b6-186">Konfigurieren von Bereitstellungs Einstellungen für die Mitgliedschafts Datenbank</span><span class="sxs-lookup"><span data-stu-id="e62b6-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="e62b6-187">Wählen Sie die Zeile **DefaultConnection-Deployment** in der Tabelle **Datenbankeinträge** aus, um Einstellungen zu konfigurieren, die für die Mitgliedschafts Datenbank gelten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="e62b6-188">Geben Sie unter **Verbindungs Zeichenfolge für Zieldatenbank**eine Verbindungs Zeichenfolge ein, die auf die neue SQL Server Express Mitgliedschafts Datenbank verweist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="e62b6-189">Sie können die benötigte Verbindungs Zeichenfolge von **Server-Explorer**erhalten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="e62b6-190">ErweiternSie in Server-Explorer **Datenverbindungen** , und wählen Sie die **aspnetTest** -Datenbank aus, und kopieren Sie dann im **Eigenschaften** Fenster den Wert der **Verbindungs Zeichenfolge** .</span><span class="sxs-lookup"><span data-stu-id="e62b6-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="e62b6-192">Dieselbe Verbindungs Zeichenfolge wird hier reproduziert:</span><span class="sxs-lookup"><span data-stu-id="e62b6-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="e62b6-193">Kopieren Sie diese Verbindungs Zeichenfolge, und fügen Sie Sie in die **Verbindungs Zeichenfolge für die Zieldatenbank** auf der Registerkarte " **Verpacken**</span><span class="sxs-lookup"><span data-stu-id="e62b6-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e62b6-194">Stellen Sie sicher, dass **Pull Data und/oder Schema aus einer vorhandenen Datenbank** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="e62b6-195">Dies bewirkt, dass SQL-Skripts automatisch generiert und in der Zieldatenbank ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="e62b6-196">Die **Verbindungs Zeichenfolge für den Wert der Quelldatenbank** wird aus der Datei " *Web. config* " extrahiert und verweist auf die Entwicklungs SQL Server Compact Datenbank.</span><span class="sxs-lookup"><span data-stu-id="e62b6-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="e62b6-197">Dies ist die Quelldatenbank, die verwendet wird, um die Skripts zu generieren, die später in der Zieldatenbank ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="e62b6-198">Da Sie die Produktionsversion der Datenbank bereitstellen möchten, ändern Sie "ASPNET-dev. sdf" in "ASPNET-Prod. sdf".</span><span class="sxs-lookup"><span data-stu-id="e62b6-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="e62b6-199">Ändern Sie die Daten **Bank Skript Optionen** aus dem **Schema nur** in das **Schema und die Daten**, da Sie die Daten (Benutzerkonten und Rollen) sowie die Datenbankstruktur kopieren möchten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="e62b6-200">Um die Bereitstellung so zu konfigurieren, dass die zuvor erstellten Grant-Skripts ausgeführt werden, müssen Sie Sie dem Abschnitt **Daten Bank Skripts** hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="e62b6-201">Klicken Sie auf **Skript hinzufügen**, und navigieren Sie im Dialogfeld **SQL-Skripts hinzufügen** zu dem Ordner, in dem Sie das Grant-Skript gespeichert haben (der Ordner, der die Projektmappendatei enthält).</span><span class="sxs-lookup"><span data-stu-id="e62b6-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="e62b6-202">Wählen Sie die Datei *Grant. SQL*aus, und klicken Sie auf **Öffnen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="e62b6-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="e62b6-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="e62b6-204">Die Einstellungen für die Zeile **DefaultConnection-Deployment** in den **Datenbankeinträgen** sehen nun wie in der folgenden Abbildung aus:</span><span class="sxs-lookup"><span data-stu-id="e62b6-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="e62b6-206">Konfigurieren von Bereitstellungs Einstellungen für die Datenbank "School"</span><span class="sxs-lookup"><span data-stu-id="e62b6-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="e62b6-207">Wählen Sie als nächstes die Zeile **schoolContext-Deployment** in der Tabelle **Datenbankeinträge** aus, um die Bereitstellungs Einstellungen für die Datenbank "School" zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="e62b6-208">Sie können dieselbe Methode verwenden, die Sie zuvor verwendet haben, um die Verbindungs Zeichenfolge für die neue SQL Server Express-Datenbank zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="e62b6-209">Kopieren Sie diese Verbindungs Zeichenfolge in die **Verbindungs Zeichenfolge für die Zieldatenbank** auf der Registerkarte **packen/veröffentlichen** .</span><span class="sxs-lookup"><span data-stu-id="e62b6-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="e62b6-210">Stellen Sie sicher, dass **Pull Data und/oder Schema aus einer vorhandenen Datenbank** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="e62b6-211">Die **Verbindungs Zeichenfolge für den Wert der Quelldatenbank** wird aus der Datei " *Web. config* " extrahiert und verweist auf die Entwicklungs SQL Server Compact Datenbank.</span><span class="sxs-lookup"><span data-stu-id="e62b6-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="e62b6-212">Ändern Sie "School-dev. sdf" in "School-Prod. sdf", um die Produktionsversion der Datenbank bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="e62b6-213">(Sie haben nie eine School-Prod. SDF-Datei im Ordner "App\_Data" erstellt. daher kopieren Sie diese Datei aus der Testumgebung in den Ordner "App\_Data" im Projektordner "condesouniversity".)</span><span class="sxs-lookup"><span data-stu-id="e62b6-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="e62b6-214">Ändern Sie die **Datenbankskript Optionen** in **Schema und Daten**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="e62b6-215">Außerdem möchten Sie das Skript ausführen, um der Anwendungs Pool Identität Lese-und Schreibberechtigungen für diese Datenbank zu erteilen. Fügen Sie daher die Skriptdatei " *Grant. SQL* " wie für die Mitgliedschafts Datenbank hinzu.</span><span class="sxs-lookup"><span data-stu-id="e62b6-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="e62b6-216">Wenn Sie fertig sind, sehen die Einstellungen für die Zeile **schoolContext-Deployment** in den **Datenbankeinträgen** wie in der folgenden Abbildung aus:</span><span class="sxs-lookup"><span data-stu-id="e62b6-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="e62b6-218">Speichern Sie die Änderungen auf der Registerkarte " **packen/veröffentlichen** ".</span><span class="sxs-lookup"><span data-stu-id="e62b6-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e62b6-219">Kopieren Sie die Datei *School-Prod. sdf* aus dem Ordner *c:\inetpub\wwwroot\condesouniversity\app\_Data* in den Ordner *App\_Data* im Projekt condesouniversity.</span><span class="sxs-lookup"><span data-stu-id="e62b6-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="e62b6-220">Angeben des transaktiven Modus für das Grant-Skript</span><span class="sxs-lookup"><span data-stu-id="e62b6-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="e62b6-221">Der Bereitstellungs Prozess generiert Skripts, die das Datenbankschema und die Daten bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="e62b6-222">Standardmäßig werden diese Skripts in einer Transaktion ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="e62b6-223">Benutzerdefinierte Skripts (z. b. die Grant-Skripts) werden jedoch standardmäßig nicht in einer Transaktion ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="e62b6-224">Wenn der Bereitstellungs Prozess den Transaktionsmodus vermischt, tritt möglicherweise ein Timeout Fehler auf, wenn die Skripts während der Bereitstellung ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="e62b6-225">In diesem Abschnitt Bearbeiten Sie die Projektdatei, um die benutzerdefinierten Skripts so zu konfigurieren, dass Sie in einer Transaktion ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="e62b6-226">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt **conjesouniversity** , und wählen Sie **Projekt entladen**aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="e62b6-228">Klicken Sie dann mit der rechten Maustaste erneut auf das Projekt, und wählen Sie **condesouniversity. csproj bearbeiten**aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="e62b6-230">Der Visual Studio-Editor zeigt den XML-Inhalt der Projektdatei an.</span><span class="sxs-lookup"><span data-stu-id="e62b6-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="e62b6-231">Beachten Sie, dass mehrere `PropertyGroup` Elemente vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="e62b6-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="e62b6-232">(In der Abbildung wurden die Inhalte der `PropertyGroup` Elemente weggelassen.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Fenster "Projektdatei-Editor"](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="e62b6-234">Der erste, der über kein `Condition` Attribut verfügt, ist für Einstellungen vorgesehen, die unabhängig von der Buildkonfiguration angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="e62b6-235">Ein `PropertyGroup`-Element gilt nur für die Debug-Buildkonfiguration (Beachten Sie das `Condition`-Attribut), ein Element gilt nur für die releasebuildkonfiguration, und ein Element gilt nur für die testbuildkonfiguration.</span><span class="sxs-lookup"><span data-stu-id="e62b6-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="e62b6-236">Innerhalb des `PropertyGroup`-Elements für die releasebuildkonfiguration wird ein `PublishDatabaseSettings` Element angezeigt, das die Einstellungen enthält, die Sie auf der Registerkarte " **packen/veröffentlichen** " eingegeben haben. Es gibt ein `Object` Element, das jedem der von Ihnen angegebenen Grant-Skripts entspricht (Beachten Sie die beiden Instanzen von "Grant. SQL").</span><span class="sxs-lookup"><span data-stu-id="e62b6-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="e62b6-237">Standardmäßig ist das `Transacted`-Attribut des `Source`-Elements für jedes Grant-Skript `False`.</span><span class="sxs-lookup"><span data-stu-id="e62b6-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="e62b6-239">Ändern Sie den Wert des `Transacted`-Attributs des Elements `Source` in `True`.</span><span class="sxs-lookup"><span data-stu-id="e62b6-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="e62b6-241">Speichern und schließen Sie die Projektdatei, und klicken Sie dann in **Projektmappen-Explorer** mit der rechten Maustaste auf das Projekt, und wählen Sie **Projekt erneut laden**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="e62b6-243">Einrichten von Web. config-Transformationen für die Verbindungs Zeichenfolgen</span><span class="sxs-lookup"><span data-stu-id="e62b6-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="e62b6-244">Die Verbindungs Zeichenfolgen für die neuen SQL Express-Datenbanken, die Sie auf der Registerkarte **Verpacken/veröffentlichen-SQL** eingegeben haben, werden von Web deploy nur zum Aktualisieren der Zieldatenbank während der Bereitstellung verwendet.</span><span class="sxs-lookup"><span data-stu-id="e62b6-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="e62b6-245">Sie müssen weiterhin *Web. config* -Transformationen einrichten, damit die Verbindungs Zeichenfolgen in der bereitgestellten *Web. config* -Datei auf die neuen SQL Server Express-Datenbanken verweisen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="e62b6-246">(Wenn Sie die Registerkarte " **packen/veröffentlichen** " verwenden, können Sie keine Verbindungs Zeichenfolgen im Veröffentlichungs Profil konfigurieren.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="e62b6-247">Öffnen Sie *Web. Test. config* , und ersetzen Sie das `connectionStrings`-Element durch das `connectionStrings`-Element im folgenden Beispiel.</span><span class="sxs-lookup"><span data-stu-id="e62b6-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="e62b6-248">(Stellen Sie sicher, dass Sie nur das connectionStrings-Element kopieren, nicht den umgebenden Code, der hier angezeigt wird, um Kontext bereitzustellen.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="e62b6-249">Dieser Code bewirkt, dass die `connectionString`-und `providerName` Attribute der einzelnen `add` Elemente in der bereitgestellten *Web. config* -Datei ersetzt werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="e62b6-250">Diese Verbindungs Zeichenfolgen sind nicht identisch mit denen, die Sie auf der Registerkarte " **packen/veröffentlichen** " eingegeben haben. Die Einstellung "MultipleActiveResultSets = True" wurde hinzugefügt, da Sie für die Entity Framework und die universelle Anbieter erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="e62b6-251">Installieren von SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="e62b6-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="e62b6-252">Das nuget-Paket sqlservercompact stellt die SQL Server Compact Datenbank-Engine-Assemblys für die Anwendung "der Anwendung" der Anwendung ".</span><span class="sxs-lookup"><span data-stu-id="e62b6-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="e62b6-253">Jetzt ist es aber nicht die Anwendung, sondern Web deploy, die in der Lage sein müssen, die SQL Server Compact-Datenbanken zu lesen, um Skripts zum Ausführen in den SQL Server-Datenbanken zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="e62b6-254">Um Web deploy SQL Server Compact-Datenbanken lesen zu können, installieren Sie SQL Server Compact auf dem Entwicklungs Computer, indem Sie den folgenden Link verwenden: [Microsoft SQL Server Compact 4,0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="e62b6-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="e62b6-255">Bereitstellen in der Test Umgebung</span><span class="sxs-lookup"><span data-stu-id="e62b6-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="e62b6-256">Zum Veröffentlichen in der Test Umgebung müssen Sie ein Veröffentlichungs Profil erstellen, das so konfiguriert ist, dass die Registerkarte " **Paket/veröffentlichen** " für die Daten Bank Veröffentlichung anstelle der Veröffentlichungs Profil-Datenbankeinstellungen verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="e62b6-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="e62b6-257">Löschen Sie zunächst das vorhandene Test Profil.</span><span class="sxs-lookup"><span data-stu-id="e62b6-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="e62b6-258">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt conjesouniversity, und klicken Sie dann auf **veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e62b6-259">Wählen Sie die Registerkarte **Profil** aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="e62b6-260">Klicken Sie auf **Manage Profiles** (Profile verwalten).</span><span class="sxs-lookup"><span data-stu-id="e62b6-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="e62b6-261">Wählen Sie **Test**, klicken Sie auf **Entfernen**, und klicken Sie dann auf **Schließen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="e62b6-262">Schließen Sie den Assistenten **Web veröffentlichen** , um diese Änderung zu speichern.</span><span class="sxs-lookup"><span data-stu-id="e62b6-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="e62b6-263">Erstellen Sie als nächstes ein neues Test Profil, und verwenden Sie es zum Veröffentlichen des Projekts.</span><span class="sxs-lookup"><span data-stu-id="e62b6-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="e62b6-264">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt conjesouniversity, und klicken Sie dann auf **veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e62b6-265">Wählen Sie die Registerkarte **Profil** aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="e62b6-266">Wählen Sie in der Dropdown Liste **&lt;neu...&gt;** aus, und geben Sie "Test" als Profilnamen ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="e62b6-267">Geben Sie im Feld **Dienst-URL** den *Namen localhost*ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="e62b6-268">Geben Sie im Feld **Website/Anwendung** den Eintrag *Default Web Site/Conto souniversity*ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="e62b6-269">Geben Sie im Feld **Ziel-URL** `http://localhost/ContosoUniversity/`ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="e62b6-270">Klicken Sie auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-270">Click **Next**.</span></span>

<span data-ttu-id="e62b6-271">Auf der Registerkarte " **Einstellungen** " wird gewarnt, dass die Registerkarte " **SQL packen/veröffentlichen** " konfiguriert wurde, und Sie haben die Möglichkeit, Sie zu überschreiben, indem Sie auf neue Verbesserungen der Daten Bank Veröffentlichung</span><span class="sxs-lookup"><span data-stu-id="e62b6-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="e62b6-272">Für diese Bereitstellung möchten Sie die Einstellungen für das **packen/Veröffentlichen von SQL-** Registerkarten nicht außer Kraft setzen. Klicken Sie daher einfach auf **weiter**</span><span class="sxs-lookup"><span data-stu-id="e62b6-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="e62b6-274">Eine Meldung auf der Registerkarte **Vorschau** gibt an, dass **keine Datenbanken für die Veröffentlichung ausgewählt sind**. Dies bedeutet jedoch nur, dass die Daten Bank Veröffentlichung nicht im Veröffentlichungs Profil konfiguriert ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="e62b6-275">Klicken Sie auf **Veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="e62b6-277">Visual Studio stellt die Anwendung bereit und öffnet den Browser auf der Startseite der Website in der Testumgebung.</span><span class="sxs-lookup"><span data-stu-id="e62b6-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="e62b6-278">Führen Sie die Seite Dozenten aus, um zu sehen, dass die gleichen Daten angezeigt werden, die Sie zuvor gesehen haben.</span><span class="sxs-lookup"><span data-stu-id="e62b6-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="e62b6-279">Führen Sie die Seite **Studenten hinzufügen** aus, fügen Sie einen neuen Studenten hinzu, und zeigen Sie dann den neuen Studenten auf der Seite **Studenten** an.</span><span class="sxs-lookup"><span data-stu-id="e62b6-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="e62b6-280">Dadurch wird überprüft, ob Sie die Datenbank aktualisieren können.</span><span class="sxs-lookup"><span data-stu-id="e62b6-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="e62b6-281">Wählen Sie die Seite **Update Guthaben** (Sie müssen sich anmelden) aus, um zu überprüfen, ob die Mitgliedschafts Datenbank bereitgestellt wurde und Sie darauf zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="e62b6-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="e62b6-282">Erstellen einer SQL Server-Datenbank für die Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="e62b6-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="e62b6-283">Nachdem Sie die Bereitstellung in der Testumgebung abgeschlossen haben, können Sie die Bereitstellung für die Produktion einrichten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="e62b6-284">Sie beginnen wie bei der Testumgebung, indem Sie eine Datenbank für die Bereitstellung erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="e62b6-285">Wie Sie sich aus der Übersicht erinnern, lässt der cytanium Lite-Hostingplan nur eine einzige SQL Server Datenbank zu, sodass Sie nur eine Datenbank einrichten, nicht zwei.</span><span class="sxs-lookup"><span data-stu-id="e62b6-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="e62b6-286">Alle Tabellen und Daten aus den Datenbanken der Mitgliedschafts-und Schul SQL Server Compact werden in einer SQL Server Datenbank in der Produktionsumgebung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="e62b6-287">Wechseln Sie in der Systemsteuerung von cytanium [http://panel.cytanium.com](http://panel.cytanium.com).</span><span class="sxs-lookup"><span data-stu-id="e62b6-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com).</span></span> <span data-ttu-id="e62b6-288">Halten Sie die Maus über **Datenbanken** , und klicken Sie dann auf **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-288">Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="e62b6-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="e62b6-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="e62b6-290">Klicken Sie auf der Seite **SQL Server 2008** auf **Datenbank erstellen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-290">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="e62b6-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="e62b6-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="e62b6-292">Benennen Sie die Datenbank "School", und klicken Sie auf **Speichern**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-292">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="e62b6-293">(Auf der Seite wird automatisch das Präfix "" "" "" "" "".</span><span class="sxs-lookup"><span data-stu-id="e62b6-293">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="e62b6-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="e62b6-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="e62b6-295">Klicken Sie auf der gleichen Seite auf **Benutzer erstellen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-295">On the same page, click **Create User**.</span></span> <span data-ttu-id="e62b6-296">Anstatt die integrierte Windows-Sicherheit zu verwenden und die Anwendungs Pool Identität Ihre Datenbank zu öffnen, erstellen Sie auf den Servern von cytanium einen Benutzer, der über die Berechtigung zum Öffnen der Datenbank verfügt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-296">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="e62b6-297">Die Anmelde Informationen des Benutzers werden den Verbindungs Zeichenfolgen hinzugefügt, die in der *Web. config* -Produktions Datei gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-297">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="e62b6-298">In diesem Schritt erstellen Sie diese Anmelde Informationen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-298">In this step you create those credentials.</span></span>

<span data-ttu-id="e62b6-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="e62b6-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="e62b6-300">Füllen Sie die erforderlichen Felder auf der Seite **SQL-Benutzereigenschaften** aus:</span><span class="sxs-lookup"><span data-stu-id="e62b6-300">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="e62b6-301">Geben Sie "Conto souniversityuser" als Namen ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-301">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="e62b6-302">Geben Sie ein Kennwort ein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-302">Enter a password.</span></span>
- <span data-ttu-id="e62b6-303">Wählen **Sie** als Standarddatenbank die Option "Configuration Manager" aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-303">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="e62b6-304">**Aktivieren Sie** das Kontrollkästchen "Configuration Manager".</span><span class="sxs-lookup"><span data-stu-id="e62b6-304">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="e62b6-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="e62b6-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="e62b6-306">Konfigurieren der Daten Bank Bereitstellung für die Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="e62b6-306">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="e62b6-307">Nun können Sie die Einstellungen für die Daten Bank Bereitstellung auf der Registerkarte " **packen/veröffentlichen** " auf der Registerkarte "SQL" wie zuvor für die Testumgebung einrichten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-307">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="e62b6-308">Öffnen Sie das Fenster " **Projekteigenschaften** ", wählen Sie die Registerkarte " **SQL packen/veröffentlichen** " aus, und vergewissern Sie sich, dass in der Dropdown Liste **Konfiguration** die Option **aktiv (Release)** oder **Release** ausgewählt ist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-308">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="e62b6-309">Wenn Sie die Bereitstellungs Einstellungen für die einzelnen Datenbanken konfigurieren, besteht der Hauptunterschied zwischen der Vorgehensweise bei Produktions-und Testumgebungen darin, wie Sie Verbindungs Zeichenfolgen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-309">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="e62b6-310">In der Testumgebung haben Sie verschiedene Verbindungs Zeichenfolgen für die Zieldatenbank eingegeben, aber für die Produktionsumgebung ist die Ziel Verbindungs Zeichenfolge für beide Datenbanken identisch.</span><span class="sxs-lookup"><span data-stu-id="e62b6-310">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="e62b6-311">Dies liegt daran, dass Sie beide Datenbanken in einer Produktionsdatenbank bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-311">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="e62b6-312">Konfigurieren von Bereitstellungs Einstellungen für die Mitgliedschafts Datenbank</span><span class="sxs-lookup"><span data-stu-id="e62b6-312">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="e62b6-313">Um Einstellungen zu konfigurieren, die für die Mitgliedschafts Datenbank gelten, wählen Sie die Zeile **DefaultConnection-Deployment** in der Tabelle **Datenbankeinträge** aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-313">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="e62b6-314">Geben Sie unter **Verbindungs Zeichenfolge für Zieldatenbank**eine Verbindungs Zeichenfolge ein, die auf die neue Produktions SQL Server Datenbank verweist, die Sie soeben erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="e62b6-314">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="e62b6-315">Sie können die Verbindungs Zeichenfolge aus der Willkommens-e-Mail erhalten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-315">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="e62b6-316">Der relevante Teil der e-Mail enthält die folgende Beispiel Verbindungs Zeichenfolge:</span><span class="sxs-lookup"><span data-stu-id="e62b6-316">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="e62b6-317">Nachdem Sie die drei Variablen ersetzt haben, sieht die benötigte Verbindungs Zeichenfolge wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="e62b6-317">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="e62b6-318">Kopieren Sie diese Verbindungs Zeichenfolge, und fügen Sie Sie in die **Verbindungs Zeichenfolge für die Zieldatenbank** auf der Registerkarte " **Verpacken**</span><span class="sxs-lookup"><span data-stu-id="e62b6-318">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="e62b6-319">Stellen Sie sicher, dass die **Pull-Daten und/oder das Schema aus einer vorhandenen Datenbank** noch ausgewählt sind, und dass die **Datenbank-Skript** Erstellungs Optionen weiterhin **Schema und Daten**sind.</span><span class="sxs-lookup"><span data-stu-id="e62b6-319">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="e62b6-320">Deaktivieren Sie im Feld **Daten Bank Skripts** das Kontrollkästchen neben dem Skript Grant. SQL.</span><span class="sxs-lookup"><span data-stu-id="e62b6-320">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="e62b6-322">Konfigurieren von Bereitstellungs Einstellungen für die Datenbank "School"</span><span class="sxs-lookup"><span data-stu-id="e62b6-322">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="e62b6-323">Wählen Sie als nächstes die Zeile **schoolContext-Deployment** in der Tabelle **Datenbankeinträge** aus, um die Einstellungen für die Datenbank "School" zu konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-323">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="e62b6-324">Kopieren Sie dieselbe Verbindungs Zeichenfolge in die **Verbindungs Zeichenfolge für die Zieldatenbank** , die Sie in dieses Feld für die Mitglieds Datenbank kopiert haben.</span><span class="sxs-lookup"><span data-stu-id="e62b6-324">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="e62b6-325">Stellen Sie sicher, dass die **Pull-Daten und/oder das Schema aus einer vorhandenen Datenbank** noch ausgewählt sind, und dass die **Datenbank-Skript** Erstellungs Optionen weiterhin **Schema und Daten**sind.</span><span class="sxs-lookup"><span data-stu-id="e62b6-325">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="e62b6-326">Deaktivieren Sie im Feld **Daten Bank Skripts** das Kontrollkästchen neben dem Skript Grant. SQL.</span><span class="sxs-lookup"><span data-stu-id="e62b6-326">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="e62b6-327">Speichern Sie die Änderungen auf der Registerkarte " **packen/veröffentlichen** ".</span><span class="sxs-lookup"><span data-stu-id="e62b6-327">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="e62b6-328">Einrichten von Web. config-Transformationen für die Verbindungs Zeichenfolgen in Produktionsdatenbanken</span><span class="sxs-lookup"><span data-stu-id="e62b6-328">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="e62b6-329">Als nächstes richten Sie *Web. config* -Transformationen so ein, dass die Verbindungs Zeichenfolgen in der bereitgestellten *Web. config* -Datei auf die neue Produktionsdatenbank verweisen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-329">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="e62b6-330">Die Verbindungs Zeichenfolge, die Sie für die zu verwendende Web deploy auf der Registerkarte **Package/Publish SQL** eingegeben haben, ist identisch mit der Option `MultipleResultSets`.</span><span class="sxs-lookup"><span data-stu-id="e62b6-330">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="e62b6-331">Öffnen Sie *Web. Production. config* , und ersetzen Sie das `connectionStrings`-Element durch ein `connectionStrings` Element, das wie im folgenden Beispiel aussieht.</span><span class="sxs-lookup"><span data-stu-id="e62b6-331">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="e62b6-332">(Kopieren Sie nur das `connectionStrings` Element, nicht die umgebenden Tags, die bereitgestellt werden, um den Kontext anzuzeigen.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-332">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="e62b6-333">Manchmal werden Sie aufgefordert, Verbindungs Zeichenfolgen in der Datei " *Web. config* " immer zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="e62b6-333">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="e62b6-334">Dies ist möglicherweise sinnvoll, wenn Sie die Bereitstellung auf Servern im Unternehmensnetzwerk durchsetzen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-334">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="e62b6-335">Wenn Sie jedoch in einer freigegebenen Hostingumgebung bereitstellen, Vertrauen Sie den Sicherheitsmethoden des hostinganbieters, und es ist nicht erforderlich oder praktikabel, die Verbindungs Zeichenfolgen zu verschlüsseln.</span><span class="sxs-lookup"><span data-stu-id="e62b6-335">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="e62b6-336">Bereitstellen in der Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="e62b6-336">Deploying to the Production Environment</span></span>

<span data-ttu-id="e62b6-337">Jetzt sind Sie bereit für die Bereitstellung in der Produktion.</span><span class="sxs-lookup"><span data-stu-id="e62b6-337">Now you're ready to deploy to production.</span></span> <span data-ttu-id="e62b6-338">Web deploy liest die SQL Server Compact Datenbanken in der *App\_Daten* Ordner Ihres Projekts und erstellt alle Tabellen und Daten in der Produktions SQL Server Datenbank neu.</span><span class="sxs-lookup"><span data-stu-id="e62b6-338">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="e62b6-339">Zum Veröffentlichen mithilfe der Registerkarten Einstellungen für das **packen/Veröffentlichen von Web** müssen Sie ein neues Veröffentlichungs Profil für die Produktion erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-339">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="e62b6-340">Löschen Sie zunächst das vorhandene Produktionsprofil wie zuvor mit dem Test Profil.</span><span class="sxs-lookup"><span data-stu-id="e62b6-340">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="e62b6-341">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt conjesouniversity, und klicken Sie dann auf **veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-341">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e62b6-342">Wählen Sie die Registerkarte **Profil** aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-342">Select the **Profile** tab.</span></span>

<span data-ttu-id="e62b6-343">Klicken Sie auf **Manage Profiles** (Profile verwalten).</span><span class="sxs-lookup"><span data-stu-id="e62b6-343">Click **Manage Profiles**.</span></span>

<span data-ttu-id="e62b6-344">Wählen Sie **Produktion**, klicken Sie auf **Entfernen**, und klicken Sie dann auf **Schließen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-344">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="e62b6-345">Schließen Sie den Assistenten **Web veröffentlichen** , um diese Änderung zu speichern.</span><span class="sxs-lookup"><span data-stu-id="e62b6-345">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="e62b6-346">Erstellen Sie als nächstes ein neues Produktionsprofil, und verwenden Sie es zum Veröffentlichen des Projekts.</span><span class="sxs-lookup"><span data-stu-id="e62b6-346">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="e62b6-347">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf das Projekt conjesouniversity, und klicken Sie dann auf **veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-347">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="e62b6-348">Wählen Sie die Registerkarte **Profil** aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-348">Select the **Profile** tab.</span></span>

<span data-ttu-id="e62b6-349">Klicken Sie auf **importieren**, und wählen Sie die publishsettings-Datei aus, die Sie zuvor heruntergeladen haben.</span><span class="sxs-lookup"><span data-stu-id="e62b6-349">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="e62b6-350">Ändern Sie auf der Registerkarte **Verbindung** die **Ziel-URL** in die korrekte temporäre URL, die in diesem Beispiel http://contosouniversity.com.vserver01.cytanium.comist.</span><span class="sxs-lookup"><span data-stu-id="e62b6-350">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="e62b6-351">Benennen Sie das Profil in Production um.</span><span class="sxs-lookup"><span data-stu-id="e62b6-351">Rename the profile to Production.</span></span> <span data-ttu-id="e62b6-352">(Wählen Sie die Registerkarte **Profil** aus, und klicken Sie hierzu auf **Profile verwalten** .)</span><span class="sxs-lookup"><span data-stu-id="e62b6-352">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="e62b6-353">Schließen Sie den Assistenten **Web veröffentlichen** , um die Änderungen zu speichern.</span><span class="sxs-lookup"><span data-stu-id="e62b6-353">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="e62b6-354">In einer realen Anwendung, in der die Datenbank in der Produktionsumgebung aktualisiert wurde, führen Sie vor der Veröffentlichung zwei weitere Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="e62b6-354">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="e62b6-355">Laden Sie *App\_offline. htm*hoch, wie im Tutorial bereitstellen [in der Produktionsumgebung](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) gezeigt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-355">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="e62b6-356">Verwenden Sie **die Datei-Manager** -Funktion der Systemsteuerung cytanium, um die Dateien *ASPNET-Prod. sdf* und *School-Prod. sdf* von der Produktions Website in den Ordner *App\_Data* des condesouniversity-Projekts zu kopieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-356">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="e62b6-357">Dadurch wird sichergestellt, dass die Daten, die Sie für die neue SQL Server-Datenbank bereitstellen, die neuesten Updates ihrer Produktions Website enthalten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-357">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="e62b6-358">Klicken Sie im **Web auf** die Symbolleiste veröffentlichen, stellen Sie sicher, dass das **Produktions** Profil ausgewählt ist, und klicken Sie dann auf **veröffentlichen**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-358">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="e62b6-359">Wenn Sie vor der Veröffentlichung <em>App\_offline. htm</em> hochgeladen haben, müssen Sie das <strong>Datei-Manager</strong> -Hilfsprogramm in der Systemsteuerung cytanium verwenden, um die <em>App\_Offline</em> zu löschen. htm vor dem testen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-359">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="e62b6-360">Sie können auch gleichzeitig die <em>sdf</em> -Dateien aus dem <em>App-\_Daten</em> Ordner löschen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-360">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="e62b6-361">Sie können nun einen Browser öffnen und zu der URL Ihrer öffentlichen Website navigieren, um die Anwendung auf die gleiche Weise zu testen, die Sie nach der Bereitstellung in der Testumgebung durchgeführt haben.</span><span class="sxs-lookup"><span data-stu-id="e62b6-361">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="e62b6-362">Wechseln zu SQL Server Express localdb in der Entwicklung</span><span class="sxs-lookup"><span data-stu-id="e62b6-362">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="e62b6-363">Wie in der Übersicht erläutert, empfiehlt es sich im Allgemeinen, die gleiche Datenbank-Engine in der Entwicklung zu verwenden, die Sie in Test-und Produktionsumgebungen verwenden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-363">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="e62b6-364">(Beachten Sie, dass der Vorteil der Verwendung von SQL Server Express in der Entwicklung darin besteht, dass die Datenbank in ihren Entwicklungs-, Test-und Produktionsumgebungen identisch funktioniert.) In diesem Abschnitt richten Sie das Projekt conysouniversity so ein, dass SQL Server Express localdb verwendet wird, wenn Sie die Anwendung in Visual Studio ausführen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-364">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="e62b6-365">Die einfachste Möglichkeit, diese Migration durchzuführen, besteht darin, Code First und das Mitgliedschaftssystem neue Entwicklungs Datenbanken für Sie zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-365">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="e62b6-366">Für die Verwendung dieser Methode für die Migration sind drei Schritte erforderlich:</span><span class="sxs-lookup"><span data-stu-id="e62b6-366">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="e62b6-367">Ändern Sie die Verbindungs Zeichenfolgen, um neue SQL Express localdb-Datenbanken anzugeben.</span><span class="sxs-lookup"><span data-stu-id="e62b6-367">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="e62b6-368">Führen Sie das Websiteverwaltungs-Tool aus, um einen Administrator Benutzer zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-368">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="e62b6-369">Dadurch wird die Mitgliedschafts Datenbank erstellt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-369">This creates the membership database.</span></span>
3. <span data-ttu-id="e62b6-370">Verwenden Sie den Code First-Migrationen Update-Database-Befehl, um die Anwendungsdatenbank zu erstellen und zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-370">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="e62b6-371">Aktualisieren von Verbindungs Zeichenfolgen in der Datei "Web. config"</span><span class="sxs-lookup"><span data-stu-id="e62b6-371">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="e62b6-372">Öffnen Sie die Datei " *Web. config* ", und ersetzen Sie das `connectionStrings`-Element durch den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="e62b6-372">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="e62b6-373">Erstellen der Mitgliedschafts Datenbank</span><span class="sxs-lookup"><span data-stu-id="e62b6-373">Creating the Membership Database</span></span>

<span data-ttu-id="e62b6-374">Wählen Sie in **Projektmappen-Explorer**das Projekt condesouniversity aus, und klicken Sie dann im Menü **Projekt** auf **ASP.NET-Konfiguration** .</span><span class="sxs-lookup"><span data-stu-id="e62b6-374">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="e62b6-375">Wählen Sie die Registerkarte Sicherheit aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-375">Select the Security tab.</span></span>

<span data-ttu-id="e62b6-376">Klicken Sie auf **Rollen erstellen oder verwalten**, und erstellen Sie dann eine **Administrator** Rolle.</span><span class="sxs-lookup"><span data-stu-id="e62b6-376">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="e62b6-377">Kehren Sie zur Registerkarte Sicherheit zurück.</span><span class="sxs-lookup"><span data-stu-id="e62b6-377">Return to the Security tab.</span></span>

<span data-ttu-id="e62b6-378">Klicken Sie auf **Benutzer erstellen**, und aktivieren Sie dann das Kontrollkästchen **Administrator** , und erstellen Sie einen Benutzer mit dem Namen admin.</span><span class="sxs-lookup"><span data-stu-id="e62b6-378">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="e62b6-379">Schließen Sie das **Websiteverwaltungs-Tool**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-379">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="e62b6-380">Erstellen der Datenbank "School"</span><span class="sxs-lookup"><span data-stu-id="e62b6-380">Creating the School Database</span></span>

<span data-ttu-id="e62b6-381">Öffnen Sie das Fenster "Paket-Manager-Konsole".</span><span class="sxs-lookup"><span data-stu-id="e62b6-381">Open the Package Manager Console window.</span></span>

<span data-ttu-id="e62b6-382">Wählen Sie in der Dropdown Liste **Standard Projekt** das Projekt conjesouniversity. dal aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-382">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="e62b6-383">Geben Sie folgenden Befehl ein:</span><span class="sxs-lookup"><span data-stu-id="e62b6-383">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="e62b6-384">Code First-Migrationen wendet die anfängliche Migration an, mit der die Datenbank erstellt wird, und wendet dann die Migration addbirthdate an und führt dann die Seed-Methode aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-384">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="e62b6-385">Führen Sie die Website durch Drücken von STRG + F5 aus.</span><span class="sxs-lookup"><span data-stu-id="e62b6-385">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="e62b6-386">Führen Sie wie bei den Test-und Produktionsumgebungen die Seite " **Studenten hinzufügen** " aus, fügen Sie einen neuen Studenten hinzu, und zeigen Sie dann den neuen Studenten auf der Seite " **Students** " an.</span><span class="sxs-lookup"><span data-stu-id="e62b6-386">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="e62b6-387">Dadurch wird überprüft, ob die Datenbank "School" erstellt und initialisiert wurde und ob Sie über Lese-und Schreibzugriff verfügen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-387">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="e62b6-388">Wählen Sie die Seite **Update Guthaben** aus, und melden Sie sich an, um zu überprüfen, ob die Mitgliedschafts Datenbank bereitgestellt wurde und Sie darauf zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="e62b6-388">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="e62b6-389">Wenn Sie Ihre Benutzerkonten nicht migriert haben, erstellen Sie ein Administrator Konto, und wählen Sie dann die Seite mit den **Gutschriften aktualisieren** aus, um zu überprüfen, ob</span><span class="sxs-lookup"><span data-stu-id="e62b6-389">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="e62b6-390">Bereinigen von SQL Server Compact Dateien</span><span class="sxs-lookup"><span data-stu-id="e62b6-390">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="e62b6-391">Dateien und nuget-Pakete, die zur Unterstützung von SQL Server Compact enthalten waren, werden nicht mehr benötigt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-391">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="e62b6-392">Wenn Sie möchten (dieser Schritt ist nicht erforderlich), können Sie nicht benötigte Dateien und Verweise bereinigen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-392">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="e62b6-393">Löschen Sie in **Projektmappen-Explorer**die *sdf* -Dateien aus dem Ordner *App\_Data* und den *amd64* -und *x86* -Ordnern aus dem Ordner *bin* .</span><span class="sxs-lookup"><span data-stu-id="e62b6-393">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="e62b6-394">Klicken Sie in **Projektmappen-Explorer**mit der rechten Maustaste auf die Projekt Mappe (nicht auf eines der Projekte), und klicken Sie dann auf **nuget-Pakete für**Projekt Mappe verwalten.</span><span class="sxs-lookup"><span data-stu-id="e62b6-394">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="e62b6-395">Klicken Sie im linken Bereich des Dialog Felds **nuget-Pakete verwalten** auf **installierte Pakete**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-395">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="e62b6-396">Wählen Sie das Paket **EntityFramework. sqlservercompact** aus, und klicken Sie auf **Verwalten**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-396">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="e62b6-397">Im Dialogfeld **Projekte auswählen** werden beide Projekte ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="e62b6-397">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="e62b6-398">Wenn Sie das Paket in beiden Projekten deinstallieren möchten, deaktivieren Sie beide Kontrollkästchen, und klicken Sie dann auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="e62b6-398">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="e62b6-399">Klicken Sie im Dialogfeld, in dem Sie gefragt werden, ob Sie die abhängigen Pakete deinstallieren möchten, auf Nein.</span><span class="sxs-lookup"><span data-stu-id="e62b6-399">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="e62b6-400">Eines davon ist das Entity Framework Paket, das Sie aufbewahren müssen.</span><span class="sxs-lookup"><span data-stu-id="e62b6-400">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="e62b6-401">Führen Sie das gleiche Verfahren aus, um das **sqlservercompact** -Paket zu deinstallieren.</span><span class="sxs-lookup"><span data-stu-id="e62b6-401">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="e62b6-402">(Die Pakete müssen in dieser Reihenfolge deinstalliert werden, da das Paket " **EntityFramework. sqlservercompact** " vom Paket " **sqlservercompact** " abhängig ist.)</span><span class="sxs-lookup"><span data-stu-id="e62b6-402">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="e62b6-403">Sie haben nun erfolgreich zu SQL Server Express und vollständiger SQL Server migriert.</span><span class="sxs-lookup"><span data-stu-id="e62b6-403">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="e62b6-404">Im nächsten Tutorial nehmen Sie eine weitere Daten Bank Änderung vor, und Sie erfahren, wie Sie Daten Bank Änderungen bereitstellen, wenn Ihre Test-und Produktionsdatenbanken SQL Server Express und vollständige SQL Server verwenden.</span><span class="sxs-lookup"><span data-stu-id="e62b6-404">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e62b6-405">[Zurück](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Weiter](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="e62b6-405">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>
