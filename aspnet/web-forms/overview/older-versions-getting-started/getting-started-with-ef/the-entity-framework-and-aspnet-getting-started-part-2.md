---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
title: Einführung in Entity Framework 4,0 Database First und ASP.NET 4 Web Forms-Teil 2 | Microsoft-Dokumentation
author: tdykstra
description: Die Beispiel-Webanwendung der Beispiel-Web-App veranschaulicht, wie Sie mithilfe der Entity Framework Web Forms Anwendungen erstellen. Die Beispielanwendung ist...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: fb63a326-a4ae-4b0c-a4f5-412327197216
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-2
msc.type: authoredcontent
ms.openlocfilehash: bd6a2e29e6f0df04e39be29160e2e08cc99c4706
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78456447"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-2"></a><span data-ttu-id="bdd11-104">Die ersten Schritte mit Entity Framework 4,0 Database First und ASP.NET 4 Web Forms-Teil 2</span><span class="sxs-lookup"><span data-stu-id="bdd11-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 2</span></span>

<span data-ttu-id="bdd11-105">von [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="bdd11-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="bdd11-106">Die Beispiel-Webanwendung der Beispiel-Web-App veranschaulicht, wie Sie ASP.net-Web Forms Anwendungen mithilfe von Entity Framework 4,0 und Visual Studio 2010 erstellen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="bdd11-107">Weitere Informationen zur tutorialreihe finden Sie [im ersten Tutorial der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="bdd11-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="the-entitydatasource-control"></a><span data-ttu-id="bdd11-108">Das EntityDataSource-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="bdd11-108">The EntityDataSource Control</span></span>

<span data-ttu-id="bdd11-109">Im vorherigen Tutorial haben Sie eine Website, eine Datenbank und ein Datenmodell erstellt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-109">In the previous tutorial you created a web site, a database, and a data model.</span></span> <span data-ttu-id="bdd11-110">In diesem Tutorial arbeiten Sie mit dem `EntityDataSource`-Steuerelement, das ASP.net bereitstellt, um die Arbeit mit einem Entity Framework Datenmodell zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-110">In this tutorial you work with the `EntityDataSource` control that ASP.NET provides in order to make it easy to work with an Entity Framework data model.</span></span> <span data-ttu-id="bdd11-111">Sie erstellen ein `GridView`-Steuerelement zum Anzeigen und Bearbeiten von Studenten Daten, ein `DetailsView` Steuerelement zum Hinzufügen neuer Studenten und ein `DropDownList` Steuerelement für die Auswahl einer Abteilung (die Sie später zum Anzeigen der zugeordneten Kurse verwenden).</span><span class="sxs-lookup"><span data-stu-id="bdd11-111">You'll create a `GridView` control for displaying and editing student data, a `DetailsView` control for adding new students, and a `DropDownList` control for selecting a department (which you'll use later for displaying associated courses).</span></span>

<span data-ttu-id="bdd11-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-112">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image1.png)</span></span>

<span data-ttu-id="bdd11-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-113">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image3.png)</span></span>

<span data-ttu-id="bdd11-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-114">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image5.png)</span></span>

<span data-ttu-id="bdd11-115">Beachten Sie, dass Sie in dieser Anwendung keine Eingabevalidierung zu Seiten hinzufügen, die die Datenbank aktualisieren, und einige der Fehlerbehandlung sind nicht so robust, wie Sie in einer Produktionsanwendung erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="bdd11-115">Note that in this application you won't be adding input validation to pages that update the database, and some of the error handling will not be as robust as would be required in a production application.</span></span> <span data-ttu-id="bdd11-116">Dadurch konzentriert sich das Lernprogramm auf die Entity Framework und hält es nicht mehr zu lange.</span><span class="sxs-lookup"><span data-stu-id="bdd11-116">That keeps the tutorial focused on the Entity Framework and keeps it from getting too long.</span></span> <span data-ttu-id="bdd11-117">Ausführliche Informationen dazu, wie Sie diese Funktionen zu Ihrer Anwendung hinzufügen, finden Sie unter [Validieren von Benutzereingaben in ASP.net Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) und [Fehlerbehandlung in ASP.net Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span><span class="sxs-lookup"><span data-stu-id="bdd11-117">For details about how to add these features to your application, see [Validating User Input in ASP.NET Web Pages](https://msdn.microsoft.com/library/7kh55542.aspx) and [Error Handling in ASP.NET Pages and Applications](https://msdn.microsoft.com/library/w16865z6.aspx).</span></span>

## <a name="adding-and-configuring-the-entitydatasource-control"></a><span data-ttu-id="bdd11-118">Hinzufügen und Konfigurieren des EntityDataSource-Steuer Elements</span><span class="sxs-lookup"><span data-stu-id="bdd11-118">Adding and Configuring the EntityDataSource Control</span></span>

<span data-ttu-id="bdd11-119">Zunächst konfigurieren Sie ein `EntityDataSource`-Steuerelement, um `Person` Entitäten aus der `People` Entitätenmenge zu lesen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-119">You'll begin by configuring an `EntityDataSource` control to read `Person` entities from the `People` entity set.</span></span>

<span data-ttu-id="bdd11-120">Stellen Sie sicher, dass Sie Visual Studio geöffnet haben und dass Sie mit dem Projekt arbeiten, das Sie in Teil 1 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="bdd11-120">Make sure you have Visual Studio open and that you're working with the project you created in part 1.</span></span> <span data-ttu-id="bdd11-121">Wenn Sie das Projekt seit dem Erstellen des Datenmodells oder seit der letzten Änderung, die Sie vorgenommen haben, nicht erstellt haben, erstellen Sie das Projekt jetzt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-121">If you haven't built the project since you created the data model or since the last change you made to it, build the project now.</span></span> <span data-ttu-id="bdd11-122">Änderungen am Datenmodell werden dem Designer erst zur Verfügung gestellt, wenn das Projekt erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="bdd11-122">Changes to the data model are not made available to the designer until the project is built.</span></span>

<span data-ttu-id="bdd11-123">Erstellen Sie eine neue Webseite mithilfe des **Webformulars unter Verwendung** der Vorlage "Master Seite", und nennen Sie Sie " *students. aspx*".</span><span class="sxs-lookup"><span data-stu-id="bdd11-123">Create a new web page using the **Web Form using Master Page** template, and name it *Students.aspx*.</span></span>

<span data-ttu-id="bdd11-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-124">[![Image23](the-entity-framework-and-aspnet-getting-started-part-2/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image7.png)</span></span>

<span data-ttu-id="bdd11-125">Geben Sie *Site. Master* als Master Seite an.</span><span class="sxs-lookup"><span data-stu-id="bdd11-125">Specify *Site.Master* as the master page.</span></span> <span data-ttu-id="bdd11-126">Auf allen Seiten, die Sie für diese Tutorials erstellen, wird diese Master Seite verwendet.</span><span class="sxs-lookup"><span data-stu-id="bdd11-126">All of the pages you create for these tutorials will use this master page.</span></span>

<span data-ttu-id="bdd11-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-127">[![Image24](the-entity-framework-and-aspnet-getting-started-part-2/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image9.png)</span></span>

<span data-ttu-id="bdd11-128">Fügen Sie in der **Quell** Ansicht dem `Content` Steuerelement mit dem Namen `Content2`eine `h2` Überschrift hinzu, wie im folgenden Beispiel gezeigt:</span><span class="sxs-lookup"><span data-stu-id="bdd11-128">In **Source** view, add an `h2` heading to the `Content` control named `Content2`, as shown in the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample1.aspx)]

<span data-ttu-id="bdd11-129">Ziehen Sie auf der Registerkarte **Daten** der **Toolbox**ein `EntityDataSource`-Steuerelement auf die Seite, legen Sie es unterhalb der Überschrift ab, und ändern Sie die ID in `StudentsEntityDataSource`:</span><span class="sxs-lookup"><span data-stu-id="bdd11-129">From the **Data** tab of the **Toolbox**, drag an `EntityDataSource` control to the page, drop it below the heading, and change the ID to `StudentsEntityDataSource`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample2.aspx)]

<span data-ttu-id="bdd11-130">Wechseln Sie zur **Entwurfs** Ansicht, klicken Sie auf das Smarttag des Datenquellen Steuer Elements, und klicken Sie dann auf **Datenquelle konfigurieren** , um den Assistenten zum **Konfigurieren von Datenquellen** zu starten.</span><span class="sxs-lookup"><span data-stu-id="bdd11-130">Switch to **Design** view, click the data source control's smart tag, and then click **Configure Data Source** to launch the **Configure Data Source** wizard.</span></span>

<span data-ttu-id="bdd11-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-131">[![Image01](the-entity-framework-and-aspnet-getting-started-part-2/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image11.png)</span></span>

<span data-ttu-id="bdd11-132">Wählen Sie im Schritt **configure ObjectContext** Wizard die Option **SchoolEntities** als Wert für **benannte Verbindung**aus, und wählen Sie **SchoolEntities** als Wert von **DefaultContainerName** aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-132">In the **Configure ObjectContext** wizard step, select **SchoolEntities** as the value for **Named Connection**, and select **SchoolEntities** as the **DefaultContainerName** value.</span></span> <span data-ttu-id="bdd11-133">Klicken Sie dann auf **Weiter**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-133">Then click **Next**.</span></span>

<span data-ttu-id="bdd11-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-134">[![Image02](the-entity-framework-and-aspnet-getting-started-part-2/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image13.png)</span></span>

<span data-ttu-id="bdd11-135">Hinweis: Wenn an dieser Stelle das folgende Dialogfeld angezeigt wird, müssen Sie das Projekt erstellen, bevor Sie den Vorgang fortsetzen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-135">Note: If you get the following dialog box at this point, you have to build the project before proceeding.</span></span>

<span data-ttu-id="bdd11-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-136">[![Image25](the-entity-framework-and-aspnet-getting-started-part-2/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image15.png)</span></span>

<span data-ttu-id="bdd11-137">Wählen Sie im Schritt **Datenauswahl konfigurieren** die Option **People** als Wert für **entitySetName**aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-137">In the **Configure Data Selection** step, select **People** as the value for **EntitySetName**.</span></span> <span data-ttu-id="bdd11-138">Vergewissern Sie sich unter **auswählen**, dass das Kontrollkästchen ll **auswählen** aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-138">Under **Select**, make sure the **Select A** ll check box is selected.</span></span> <span data-ttu-id="bdd11-139">Wählen Sie dann die Optionen zum Aktivieren von Update und DELETE aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-139">Then select the options to enable update and delete.</span></span> <span data-ttu-id="bdd11-140">Wenn Sie fertig sind, klicken Sie auf **Fertig**stellen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-140">When you're done, click **Finish**.</span></span>

<span data-ttu-id="bdd11-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-141">[![Image03](the-entity-framework-and-aspnet-getting-started-part-2/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image17.png)</span></span>

## <a name="configuring-database-rules-to-allow-deletion"></a><span data-ttu-id="bdd11-142">Konfigurieren von Daten Bank Regeln, um das Löschen zuzulassen</span><span class="sxs-lookup"><span data-stu-id="bdd11-142">Configuring Database Rules to Allow Deletion</span></span>

<span data-ttu-id="bdd11-143">Sie erstellen eine Seite, auf der Benutzer Studenten aus der `Person` Tabelle löschen können, die drei Beziehungen zu anderen Tabellen hat (`Course`, `StudentGrade`und `OfficeAssignment`).</span><span class="sxs-lookup"><span data-stu-id="bdd11-143">You'll be creating a page that lets users delete students from the `Person` table, which has three relationships with other tables (`Course`, `StudentGrade`, and `OfficeAssignment`).</span></span> <span data-ttu-id="bdd11-144">Standardmäßig verhindert die Datenbank, dass Sie eine Zeile in `Person` löschen, wenn in einer der anderen Tabellen Verwandte Zeilen vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="bdd11-144">By default, the database will prevent you from deleting a row in `Person` if there are related rows in one of the other tables.</span></span> <span data-ttu-id="bdd11-145">Sie können die verknüpften Zeilen zuerst manuell löschen, oder Sie können die Datenbank so konfigurieren, dass Sie automatisch gelöscht werden, wenn Sie eine `Person` Zeile löschen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-145">You can manually delete the related rows first, or you can configure the database to delete them automatically when you delete a `Person` row.</span></span> <span data-ttu-id="bdd11-146">Für Student-Datensätze in diesem Tutorial konfigurieren Sie die Datenbank so, dass die zugehörigen Daten automatisch gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-146">For student records in this tutorial, you'll configure the database to delete the related data automatically.</span></span> <span data-ttu-id="bdd11-147">Da Schüler/Studenten Verwandte Zeilen nur in der `StudentGrade` Tabelle haben können, müssen Sie nur eine der drei Beziehungen konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="bdd11-147">Because students can have related rows only in the `StudentGrade` table, you need to configure only one of the three relationships.</span></span>

<span data-ttu-id="bdd11-148">Wenn Sie die Datei " *School. mdf* " verwenden, die Sie aus dem Projekt heruntergeladen haben, das in diesem Tutorial enthalten ist, können Sie diesen Abschnitt überspringen, da diese Konfigurationsänderungen bereits vorgenommen wurden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-148">If you're using the *School.mdf* file that you downloaded from the project that goes with this tutorial, you can skip this section because these configuration changes have already been done.</span></span> <span data-ttu-id="bdd11-149">Wenn Sie die Datenbank durch Ausführen eines Skripts erstellt haben, konfigurieren Sie die Datenbank, indem Sie die folgenden Verfahren ausführen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-149">If you created the database by running a script, configure the database by performing the following procedures.</span></span>

<span data-ttu-id="bdd11-150">Öffnen Sie in **Server-Explorer**das Daten Bank Diagramm, das Sie in Teil 1 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="bdd11-150">In **Server Explorer**, open the database diagram that you created in part 1.</span></span> <span data-ttu-id="bdd11-151">Klicken Sie mit der rechten Maustaste auf die Beziehung zwischen `Person` und `StudentGrade` (die Zeile zwischen Tabellen), und wählen Sie dann **Eigenschaften**aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-151">Right-click the relationship between `Person` and `StudentGrade` (the line between tables), and then select **Properties**.</span></span>

<span data-ttu-id="bdd11-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-152">[![Image04](the-entity-framework-and-aspnet-getting-started-part-2/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image19.png)</span></span>

<span data-ttu-id="bdd11-153">Erweitern Sie im Fenster **Eigenschaften** die Option **INSERT-und Update Specification** , und legen Sie die **DeleteRule** -Eigenschaft auf **Cascade**fest.</span><span class="sxs-lookup"><span data-stu-id="bdd11-153">In the **Properties** window, expand **INSERT and UPDATE Specification** and set the **DeleteRule** property to **Cascade**.</span></span>

<span data-ttu-id="bdd11-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-154">[![Image05](the-entity-framework-and-aspnet-getting-started-part-2/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image21.png)</span></span>

<span data-ttu-id="bdd11-155">Speichern und schließen Sie das Diagramm.</span><span class="sxs-lookup"><span data-stu-id="bdd11-155">Save and close the diagram.</span></span> <span data-ttu-id="bdd11-156">Wenn Sie gefragt werden, ob Sie die Datenbank aktualisieren möchten, klicken Sie auf **Ja**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-156">If you're asked whether you want to update the database, click **Yes**.</span></span>

<span data-ttu-id="bdd11-157">Um sicherzustellen, dass das Modell Entitäten im Arbeitsspeicher synchron mit der Datenbank speichert, müssen Sie die entsprechenden Regeln im Datenmodell festlegen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-157">To make sure that the model keeps entities that are in memory in sync with what the database is doing, you must set corresponding rules in the data model.</span></span> <span data-ttu-id="bdd11-158">Öffnen Sie *School Model. edmx*, klicken Sie mit der rechten Maustaste auf die Zuordnungs Linie zwischen `Person` und `StudentGrade`, und wählen Sie dann **Eigenschaften**aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-158">Open *SchoolModel.edmx*, right-click the association line between `Person` and `StudentGrade`, and then select **Properties**.</span></span>

<span data-ttu-id="bdd11-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-159">[![Image21](the-entity-framework-and-aspnet-getting-started-part-2/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image23.png)</span></span>

<span data-ttu-id="bdd11-160">Legen Sie im Fenster **Eigenschaften** **End1 OnDelete** auf **Cascade**fest.</span><span class="sxs-lookup"><span data-stu-id="bdd11-160">In the **Properties** window, set **End1 OnDelete** to **Cascade**.</span></span>

<span data-ttu-id="bdd11-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-161">[![Image22](the-entity-framework-and-aspnet-getting-started-part-2/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image25.png)</span></span>

<span data-ttu-id="bdd11-162">Speichern und schließen Sie die Datei *School Model. edmx* , und erstellen Sie dann das Projekt neu.</span><span class="sxs-lookup"><span data-stu-id="bdd11-162">Save and close the *SchoolModel.edmx* file, and then rebuild the project.</span></span>

<span data-ttu-id="bdd11-163">Im Allgemeinen haben Sie bei einer Änderung der Datenbank verschiedene Möglichkeiten, um das Modell zu synchronisieren:</span><span class="sxs-lookup"><span data-stu-id="bdd11-163">In general, when the database changes, you have several choices for how to sync up the model:</span></span>

- <span data-ttu-id="bdd11-164">Für bestimmte Arten von Änderungen (z. b. das Hinzufügen oder Aktualisieren von Tabellen, Sichten oder gespeicherten Prozeduren) klicken Sie mit der rechten Maustaste in den Designer, und wählen Sie **Modell aus Datenbank aktualisieren aus** , damit der Designer die Änderungen automatisch vornimmt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-164">For certain kinds of changes (such as adding or refreshing tables, views, or stored procedures), right-click in the designer and select **Update Model from Database** to have the designer make the changes automatically.</span></span>
- <span data-ttu-id="bdd11-165">Generieren Sie das Datenmodell neu.</span><span class="sxs-lookup"><span data-stu-id="bdd11-165">Regenerate the data model.</span></span>
- <span data-ttu-id="bdd11-166">Nehmen Sie manuelle Updates wie diese vor.</span><span class="sxs-lookup"><span data-stu-id="bdd11-166">Make manual updates like this one.</span></span>

<span data-ttu-id="bdd11-167">In diesem Fall können Sie das Modell neu generieren oder die Tabellen aktualisieren, die von der Beziehungs Änderung betroffen sind. dann müssten Sie die Feldnamen Änderung erneut vornehmen (von `FirstName` bis `FirstMidName`).</span><span class="sxs-lookup"><span data-stu-id="bdd11-167">In this case, you could have regenerated the model or refreshed the tables affected by the relationship change, but then you'd have to make the field-name change again (from `FirstName` to `FirstMidName`).</span></span>

## <a name="using-a-gridview-control-to-read-and-update-entities"></a><span data-ttu-id="bdd11-168">Verwenden eines GridView-Steuer Elements zum Lesen und Aktualisieren von Entitäten</span><span class="sxs-lookup"><span data-stu-id="bdd11-168">Using a GridView Control to Read and Update Entities</span></span>

<span data-ttu-id="bdd11-169">In diesem Abschnitt verwenden Sie ein `GridView`-Steuerelement, um Studenten anzuzeigen, zu aktualisieren oder zu löschen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-169">In this section you'll use a `GridView` control to display, update, or delete students.</span></span>

<span data-ttu-id="bdd11-170">Öffnen Sie, oder wechseln Sie zu *students. aspx* , und wechseln Sie zur **Entwurfs** Ansicht.</span><span class="sxs-lookup"><span data-stu-id="bdd11-170">Open or switch to *Students.aspx* and switch to **Design** view.</span></span> <span data-ttu-id="bdd11-171">Ziehen Sie ein `GridView`-Steuerelement auf der Registerkarte **Daten** der **Toolbox**rechts neben das Steuerelement `EntityDataSource`, benennen Sie es `StudentsGridView`, klicken Sie auf das Smarttag, und wählen Sie dann **studentsentitydatasource** als Datenquelle aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-171">From the **Data** tab of the **Toolbox**, drag a `GridView` control to the right of the `EntityDataSource` control, name it `StudentsGridView`, click the smart tag, and then select **StudentsEntityDataSource** as the data source.</span></span>

<span data-ttu-id="bdd11-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-172">[![Image06](the-entity-framework-and-aspnet-getting-started-part-2/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image27.png)</span></span>

<span data-ttu-id="bdd11-173">Klicken Sie auf **Schema aktualisieren** (Klicken Sie auf **Ja** , wenn Sie zur Bestätigung aufgefordert werden), klicken Sie dann auf **Paging aktivieren**, **Sortierung aktivieren**, **Bearbeiten**aktivieren und **Löschen aktivieren**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-173">Click **Refresh Schema** (click **Yes** if you're prompted to confirm), then click **Enable Paging**, **Enable Sorting**, **Enable Editing**, and **Enable Deleting**.</span></span>

<span data-ttu-id="bdd11-174">Klicken Sie auf **Spalten bearbeiten**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-174">Click **Edit Columns**.</span></span>

<span data-ttu-id="bdd11-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-175">[![Image10](the-entity-framework-and-aspnet-getting-started-part-2/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image29.png)</span></span>

<span data-ttu-id="bdd11-176">Löschen Sie im Feld **Ausgewählte Felder** den Text **PersonID**, **LastName**und **HireDate**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-176">In the **Selected fields** box, delete **PersonID**, **LastName**, and **HireDate**.</span></span> <span data-ttu-id="bdd11-177">In der Regel wird Benutzern kein Daten Satz Schlüssel angezeigt, das Einstellungs Datum ist für Schüler und Studenten nicht relevant, und Sie fügen beide Teile des Namens in einem Feld ein, sodass Sie nur eines der namens Felder benötigen.)</span><span class="sxs-lookup"><span data-stu-id="bdd11-177">You typically don't display a record key to users, hire date is not relevant to students, and you'll put both parts of the name in one field, so you only need one of the name fields.)</span></span>

<span data-ttu-id="bdd11-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-178">[![Image11](the-entity-framework-and-aspnet-getting-started-part-2/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image31.png)</span></span>

<span data-ttu-id="bdd11-179">Wählen Sie das Feld **firstmittelname** aus, und klicken Sie dann auf **dieses Feld in ein TemplateField konvertieren**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-179">Select the **FirstMidName** field and then click **Convert this field into a TemplateField**.</span></span>

<span data-ttu-id="bdd11-180">Gehen Sie für " **anmelmentdate**" genauso vor.</span><span class="sxs-lookup"><span data-stu-id="bdd11-180">Do the same for **EnrollmentDate**.</span></span>

<span data-ttu-id="bdd11-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-181">[![Image13](the-entity-framework-and-aspnet-getting-started-part-2/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image33.png)</span></span>

<span data-ttu-id="bdd11-182">Klicken Sie auf **OK** , und wechseln Sie dann zur **Quell** Ansicht.</span><span class="sxs-lookup"><span data-stu-id="bdd11-182">Click **OK** and then switch to **Source** view.</span></span> <span data-ttu-id="bdd11-183">Die restlichen Änderungen werden im Markup einfacher durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-183">The remaining changes will be easier to do directly in markup.</span></span> <span data-ttu-id="bdd11-184">Das `GridView`-Steuerelement Markup sieht nun wie im folgenden Beispiel aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-184">The `GridView` control markup now looks like the following example.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample3.aspx)]

<span data-ttu-id="bdd11-185">Die erste Spalte nach dem Befehlsfeld ist ein Vorlagen Feld, in dem der Vorname derzeit angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="bdd11-185">The first column after the command field is a template field that currently displays the first name.</span></span> <span data-ttu-id="bdd11-186">Ändern Sie das Markup für dieses Vorlagen Feld so, dass es wie im folgenden Beispiel aussieht:</span><span class="sxs-lookup"><span data-stu-id="bdd11-186">Change the markup for this template field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample4.aspx)]

<span data-ttu-id="bdd11-187">Im Anzeigemodus zeigen zwei `Label` Steuerelemente den vor-und Nachnamen an.</span><span class="sxs-lookup"><span data-stu-id="bdd11-187">In display mode, two `Label` controls display the first and last name.</span></span> <span data-ttu-id="bdd11-188">Im Bearbeitungsmodus werden zwei Textfelder bereitgestellt, sodass Sie den vor-und Nachnamen ändern können.</span><span class="sxs-lookup"><span data-stu-id="bdd11-188">In edit mode, two text boxes are provided so you can change the first and last name.</span></span> <span data-ttu-id="bdd11-189">Wie bei den `Label`-Steuerelementen im Anzeigemodus verwenden Sie `Bind` und `Eval` Ausdrücke genau so wie bei ASP.NET-Datenquellen-Steuerelementen, die direkt mit Datenbanken verbunden sind.</span><span class="sxs-lookup"><span data-stu-id="bdd11-189">As with the `Label` controls in display mode, you use `Bind` and `Eval` expressions exactly as you would with ASP.NET data source controls that connect directly to databases.</span></span> <span data-ttu-id="bdd11-190">Der einzige Unterschied besteht darin, dass Sie anstelle von Daten Bank Spalten Entitäts Eigenschaften angeben.</span><span class="sxs-lookup"><span data-stu-id="bdd11-190">The only difference is that you're specifying entity properties instead of database columns.</span></span>

<span data-ttu-id="bdd11-191">Die letzte Spalte ist ein Vorlagen Feld, das das Registrierungsdatum anzeigt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-191">The last column is a template field that displays the enrollment date.</span></span> <span data-ttu-id="bdd11-192">Ändern Sie das Markup für dieses Feld so, dass es wie im folgenden Beispiel aussieht:</span><span class="sxs-lookup"><span data-stu-id="bdd11-192">Change the markup for this field to look like the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample5.aspx)]

<span data-ttu-id="bdd11-193">Im Anzeige-und Bearbeitungsmodus bewirkt die Format Zeichenfolge "{0, d}", dass das Datum im Format "kurzes Datum" angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="bdd11-193">In both display and edit mode, the format string "{0,d}" causes the date to be displayed in the "short date" format.</span></span> <span data-ttu-id="bdd11-194">(Ihr Computer kann so konfiguriert werden, dass dieses Format unterschiedlich angezeigt wird, und zwar von den in diesem Tutorial gezeigten Bildschirmbildern.)</span><span class="sxs-lookup"><span data-stu-id="bdd11-194">(Your computer might be configured to display this format differently from the screen images shown in this tutorial.)</span></span>

<span data-ttu-id="bdd11-195">Beachten Sie, dass der Designer in jedem dieser Vorlagen Felder standardmäßig einen `Bind` Ausdruck verwendet hat, Sie diesen jedoch in einen `Eval` Ausdruck in den `ItemTemplate` Elementen geändert haben.</span><span class="sxs-lookup"><span data-stu-id="bdd11-195">Notice that in each of these template fields, the designer used a `Bind` expression by default, but you've changed that to an `Eval` expression in the `ItemTemplate` elements.</span></span> <span data-ttu-id="bdd11-196">Der `Bind` Ausdruck macht die Daten in `GridView` Steuerelement Eigenschaften verfügbar, wenn Sie im Code auf die Daten zugreifen müssen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-196">The `Bind` expression makes the data available in `GridView` control properties in case you need to access the data in code.</span></span> <span data-ttu-id="bdd11-197">Auf dieser Seite benötigen Sie keinen Zugriff auf diese Daten im Code, sodass Sie `Eval`verwenden können, was effizienter ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-197">In this page you don't need to access this data in code, so you can use `Eval`, which is more efficient.</span></span> <span data-ttu-id="bdd11-198">Weitere Informationen finden Sie unter [erhalten von Daten aus den Daten Steuerelementen](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span><span class="sxs-lookup"><span data-stu-id="bdd11-198">For more information, see [Getting your data out of the data controls](https://weblogs.asp.net/davidfowler/archive/2008/12/12/getting-your-data-out-of-the-data-controls.aspx).</span></span>

## <a name="revising-entitydatasource-control-markup-to-improve-performance"></a><span data-ttu-id="bdd11-199">Überarbeiten von EntityDataSource-Steuerelement Markup zur Verbesserung der Leistung</span><span class="sxs-lookup"><span data-stu-id="bdd11-199">Revising EntityDataSource Control Markup to Improve Performance</span></span>

<span data-ttu-id="bdd11-200">Entfernen Sie im Markup für das `EntityDataSource`-Steuerelement die Attribute `ConnectionString` und `DefaultContainerName`, und ersetzen Sie Sie durch ein `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut.</span><span class="sxs-lookup"><span data-stu-id="bdd11-200">In the markup for the `EntityDataSource` control, remove the `ConnectionString` and `DefaultContainerName` attributes and replace them with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="bdd11-201">Dies ist eine Änderung, die Sie jedes Mal vornehmen sollten, wenn Sie ein `EntityDataSource`-Steuerelement erstellen, es sei denn, Sie müssen eine Verbindung verwenden, die sich von der unterscheidet, die in der Objekt Kontext Klasse hart codiert ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-201">This is a change you should make every time you create an `EntityDataSource` control, unless you need to use a connection that is different from the one that's hard-coded in the object context class.</span></span> <span data-ttu-id="bdd11-202">Die Verwendung des `ContextTypeName`-Attributs bietet die folgenden Vorteile:</span><span class="sxs-lookup"><span data-stu-id="bdd11-202">Using the `ContextTypeName` attribute provides the following benefits:</span></span>

- <span data-ttu-id="bdd11-203">Bessere Leistung.</span><span class="sxs-lookup"><span data-stu-id="bdd11-203">Better performance.</span></span> <span data-ttu-id="bdd11-204">Wenn das `EntityDataSource` Steuerelement das Datenmodell mit den Attributen `ConnectionString` und `DefaultContainerName` initialisiert, werden zusätzliche Aufgaben ausgeführt, um Metadaten für jede Anforderung zu laden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-204">When the `EntityDataSource` control initializes the data model using the `ConnectionString` and `DefaultContainerName` attributes, it performs additional work to load metadata on every request.</span></span> <span data-ttu-id="bdd11-205">Dies ist nicht erforderlich, wenn Sie das `ContextTypeName`-Attribut angeben.</span><span class="sxs-lookup"><span data-stu-id="bdd11-205">This isn't necessary if you specify the `ContextTypeName` attribute.</span></span>
- <span data-ttu-id="bdd11-206">Lazy Load ist in den generierten Objekt Kontext Klassen (z. b. `SchoolEntities` in diesem Tutorial) in Entity Framework 4,0 standardmäßig aktiviert.</span><span class="sxs-lookup"><span data-stu-id="bdd11-206">Lazy loading is turned on by default in generated object context classes (such as `SchoolEntities` in this tutorial) in Entity Framework 4.0.</span></span> <span data-ttu-id="bdd11-207">Dies bedeutet, dass Navigations Eigenschaften bei Bedarf automatisch mit verwandten Daten geladen werden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-207">This means that navigation properties are loaded with related data automatically right when you need it.</span></span> <span data-ttu-id="bdd11-208">Lazy Load wird weiter unten in diesem Tutorial ausführlicher erläutert.</span><span class="sxs-lookup"><span data-stu-id="bdd11-208">Lazy loading is explained in more detail later in this tutorial.</span></span>
- <span data-ttu-id="bdd11-209">Alle Anpassungen, die Sie auf die Objekt Kontext Klasse angewendet haben (in diesem Fall die `SchoolEntities`-Klasse), stehen für Steuerelemente zur Verfügung, die das `EntityDataSource`-Steuerelement verwenden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-209">Any customizations that you've applied to the object context class (in this case, the `SchoolEntities` class) will be available to controls that use the `EntityDataSource` control.</span></span> <span data-ttu-id="bdd11-210">Das Anpassen der Objekt Kontext Klasse ist ein erweitertes Thema, das in dieser tutorialreihe nicht behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="bdd11-210">Customizing the object context class is an advanced topic that is not covered in this tutorial series.</span></span> <span data-ttu-id="bdd11-211">Weitere Informationen finden Sie unter [Erweitern von Entity Framework generierten Typen](https://msdn.microsoft.com/library/dd456844.aspx).</span><span class="sxs-lookup"><span data-stu-id="bdd11-211">For more information, see [Extending Entity Framework Generated Types](https://msdn.microsoft.com/library/dd456844.aspx).</span></span>

<span data-ttu-id="bdd11-212">Das Markup ähnelt nun dem folgenden Beispiel (die Reihenfolge der Eigenschaften kann abweichen):</span><span class="sxs-lookup"><span data-stu-id="bdd11-212">The markup will now resemble the following example (the order of the properties might be different):</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample6.aspx)]

<span data-ttu-id="bdd11-213">Das `EnableFlattening`-Attribut verweist auf eine Funktion, die in früheren Versionen der Entity Framework erforderlich war, da Fremdschlüssel Spalten nicht als Entitäts Eigenschaften verfügbar gemacht wurden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-213">The `EnableFlattening` attribute refers to a feature that was needed in earlier versions of the Entity Framework because foreign key columns were not exposed as entity properties.</span></span> <span data-ttu-id="bdd11-214">Die aktuelle Version ermöglicht die Verwendung von *Fremdschlüssel Zuordnungen*, d. h. Fremdschlüssel Eigenschaften werden für alle n:n-Zuordnungen offengelegt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-214">The current version makes it possible to use *foreign key associations*, which means foreign key properties are exposed for all but many-to-many associations.</span></span> <span data-ttu-id="bdd11-215">Wenn Ihre Entitäten Fremdschlüssel Eigenschaften und keine [komplexen Typen](https://msdn.microsoft.com/library/bb738472.aspx)aufweisen, können Sie dieses Attribut auf `False`festlegen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-215">If your entities have foreign key properties and no [complex types](https://msdn.microsoft.com/library/bb738472.aspx), you can leave this attribute set to `False`.</span></span> <span data-ttu-id="bdd11-216">Entfernen Sie das Attribut nicht aus dem Markup, da der Standardwert `True`ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-216">Don't remove the attribute from the markup, because the default value is `True`.</span></span> <span data-ttu-id="bdd11-217">Weitere Informationen finden Sie unter Vereinfachen von [Objekten (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span><span class="sxs-lookup"><span data-stu-id="bdd11-217">For more information, see [Flattening Objects (EntityDataSource)](https://msdn.microsoft.com/library/ee404746.aspx).</span></span>

<span data-ttu-id="bdd11-218">Führen Sie die Seite aus, und Sie sehen eine Liste der Schüler/Studenten und Mitarbeiter (im nächsten Tutorial können Sie nach nur Schülern Filtern).</span><span class="sxs-lookup"><span data-stu-id="bdd11-218">Run the page and you see a list of students and employees (you'll filter for just students in the next tutorial).</span></span> <span data-ttu-id="bdd11-219">Der Vorname und Nachname werden gleichzeitig angezeigt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-219">The first name and last name are displayed together.</span></span>

<span data-ttu-id="bdd11-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-220">[![Image07](the-entity-framework-and-aspnet-getting-started-part-2/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image35.png)</span></span>

<span data-ttu-id="bdd11-221">Um die Anzeige zu sortieren, klicken Sie auf einen Spaltennamen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-221">To sort the display, click a column name.</span></span>

<span data-ttu-id="bdd11-222">Klicken Sie in einer beliebigen Zeile auf **Bearbeiten** .</span><span class="sxs-lookup"><span data-stu-id="bdd11-222">Click **Edit** in any row.</span></span> <span data-ttu-id="bdd11-223">Text Felder werden angezeigt, in denen Sie den vor-und Nachnamen ändern können.</span><span class="sxs-lookup"><span data-stu-id="bdd11-223">Text boxes are displayed where you can change the first and last name.</span></span>

<span data-ttu-id="bdd11-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-224">[![Image08](the-entity-framework-and-aspnet-getting-started-part-2/_static/image38.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image37.png)</span></span>

<span data-ttu-id="bdd11-225">Die Schaltfläche **Löschen** funktioniert ebenfalls.</span><span class="sxs-lookup"><span data-stu-id="bdd11-225">The **Delete** button also works.</span></span> <span data-ttu-id="bdd11-226">Klicken Sie für eine Zeile mit einem Registrierungsdatum auf löschen, um die Zeile zu löschen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-226">Click delete for a row that has an enrollment date and the row disappears.</span></span> <span data-ttu-id="bdd11-227">(Zeilen ohne Anmeldungs Datum stellen Dozenten dar, und Sie erhalten möglicherweise einen Fehler bei der referenziellen Integrität.</span><span class="sxs-lookup"><span data-stu-id="bdd11-227">(Rows without an enrollment date represent instructors and you may get a referential integrity error.</span></span> <span data-ttu-id="bdd11-228">Im nächsten Tutorial Filtern Sie diese Liste so, dass Sie nur Studenten enthält.)</span><span class="sxs-lookup"><span data-stu-id="bdd11-228">In the next tutorial you'll filter this list to include just students.)</span></span>

## <a name="displaying-data-from-a-navigation-property"></a><span data-ttu-id="bdd11-229">Anzeigen von Daten aus einer Navigations Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="bdd11-229">Displaying Data from a Navigation Property</span></span>

<span data-ttu-id="bdd11-230">Nehmen Sie nun an, Sie möchten wissen, in wie vielen Kursen die einzelnen Studenten angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="bdd11-230">Now suppose you want to know how many courses each student is enrolled in.</span></span> <span data-ttu-id="bdd11-231">Der Entity Framework stellt diese Informationen in der `StudentGrades`-Navigations Eigenschaft der `Person`-Entität bereit.</span><span class="sxs-lookup"><span data-stu-id="bdd11-231">The Entity Framework provides that information in the `StudentGrades` navigation property of the `Person` entity.</span></span> <span data-ttu-id="bdd11-232">Da der Daten bankentwurf nicht zulässt, dass ein Student in einem Kurs registriert wird, ohne dass ein Grade zugewiesen ist, können Sie in diesem Tutorial davon ausgehen, dass das vorhanden sein einer Zeile in der `StudentGrade` Tabellenzeile, die einem Kurs zugeordnet ist, mit der Registrierung im Kurs identisch ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-232">Because the database design does not allow a student to be enrolled in a course without having a grade assigned, for this tutorial you can assume that having a row in the `StudentGrade` table row that is associated with a course is the same as being enrolled in the course.</span></span> <span data-ttu-id="bdd11-233">(Die `Courses` Navigations Eigenschaft ist nur für Dozenten.)</span><span class="sxs-lookup"><span data-stu-id="bdd11-233">(The `Courses` navigation property is only for instructors.)</span></span>

<span data-ttu-id="bdd11-234">Wenn Sie das `ContextTypeName`-Attribut des `EntityDataSource` Steuer Elements verwenden, ruft der Entity Framework automatisch Informationen für eine Navigations Eigenschaft ab, wenn Sie auf diese Eigenschaft zugreifen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-234">When you use the `ContextTypeName` attribute of the `EntityDataSource` control, the Entity Framework automatically retrieves information for a navigation property when you access that property.</span></span> <span data-ttu-id="bdd11-235">Dies wird als *Lazy Loading*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bdd11-235">This is called *lazy loading*.</span></span> <span data-ttu-id="bdd11-236">Dies kann jedoch ineffizient sein, da dies zu einem separaten Aufruf der Datenbank führt, wenn zusätzliche Informationen benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="bdd11-236">However, this can be inefficient, because it results in a separate call to the database each time additional information is needed.</span></span> <span data-ttu-id="bdd11-237">Wenn Sie für jede Entität, die vom `EntityDataSource`-Steuerelement zurückgegeben wird, Daten aus der Navigations Eigenschaft benötigen, ist es effizienter, die verknüpften Daten zusammen mit der Entität selbst in einem einzigen Daten Bank Abruf abzurufen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-237">If you need data from the navigation property for every entity returned by the `EntityDataSource` control, it's more efficient to retrieve the related data along with the entity itself in a single call to the database.</span></span> <span data-ttu-id="bdd11-238">Dies wird als *Eager Loading*bezeichnet, und Sie geben Eager Loading für eine Navigations Eigenschaft an, indem Sie die `Include`-Eigenschaft des `EntityDataSource` Steuer Elements festlegen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-238">This is called *eager loading*, and you specify eager loading for a navigation property by setting the `Include` property of the `EntityDataSource` control.</span></span>

<span data-ttu-id="bdd11-239">In *students. aspx*möchten Sie die Anzahl von Kursen für jeden Schüler/Student anzeigen, sodass Eager Loading die beste Wahl ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-239">In *Students.aspx*, you want to show the number of courses for every student, so eager loading is the best choice.</span></span> <span data-ttu-id="bdd11-240">Wenn Sie alle Schüler/Studenten anzeigen, aber die Anzahl der Kurse nur für einige davon anzeigen (was das Schreiben von Code zusätzlich zum Markup erfordern würde), ist Lazy Loading möglicherweise besser geeignet.</span><span class="sxs-lookup"><span data-stu-id="bdd11-240">If you were displaying all students but showing the number of courses only for a few of them (which would require writing some code in addition to the markup), lazy loading might be a better choice.</span></span>

<span data-ttu-id="bdd11-241">Öffnen Sie, oder wechseln Sie zu *students. aspx*, wechseln Sie zur **Entwurfs** Ansicht, wählen Sie `StudentsEntityDataSource`aus, und legen Sie im Fenster **Eigenschaften** die **include** -Eigenschaft auf **studentgrades**fest.</span><span class="sxs-lookup"><span data-stu-id="bdd11-241">Open or switch to *Students.aspx*, switch to **Design** view, select `StudentsEntityDataSource`, and in the **Properties** window set the **Include** property to **StudentGrades**.</span></span> <span data-ttu-id="bdd11-242">(Wenn Sie mehrere Navigations Eigenschaften erhalten möchten, können Sie die Namen durch Kommas getrennt angeben – z. b. **studentgrades, Kurse**.)</span><span class="sxs-lookup"><span data-stu-id="bdd11-242">(If you wanted to get multiple navigation properties, you could specify their names separated by commas — for example, **StudentGrades, Courses**.)</span></span>

<span data-ttu-id="bdd11-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-243">[![Image19](the-entity-framework-and-aspnet-getting-started-part-2/_static/image40.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image39.png)</span></span>

<span data-ttu-id="bdd11-244">Wechseln Sie zur **Quell** Ansicht.</span><span class="sxs-lookup"><span data-stu-id="bdd11-244">Switch to **Source** view.</span></span> <span data-ttu-id="bdd11-245">Fügen Sie im `StudentsGridView`-Steuerelement hinter dem letzten `asp:TemplateField`-Element das folgende neue Vorlagen Feld hinzu:</span><span class="sxs-lookup"><span data-stu-id="bdd11-245">In the `StudentsGridView` control, after the last `asp:TemplateField` element, add the following new template field:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample7.aspx)]

<span data-ttu-id="bdd11-246">Im `Eval` Ausdruck können Sie auf die Navigations Eigenschaft `StudentGrades`verweisen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-246">In the `Eval` expression, you can reference the navigation property `StudentGrades`.</span></span> <span data-ttu-id="bdd11-247">Da diese Eigenschaft eine Auflistung enthält, verfügt sie über eine `Count`-Eigenschaft, die Sie verwenden können, um die Anzahl von Kursen anzuzeigen, in denen der Student registriert ist.</span><span class="sxs-lookup"><span data-stu-id="bdd11-247">Because this property contains a collection, it has a `Count` property that you can use to display the number of courses in which the student is enrolled.</span></span> <span data-ttu-id="bdd11-248">In einem späteren Tutorial erfahren Sie, wie Sie Daten aus Navigations Eigenschaften anzeigen, die einzelne Entitäten anstelle von Auflistungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="bdd11-248">In a later tutorial you'll see how to display data from navigation properties that contain single entities instead of collections.</span></span> <span data-ttu-id="bdd11-249">(Beachten Sie, dass Sie `BoundField` Elemente nicht zum Anzeigen von Daten aus Navigations Eigenschaften verwenden können.)</span><span class="sxs-lookup"><span data-stu-id="bdd11-249">(Note that you cannot use `BoundField` elements to display data from navigation properties.)</span></span>

<span data-ttu-id="bdd11-250">Führen Sie die Seite aus, und Sie sehen nun, wie viele Kurse die einzelnen Studenten angemeldet sind.</span><span class="sxs-lookup"><span data-stu-id="bdd11-250">Run the page and you now see how many courses each student is enrolled in.</span></span>

<span data-ttu-id="bdd11-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-251">[![Image20](the-entity-framework-and-aspnet-getting-started-part-2/_static/image42.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image41.png)</span></span>

## <a name="using-a-detailsview-control-to-insert-entities"></a><span data-ttu-id="bdd11-252">Verwenden eines DetailsView-Steuer Elements zum Einfügen von Entitäten</span><span class="sxs-lookup"><span data-stu-id="bdd11-252">Using a DetailsView Control to Insert Entities</span></span>

<span data-ttu-id="bdd11-253">Der nächste Schritt besteht darin, eine Seite mit einem `DetailsView`-Steuerelement zu erstellen, mit dem Sie neue Studenten hinzufügen können.</span><span class="sxs-lookup"><span data-stu-id="bdd11-253">The next step is to create a page that has a `DetailsView` control that will let you add new students.</span></span> <span data-ttu-id="bdd11-254">Schließen Sie den Browser, und erstellen Sie dann eine neue Webseite mithilfe der Master Seite *Site. Master* .</span><span class="sxs-lookup"><span data-stu-id="bdd11-254">Close the browser and then create a new web page using the *Site.Master* master page.</span></span> <span data-ttu-id="bdd11-255">Benennen Sie die Seite *studentsadd. aspx*, und wechseln Sie dann zur **Quell** Ansicht.</span><span class="sxs-lookup"><span data-stu-id="bdd11-255">Name the page *StudentsAdd.aspx*, and then switch to **Source** view.</span></span>

<span data-ttu-id="bdd11-256">Fügen Sie das folgende Markup hinzu, um das vorhandene Markup für das `Content` Steuerelement mit dem Namen `Content2`zu ersetzen:</span><span class="sxs-lookup"><span data-stu-id="bdd11-256">Add the following markup to replace the existing markup for the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample8.aspx)]

<span data-ttu-id="bdd11-257">Dieses Markup erstellt ein `EntityDataSource` Steuerelement, das dem in *students. aspx*erstellten ähnelt, mit dem Unterschied, dass es Einfügevorgänge ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="bdd11-257">This markup creates an `EntityDataSource` control that is similar to the one you created in *Students.aspx*, except it enables insertion.</span></span> <span data-ttu-id="bdd11-258">Wie beim `GridView`-Steuerelement sind die gebundenen Felder des `DetailsView` Steuer Elements genau so codiert wie für ein Daten Steuerelement, das eine direkte Verbindung mit einer Datenbank herstellt, mit dem Unterschied, dass Sie auf Entitäts Eigenschaften verweisen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-258">As with the `GridView` control, the bound fields of the `DetailsView` control are coded exactly as they would be for a data control that connects directly to a database, except that they reference entity properties.</span></span> <span data-ttu-id="bdd11-259">In diesem Fall wird das `DetailsView`-Steuerelement nur zum Einfügen von Zeilen verwendet, sodass Sie den Standardmodus auf `Insert`festgelegt haben.</span><span class="sxs-lookup"><span data-stu-id="bdd11-259">In this case, the `DetailsView` control is used only for inserting rows, so you have set the default mode to `Insert`.</span></span>

<span data-ttu-id="bdd11-260">Führen Sie die Seite aus, und fügen Sie einen neuen Studenten hinzu.</span><span class="sxs-lookup"><span data-stu-id="bdd11-260">Run the page and add a new student.</span></span>

<span data-ttu-id="bdd11-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-261">[![Image09](the-entity-framework-and-aspnet-getting-started-part-2/_static/image44.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image43.png)</span></span>

<span data-ttu-id="bdd11-262">Nachdem Sie einen neuen Schüler/Student eingefügt haben, werden die Informationen zu den *neuen Schülern angezeigt*.</span><span class="sxs-lookup"><span data-stu-id="bdd11-262">Nothing will happen after you insert a new student, but if you now run *Students.aspx*, you'll see the new student information.</span></span>

## <a name="displaying-data-in-a-drop-down-list"></a><span data-ttu-id="bdd11-263">Anzeigen von Daten in einer Dropdown Liste</span><span class="sxs-lookup"><span data-stu-id="bdd11-263">Displaying Data in a Drop-Down List</span></span>

<span data-ttu-id="bdd11-264">In den folgenden Schritten wird ein `DropDownList`-Steuerelement mithilfe eines `EntityDataSource` Steuer Elements an eine Entitätenmenge übernehmen</span><span class="sxs-lookup"><span data-stu-id="bdd11-264">In the following steps you'll databind a `DropDownList` control to an entity set using an `EntityDataSource` control.</span></span> <span data-ttu-id="bdd11-265">In diesem Teil des Tutorials wird diese Liste nicht wesentlich behandelt.</span><span class="sxs-lookup"><span data-stu-id="bdd11-265">In this part of the tutorial, you won't do much with this list.</span></span> <span data-ttu-id="bdd11-266">In nachfolgenden Teilen verwenden Sie die Liste, um Benutzern die Auswahl von Kursen zu gestatten, die mit der Abteilung verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="bdd11-266">In subsequent parts, though, you'll use the list to let users select a department to display courses associated with the department.</span></span>

<span data-ttu-id="bdd11-267">Erstellen Sie eine neue Webseite namens " *Courses. aspx*".</span><span class="sxs-lookup"><span data-stu-id="bdd11-267">Create a new web page named *Courses.aspx*.</span></span> <span data-ttu-id="bdd11-268">Fügen Sie in der **Quell** Ansicht dem `Content`-Steuerelement, das `Content2`heißt, eine Überschrift hinzu:</span><span class="sxs-lookup"><span data-stu-id="bdd11-268">In **Source** view, add a heading to the `Content` control that's named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample9.aspx)]

<span data-ttu-id="bdd11-269">Fügen Sie der Seite in der **Entwurfs** Ansicht wie zuvor ein `EntityDataSource`-Steuerelement hinzu, mit der Ausnahme, dass Sie `DepartmentsEntityDataSource`.</span><span class="sxs-lookup"><span data-stu-id="bdd11-269">In **Design** view, add an `EntityDataSource` control to the page as you did before, except this time name it `DepartmentsEntityDataSource`.</span></span> <span data-ttu-id="bdd11-270">Wählen Sie **Abteilungen** als Wert für **entitySetName** aus, und wählen Sie nur die Eigenschaften **DepartmentID** und **Name** aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-270">Select **Departments** as the **EntitySetName** value, and select only the **DepartmentID** and **Name** properties.</span></span>

<span data-ttu-id="bdd11-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-271">[![Image15](the-entity-framework-and-aspnet-getting-started-part-2/_static/image46.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image45.png)</span></span>

<span data-ttu-id="bdd11-272">Ziehen Sie auf der Registerkarte **Standard** der **Toolbox**ein `DropDownList`-Steuerelement auf die Seite, benennen Sie es `DepartmentsDropDownList`, klicken Sie auf das Smarttag, und wählen Sie **Datenquelle auswählen** aus, um den **Assistenten zum Konfigurieren von Daten**Quellen zu starten.</span><span class="sxs-lookup"><span data-stu-id="bdd11-272">From the **Standard** tab of the **Toolbox**, drag a `DropDownList` control to the page, name it `DepartmentsDropDownList`, click the smart tag, and select **Choose Data Source** to start the **DataSource Configuration Wizard**.</span></span>

<span data-ttu-id="bdd11-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-273">[![Image16](the-entity-framework-and-aspnet-getting-started-part-2/_static/image48.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image47.png)</span></span>

<span data-ttu-id="bdd11-274">Wählen Sie im Schritt **Wählen Sie eine Datenquelle** aus die Option **departmentsentitydatasource** als Datenquelle aus, klicken Sie auf **Schema aktualisieren**, und wählen Sie dann **Name** als Datenfeld zum Anzeigen und **DepartmentID** als WertDatenfeld aus.</span><span class="sxs-lookup"><span data-stu-id="bdd11-274">In the **Choose a Data Source** step, select **DepartmentsEntityDataSource** as the data source, click **Refresh Schema**, and then select **Name** as the data field to display and **DepartmentID** as the value data field.</span></span> <span data-ttu-id="bdd11-275">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="bdd11-275">Click **OK**.</span></span>

<span data-ttu-id="bdd11-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-276">[![Image17](the-entity-framework-and-aspnet-getting-started-part-2/_static/image50.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image49.png)</span></span>

<span data-ttu-id="bdd11-277">Die Methode, die Sie verwenden, um das Steuerelement mit dem Entity Framework zu übernehmen, ist identisch mit anderen ASP.NET-Datenquellen-Steuerelementen, außer Sie geben Entitäten und Entitäts Eigenschaften an.</span><span class="sxs-lookup"><span data-stu-id="bdd11-277">The method you use to databind the control using the Entity Framework is the same as with other ASP.NET data source controls except you're specifying entities and entity properties.</span></span>

<span data-ttu-id="bdd11-278">Wechseln Sie zur **Quell** Ansicht, und fügen Sie "Select a Department:" direkt vor dem `DropDownList`-Steuerelement ein.</span><span class="sxs-lookup"><span data-stu-id="bdd11-278">Switch to **Source** view and add "Select a department:" immediately before the `DropDownList` control.</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-2/samples/sample10.aspx)]

<span data-ttu-id="bdd11-279">Zur Erinnerung: Ändern Sie das Markup für das `EntityDataSource` Steuerelement an dieser Stelle, indem Sie die Attribute `ConnectionString` und `DefaultContainerName` durch ein `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` Attribut ersetzen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-279">As a reminder, change the markup for the `EntityDataSource` control at this point by replacing the `ConnectionString` and `DefaultContainerName` attributes with a `ContextTypeName="ContosoUniversity.DAL.SchoolEntities"` attribute.</span></span> <span data-ttu-id="bdd11-280">Es ist oft am besten, zu warten, bis Sie das Daten gebundene Steuerelement erstellt haben, das mit dem Datenquellen-Steuerelement verknüpft ist, bevor Sie das `EntityDataSource`-Steuerelement Markup ändern, denn nachdem Sie die Änderung vorgenommen haben, stellt der Designer im Daten gebundenen Steuerelement keine **Aktualisierungs Schema** Option bereit.</span><span class="sxs-lookup"><span data-stu-id="bdd11-280">It's often best to wait until after you've created the data-bound control that is linked to the data source control before you change the `EntityDataSource` control markup, because after you make the change, the designer will not provide you with a **Refresh Schema** option in the data-bound control.</span></span>

<span data-ttu-id="bdd11-281">Führen Sie die Seite aus, und Sie können eine Abteilung aus der Dropdown Liste auswählen.</span><span class="sxs-lookup"><span data-stu-id="bdd11-281">Run the page and you can select a department from the drop-down list.</span></span>

<span data-ttu-id="bdd11-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="bdd11-282">[![Image18](the-entity-framework-and-aspnet-getting-started-part-2/_static/image52.png)](the-entity-framework-and-aspnet-getting-started-part-2/_static/image51.png)</span></span>

<span data-ttu-id="bdd11-283">Dies schließt die Einführung in die Verwendung des `EntityDataSource`-Steuer Elements ein.</span><span class="sxs-lookup"><span data-stu-id="bdd11-283">This completes the introduction to using the `EntityDataSource` control.</span></span> <span data-ttu-id="bdd11-284">Das Arbeiten mit diesem Steuerelement unterscheidet sich in der Regel nicht von der Arbeit mit anderen ASP.NET-Datenquellen-Steuerelementen, mit der Ausnahme, dass Sie anstelle von Tabellen und Spalten auf Entitäten</span><span class="sxs-lookup"><span data-stu-id="bdd11-284">Working with this control is generally no different from working with other ASP.NET data source controls, except that you reference entities and properties instead of tables and columns.</span></span> <span data-ttu-id="bdd11-285">Die einzige Ausnahme ist, wenn Sie auf Navigations Eigenschaften zugreifen möchten.</span><span class="sxs-lookup"><span data-stu-id="bdd11-285">The only exception is when you want to access navigation properties.</span></span> <span data-ttu-id="bdd11-286">Im nächsten Tutorial sehen Sie, dass sich die Syntax, die Sie mit `EntityDataSource`-Steuerelement verwenden, möglicherweise auch von anderen Datenquellen-Steuerelementen unterscheidet, wenn Sie Daten filtern, gruppieren und sortieren.</span><span class="sxs-lookup"><span data-stu-id="bdd11-286">In the next tutorial you'll see that the syntax you use with `EntityDataSource` control might also differ from other data source controls when you filter, group, and order data.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="bdd11-287">[Zurück](the-entity-framework-and-aspnet-getting-started-part-1.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-3.md)</span><span class="sxs-lookup"><span data-stu-id="bdd11-287">[Previous](the-entity-framework-and-aspnet-getting-started-part-1.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-3.md)</span></span>
