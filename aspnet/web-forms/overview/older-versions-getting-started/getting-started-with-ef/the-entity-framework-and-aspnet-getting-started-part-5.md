---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Einführung in Entity Framework 4,0 Database First und ASP.NET 4 Web Forms-Part 5 | Microsoft-Dokumentation
author: tdykstra
description: Die Beispiel-Webanwendung der Beispiel-Web-App veranschaulicht, wie Sie mithilfe der Entity Framework Web Forms Anwendungen erstellen. Die Beispielanwendung ist...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 75328e67abb4295b619cac5423a9eb970942fff7
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78423867"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="f75a2-104">Ersten Schritte mit Entity Framework 4,0 Database First und ASP.NET 4 Web Forms-Teil 5</span><span class="sxs-lookup"><span data-stu-id="f75a2-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>

<span data-ttu-id="f75a2-105">von [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="f75a2-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="f75a2-106">Die Beispiel-Webanwendung der Beispiel-Web-App veranschaulicht, wie Sie ASP.net-Web Forms Anwendungen mithilfe von Entity Framework 4,0 und Visual Studio 2010 erstellen.</span><span class="sxs-lookup"><span data-stu-id="f75a2-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="f75a2-107">Weitere Informationen zur tutorialreihe finden Sie [im ersten Tutorial der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="f75a2-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="working-with-related-data-continued"></a><span data-ttu-id="f75a2-108">Arbeiten mit verwandten Daten, Fortsetzung</span><span class="sxs-lookup"><span data-stu-id="f75a2-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="f75a2-109">Im vorherigen Tutorial haben Sie begonnen, das `EntityDataSource`-Steuerelement für die Arbeit mit verknüpften Daten zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="f75a2-110">In den Navigations Eigenschaften haben Sie mehrere Ebenen der Hierarchie und bearbeiteten Daten angezeigt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="f75a2-111">In diesem Tutorial arbeiten Sie weiterhin mit verknüpften Daten durch Hinzufügen und Löschen von Beziehungen und durch Hinzufügen einer neuen Entität, die eine Beziehung zu einer vorhandenen Entität aufweist.</span><span class="sxs-lookup"><span data-stu-id="f75a2-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="f75a2-112">Sie erstellen eine Seite, die Kurse hinzufügt, die Abteilungen zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="f75a2-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="f75a2-113">Die Abteilungen sind bereits vorhanden, und wenn Sie einen neuen Kurs erstellen, erstellen Sie gleichzeitig eine Beziehung zwischen der IT-Abteilung und einer vorhandenen Abteilung.</span><span class="sxs-lookup"><span data-stu-id="f75a2-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="f75a2-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f75a2-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="f75a2-115">Außerdem erstellen Sie eine Seite, die mit einer m:n-Beziehung funktioniert, indem Sie einen Dozenten einem Kurs zuweisen (indem Sie eine Beziehung zwischen zwei Entitäten hinzufügen, die Sie auswählen) oder einen Dozenten aus einem Kurs entfernen (Entfernen einer Beziehung zwischen zwei Entitäten, die Sie Wählen Sie aus).</span><span class="sxs-lookup"><span data-stu-id="f75a2-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="f75a2-116">Wenn in der Datenbank eine Beziehung zwischen einem Dozenten und einem Kurs hinzugefügt wird, wird der `CourseInstructor` Association-Tabelle eine neue Zeile hinzugefügt. das Entfernen einer Beziehung umfasst das Löschen einer Zeile aus der `CourseInstructor` Zuordnungs Tabelle.</span><span class="sxs-lookup"><span data-stu-id="f75a2-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="f75a2-117">Dies geschieht jedoch im Entity Framework, indem Navigations Eigenschaften festgelegt werden, ohne dass explizit auf die `CourseInstructor` Tabelle verwiesen wird.</span><span class="sxs-lookup"><span data-stu-id="f75a2-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="f75a2-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f75a2-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="f75a2-119">Hinzufügen einer Entität mit einer Beziehung zu einer vorhandenen Entität</span><span class="sxs-lookup"><span data-stu-id="f75a2-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="f75a2-120">Erstellen Sie eine neue Webseite namens " *coursesadd. aspx* ", die die Master Seite " *Site. Master* " verwendet, und fügen Sie das folgende Markup zum `Content`-Steuerelement mit dem Namen `Content2`hinzu:</span><span class="sxs-lookup"><span data-stu-id="f75a2-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="f75a2-121">Dieses Markup erstellt ein `EntityDataSource` Steuerelement, das Kurse auswählt, das Einfügen ermöglicht und einen Handler für das `Inserting` Ereignis angibt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="f75a2-122">Sie verwenden den-Handler, um die `Department`-Navigations Eigenschaft zu aktualisieren, wenn eine neue `Course` Entität erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="f75a2-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="f75a2-123">Das Markup erstellt außerdem ein `DetailsView`-Steuerelement, das zum Hinzufügen neuer `Course` Entitäten verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="f75a2-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="f75a2-124">Das Markup verwendet gebundene Felder für `Course` Entitäts Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="f75a2-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="f75a2-125">Sie müssen den `CourseID` Wert eingeben, da es sich hierbei nicht um ein vom System generiertes ID-Feld handelt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="f75a2-126">Stattdessen ist es eine Kursnummer, die manuell angegeben werden muss, wenn der Kurs erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="f75a2-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="f75a2-127">Sie verwenden ein Vorlagen Feld für die `Department`-Navigations Eigenschaft, da Navigations Eigenschaften nicht mit `BoundField` Steuerelementen verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="f75a2-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="f75a2-128">Das Feld Vorlage enthält eine Dropdown Liste, in der die Abteilung ausgewählt werden soll.</span><span class="sxs-lookup"><span data-stu-id="f75a2-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="f75a2-129">Die Dropdown Liste wird mit `Eval` anstelle von `Bind`an die `Departments` Entitätenmenge gebunden, da Navigations Eigenschaften nicht direkt gebunden werden können, um Sie zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="f75a2-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="f75a2-130">Sie geben einen Handler für das `Init` Ereignis des `DropDownList`-Steuer Elements an, sodass Sie einen Verweis auf das Steuerelement speichern können, um den Code zu verwenden, der den `DepartmentID` Fremdschlüssel aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="f75a2-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="f75a2-131">Fügen Sie in *CoursesAdd.aspx.cs* unmittelbar nach der Deklaration der partiellen Klasse ein Klassenfeld hinzu, um einen Verweis auf das `DepartmentsDropDownList` Steuerelement zu enthalten:</span><span class="sxs-lookup"><span data-stu-id="f75a2-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="f75a2-132">Fügen Sie einen Handler für das `Init` Ereignis des `DepartmentsDropDownList`-Steuer Elements hinzu, damit Sie einen Verweis auf das Steuerelement speichern können.</span><span class="sxs-lookup"><span data-stu-id="f75a2-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="f75a2-133">Auf diese Weise können Sie den vom Benutzer eingegebenen Wert erhalten und ihn verwenden, um den `DepartmentID` Wert der `Course` Entität zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="f75a2-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="f75a2-134">Fügen Sie einen Handler für das `Inserting` Ereignis des `DetailsView`-Steuer Elements hinzu:</span><span class="sxs-lookup"><span data-stu-id="f75a2-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="f75a2-135">Wenn der Benutzer auf `Insert`klickt, wird das `Inserting`-Ereignis ausgelöst, bevor der neue Datensatz eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="f75a2-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="f75a2-136">Der Code im Handler Ruft die `DepartmentID` aus dem `DropDownList`-Steuerelement ab und verwendet Sie, um den Wert festzulegen, der für die `DepartmentID`-Eigenschaft der `Course` Entität verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="f75a2-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="f75a2-137">Die Entity Framework übernimmt das Hinzufügen dieses Kurses zur `Courses` Navigations Eigenschaft der zugeordneten `Department` Entität.</span><span class="sxs-lookup"><span data-stu-id="f75a2-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="f75a2-138">Außerdem wird die Abteilung der Navigations Eigenschaft `Department` der `Course` Entität hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="f75a2-139">Führen Sie die Seite aus.</span><span class="sxs-lookup"><span data-stu-id="f75a2-139">Run the page.</span></span>

<span data-ttu-id="f75a2-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f75a2-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="f75a2-141">Geben Sie eine ID, einen Titel, eine Anzahl von Gutschriften ein, wählen Sie eine Abteilung aus, und klicken Sie dann auf **Einfügen**.</span><span class="sxs-lookup"><span data-stu-id="f75a2-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="f75a2-142">Führen Sie die Seite " *Courses. aspx* " aus, und wählen Sie dieselbe Abteilung aus, um den neuen Kurs anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="f75a2-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="f75a2-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f75a2-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="f75a2-144">Arbeiten mit m:n-Beziehungen</span><span class="sxs-lookup"><span data-stu-id="f75a2-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="f75a2-145">Die Beziehung zwischen der `Courses` Entitätenmenge und der `People` Entitätenmenge ist eine m:n-Beziehung.</span><span class="sxs-lookup"><span data-stu-id="f75a2-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="f75a2-146">Eine `Course` Entität verfügt über eine Navigations Eigenschaft mit dem Namen `People`, die 0 (null), eine oder mehrere verwandte `Person` Entitäten enthalten kann (die Dozenten darstellen, die diesem Kurs zugewiesen sind).</span><span class="sxs-lookup"><span data-stu-id="f75a2-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="f75a2-147">Und eine `Person` Entität verfügt über eine Navigations Eigenschaft mit dem Namen `Courses`, die 0 (null), eine oder mehrere verwandte `Course` Entitäten enthalten kann (d. h. die Kurse, die Dozenten zugewiesen werden).</span><span class="sxs-lookup"><span data-stu-id="f75a2-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="f75a2-148">Ein Dozent könnte mehrere Kurse unterrichten, und ein Kurs kann von mehreren Dozenten unterrichtet werden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="f75a2-149">In diesem Abschnitt der exemplarischen Vorgehensweise fügen Sie Beziehungen zwischen `Person` und `Course` Entitäten hinzu und entfernen Sie durch Aktualisieren der Navigations Eigenschaften der verknüpften Entitäten.</span><span class="sxs-lookup"><span data-stu-id="f75a2-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="f75a2-150">Erstellen Sie eine neue Webseite namens " *Instructor scourses. aspx* ", die die Master Seite " *Site. Master* " verwendet, und fügen Sie das folgende Markup zum `Content`-Steuerelement mit dem Namen `Content2`hinzu:</span><span class="sxs-lookup"><span data-stu-id="f75a2-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="f75a2-151">Dieses Markup erstellt ein `EntityDataSource` Steuerelement, das den Namen und `PersonID` der `Person` Entitäten für Dozenten abruft.</span><span class="sxs-lookup"><span data-stu-id="f75a2-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="f75a2-152">Ein `DropDrownList`-Steuerelement ist an das `EntityDataSource` Steuerelement gebunden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="f75a2-153">Das `DropDownList`-Steuerelement gibt einen Handler für das `DataBound` Ereignis an.</span><span class="sxs-lookup"><span data-stu-id="f75a2-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="f75a2-154">Sie verwenden diesen Handler, um die beiden Dropdown Listen zu übernehmen, in denen Kurse angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="f75a2-155">Das Markup erstellt außerdem die folgende Gruppe von Steuerelementen, die verwendet werden, um dem ausgewählten Dozenten einen Kurs zuzuweisen:</span><span class="sxs-lookup"><span data-stu-id="f75a2-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="f75a2-156">Ein `DropDownList` Steuerelement zum Auswählen eines Kurses, der zugewiesen werden soll.</span><span class="sxs-lookup"><span data-stu-id="f75a2-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="f75a2-157">Dieses Steuerelement wird mit Kursen aufgefüllt, die dem ausgewählten Dozenten derzeit nicht zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="f75a2-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="f75a2-158">Ein `Button`-Steuerelement, um die Zuweisung zu initiieren.</span><span class="sxs-lookup"><span data-stu-id="f75a2-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="f75a2-159">Ein `Label` Steuerelement, um eine Fehlermeldung anzuzeigen, wenn die Zuweisung fehlschlägt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="f75a2-160">Schließlich erstellt das Markup auch eine Gruppe von Steuerelementen, die zum Entfernen eines Kurses aus dem ausgewählten Dozenten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="f75a2-161">Fügen Sie in *InstructorsCourses.aspx.cs*eine using-Anweisung hinzu:</span><span class="sxs-lookup"><span data-stu-id="f75a2-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="f75a2-162">Fügen Sie eine Methode zum Auffüllen der beiden Dropdown Listen hinzu, die Kurse anzeigen:</span><span class="sxs-lookup"><span data-stu-id="f75a2-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="f75a2-163">Dieser Code Ruft alle Kurse aus der `Courses` Entitätenmenge ab und ruft die Kurse von der `Courses` Navigations Eigenschaft der `Person` Entität für den ausgewählten Dozenten ab.</span><span class="sxs-lookup"><span data-stu-id="f75a2-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="f75a2-164">Anschließend bestimmt er, welche Kurse diesem Dozenten zugewiesen sind, und füllt die Dropdown Listen entsprechend auf.</span><span class="sxs-lookup"><span data-stu-id="f75a2-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="f75a2-165">Fügen Sie einen Handler für das `Click` Ereignis der `Assign` Schaltfläche hinzu:</span><span class="sxs-lookup"><span data-stu-id="f75a2-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="f75a2-166">Mit diesem Code wird die `Person` Entität für den ausgewählten Dozenten abgerufen, die `Course` Entität für den ausgewählten Kurs abgerufen und der ausgewählte Kurs der Navigations Eigenschaft `Courses` der `Person` Entität des Dozenten hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="f75a2-167">Anschließend werden die Änderungen in der Datenbank gespeichert, und die Dropdown Listen werden erneut aufgefüllt, damit die Ergebnisse sofort angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="f75a2-168">Fügen Sie einen Handler für das `Click` Ereignis der `Remove` Schaltfläche hinzu:</span><span class="sxs-lookup"><span data-stu-id="f75a2-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="f75a2-169">Mit diesem Code wird die `Person` Entität für den ausgewählten Dozenten abgerufen, die `Course` Entität für den ausgewählten Kurs abgerufen und der ausgewählte Kurs aus der `Courses` Navigations Eigenschaft der `Person` Entität entfernt.</span><span class="sxs-lookup"><span data-stu-id="f75a2-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="f75a2-170">Anschließend werden die Änderungen in der Datenbank gespeichert, und die Dropdown Listen werden erneut aufgefüllt, damit die Ergebnisse sofort angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="f75a2-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="f75a2-171">Fügen Sie der `Page_Load`-Methode Code hinzu, mit dem sichergestellt wird, dass die Fehlermeldungen nicht sichtbar sind, wenn kein Fehler gemeldet werden kann, und fügen Sie Handler für die `DataBound` und `SelectedIndexChanged` Ereignisse der Dozenten-Dropdown Liste hinzu, um die Dropdown Listen für Kurse aufzufüllen:</span><span class="sxs-lookup"><span data-stu-id="f75a2-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="f75a2-172">Führen Sie die Seite aus.</span><span class="sxs-lookup"><span data-stu-id="f75a2-172">Run the page.</span></span>

<span data-ttu-id="f75a2-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f75a2-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="f75a2-174">Wählen Sie einen Dozenten aus.</span><span class="sxs-lookup"><span data-stu-id="f75a2-174">Select an instructor.</span></span> <span data-ttu-id="f75a2-175">In der Dropdown Liste <strong>Kurs zuweisen</strong> werden die Kurse angezeigt, die der Dozenten nicht vermittelt, und in der Dropdown Liste <strong>Kurs entfernen</strong> werden die Kurse angezeigt, denen der Dozenten bereits zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="f75a2-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="f75a2-176">Wählen Sie im Abschnitt <strong>Kurs zuweisen</strong> einen Kurs aus, und klicken Sie dann auf <strong>zuweisen</strong>.</span><span class="sxs-lookup"><span data-stu-id="f75a2-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="f75a2-177">Der Kurs wechselt zur Dropdown Liste " <strong>Kurs entfernen</strong> ".</span><span class="sxs-lookup"><span data-stu-id="f75a2-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="f75a2-178">Wählen Sie im Abschnitt <strong>Kurs entfernen</strong> einen Kurs aus, und klicken Sie auf <strong>Entfernen</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="f75a2-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="f75a2-179">Der Kurs wechselt zur Dropdown Liste <strong>Kurs zuweisen</strong> .</span><span class="sxs-lookup"><span data-stu-id="f75a2-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="f75a2-180">Sie haben jetzt weitere Möglichkeiten gesehen, mit verwandten Daten zu arbeiten.</span><span class="sxs-lookup"><span data-stu-id="f75a2-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="f75a2-181">Im folgenden Tutorial erfahren Sie, wie Sie im Datenmodell Vererbung verwenden, um die Wartbarkeit Ihrer Anwendung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="f75a2-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f75a2-182">[Zurück](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="f75a2-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>
