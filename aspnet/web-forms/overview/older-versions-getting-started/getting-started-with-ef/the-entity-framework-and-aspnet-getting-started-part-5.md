---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Erste Schritte mit Entity Framework 4.0 Database First und ASP.NET 4 Web Forms – Teil 5 | Microsoft-Dokumentation
author: tdykstra
description: Die Contoso University-Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mithilfe von Entity Framework. Die beispielanwendung ist...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 75328e67abb4295b619cac5423a9eb970942fff7
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65133112"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="c8b9b-104">Erste Schritte mit Entity Framework 4.0 Database First und ASP.NET 4 Web Forms – Teil 5</span><span class="sxs-lookup"><span data-stu-id="c8b9b-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>

<span data-ttu-id="c8b9b-105">durch [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="c8b9b-106">Die Contoso University-Beispielwebanwendung veranschaulicht, wie ASP.NET Web Forms-Anwendungen, die mit dem Entity Framework 4.0 und Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="c8b9b-107">Weitere Informationen zu dieser tutorialreihe finden Sie unter [im ersten Tutorial der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="working-with-related-data-continued"></a><span data-ttu-id="c8b9b-108">Arbeiten mit zugehörigen Daten, Fortsetzung</span><span class="sxs-lookup"><span data-stu-id="c8b9b-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="c8b9b-109">Im vorherigen Tutorial begonnen hat, verwenden Sie die `EntityDataSource` Steuerelement zum Arbeiten mit verknüpften Daten.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="c8b9b-110">Sie mehrere Ebenen der Hierarchie angezeigt, und Daten in den Navigationseigenschaften bearbeitet.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="c8b9b-111">In diesem Tutorial können Sie weiterhin mit verbundenen Daten arbeiten, indem hinzufügen und Löschen von Beziehungen und Hinzufügen einer neuen Entität, die eine Beziehung zu einer vorhandenen Entität verfügt.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="c8b9b-112">Erstellen Sie eine Seite, die Kurse hinzufügt, die Abteilungen zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="c8b9b-113">Die Abteilungen bereits vorhanden sind, und wenn Sie einen neuen Kurs erstellen, gleichzeitig werden erstellen Sie eine Beziehung zwischen diesem und einer vorhandenen Abteilung.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="c8b9b-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="c8b9b-115">Sie erstellen auch eine Seite, die funktioniert mit einer m: n Beziehung durch ein Dozent einem Kurs (Hinzufügen einer Beziehung zwischen zwei Entitäten, die Sie auswählen) zuweisen oder entfernen einen Dozenten aus einem (durch das Entfernen einer Beziehung zwischen zwei Entitäten, die Sie Wählen Sie).</span><span class="sxs-lookup"><span data-stu-id="c8b9b-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="c8b9b-116">Hinzufügen einer Beziehung zwischen einem Dozenten sowie einen Kurs führt in der Datenbank in eine neue Zeile hinzugefügt wird die `CourseInstructor` Zuordnungstabelle: entfernen eine Beziehung umfasst das Löschen einer Zeile aus der `CourseInstructor` Zuordnungstabelle.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="c8b9b-117">Aber Sie hierzu im Entity Framework festlegen Navigationseigenschaften, ohne auf die `CourseInstructor` Tabelle explizit.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="c8b9b-118">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="c8b9b-119">Beim Hinzufügen einer Entität mit einer Beziehung zu einer vorhandenen Entität</span><span class="sxs-lookup"><span data-stu-id="c8b9b-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="c8b9b-120">Erstellen einer neuen Webseite mit dem Namen *CoursesAdd.aspx* , verwendet der *Site.Master* Masterseite, und fügen Sie das folgende Markup zu der `Content` Steuerelement mit dem Namen `Content2`:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="c8b9b-121">Dieses Markup erstellt eine `EntityDataSource` Steuerelement, das Kurse, wählt, ermöglicht das Einfügen von angibt und festlegt, einen Handler für die `Inserting` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="c8b9b-122">Verwenden Sie zum Aktualisieren den Handler die `Department` Navigationseigenschaft, die beim Erstellen eines neuen `Course` Entität wird erstellt.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="c8b9b-123">Das Markup erstellt außerdem eine `DetailsView` Steuerelements angeben, für das Hinzufügen neuer `Course` Entitäten.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="c8b9b-124">Das Markup verwendet gebundene Felder für `Course` Entitätseigenschaften.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="c8b9b-125">Sie haben, geben die `CourseID` bewertet werden, da dies kein vom System generierte ID-Feld ist.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="c8b9b-126">Stattdessen ist es eine Kursnummer, die manuell angegeben werden muss, wenn der Kurs erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="c8b9b-127">Verwenden Sie eine Vorlagenfeld für die `Department` Navigationseigenschaft da Navigationseigenschaften verwendet werden können, mit `BoundField` Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="c8b9b-128">Das Vorlagenfeld enthält eine Dropdownliste, um die Abteilung auswählen.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="c8b9b-129">Die Dropdown Liste an gebunden ist die `Departments` Entitätenmenge mit `Eval` statt `Bind`, erneut aus, da Sie direkt Navigationseigenschaften Binden nicht möglich, um sie zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="c8b9b-130">Geben Sie einen Handler für die `DropDownList` des Steuerelements `Init` Ereignis, damit Sie einen Verweis auf das Steuerelement für die Verwendung vom Code speichern können, die aktualisiert, die `DepartmentID` Fremdschlüssel.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="c8b9b-131">In *CoursesAdd.aspx.cs* direkt nach der Deklaration der partiellen Klasse Klassenfeld hinzufügen, eine um einen Verweis auf die `DepartmentsDropDownList` Steuerelement:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="c8b9b-132">Hinzufügen eines ereignishandlers für das `DepartmentsDropDownList` des Steuerelements `Init` Ereignis, damit Sie einen Verweis auf das Steuerelement speichern können.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="c8b9b-133">Dadurch können Sie rufen Sie den Wert, der der Benutzer eingegeben wurde, und verwenden sie zum Aktualisieren der `DepartmentID` Wert, der die `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="c8b9b-134">Hinzufügen eines ereignishandlers für das `DetailsView` des Steuerelements `Inserting` Ereignis:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="c8b9b-135">Wenn der Benutzer klickt `Insert`, `Inserting` Ereignis wird ausgelöst, bevor der neue Datensatz eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="c8b9b-136">Ruft der Code im Ereignishandler der `DepartmentID` aus der `DropDownList` steuern und wird verwendet, um den Wert festzulegen, die für verwendet werden, die `DepartmentID` Eigenschaft der `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="c8b9b-137">Das Entity Framework kümmert sich diesen Kurs zum Hinzufügen der `Courses` der zugeordneten Navigationseigenschaft `Department` Entität.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="c8b9b-138">Es fügt auch die Abteilung der `Department` Navigationseigenschaft der `Course` Entität.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="c8b9b-139">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-139">Run the page.</span></span>

<span data-ttu-id="c8b9b-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="c8b9b-141">Geben Sie eine ID, einen Titel, eine Anzahl Guthaben, wählen Sie eine Abteilung ein, und klicken Sie auf **einfügen**.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="c8b9b-142">Führen Sie die *Courses.aspx* Seite, und wählen Sie auf den neuen Kurs finden Sie unter derselben Abteilung.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="c8b9b-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="c8b9b-144">Arbeiten mit m: N Beziehungen</span><span class="sxs-lookup"><span data-stu-id="c8b9b-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="c8b9b-145">Die Beziehung zwischen der `Courses` Entitätenmenge und `People` Entitätenmenge ist eine m: n Beziehung.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="c8b9b-146">Ein `Course` Entität verfügt über eine Navigationseigenschaft, die mit dem Namen `People` darf, die 0 (null), ein oder mehrere der im Zusammenhang `Person` Entitäten (für Dozenten, bringen Sie dieser Kurs zugewiesen).</span><span class="sxs-lookup"><span data-stu-id="c8b9b-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="c8b9b-147">Und ein `Person` Entität verfügt über eine Navigationseigenschaft, die mit dem Namen `Courses` darf, die 0 (null), ein oder mehrere der im Zusammenhang `Course` Entitäten (Kurse darstellt, "Instructor" bringen Sie zugewiesen ist).</span><span class="sxs-lookup"><span data-stu-id="c8b9b-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="c8b9b-148">Bringen Sie einen Dozenten möglicherweise mehrere Kurse und ein Kurs kann von mehreren Dozenten unterrichtet werden.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="c8b9b-149">In diesem Abschnitt der exemplarischen Vorgehensweise werden Sie hinzufügen und entfernen Sie Beziehungen zwischen `Person` und `Course` Entitäten durch Aktualisieren der Eigenschaften von verknüpften Entitäten.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="c8b9b-150">Erstellen einer neuen Webseite mit dem Namen *InstructorsCourses.aspx* , verwendet der *Site.Master* Masterseite, und fügen Sie das folgende Markup zu der `Content` Steuerelement mit dem Namen `Content2`:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="c8b9b-151">Dieses Markup erstellt eine `EntityDataSource` Steuerelement, das den Namen abruft und `PersonID` von `Person` Entitäten für Dozenten.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="c8b9b-152">Ein `DropDrownList` -Steuerelement gebunden ist, die `EntityDataSource` Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="c8b9b-153">Die `DropDownList` Steuerelement gibt einen Handler für die `DataBound` Ereignis.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="c8b9b-154">Verwenden Sie diese Handler Databind die beiden Dropdownlisten, die Kurse anzeigen.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="c8b9b-155">Das Markup erstellt außerdem die folgende Gruppe von Steuerelementen zur Verwendung für einen Kurs dem Dozenten zugewiesen:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="c8b9b-156">Ein `DropDownList` Steuerelement zum Auswählen eines Kurses zuweisen.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="c8b9b-157">Dieses Steuerelement wird mit Kursen aufgefüllt, die derzeit nicht zu dem Dozenten zugewiesen sind.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="c8b9b-158">Ein `Button` Steuerelement, um die Zuweisung zu initiieren.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="c8b9b-159">Ein `Label` Steuerelement, das eine Fehlermeldung angezeigt, wenn die Zuweisung ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="c8b9b-160">Schließlich erstellt das Markup auch eine Gruppe von Steuerelementen für einen Kurs aus den ausgewählten Dozenten zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="c8b9b-161">In *InstructorsCourses.aspx.cs*, fügen Sie eine using Anweisung:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="c8b9b-162">Fügen Sie eine Methode zum Auffüllen der zwei Dropdownlisten, die Kurse anzeigen:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="c8b9b-163">Dieser Code Ruft alle Kurse aus der `Courses` Entitätenmengen und ruft die Kurse aus der `Courses` Navigationseigenschaft der `Person` Entität für den ausgewählten Dozenten.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="c8b9b-164">Klicken Sie dann bestimmt, welchen Kursen dieses Dozenten zugewiesen sind, und es wird die Dropdown-Listen entsprechend aufgefüllt.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="c8b9b-165">Hinzufügen eines ereignishandlers für das `Assign` Schaltfläche `Click` Ereignis:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="c8b9b-166">Dieser Code Ruft die `Person` Entität für den ausgewählten Dozenten, ruft der `Course` Entität für den ausgewählten Kurs, und fügt den ausgewählten Kurs aus, um die `Courses` -Navigationseigenschaft des Dozenten `Person` Entität.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="c8b9b-167">Klicken Sie dann die Änderungen in der Datenbank gespeichert, und füllt die Dropdown-Listen, damit die Ergebnisse sofort angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="c8b9b-168">Hinzufügen eines ereignishandlers für das `Remove` Schaltfläche `Click` Ereignis:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="c8b9b-169">Dieser Code Ruft die `Person` Entität für den ausgewählten Dozenten, ruft der `Course` Entität für den ausgewählten Kurs, und entfernt den ausgewählten Kurs aus der `Person` Entität `Courses` Navigationseigenschaft.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="c8b9b-170">Klicken Sie dann die Änderungen in der Datenbank gespeichert, und füllt die Dropdown-Listen, damit die Ergebnisse sofort angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="c8b9b-171">Fügen Sie Code in die `Page_Load` -Methode, die sicherstellt, dass die Fehlermeldungen sind nicht sichtbar, wenn kein Fehler zu melden, Hinzufügen von Ereignishandlern für die `DataBound` und `SelectedIndexChanged` Ereignisse der Dozenten Dropdown-Liste, um die Dropdownlisten Kurse zu füllen:</span><span class="sxs-lookup"><span data-stu-id="c8b9b-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="c8b9b-172">Führen Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-172">Run the page.</span></span>

<span data-ttu-id="c8b9b-173">[![Image01 abgerufen wird](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="c8b9b-174">Wählen Sie einen Dozenten.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-174">Select an instructor.</span></span> <span data-ttu-id="c8b9b-175">Die <strong>weisen Sie einen Kurs</strong> Dropdown-Liste zeigt die Kurse, die der Dozenten zu unterrichten, nicht, und die <strong>entfernen Sie einen Kurs</strong> Dropdown-Liste zeigt die Kurse, die bereits der Dozenten zugewiesen ist.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="c8b9b-176">In der <strong>weisen Sie einen Kurs</strong> Abschnitt, wählen Sie einen Kurs aus, und klicken Sie dann auf <strong>weisen</strong>.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="c8b9b-177">Der Kurs verschiebt, in der <strong>entfernen Sie einen Kurs</strong> Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="c8b9b-178">Wählen Sie einen Kurs in der <strong>entfernen Sie einen Kurs</strong> aus, und klicken Sie auf <strong>entfernen</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="c8b9b-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="c8b9b-179">Der Kurs verschiebt, in der <strong>weisen Sie einen Kurs</strong> Dropdown-Liste.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="c8b9b-180">Sie haben nun einige weitere Möglichkeiten zum Arbeiten mit verknüpften Daten erfahren.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="c8b9b-181">Im folgenden Tutorial erfahren Sie, wie Sie die Vererbung im Datenmodell zu verwenden, um die Verwaltbarkeit Ihrer Anwendung zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="c8b9b-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c8b9b-182">[Zurück](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="c8b9b-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>
