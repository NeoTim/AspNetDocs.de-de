---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
title: Einführung in Entity Framework 4,0 Database First und ASP.NET 4 Web Forms-Part 6 | Microsoft-Dokumentation
author: tdykstra
description: Die Beispiel-Webanwendung der Beispiel-Web-App veranschaulicht, wie Sie mithilfe der Entity Framework Web Forms Anwendungen erstellen. Die Beispielanwendung ist...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 994a5496-c648-4830-b03c-55bb43f325d2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-6
msc.type: authoredcontent
ms.openlocfilehash: 8bfbe74f90eb03ea9aab7610842ef2578e80d113
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78454917"
---
# <a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-6"></a><span data-ttu-id="99052-104">Die ersten Schritte mit Entity Framework 4,0 Database First und ASP.NET 4 Web Forms-Teil 6</span><span class="sxs-lookup"><span data-stu-id="99052-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 6</span></span>

<span data-ttu-id="99052-105">von [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="99052-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="99052-106">Die Beispiel-Webanwendung der Beispiel-Web-App veranschaulicht, wie Sie ASP.net-Web Forms Anwendungen mithilfe von Entity Framework 4,0 und Visual Studio 2010 erstellen.</span><span class="sxs-lookup"><span data-stu-id="99052-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="99052-107">Weitere Informationen zur tutorialreihe finden Sie [im ersten Tutorial der Reihe](the-entity-framework-and-aspnet-getting-started-part-1.md) .</span><span class="sxs-lookup"><span data-stu-id="99052-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>

## <a name="implementing-table-per-hierarchy-inheritance"></a><span data-ttu-id="99052-108">Implementieren der "Tabelle pro Hierarchie"-Vererbung</span><span class="sxs-lookup"><span data-stu-id="99052-108">Implementing Table-per-Hierarchy Inheritance</span></span>

<span data-ttu-id="99052-109">Im vorherigen Tutorial haben Sie mit verknüpften Daten gearbeitet, indem Sie Beziehungen hinzufügen und löschen und eine neue Entität hinzufügen, die eine Beziehung zu einer vorhandenen Entität enthielt.</span><span class="sxs-lookup"><span data-stu-id="99052-109">In the previous tutorial you worked with related data by adding and deleting relationships and by adding a new entity that had a relationship to an existing entity.</span></span> <span data-ttu-id="99052-110">In diesem Tutorial erfahren Sie, wie Sie die Vererbung in das Datenmodell implementieren können.</span><span class="sxs-lookup"><span data-stu-id="99052-110">This tutorial will show you how to implement inheritance in the data model.</span></span>

<span data-ttu-id="99052-111">Bei der objektorientierten Programmierung können Sie die Vererbung verwenden, um die Arbeit mit verknüpften Klassen zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="99052-111">In object-oriented programming, you can use inheritance to make it easier to work with related classes.</span></span> <span data-ttu-id="99052-112">Beispielsweise können Sie `Instructor`-und `Student` Klassen erstellen, die von einer `Person`-Basisklasse abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="99052-112">For example, you could create `Instructor` and `Student` classes that derive from a `Person` base class.</span></span> <span data-ttu-id="99052-113">Sie können die gleichen Arten von Vererbungs Strukturen zwischen Entitäten in der Entity Framework erstellen.</span><span class="sxs-lookup"><span data-stu-id="99052-113">You can create the same kinds of inheritance structures among entities in the Entity Framework.</span></span>

<span data-ttu-id="99052-114">In diesem Teil des Tutorials erstellen Sie keine neuen Webseiten.</span><span class="sxs-lookup"><span data-stu-id="99052-114">In this part of the tutorial, you won't create any new web pages.</span></span> <span data-ttu-id="99052-115">Stattdessen werden dem Datenmodell abgeleitete Entitäten hinzugefügt und vorhandene Seiten geändert, sodass die neuen Entitäten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="99052-115">Instead, you'll add derived entities to the data model and modify existing pages to use the new entities.</span></span>

## <a name="table-per-hierarchy-versus-table-per-type-inheritance"></a><span data-ttu-id="99052-116">"Tabelle pro Hierarchie" und "Tabelle pro Typ"-Vererbung</span><span class="sxs-lookup"><span data-stu-id="99052-116">Table-per-Hierarchy versus Table-per-Type Inheritance</span></span>

<span data-ttu-id="99052-117">In einer Datenbank können Informationen zu verknüpften Objekten in einer Tabelle oder in mehreren Tabellen gespeichert werden.</span><span class="sxs-lookup"><span data-stu-id="99052-117">A database can store information about related objects in one table or in multiple tables.</span></span> <span data-ttu-id="99052-118">Beispielsweise enthält die `Person` Tabelle in der `School`-Datenbank Informationen zu den Studenten und Dozenten in einer einzelnen Tabelle.</span><span class="sxs-lookup"><span data-stu-id="99052-118">For example, in the `School` database, the `Person` table includes information about both students and instructors in a single table.</span></span> <span data-ttu-id="99052-119">Einige der Spalten gelten nur für Dozenten (`HireDate`), einige nur für Schüler/Studenten (`EnrollmentDate`) und einige für beide (`LastName`, `FirstName`).</span><span class="sxs-lookup"><span data-stu-id="99052-119">Some of the columns apply only to instructors (`HireDate`), some only to students (`EnrollmentDate`), and some to both (`LastName`, `FirstName`).</span></span>

<span data-ttu-id="99052-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="99052-120">[![image11](the-entity-framework-and-aspnet-getting-started-part-6/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image1.png)</span></span>

<span data-ttu-id="99052-121">Sie können die Entity Framework so konfigurieren, dass `Instructor` und `Student` Entitäten erstellt werden, die von der `Person` Entität erben.</span><span class="sxs-lookup"><span data-stu-id="99052-121">You can configure the Entity Framework to create `Instructor` and `Student` entities that inherit from the `Person` entity.</span></span> <span data-ttu-id="99052-122">Dieses Muster zum Erstellen einer Entitäts Vererbungs Struktur aus einer einzelnen Datenbanktabelle wird als " *Tabelle pro Hierarchie* "-Vererbung (TPH) bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="99052-122">This pattern of generating an entity inheritance structure from a single database table is called *table-per-hierarchy* (TPH) inheritance.</span></span>

<span data-ttu-id="99052-123">Für Kurse verwendet die `School` Datenbank ein anderes Muster.</span><span class="sxs-lookup"><span data-stu-id="99052-123">For courses, the `School` database uses a different pattern.</span></span> <span data-ttu-id="99052-124">Online Kurse und Kurse vor Ort werden in separaten Tabellen gespeichert, von denen jeder über einen Fremdschlüssel verfügt, der auf die `Course` Tabelle verweist.</span><span class="sxs-lookup"><span data-stu-id="99052-124">Online courses and onsite courses are stored in separate tables, each of which has a foreign key that points to the `Course` table.</span></span> <span data-ttu-id="99052-125">Informationen, die für beide Kurs Typen gemeinsam sind, werden nur in der `Course` Tabelle gespeichert.</span><span class="sxs-lookup"><span data-stu-id="99052-125">Information common to both course types is stored only in the `Course` table.</span></span>

<span data-ttu-id="99052-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="99052-126">[![image12](the-entity-framework-and-aspnet-getting-started-part-6/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image3.png)</span></span>

<span data-ttu-id="99052-127">Sie können das Entity Framework Datenmodell so konfigurieren, dass `OnlineCourse` und `OnsiteCourse` Entitäten von der `Course` Entität erben.</span><span class="sxs-lookup"><span data-stu-id="99052-127">You can configure the Entity Framework data model so that `OnlineCourse` and `OnsiteCourse` entities inherit from the `Course` entity.</span></span> <span data-ttu-id="99052-128">Dieses Muster zum Erstellen einer Entitäts Vererbungs Struktur aus separaten Tabellen für jeden Typ, wobei jede separate Tabelle auf eine Tabelle verweist, in der die Daten gespeichert werden, die für alle Typen gemeinsam sind, werden als *Tabelle pro Typ* (TPT) bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="99052-128">This pattern of generating an entity inheritance structure from separate tables for each type, with each separate table referring back to a table that stores data common to all types, is called *table per type* (TPT) inheritance.</span></span>

<span data-ttu-id="99052-129">TPH-Vererbungsmuster bieten im Allgemeinen eine bessere Leistung in den Entity Framework als TPT-Vererbungsmuster, da TPT-Muster zu komplexen Verknüpfungs Abfragen führen können.</span><span class="sxs-lookup"><span data-stu-id="99052-129">TPH inheritance patterns generally deliver better performance in the Entity Framework than TPT inheritance patterns, because TPT patterns can result in complex join queries.</span></span> <span data-ttu-id="99052-130">Diese exemplarische Vorgehensweise veranschaulicht die Implementierung der TPH-Vererbung.</span><span class="sxs-lookup"><span data-stu-id="99052-130">This walkthrough demonstrates how to implement TPH inheritance.</span></span> <span data-ttu-id="99052-131">Führen Sie dazu die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="99052-131">You'll do that by performing the following steps:</span></span>

- <span data-ttu-id="99052-132">Erstellen Sie `Instructor` und `Student` Entitäts Typen, die von `Person`abgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="99052-132">Create `Instructor` and `Student` entity types that derive from `Person`.</span></span>
- <span data-ttu-id="99052-133">Verschieben von Eigenschaften, die sich auf die abgeleiteten Entitäten aus der `Person` Entität beziehen, in die abgeleiteten Entitäten</span><span class="sxs-lookup"><span data-stu-id="99052-133">Move properties that pertain to the derived entities from the `Person` entity to the derived entities.</span></span>
- <span data-ttu-id="99052-134">Legen Sie Einschränkungen für Eigenschaften in den abgeleiteten Typen fest.</span><span class="sxs-lookup"><span data-stu-id="99052-134">Set constraints on properties in the derived types.</span></span>
- <span data-ttu-id="99052-135">Erstellen Sie die `Person`-Entität als abstrakte Entität.</span><span class="sxs-lookup"><span data-stu-id="99052-135">Make the `Person` entity an abstract entity.</span></span>
- <span data-ttu-id="99052-136">Ordnen Sie jede abgeleitete Entität der `Person` Tabelle mit einer Bedingung zu, die angibt, wie bestimmt wird, ob eine `Person` Zeile diesen abgeleiteten Typ darstellt.</span><span class="sxs-lookup"><span data-stu-id="99052-136">Map each derived entity to the `Person` table with a condition that specifies how to determine whether a `Person` row represents that derived type.</span></span>

## <a name="adding-instructor-and-student-entities"></a><span data-ttu-id="99052-137">Hinzufügen von Dozenten und Studenten Entitäten</span><span class="sxs-lookup"><span data-stu-id="99052-137">Adding Instructor and Student Entities</span></span>

<span data-ttu-id="99052-138">Öffnen Sie die Datei <em>School Model. edmx</em> , klicken Sie mit der rechten Maustaste auf einen nicht belegten Bereich im Designer, wählen Sie <strong>Hinzufügen</strong>und dann <strong>Entität</strong>aus<em>.</em></span><span class="sxs-lookup"><span data-stu-id="99052-138">Open the <em>SchoolModel.edmx</em> file, right-click an unoccupied area in the designer, select <strong>Add</strong>, then select <strong>Entity</strong><em>.</em></span></span>

<span data-ttu-id="99052-139">[![Image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="99052-139">[![image01](the-entity-framework-and-aspnet-getting-started-part-6/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image5.png)</span></span>

<span data-ttu-id="99052-140">Benennen Sie die Entität im Dialogfeld **Entität hinzufügen** `Instructor` und legen Sie die **Basistyp** Option auf `Person`fest.</span><span class="sxs-lookup"><span data-stu-id="99052-140">In the **Add Entity** dialog box, name the entity `Instructor` and set its **Base type** option to `Person`.</span></span>

<span data-ttu-id="99052-141">[![Image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="99052-141">[![image02](the-entity-framework-and-aspnet-getting-started-part-6/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image7.png)</span></span>

<span data-ttu-id="99052-142">Klicken Sie auf **OK**.</span><span class="sxs-lookup"><span data-stu-id="99052-142">Click **OK**.</span></span> <span data-ttu-id="99052-143">Der Designer erstellt eine `Instructor` Entität, die von der `Person` Entität abgeleitet ist.</span><span class="sxs-lookup"><span data-stu-id="99052-143">The designer creates an `Instructor` entity that derives from the `Person` entity.</span></span> <span data-ttu-id="99052-144">Die neue Entität hat noch keine Eigenschaften.</span><span class="sxs-lookup"><span data-stu-id="99052-144">The new entity does not yet have any properties.</span></span>

<span data-ttu-id="99052-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="99052-145">[![image03](the-entity-framework-and-aspnet-getting-started-part-6/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image9.png)</span></span>

<span data-ttu-id="99052-146">Wiederholen Sie das Verfahren zum Erstellen einer `Student` Entität, die ebenfalls von `Person`abgeleitet ist.</span><span class="sxs-lookup"><span data-stu-id="99052-146">Repeat the procedure to create a `Student` entity that also derives from `Person`.</span></span>

<span data-ttu-id="99052-147">Nur Dozenten haben Einstellungsdaten, daher müssen Sie diese Eigenschaft von der `Person`-Entität in die `Instructor` Entität verschieben.</span><span class="sxs-lookup"><span data-stu-id="99052-147">Only instructors have hire dates, so you need to move that property from the `Person` entity to the `Instructor` entity.</span></span> <span data-ttu-id="99052-148">Klicken Sie in der `Person` Entität mit der rechten Maustaste auf die Eigenschaft `HireDate`, und klicken Sie auf **Ausschneiden**</span><span class="sxs-lookup"><span data-stu-id="99052-148">In the `Person` entity, right-click the `HireDate` property and click **Cut**.</span></span> <span data-ttu-id="99052-149">Klicken Sie dann mit der rechten Maustaste auf **Eigenschaften** in der `Instructor`-Entität, und **Klicken Sie**</span><span class="sxs-lookup"><span data-stu-id="99052-149">Then right-click **Properties** in the `Instructor` entity and click **Paste**.</span></span>

<span data-ttu-id="99052-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="99052-150">[![image04](the-entity-framework-and-aspnet-getting-started-part-6/_static/image12.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image11.png)</span></span>

<span data-ttu-id="99052-151">Das Einstellungs Datum einer `Instructor` Entität darf nicht NULL sein.</span><span class="sxs-lookup"><span data-stu-id="99052-151">The hire date of an `Instructor` entity cannot be null.</span></span> <span data-ttu-id="99052-152">Klicken Sie mit der rechten Maustaste auf die `HireDate`-Eigenschaft, klicken Sie auf **Eigenschaften**, und ändern Sie dann im **Eigenschaften** Fenster `Nullable` in `False`.</span><span class="sxs-lookup"><span data-stu-id="99052-152">Right-click the `HireDate` property, click **Properties**, and then in the **Properties** window change `Nullable` to `False`.</span></span>

<span data-ttu-id="99052-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="99052-153">[![image05](the-entity-framework-and-aspnet-getting-started-part-6/_static/image14.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image13.png)</span></span>

<span data-ttu-id="99052-154">Wiederholen Sie die Prozedur, um die `EnrollmentDate`-Eigenschaft von der `Person`-Entität in die `Student` Entität zu verschieben</span><span class="sxs-lookup"><span data-stu-id="99052-154">Repeat the procedure to move the `EnrollmentDate` property from the `Person` entity to the `Student` entity.</span></span> <span data-ttu-id="99052-155">Stellen Sie sicher, dass Sie für die Eigenschaft `EnrollmentDate` auch `Nullable` auf `False` festlegen.</span><span class="sxs-lookup"><span data-stu-id="99052-155">Make sure that you also set `Nullable` to `False` for the `EnrollmentDate` property.</span></span>

<span data-ttu-id="99052-156">Nun, da eine `Person` Entität nur die Eigenschaften hat, die `Instructor` und `Student` Entitäten gemeinsam sind (abgesehen von den Navigations Eigenschaften, die Sie nicht verschieben), kann die Entität nur als Basis Entität in der Vererbungs Struktur verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="99052-156">Now that a `Person` entity has only the properties that are common to `Instructor` and `Student` entities (aside from navigation properties, which you're not moving), the entity can only be used as a base entity in the inheritance structure.</span></span> <span data-ttu-id="99052-157">Daher müssen Sie sicherstellen, dass die Entität nie als unabhängige Entität behandelt wird.</span><span class="sxs-lookup"><span data-stu-id="99052-157">Therefore, you need to ensure that it's never treated as an independent entity.</span></span> <span data-ttu-id="99052-158">Klicken Sie mit der rechten Maustaste auf die `Person` Entität, wählen Sie **Eigenschaften**aus, und ändern Sie dann im **Eigenschaften** Fenster den Wert der Eigenschaft **abstract** in **true**.</span><span class="sxs-lookup"><span data-stu-id="99052-158">Right-click the `Person` entity, select **Properties**, and then in the **Properties** window change the value of the **Abstract** property to **True**.</span></span>

<span data-ttu-id="99052-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="99052-159">[![image06](the-entity-framework-and-aspnet-getting-started-part-6/_static/image16.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image15.png)</span></span>

## <a name="mapping-instructor-and-student-entities-to-the-person-table"></a><span data-ttu-id="99052-160">Mapping von Instructor-und Student-Entitäten zur Person-Tabelle</span><span class="sxs-lookup"><span data-stu-id="99052-160">Mapping Instructor and Student Entities to the Person Table</span></span>

<span data-ttu-id="99052-161">Nun müssen Sie dem Entity Framework mitteilen, wie zwischen `Instructor` und `Student` Entitäten in der Datenbank unterschieden werden kann.</span><span class="sxs-lookup"><span data-stu-id="99052-161">Now you need to tell the Entity Framework how to differentiate between `Instructor` and `Student` entities in the database.</span></span>

<span data-ttu-id="99052-162">Klicken Sie mit der rechten Maustaste auf die Entität `Instructor` und wählen Sie **Tabellen Zuordnung**</span><span class="sxs-lookup"><span data-stu-id="99052-162">Right-click the `Instructor` entity and select **Table Mapping**.</span></span> <span data-ttu-id="99052-163">Klicken Sie im Fenster **Mappingdetails** auf **Tabelle oder Sicht hinzufügen** , und wählen Sie **Person**aus.</span><span class="sxs-lookup"><span data-stu-id="99052-163">In the **Mapping Details** window, click **Add a Table or View** and select **Person**.</span></span>

<span data-ttu-id="99052-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="99052-164">[![image07](the-entity-framework-and-aspnet-getting-started-part-6/_static/image18.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image17.png)</span></span>

<span data-ttu-id="99052-165">Klicken Sie auf **Bedingung hinzufügen**, und wählen Sie dann **HireDate**aus.</span><span class="sxs-lookup"><span data-stu-id="99052-165">Click **Add a Condition**, and then select **HireDate**.</span></span>

<span data-ttu-id="99052-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="99052-166">[![image09](the-entity-framework-and-aspnet-getting-started-part-6/_static/image20.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image19.png)</span></span>

<span data-ttu-id="99052-167">**Operator** ändern in **ist** und **Wert/Eigenschaft** auf **not NULL**.</span><span class="sxs-lookup"><span data-stu-id="99052-167">Change **Operator** to **Is** and **Value / Property** to **Not Null**.</span></span>

<span data-ttu-id="99052-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="99052-168">[![image10](the-entity-framework-and-aspnet-getting-started-part-6/_static/image22.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image21.png)</span></span>

<span data-ttu-id="99052-169">Wiederholen Sie die Prozedur für die `Students` Entität, und geben Sie an, dass diese Entität der `Person` Tabelle zugeordnet werden soll, wenn die `EnrollmentDate` Spalte nicht NULL ist</span><span class="sxs-lookup"><span data-stu-id="99052-169">Repeat the procedure for the `Students` entity, specifying that this entity maps to the `Person` table when the `EnrollmentDate` column is not null.</span></span> <span data-ttu-id="99052-170">Speichern und schließen Sie dann das Datenmodell.</span><span class="sxs-lookup"><span data-stu-id="99052-170">Then save and close the data model.</span></span>

<span data-ttu-id="99052-171">Erstellen Sie das Projekt, um die neuen Entitäten als Klassen zu erstellen und Sie im Designer verfügbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="99052-171">Build the project in order to create the new entities as classes and make them available in the designer.</span></span>

## <a name="using-the-instructor-and-student-entities"></a><span data-ttu-id="99052-172">Verwenden der Dozenten-und Student-Entitäten</span><span class="sxs-lookup"><span data-stu-id="99052-172">Using the Instructor and Student Entities</span></span>

<span data-ttu-id="99052-173">Wenn Sie die Webseiten erstellt haben, die mit den Daten von Student und Instructor arbeiten, haben Sie die Daten an die `Person` Entitätenmenge gebunden, und Sie haben die `HireDate` oder `EnrollmentDate` Eigenschaft gefiltert, um die zurückgegebenen Daten auf Studenten oder Dozenten zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="99052-173">When you created the web pages that work with student and instructor data, you databound them to the `Person` entity set, and you filtered on the `HireDate` or `EnrollmentDate` property to restrict the returned data to students or instructors.</span></span> <span data-ttu-id="99052-174">Wenn Sie jedoch jedes Datenquellen-Steuerelement an die `Person` Entitätenmenge binden, können Sie angeben, dass nur `Student` oder `Instructor` Entitäts Typen ausgewählt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="99052-174">However, now when you bind each data source control to the `Person` entity set, you can specify that only `Student` or `Instructor` entity types should be selected.</span></span> <span data-ttu-id="99052-175">Da der Entity Framework weiß, wie Studenten und Dozenten in der `Person` Entitätenmenge unterschieden werden können, können Sie die `Where` Eigenschaften Einstellungen entfernen, die Sie manuell eingegeben haben.</span><span class="sxs-lookup"><span data-stu-id="99052-175">Because the Entity Framework knows how to differentiate students and instructors in the `Person` entity set, you can remove the `Where` property settings you entered manually to do that.</span></span>

<span data-ttu-id="99052-176">Im Visual Studio-Designer können Sie den Entitätstyp angeben, den ein `EntityDataSource` Steuerelement im Dropdown Feld **EntityTypeFilter** des `Configure Data Source`-Assistenten auswählen soll, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="99052-176">In the Visual Studio Designer, you can specify the entity type that an `EntityDataSource` control should select in the **EntityTypeFilter** drop-down box of the `Configure Data Source` wizard, as shown in the following example.</span></span>

<span data-ttu-id="99052-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="99052-177">[![image13](the-entity-framework-and-aspnet-getting-started-part-6/_static/image24.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image23.png)</span></span>

<span data-ttu-id="99052-178">Im **Eigenschaften** Fenster können Sie `Where`-Klauselwerte entfernen, die nicht mehr benötigt werden, wie im folgenden Beispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="99052-178">And in the **Properties** window you can remove `Where` clause values that are no longer needed, as shown in the following example.</span></span>

<span data-ttu-id="99052-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="99052-179">[![image14](the-entity-framework-and-aspnet-getting-started-part-6/_static/image26.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image25.png)</span></span>

<span data-ttu-id="99052-180">Da Sie jedoch das Markup für `EntityDataSource`-Steuerelemente geändert haben, sodass das `ContextTypeName`-Attribut verwendet werden kann, können Sie den Assistenten zum **Konfigurieren von Datenquellen** nicht auf `EntityDataSource`-Steuerelementen ausführen, die Sie bereits erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="99052-180">However, because you've changed the markup for `EntityDataSource` controls to use the `ContextTypeName` attribute, you cannot run the **Configure Data Source** wizard on `EntityDataSource` controls that you've already created.</span></span> <span data-ttu-id="99052-181">Daher nehmen Sie die erforderlichen Änderungen vor, indem Sie stattdessen das Markup ändern.</span><span class="sxs-lookup"><span data-stu-id="99052-181">Therefore, you'll make the required changes by changing markup instead.</span></span>

<span data-ttu-id="99052-182">Öffnen Sie die Seite *students. aspx* .</span><span class="sxs-lookup"><span data-stu-id="99052-182">Open the *Students.aspx* page.</span></span> <span data-ttu-id="99052-183">Entfernen Sie im `StudentsEntityDataSource`-Steuerelement das `Where`-Attribut, und fügen Sie ein `EntityTypeFilter="Student"`-Attribut hinzu.</span><span class="sxs-lookup"><span data-stu-id="99052-183">In the `StudentsEntityDataSource` control, remove the `Where` attribute and add an `EntityTypeFilter="Student"` attribute.</span></span> <span data-ttu-id="99052-184">Das Markup ähnelt nun dem folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="99052-184">The markup will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample1.aspx)]

<span data-ttu-id="99052-185">Durch Festlegen des `EntityTypeFilter` Attributs wird sichergestellt, dass das `EntityDataSource` Steuerelement nur den angegebenen Entitätstyp auswählt.</span><span class="sxs-lookup"><span data-stu-id="99052-185">Setting the `EntityTypeFilter` attribute ensures that the `EntityDataSource` control will select only the specified entity type.</span></span> <span data-ttu-id="99052-186">Wenn Sie sowohl `Student` als auch `Instructor` Entitäts Typen abrufen möchten, legen Sie dieses Attribut nicht fest.</span><span class="sxs-lookup"><span data-stu-id="99052-186">If you wanted to retrieve both `Student` and `Instructor` entity types, you would not set this attribute.</span></span> <span data-ttu-id="99052-187">(Sie haben die Möglichkeit, mehrere Entitäts Typen mit nur einem `EntityDataSource` Steuerelement abzurufen, wenn Sie das-Steuerelement für schreibgeschützten Datenzugriff verwenden.</span><span class="sxs-lookup"><span data-stu-id="99052-187">(You have the option of retrieving multiple entity types with one `EntityDataSource` control only if you're using the control for read-only data access.</span></span> <span data-ttu-id="99052-188">Wenn Sie ein `EntityDataSource`-Steuerelement verwenden, um Entitäten einzufügen, zu aktualisieren oder zu löschen, und wenn die Entitätenmenge, an die Sie gebunden ist, mehrere Typen enthalten kann, können Sie nur mit einem Entitätstyp arbeiten, und Sie müssen dieses Attribut festlegen.)</span><span class="sxs-lookup"><span data-stu-id="99052-188">If you're using an `EntityDataSource` control to insert, update, or delete entities, and if the entity set it's bound to can contain multiple types, you can only work with one entity type, and you have to set this attribute.)</span></span>

<span data-ttu-id="99052-189">Wiederholen Sie die Prozedur für das `SearchEntityDataSource`-Steuerelement, mit der Ausnahme, dass Sie nur den Teil des `Where` Attributs entfernen, der `Student` Entitäten auswählt, anstatt die-Eigenschaft</span><span class="sxs-lookup"><span data-stu-id="99052-189">Repeat the procedure for the `SearchEntityDataSource` control, except remove only the part of the `Where` attribute that selects `Student` entities instead of removing the property altogether.</span></span> <span data-ttu-id="99052-190">Das öffnende Tag des-Steuer Elements ähnelt nun dem folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="99052-190">The opening tag of the control will now resemble the following example:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample2.aspx)]

<span data-ttu-id="99052-191">Führen Sie die Seite aus, um zu überprüfen, ob Sie wie zuvor funktioniert.</span><span class="sxs-lookup"><span data-stu-id="99052-191">Run the page to verify that it still works as it did before.</span></span>

<span data-ttu-id="99052-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="99052-192">[![image15](the-entity-framework-and-aspnet-getting-started-part-6/_static/image28.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image27.png)</span></span>

<span data-ttu-id="99052-193">Aktualisieren Sie die folgenden Seiten, die Sie in den vorherigen Tutorials erstellt haben, damit Sie die neuen `Student` und `Instructor` Entitäten anstelle von `Person` Entitäten verwenden, und führen Sie Sie dann aus, um sicherzustellen, dass Sie wie zuvor funktionieren:</span><span class="sxs-lookup"><span data-stu-id="99052-193">Update the following pages that you created in earlier tutorials so that they use the new `Student` and `Instructor` entities instead of `Person` entities, then run them to verify that they work as they did before:</span></span>

- <span data-ttu-id="99052-194">Fügen Sie in *studentsadd. aspx*`EntityTypeFilter="Student"` dem `StudentsEntityDataSource`-Steuerelement hinzu.</span><span class="sxs-lookup"><span data-stu-id="99052-194">In *StudentsAdd.aspx*, add `EntityTypeFilter="Student"` to the `StudentsEntityDataSource` control.</span></span> <span data-ttu-id="99052-195">Das Markup ähnelt nun dem folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="99052-195">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample3.aspx)]

    <span data-ttu-id="99052-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="99052-196">[![image16](the-entity-framework-and-aspnet-getting-started-part-6/_static/image30.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image29.png)</span></span>
- <span data-ttu-id="99052-197">Fügen Sie in " *about. aspx*" `EntityTypeFilter="Student"` dem `StudentStatisticsEntityDataSource`-Steuerelement hinzu, und entfernen Sie `Where="it.EnrollmentDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="99052-197">In *About.aspx*, add `EntityTypeFilter="Student"` to the `StudentStatisticsEntityDataSource` control and remove `Where="it.EnrollmentDate is not null"`.</span></span> <span data-ttu-id="99052-198">Das Markup ähnelt nun dem folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="99052-198">The markup will now resemble the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample4.aspx)]

    <span data-ttu-id="99052-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="99052-199">[![image17](the-entity-framework-and-aspnet-getting-started-part-6/_static/image32.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image31.png)</span></span>
- <span data-ttu-id="99052-200">Fügen Sie in " *Dozenten. aspx* " und " *Instructor scourses. aspx*" `EntityTypeFilter="Instructor"` dem `InstructorsEntityDataSource`-Steuerelement hinzu, und entfernen Sie `Where="it.HireDate is not null"`.</span><span class="sxs-lookup"><span data-stu-id="99052-200">In *Instructors.aspx* and *InstructorsCourses.aspx*, add `EntityTypeFilter="Instructor"` to the `InstructorsEntityDataSource` control and remove `Where="it.HireDate is not null"`.</span></span> <span data-ttu-id="99052-201">Das Markup in " *Dozenten. aspx* " ähnelt nun dem folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="99052-201">The markup in *Instructors.aspx* now resembles the following example:</span></span> 

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample5.aspx)]

    <span data-ttu-id="99052-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="99052-202">[![image18](the-entity-framework-and-aspnet-getting-started-part-6/_static/image34.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image33.png)</span></span>

    <span data-ttu-id="99052-203">Das Markup in " *Instructor Courses. aspx* " ähnelt nun dem folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="99052-203">The markup in *InstructorsCourses.aspx* will now resemble the following example:</span></span>

    [!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-6/samples/sample6.aspx)]

    <span data-ttu-id="99052-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="99052-204">[![image19](the-entity-framework-and-aspnet-getting-started-part-6/_static/image36.png)](the-entity-framework-and-aspnet-getting-started-part-6/_static/image35.png)</span></span>

<span data-ttu-id="99052-205">Aufgrund dieser Änderungen haben Sie die Wartbarkeit der Anwendung der Anwendung "der Anwendung" auf verschiedene Weise verbessert.</span><span class="sxs-lookup"><span data-stu-id="99052-205">As a result of these changes, you've improved the Contoso University application's maintainability in several ways.</span></span> <span data-ttu-id="99052-206">Sie haben die Auswahl-und Validierungs Logik aus der UI-Schicht (*aspx* -Markup) verschoben und als integralen Bestandteil der Datenzugriffs Ebene festgestellt.</span><span class="sxs-lookup"><span data-stu-id="99052-206">You've moved selection and validation logic out of the UI layer (*.aspx* markup) and made it an integral part of the data access layer.</span></span> <span data-ttu-id="99052-207">Dies trägt dazu bei, ihren Anwendungscode von Änderungen zu isolieren, die Sie in Zukunft für das Datenbankschema oder das Datenmodell vornehmen können.</span><span class="sxs-lookup"><span data-stu-id="99052-207">This helps to isolate your application code from changes that you might make in the future to the database schema or the data model.</span></span> <span data-ttu-id="99052-208">Sie könnten z. b. entscheiden, dass Schüler/Studenten als Mitarbeiter Hilfen eingestellt werden und daher ein Einstellungs Datum erhalten würde.</span><span class="sxs-lookup"><span data-stu-id="99052-208">For example, you could decide that students might be hired as teachers' aids and therefore would get a hire date.</span></span> <span data-ttu-id="99052-209">Anschließend können Sie eine neue Eigenschaft hinzufügen, um Schüler und Studenten von Dozenten zu unterscheiden und das Datenmodell zu aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="99052-209">You could then add a new property to differentiate students from instructors and update the data model.</span></span> <span data-ttu-id="99052-210">Es muss kein Code in der Webanwendung geändert werden, es sei denn, Sie möchten ein Einstellungs Datum für Schüler und Studenten anzeigen.</span><span class="sxs-lookup"><span data-stu-id="99052-210">No code in the web application would need to change except where you wanted to show a hire date for students.</span></span> <span data-ttu-id="99052-211">Ein weiterer Vorteil beim Hinzufügen von `Instructor`-und `Student` Entitäten besteht darin, dass Ihr Code leichter verständlich ist als bei `Person` Objekten, die eigentlich Studenten oder Dozenten waren.</span><span class="sxs-lookup"><span data-stu-id="99052-211">Another benefit of adding `Instructor` and `Student` entities is that your code is more readily understandable than when it referred to `Person` objects that were actually students or instructors.</span></span>

<span data-ttu-id="99052-212">Sie haben nun eine Möglichkeit gesehen, ein Vererbungsmuster in der Entity Framework zu implementieren.</span><span class="sxs-lookup"><span data-stu-id="99052-212">You've now seen one way to implement an inheritance pattern in the Entity Framework.</span></span> <span data-ttu-id="99052-213">Im folgenden Tutorial erfahren Sie, wie Sie gespeicherte Prozeduren verwenden, um mehr Kontrolle darüber zu erhalten, wie die Entity Framework auf die Datenbank zugreift.</span><span class="sxs-lookup"><span data-stu-id="99052-213">In the following tutorial, you'll learn how to use stored procedures in order to have more control over how the Entity Framework accesses the database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="99052-214">[Zurück](the-entity-framework-and-aspnet-getting-started-part-5.md)
> [Weiter](the-entity-framework-and-aspnet-getting-started-part-7.md)</span><span class="sxs-lookup"><span data-stu-id="99052-214">[Previous](the-entity-framework-and-aspnet-getting-started-part-5.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-7.md)</span></span>
