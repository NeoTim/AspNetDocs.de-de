---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: Interaktion mit der Inhaltsseite von der Master Seite (C#) | Microsoft-Dokumentation
author: rick-anderson
description: Hier wird untersucht, wie Methoden aufgerufen, Eigenschaften usw. auf der Inhaltsseite aus Code auf der Master Seite festgelegt werden.
ms.author: riande
ms.date: 07/11/2008
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: 2cf57665aa584285351d874267949d61db69c7fc
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78501165"
---
# <a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="37a73-103">Interaktion mit der Inhaltsseite von der Masterseite (C#)</span><span class="sxs-lookup"><span data-stu-id="37a73-103">Interacting with the Content Page from the Master Page (C#)</span></span>

<span data-ttu-id="37a73-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="37a73-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="37a73-105">[Code herunterladen](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) oder [PDF herunterladen](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="37a73-105">[Download Code](https://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](https://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="37a73-106">Hier wird untersucht, wie Methoden aufgerufen, Eigenschaften usw. auf der Inhaltsseite aus Code auf der Master Seite festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>

## <a name="introduction"></a><span data-ttu-id="37a73-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="37a73-107">Introduction</span></span>

<span data-ttu-id="37a73-108">Im vorangehenden Tutorial wurde erläutert, wie die Inhaltsseite Programm gesteuert mit der Master Seite interagieren kann.</span><span class="sxs-lookup"><span data-stu-id="37a73-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="37a73-109">Beachten Sie, dass die Master Seite aktualisiert wurde und ein GridView-Steuerelement enthält, in dem die fünf zuletzt hinzugefügten Produkte aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="37a73-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="37a73-110">Anschließend haben wir eine Inhaltsseite erstellt, von der aus der Benutzer ein neues Produkt hinzufügen konnte.</span><span class="sxs-lookup"><span data-stu-id="37a73-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="37a73-111">Wenn Sie ein neues Produkt hinzufügen, ist die Inhaltsseite erforderlich, um die Master Seite anzuweisen, ihre GridView so zu aktualisieren, dass Sie das soeben hinzugefügte Produkt enthält.</span><span class="sxs-lookup"><span data-stu-id="37a73-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="37a73-112">Diese Funktionalität wurde erreicht, indem der Master Seite eine öffentliche Methode hinzugefügt wurde, die die an die GridView gebundene Daten aktualisiert und diese Methode dann von der Inhaltsseite aufgerufen hat.</span><span class="sxs-lookup"><span data-stu-id="37a73-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="37a73-113">Die häufigste Form von Inhalten und die Interaktion der Master Seite stammt aus der Inhaltsseite.</span><span class="sxs-lookup"><span data-stu-id="37a73-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="37a73-114">Es ist jedoch möglich, dass die Master Seite die aktuelle Inhaltsseite in Aktion anstellt. diese Funktionalität ist möglicherweise erforderlich, wenn die Master Seite Benutzeroberflächen Elemente enthält, die es Benutzern ermöglichen, Daten zu ändern, die auch auf der Inhaltsseite angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="37a73-115">Betrachten Sie eine Inhaltsseite, auf der die Produktinformationen in einem GridView-Steuerelement und eine Master Seite mit einem Schaltflächen-Steuerelement angezeigt werden, das, wenn Sie darauf klicken, die Preise aller Produkte verdoppelt.</span><span class="sxs-lookup"><span data-stu-id="37a73-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="37a73-116">Ähnlich wie im Beispiel im vorherigen Tutorial muss die GridView nach dem Klicken auf die Schaltfläche mit dem doppelten Preis aktualisiert werden, sodass die neuen Preise angezeigt werden. in diesem Szenario ist es jedoch die Master Seite, die die Inhaltsseite in eine Aktion hinein stellen muss.</span><span class="sxs-lookup"><span data-stu-id="37a73-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="37a73-117">In diesem Tutorial wird erläutert, wie die Funktion zum Aufrufen von Masterseiten auf der Seite Inhalt definiert wird.</span><span class="sxs-lookup"><span data-stu-id="37a73-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="37a73-118">Initigating der programmgesteuerten Interaktion über ein Ereignis und Ereignishandler</span><span class="sxs-lookup"><span data-stu-id="37a73-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="37a73-119">Das Aufrufen der Funktionalität von Inhaltsseiten von einer Master Seite aus ist schwieriger als die andere Methode.</span><span class="sxs-lookup"><span data-stu-id="37a73-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="37a73-120">Da eine Inhaltsseite über eine einzige Master Seite verfügt, wissen wir beim Initiieren der programmatischen Interaktion von der Inhaltsseite, welche öffentlichen Methoden und Eigenschaften zur Verfügung stehen.</span><span class="sxs-lookup"><span data-stu-id="37a73-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="37a73-121">Eine Master Seite kann jedoch viele verschiedene Inhaltsseiten aufweisen, die jeweils über einen eigenen Satz von Eigenschaften und Methoden verfügen.</span><span class="sxs-lookup"><span data-stu-id="37a73-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="37a73-122">Wie können wir dann auf der Master Seite Code schreiben, um eine Aktion auf der Inhaltsseite auszuführen, wenn wir nicht wissen, welche Inhaltsseite bis zur Laufzeit aufgerufen wird?</span><span class="sxs-lookup"><span data-stu-id="37a73-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="37a73-123">Angenommen, ein ASP.net-websteuer Element, z. b. das Button-Steuerelement</span><span class="sxs-lookup"><span data-stu-id="37a73-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="37a73-124">Ein Schaltflächen-Steuerelement kann auf einer beliebigen Anzahl von ASP.NET Seiten angezeigt werden und benötigt einen Mechanismus, mit dem die Seite gewarnt werden kann, auf die geklickt wurde.</span><span class="sxs-lookup"><span data-stu-id="37a73-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="37a73-125">Dies wird mithilfe von *Ereignissen*erreicht.</span><span class="sxs-lookup"><span data-stu-id="37a73-125">This is accomplished using *events*.</span></span> <span data-ttu-id="37a73-126">Insbesondere löst das Schaltflächen-Steuerelement das `Click`-Ereignis aus, wenn darauf geklickt wird. die Seite ASP.net, die die Schaltfläche enthält, kann optional über einen *Ereignishandler*auf diese Benachrichtigung reagieren.</span><span class="sxs-lookup"><span data-stu-id="37a73-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="37a73-127">Das gleiche Muster kann verwendet werden, um eine Masterseiten-Auslöserfunktion auf den Inhaltsseiten zu haben:</span><span class="sxs-lookup"><span data-stu-id="37a73-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="37a73-128">Fügen Sie der Master Seite ein Ereignis hinzu.</span><span class="sxs-lookup"><span data-stu-id="37a73-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="37a73-129">Rufen Sie das-Ereignis immer dann auf, wenn die Master Seite mit der zugehörigen Inhaltsseite kommunizieren muss.</span><span class="sxs-lookup"><span data-stu-id="37a73-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="37a73-130">Wenn die Master Seite z. b. die Inhaltsseite warnen muss, dass der Benutzer die Preise verdoppelt hat, wird das zugehörige Ereignis sofort ausgelöst, nachdem die Preise verdoppelt wurden.</span><span class="sxs-lookup"><span data-stu-id="37a73-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="37a73-131">Erstellen Sie einen Ereignishandler auf den Inhaltsseiten, die einige Aktionen ausführen müssen.</span><span class="sxs-lookup"><span data-stu-id="37a73-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="37a73-132">In diesem Rest dieses Tutorials wird das Beispiel implementiert, das in der Einführung beschrieben wird. Dabei handelt es sich um eine Inhaltsseite, die die Produkte in der Datenbank und eine Master Seite auflistet, die ein Schaltflächen-Steuerelement zum verdoppeln der Preise enthält.</span><span class="sxs-lookup"><span data-stu-id="37a73-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="37a73-133">Schritt 1: Anzeigen von Produkten auf einer Inhaltsseite</span><span class="sxs-lookup"><span data-stu-id="37a73-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="37a73-134">Unsere erste Geschäftsordnung besteht darin, eine Inhaltsseite zu erstellen, die die Produkte aus der Northwind-Datenbank auflistet.</span><span class="sxs-lookup"><span data-stu-id="37a73-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="37a73-135">(Im vorherigen Tutorial haben wir die Datenbank Northwind zum Projekt hinzugefügt, die [*mit der Master Seite von der Seite Inhalt interagiert*](interacting-with-the-master-page-from-the-content-page-cs.md).) Fügen Sie zunächst eine neue ASP.NET-Seite zum Ordner "`~/Admin`" mit dem Namen `Products.aspx`hinzu, und stellen Sie sicher, dass Sie an die `Site.master` Master Seite gebunden ist.</span><span class="sxs-lookup"><span data-stu-id="37a73-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="37a73-136">Abbildung 1 zeigt die Projektmappen-Explorer, nachdem diese Seite der Website hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="37a73-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>

<span data-ttu-id="37a73-137">[![dem Administrator Ordner eine neue ASP.NET-Seite hinzufügen](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="37a73-138">**Abbildung 01**: Hinzufügen einer neuen ASP.NET-Seite zum Ordner "`Admin`" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>

<span data-ttu-id="37a73-139">Beachten Sie, dass im Tutorial [*angeben des Titels, der Meta-Tags und anderer HTML-Header im Lernprogramm für die Master Seite*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) eine benutzerdefinierte Basis Seiten Klasse mit dem Namen `BasePage` erstellt wurde, die den Titel der Seite generiert, wenn Sie nicht explizit festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="37a73-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="37a73-140">Wechseln Sie zur Code Behind-Klasse der `Products.aspx` Seite, und lassen Sie Sie von `BasePage` (anstelle von `System.Web.UI.Page`) ableiten.</span><span class="sxs-lookup"><span data-stu-id="37a73-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="37a73-141">Aktualisieren Sie abschließend die `Web.sitemap` Datei, sodass Sie einen Eintrag für diese Lektion enthält.</span><span class="sxs-lookup"><span data-stu-id="37a73-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="37a73-142">Fügen Sie das folgende Markup unterhalb der `<siteMapNode>` für die Interaktions Lektion Inhalt in Master Seite hinzu:</span><span class="sxs-lookup"><span data-stu-id="37a73-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>

[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="37a73-143">Das Hinzufügen dieses `<siteMapNode>` Elements wird in der Liste der Lektionen widergespiegelt (siehe Abbildung 5).</span><span class="sxs-lookup"><span data-stu-id="37a73-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="37a73-144">Kehren Sie zu `Products.aspx`zurück.</span><span class="sxs-lookup"><span data-stu-id="37a73-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="37a73-145">Fügen Sie im Inhalts Steuerelement für `MainContent`ein GridView-Steuerelement hinzu, und benennen Sie es `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="37a73-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="37a73-146">Binden Sie die GridView an ein neues SqlDataSource-Steuerelement mit dem Namen `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="37a73-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>

<span data-ttu-id="37a73-147">[![das GridView-Steuerelement an ein neues SqlDataSource-Steuerelement binden.](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="37a73-148">**Abbildung 02**: Binden der GridView an ein neues SqlDataSource-Steuerelement ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>

<span data-ttu-id="37a73-149">Konfigurieren Sie den Assistenten so, dass er die Datenbank Northwind verwendet.</span><span class="sxs-lookup"><span data-stu-id="37a73-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="37a73-150">Wenn Sie das vorherige Tutorial durchgearbeitet haben, sollten Sie bereits eine Verbindungs Zeichenfolge mit dem Namen `NorthwindConnectionString` in `Web.config`haben.</span><span class="sxs-lookup"><span data-stu-id="37a73-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="37a73-151">Wählen Sie diese Verbindungs Zeichenfolge aus der Dropdown Liste aus, wie in Abbildung 3 gezeigt.</span><span class="sxs-lookup"><span data-stu-id="37a73-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>

<span data-ttu-id="37a73-152">[![Konfigurieren von SqlDataSource für die Verwendung der Northwind-Datenbank](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="37a73-153">**Abbildung 03**: Konfigurieren von SqlDataSource für die Verwendung der Northwind-Datenbank ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>

<span data-ttu-id="37a73-154">Geben Sie als nächstes die `SELECT`-Anweisung des Datenquellen-Steuer Elements an, indem Sie die Products-Tabelle aus der Dropdown Liste auswählen und die Spalten `ProductName` und `UnitPrice` zurückgeben (siehe Abbildung 4).</span><span class="sxs-lookup"><span data-stu-id="37a73-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="37a73-155">Klicken Sie auf Weiter, und beenden Sie dann den Assistenten zum Konfigurieren von Datenquellen.</span><span class="sxs-lookup"><span data-stu-id="37a73-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>

<span data-ttu-id="37a73-156">[![die Felder "ProductName" und "UnitPrice" aus der Tabelle "Products" zurückgeben](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="37a73-157">**Abbildung 04**: Zurückgeben der Felder "`ProductName`" und "`UnitPrice`" aus der `Products` Tabelle ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>

<span data-ttu-id="37a73-158">Das ist schon alles!</span><span class="sxs-lookup"><span data-stu-id="37a73-158">That's all there is to it!</span></span> <span data-ttu-id="37a73-159">Nachdem Sie den Assistenten abgeschlossen haben, fügt Visual Studio zwei boundfields zur GridView hinzu, um die beiden Felder zu spiegeln, die vom SqlDataSource-Steuerelement zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="37a73-160">Das Markup View-und SqlDataSource-Steuerelement-Steuerelement wird befolgt.</span><span class="sxs-lookup"><span data-stu-id="37a73-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="37a73-161">Abbildung 5 zeigt die Ergebnisse, wenn Sie in einem Browser angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-161">Figure 5 shows the results when viewed through a browser.</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]

<span data-ttu-id="37a73-162">[![jedes Produkt und sein Preis in der GridView aufgeführt.](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="37a73-163">**Abbildung 05**: jedes Produkt und sein Preis sind in der GridView aufgeführt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="37a73-164">Sie können die Darstellung der GridView jederzeit bereinigen.</span><span class="sxs-lookup"><span data-stu-id="37a73-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="37a73-165">Einige Vorschläge umfassen das Formatieren des angezeigten UnitPrice-Werts als Währung und das Verwenden von Hintergrundfarben und Schriftarten, um die Darstellung des Rasters zu verbessern.</span><span class="sxs-lookup"><span data-stu-id="37a73-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="37a73-166">Weitere Informationen zum Anzeigen und Formatieren von Daten in ASP.net finden Sie in der [Reihe zu arbeiten mit Daten](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="37a73-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>

## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="37a73-167">Schritt 2: Hinzufügen der Schaltfläche "doppelte Preise" zur Master Seite</span><span class="sxs-lookup"><span data-stu-id="37a73-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="37a73-168">Die nächste Aufgabe besteht darin, der Master Seite ein Schaltflächen-websteuer Element hinzuzufügen, das, wenn Sie darauf klicken, den Preis aller Produkte in der Datenbank verdoppelt.</span><span class="sxs-lookup"><span data-stu-id="37a73-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="37a73-169">Öffnen Sie die `Site.master` Master Seite, und ziehen Sie eine Schaltfläche aus der Toolbox auf den Designer, und platzieren Sie Sie unterhalb des `RecentProductsDataSource` SqlDataSource-Steuer Elements, das wir im vorherigen Tutorial hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="37a73-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="37a73-170">Legen Sie die `ID`-Eigenschaft der Schaltfläche auf `DoublePrice` und deren `Text`-Eigenschaft auf "doppelte Produktpreise" fest.</span><span class="sxs-lookup"><span data-stu-id="37a73-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="37a73-171">Fügen Sie als nächstes der Master Seite ein SqlDataSource-Steuerelement hinzu, und benennen Sie es `DoublePricesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="37a73-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="37a73-172">Mit dieser SqlDataSource wird die `UPDATE`-Anweisung ausgeführt, um alle Preise zu verdoppeln.</span><span class="sxs-lookup"><span data-stu-id="37a73-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="37a73-173">Insbesondere müssen die `ConnectionString`-und `UpdateCommand`-Eigenschaften auf die entsprechende Verbindungs Zeichenfolge und `UPDATE`-Anweisung festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="37a73-174">Dann muss die `Update` Methode dieses SqlDataSource-Steuer Elements aufgerufen werden, wenn auf die Schaltfläche `DoublePrice` geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="37a73-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="37a73-175">Wählen Sie zum Festlegen der Eigenschaften für `ConnectionString` und `UpdateCommand` das SqlDataSource-Steuerelement aus, und wechseln Sie dann zum Eigenschaftenfenster.</span><span class="sxs-lookup"><span data-stu-id="37a73-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="37a73-176">Die `ConnectionString`-Eigenschaft listet die Verbindungs Zeichenfolgen auf, die bereits in `Web.config` in einer Dropdown Liste gespeichert wurden. Wählen Sie die Option `NorthwindConnectionString` aus, wie in Abbildung 6 dargestellt.</span><span class="sxs-lookup"><span data-stu-id="37a73-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>

<span data-ttu-id="37a73-177">[![konfigurieren Sie SqlDataSource für die Verwendung von NorthwindConnectionString.](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="37a73-178">**Abbildung 06**: Konfigurieren von SqlDataSource für die Verwendung des `NorthwindConnectionString` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>

<span data-ttu-id="37a73-179">Um die `UpdateCommand`-Eigenschaft festzulegen, suchen Sie die Option UpdateQuery in der Eigenschaftenfenster.</span><span class="sxs-lookup"><span data-stu-id="37a73-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="37a73-180">Wenn diese Eigenschaft ausgewählt ist, wird eine Schaltfläche mit Auslassungs Zeichen angezeigt. Klicken Sie auf diese Schaltfläche, um das Dialogfeld Befehls-und Parameter-Editor in Abbildung 7 anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="37a73-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="37a73-181">Geben Sie die folgende `UPDATE`-Anweisung in das Textfeld des Dialog Felds ein:</span><span class="sxs-lookup"><span data-stu-id="37a73-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>

[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="37a73-182">Diese Anweisung verdoppelt bei der Ausführung den `UnitPrice` Wert für jeden Datensatz in der `Products` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="37a73-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>

<span data-ttu-id="37a73-183">[![Festlegen der UpdateCommand-Eigenschaft von SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="37a73-184">**Abbildung 07**: Festlegen der `UpdateCommand` Eigenschaft von SqlDataSource ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>

<span data-ttu-id="37a73-185">Nachdem Sie diese Eigenschaften festgelegt haben, sollten das deklarative Markup Ihrer Schaltfläche und des SqlDataSource-Steuer Elements in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="37a73-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="37a73-186">Nur noch muss beim Klicken auf die Schaltfläche `DoublePrice` die `Update` Methode aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="37a73-187">Erstellen Sie einen `Click`-Ereignishandler für die Schaltfläche `DoublePrice`, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="37a73-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="37a73-188">Um diese Funktionalität zu testen, besuchen Sie die `~/Admin/Products.aspx` Seite, die Sie in Schritt 1 erstellt haben, und klicken Sie auf die Schaltfläche "doppelte Produktpreise".</span><span class="sxs-lookup"><span data-stu-id="37a73-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="37a73-189">Wenn Sie auf die Schaltfläche klicken, wird ein Postback ausgelöst und der `Click` Ereignishandler der `DoublePrice` Schaltfläche ausgeführt, wodurch die Preise aller Produkte verdoppelt werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="37a73-190">Die Seite wird dann erneut gerendert, und das Markup wird zurückgegeben und im Browser erneut angezeigt.</span><span class="sxs-lookup"><span data-stu-id="37a73-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="37a73-191">Die GridView auf der Seite Inhalt listet jedoch dieselben Preise auf wie vor dem Klicken auf die Schaltfläche "doppelte Produktpreise".</span><span class="sxs-lookup"><span data-stu-id="37a73-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="37a73-192">Dies liegt daran, dass der Zustand der ursprünglich in der GridView geladenen Daten im Ansichts Zustand gespeichert wurde, sodass er bei Postbacks nicht erneut geladen wird, es sei denn, er wird anderweitig angewiesen.</span><span class="sxs-lookup"><span data-stu-id="37a73-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="37a73-193">Wenn Sie eine andere Seite besuchen und dann zur `~/Admin/Products.aspx` Seite zurückkehren, werden die aktualisierten Preise angezeigt.</span><span class="sxs-lookup"><span data-stu-id="37a73-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="37a73-194">Schritt 3: erhöhen eines Ereignisses, wenn die Preise verdoppelt werden</span><span class="sxs-lookup"><span data-stu-id="37a73-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="37a73-195">Da die GridView auf der `~/Admin/Products.aspx` Seite die Preis Verdoppelung nicht sofort widerspiegelt, kann ein Benutzer verständlicherweise denken, dass er nicht auf die Schaltfläche "doppelte Produktpreise" geklickt hat oder dass er nicht funktioniert hat.</span><span class="sxs-lookup"><span data-stu-id="37a73-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="37a73-196">Sie können versuchen, mehrmals auf die Schaltfläche zu klicken, um die Preise nochmals zu verdoppeln.</span><span class="sxs-lookup"><span data-stu-id="37a73-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="37a73-197">Um dieses Problem zu beheben, muss das Raster auf der Inhaltsseite die neuen Preise sofort nach der doppelten Anzeige anzeigen.</span><span class="sxs-lookup"><span data-stu-id="37a73-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="37a73-198">Wie bereits weiter oben in diesem Tutorial erläutert, muss ein Ereignis auf der Master Seite immer dann durchgeführt werden, wenn der Benutzer auf die Schaltfläche `DoublePrice` klickt.</span><span class="sxs-lookup"><span data-stu-id="37a73-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="37a73-199">Ein Ereignis ist eine Möglichkeit für eine Klasse (einen Ereignis Verleger), eine andere Gruppe von anderen Klassen (den Ereignis Abonnenten) darüber zu benachrichtigen, dass etwas interessantes aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="37a73-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="37a73-200">In diesem Beispiel ist die Master Seite der Ereignis Herausgeber. die Inhaltsseiten, die beim Klicken auf die Schaltfläche "`DoublePrice`" berücksichtigt werden, sind die Abonnenten.</span><span class="sxs-lookup"><span data-stu-id="37a73-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="37a73-201">Eine Klasse abonniert ein Ereignis, indem ein *Ereignishandler*erstellt wird, bei dem es sich um eine Methode handelt, die als Reaktion auf das ausgelöbene Ereignis ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="37a73-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="37a73-202">Der Verleger definiert die Ereignisse, die er auslöst, indem er einen *Ereignis*Delegaten definiert.</span><span class="sxs-lookup"><span data-stu-id="37a73-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="37a73-203">Der Ereignis Delegat gibt an, welche Eingabeparameter der Ereignishandler annehmen muss.</span><span class="sxs-lookup"><span data-stu-id="37a73-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="37a73-204">In der .NET Framework geben Ereignis Delegaten keinen Wert zurück und akzeptieren zwei Eingabeparameter:</span><span class="sxs-lookup"><span data-stu-id="37a73-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="37a73-205">Ein-`Object`, der die Ereignis Quelle identifiziert, und</span><span class="sxs-lookup"><span data-stu-id="37a73-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="37a73-206">Eine von abgeleitete Klasse `System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="37a73-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="37a73-207">Der zweite Parameter, der an einen Ereignishandler übergeben wird, kann zusätzliche Informationen über das Ereignis enthalten.</span><span class="sxs-lookup"><span data-stu-id="37a73-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="37a73-208">Während die Basis `EventArgs` Klasse keine Informationen übergibt, enthält die .NET Framework eine Reihe von Klassen, die `EventArgs` erweitern und zusätzliche Eigenschaften umfassen.</span><span class="sxs-lookup"><span data-stu-id="37a73-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="37a73-209">Beispielsweise wird eine `CommandEventArgs` Instanz an Ereignishandler übermittelt, die auf das `Command`-Ereignis reagieren, und enthält zwei Informations Eigenschaften: `CommandArgument` und `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="37a73-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="37a73-210">Weitere Informationen zum Erstellen, erhöhen und behandeln von Ereignissen finden Sie unter [Ereignisse und](https://msdn.microsoft.com/library/17sde2xt.aspx) Delegaten und Ereignis Delegaten [in einfachem Englisch](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span><span class="sxs-lookup"><span data-stu-id="37a73-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>

<span data-ttu-id="37a73-211">Verwenden Sie zum Definieren eines Ereignisses die folgende Syntax:</span><span class="sxs-lookup"><span data-stu-id="37a73-211">To define an event use the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="37a73-212">Da wir nur die Inhaltsseite warnen müssen, wenn der Benutzer auf die Schaltfläche "`DoublePrice`" geklickt hat und keine weiteren zusätzlichen Informationen übergeben müssen, können wir den Ereignis Delegaten `EventHandler`verwenden, der einen Ereignishandler definiert, der als zweiten Parameter ein Objekt vom Typ `System.EventArgs`akzeptiert.</span><span class="sxs-lookup"><span data-stu-id="37a73-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="37a73-213">Um das Ereignis auf der Master Seite zu erstellen, fügen Sie der Code Behind-Klasse der Master Seite die folgende Codezeile hinzu:</span><span class="sxs-lookup"><span data-stu-id="37a73-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="37a73-214">Der obige Code fügt der Master Seite mit dem Namen `PricesDoubled`ein öffentliches Ereignis hinzu.</span><span class="sxs-lookup"><span data-stu-id="37a73-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="37a73-215">Wir müssen dieses Ereignis jetzt erhöhen, nachdem die Preise verdoppelt wurden.</span><span class="sxs-lookup"><span data-stu-id="37a73-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="37a73-216">Verwenden Sie die folgende Syntax, um ein Ereignis zu verwenden:</span><span class="sxs-lookup"><span data-stu-id="37a73-216">To raise an event use the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="37a73-217">Dabei sind *Absender* und *EventArgs* die Werte, die Sie an den Ereignishandler des Abonnenten übergeben möchten.</span><span class="sxs-lookup"><span data-stu-id="37a73-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="37a73-218">Aktualisieren Sie den `DoublePrice` `Click`-Ereignishandler mit folgendem Code:</span><span class="sxs-lookup"><span data-stu-id="37a73-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="37a73-219">Wie zuvor wird der `Click` Ereignishandler gestartet, indem die `Update` Methode des `DoublePricesDataSource` SqlDataSource-Steuer Elements aufgerufen wird, um die Preise aller Produkte zu verdoppeln.</span><span class="sxs-lookup"><span data-stu-id="37a73-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="37a73-220">Danach gibt es zwei Ergänzungen zum-Ereignishandler.</span><span class="sxs-lookup"><span data-stu-id="37a73-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="37a73-221">Zuerst werden die Daten der `RecentProducts` GridView aktualisiert.</span><span class="sxs-lookup"><span data-stu-id="37a73-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="37a73-222">Diese GridView wurde der Master Seite im vorherigen Tutorial hinzugefügt und zeigt die fünf zuletzt hinzugefügten Produkte an.</span><span class="sxs-lookup"><span data-stu-id="37a73-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="37a73-223">Wir müssen dieses Raster aktualisieren, damit es die eben doppelten Preise für diese fünf Produkte anzeigt.</span><span class="sxs-lookup"><span data-stu-id="37a73-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="37a73-224">Danach wird das `PricesDoubled`-Ereignis ausgelöst.</span><span class="sxs-lookup"><span data-stu-id="37a73-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="37a73-225">Ein Verweis auf die Master Seite selbst (`this`) wird als Ereignis Quelle an den Ereignishandler gesendet, und es wird ein leeres `EventArgs` Objekt als Ereignis Argumente gesendet.</span><span class="sxs-lookup"><span data-stu-id="37a73-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="37a73-226">Schritt 4: Behandeln des Ereignisses auf der Seite "Inhalt"</span><span class="sxs-lookup"><span data-stu-id="37a73-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="37a73-227">An diesem Punkt löst die Master Seite das `PricesDoubled`-Ereignis aus, wenn auf das `DoublePrice` Schaltflächen-Steuerelement geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="37a73-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="37a73-228">Dies ist jedoch nur die Hälfte des Kampfes. Wir müssen das Ereignis trotzdem auf dem Abonnenten behandeln.</span><span class="sxs-lookup"><span data-stu-id="37a73-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="37a73-229">Dies umfasst zwei Schritte: Erstellen des Ereignis Handlers und Hinzufügen von Ereignishandlercode, sodass der Ereignishandler ausgeführt wird, wenn das Ereignis ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="37a73-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="37a73-230">Erstellen Sie zunächst einen Ereignishandler mit dem Namen `Master_PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="37a73-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="37a73-231">Da wir das `PricesDoubled`-Ereignis auf der Master Seite definiert haben, müssen die beiden Eingabeparameter des Ereignis Handlers vom Typ `Object` bzw. `EventArgs`sein.</span><span class="sxs-lookup"><span data-stu-id="37a73-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="37a73-232">Im-Ereignishandler wird die `DataBind`-Methode der `ProductsGrid` GridView aufgerufen, um die Daten erneut an das Raster zu binden.</span><span class="sxs-lookup"><span data-stu-id="37a73-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="37a73-233">Der Code für den Ereignishandler ist fertiggestellt, aber wir haben noch das `PricesDoubled` Ereignis der Master Seite an diesen Ereignishandler übertragen.</span><span class="sxs-lookup"><span data-stu-id="37a73-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="37a73-234">Der Abonnent verdrahtet ein Ereignis mithilfe der folgenden Syntax an einen Ereignishandler:</span><span class="sxs-lookup"><span data-stu-id="37a73-234">The subscriber wires an event to an event handler via the following syntax:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="37a73-235">*Publisher* ist ein Verweis auf das Objekt, das das Ereignis *EventName*und *MethodName* den Namen des Ereignis Handlers enthält, der auf dem Abonnenten definiert ist, dessen Signatur *dem Ereignis Delegaten entspricht.*</span><span class="sxs-lookup"><span data-stu-id="37a73-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="37a73-236">Anders ausgedrückt: Wenn der Ereignis Delegat `EventHandler`ist, muss *MethodName* der Name einer Methode im Abonnenten sein, die keinen Wert zurückgibt und zwei Eingabeparameter vom Typ "`Object`" bzw. "`EventArgs`" annimmt.</span><span class="sxs-lookup"><span data-stu-id="37a73-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="37a73-237">Dieser Ereignis Verdrahtungs Code muss auf dem ersten Seitenbesuch und nachfolgenden Postbacks ausgeführt werden und an einem Punkt im Seiten Lebenszyklus auftreten, der vor dem auslassen des Ereignisses liegt.</span><span class="sxs-lookup"><span data-stu-id="37a73-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="37a73-238">Ein guter Zeitpunkt zum Hinzufügen von Ereignishandlercode befindet sich in der PreInit-Phase, die sehr früh im Lebenszyklus der Seite auftritt.</span><span class="sxs-lookup"><span data-stu-id="37a73-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="37a73-239">Öffnen Sie `~/Admin/Products.aspx`, und erstellen Sie einen `Page_PreInit`-Ereignishandler:</span><span class="sxs-lookup"><span data-stu-id="37a73-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="37a73-240">Zum vervollständigen dieses Codierungs Codes benötigen Sie einen programmgesteuerten Verweis auf die Master Seite von der Inhaltsseite.</span><span class="sxs-lookup"><span data-stu-id="37a73-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="37a73-241">Wie bereits im vorherigen Tutorial erwähnt, gibt es zwei Möglichkeiten:</span><span class="sxs-lookup"><span data-stu-id="37a73-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="37a73-242">Durch Umwandeln der lose typisierten `Page.Master` Eigenschaft in den entsprechenden Masterseitentyp oder</span><span class="sxs-lookup"><span data-stu-id="37a73-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="37a73-243">Durch Hinzufügen einer `@MasterType`-Direktive auf der `.aspx` Seite und anschließendes Verwenden der stark typisierten `Master`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="37a73-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="37a73-244">Wir verwenden den letzteren Ansatz.</span><span class="sxs-lookup"><span data-stu-id="37a73-244">Let's use the latter approach.</span></span> <span data-ttu-id="37a73-245">Fügen Sie am Anfang des deklarativen Markups der Seite die folgende `@MasterType`-Direktive hinzu:</span><span class="sxs-lookup"><span data-stu-id="37a73-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>

[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="37a73-246">Fügen Sie dann dem Ereignishandler für `Page_PreInit` den folgenden Ereignis Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="37a73-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>

[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="37a73-247">Wenn dieser Code vorhanden ist, wird die GridView auf der Inhaltsseite immer dann aktualisiert, wenn auf die Schaltfläche "`DoublePrice`" geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="37a73-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="37a73-248">Die Abbildungen 8 und 9 veranschaulichen dieses Verhalten.</span><span class="sxs-lookup"><span data-stu-id="37a73-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="37a73-249">Abbildung 8 zeigt die Seite beim ersten Besuch.</span><span class="sxs-lookup"><span data-stu-id="37a73-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="37a73-250">Beachten Sie, dass die preiswerte sowohl in der `RecentProducts` GridView (in der linken Spalte der Master Seite) als auch in der `ProductsGrid` GridView (auf der Seite Inhalt) angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="37a73-251">Abbildung 9 zeigt den gleichen Bildschirm unmittelbar nach dem Klicken auf die Schaltfläche "`DoublePrice`".</span><span class="sxs-lookup"><span data-stu-id="37a73-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="37a73-252">Wie Sie sehen können, werden die neuen Preise sofort in beiden GridViews reflektiert.</span><span class="sxs-lookup"><span data-stu-id="37a73-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>

<span data-ttu-id="37a73-253">[anfängliche preiswerte ![](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="37a73-254">**Abbildung 08**: anfängliche preiswerte ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>

<span data-ttu-id="37a73-255">[in den GridViews werden ![die soeben doppelten Preise angezeigt.](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="37a73-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="37a73-256">**Abbildung 09**: die Preisübersicht werden in den GridViews angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="37a73-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="37a73-257">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="37a73-257">Summary</span></span>

<span data-ttu-id="37a73-258">Idealerweise sind eine Master Seite und ihre Inhaltsseiten vollständig voneinander getrennt und erfordern keine Interaktions Ebene.</span><span class="sxs-lookup"><span data-stu-id="37a73-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="37a73-259">Wenn Sie jedoch eine Master Seite oder Inhaltsseite haben, auf der Daten angezeigt werden, die auf der Master Seite oder der Inhaltsseite geändert werden können, müssen Sie möglicherweise auf der Master Seite die Inhaltsseite warnen (oder umgekehrt), wenn die Daten geändert werden, sodass die Anzeige aktualisiert werden kann.</span><span class="sxs-lookup"><span data-stu-id="37a73-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="37a73-260">Im vorherigen Tutorial wurde erläutert, wie eine Inhaltsseite Programm gesteuert mit der Master Seite interagieren kann. in diesem Tutorial haben wir erläutert, wie eine Master Seite die Interaktion initiiert.</span><span class="sxs-lookup"><span data-stu-id="37a73-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="37a73-261">Während die programmgesteuerte Interaktion zwischen einem Inhalt und einer Master Seite entweder aus der Inhalts-oder der Master Seite stammen kann, hängt das verwendete Interaktionsmuster vom Ursprung ab.</span><span class="sxs-lookup"><span data-stu-id="37a73-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="37a73-262">Die Unterschiede sind darauf zurückzuführen, dass eine Inhaltsseite eine einzelne Master Seite hat, aber eine Master Seite kann viele verschiedene Inhaltsseiten enthalten.</span><span class="sxs-lookup"><span data-stu-id="37a73-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="37a73-263">Anstatt eine Master Seite direkt mit einer Inhaltsseite zu interagieren, empfiehlt es sich, dass die Master Seite ein Ereignis auswirft, um zu signalisieren, dass eine Aktion stattfindet.</span><span class="sxs-lookup"><span data-stu-id="37a73-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="37a73-264">Die Inhaltsseiten, die für die Aktion wichtig sind, können Ereignishandler erstellen.</span><span class="sxs-lookup"><span data-stu-id="37a73-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="37a73-265">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="37a73-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="37a73-266">Weitere nützliche Informationen</span><span class="sxs-lookup"><span data-stu-id="37a73-266">Further Reading</span></span>

<span data-ttu-id="37a73-267">Weitere Informationen zu den in diesem Tutorial behandelten Themen finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="37a73-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="37a73-268">Zugreifen auf und Aktualisieren von Daten in ASP.net</span><span class="sxs-lookup"><span data-stu-id="37a73-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="37a73-269">Ereignisse und Delegaten</span><span class="sxs-lookup"><span data-stu-id="37a73-269">Events and Delegates</span></span>](https://msdn.microsoft.com/library/17sde2xt.aspx)
- [<span data-ttu-id="37a73-270">Übergeben von Informationen zwischen Inhalt und Master Seiten</span><span class="sxs-lookup"><span data-stu-id="37a73-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="37a73-271">Arbeiten mit Daten in ASP.net-Tutorials</span><span class="sxs-lookup"><span data-stu-id="37a73-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="37a73-272">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="37a73-272">About the Author</span></span>

<span data-ttu-id="37a73-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor mehrerer ASP/ASP. net-Bücher und Gründer von 4GuysFromRolla.com, hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="37a73-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="37a73-274">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="37a73-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="37a73-275">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 3,5 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="37a73-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="37a73-276">Scott kann über [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/)erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="37a73-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="37a73-277">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="37a73-277">Special Thanks To</span></span>

<span data-ttu-id="37a73-278">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="37a73-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="37a73-279">Lead Reviewer für dieses Tutorial war Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="37a73-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="37a73-280">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="37a73-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="37a73-281">Wenn dies der Fall ist, löschen Sie eine Zeile bei [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="37a73-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="37a73-282">[Zurück](interacting-with-the-master-page-from-the-content-page-cs.md)
> [Weiter](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="37a73-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>
