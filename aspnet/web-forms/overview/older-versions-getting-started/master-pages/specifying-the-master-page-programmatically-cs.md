---
uid: web-forms/overview/older-versions-getting-started/master-pages/specifying-the-master-page-programmatically-cs
title: Programmgesteuertes Festlegen der Masterseite (c#) | Microsoft-Dokumentation
author: rick-anderson
description: Festlegen der Masterseite der Inhaltsseite, programmgesteuert über den PreInit-Ereignishandler überprüft.
ms.author: riande
ms.date: 07/28/2008
ms.assetid: 7c4a3445-2440-4aee-b9fd-779c05e6abb2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/specifying-the-master-page-programmatically-cs
msc.type: authoredcontent
ms.openlocfilehash: 58ecd01a8a18cd7dcf9eba96313e40d881d90af5
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/01/2019
ms.locfileid: "57065667"
---
<a name="specifying-the-master-page-programmatically-c"></a><span data-ttu-id="e5056-103">Programmgesteuertes Festlegen der Masterseite (C#)</span><span class="sxs-lookup"><span data-stu-id="e5056-103">Specifying the Master Page Programmatically (C#)</span></span>
====================
<span data-ttu-id="e5056-104">durch [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="e5056-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="e5056-105">[Code herunterladen](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.zip) oder [PDF-Datei herunterladen](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="e5056-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.pdf)</span></span>

> <span data-ttu-id="e5056-106">Festlegen der Masterseite der Inhaltsseite, programmgesteuert über den PreInit-Ereignishandler überprüft.</span><span class="sxs-lookup"><span data-stu-id="e5056-106">Looks at setting the content page's master page programmatically via the PreInit event handler.</span></span>


## <a name="introduction"></a><span data-ttu-id="e5056-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="e5056-107">Introduction</span></span>

<span data-ttu-id="e5056-108">Seit dem ersten Beispiel in [ *erstellen eine standortweite Layout mithilfe von Master Pages*](creating-a-site-wide-layout-using-master-pages-cs.md)werden alle Inhaltsdateien Seiten auf ihrer Masterseite deklarativ über verwiesen die `MasterPageFile` -Attribut in der `@Page`Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="e5056-108">Since the inaugural example in [*Creating a Site-Wide Layout Using Master Pages*](creating-a-site-wide-layout-using-master-pages-cs.md), all content pages have referenced their master page declaratively via the `MasterPageFile` attribute in the `@Page` directive.</span></span> <span data-ttu-id="e5056-109">Beispielsweise die folgenden `@Page` Richtlinie links die Seite Inhalte auf die Masterseite `Site.master`:</span><span class="sxs-lookup"><span data-stu-id="e5056-109">For example, the following `@Page` directive links the content page to the master page `Site.master`:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample1.aspx)]

<span data-ttu-id="e5056-110">Die [ `Page` Klasse](https://msdn.microsoft.com/library/system.web.ui.page.aspx) in die `System.Web.UI` -Namespace umfasst einen [ `MasterPageFile` Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.page.masterpagefile.aspx) , die den Pfad auf die Masterseite der Inhaltsseite zurückgibt; es ist diese Eigenschaft, die von der festgelegtist`@Page` Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="e5056-110">The [`Page` class](https://msdn.microsoft.com/library/system.web.ui.page.aspx) in the `System.Web.UI` namespace includes a [`MasterPageFile` property](https://msdn.microsoft.com/library/system.web.ui.page.masterpagefile.aspx) that returns the path to the content page's master page; it is this property that is set by the `@Page` directive.</span></span> <span data-ttu-id="e5056-111">Diese Eigenschaft kann auch verwendet werden, können Sie die Masterseite der Inhaltsseite programmgesteuert angeben.</span><span class="sxs-lookup"><span data-stu-id="e5056-111">This property can also be used to programmatically specify the content page's master page.</span></span> <span data-ttu-id="e5056-112">Dieser Ansatz ist hilfreich, wenn Sie die Masterseite, die basierend auf externe Faktoren wie der Benutzer Zugriff auf die Seite dynamisch zuweisen möchten.</span><span class="sxs-lookup"><span data-stu-id="e5056-112">This approach is useful if you want to dynamically assign the master page based on external factors, such as the user visiting the page.</span></span>

<span data-ttu-id="e5056-113">In diesem Tutorial stellen wir unsere Website, eine zweite Masterseite hinzugefügt und die Masterseite für die Verwendung zur Laufzeit dynamisch zu entscheiden.</span><span class="sxs-lookup"><span data-stu-id="e5056-113">In this tutorial we add a second master page to our website and dynamically decide which master page to use at runtime.</span></span>

## <a name="step-1-a-look-at-the-page-lifecycle"></a><span data-ttu-id="e5056-114">Schritt 1: Der Lebenszyklus der Seite ansehen</span><span class="sxs-lookup"><span data-stu-id="e5056-114">Step 1: A Look at the Page Lifecycle</span></span>

<span data-ttu-id="e5056-115">Wenn eine Anforderung auf dem Webserver für eine ASP.NET-Seite, die eine Inhaltsseite ist eingeht, muss das ASP.NET-Modul fuse der Seite Inhalt von Steuerelementen in die Masterseite die entsprechende ContentPlaceHolder-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="e5056-115">Whenever a request arrives at the web server for an ASP.NET page that is a content page, the ASP.NET engine must fuse the page's Content controls into the master page's corresponding ContentPlaceHolder controls.</span></span> <span data-ttu-id="e5056-116">Diese Fusion erstellt eine einzelnes Steuerelement-Hierarchie, die dann durch den Lebenszyklus der Seite "typischen" fortgesetzt werden kann.</span><span class="sxs-lookup"><span data-stu-id="e5056-116">This fusion creates a single control hierarchy that can then proceed through the typical page lifecycle.</span></span>

<span data-ttu-id="e5056-117">Abbildung 1 zeigt diese Fusion.</span><span class="sxs-lookup"><span data-stu-id="e5056-117">Figure 1 illustrates this fusion.</span></span> <span data-ttu-id="e5056-118">Schritt 1 in Abbildung 1 zeigt die ursprünglichen Inhalt und die Hierarchien der Masterseite-Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="e5056-118">Step 1 in Figure 1 shows the initial content and master page control hierarchies.</span></span> <span data-ttu-id="e5056-119">Steuerelemente auf der Seite werden am Ende des Protokollfragments der PreInit-Phase der Inhalt der entsprechenden ContentPlaceHolder-Steuerelemente auf der Masterseite (Schritt2) hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="e5056-119">At the tail end of the PreInit stage the Content controls in the page are added to the corresponding ContentPlaceHolders in the master page (Step 2).</span></span> <span data-ttu-id="e5056-120">Nach diesem Fusion dient die Masterseite als Stamm der Steuerelementhierarchie fused.</span><span class="sxs-lookup"><span data-stu-id="e5056-120">After this fusion, the master page serves as the root of the fused control hierarchy.</span></span> <span data-ttu-id="e5056-121">Dieses Steuerelement fused Hierarchie wird dann hinzugefügt, um die Seite, um die abgeschlossene Steuerelementhierarchie (Schritt 3) zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e5056-121">This fused control hierarchy is then added to the page to produce the finalized control hierarchy (Step 3).</span></span> <span data-ttu-id="e5056-122">Das Ergebnis ist die Steuerelementhierarchie der Seite die fused Steuerelementhierarchie enthält.</span><span class="sxs-lookup"><span data-stu-id="e5056-122">The net result is that the page's control hierarchy includes the fused control hierarchy.</span></span>


<span data-ttu-id="e5056-123">[![Der Masterseite und der Inhaltsseite Steuerelement Hierarchien werden zusammen mit Sicherung während der PreInit-Phase](specifying-the-master-page-programmatically-cs/_static/image2.png)](specifying-the-master-page-programmatically-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-123">[![The Master Page and Content Page's Control Hierarchies are Fused Together during the PreInit Stage](specifying-the-master-page-programmatically-cs/_static/image2.png)](specifying-the-master-page-programmatically-cs/_static/image1.png)</span></span>

<span data-ttu-id="e5056-124">**Abbildung 01**: Der Masterseite und der Inhaltsseite Steuerelement Hierarchien werden zusammen mit Sicherung während der PreInit-Phase ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-124">**Figure 01**: The Master Page and Content Page's Control Hierarchies are Fused Together during the PreInit Stage ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image3.png))</span></span>


## <a name="step-2-setting-themasterpagefileproperty-from-code"></a><span data-ttu-id="e5056-125">Schritt 2: Festlegen der`MasterPageFile`-Eigenschaft im Code</span><span class="sxs-lookup"><span data-stu-id="e5056-125">Step 2: Setting the`MasterPageFile`Property from Code</span></span>

<span data-ttu-id="e5056-126">Welche Masterseite in dieser Fusion partakes, hängt davon ab, der Wert für die `Page` des Objekts `MasterPageFile` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="e5056-126">What master page partakes in this fusion depends on the value of the `Page` object's `MasterPageFile` property.</span></span> <span data-ttu-id="e5056-127">Festlegen der `MasterPageFile` -Attribut in der `@Page` -Anweisung hat das Ergebnis der Zuweisung der `Page`des `MasterPageFile` -Eigenschaft während der Initialisierungsphase, die die erste Phase des Lebenszyklus der Seite ist.</span><span class="sxs-lookup"><span data-stu-id="e5056-127">Setting the `MasterPageFile` attribute in the `@Page` directive has the net effect of assigning the `Page`'s `MasterPageFile` property during the Initialization stage, which is the very first stage of the page's lifecycle.</span></span> <span data-ttu-id="e5056-128">Wir können diese Eigenschaft auch programmgesteuert festlegen.</span><span class="sxs-lookup"><span data-stu-id="e5056-128">We can alternatively set this property programmatically.</span></span> <span data-ttu-id="e5056-129">Allerdings ist es zwingend erforderlich, dass diese Eigenschaft festgelegt werden, bevor die Fusion in Abbildung 1 durchgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="e5056-129">However, it is imperative that this property be set before the fusion in Figure 1 takes place.</span></span>

<span data-ttu-id="e5056-130">Am Anfang der PreInit-Phase der `Page` -Objekt löst die [ `PreInit` Ereignis](https://msdn.microsoft.com/library/system.web.ui.page.preinit.aspx) und ruft seine [ `OnPreInit` Methode](https://msdn.microsoft.com/library/system.web.ui.page.onpreinit.aspx).</span><span class="sxs-lookup"><span data-stu-id="e5056-130">At the start of the PreInit stage the `Page` object raises its [`PreInit` event](https://msdn.microsoft.com/library/system.web.ui.page.preinit.aspx) and calls its [`OnPreInit` method](https://msdn.microsoft.com/library/system.web.ui.page.onpreinit.aspx).</span></span> <span data-ttu-id="e5056-131">Um die Masterseite programmgesteuert festzulegen, klicken Sie dann, wir können entweder erstellen einen Ereignishandler für die `PreInit` Ereignis- oder außer Kraft setzen der `OnPreInit` Methode.</span><span class="sxs-lookup"><span data-stu-id="e5056-131">To set the master page programmatically, then, we can either create an event handler for the `PreInit` event or override the `OnPreInit` method.</span></span> <span data-ttu-id="e5056-132">Sehen wir uns auf beide Ansätze.</span><span class="sxs-lookup"><span data-stu-id="e5056-132">Let's look at both approaches.</span></span>

<span data-ttu-id="e5056-133">Öffnen Sie zunächst `Default.aspx.cs`, die CodeBehind-Klassendatei für unsere Website-Homepage.</span><span class="sxs-lookup"><span data-stu-id="e5056-133">Start by opening `Default.aspx.cs`, the code-behind class file for our site's homepage.</span></span> <span data-ttu-id="e5056-134">Hinzufügen eines ereignishandlers für der Seite des `PreInit` Ereignis, indem Sie in den folgenden Code eingeben:</span><span class="sxs-lookup"><span data-stu-id="e5056-134">Add an event handler for the page's `PreInit` event by typing in the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample2.cs)]

<span data-ttu-id="e5056-135">Von hier aus können wir Festlegen der `MasterPageFile` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="e5056-135">From here we can set the `MasterPageFile` property.</span></span> <span data-ttu-id="e5056-136">Aktualisieren Sie den Code, sodass den Wert weist "~ / Site.master" auf die `MasterPageFile` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="e5056-136">Update the code so that it assigns the value "~/Site.master" to the `MasterPageFile` property.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample3.cs)]

<span data-ttu-id="e5056-137">Wenn Sie einen Haltepunkt festlegen und starten mit Debuggen Sie, dass sehen immer die `Default.aspx` Seite wird besucht, oder wird jedes Mal, wenn ein Postback auf dieser Seite die `Page_PreInit` -Ereignishandler ausgeführt wird und die `MasterPageFile` Eigenschaft zugewiesen ist "~ / Site.master".</span><span class="sxs-lookup"><span data-stu-id="e5056-137">If you set a breakpoint and start with debugging you'll see that whenever the `Default.aspx` page is visited or whenever there's a postback to this page, the `Page_PreInit` event handler executes and the `MasterPageFile` property is assigned to "~/Site.master".</span></span>

<span data-ttu-id="e5056-138">Alternativ können Sie überschreiben die `Page` Klasse `OnPreInit` Methode, und legen die `MasterPageFile` Eigenschaft vorhanden.</span><span class="sxs-lookup"><span data-stu-id="e5056-138">Alternatively, you can override the `Page` class's `OnPreInit` method and set the `MasterPageFile` property there.</span></span> <span data-ttu-id="e5056-139">In diesem Beispiel nicht legen wir die Masterseite in eine bestimmte Seite, sondern von `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="e5056-139">For this example, let's not set the master page in a particular page, but rather from `BasePage`.</span></span> <span data-ttu-id="e5056-140">Denken Sie daran, dass wir eine benutzerdefinierte Basisseite-Klasse erstellt (`BasePage`) zurück in die [ *Titel, Meta-Tags und anderer HTML-Header angeben, auf der Masterseite* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) Tutorial.</span><span class="sxs-lookup"><span data-stu-id="e5056-140">Recall that we created a custom base page class (`BasePage`) back in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial.</span></span> <span data-ttu-id="e5056-141">Derzeit `BasePage` überschreibt die `Page` Klasse `OnLoadComplete` -Methode, in dem der Seite wird `Title` -Eigenschaft basierend auf der Sitemap-Daten.</span><span class="sxs-lookup"><span data-stu-id="e5056-141">Currently `BasePage` overrides the `Page` class's `OnLoadComplete` method, where it sets the page's `Title` property based on the site map data.</span></span> <span data-ttu-id="e5056-142">Aktualisieren wir `BasePage` überschreiben auch die `OnPreInit` Methode, um die Masterseite programmgesteuert anzugeben.</span><span class="sxs-lookup"><span data-stu-id="e5056-142">Let's update `BasePage` to also override the `OnPreInit` method to programmatically specify the master page.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample4.cs)]

<span data-ttu-id="e5056-143">Da alle unsere Inhaltsseiten abgeleitet `BasePage`, alle haben jetzt die Masterseite programmgesteuert zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="e5056-143">Because all our content pages derive from `BasePage`, all of them now have their master page programmatically assigned.</span></span> <span data-ttu-id="e5056-144">An diesem Punkt die `PreInit` -Ereignishandler in `Default.aspx.cs` überflüssig ist, können Sie ihn zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="e5056-144">At this point the `PreInit` event handler in `Default.aspx.cs` is superfluous; feel free to remove it.</span></span>

### <a name="what-about-thepagedirective"></a><span data-ttu-id="e5056-145">Wie sieht die`@Page`Richtlinie?</span><span class="sxs-lookup"><span data-stu-id="e5056-145">What About the`@Page`Directive?</span></span>

<span data-ttu-id="e5056-146">Ein wenig verwirrend erscheinen möglicherweise ist, die der Inhaltsseiten `MasterPageFile` Eigenschaften sind jetzt an zwei Orten angegeben werden: programmgesteuert in die `BasePage` Klasse `OnPreInit` Methode sowie die `MasterPageFile` -Attribut in jeder Inhaltsseite `@Page` Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="e5056-146">What may be a little confusing is that the content pages' `MasterPageFile` properties are now being specified in two places: programmatically in the `BasePage` class's `OnPreInit` method as well as through the `MasterPageFile` attribute in each content page's `@Page` directive.</span></span>

<span data-ttu-id="e5056-147">Die erste Phase im Lebenszyklus Seite ist der Initialisierungsphase.</span><span class="sxs-lookup"><span data-stu-id="e5056-147">The first stage in the page lifecycle is the Initialization stage.</span></span> <span data-ttu-id="e5056-148">In dieser Phase der `Page` des Objekts `MasterPageFile` der Wert der Eigenschaft zugewiesen der `MasterPageFile` -Attribut in der `@Page` Richtlinie (falls es vorhanden ist).</span><span class="sxs-lookup"><span data-stu-id="e5056-148">During this stage the `Page` object's `MasterPageFile` property is assigned the value of the `MasterPageFile` attribute in the `@Page` directive (if it is provided).</span></span> <span data-ttu-id="e5056-149">Die PreInit-Phase folgt der Initialisierungsphase, und es ist soweit, in dem wir programmgesteuert festlegen der `Page` des Objekts `MasterPageFile` und überschrieb den Wert im Bereich von-Eigenschaft der `@Page` Richtlinie.</span><span class="sxs-lookup"><span data-stu-id="e5056-149">The PreInit stage follows the Initialization stage, and it is here where we programmatically set the `Page` object's `MasterPageFile` property, thereby overwriting the value assigned from the `@Page` directive.</span></span> <span data-ttu-id="e5056-150">Da festlegt sind die `Page` des Objekts `MasterPageFile` Eigenschaft programmgesteuert, wir könnten Entfernen der `MasterPageFile` -Attribut aus der `@Page` -Anweisung ohne Auswirkungen auf die End-benutzererfahrung.</span><span class="sxs-lookup"><span data-stu-id="e5056-150">Because we are setting the `Page` object's `MasterPageFile` property programmatically, we could remove the `MasterPageFile` attribute from the `@Page` directive without affecting the end user's experience.</span></span> <span data-ttu-id="e5056-151">Um sich selbst davon überzeugen möchten, fahren Sie fort, und entfernen Sie die `MasterPageFile` -Attribut aus der `@Page` -Direktive in `Default.aspx` und besuchen Sie dann auf die Seite über einen Browser.</span><span class="sxs-lookup"><span data-stu-id="e5056-151">To convince yourself of this, go ahead and remove the `MasterPageFile` attribute from the `@Page` directive in `Default.aspx` and then visit the page through a browser.</span></span> <span data-ttu-id="e5056-152">Wie zu erwarten ist, ist die Ausgabe identisch, bevor Sie das Attribut entfernt wurde.</span><span class="sxs-lookup"><span data-stu-id="e5056-152">As you would expect, the output is the same as before the attribute was removed.</span></span>

<span data-ttu-id="e5056-153">Ob die `MasterPageFile` Eigenschaft wird festgelegt, über die `@Page` Richtlinie oder programmgesteuert an das Ende der Benutzeroberfläche nicht relevant ist.</span><span class="sxs-lookup"><span data-stu-id="e5056-153">Whether the `MasterPageFile` property is set via the `@Page` directive or programmatically is inconsequential to the end user's experience.</span></span> <span data-ttu-id="e5056-154">Allerdings die `MasterPageFile` -Attribut in der `@Page` Richtlinie wird von Visual Studio zur Entwurfszeit verwendet, um der WYSIWYG erzeugen Ansicht im Designer.</span><span class="sxs-lookup"><span data-stu-id="e5056-154">However, the `MasterPageFile` attribute in the `@Page` directive is used by Visual Studio during design-time to produce the WYSIWYG view in the Designer.</span></span> <span data-ttu-id="e5056-155">Wenn Sie zum zurückkehren `Default.aspx` in Visual Studio, und navigieren Sie in den Designer sehen Sie die Meldung "Fehler der Masterseite: Die Seite verfügt über Steuerelemente, eine Masterseite erfordern, aber kein Name angegeben"(siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="e5056-155">If you return to `Default.aspx` in Visual Studio and navigate to the Designer you'll see the message, "Master Page error: The page has controls that require a Master Page reference, but none is specified" (see Figure 2).</span></span>

<span data-ttu-id="e5056-156">Kurz gesagt, Sie behalten möchten die `MasterPageFile` -Attribut in der `@Page` Richtlinie, um eine umfassende während der Entwurfszeit-Funktionen in Visual Studio nutzen zu können.</span><span class="sxs-lookup"><span data-stu-id="e5056-156">In short, you need to leave the `MasterPageFile` attribute in the `@Page` directive to enjoy a rich design-time experience in Visual Studio.</span></span>


<span data-ttu-id="e5056-157">[![Visual Studio nutzt die @Page MasterPageFile-Attribut für die Richtlinie zum Rendern der Entwurfsansicht](specifying-the-master-page-programmatically-cs/_static/image5.png)](specifying-the-master-page-programmatically-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-157">[![Visual Studio Uses the @Page Directive's MasterPageFile Attribute to Render the Design View](specifying-the-master-page-programmatically-cs/_static/image5.png)](specifying-the-master-page-programmatically-cs/_static/image4.png)</span></span>

<span data-ttu-id="e5056-158">**Abbildung 02**: Visual Studio verwendet die `@Page` -Direktive `MasterPageFile` Attribut zum Rendern der Entwurfsansicht ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-158">**Figure 02**: Visual Studio Uses the `@Page` Directive's `MasterPageFile` Attribute to Render the Design View  ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image6.png))</span></span>


## <a name="step-3-creating-an-alternative-master-page"></a><span data-ttu-id="e5056-159">Schritt 3: Erstellen eine Alternative-Masterseite</span><span class="sxs-lookup"><span data-stu-id="e5056-159">Step 3: Creating an Alternative Master Page</span></span>

<span data-ttu-id="e5056-160">Da es sich bei einer Inhaltsseite Masterseite programmgesteuert zur Laufzeit festgelegt werden kann ist es möglich, eine bestimmte Masterseite, die externe kriterienbasierten dynamisch zu laden.</span><span class="sxs-lookup"><span data-stu-id="e5056-160">Because a content page's master page can be set programmatically at runtime it's possible to dynamically load a particular master page based on some external criteria.</span></span> <span data-ttu-id="e5056-161">Diese Funktionalität kann in Situationen nützlich sein, in dem der Website-Layout basierend auf den Benutzer variieren muss.</span><span class="sxs-lookup"><span data-stu-id="e5056-161">This functionality can be useful in situations where the site's layout needs to vary based on the user.</span></span> <span data-ttu-id="e5056-162">Z. B. können eine Blog-Engine-Webanwendung Benutzer wählen ein Layout für ihren Blog, wobei jedes Layout, die mit einer anderen Masterseite zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="e5056-162">For instance, a blog engine web application may allow its users to choose a layout for their blog, where each layout is associated with a different master page.</span></span> <span data-ttu-id="e5056-163">Zur Laufzeit beim ein Besucher eines Benutzers Blog anzeigen, wird müssten die Webanwendung bestimmen den Blog-Layout und die entsprechenden Masterseite dynamisch verknüpft wird, mit der Inhaltsseite.</span><span class="sxs-lookup"><span data-stu-id="e5056-163">At runtime, when a visitor is viewing a user's blog, the web application would need to determine the blog's layout and dynamically associate the corresponding master page with the content page.</span></span>

<span data-ttu-id="e5056-164">Betrachten wir eine Gestaltungsvorlage zur Laufzeit basierend auf einigen externen Kriterien dynamisch zu laden.</span><span class="sxs-lookup"><span data-stu-id="e5056-164">Let's examine how to dynamically load a master page at runtime based on some external criteria.</span></span> <span data-ttu-id="e5056-165">Unsere Website enthält derzeit nur eine Masterseite (`Site.master`).</span><span class="sxs-lookup"><span data-stu-id="e5056-165">Our website currently contains just one master page (`Site.master`).</span></span> <span data-ttu-id="e5056-166">Wir benötigen einen anderen Masterseite zur Veranschaulichung eine Gestaltungsvorlage zur Laufzeit auswählen.</span><span class="sxs-lookup"><span data-stu-id="e5056-166">We need another master page to illustrate choosing a master page at runtime.</span></span> <span data-ttu-id="e5056-167">Dieser Schritt im erstellen und konfigurieren die neue Masterseite Mittelpunkt.</span><span class="sxs-lookup"><span data-stu-id="e5056-167">This step focuses on creating and configuring the new master page.</span></span> <span data-ttu-id="e5056-168">Schritt 4 sucht bestimmt werden, welche Masterseite für die Verwendung zur Laufzeit.</span><span class="sxs-lookup"><span data-stu-id="e5056-168">Step 4 looks at determining what master page to use at runtime.</span></span>

<span data-ttu-id="e5056-169">Erstellen Sie eine neue Masterseite in den Stammordner, der mit dem Namen `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-169">Create a new master page in the root folder named `Alternate.master`.</span></span> <span data-ttu-id="e5056-170">Fügen Sie ein neues Stylesheet auch auf der Website mit dem Namen `AlternateStyles.css`.</span><span class="sxs-lookup"><span data-stu-id="e5056-170">Also add a new style sheet to the website named `AlternateStyles.css`.</span></span>


<span data-ttu-id="e5056-171">[![Fügen Sie ein weiteres Masterseite und CSS-Datei in der Website](specifying-the-master-page-programmatically-cs/_static/image8.png)](specifying-the-master-page-programmatically-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-171">[![Add Another Master Page and CSS File to the Website](specifying-the-master-page-programmatically-cs/_static/image8.png)](specifying-the-master-page-programmatically-cs/_static/image7.png)</span></span>

<span data-ttu-id="e5056-172">**Abbildung 03**: Fügen Sie auf der Website einer anderen Masterseite und CSS-Datei ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-172">**Figure 03**: Add Another Master Page and CSS File to the Website ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image9.png))</span></span>


<span data-ttu-id="e5056-173">Ich entwarf haben die `Alternate.master` Masterseite haben den Titel oben auf der Seite zentriert und auf einem dunkelblaue Hintergrund angezeigt.</span><span class="sxs-lookup"><span data-stu-id="e5056-173">I've designed the `Alternate.master` master page to have the title displayed at the top of the page, centered and on a navy background.</span></span> <span data-ttu-id="e5056-174">Ich habe Schiffsteil abgesehen von der linken Spalte und verschoben, dass der Inhalt unterhalb der `MainContent` ContentPlaceHolder-Steuerelement, das erstreckt sich jetzt die gesamte Breite der Seite über.</span><span class="sxs-lookup"><span data-stu-id="e5056-174">I've dispensed of the left column and moved that content beneath the `MainContent` ContentPlaceHolder control, which now spans the entire width of the page.</span></span> <span data-ttu-id="e5056-175">Darüber hinaus ich nixed die unsortierte Liste der Lektionen und ersetzt es durch eine horizontale Liste oben `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="e5056-175">Furthermore, I nixed the unordered Lessons list and replaced it with a horizontal list above `MainContent`.</span></span> <span data-ttu-id="e5056-176">Ich habe auch aktualisiert Schriftarten und Farben verwendet werden, von der Masterseite (und somit die Inhaltsseiten).</span><span class="sxs-lookup"><span data-stu-id="e5056-176">I also updated the fonts and colors used by the master page (and, by extension, its content pages).</span></span> <span data-ttu-id="e5056-177">Abbildung 4 zeigt `Default.aspx` bei Verwendung der `Alternate.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="e5056-177">Figure 4 shows `Default.aspx` when using the `Alternate.master` master page.</span></span>

> [!NOTE]
> <span data-ttu-id="e5056-178">ASP.NET bietet die Möglichkeit, definieren Sie *Designs*.</span><span class="sxs-lookup"><span data-stu-id="e5056-178">ASP.NET includes the ability to define *Themes*.</span></span> <span data-ttu-id="e5056-179">Ein Design ist eine Sammlung von Bildern, CSS-Dateien und Formatvorlagen bezogenen Web Control eigenschaftseinstellungen, die auf einer Seite zur Laufzeit angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="e5056-179">A Theme is a collection of images, CSS files, and style-related Web control property settings that can be applied to a page at runtime.</span></span> <span data-ttu-id="e5056-180">Designs sind die beste Wahl, wenn Ihre Website Layouts nur im angezeigten Bilder und durch ihre CSS-Regeln unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="e5056-180">Themes are the way to go if your site's layouts differ only in the images displayed and by their CSS rules.</span></span> <span data-ttu-id="e5056-181">Wenn die Layouts unterscheiden sich mehr erheblich an, wie die Verwendung von anderen Websteuerelemente oder müssen ein völlig anderes Layout, Sie separate Masterseiten verwenden müssen.</span><span class="sxs-lookup"><span data-stu-id="e5056-181">If the layouts differ more substantially, such as using different Web controls or having a radically different layout, then you will need to use separate master pages.</span></span> <span data-ttu-id="e5056-182">Prüfen Sie im Abschnitt Weitere nützliche Informationen am Ende dieses Tutorials für Weitere Informationen zu Designs.</span><span class="sxs-lookup"><span data-stu-id="e5056-182">Consult the Further Reading section at the end of this tutorial for more information on Themes.</span></span>


<span data-ttu-id="e5056-183">[![Unsere Inhaltsseiten können jetzt ein neues Aussehen und Verhalten verwenden.](specifying-the-master-page-programmatically-cs/_static/image11.png)](specifying-the-master-page-programmatically-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-183">[![Our Content Pages Can Now Use a New Look and Feel](specifying-the-master-page-programmatically-cs/_static/image11.png)](specifying-the-master-page-programmatically-cs/_static/image10.png)</span></span>

<span data-ttu-id="e5056-184">**Abbildung 04**: Unsere Inhaltsseiten können Sie jetzt ein neues Aussehen und Verhalten ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-184">**Figure 04**: Our Content Pages Can Now Use a New Look and Feel ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image12.png))</span></span>


<span data-ttu-id="e5056-185">Wenn die Master- und Inhaltsseiten Markup abgesichert werden, die `MasterPage` Klasse sicher, dass alle Inhalte-Steuerelement in der Seite Inhalt auf ein ContentPlaceHolder-Objekt in die Masterseite verweist.</span><span class="sxs-lookup"><span data-stu-id="e5056-185">When the master and content pages' markup are fused, the `MasterPage` class checks to ensure that every Content control in the content page references a ContentPlaceHolder in the master page.</span></span> <span data-ttu-id="e5056-186">Eine Ausnahme wird ausgelöst, wenn ein Inhaltssteuerelement, das eine nicht existierende ContentPlaceHolder verweist auf gefunden wird.</span><span class="sxs-lookup"><span data-stu-id="e5056-186">An exception is thrown if a Content control that references a non-existent ContentPlaceHolder is found.</span></span> <span data-ttu-id="e5056-187">Das heißt, es ist zwingend erforderlich, dass die Masterseite der Inhaltsseite zugewiesen wird, ein ContentPlaceHolder-Objekt für jedes haben Inhaltssteuerelement in der Seite Inhalt.</span><span class="sxs-lookup"><span data-stu-id="e5056-187">In other words, it is imperative that the master page being assigned to the content page have a ContentPlaceHolder for each Content control in the content page.</span></span>

<span data-ttu-id="e5056-188">Die `Site.master` Masterseite enthält vier ContentPlaceHolder-Steuerelemente:</span><span class="sxs-lookup"><span data-stu-id="e5056-188">The `Site.master` master page includes four ContentPlaceHolder controls:</span></span>

- `head`
- `MainContent`
- `QuickLoginUI`
- `LeftColumnContent`

<span data-ttu-id="e5056-189">Einige der Inhaltsseiten in unserer Website sind nur ein oder zwei ContentControl-Elemente: andere enthalten ein ContentControl-Element für jede der verfügbaren ContentPlaceHolder-Steuerelemente.</span><span class="sxs-lookup"><span data-stu-id="e5056-189">Some of the content pages in our website include just one or two Content controls; others include a Content control for each of the available ContentPlaceHolders.</span></span> <span data-ttu-id="e5056-190">Wenn unsere neue Masterseite (`Alternate.master`) kann diese Inhaltsseiten, die Inhaltssteuerelemente für alle von der ContentPlaceHolder-Steuerelemente in Werte zugewiesen werden `Site.master` ist es wichtig, `Alternate.master` auch enthalten die gleichen ContentPlaceHolder-Steuerelemente als `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-190">If our new master page (`Alternate.master`) may ever be assigned to those content pages that have Content controls for all of the ContentPlaceHolders in `Site.master` then it is essential that `Alternate.master` also include the same ContentPlaceHolder controls as `Site.master`.</span></span>

<span data-ttu-id="e5056-191">Zum Abrufen Ihrer `Alternate.master` Masterseite aussehen wie in Data Mining (siehe Abbildung 4) starten, indem Sie definieren die Masterseite Stile in die `AlternateStyles.css` Stylesheet.</span><span class="sxs-lookup"><span data-stu-id="e5056-191">To get your `Alternate.master` master page to look similar to mine (see Figure 4), start by defining the master page's styles in the `AlternateStyles.css` style sheet.</span></span> <span data-ttu-id="e5056-192">Fügen Sie die folgenden Regeln in `AlternateStyles.css`:</span><span class="sxs-lookup"><span data-stu-id="e5056-192">Add the following rules into `AlternateStyles.css`:</span></span>


[!code-css[Main](specifying-the-master-page-programmatically-cs/samples/sample5.css)]

<span data-ttu-id="e5056-193">Fügen Sie das folgende deklarative Markup zu `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-193">Next, add the following declarative markup to `Alternate.master`.</span></span> <span data-ttu-id="e5056-194">Wie Sie sehen können, `Alternate.master` enthält vier ContentPlaceHolder-Steuerelemente, mit dem gleichen `ID` Werte wie die ContentPlaceHolder-Steuerelemente in `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-194">As you can see, `Alternate.master` contains four ContentPlaceHolder controls with the same `ID` values as the ContentPlaceHolder controls in `Site.master`.</span></span> <span data-ttu-id="e5056-195">Außerdem enthält es ein ScriptManager-Steuerelement, der für die Seiten auf unserer Website erforderlich ist, die ASP.NET AJAX-Framework verwenden.</span><span class="sxs-lookup"><span data-stu-id="e5056-195">Moreover, it includes a ScriptManager control, which is necessary for those pages in our website that use the ASP.NET AJAX framework.</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample6.aspx)]

### <a name="testing-the-new-master-page"></a><span data-ttu-id="e5056-196">Testen der neuen Master-Seite</span><span class="sxs-lookup"><span data-stu-id="e5056-196">Testing the New Master Page</span></span>

<span data-ttu-id="e5056-197">Zum Testen von diesem neuen Updates für die Masterseite der `BasePage` -Klasse `OnPreInit` Methode, damit die `MasterPageFile` Eigenschaft wird der Wert zugewiesen "~ / Alternate.master", und klicken Sie dann die Website besuchen.</span><span class="sxs-lookup"><span data-stu-id="e5056-197">To test this new master page update the `BasePage` class's `OnPreInit` method so that the `MasterPageFile` property is assigned the value "~/Alternate.master" and then visit the website.</span></span> <span data-ttu-id="e5056-198">Jede Seite sollte ohne Fehler mit Ausnahme von zwei funktionieren: `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="e5056-198">Every page should function without error except for two: `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx`.</span></span> <span data-ttu-id="e5056-199">Hinzufügen eines Produkts zum DetailsView in `~/Admin/AddProduct.aspx` führt zu einer `NullReferenceException` aus der Zeile des Codes, der versucht, die Gestaltungsvorlage festgelegt `GridMessageText` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="e5056-199">Adding a product to the DetailsView in `~/Admin/AddProduct.aspx` results in a `NullReferenceException` from the line of code that attempts to set the master page's `GridMessageText` property.</span></span> <span data-ttu-id="e5056-200">Wenn das Unternehmen besuchen `~/Admin/Products.aspx` ein `InvalidCastException` wird beim Laden der Seite mit der folgenden Meldung ausgelöst: "Kann nicht wandelt ein Objekt vom Typ" ASP.alternate\_master "in den Typ" ASP.site\_master "."</span><span class="sxs-lookup"><span data-stu-id="e5056-200">When visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown on page load with the message: "Unable to cast object of type 'ASP.alternate\_master' to type 'ASP.site\_master'."</span></span>

<span data-ttu-id="e5056-201">Diese Fehler auftreten, da die `Site.master` Code-Behind-Klasse enthält öffentliche Ereignisse, Eigenschaften und Methoden, die nicht in definiert sind `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-201">These errors occur because the `Site.master` code-behind class includes public events, properties, and methods that are not defined in `Alternate.master`.</span></span> <span data-ttu-id="e5056-202">Der Teil von Markup für diese beiden Seiten haben eine `@MasterType` -Direktive, verweist der `Site.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="e5056-202">The markup portion of these two pages have a `@MasterType` directive that references the `Site.master` master page.</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample7.aspx)]

<span data-ttu-id="e5056-203">Darüber hinaus DetailsView `ItemInserted` -Ereignishandler in `~/Admin/AddProduct.aspx` enthält Code, der die lose typisierte wandelt `Page.Master` Eigenschaft, um ein Objekt des Typs `Site`.</span><span class="sxs-lookup"><span data-stu-id="e5056-203">Also, the DetailsView's `ItemInserted` event handler in `~/Admin/AddProduct.aspx` includes code that casts the loosely-typed `Page.Master` property to an object of type `Site`.</span></span> <span data-ttu-id="e5056-204">Die `@MasterType` -Direktive (auf diese Weise verwendet) und die Umwandlung in die `ItemInserted` Ereignishandler eng koppelt die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` auf Seiten der `Site.master` Masterseite.</span><span class="sxs-lookup"><span data-stu-id="e5056-204">The `@MasterType` directive (used this way) and the cast in the `ItemInserted` event handler tightly couples the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages to the `Site.master` master page.</span></span>

<span data-ttu-id="e5056-205">Diese enge Kopplung unterbrechen können `Site.master` und `Alternate.master` leiten Sie von einer gemeinsamen Basisklasse, die Definitionen für die öffentlichen Member enthält.</span><span class="sxs-lookup"><span data-stu-id="e5056-205">To break this tight coupling we can have `Site.master` and `Alternate.master` derive from a common base class that contains definitions for the public members.</span></span> <span data-ttu-id="e5056-206">Danach können wir aktualisieren den `@MasterType` Direktive, um diese allgemeinen Basistyp zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="e5056-206">Following that, we can update the `@MasterType` directive to reference this common base type.</span></span>

### <a name="creating-a-custom-base-master-page-class"></a><span data-ttu-id="e5056-207">Erstellen eine benutzerdefinierte Base Master-Page-Klasse</span><span class="sxs-lookup"><span data-stu-id="e5056-207">Creating a Custom Base Master Page Class</span></span>

<span data-ttu-id="e5056-208">Fügen Sie eine neue Klassendatei mit dem `App_Code` Ordner mit dem Namen `BaseMasterPage.cs` und abgeleitet `System.Web.UI.MasterPage`.</span><span class="sxs-lookup"><span data-stu-id="e5056-208">Add a new class file to the `App_Code` folder named `BaseMasterPage.cs` and have it derive from `System.Web.UI.MasterPage`.</span></span> <span data-ttu-id="e5056-209">Müssen wir definieren die `RefreshRecentProductsGrid` Methode und die `GridMessageText` -Eigenschaft in `BaseMasterPage`, aber wir können nicht einfach verschieben sie es aus `Site.master` , da diese Member mit Websteuerelementen arbeiten, die für spezifisch sind die `Site.master` Masterseite (die `RecentProducts` GridView und `GridMessage` Bezeichnung).</span><span class="sxs-lookup"><span data-stu-id="e5056-209">We need to define the `RefreshRecentProductsGrid` method and the `GridMessageText` property in `BaseMasterPage`, but we can't simply move them there from `Site.master` because these members work with Web controls that are specific to the `Site.master` master page (the `RecentProducts` GridView and `GridMessage` Label).</span></span>

<span data-ttu-id="e5056-210">Was wir tun müssen werden konfiguriert, `BaseMasterPage` so, dass diese Member werden es definiert, aber eigentlich, indem implementiert sind `BaseMasterPage`abgeleiteten Klassen (`Site.master` und `Alternate.master`).</span><span class="sxs-lookup"><span data-stu-id="e5056-210">What we need to do is configure `BaseMasterPage` in such a way that these members are defined there, but are actually implemented by `BaseMasterPage`'s derived classes (`Site.master` and `Alternate.master`).</span></span> <span data-ttu-id="e5056-211">Diese Art der Vererbung ist möglich, durch Markieren der Klasse und ihre Member als `abstract`.</span><span class="sxs-lookup"><span data-stu-id="e5056-211">This type of inheritance is possible by marking the class and its members as `abstract`.</span></span> <span data-ttu-id="e5056-212">Kurz gesagt: Hinzufügen der `abstract` kündigt von Schlüsselwort, um diese zwei Elemente, die `BaseMasterPage` wurde nicht implementiert `RefreshRecentProductsGrid` und `GridMessageText`, allerdings werden von abgeleiteten Klassen.</span><span class="sxs-lookup"><span data-stu-id="e5056-212">In short, adding the `abstract` keyword to these two members announces that `BaseMasterPage` hasn't implemented `RefreshRecentProductsGrid` and `GridMessageText`, but that its derived classes will.</span></span>

<span data-ttu-id="e5056-213">Wir müssen auch zum Definieren der `PricesDoubled` Ereignis in `BaseMasterPage` und bieten eine Möglichkeit, von den abgeleiteten Klassen zum Auslösen des Ereignisses.</span><span class="sxs-lookup"><span data-stu-id="e5056-213">We also need to define the `PricesDoubled` event in `BaseMasterPage` and provide a means by the derived classes to raise the event.</span></span> <span data-ttu-id="e5056-214">Das Muster, die in .NET Framework verwendet, um dieses Verhalten zu vereinfachen ist, erstellen ein öffentliches Ereignis in der Basisklasse aus, und fügen eine geschützte, `virtual` Methode mit dem Namen `OnEventName`.</span><span class="sxs-lookup"><span data-stu-id="e5056-214">The pattern used in the .NET Framework to facilitate this behavior is to create a public event in the base class and add a protected, `virtual` method named `OnEventName`.</span></span> <span data-ttu-id="e5056-215">Abgeleitete Klassen können anschließend rufen Sie diese Methode zum Auslösen des Ereignisses oder können überschrieben werden, um Code auszuführen, unmittelbar vor oder nach der das Ereignis ausgelöst wird.</span><span class="sxs-lookup"><span data-stu-id="e5056-215">Derived classes can then call this method to raise the event or can override it to execute code immediately before or after the event is raised.</span></span>

<span data-ttu-id="e5056-216">Aktualisieren Ihrer `BaseMasterPage` Klasse, sodass sie den folgenden Code enthält:</span><span class="sxs-lookup"><span data-stu-id="e5056-216">Update your `BaseMasterPage` class so that it contains the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample8.cs)]

<span data-ttu-id="e5056-217">Navigieren Sie anschließend auf die `Site.master` CodeBehind-Klasse und deren abgeleitet `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="e5056-217">Next, go to the `Site.master` code-behind class and have it derive from `BaseMasterPage`.</span></span> <span data-ttu-id="e5056-218">Da `BaseMasterPage` ist `abstract` müssen wir außer Kraft `abstract` Elemente hier in `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-218">Because `BaseMasterPage` is `abstract` we need to override those `abstract` members here in `Site.master`.</span></span> <span data-ttu-id="e5056-219">Hinzufügen der `override` Schlüsselwort, um die Methoden- und Eigenschaftendefinitionen.</span><span class="sxs-lookup"><span data-stu-id="e5056-219">Add the `override` keyword to the method and property definitions.</span></span> <span data-ttu-id="e5056-220">Außerdem aktualisieren Sie den Code, der auslöst, die `PricesDoubled` Ereignis in der `DoublePrice` Schaltfläche `Click` -Ereignishandler durch einen Aufruf der Basisklasse `OnPricesDoubled` Methode.</span><span class="sxs-lookup"><span data-stu-id="e5056-220">Also update the code that raises the `PricesDoubled` event in the `DoublePrice` Button's `Click` event handler with a call to the base class's `OnPricesDoubled` method.</span></span>

<span data-ttu-id="e5056-221">Nachdem diese Änderungen die `Site.master` Code-Behind-Klasse sollte den folgenden Code enthalten:</span><span class="sxs-lookup"><span data-stu-id="e5056-221">After these modifications the `Site.master` code-behind class should contain the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample9.cs)]

<span data-ttu-id="e5056-222">Wir müssen auch aktualisieren `Alternate.master`des Code-Behind-Klasse für die Ableitung `BaseMasterPage` und überschreiben Sie die beiden `abstract` Member.</span><span class="sxs-lookup"><span data-stu-id="e5056-222">We also need to update `Alternate.master`'s code-behind class to derive from `BaseMasterPage` and override the two `abstract` members.</span></span> <span data-ttu-id="e5056-223">Aber da `Alternate.master` enthält keiner GridView-Ansicht, dass Listen, die die neuesten Produkte noch eine Bezeichnung, die eine Meldung, nachdem ein neues Produkt angezeigt in der Datenbank hinzugefügt wird, diese Methoden nicht nichts weiter tun müssen.</span><span class="sxs-lookup"><span data-stu-id="e5056-223">But because `Alternate.master` does not contain a GridView that lists the most recent products nor a Label that displays a message after a new product is added to the database, these methods do not need to do anything.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample10.cs)]

### <a name="referencing-the-base-master-page-class"></a><span data-ttu-id="e5056-224">Verweisen Sie auf der Basis-Master-Page-Klasse</span><span class="sxs-lookup"><span data-stu-id="e5056-224">Referencing the Base Master Page Class</span></span>

<span data-ttu-id="e5056-225">Nun, wir haben die `BaseMasterPage` Klasse und unsere zwei Masterseiten erweitern, der letzte Schritt ist zum Aktualisieren der `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten, um auf diesen gemeinsamen Typ zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="e5056-225">Now that we have completed the `BaseMasterPage` class and have our two master pages extending it, our final step is to update the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages to refer to this common type.</span></span> <span data-ttu-id="e5056-226">Ändern Sie zunächst die `@MasterType` -Direktive auf beiden Seiten aus:</span><span class="sxs-lookup"><span data-stu-id="e5056-226">Start by changing the `@MasterType` directive in both pages from:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample11.aspx)]

<span data-ttu-id="e5056-227">Nach:</span><span class="sxs-lookup"><span data-stu-id="e5056-227">To:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample12.aspx)]

<span data-ttu-id="e5056-228">Anstatt das Verweisen auf einen Dateipfad der `@MasterType` Eigenschaft verweist jetzt auf den Basistyp (`BaseMasterPage`).</span><span class="sxs-lookup"><span data-stu-id="e5056-228">Rather than referencing a file path, the `@MasterType` property now references the base type (`BaseMasterPage`).</span></span> <span data-ttu-id="e5056-229">Daher die stark typisierte `Master` -Eigenschaft, die in beide Seiten einer CodeBehind-Klassen verwendet, ist jetzt vom Typ `BaseMasterPage` (anstelle des Typs `Site`).</span><span class="sxs-lookup"><span data-stu-id="e5056-229">Consequently, the strongly-typed `Master` property used in both pages' code-behind classes is now of type `BaseMasterPage` (instead of type `Site`).</span></span> <span data-ttu-id="e5056-230">Durch diese Änderung an Stelle noch einmal `~/Admin/Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="e5056-230">With this change in place revisit `~/Admin/Products.aspx`.</span></span> <span data-ttu-id="e5056-231">Zuvor, Dies führte zu einem Fehler umwandeln, da die Seite für die Verwendung konfiguriert ist die `Alternate.master` Masterseite, aber die `@MasterType` Richtlinie, die auf die verwiesen wird die `Site.master` Datei.</span><span class="sxs-lookup"><span data-stu-id="e5056-231">Previously, this resulted in a casting error because the page is configured to use the `Alternate.master` master page, but the `@MasterType` directive referenced the `Site.master` file.</span></span> <span data-ttu-id="e5056-232">Aber jetzt die Seite ohne Fehler gerendert.</span><span class="sxs-lookup"><span data-stu-id="e5056-232">But now the page renders without error.</span></span> <span data-ttu-id="e5056-233">Grund hierfür ist die `Alternate.master` Masterseite umgewandelt werden kann, um ein Objekt des Typs `BaseMasterPage` (da es erweitert).</span><span class="sxs-lookup"><span data-stu-id="e5056-233">This is because the `Alternate.master` master page can be cast to an object of type `BaseMasterPage` (since it extends it).</span></span>

<span data-ttu-id="e5056-234">Es ist eine kleine Änderung, die vorgenommen werden muss `~/Admin/AddProduct.aspx`.</span><span class="sxs-lookup"><span data-stu-id="e5056-234">There's one small change that needs to be made in `~/Admin/AddProduct.aspx`.</span></span> <span data-ttu-id="e5056-235">Des DetailsView-Steuerelements `ItemInserted` -Ereignishandler wird sowohl die stark typisierte `Master` Eigenschaft und die lose typisierte `Page.Master` Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="e5056-235">The DetailsView control's `ItemInserted` event handler uses both the strongly-typed `Master` property and the loosely-typed `Page.Master` property.</span></span> <span data-ttu-id="e5056-236">Wir haben den stark typisierten Verweis behoben, wenn wir aktualisiert die `@MasterType` Richtlinie, aber wir benötigen den lose typisierten Verweis aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e5056-236">We fixed the strongly-typed reference when we updated the `@MasterType` directive, but we still need to update the loosely-typed reference.</span></span> <span data-ttu-id="e5056-237">Ersetzen Sie die folgende Codezeile ein:</span><span class="sxs-lookup"><span data-stu-id="e5056-237">Replace the following line of code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample13.cs)]

<span data-ttu-id="e5056-238">Durch Folgendes, wandelt die `Page.Master` , die dem Basistyp entspricht:</span><span class="sxs-lookup"><span data-stu-id="e5056-238">With the following, which casts `Page.Master` to the base type:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample14.cs)]

## <a name="step-4-determining-what-master-page-to-bind-to-the-content-pages"></a><span data-ttu-id="e5056-239">Schritt 4: Welche Masterseite an das Bindung hergestellt, auf die Inhaltsseiten ermitteln</span><span class="sxs-lookup"><span data-stu-id="e5056-239">Step 4: Determining What Master Page to Bind to the Content Pages</span></span>

<span data-ttu-id="e5056-240">Unsere `BasePage` -Klasse legt derzeit alle Inhaltsseiten `MasterPageFile` Eigenschaften, die einen hartcodierten Wert in der PreInit-Phase des Lebenszyklus der Seite.</span><span class="sxs-lookup"><span data-stu-id="e5056-240">Our `BasePage` class currently sets all content pages' `MasterPageFile` properties to a hard-coded value in the PreInit stage of the page lifecycle.</span></span> <span data-ttu-id="e5056-241">Wir können diesen Code, um die Masterseite als Grundlage für einige externe Faktor aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e5056-241">We can update this code to base the master page on some external factor.</span></span> <span data-ttu-id="e5056-242">Die Masterseite laden hängt möglicherweise die Einstellungen des aktuell angemeldeten Benutzers.</span><span class="sxs-lookup"><span data-stu-id="e5056-242">Perhaps the master page to load depends on the preferences of the currently logged on user.</span></span> <span data-ttu-id="e5056-243">In diesem Fall müssten wir Code schreiben, der `OnPreInit` -Methode in der `BasePage` sucht, die derzeit das Besuchen Masterseite benutzereinstellungen.</span><span class="sxs-lookup"><span data-stu-id="e5056-243">In that case, we'd need to write code in the `OnPreInit` method in `BasePage` that looks up the currently visiting user's master page preferences.</span></span>

<span data-ttu-id="e5056-244">Erstellen Sie eine Webseite, die dem Benutzer ermöglicht, wählen Sie die Masterseite zu verwenden – wir `Site.master` oder `Alternate.master` –, und speichern Sie diese Option in einer Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="e5056-244">Let's create a web page that allows the user to choose which master page to use - `Site.master` or `Alternate.master` - and save this choice in a Session variable.</span></span> <span data-ttu-id="e5056-245">Zunächst erstellen Sie eine neue Webseite in das Stammverzeichnis, das mit dem Namen `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="e5056-245">Start by creating a new web page in the root directory named `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="e5056-246">Beim Erstellen von dieser Seite (oder jeder anderen Inhaltsseiten ab sofort) müssen Sie nicht auf eine Gestaltungsvorlage gebunden werden, da die Masterseite programmgesteuert, in festgelegt wird `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="e5056-246">When creating this page (or any other content pages henceforth) you don't need to bind it to a master page because the master page is set programmatically in `BasePage`.</span></span> <span data-ttu-id="e5056-247">Wenn Sie keine neue Seite auf eine Gestaltungsvorlage Bindung durchführen enthält jedoch dann deklarativen Markup für die neue Seite standardmäßig ein Webformular und anderen Inhalten, die von der Masterseite angegeben.</span><span class="sxs-lookup"><span data-stu-id="e5056-247">However, if you do not bind the new page to a master page then the new page's default declarative markup contains a Web Form and other content supplied by the master page.</span></span> <span data-ttu-id="e5056-248">Sie müssen dieses Markup manuell mit den entsprechenden Inhaltssteuerelementen zu ersetzen.</span><span class="sxs-lookup"><span data-stu-id="e5056-248">You'll need to manually replace this markup with the appropriate Content controls.</span></span> <span data-ttu-id="e5056-249">Aus diesem Grund finde ich es einfacher, die neue Seite mit ASP.NET auf eine Gestaltungsvorlage zu binden.</span><span class="sxs-lookup"><span data-stu-id="e5056-249">For that reason, I find it easier to bind the new ASP.NET page to a master page.</span></span>

> [!NOTE]
> <span data-ttu-id="e5056-250">Da `Site.master` und `Alternate.master` haben den gleichen Satz ContentPlaceHolder-Steuerelemente es spielt keine welche Masterseite Rolle Sie auswählen, wenn die neue Seite zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="e5056-250">Because `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls it doesn't matter what master page you choose when creating the new content page.</span></span> <span data-ttu-id="e5056-251">Aus Gründen der Konsistenz würde ich empfehlen, mit `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-251">For consistency, I'd suggest using `Site.master`.</span></span>


<span data-ttu-id="e5056-252">[![Fügen Sie auf der Website eine neue Seite hinzu](specifying-the-master-page-programmatically-cs/_static/image14.png)](specifying-the-master-page-programmatically-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-252">[![Add a New Content Page to the Website](specifying-the-master-page-programmatically-cs/_static/image14.png)](specifying-the-master-page-programmatically-cs/_static/image13.png)</span></span>

<span data-ttu-id="e5056-253">**Abbildung 05**: Fügen Sie auf der Website eine neue Seite hinzu ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-253">**Figure 05**: Add a New Content Page to the Website ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image15.png))</span></span>


<span data-ttu-id="e5056-254">Update der `Web.sitemap` hinzu, um einen Eintrag in dieser Lektion einzubeziehen.</span><span class="sxs-lookup"><span data-stu-id="e5056-254">Update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="e5056-255">Fügen Sie das folgende Markup unterhalb der `<siteMapNode>` für die Masterseiten und ASP.NET AJAX-Lektion:</span><span class="sxs-lookup"><span data-stu-id="e5056-255">Add the following markup beneath the `<siteMapNode>` for the Master Pages and ASP.NET AJAX lesson:</span></span>


[!code-xml[Main](specifying-the-master-page-programmatically-cs/samples/sample15.xml)]

<span data-ttu-id="e5056-256">Vor dem Hinzufügen von Inhalt, der `ChooseMasterPage.aspx` Seite können Sie die CodeBehind-Klasse der Seite zu aktualisieren, sodass es abgeleitet `BasePage` (statt `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="e5056-256">Before adding any content to the `ChooseMasterPage.aspx` page take a moment to update the page's code-behind class so that it derives from `BasePage` (rather than `System.Web.UI.Page`).</span></span> <span data-ttu-id="e5056-257">Als Nächstes fügen Sie einem DropDownList-Steuerelement auf der Seite hinzu, legen Sie dessen `ID` Eigenschaft `MasterPageChoice`, und fügen Sie zwei ListItems mit der `Text` Werte von "~ / Site.master" und "~ / Alternate.master".</span><span class="sxs-lookup"><span data-stu-id="e5056-257">Next, add a DropDownList control to the page, set its `ID` property to `MasterPageChoice`, and add two ListItems with the `Text` values of "~/Site.master" and "~/Alternate.master".</span></span>

<span data-ttu-id="e5056-258">Fügen Sie ein Steuerelement Schaltfläche auf der Seite, und legen Sie dessen `ID` und `Text` Eigenschaften `SaveLayout` und "Layout-Auswahl speichern", bzw.</span><span class="sxs-lookup"><span data-stu-id="e5056-258">Add a Button Web control to the page and set its `ID` and `Text` properties to `SaveLayout` and "Save Layout Choice", respectively.</span></span> <span data-ttu-id="e5056-259">An diesem Punkt sollte deklaratives Markup Ihrer Seite etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="e5056-259">At this point your page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample16.aspx)]

<span data-ttu-id="e5056-260">Wenn Sie zuerst die Seite besucht wird müssen wir die Auswahl des Benutzers aktuell ausgewählten Masterseite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="e5056-260">When the page is first visited we need to display the user's currently selected master page choice.</span></span> <span data-ttu-id="e5056-261">Erstellen Sie eine `Page_Load` -Ereignishandler, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="e5056-261">Create a `Page_Load` event handler and add the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample17.cs)]

<span data-ttu-id="e5056-262">Der obige Code führt nur auf den ersten Besuch der Seite (und nicht bei nachfolgenden Postbacks).</span><span class="sxs-lookup"><span data-stu-id="e5056-262">The above code executes only on the first page visit (and not on subsequent postbacks).</span></span> <span data-ttu-id="e5056-263">Es zuerst überprüft, wenn die Sitzungsvariable `MyMasterPage` vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="e5056-263">It first checks to see if the Session variable `MyMasterPage` exists.</span></span> <span data-ttu-id="e5056-264">Wenn dies der Fall ist, versucht wird, finden Sie in das entsprechende ListItem der `MasterPageChoice` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="e5056-264">If it does, it attempts to find the matching ListItem in the `MasterPageChoice` DropDownList.</span></span> <span data-ttu-id="e5056-265">Wenn eine übereinstimmende ListItem gefunden wird, dessen `Selected` -Eigenschaftensatz auf `true`.</span><span class="sxs-lookup"><span data-stu-id="e5056-265">If a matching ListItem is found, its `Selected` property is set to `true`.</span></span>

<span data-ttu-id="e5056-266">Wir benötigen außerdem Code, der die Auswahl des Benutzers in speichert die `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="e5056-266">We also need code that saves the user's choice into the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="e5056-267">Erstellen Sie einen Ereignishandler für die `SaveLayout` Schaltfläche `Click` Ereignis und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="e5056-267">Create an event handler for the `SaveLayout` Button's `Click` event and add the following code:</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample18.cs)]

> [!NOTE]
> <span data-ttu-id="e5056-268">Mit der Zeit die `Click` Ereignishandler beim Postback ausführt, wird die Masterseite wurde bereits ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="e5056-268">By the time the `Click` event handler executes on postback, the master page has already been selected.</span></span> <span data-ttu-id="e5056-269">Aus diesem Grund nicht die Auswahl des Benutzers Dropdown-Listenfeld in Kraft, bis die nächste Seite finden Sie unter.</span><span class="sxs-lookup"><span data-stu-id="e5056-269">Therefore, the user's drop-down list selection won't be in effect until the next page visit.</span></span> <span data-ttu-id="e5056-270">Die `Response.Redirect` erzwingt, dass den Browser erneut anfordern `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="e5056-270">The `Response.Redirect` forces the browser to re-request `ChooseMasterPage.aspx`.</span></span>


<span data-ttu-id="e5056-271">Mit der `ChooseMasterPage.aspx` Seite vollständige unsere letzte Aufgabe ist, damit `BasePage` weisen die `MasterPageFile` -Eigenschaft basierend auf den Wert des der `MyMasterPage` Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="e5056-271">With the `ChooseMasterPage.aspx` page complete, our final task is to have `BasePage` assign the `MasterPageFile` property based on the value of the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="e5056-272">Wenn die Sitzung-Variable nicht festgelegt ist, haben `BasePage` standardmäßig `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="e5056-272">If the Session variable is not set have `BasePage` default to `Site.master`.</span></span>


[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample19.cs)]

> [!NOTE]
> <span data-ttu-id="e5056-273">Ich habe den Code, der weist verschoben der `Page` des Objekts `MasterPageFile` Eigenschaft von der `OnPreInit` -Ereignishandler und in zwei separate Methoden.</span><span class="sxs-lookup"><span data-stu-id="e5056-273">I moved the code that assigns the `Page` object's `MasterPageFile` property out of the `OnPreInit` event handler and into two separate methods.</span></span> <span data-ttu-id="e5056-274">Dieser erste Methode `SetMasterPageFile`, weist der `MasterPageFile` Eigenschaft, um den Rückgabewert von der zweiten Methode `GetMasterPageFileFromSession`.</span><span class="sxs-lookup"><span data-stu-id="e5056-274">This first method, `SetMasterPageFile`, assigns the `MasterPageFile` property to the value returned by the second method, `GetMasterPageFileFromSession`.</span></span> <span data-ttu-id="e5056-275">Mir die `SetMasterPageFile` Methode `virtual` , damit zukünftige Klassen erweitern `BasePage` kann optional außer Kraft setzen, um die benutzerdefinierte Logik implementieren, falls erforderlich.</span><span class="sxs-lookup"><span data-stu-id="e5056-275">I made the `SetMasterPageFile` method `virtual` so that future classes that extend `BasePage` can optionally override it to implement custom logic, if needed.</span></span> <span data-ttu-id="e5056-276">Wir sehen uns ein Beispiel zum Überschreiben `BasePage`des `SetMasterPageFile` Eigenschaft im nächsten Tutorial.</span><span class="sxs-lookup"><span data-stu-id="e5056-276">We'll see an example of overriding `BasePage`'s `SetMasterPageFile` property in the next tutorial.</span></span>


<span data-ttu-id="e5056-277">Mit diesem Code werden, finden Sie auf die `ChooseMasterPage.aspx` Seite.</span><span class="sxs-lookup"><span data-stu-id="e5056-277">With this code in place, visit the `ChooseMasterPage.aspx` page.</span></span> <span data-ttu-id="e5056-278">Zunächst die `Site.master` master Seite ausgewählt ist (siehe Abbildung 6), aber der Benutzer kann eine andere Masterseite aus der Dropdown-Liste auswählen.</span><span class="sxs-lookup"><span data-stu-id="e5056-278">Initially, the `Site.master` master page is selected (see Figure 6), but the user can pick a different master page from the drop-down list.</span></span>


<span data-ttu-id="e5056-279">[![Inhaltsseiten werden mithilfe der Site.master-Masterseite angezeigt.](specifying-the-master-page-programmatically-cs/_static/image17.png)](specifying-the-master-page-programmatically-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-279">[![Content Pages are Displayed Using the Site.master Master Page](specifying-the-master-page-programmatically-cs/_static/image17.png)](specifying-the-master-page-programmatically-cs/_static/image16.png)</span></span>

<span data-ttu-id="e5056-280">**Abbildung 06**: Inhalt Seiten werden angezeigt, unter Verwendung der `Site.master` Masterseite ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-280">**Figure 06**: Content Pages are Displayed Using the `Site.master` Master Page ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image18.png))</span></span>


<span data-ttu-id="e5056-281">[![Inhaltsseiten werden mithilfe der Alternate.master Masterseite jetzt angezeigt.](specifying-the-master-page-programmatically-cs/_static/image20.png)](specifying-the-master-page-programmatically-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="e5056-281">[![Content Pages are Now Displayed Using the Alternate.master Master Page](specifying-the-master-page-programmatically-cs/_static/image20.png)](specifying-the-master-page-programmatically-cs/_static/image19.png)</span></span>

<span data-ttu-id="e5056-282">**Abbildung 07**: Content-Seiten sind jetzt angezeigt, unter Verwendung der `Alternate.master` Masterseite ([klicken Sie, um das Bild in voller Größe anzeigen](specifying-the-master-page-programmatically-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="e5056-282">**Figure 07**: Content Pages are Now Displayed Using the `Alternate.master` Master Page ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image21.png))</span></span>


## <a name="summary"></a><span data-ttu-id="e5056-283">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="e5056-283">Summary</span></span>

<span data-ttu-id="e5056-284">Wenn eine Inhaltsseite aufgerufen wird, werden die Inhaltssteuerelemente mit der Masterseite ContentPlaceHolder-Steuerelemente mit Sicherung.</span><span class="sxs-lookup"><span data-stu-id="e5056-284">When a content page is visited, its Content controls are fused with its master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="e5056-285">Masterseite der Inhaltsseite ist gekennzeichnet durch die `Page` Klasse `MasterPageFile` -Eigenschaft, die zugewiesen ist die `@Page` -Direktive `MasterPageFile` Attribut während der Initialisierungsphase.</span><span class="sxs-lookup"><span data-stu-id="e5056-285">The content page's master page is denoted by the `Page` class's `MasterPageFile` property, which is assigned to the `@Page` directive's `MasterPageFile` attribute during the Initialization stage.</span></span> <span data-ttu-id="e5056-286">Wie in diesem Tutorial wurde gezeigt, können wir einen Wert zuweisen der `MasterPageFile` Eigenschaft solange wir dazu vor dem Ende der PreInit-Phase.</span><span class="sxs-lookup"><span data-stu-id="e5056-286">As this tutorial showed, we can assign a value to the `MasterPageFile` property as long as we do so before the end of the PreInit stage.</span></span> <span data-ttu-id="e5056-287">Können programmgesteuert auf die Masterseite angegeben wird, öffnet die Tür für einige erweiterte Szenarien, z. B. Dynamisches Binden von einer Inhaltsseite auf eine Gestaltungsvorlage basierend auf externen Faktoren.</span><span class="sxs-lookup"><span data-stu-id="e5056-287">Being able to programmatically specify the master page opens the door for more advanced scenarios, such as dynamically binding a content page to a master page based on external factors.</span></span>

<span data-ttu-id="e5056-288">Viel Spaß beim Programmieren!</span><span class="sxs-lookup"><span data-stu-id="e5056-288">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="e5056-289">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="e5056-289">Further Reading</span></span>

<span data-ttu-id="e5056-290">Weitere Informationen zu den Themen in diesem Tutorial erläutert finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="e5056-290">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="e5056-291">Lebenszyklusdiagramm für ASP.NET die Seite</span><span class="sxs-lookup"><span data-stu-id="e5056-291">ASP.NET Page Lifecycle Diagram</span></span>](http://emanish.googlepages.com/Asp.Net2.0Lifecycle.PNG)
- [<span data-ttu-id="e5056-292">Übersicht über ASP.NET Seite-Lebenszyklus</span><span class="sxs-lookup"><span data-stu-id="e5056-292">ASP.NET Page Lifecycle Overview</span></span>](https://msdn.microsoft.com/library/ms178472.aspx)
- [<span data-ttu-id="e5056-293">ASP.NET-Designs und Skins (Übersicht)</span><span class="sxs-lookup"><span data-stu-id="e5056-293">ASP.NET Themes and Skins Overview</span></span>](https://msdn.microsoft.com/library/ykzx33wh.aspx)
- [<span data-ttu-id="e5056-294">Masterseiten: Tipps, Tricks und fallen</span><span class="sxs-lookup"><span data-stu-id="e5056-294">Master Pages: Tips, Tricks, and Traps</span></span>](http://www.odetocode.com/articles/450.aspx)
- [<span data-ttu-id="e5056-295">Designs in ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e5056-295">Themes in ASP.NET</span></span>](http://www.odetocode.com/articles/423.aspx)

### <a name="about-the-author"></a><span data-ttu-id="e5056-296">Der Autor</span><span class="sxs-lookup"><span data-stu-id="e5056-296">About the Author</span></span>

<span data-ttu-id="e5056-297">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor mehrerer Büchern zu ASP/ASP.NET und Gründer von 4GuysFromRolla.com, arbeitet mit Microsoft-Web-Technologien seit 1998.</span><span class="sxs-lookup"><span data-stu-id="e5056-297">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="e5056-298">Er ist als ein unabhängiger Berater, Schulungsleiter und Autor.</span><span class="sxs-lookup"><span data-stu-id="e5056-298">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="e5056-299">Sein neuestes Buch heißt [ *Sams Teach selbst ASP.NET 3.5 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="e5056-299">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="e5056-300">Scott erreicht werden kann, zur [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="e5056-300">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="e5056-301">Besonderen Dank an</span><span class="sxs-lookup"><span data-stu-id="e5056-301">Special Thanks To</span></span>

<span data-ttu-id="e5056-302">Diese tutorialreihe wurde durch viele hilfreiche Reviewer überprüft.</span><span class="sxs-lookup"><span data-stu-id="e5056-302">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="e5056-303">Führendes Prüfer für dieses Tutorial wurde Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="e5056-303">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="e5056-304">Meine zukünftigen MSDN-Artikeln überprüfen möchten?</span><span class="sxs-lookup"><span data-stu-id="e5056-304">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="e5056-305">Wenn dies der Fall ist, löschen Sie mir eine Linie an [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="e5056-305">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e5056-306">[Zurück](master-pages-and-asp-net-ajax-cs.md)
> [Weiter](nested-master-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e5056-306">[Previous](master-pages-and-asp-net-ajax-cs.md)
[Next](nested-master-pages-cs.md)</span></span>
