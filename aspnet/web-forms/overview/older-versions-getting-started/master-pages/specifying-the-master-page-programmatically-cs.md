---
uid: web-forms/overview/older-versions-getting-started/master-pages/specifying-the-master-page-programmatically-cs
title: Programm gesteuertes angeben der Master SeiteC#() | Microsoft-Dokumentation
author: rick-anderson
description: Prüft, wie die Master Seite der Inhaltsseite Programm gesteuert über den PreInit-Ereignishandler festgelegt wird.
ms.author: riande
ms.date: 07/28/2008
ms.assetid: 7c4a3445-2440-4aee-b9fd-779c05e6abb2
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/specifying-the-master-page-programmatically-cs
msc.type: authoredcontent
ms.openlocfilehash: 0db23ea05ba001c2bf9fc5330a60a767caa568a0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78507417"
---
# <a name="specifying-the-master-page-programmatically-c"></a><span data-ttu-id="b1621-103">Programmgesteuertes Festlegen der Masterseite (C#)</span><span class="sxs-lookup"><span data-stu-id="b1621-103">Specifying the Master Page Programmatically (C#)</span></span>

<span data-ttu-id="b1621-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b1621-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b1621-105">[Code herunterladen](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.zip) oder [PDF herunterladen](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="b1621-105">[Download Code](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.zip) or [Download PDF](https://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_09_CS.pdf)</span></span>

> <span data-ttu-id="b1621-106">Prüft, wie die Master Seite der Inhaltsseite Programm gesteuert über den PreInit-Ereignishandler festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-106">Looks at setting the content page's master page programmatically via the PreInit event handler.</span></span>

## <a name="introduction"></a><span data-ttu-id="b1621-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="b1621-107">Introduction</span></span>

<span data-ttu-id="b1621-108">Seit dem ersten Beispiel zum [*Erstellen eines Website weiten Layouts mit Master Seiten*](creating-a-site-wide-layout-using-master-pages-cs.md)haben alle Inhaltsseiten deklarativ über das `MasterPageFile`-Attribut in der `@Page`-Direktive auf Ihre Master Seite verwiesen.</span><span class="sxs-lookup"><span data-stu-id="b1621-108">Since the inaugural example in [*Creating a Site-Wide Layout Using Master Pages*](creating-a-site-wide-layout-using-master-pages-cs.md), all content pages have referenced their master page declaratively via the `MasterPageFile` attribute in the `@Page` directive.</span></span> <span data-ttu-id="b1621-109">Beispielsweise wird die Inhaltsseite mit der folgenden `@Page`-Direktive mit der Master Seite `Site.master`verknüpft:</span><span class="sxs-lookup"><span data-stu-id="b1621-109">For example, the following `@Page` directive links the content page to the master page `Site.master`:</span></span>

[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample1.aspx)]

<span data-ttu-id="b1621-110">Die [`Page`-Klasse](https://msdn.microsoft.com/library/system.web.ui.page.aspx) im `System.Web.UI`-Namespace enthält eine [`MasterPageFile`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.page.masterpagefile.aspx) , die den Pfad zur Master Seite der Inhaltsseite zurückgibt. Es handelt sich um diese Eigenschaft, die von der `@Page`-Direktive festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-110">The [`Page` class](https://msdn.microsoft.com/library/system.web.ui.page.aspx) in the `System.Web.UI` namespace includes a [`MasterPageFile` property](https://msdn.microsoft.com/library/system.web.ui.page.masterpagefile.aspx) that returns the path to the content page's master page; it is this property that is set by the `@Page` directive.</span></span> <span data-ttu-id="b1621-111">Diese Eigenschaft kann auch verwendet werden, um die Master Seite der Inhaltsseite Programm gesteuert anzugeben.</span><span class="sxs-lookup"><span data-stu-id="b1621-111">This property can also be used to programmatically specify the content page's master page.</span></span> <span data-ttu-id="b1621-112">Diese Vorgehensweise ist nützlich, wenn Sie die Master Seite auf der Grundlage externer Faktoren dynamisch zuweisen möchten, z. b. durch den Benutzer, der die Seite besucht.</span><span class="sxs-lookup"><span data-stu-id="b1621-112">This approach is useful if you want to dynamically assign the master page based on external factors, such as the user visiting the page.</span></span>

<span data-ttu-id="b1621-113">In diesem Tutorial fügen wir unserer Website eine zweite Master Seite hinzu und entscheiden dynamisch, welche Master Seite zur Laufzeit verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="b1621-113">In this tutorial we add a second master page to our website and dynamically decide which master page to use at runtime.</span></span>

## <a name="step-1-a-look-at-the-page-lifecycle"></a><span data-ttu-id="b1621-114">Schritt 1: sehen Sie sich den Seiten Lebenszyklus an</span><span class="sxs-lookup"><span data-stu-id="b1621-114">Step 1: A Look at the Page Lifecycle</span></span>

<span data-ttu-id="b1621-115">Wenn eine Anforderung auf dem Webserver für eine ASP.NET-Seite eingeht, bei der es sich um eine Inhaltsseite handelt, muss die ASP.net-Engine die Inhalts Steuerelemente der Seite in den entsprechenden contentplachalter-Steuerelementen der Master Seite vereinen.</span><span class="sxs-lookup"><span data-stu-id="b1621-115">Whenever a request arrives at the web server for an ASP.NET page that is a content page, the ASP.NET engine must fuse the page's Content controls into the master page's corresponding ContentPlaceHolder controls.</span></span> <span data-ttu-id="b1621-116">Diese Fusion erstellt eine einzelne Steuerelement Hierarchie, die dann den typischen Lebenszyklus der Seite durchlaufen kann.</span><span class="sxs-lookup"><span data-stu-id="b1621-116">This fusion creates a single control hierarchy that can then proceed through the typical page lifecycle.</span></span>

<span data-ttu-id="b1621-117">In Abbildung 1 wird diese Fusion veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="b1621-117">Figure 1 illustrates this fusion.</span></span> <span data-ttu-id="b1621-118">Schritt 1 in Abbildung 1 zeigt die anfänglichen Inhalts-und Masterseiten-Steuerelement Hierarchien.</span><span class="sxs-lookup"><span data-stu-id="b1621-118">Step 1 in Figure 1 shows the initial content and master page control hierarchies.</span></span> <span data-ttu-id="b1621-119">Am Ende der PreInit-Phase werden die Inhalts Steuerelemente auf der Seite den entsprechenden Content-Platzhaltern auf der Master Seite hinzugefügt (Schritt 2).</span><span class="sxs-lookup"><span data-stu-id="b1621-119">At the tail end of the PreInit stage the Content controls in the page are added to the corresponding ContentPlaceHolders in the master page (Step 2).</span></span> <span data-ttu-id="b1621-120">Nach dieser Fusion fungiert die Master Seite als Stamm der Hierarchie mit der zugrunde zierten Steuerelement.</span><span class="sxs-lookup"><span data-stu-id="b1621-120">After this fusion, the master page serves as the root of the fused control hierarchy.</span></span> <span data-ttu-id="b1621-121">Diese hierarchienhierarchie wird dann der Seite hinzugefügt, um die fertige Steuerelement Hierarchie zu schaffen (Schritt 3).</span><span class="sxs-lookup"><span data-stu-id="b1621-121">This fused control hierarchy is then added to the page to produce the finalized control hierarchy (Step 3).</span></span> <span data-ttu-id="b1621-122">Das Ergebnis ist, dass die Steuerelement Hierarchie der Seite die Hierarchie der geschmolzenen Steuerelemente enthält.</span><span class="sxs-lookup"><span data-stu-id="b1621-122">The net result is that the page's control hierarchy includes the fused control hierarchy.</span></span>

<span data-ttu-id="b1621-123">[![die Steuerungs Hierarchien der Master Seite und der Inhaltsseite während der PreInit-Phase miteinander verknüpft werden.](specifying-the-master-page-programmatically-cs/_static/image2.png)](specifying-the-master-page-programmatically-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-123">[![The Master Page and Content Page's Control Hierarchies are Fused Together during the PreInit Stage](specifying-the-master-page-programmatically-cs/_static/image2.png)](specifying-the-master-page-programmatically-cs/_static/image1.png)</span></span>

<span data-ttu-id="b1621-124">**Abbildung 01**: die Steuerungs Hierarchien der Master Seite und der Inhaltsseite werden während der PreInit-Phase miteinander verknüpft ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-124">**Figure 01**: The Master Page and Content Page's Control Hierarchies are Fused Together during the PreInit Stage ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image3.png))</span></span>

## <a name="step-2-setting-themasterpagefileproperty-from-code"></a><span data-ttu-id="b1621-125">Schritt 2: Festlegen der`MasterPageFile`-Eigenschaft aus dem Code</span><span class="sxs-lookup"><span data-stu-id="b1621-125">Step 2: Setting the`MasterPageFile`Property from Code</span></span>

<span data-ttu-id="b1621-126">Welche Master Seite in dieser Fusion ausgeführt wird, hängt vom Wert der `MasterPageFile`-Eigenschaft des `Page` Objekts ab.</span><span class="sxs-lookup"><span data-stu-id="b1621-126">What master page partakes in this fusion depends on the value of the `Page` object's `MasterPageFile` property.</span></span> <span data-ttu-id="b1621-127">Das Festlegen des `MasterPageFile` Attributs in der `@Page` Direktive hat den Effekt, dass die `MasterPageFile` Eigenschaft des `Page`während der Initialisierungsphase zugewiesen wird. Dies ist die erste Phase des Lebenszyklus der Seite.</span><span class="sxs-lookup"><span data-stu-id="b1621-127">Setting the `MasterPageFile` attribute in the `@Page` directive has the net effect of assigning the `Page`'s `MasterPageFile` property during the Initialization stage, which is the very first stage of the page's lifecycle.</span></span> <span data-ttu-id="b1621-128">Wir können diese Eigenschaft Alternativprogramm gesteuert festlegen.</span><span class="sxs-lookup"><span data-stu-id="b1621-128">We can alternatively set this property programmatically.</span></span> <span data-ttu-id="b1621-129">Es ist jedoch zwingend erforderlich, dass diese Eigenschaft festgelegt wird, bevor die Fusion in Abbildung 1 stattfindet.</span><span class="sxs-lookup"><span data-stu-id="b1621-129">However, it is imperative that this property be set before the fusion in Figure 1 takes place.</span></span>

<span data-ttu-id="b1621-130">Am Anfang der PreInit-Phase löst das `Page` Objekt das [`PreInit`-Ereignis](https://msdn.microsoft.com/library/system.web.ui.page.preinit.aspx) aus und ruft seine [`OnPreInit`-Methode](https://msdn.microsoft.com/library/system.web.ui.page.onpreinit.aspx)auf.</span><span class="sxs-lookup"><span data-stu-id="b1621-130">At the start of the PreInit stage the `Page` object raises its [`PreInit` event](https://msdn.microsoft.com/library/system.web.ui.page.preinit.aspx) and calls its [`OnPreInit` method](https://msdn.microsoft.com/library/system.web.ui.page.onpreinit.aspx).</span></span> <span data-ttu-id="b1621-131">Zum programmgesteuerten Festlegen der Master Seite können Sie entweder einen Ereignishandler für das `PreInit`-Ereignis erstellen oder die `OnPreInit`-Methode überschreiben.</span><span class="sxs-lookup"><span data-stu-id="b1621-131">To set the master page programmatically, then, we can either create an event handler for the `PreInit` event or override the `OnPreInit` method.</span></span> <span data-ttu-id="b1621-132">Sehen wir uns beide Ansätze an.</span><span class="sxs-lookup"><span data-stu-id="b1621-132">Let's look at both approaches.</span></span>

<span data-ttu-id="b1621-133">Öffnen Sie zunächst `Default.aspx.cs`, die Code Behind-Klassendatei für die Homepage unserer Website.</span><span class="sxs-lookup"><span data-stu-id="b1621-133">Start by opening `Default.aspx.cs`, the code-behind class file for our site's homepage.</span></span> <span data-ttu-id="b1621-134">Fügen Sie einen Ereignishandler für das `PreInit` Ereignis der Seite hinzu, indem Sie den folgenden Code eingeben:</span><span class="sxs-lookup"><span data-stu-id="b1621-134">Add an event handler for the page's `PreInit` event by typing in the following code:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample2.cs)]

<span data-ttu-id="b1621-135">Hier können Sie die `MasterPageFile`-Eigenschaft festlegen.</span><span class="sxs-lookup"><span data-stu-id="b1621-135">From here we can set the `MasterPageFile` property.</span></span> <span data-ttu-id="b1621-136">Aktualisieren Sie den Code so, dass er der `MasterPageFile`-Eigenschaft den Wert "~/Site.Master" zuweist.</span><span class="sxs-lookup"><span data-stu-id="b1621-136">Update the code so that it assigns the value "~/Site.master" to the `MasterPageFile` property.</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample3.cs)]

<span data-ttu-id="b1621-137">Wenn Sie einen Haltepunkt festlegen und mit dem Debuggen beginnen, sehen Sie, dass der `Page_PreInit`-Ereignishandler ausgeführt wird und die `MasterPageFile`-Eigenschaft "~/Site.Master" zugewiesen wird, wenn die `Default.aspx` Seite aufgerufen wird oder wenn ein Postback auf dieser Seite vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="b1621-137">If you set a breakpoint and start with debugging you'll see that whenever the `Default.aspx` page is visited or whenever there's a postback to this page, the `Page_PreInit` event handler executes and the `MasterPageFile` property is assigned to "~/Site.master".</span></span>

<span data-ttu-id="b1621-138">Alternativ können Sie die `OnPreInit`-Methode der `Page` Klasse überschreiben und die `MasterPageFile`-Eigenschaft dort festlegen.</span><span class="sxs-lookup"><span data-stu-id="b1621-138">Alternatively, you can override the `Page` class's `OnPreInit` method and set the `MasterPageFile` property there.</span></span> <span data-ttu-id="b1621-139">In diesem Beispiel soll die Master Seite nicht auf einer bestimmten Seite, sondern nicht auf `BasePage`festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-139">For this example, let's not set the master page in a particular page, but rather from `BasePage`.</span></span> <span data-ttu-id="b1621-140">Erinnern Sie sich daran, dass wir eine benutzerdefinierte Basis Seiten Klasse (`BasePage`) zurück in erstellt haben, die [*den Titel, Meta-Tags und andere HTML-Header im Master Seiten-Tutorial angibt*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="b1621-140">Recall that we created a custom base page class (`BasePage`) back in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial.</span></span> <span data-ttu-id="b1621-141">Derzeit überschreibt `BasePage` die `OnLoadComplete`-Methode der `Page` Klasse, wobei die `Title`-Eigenschaft der Seite auf der Grundlage der Site Übersichts Daten festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-141">Currently `BasePage` overrides the `Page` class's `OnLoadComplete` method, where it sets the page's `Title` property based on the site map data.</span></span> <span data-ttu-id="b1621-142">Aktualisieren Sie `BasePage`, um auch die `OnPreInit`-Methode zu überschreiben, um die Master Seite Programm gesteuert anzugeben.</span><span class="sxs-lookup"><span data-stu-id="b1621-142">Let's update `BasePage` to also override the `OnPreInit` method to programmatically specify the master page.</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample4.cs)]

<span data-ttu-id="b1621-143">Da alle Inhaltsseiten von `BasePage`abgeleitet sind, wird Ihre Master Seite nun von allen Inhalten Programm gesteuert zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="b1621-143">Because all our content pages derive from `BasePage`, all of them now have their master page programmatically assigned.</span></span> <span data-ttu-id="b1621-144">An diesem Punkt ist der `PreInit` Ereignishandler in `Default.aspx.cs` überflüssig. Sie können es einfach entfernen.</span><span class="sxs-lookup"><span data-stu-id="b1621-144">At this point the `PreInit` event handler in `Default.aspx.cs` is superfluous; feel free to remove it.</span></span>

### <a name="what-about-thepagedirective"></a><span data-ttu-id="b1621-145">Wie sieht es mit der`@Page`Direktive aus?</span><span class="sxs-lookup"><span data-stu-id="b1621-145">What About the`@Page`Directive?</span></span>

<span data-ttu-id="b1621-146">Was etwas verwirrend sein kann, ist, dass die `MasterPageFile` Eigenschaften der Inhaltsseiten nun an zwei Stellen angegeben werden: Programm gesteuert in der `OnPreInit`-Methode der `BasePage` Klasse sowie über das `MasterPageFile`-Attribut in den `@Page` Direktiven jeder Inhaltsseite.</span><span class="sxs-lookup"><span data-stu-id="b1621-146">What may be a little confusing is that the content pages' `MasterPageFile` properties are now being specified in two places: programmatically in the `BasePage` class's `OnPreInit` method as well as through the `MasterPageFile` attribute in each content page's `@Page` directive.</span></span>

<span data-ttu-id="b1621-147">Die erste Phase im Lebenszyklus der Seite ist die Initialisierungsphase.</span><span class="sxs-lookup"><span data-stu-id="b1621-147">The first stage in the page lifecycle is the Initialization stage.</span></span> <span data-ttu-id="b1621-148">In dieser Phase wird der `MasterPageFile`-Eigenschaft des `Page` Objekts der Wert des `MasterPageFile`-Attributs in der `@Page` Direktive zugewiesen (sofern vorhanden).</span><span class="sxs-lookup"><span data-stu-id="b1621-148">During this stage the `Page` object's `MasterPageFile` property is assigned the value of the `MasterPageFile` attribute in the `@Page` directive (if it is provided).</span></span> <span data-ttu-id="b1621-149">Die PreInit-Phase folgt der Initialisierungsphase, und hier wird die `MasterPageFile`-Eigenschaft des `Page` Objekts Programm gesteuert festgelegt, wodurch der Wert, der von der `@Page`-Direktive zugewiesen wird, überschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-149">The PreInit stage follows the Initialization stage, and it is here where we programmatically set the `Page` object's `MasterPageFile` property, thereby overwriting the value assigned from the `@Page` directive.</span></span> <span data-ttu-id="b1621-150">Da die `MasterPageFile`-Eigenschaft des `Page` Objekts Programm gesteuert festgelegt wird, können wir das Attribut "`MasterPageFile`" aus der `@Page` Direktive entfernen, ohne dass die Benutzerumgebung beeinträchtigt wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-150">Because we are setting the `Page` object's `MasterPageFile` property programmatically, we could remove the `MasterPageFile` attribute from the `@Page` directive without affecting the end user's experience.</span></span> <span data-ttu-id="b1621-151">Um dies zu überzeugen, entfernen Sie das `MasterPageFile`-Attribut aus der `@Page`-Direktive in `Default.aspx` und besuchen dann die Seite über einen Browser.</span><span class="sxs-lookup"><span data-stu-id="b1621-151">To convince yourself of this, go ahead and remove the `MasterPageFile` attribute from the `@Page` directive in `Default.aspx` and then visit the page through a browser.</span></span> <span data-ttu-id="b1621-152">Wie Sie erwarten, ist die Ausgabe die gleiche wie vor dem Entfernen des Attributs.</span><span class="sxs-lookup"><span data-stu-id="b1621-152">As you would expect, the output is the same as before the attribute was removed.</span></span>

<span data-ttu-id="b1621-153">Ob die `MasterPageFile`-Eigenschaft über die `@Page`-Direktive oder Programm gesteuert festgelegt wird, ist für die Benutzer Darstellung des Endbenutzers nicht von Belang.</span><span class="sxs-lookup"><span data-stu-id="b1621-153">Whether the `MasterPageFile` property is set via the `@Page` directive or programmatically is inconsequential to the end user's experience.</span></span> <span data-ttu-id="b1621-154">Das `MasterPageFile`-Attribut in der `@Page`-Direktive wird von Visual Studio jedoch während der Entwurfszeit verwendet, um die WYSIWYG-Ansicht im Designer zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="b1621-154">However, the `MasterPageFile` attribute in the `@Page` directive is used by Visual Studio during design-time to produce the WYSIWYG view in the Designer.</span></span> <span data-ttu-id="b1621-155">Wenn Sie in Visual Studio zu `Default.aspx` zurückkehren und zum Designer navigieren, wird die folgende Meldung angezeigt: "Fehler bei der Master Seite: die Seite verfügt über Steuerelemente, die einen Master Seiten Verweis erfordern, aber keine (siehe Abbildung 2).</span><span class="sxs-lookup"><span data-stu-id="b1621-155">If you return to `Default.aspx` in Visual Studio and navigate to the Designer you'll see the message, "Master Page error: The page has controls that require a Master Page reference, but none is specified" (see Figure 2).</span></span>

<span data-ttu-id="b1621-156">Kurz gesagt, Sie müssen das `MasterPageFile`-Attribut in der `@Page`-Direktive belassen, um eine umfangreiche Entwurfszeit Funktion in Visual Studio zu nutzen.</span><span class="sxs-lookup"><span data-stu-id="b1621-156">In short, you need to leave the `MasterPageFile` attribute in the `@Page` directive to enjoy a rich design-time experience in Visual Studio.</span></span>

<span data-ttu-id="b1621-157">[![Visual Studio das MasterPageFile-Attribut der @Page Direktive zum Rendering der Entwurfs Ansicht verwendet.](specifying-the-master-page-programmatically-cs/_static/image5.png)](specifying-the-master-page-programmatically-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-157">[![Visual Studio Uses the @Page Directive's MasterPageFile Attribute to Render the Design View](specifying-the-master-page-programmatically-cs/_static/image5.png)](specifying-the-master-page-programmatically-cs/_static/image4.png)</span></span>

<span data-ttu-id="b1621-158">**Abbildung 02**: Visual Studio verwendet das `MasterPageFile` Attribute der `@Page` Direktive, um die Entwurfs Ansicht zu erzeugen ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-158">**Figure 02**: Visual Studio Uses the `@Page` Directive's `MasterPageFile` Attribute to Render the Design View  ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image6.png))</span></span>

## <a name="step-3-creating-an-alternative-master-page"></a><span data-ttu-id="b1621-159">Schritt 3: Erstellen einer alternativen Master Seite</span><span class="sxs-lookup"><span data-stu-id="b1621-159">Step 3: Creating an Alternative Master Page</span></span>

<span data-ttu-id="b1621-160">Da die Master Seite einer Inhaltsseite Programm gesteuert zur Laufzeit festgelegt werden kann, ist es möglich, eine bestimmte Master Seite auf der Grundlage externer Kriterien dynamisch zu laden.</span><span class="sxs-lookup"><span data-stu-id="b1621-160">Because a content page's master page can be set programmatically at runtime it's possible to dynamically load a particular master page based on some external criteria.</span></span> <span data-ttu-id="b1621-161">Diese Funktionalität kann in Situationen nützlich sein, in denen das Layout der Website basierend auf dem Benutzer variieren muss.</span><span class="sxs-lookup"><span data-stu-id="b1621-161">This functionality can be useful in situations where the site's layout needs to vary based on the user.</span></span> <span data-ttu-id="b1621-162">Beispielsweise kann eine Blog-Engine-Webanwendung es Benutzern ermöglichen, ein Layout für Ihren Blog auszuwählen, wobei jedes Layout einer anderen Master Seite zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="b1621-162">For instance, a blog engine web application may allow its users to choose a layout for their blog, where each layout is associated with a different master page.</span></span> <span data-ttu-id="b1621-163">Wenn ein Besucher zur Laufzeit den Blog eines Benutzers anzeigen möchte, muss die Webanwendung das Layout des Blogs ermitteln und die entsprechende Master Seite dynamisch der Inhaltsseite zuordnen.</span><span class="sxs-lookup"><span data-stu-id="b1621-163">At runtime, when a visitor is viewing a user's blog, the web application would need to determine the blog's layout and dynamically associate the corresponding master page with the content page.</span></span>

<span data-ttu-id="b1621-164">Im folgenden wird erläutert, wie Sie eine Master Seite auf der Grundlage externer Kriterien dynamisch laden können.</span><span class="sxs-lookup"><span data-stu-id="b1621-164">Let's examine how to dynamically load a master page at runtime based on some external criteria.</span></span> <span data-ttu-id="b1621-165">Unsere Website enthält derzeit nur eine Master Seite (`Site.master`).</span><span class="sxs-lookup"><span data-stu-id="b1621-165">Our website currently contains just one master page (`Site.master`).</span></span> <span data-ttu-id="b1621-166">Wir benötigen eine weitere Master Seite, um die Auswahl einer Master Seite zur Laufzeit zu veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="b1621-166">We need another master page to illustrate choosing a master page at runtime.</span></span> <span data-ttu-id="b1621-167">Dieser Schritt konzentriert sich auf das Erstellen und Konfigurieren der neuen Master Seite.</span><span class="sxs-lookup"><span data-stu-id="b1621-167">This step focuses on creating and configuring the new master page.</span></span> <span data-ttu-id="b1621-168">Schritt 4 prüft, welche Master Seite zur Laufzeit verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="b1621-168">Step 4 looks at determining what master page to use at runtime.</span></span>

<span data-ttu-id="b1621-169">Erstellen Sie eine neue Master Seite im Stamm Ordner mit dem Namen `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="b1621-169">Create a new master page in the root folder named `Alternate.master`.</span></span> <span data-ttu-id="b1621-170">Fügen Sie auch ein neues Stylesheet zur Website namens `AlternateStyles.css`hinzu.</span><span class="sxs-lookup"><span data-stu-id="b1621-170">Also add a new style sheet to the website named `AlternateStyles.css`.</span></span>

<span data-ttu-id="b1621-171">[![der Website eine weitere Master Seite und CSS-Datei hinzufügen](specifying-the-master-page-programmatically-cs/_static/image8.png)](specifying-the-master-page-programmatically-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-171">[![Add Another Master Page and CSS File to the Website](specifying-the-master-page-programmatically-cs/_static/image8.png)](specifying-the-master-page-programmatically-cs/_static/image7.png)</span></span>

<span data-ttu-id="b1621-172">**Abbildung 03**: Hinzufügen einer weiteren Master Seite und CSS-Datei zur Website ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-172">**Figure 03**: Add Another Master Page and CSS File to the Website ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image9.png))</span></span>

<span data-ttu-id="b1621-173">Ich habe die `Alternate.master` Master Seite so entworfen, dass der Titel am oberen Rand der Seite, zentriert und in einem Marine Hintergrund angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-173">I've designed the `Alternate.master` master page to have the title displayed at the top of the page, centered and on a navy background.</span></span> <span data-ttu-id="b1621-174">Ich habe die linke Spalte weggelassen und diesen Inhalt unterhalb des `MainContent` contentplachalter-Steuer Elements verschoben, das nun die gesamte Breite der Seite überspannt.</span><span class="sxs-lookup"><span data-stu-id="b1621-174">I've dispensed of the left column and moved that content beneath the `MainContent` ContentPlaceHolder control, which now spans the entire width of the page.</span></span> <span data-ttu-id="b1621-175">Außerdem habe ich die Liste der ungeordneten Lektionen in die Liste der ungeordneten Lektionen übernommen und durch eine horizontale Liste oben `MainContent`ersetzt.</span><span class="sxs-lookup"><span data-stu-id="b1621-175">Furthermore, I nixed the unordered Lessons list and replaced it with a horizontal list above `MainContent`.</span></span> <span data-ttu-id="b1621-176">Außerdem wurden die von der Master Seite verwendeten Schriftarten und Farben aktualisiert (und durch Erweiterung die Inhaltsseiten).</span><span class="sxs-lookup"><span data-stu-id="b1621-176">I also updated the fonts and colors used by the master page (and, by extension, its content pages).</span></span> <span data-ttu-id="b1621-177">Abbildung 4 zeigt `Default.aspx`, wenn die `Alternate.master` Master Seite verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-177">Figure 4 shows `Default.aspx` when using the `Alternate.master` master page.</span></span>

> [!NOTE]
> <span data-ttu-id="b1621-178">ASP.net bietet die Möglichkeit, Designs *zu definieren.*</span><span class="sxs-lookup"><span data-stu-id="b1621-178">ASP.NET includes the ability to define *Themes*.</span></span> <span data-ttu-id="b1621-179">Ein Design ist eine Auflistung von Bildern, CSS-Dateien und Stil bezogenen websteuer Element-Eigenschafts Einstellungen, die zur Laufzeit auf eine Seite angewendet werden können.</span><span class="sxs-lookup"><span data-stu-id="b1621-179">A Theme is a collection of images, CSS files, and style-related Web control property settings that can be applied to a page at runtime.</span></span> <span data-ttu-id="b1621-180">Designs sind die Möglichkeit, wenn sich die Layouts Ihrer Website nur in den angezeigten Bildern und ihren CSS-Regeln unterscheiden.</span><span class="sxs-lookup"><span data-stu-id="b1621-180">Themes are the way to go if your site's layouts differ only in the images displayed and by their CSS rules.</span></span> <span data-ttu-id="b1621-181">Wenn sich die Layouts erheblich unterscheiden, z. b. das Verwenden unterschiedlicher websteuer Elemente oder eines völlig anderen Layouts, müssen Sie separate Masterseiten verwenden.</span><span class="sxs-lookup"><span data-stu-id="b1621-181">If the layouts differ more substantially, such as using different Web controls or having a radically different layout, then you will need to use separate master pages.</span></span> <span data-ttu-id="b1621-182">Weitere Informationen zu Designs finden Sie im Abschnitt weiter unten in diesem Tutorial.</span><span class="sxs-lookup"><span data-stu-id="b1621-182">Consult the Further Reading section at the end of this tutorial for more information on Themes.</span></span>

<span data-ttu-id="b1621-183">[![unsere Inhaltsseiten nun ein neues Erscheinungsbild verwenden können](specifying-the-master-page-programmatically-cs/_static/image11.png)](specifying-the-master-page-programmatically-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-183">[![Our Content Pages Can Now Use a New Look and Feel](specifying-the-master-page-programmatically-cs/_static/image11.png)](specifying-the-master-page-programmatically-cs/_static/image10.png)</span></span>

<span data-ttu-id="b1621-184">**Abbildung 04**: unsere Inhaltsseiten können nun ein neues Erscheinungsbild verwenden ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-184">**Figure 04**: Our Content Pages Can Now Use a New Look and Feel ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image12.png))</span></span>

<span data-ttu-id="b1621-185">Wenn das Markup der Master-und Inhaltsseiten miteinander verschmolzen ist, prüft die `MasterPage`-Klasse, ob jedes Inhalts Steuerelement auf der Seite Inhalt auf einen contentplachalter auf der Master Seite verweist.</span><span class="sxs-lookup"><span data-stu-id="b1621-185">When the master and content pages' markup are fused, the `MasterPage` class checks to ensure that every Content control in the content page references a ContentPlaceHolder in the master page.</span></span> <span data-ttu-id="b1621-186">Eine-Ausnahme wird ausgelöst, wenn ein Inhalts Steuerelement gefunden wird, das auf einen nicht vorhandenen contentplac-Platzhalter verweist.</span><span class="sxs-lookup"><span data-stu-id="b1621-186">An exception is thrown if a Content control that references a non-existent ContentPlaceHolder is found.</span></span> <span data-ttu-id="b1621-187">Anders ausgedrückt: Es ist zwingend erforderlich, dass die Master Seite, die der Inhaltsseite zugewiesen wird, für jedes Inhalts Steuerelement auf der Inhaltsseite über einen contentplachalter verfügt.</span><span class="sxs-lookup"><span data-stu-id="b1621-187">In other words, it is imperative that the master page being assigned to the content page have a ContentPlaceHolder for each Content control in the content page.</span></span>

<span data-ttu-id="b1621-188">Die `Site.master` Master Seite enthält vier contentplachalter-Steuerelemente:</span><span class="sxs-lookup"><span data-stu-id="b1621-188">The `Site.master` master page includes four ContentPlaceHolder controls:</span></span>

- `head`
- `MainContent`
- `QuickLoginUI`
- `LeftColumnContent`

<span data-ttu-id="b1621-189">Einige Inhaltsseiten in unserer Website enthalten nur ein oder zwei Inhalts Steuerelemente. andere enthalten ein Inhalts Steuerelement für jeden verfügbaren contentplatzhalter.</span><span class="sxs-lookup"><span data-stu-id="b1621-189">Some of the content pages in our website include just one or two Content controls; others include a Content control for each of the available ContentPlaceHolders.</span></span> <span data-ttu-id="b1621-190">Wenn unsere neue Master Seite (`Alternate.master`) ggf. den Inhaltsseiten zugewiesen ist, die Inhalts Steuerelemente für alle Content-Platzhalter in `Site.master` haben, ist es von entscheidender Bedeutung, dass `Alternate.master` auch dieselben contentplachalter-Steuerelemente wie `Site.master`enthält.</span><span class="sxs-lookup"><span data-stu-id="b1621-190">If our new master page (`Alternate.master`) may ever be assigned to those content pages that have Content controls for all of the ContentPlaceHolders in `Site.master` then it is essential that `Alternate.master` also include the same ContentPlaceHolder controls as `Site.master`.</span></span>

<span data-ttu-id="b1621-191">Um die `Alternate.master` Master Seite so zu sehen, dass Sie in etwa so aussieht wie meine (siehe Abbildung 4), definieren Sie zunächst die Stile der Master Seite im `AlternateStyles.css` Stylesheet.</span><span class="sxs-lookup"><span data-stu-id="b1621-191">To get your `Alternate.master` master page to look similar to mine (see Figure 4), start by defining the master page's styles in the `AlternateStyles.css` style sheet.</span></span> <span data-ttu-id="b1621-192">Fügen Sie die folgenden Regeln in `AlternateStyles.css`hinzu:</span><span class="sxs-lookup"><span data-stu-id="b1621-192">Add the following rules into `AlternateStyles.css`:</span></span>

[!code-css[Main](specifying-the-master-page-programmatically-cs/samples/sample5.css)]

<span data-ttu-id="b1621-193">Fügen Sie als nächstes das folgende deklarative Markup zu `Alternate.master`hinzu.</span><span class="sxs-lookup"><span data-stu-id="b1621-193">Next, add the following declarative markup to `Alternate.master`.</span></span> <span data-ttu-id="b1621-194">Wie Sie sehen können, enthält `Alternate.master` vier contentplachalter-Steuerelemente mit denselben `ID` Werten wie die contentplachalter-Steuerelemente in `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="b1621-194">As you can see, `Alternate.master` contains four ContentPlaceHolder controls with the same `ID` values as the ContentPlaceHolder controls in `Site.master`.</span></span> <span data-ttu-id="b1621-195">Darüber hinaus enthält Sie ein ScriptManager-Steuerelement, das für die Seiten in unserer Website notwendig ist, die das ASP.NET AJAX-Framework verwenden.</span><span class="sxs-lookup"><span data-stu-id="b1621-195">Moreover, it includes a ScriptManager control, which is necessary for those pages in our website that use the ASP.NET AJAX framework.</span></span>

[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample6.aspx)]

### <a name="testing-the-new-master-page"></a><span data-ttu-id="b1621-196">Testen der neuen Master Seite</span><span class="sxs-lookup"><span data-stu-id="b1621-196">Testing the New Master Page</span></span>

<span data-ttu-id="b1621-197">Um diese neue Master Seite zu testen, aktualisieren Sie die `OnPreInit`-Methode der `BasePage`-Klasse, sodass der `MasterPageFile`-Eigenschaft der Wert "~/Alternate.Master" zugewiesen ist, und besuchen Sie die Website.</span><span class="sxs-lookup"><span data-stu-id="b1621-197">To test this new master page update the `BasePage` class's `OnPreInit` method so that the `MasterPageFile` property is assigned the value "~/Alternate.master" and then visit the website.</span></span> <span data-ttu-id="b1621-198">Jede Seite sollte ohne Fehler funktionieren, außer zwei: `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b1621-198">Every page should function without error except for two: `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx`.</span></span> <span data-ttu-id="b1621-199">Das Hinzufügen eines Produkts zu DetailsView in `~/Admin/AddProduct.aspx` führt zu einer `NullReferenceException` aus der Codezeile, die versucht, die `GridMessageText`-Eigenschaft der Master Seite festzulegen.</span><span class="sxs-lookup"><span data-stu-id="b1621-199">Adding a product to the DetailsView in `~/Admin/AddProduct.aspx` results in a `NullReferenceException` from the line of code that attempts to set the master page's `GridMessageText` property.</span></span> <span data-ttu-id="b1621-200">Beim Besuch `~/Admin/Products.aspx` eine `InvalidCastException` beim Laden der Seite ausgelöst: "das Objekt vom Typ" ASP. Alternate\_Master "kann nicht in den Typ" ASP. Site\_Master "umgewandelt werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-200">When visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown on page load with the message: "Unable to cast object of type 'ASP.alternate\_master' to type 'ASP.site\_master'."</span></span>

<span data-ttu-id="b1621-201">Diese Fehler treten auf, weil die `Site.master` Code Behind-Klasse öffentliche Ereignisse, Eigenschaften und Methoden enthält, die nicht in `Alternate.master`definiert sind.</span><span class="sxs-lookup"><span data-stu-id="b1621-201">These errors occur because the `Site.master` code-behind class includes public events, properties, and methods that are not defined in `Alternate.master`.</span></span> <span data-ttu-id="b1621-202">Der Markup Teil dieser beiden Seiten verfügt über eine `@MasterType`-Direktive, die auf die `Site.master` Master Seite verweist.</span><span class="sxs-lookup"><span data-stu-id="b1621-202">The markup portion of these two pages have a `@MasterType` directive that references the `Site.master` master page.</span></span>

[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample7.aspx)]

<span data-ttu-id="b1621-203">Außerdem enthält der `ItemInserted` Ereignishandler der DetailsView in `~/Admin/AddProduct.aspx` Code, der die lose typisierte `Page.Master`-Eigenschaft in ein Objekt vom Typ `Site`umwandelt.</span><span class="sxs-lookup"><span data-stu-id="b1621-203">Also, the DetailsView's `ItemInserted` event handler in `~/Admin/AddProduct.aspx` includes code that casts the loosely-typed `Page.Master` property to an object of type `Site`.</span></span> <span data-ttu-id="b1621-204">Die `@MasterType`-Direktive (auf diese Weise verwendet), und die Umwandlung im `ItemInserted`-Ereignishandler verbindet die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten eng mit der `Site.master` Master Seite.</span><span class="sxs-lookup"><span data-stu-id="b1621-204">The `@MasterType` directive (used this way) and the cast in the `ItemInserted` event handler tightly couples the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages to the `Site.master` master page.</span></span>

<span data-ttu-id="b1621-205">Um diese enge Kopplung zu unterbrechen, können wir `Site.master` und `Alternate.master` von einer gemeinsamen Basisklasse ableiten, die Definitionen für die öffentlichen Member enthält.</span><span class="sxs-lookup"><span data-stu-id="b1621-205">To break this tight coupling we can have `Site.master` and `Alternate.master` derive from a common base class that contains definitions for the public members.</span></span> <span data-ttu-id="b1621-206">Danach können wir die `@MasterType` Direktive aktualisieren, um auf diesen allgemeinen Basistyp zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="b1621-206">Following that, we can update the `@MasterType` directive to reference this common base type.</span></span>

### <a name="creating-a-custom-base-master-page-class"></a><span data-ttu-id="b1621-207">Erstellen einer benutzerdefinierten Basis-Master Seiten Klasse</span><span class="sxs-lookup"><span data-stu-id="b1621-207">Creating a Custom Base Master Page Class</span></span>

<span data-ttu-id="b1621-208">Fügen Sie dem `App_Code` Ordner mit dem Namen `BaseMasterPage.cs` eine neue Klassendatei hinzu, und lassen Sie Sie von `System.Web.UI.MasterPage`ableiten.</span><span class="sxs-lookup"><span data-stu-id="b1621-208">Add a new class file to the `App_Code` folder named `BaseMasterPage.cs` and have it derive from `System.Web.UI.MasterPage`.</span></span> <span data-ttu-id="b1621-209">Wir müssen die `RefreshRecentProductsGrid`-Methode und die `GridMessageText`-Eigenschaft in `BaseMasterPage`definieren, aber Sie können Sie nicht einfach aus `Site.master` verschieben, da diese Member mit websteuer Elementen arbeiten, die spezifisch für die `Site.master` Master Seite sind (die `RecentProducts` GridView und `GridMessage`-Bezeichnung).</span><span class="sxs-lookup"><span data-stu-id="b1621-209">We need to define the `RefreshRecentProductsGrid` method and the `GridMessageText` property in `BaseMasterPage`, but we can't simply move them there from `Site.master` because these members work with Web controls that are specific to the `Site.master` master page (the `RecentProducts` GridView and `GridMessage` Label).</span></span>

<span data-ttu-id="b1621-210">Wir müssen `BaseMasterPage` so konfigurieren, dass diese Member hier definiert sind, aber tatsächlich von `BaseMasterPage`abgeleiteten Klassen (`Site.master` und `Alternate.master`) implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-210">What we need to do is configure `BaseMasterPage` in such a way that these members are defined there, but are actually implemented by `BaseMasterPage`'s derived classes (`Site.master` and `Alternate.master`).</span></span> <span data-ttu-id="b1621-211">Diese Vererbungs Vererbung ist möglich, indem die-Klasse und ihre Member als `abstract`gekennzeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-211">This type of inheritance is possible by marking the class and its members as `abstract`.</span></span> <span data-ttu-id="b1621-212">Kurz gesagt, wird durch das Hinzufügen des `abstract`-Schlüssel Worts zu diesen beiden Membern angekündigt, dass `BaseMasterPage` nicht `RefreshRecentProductsGrid` und `GridMessageText`implementiert hat, sondern dass die abgeleiteten Klassen.</span><span class="sxs-lookup"><span data-stu-id="b1621-212">In short, adding the `abstract` keyword to these two members announces that `BaseMasterPage` hasn't implemented `RefreshRecentProductsGrid` and `GridMessageText`, but that its derived classes will.</span></span>

<span data-ttu-id="b1621-213">Wir müssen auch das `PricesDoubled`-Ereignis in `BaseMasterPage` definieren und eine Möglichkeit von den abgeleiteten Klassen bereitstellen, um das Ereignis zu erhöhen.</span><span class="sxs-lookup"><span data-stu-id="b1621-213">We also need to define the `PricesDoubled` event in `BaseMasterPage` and provide a means by the derived classes to raise the event.</span></span> <span data-ttu-id="b1621-214">Das Muster, das in der .NET Framework verwendet wird, um dieses Verhalten zu vereinfachen, besteht darin, ein öffentliches Ereignis in der Basisklasse zu erstellen und eine geschützte `virtual` Methode namens `OnEventName`hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="b1621-214">The pattern used in the .NET Framework to facilitate this behavior is to create a public event in the base class and add a protected, `virtual` method named `OnEventName`.</span></span> <span data-ttu-id="b1621-215">Abgeleitete Klassen können dann diese Methode zum Ausführen des Ereignisses und zum Ausführen von Code direkt vor oder nach dem auslassen des Ereignisses überschreiben.</span><span class="sxs-lookup"><span data-stu-id="b1621-215">Derived classes can then call this method to raise the event or can override it to execute code immediately before or after the event is raised.</span></span>

<span data-ttu-id="b1621-216">Aktualisieren Sie die `BaseMasterPage`-Klasse, sodass Sie den folgenden Code enthält:</span><span class="sxs-lookup"><span data-stu-id="b1621-216">Update your `BaseMasterPage` class so that it contains the following code:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample8.cs)]

<span data-ttu-id="b1621-217">Navigieren Sie als nächstes zur `Site.master` Code Behind-Klasse, und lassen Sie Sie von `BaseMasterPage`ableiten.</span><span class="sxs-lookup"><span data-stu-id="b1621-217">Next, go to the `Site.master` code-behind class and have it derive from `BaseMasterPage`.</span></span> <span data-ttu-id="b1621-218">Da `BaseMasterPage` `abstract` müssen wir diese `abstract` Member hier in `Site.master`überschreiben.</span><span class="sxs-lookup"><span data-stu-id="b1621-218">Because `BaseMasterPage` is `abstract` we need to override those `abstract` members here in `Site.master`.</span></span> <span data-ttu-id="b1621-219">Fügen Sie das `override`-Schlüsselwort den Methoden-und Eigenschafts Definitionen hinzu.</span><span class="sxs-lookup"><span data-stu-id="b1621-219">Add the `override` keyword to the method and property definitions.</span></span> <span data-ttu-id="b1621-220">Aktualisieren Sie außerdem den Code, der das `PricesDoubled`-Ereignis auslöst, im `Click`-Ereignishandler der `DoublePrice` Schaltfläche durch einen-Rückruf der `OnPricesDoubled`-Methode der Basisklasse.</span><span class="sxs-lookup"><span data-stu-id="b1621-220">Also update the code that raises the `PricesDoubled` event in the `DoublePrice` Button's `Click` event handler with a call to the base class's `OnPricesDoubled` method.</span></span>

<span data-ttu-id="b1621-221">Nach diesen Änderungen sollte die `Site.master` Code Behind-Klasse den folgenden Code enthalten:</span><span class="sxs-lookup"><span data-stu-id="b1621-221">After these modifications the `Site.master` code-behind class should contain the following code:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample9.cs)]

<span data-ttu-id="b1621-222">Wir müssen auch die Code-Behind-Klasse von `Alternate.master`aktualisieren, um von `BaseMasterPage` abzuleiten und die beiden `abstract` Member zu überschreiben.</span><span class="sxs-lookup"><span data-stu-id="b1621-222">We also need to update `Alternate.master`'s code-behind class to derive from `BaseMasterPage` and override the two `abstract` members.</span></span> <span data-ttu-id="b1621-223">Da `Alternate.master` jedoch keine GridView-Sicht enthält, die die neuesten Produkte auflistet, oder eine Bezeichnung, die nach dem Hinzufügen eines neuen Produkts zur Datenbank eine Meldung anzeigt, müssen diese Methoden nichts tun.</span><span class="sxs-lookup"><span data-stu-id="b1621-223">But because `Alternate.master` does not contain a GridView that lists the most recent products nor a Label that displays a message after a new product is added to the database, these methods do not need to do anything.</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample10.cs)]

### <a name="referencing-the-base-master-page-class"></a><span data-ttu-id="b1621-224">Verweisen auf die Basisklasse der Master Seite</span><span class="sxs-lookup"><span data-stu-id="b1621-224">Referencing the Base Master Page Class</span></span>

<span data-ttu-id="b1621-225">Nachdem Sie die `BaseMasterPage`-Klasse abgeschlossen und die beiden Masterseiten erweitert haben, besteht der letzte Schritt darin, die `~/Admin/AddProduct.aspx` und `~/Admin/Products.aspx` Seiten so zu aktualisieren, dass Sie auf diesen gemeinsamen Typ verweisen.</span><span class="sxs-lookup"><span data-stu-id="b1621-225">Now that we have completed the `BaseMasterPage` class and have our two master pages extending it, our final step is to update the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages to refer to this common type.</span></span> <span data-ttu-id="b1621-226">Ändern Sie zunächst die `@MasterType` Direktive auf beiden Seiten von:</span><span class="sxs-lookup"><span data-stu-id="b1621-226">Start by changing the `@MasterType` directive in both pages from:</span></span>

[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample11.aspx)]

<span data-ttu-id="b1621-227">Nach:</span><span class="sxs-lookup"><span data-stu-id="b1621-227">To:</span></span>

[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample12.aspx)]

<span data-ttu-id="b1621-228">Anstatt auf einen Dateipfad zu verweisen, verweist die `@MasterType`-Eigenschaft jetzt auf den Basistyp (`BaseMasterPage`).</span><span class="sxs-lookup"><span data-stu-id="b1621-228">Rather than referencing a file path, the `@MasterType` property now references the base type (`BaseMasterPage`).</span></span> <span data-ttu-id="b1621-229">Folglich ist die stark typisierte `Master`-Eigenschaft, die in den Code-Behind-Klassen der beiden Seiten verwendet wird, jetzt vom Typ `BaseMasterPage` (anstelle des Typs `Site`).</span><span class="sxs-lookup"><span data-stu-id="b1621-229">Consequently, the strongly-typed `Master` property used in both pages' code-behind classes is now of type `BaseMasterPage` (instead of type `Site`).</span></span> <span data-ttu-id="b1621-230">Mit dieser Änderung wird `~/Admin/Products.aspx`erneut ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="b1621-230">With this change in place revisit `~/Admin/Products.aspx`.</span></span> <span data-ttu-id="b1621-231">Bisher führte dies zu einem Umwandlungs Fehler, weil die Seite für die Verwendung der `Alternate.master` Master Seite konfiguriert ist, aber die `@MasterType` Direktive auf die `Site.master` Datei verwiesen hat.</span><span class="sxs-lookup"><span data-stu-id="b1621-231">Previously, this resulted in a casting error because the page is configured to use the `Alternate.master` master page, but the `@MasterType` directive referenced the `Site.master` file.</span></span> <span data-ttu-id="b1621-232">Die Seite wird jedoch ohne Fehler gerendert.</span><span class="sxs-lookup"><span data-stu-id="b1621-232">But now the page renders without error.</span></span> <span data-ttu-id="b1621-233">Dies liegt daran, dass die `Alternate.master` Master Seite in ein Objekt vom Typ "`BaseMasterPage`" umgewandelt werden kann (da es erweitert wird).</span><span class="sxs-lookup"><span data-stu-id="b1621-233">This is because the `Alternate.master` master page can be cast to an object of type `BaseMasterPage` (since it extends it).</span></span>

<span data-ttu-id="b1621-234">In `~/Admin/AddProduct.aspx`muss eine kleine Änderung vorgenommen werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-234">There's one small change that needs to be made in `~/Admin/AddProduct.aspx`.</span></span> <span data-ttu-id="b1621-235">Der `ItemInserted` Ereignishandler des DetailsView-Steuer Elements verwendet sowohl die stark typisierte `Master`-Eigenschaft als auch die lose typisierte `Page.Master`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="b1621-235">The DetailsView control's `ItemInserted` event handler uses both the strongly-typed `Master` property and the loosely-typed `Page.Master` property.</span></span> <span data-ttu-id="b1621-236">Wir haben den stark typisierten Verweis korrigiert, als wir die `@MasterType` Direktive aktualisiert haben, aber wir müssen weiterhin den locker-typisierten Verweis aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="b1621-236">We fixed the strongly-typed reference when we updated the `@MasterType` directive, but we still need to update the loosely-typed reference.</span></span> <span data-ttu-id="b1621-237">Ersetzen Sie die folgende Codezeile:</span><span class="sxs-lookup"><span data-stu-id="b1621-237">Replace the following line of code:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample13.cs)]

<span data-ttu-id="b1621-238">Mit folgendem können `Page.Master` in den Basistyp umgewandelt werden:</span><span class="sxs-lookup"><span data-stu-id="b1621-238">With the following, which casts `Page.Master` to the base type:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample14.cs)]

## <a name="step-4-determining-what-master-page-to-bind-to-the-content-pages"></a><span data-ttu-id="b1621-239">Schritt 4: bestimmen, welche Master Seite an die Inhaltsseiten gebunden werden soll</span><span class="sxs-lookup"><span data-stu-id="b1621-239">Step 4: Determining What Master Page to Bind to the Content Pages</span></span>

<span data-ttu-id="b1621-240">Unsere `BasePage`-Klasse legt derzeit alle `MasterPageFile` Eigenschaften der Inhaltsseiten auf einen hart codierten Wert in der PreInit-Phase des Lebenszyklus der Seite fest.</span><span class="sxs-lookup"><span data-stu-id="b1621-240">Our `BasePage` class currently sets all content pages' `MasterPageFile` properties to a hard-coded value in the PreInit stage of the page lifecycle.</span></span> <span data-ttu-id="b1621-241">Wir können diesen Code aktualisieren, um die Master Seite auf einem externen Faktor zu basieren.</span><span class="sxs-lookup"><span data-stu-id="b1621-241">We can update this code to base the master page on some external factor.</span></span> <span data-ttu-id="b1621-242">Möglicherweise hängt die zu ladende Master Seite von den Einstellungen des aktuell angemeldeten Benutzers ab.</span><span class="sxs-lookup"><span data-stu-id="b1621-242">Perhaps the master page to load depends on the preferences of the currently logged on user.</span></span> <span data-ttu-id="b1621-243">In diesem Fall müssten wir Code in der `OnPreInit`-Methode in `BasePage` schreiben, der die Masterseiten Einstellungen des aktuellen Benutzers nach sucht.</span><span class="sxs-lookup"><span data-stu-id="b1621-243">In that case, we'd need to write code in the `OnPreInit` method in `BasePage` that looks up the currently visiting user's master page preferences.</span></span>

<span data-ttu-id="b1621-244">Erstellen Sie eine Webseite, die es dem Benutzer ermöglicht, die zu verwendende Master Seite auszuwählen-`Site.master` oder `Alternate.master`, und speichern Sie diese Auswahl in einer Sitzungsvariablen.</span><span class="sxs-lookup"><span data-stu-id="b1621-244">Let's create a web page that allows the user to choose which master page to use - `Site.master` or `Alternate.master` - and save this choice in a Session variable.</span></span> <span data-ttu-id="b1621-245">Beginnen Sie mit dem Erstellen einer neuen Webseite im Stammverzeichnis mit dem Namen `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b1621-245">Start by creating a new web page in the root directory named `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="b1621-246">Wenn Sie diese Seite (oder andere Inhaltsseiten) erstellen, müssen Sie Sie nicht an eine Master Seite binden, da die Master Seite Programm gesteuert in `BasePage`festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-246">When creating this page (or any other content pages henceforth) you don't need to bind it to a master page because the master page is set programmatically in `BasePage`.</span></span> <span data-ttu-id="b1621-247">Wenn Sie die neue Seite jedoch nicht an eine Master Seite binden, enthält das standardmäßige deklarative Markup der Seite ein Webformular und andere von der Master Seite bereitgestellte Inhalte.</span><span class="sxs-lookup"><span data-stu-id="b1621-247">However, if you do not bind the new page to a master page then the new page's default declarative markup contains a Web Form and other content supplied by the master page.</span></span> <span data-ttu-id="b1621-248">Sie müssen dieses Markup manuell durch die entsprechenden Inhalts Steuerelemente ersetzen.</span><span class="sxs-lookup"><span data-stu-id="b1621-248">You'll need to manually replace this markup with the appropriate Content controls.</span></span> <span data-ttu-id="b1621-249">Aus diesem Grund ist es einfacher, die neue ASP.NET-Seite an eine Master Seite zu binden.</span><span class="sxs-lookup"><span data-stu-id="b1621-249">For that reason, I find it easier to bind the new ASP.NET page to a master page.</span></span>

> [!NOTE]
> <span data-ttu-id="b1621-250">Da `Site.master` und `Alternate.master` denselben Satz von contentplachalter-Steuerelementen aufweisen, spielt es keine Rolle, welche Master Seite Sie beim Erstellen der neuen Inhaltsseite auswählen.</span><span class="sxs-lookup"><span data-stu-id="b1621-250">Because `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls it doesn't matter what master page you choose when creating the new content page.</span></span> <span data-ttu-id="b1621-251">Aus Gründen der Konsistenz empfiehlt es sich, `Site.master`zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="b1621-251">For consistency, I'd suggest using `Site.master`.</span></span>

<span data-ttu-id="b1621-252">[![der Website eine neue Inhaltsseite hinzufügen](specifying-the-master-page-programmatically-cs/_static/image14.png)](specifying-the-master-page-programmatically-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-252">[![Add a New Content Page to the Website](specifying-the-master-page-programmatically-cs/_static/image14.png)](specifying-the-master-page-programmatically-cs/_static/image13.png)</span></span>

<span data-ttu-id="b1621-253">**Abbildung 05**: Hinzufügen einer neuen Inhaltsseite zur Website ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-253">**Figure 05**: Add a New Content Page to the Website ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image15.png))</span></span>

<span data-ttu-id="b1621-254">Aktualisieren Sie die `Web.sitemap` Datei, sodass Sie einen Eintrag für diese Lektion enthält.</span><span class="sxs-lookup"><span data-stu-id="b1621-254">Update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="b1621-255">Fügen Sie unterhalb der `<siteMapNode>` für die Master Pages-und ASP.NET AJAX-Lektion das folgende Markup hinzu:</span><span class="sxs-lookup"><span data-stu-id="b1621-255">Add the following markup beneath the `<siteMapNode>` for the Master Pages and ASP.NET AJAX lesson:</span></span>

[!code-xml[Main](specifying-the-master-page-programmatically-cs/samples/sample15.xml)]

<span data-ttu-id="b1621-256">Bevor Sie der `ChooseMasterPage.aspx` Seite Inhalte hinzufügen, nehmen Sie sich einen Moment Zeit, um die Code Behind-Klasse der Seite zu aktualisieren, sodass Sie von `BasePage` (anstatt von `System.Web.UI.Page`) abgeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-256">Before adding any content to the `ChooseMasterPage.aspx` page take a moment to update the page's code-behind class so that it derives from `BasePage` (rather than `System.Web.UI.Page`).</span></span> <span data-ttu-id="b1621-257">Fügen Sie als nächstes der Seite ein Dropdown List-Steuerelement hinzu, legen Sie dessen `ID`-Eigenschaft auf `MasterPageChoice`fest, und fügen Sie zwei ListItems mit den `Text`-Werten "~/Site.Master" und "~/Alternate.Master" hinzu.</span><span class="sxs-lookup"><span data-stu-id="b1621-257">Next, add a DropDownList control to the page, set its `ID` property to `MasterPageChoice`, and add two ListItems with the `Text` values of "~/Site.master" and "~/Alternate.master".</span></span>

<span data-ttu-id="b1621-258">Fügen Sie der Seite ein Schaltflächen-websteuer Element hinzu, und legen Sie dessen Eigenschaften für `ID` und `Text` auf `SaveLayout` bzw. "Layout-Auswahl speichern" fest.</span><span class="sxs-lookup"><span data-stu-id="b1621-258">Add a Button Web control to the page and set its `ID` and `Text` properties to `SaveLayout` and "Save Layout Choice", respectively.</span></span> <span data-ttu-id="b1621-259">An diesem Punkt sollte das deklarative Markup der Seite in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="b1621-259">At this point your page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](specifying-the-master-page-programmatically-cs/samples/sample16.aspx)]

<span data-ttu-id="b1621-260">Beim ersten Besuch der Seite muss die aktuell ausgewählte Masterseiten Auswahl des Benutzers angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-260">When the page is first visited we need to display the user's currently selected master page choice.</span></span> <span data-ttu-id="b1621-261">Erstellen Sie einen `Page_Load`-Ereignishandler, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="b1621-261">Create a `Page_Load` event handler and add the following code:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample17.cs)]

<span data-ttu-id="b1621-262">Der obige Code wird nur auf dem ersten Seitenbesuch ausgeführt (und nicht auf nachfolgenden Postbacks).</span><span class="sxs-lookup"><span data-stu-id="b1621-262">The above code executes only on the first page visit (and not on subsequent postbacks).</span></span> <span data-ttu-id="b1621-263">Zuerst wird überprüft, ob die Sitzungs Variable `MyMasterPage` vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="b1621-263">It first checks to see if the Session variable `MyMasterPage` exists.</span></span> <span data-ttu-id="b1621-264">Wenn dies der Fall ist, wird versucht, das passende ListItem-Element in der Dropdown Liste `MasterPageChoice` zu finden.</span><span class="sxs-lookup"><span data-stu-id="b1621-264">If it does, it attempts to find the matching ListItem in the `MasterPageChoice` DropDownList.</span></span> <span data-ttu-id="b1621-265">Wenn eine übereinstimmende ListItem gefunden wird, wird die `Selected`-Eigenschaft auf `true`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="b1621-265">If a matching ListItem is found, its `Selected` property is set to `true`.</span></span>

<span data-ttu-id="b1621-266">Wir benötigen auch Code, der die Auswahl des Benutzers in der `MyMasterPage` Sitzungsvariablen speichert.</span><span class="sxs-lookup"><span data-stu-id="b1621-266">We also need code that saves the user's choice into the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="b1621-267">Erstellen Sie einen Ereignishandler für das `Click` Ereignis der `SaveLayout` Schaltfläche, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="b1621-267">Create an event handler for the `SaveLayout` Button's `Click` event and add the following code:</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample18.cs)]

> [!NOTE]
> <span data-ttu-id="b1621-268">Wenn der `Click`-Ereignishandler beim Postback ausgeführt wird, wurde die Master Seite bereits ausgewählt.</span><span class="sxs-lookup"><span data-stu-id="b1621-268">By the time the `Click` event handler executes on postback, the master page has already been selected.</span></span> <span data-ttu-id="b1621-269">Daher ist die Auswahl der Dropdown Liste des Benutzers bis zum nächsten Besuch der Seite nicht wirksam.</span><span class="sxs-lookup"><span data-stu-id="b1621-269">Therefore, the user's drop-down list selection won't be in effect until the next page visit.</span></span> <span data-ttu-id="b1621-270">Der `Response.Redirect` zwingt den Browser, `ChooseMasterPage.aspx`erneut anzufordern.</span><span class="sxs-lookup"><span data-stu-id="b1621-270">The `Response.Redirect` forces the browser to re-request `ChooseMasterPage.aspx`.</span></span>

<span data-ttu-id="b1621-271">Wenn die `ChooseMasterPage.aspx` Seite abgeschlossen ist, besteht die letzte Aufgabe darin, `BasePage` die `MasterPageFile` Eigenschaft basierend auf dem Wert der `MyMasterPage` Sitzungsvariablen zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="b1621-271">With the `ChooseMasterPage.aspx` page complete, our final task is to have `BasePage` assign the `MasterPageFile` property based on the value of the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="b1621-272">Wenn die Sitzungs Variable nicht festgelegt ist, wird `BasePage` standardmäßig `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="b1621-272">If the Session variable is not set have `BasePage` default to `Site.master`.</span></span>

[!code-csharp[Main](specifying-the-master-page-programmatically-cs/samples/sample19.cs)]

> [!NOTE]
> <span data-ttu-id="b1621-273">Ich habe den Code verschoben, der die `MasterPageFile`-Eigenschaft des `Page` Objekts aus dem `OnPreInit` Ereignishandler und zwei separaten Methoden zuweist.</span><span class="sxs-lookup"><span data-stu-id="b1621-273">I moved the code that assigns the `Page` object's `MasterPageFile` property out of the `OnPreInit` event handler and into two separate methods.</span></span> <span data-ttu-id="b1621-274">Diese erste Methode, `SetMasterPageFile`, weist dem Wert, der von der zweiten Methode `GetMasterPageFileFromSession`zurückgegeben wird, die `MasterPageFile`-Eigenschaft zu.</span><span class="sxs-lookup"><span data-stu-id="b1621-274">This first method, `SetMasterPageFile`, assigns the `MasterPageFile` property to the value returned by the second method, `GetMasterPageFileFromSession`.</span></span> <span data-ttu-id="b1621-275">Die `SetMasterPageFile`-Methode wurde `virtual`, sodass zukünftige Klassen, die `BasePage` erweitern, Sie optional überschreiben können, um benutzerdefinierte Logik zu implementieren, falls erforderlich.</span><span class="sxs-lookup"><span data-stu-id="b1621-275">I made the `SetMasterPageFile` method `virtual` so that future classes that extend `BasePage` can optionally override it to implement custom logic, if needed.</span></span> <span data-ttu-id="b1621-276">Im nächsten Tutorial wird ein Beispiel für das Überschreiben `BasePage``SetMasterPageFile`-Eigenschaft angezeigt.</span><span class="sxs-lookup"><span data-stu-id="b1621-276">We'll see an example of overriding `BasePage`'s `SetMasterPageFile` property in the next tutorial.</span></span>

<span data-ttu-id="b1621-277">Wenn dieser Code vorhanden ist, besuchen Sie die Seite `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="b1621-277">With this code in place, visit the `ChooseMasterPage.aspx` page.</span></span> <span data-ttu-id="b1621-278">Zunächst wird die Seite `Site.master` Master ausgewählt (siehe Abbildung 6), aber der Benutzer kann eine andere Master Seite aus der Dropdown Liste auswählen.</span><span class="sxs-lookup"><span data-stu-id="b1621-278">Initially, the `Site.master` master page is selected (see Figure 6), but the user can pick a different master page from the drop-down list.</span></span>

<span data-ttu-id="b1621-279">[![Inhaltsseiten werden mithilfe der Master Seite "Site. Master" angezeigt.](specifying-the-master-page-programmatically-cs/_static/image17.png)](specifying-the-master-page-programmatically-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-279">[![Content Pages are Displayed Using the Site.master Master Page](specifying-the-master-page-programmatically-cs/_static/image17.png)](specifying-the-master-page-programmatically-cs/_static/image16.png)</span></span>

<span data-ttu-id="b1621-280">**Abbildung 06**: Inhaltsseiten werden mithilfe der `Site.master` Master Seite angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-280">**Figure 06**: Content Pages are Displayed Using the `Site.master` Master Page ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image18.png))</span></span>

<span data-ttu-id="b1621-281">[![Inhaltsseiten werden jetzt auf der Seite "Alternative Master Master" angezeigt.](specifying-the-master-page-programmatically-cs/_static/image20.png)](specifying-the-master-page-programmatically-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="b1621-281">[![Content Pages are Now Displayed Using the Alternate.master Master Page](specifying-the-master-page-programmatically-cs/_static/image20.png)](specifying-the-master-page-programmatically-cs/_static/image19.png)</span></span>

<span data-ttu-id="b1621-282">**Abbildung 07**: Inhaltsseiten werden nun über die Seite "`Alternate.master` Master" angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](specifying-the-master-page-programmatically-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b1621-282">**Figure 07**: Content Pages are Now Displayed Using the `Alternate.master` Master Page ([Click to view full-size image](specifying-the-master-page-programmatically-cs/_static/image21.png))</span></span>

## <a name="summary"></a><span data-ttu-id="b1621-283">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="b1621-283">Summary</span></span>

<span data-ttu-id="b1621-284">Wenn eine Inhaltsseite besucht wird, werden die Inhalts Steuerelemente mit den contentplachalter-Steuerelementen der Master Seite miteinander verschmolzen.</span><span class="sxs-lookup"><span data-stu-id="b1621-284">When a content page is visited, its Content controls are fused with its master page's ContentPlaceHolder controls.</span></span> <span data-ttu-id="b1621-285">Die Master Seite der Inhaltsseite wird durch die `MasterPageFile`-Eigenschaft der `Page` Klasse bezeichnet, die während der Initialisierungsphase dem `MasterPageFile`-Attribut der `@Page`-Direktive zugewiesen wird.</span><span class="sxs-lookup"><span data-stu-id="b1621-285">The content page's master page is denoted by the `Page` class's `MasterPageFile` property, which is assigned to the `@Page` directive's `MasterPageFile` attribute during the Initialization stage.</span></span> <span data-ttu-id="b1621-286">Wie in diesem Tutorial gezeigt, können Sie der `MasterPageFile`-Eigenschaft einen Wert zuweisen, sofern dies vor dem Ende der PreInit-Phase geschieht.</span><span class="sxs-lookup"><span data-stu-id="b1621-286">As this tutorial showed, we can assign a value to the `MasterPageFile` property as long as we do so before the end of the PreInit stage.</span></span> <span data-ttu-id="b1621-287">Wenn die Master Seite Programm gesteuert angegeben werden kann, wird die Tür für erweiterte Szenarien geöffnet, z. b. das dynamische Binden einer Inhaltsseite an eine Master Seite auf der Grundlage externer Faktoren.</span><span class="sxs-lookup"><span data-stu-id="b1621-287">Being able to programmatically specify the master page opens the door for more advanced scenarios, such as dynamically binding a content page to a master page based on external factors.</span></span>

<span data-ttu-id="b1621-288">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="b1621-288">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="b1621-289">Weitere nützliche Informationen</span><span class="sxs-lookup"><span data-stu-id="b1621-289">Further Reading</span></span>

<span data-ttu-id="b1621-290">Weitere Informationen zu den in diesem Tutorial behandelten Themen finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="b1621-290">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="b1621-291">ASP.NET Seiten Lebenszyklus-Diagramm</span><span class="sxs-lookup"><span data-stu-id="b1621-291">ASP.NET Page Lifecycle Diagram</span></span>](http://emanish.googlepages.com/Asp.Net2.0Lifecycle.PNG)
- [<span data-ttu-id="b1621-292">Übersicht über ASP.net page Lifecycle</span><span class="sxs-lookup"><span data-stu-id="b1621-292">ASP.NET Page Lifecycle Overview</span></span>](https://msdn.microsoft.com/library/ms178472.aspx)
- [<span data-ttu-id="b1621-293">Übersicht über ASP.NET Designs und Skins</span><span class="sxs-lookup"><span data-stu-id="b1621-293">ASP.NET Themes and Skins Overview</span></span>](https://msdn.microsoft.com/library/ykzx33wh.aspx)
- [<span data-ttu-id="b1621-294">Master Seiten: Tipps, Tricks und Traps</span><span class="sxs-lookup"><span data-stu-id="b1621-294">Master Pages: Tips, Tricks, and Traps</span></span>](http://www.odetocode.com/articles/450.aspx)
- [<span data-ttu-id="b1621-295">Designs in ASP.net</span><span class="sxs-lookup"><span data-stu-id="b1621-295">Themes in ASP.NET</span></span>](http://www.odetocode.com/articles/423.aspx)

### <a name="about-the-author"></a><span data-ttu-id="b1621-296">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="b1621-296">About the Author</span></span>

<span data-ttu-id="b1621-297">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), Autor mehrerer ASP/ASP. net-Bücher und Gründer von 4GuysFromRolla.com, hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="b1621-297">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b1621-298">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="b1621-298">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b1621-299">Sein letztes Buch ist [*Sams Teach Yourself ASP.NET 3,5 in 24 Stunden*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="b1621-299">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="b1621-300">Scott kann über [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/)erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="b1621-300">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="b1621-301">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="b1621-301">Special Thanks To</span></span>

<span data-ttu-id="b1621-302">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="b1621-302">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b1621-303">Lead Reviewer für dieses Tutorial war Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="b1621-303">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="b1621-304">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="b1621-304">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b1621-305">Wenn dies der Fall ist, löschen Sie eine Zeile bei [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="b1621-305">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b1621-306">[Zurück](master-pages-and-asp-net-ajax-cs.md)
> [Weiter](nested-master-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="b1621-306">[Previous](master-pages-and-asp-net-ajax-cs.md)
[Next](nested-master-pages-cs.md)</span></span>
