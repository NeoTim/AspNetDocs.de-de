---
uid: web-forms/overview/older-versions-security/admin/unlocking-and-approving-user-accounts-cs
title: Entsperren und Genehmigen von BenutzerkontenC#() | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial wird gezeigt, wie Sie eine Webseite für Administratoren zum Verwalten der gesperrten und genehmigten Status von Benutzern erstellen. Wir sehen uns auch an, wie neue Benutzer genehmigt werden...
ms.author: riande
ms.date: 04/01/2008
ms.assetid: 5346aab1-9974-489f-a065-ae3883b8a350
msc.legacyurl: /web-forms/overview/older-versions-security/admin/unlocking-and-approving-user-accounts-cs
msc.type: authoredcontent
ms.openlocfilehash: c19f7dfac0ddd12c2b4f3388a71a8ca0f71cbb18
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78438885"
---
# <a name="unlocking-and-approving-user-accounts-c"></a><span data-ttu-id="4304a-104">Entsperren und Genehmigen von Benutzerkonten (C#)</span><span class="sxs-lookup"><span data-stu-id="4304a-104">Unlocking and Approving User Accounts (C#)</span></span>

<span data-ttu-id="4304a-105">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4304a-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4304a-106">[Code herunterladen](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.14.zip) oder [PDF herunterladen](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial14_UnlockAndApprove_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="4304a-106">[Download Code](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.14.zip) or [Download PDF](https://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial14_UnlockAndApprove_cs.pdf)</span></span>

> <span data-ttu-id="4304a-107">In diesem Tutorial wird gezeigt, wie Sie eine Webseite für Administratoren zum Verwalten der gesperrten und genehmigten Status von Benutzern erstellen.</span><span class="sxs-lookup"><span data-stu-id="4304a-107">This tutorial shows how to build a web page for administrators to manage users' locked out and approved statuses.</span></span> <span data-ttu-id="4304a-108">Außerdem wird erläutert, wie Sie neue Benutzer erst genehmigen, nachdem Sie Ihre e-Mail-Adresse überprüft haben.</span><span class="sxs-lookup"><span data-stu-id="4304a-108">We will also see how to approve new users only after they have verified their email address.</span></span>

## <a name="introduction"></a><span data-ttu-id="4304a-109">Einführung</span><span class="sxs-lookup"><span data-stu-id="4304a-109">Introduction</span></span>

<span data-ttu-id="4304a-110">Zusammen mit einem Benutzernamen, Kennwort und e-Mail-Adresse verfügt jedes Benutzerkonto über zwei Status Felder, die vorgeben, ob sich der Benutzer bei der Website anmelden kann: gesperrt und genehmigt.</span><span class="sxs-lookup"><span data-stu-id="4304a-110">Along with a username, password, and email, each user account has two status fields that dictate whether the user can log into the site: locked out and approved.</span></span> <span data-ttu-id="4304a-111">Ein Benutzer wird automatisch gesperrt, wenn er ungültige Anmelde Informationen in der angegebenen Anzahl von Minuten festgelegt hat (die Standardeinstellungen Sperren einen Benutzer nach fünf ungültigen Anmelde versuchen innerhalb von 10 Minuten).</span><span class="sxs-lookup"><span data-stu-id="4304a-111">A user is automatically locked out if they provide invalid credentials a specified number of times within a specified number of minutes (the default settings lock a user out after 5 invalid login attempts within 10 minutes).</span></span> <span data-ttu-id="4304a-112">Der genehmigte Status ist in Szenarios nützlich, in denen sich einige Aktionen erneut ausführen müssen, bevor sich ein neuer Benutzer an der Website anmelden kann.</span><span class="sxs-lookup"><span data-stu-id="4304a-112">The approved status is useful in scenarios where some action must transpire before a new user is able to log on to the site.</span></span> <span data-ttu-id="4304a-113">Beispielsweise muss ein Benutzer möglicherweise zuerst seine e-Mail-Adresse überprüfen oder von einem Administrator genehmigt werden, bevor er sich anmelden kann.</span><span class="sxs-lookup"><span data-stu-id="4304a-113">For example, a user might need to first verify their email address or be approved by an administrator before being able to login.</span></span>

<span data-ttu-id="4304a-114">Da sich ein ausgesperrter oder nicht genehmigter Benutzer nicht anmelden kann, ist es nur natürlich, zu Fragen, wie diese Status zurückgesetzt werden können.</span><span class="sxs-lookup"><span data-stu-id="4304a-114">Because a locked out or unapproved user cannot login, it's only natural to wonder how these statuses can be reset.</span></span> <span data-ttu-id="4304a-115">ASP.NET enthält keine integrierten Funktionen oder websteuer Elemente zum Verwalten der gesperrten und genehmigten Status von Benutzern, da diese Entscheidungen auf Site-by-Site-Basis behandelt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="4304a-115">ASP.NET does not include any built-in functionality or Web controls for managing users' locked out and approved statuses, in part because these decisions need to be handled on a site-by-site basis.</span></span> <span data-ttu-id="4304a-116">Einige Standorte genehmigen möglicherweise automatisch alle neuen Benutzerkonten (Standardverhalten).</span><span class="sxs-lookup"><span data-stu-id="4304a-116">Some sites might automatically approve all new user accounts (the default behavior).</span></span> <span data-ttu-id="4304a-117">Andere Administratoren haben einen Administrator berechtigt, neue Konten zu genehmigen oder Benutzer erst zu genehmigen, wenn Sie einen Link besuchen, der an die e-Mail-Adresse gesendet wird, die bei der Registrierung</span><span class="sxs-lookup"><span data-stu-id="4304a-117">Others have an administrator approve new accounts or do not approve users until they visit a link sent to the email address provided when they signed up.</span></span> <span data-ttu-id="4304a-118">Ebenso können einige Websites Benutzer sperren, bis ein Administrator Ihren Status zurücksetzt, während andere Standorte eine e-Mail an den gesperrten Benutzer mit einer URL senden, die er zum Entsperren seines Kontos besuchen kann.</span><span class="sxs-lookup"><span data-stu-id="4304a-118">Likewise, some sites may lock out users until an administrator resets their status, while other sites send an email to the locked out user with a URL they can visit to unlock their account.</span></span>

<span data-ttu-id="4304a-119">In diesem Tutorial wird gezeigt, wie Sie eine Webseite für Administratoren zum Verwalten der gesperrten und genehmigten Status von Benutzern erstellen.</span><span class="sxs-lookup"><span data-stu-id="4304a-119">This tutorial shows how to build a web page for administrators to manage users' locked out and approved statuses.</span></span> <span data-ttu-id="4304a-120">Außerdem wird erläutert, wie Sie neue Benutzer erst genehmigen, nachdem Sie Ihre e-Mail-Adresse überprüft haben.</span><span class="sxs-lookup"><span data-stu-id="4304a-120">We will also see how to approve new users only after they have verified their email address.</span></span>

## <a name="step-1-managing-users-locked-out-and-approved-statuses"></a><span data-ttu-id="4304a-121">Schritt 1: Verwalten der gesperrten und genehmigten Status von Benutzern</span><span class="sxs-lookup"><span data-stu-id="4304a-121">Step 1: Managing Users' Locked Out and Approved Statuses</span></span>

<span data-ttu-id="4304a-122"><a id="Tutorial12"> </a>Im Tutorial [*zum Aufbauen einer Schnittstelle zum Auswählen eines Benutzerkontos aus vielen*](building-an-interface-to-select-one-user-account-from-many-cs.md) Lernprogrammen haben wir eine Seite erstellt, die jedes Benutzerkonto in einer auslagerten, gefilterten GridView aufführte.</span><span class="sxs-lookup"><span data-stu-id="4304a-122">In the <a id="Tutorial12"></a>[*Building an Interface to Select One User Account from Many*](building-an-interface-to-select-one-user-account-from-many-cs.md) tutorial we constructed a page that listed each user account in a paged, filtered GridView.</span></span> <span data-ttu-id="4304a-123">Das Raster listet den Namen und die e-Mail-Adresse der einzelnen Benutzer, deren genehmigte und ausgesperrte Status, ob Sie derzeit online sind, und alle Kommentare zum Benutzer auf.</span><span class="sxs-lookup"><span data-stu-id="4304a-123">The grid lists each user's name and email, their approved and locked out statuses, whether they're currently online, and any comments about the user.</span></span> <span data-ttu-id="4304a-124">Zum Verwalten der genehmigten und gesperrten Status von Benutzern könnten wir dieses Raster bearbeitbar machen.</span><span class="sxs-lookup"><span data-stu-id="4304a-124">To manage users' approved and locked out statuses, we could make this grid editable.</span></span> <span data-ttu-id="4304a-125">Um den genehmigten Status eines Benutzers zu ändern, würde der Administrator zuerst das Benutzerkonto suchen und dann die zugehörige GridView-Zeile bearbeiten und das Kontrollkästchen genehmigt aktivieren bzw. deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="4304a-125">To change a user's approved status, the administrator would first locate the user account and then edit the corresponding GridView row, checking or unchecking the approved checkbox.</span></span> <span data-ttu-id="4304a-126">Alternativ können wir die genehmigten und gesperrten Status über eine separate ASP.NET-Seite verwalten.</span><span class="sxs-lookup"><span data-stu-id="4304a-126">Alternatively, we could manage the approved and locked out statuses through a separate ASP.NET page.</span></span>

<span data-ttu-id="4304a-127">In diesem Tutorial verwenden wir zwei ASP.NET Seiten: `ManageUsers.aspx` und `UserInformation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="4304a-127">For this tutorial let's use two ASP.NET pages: `ManageUsers.aspx` and `UserInformation.aspx`.</span></span> <span data-ttu-id="4304a-128">Die Idee hierbei ist, dass `ManageUsers.aspx` die Benutzerkonten im System auflistet, während `UserInformation.aspx` es dem Administrator ermöglicht, die genehmigten und gesperrten Status für einen bestimmten Benutzer zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="4304a-128">The idea here is that `ManageUsers.aspx` lists the user accounts in the system, while `UserInformation.aspx` enables the administrator to manage the approved and locked out statuses for a specific user.</span></span> <span data-ttu-id="4304a-129">Die erste Geschäftsordnung besteht darin, die GridView in `ManageUsers.aspx` zu erweitern, um ein HyperLinkField einzuschließen, das als Spalte mit links gerendert wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-129">Our first order of business is to augment the GridView in `ManageUsers.aspx` to include a HyperLinkField, which renders as a column of links.</span></span> <span data-ttu-id="4304a-130">Jeder Link soll auf `UserInformation.aspx?user=UserName`verweisen, wobei *username* der Name des zu bearbeitenden Benutzers ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-130">We want each link to point to `UserInformation.aspx?user=UserName`, where *UserName* is the name of the user to edit.</span></span>

> [!NOTE]
> <span data-ttu-id="4304a-131">Wenn Sie den Code für das <a id="Tutorial13"> </a>Tutorial zum wieder [*herstellen und ändern*](recovering-and-changing-passwords-cs.md) von Kenn Wörtern heruntergeladen haben, haben Sie möglicherweise bemerkt, dass die `ManageUsers.aspx` Seite bereits einen Satz von "verwalten"-Links enthält und die `UserInformation.aspx` Seite eine Schnittstelle zum Ändern des Kennworts des ausgewählten Benutzers bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="4304a-131">If you downloaded the code for the <a id="Tutorial13"></a>[*Recovering and Changing Passwords*](recovering-and-changing-passwords-cs.md) tutorial you may have noticed that the `ManageUsers.aspx` page already contains a set of "Manage" links and the `UserInformation.aspx` page provides an interface for changing the selected user's password.</span></span> <span data-ttu-id="4304a-132">Ich entschied mich, diese Funktionalität nicht in dem Code zu replizieren, der diesem Tutorial zugeordnet ist, weil die Mitgliedschafts-API umgangen und direkt mit der SQL Server Datenbank betrieben wurde, um das Kennwort eines Benutzers zu ändern.</span><span class="sxs-lookup"><span data-stu-id="4304a-132">I decided not to replicate that functionality in the code associated with this tutorial because it worked by circumventing the Membership API and operating directly with the SQL Server database to change a user's password.</span></span> <span data-ttu-id="4304a-133">Dieses Tutorial beginnt von Grund auf mit der Seite "`UserInformation.aspx`".</span><span class="sxs-lookup"><span data-stu-id="4304a-133">This tutorial starts from scratch with the `UserInformation.aspx` page.</span></span>

### <a name="adding-manage-links-to-theuseraccountsgridview"></a><span data-ttu-id="4304a-134">Hinzufügen von "Manage"-Links zum`UserAccounts`GridView</span><span class="sxs-lookup"><span data-stu-id="4304a-134">Adding "Manage" Links to the`UserAccounts`GridView</span></span>

<span data-ttu-id="4304a-135">Öffnen Sie die Seite `ManageUsers.aspx`, und fügen Sie der `UserAccounts` GridView ein HyperLinkField hinzu.</span><span class="sxs-lookup"><span data-stu-id="4304a-135">Open the `ManageUsers.aspx` page and add a HyperLinkField to the `UserAccounts` GridView.</span></span> <span data-ttu-id="4304a-136">Legen Sie die `Text`-Eigenschaft des HyperLinkField auf "Manage" und seine `DataNavigateUrlFields`-und `DataNavigateUrlFormatString`-Eigenschaften auf `UserName` bzw. "UserInformation. aspx? User ={0}" fest.</span><span class="sxs-lookup"><span data-stu-id="4304a-136">Set the HyperLinkField's `Text` property to "Manage" and its `DataNavigateUrlFields` and `DataNavigateUrlFormatString` properties to `UserName` and "UserInformation.aspx?user={0}", respectively.</span></span> <span data-ttu-id="4304a-137">Mit diesen Einstellungen wird das HyperLinkField so konfiguriert, dass alle Hyperlinks den Text "Manage" anzeigen, aber jeder Link übergibt den entsprechenden Wert für den *Benutzernamen* an die QueryString.</span><span class="sxs-lookup"><span data-stu-id="4304a-137">These settings configure the HyperLinkField such that all of the hyperlinks display the text "Manage", but each link passes in the appropriate *UserName* value into the querystring.</span></span>

<span data-ttu-id="4304a-138">Nehmen Sie nach dem Hinzufügen des HyperLinkField zur GridView einen Moment Zeit, um die `ManageUsers.aspx` Seite über einen Browser anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="4304a-138">After adding the HyperLinkField to the GridView, take a moment to view the `ManageUsers.aspx` page through a browser.</span></span> <span data-ttu-id="4304a-139">Wie in Abbildung 1 gezeigt, enthält jede GridView-Zeile nun den Link "verwalten".</span><span class="sxs-lookup"><span data-stu-id="4304a-139">As Figure 1 shows, each GridView row now includes a "Manage" link.</span></span> <span data-ttu-id="4304a-140">Der Link "verwalten" für Bruce verweist auf `UserInformation.aspx?user=Bruce`, während der Link "verwalten" für Dave auf `UserInformation.aspx?user=Dave`verweist.</span><span class="sxs-lookup"><span data-stu-id="4304a-140">The "Manage" link for Bruce points to `UserInformation.aspx?user=Bruce`, whereas the "Manage" link for Dave points to `UserInformation.aspx?user=Dave`.</span></span>

<span data-ttu-id="4304a-141">[![das HyperLinkField eine](unlocking-and-approving-user-accounts-cs/_static/image2.png)](unlocking-and-approving-user-accounts-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-141">[![The HyperLinkField Adds a](unlocking-and-approving-user-accounts-cs/_static/image2.png)](unlocking-and-approving-user-accounts-cs/_static/image1.png)</span></span>

<span data-ttu-id="4304a-142">**Abbildung 1**: das HyperLinkField fügt für jedes Benutzerkonto den Link "verwalten" hinzu ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image3.png)).</span><span class="sxs-lookup"><span data-stu-id="4304a-142">**Figure 1**: The HyperLinkField Adds a "Manage" Link for Each User Account  ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image3.png))</span></span>

<span data-ttu-id="4304a-143">Wir erstellen die Benutzeroberfläche und den Code für die `UserInformation.aspx` Seite in einem Moment, aber zunächst wird erläutert, wie Sie die gesperrten und genehmigten Status eines Benutzers Programm gesteuert ändern.</span><span class="sxs-lookup"><span data-stu-id="4304a-143">We will create the user interface and code for the `UserInformation.aspx` page in a moment, but first let's talk about how to programmatically change a user's locked out and approved statuses.</span></span> <span data-ttu-id="4304a-144">Die [`MembershipUser`-Klasse](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) verfügt über [`IsLockedOut`](https://msdn.microsoft.com/library/system.web.security.membershipuser.islockedout.aspx) -und [`IsApproved`-Eigenschaften](https://msdn.microsoft.com/library/system.web.security.membershipuser.isapproved.aspx).</span><span class="sxs-lookup"><span data-stu-id="4304a-144">The [`MembershipUser` class](https://msdn.microsoft.com/library/system.web.security.membershipuser.aspx) has [`IsLockedOut`](https://msdn.microsoft.com/library/system.web.security.membershipuser.islockedout.aspx) and [`IsApproved` properties](https://msdn.microsoft.com/library/system.web.security.membershipuser.isapproved.aspx).</span></span> <span data-ttu-id="4304a-145">Die `IsLockedOut`-Eigenschaft ist schreibgeschützt.</span><span class="sxs-lookup"><span data-stu-id="4304a-145">The `IsLockedOut` property is read-only.</span></span> <span data-ttu-id="4304a-146">Es gibt keinen Mechanismus zum programmgesteuerten Sperren eines Benutzers. um einen Benutzer zu entsperren, verwenden Sie die [`UnlockUser`-Methode](https://msdn.microsoft.com/library/system.web.security.membershipuser.unlockuser.aspx)der `MembershipUser`-Klasse.</span><span class="sxs-lookup"><span data-stu-id="4304a-146">There is no mechanism to programmatically lock out a user; to unlock a user, use the `MembershipUser` class's [`UnlockUser` method](https://msdn.microsoft.com/library/system.web.security.membershipuser.unlockuser.aspx).</span></span> <span data-ttu-id="4304a-147">Die `IsApproved`-Eigenschaft ist lesbar und beschreibbar.</span><span class="sxs-lookup"><span data-stu-id="4304a-147">The `IsApproved` property is readable and writeable.</span></span> <span data-ttu-id="4304a-148">Um Änderungen an dieser Eigenschaft zu speichern, muss die [`UpdateUser`-Methode](https://msdn.microsoft.com/library/system.web.security.membership.updateuser.aspx)der `Membership` Klasse aufgerufen werden, wobei das geänderte `MembershipUser` Objekt übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-148">To save any changes to this property, we need to call the `Membership` class's [`UpdateUser` method](https://msdn.microsoft.com/library/system.web.security.membership.updateuser.aspx), passing in the modified `MembershipUser` object.</span></span>

<span data-ttu-id="4304a-149">Da die `IsApproved`-Eigenschaft lesbar und schreibbar ist, ist das CheckBox-Steuerelement wahrscheinlich das beste Benutzeroberflächen Element zum Konfigurieren dieser Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4304a-149">Because the `IsApproved` property is readable and writeable, a CheckBox control is probably the best user interface element for configuring this property.</span></span> <span data-ttu-id="4304a-150">Ein Kontrollkästchen funktioniert jedoch nicht für die `IsLockedOut`-Eigenschaft, da ein Administrator einen Benutzer nicht sperren kann, sondern darf nur einen Benutzer entsperren.</span><span class="sxs-lookup"><span data-stu-id="4304a-150">However, a CheckBox will not work for the `IsLockedOut` property because an administrator cannot lock out a user, she may only unlock a user.</span></span> <span data-ttu-id="4304a-151">Eine geeignete Benutzeroberfläche für die `IsLockedOut`-Eigenschaft ist eine Schaltfläche, mit der das Benutzerkonto entsperrt wird, wenn darauf geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-151">A suitable user interface for the `IsLockedOut` property is a Button that, when clicked, unlocks the user account.</span></span> <span data-ttu-id="4304a-152">Diese Schaltfläche sollte nur aktiviert werden, wenn der Benutzer gesperrt ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-152">This Button should only be enabled if the user is locked out.</span></span>

### <a name="creating-theuserinformationaspxpage"></a><span data-ttu-id="4304a-153">Erstellen der Seite "`UserInformation.aspx`"</span><span class="sxs-lookup"><span data-stu-id="4304a-153">Creating the`UserInformation.aspx`Page</span></span>

<span data-ttu-id="4304a-154">Nun können wir die Benutzeroberfläche in `UserInformation.aspx`implementieren.</span><span class="sxs-lookup"><span data-stu-id="4304a-154">We are now ready to implement the user interface in `UserInformation.aspx`.</span></span> <span data-ttu-id="4304a-155">Öffnen Sie diese Seite, und fügen Sie die folgenden websteuer Elemente hinzu:</span><span class="sxs-lookup"><span data-stu-id="4304a-155">Open this page and add the following Web controls:</span></span>

- <span data-ttu-id="4304a-156">Ein Hyperlink-Steuerelement, das den Administrator auf die `ManageUsers.aspx` Seite zurückgibt, wenn darauf geklickt wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-156">A HyperLink control that, when clicked, returns the administrator to the `ManageUsers.aspx` page.</span></span>
- <span data-ttu-id="4304a-157">Ein Bezeichnungs-websteuer Element zum Anzeigen des Namens des ausgewählten Benutzers.</span><span class="sxs-lookup"><span data-stu-id="4304a-157">A Label Web control for displaying the selected user's name.</span></span> <span data-ttu-id="4304a-158">Legen Sie den `ID` dieser Bezeichnung fest, um `UserNameLabel`, und löschen Sie die `Text`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4304a-158">Set this Label's `ID` to `UserNameLabel` and clear out its `Text` property.</span></span>
- <span data-ttu-id="4304a-159">Ein CheckBox-Steuerelement mit dem Namen `IsApproved`.</span><span class="sxs-lookup"><span data-stu-id="4304a-159">A CheckBox control named `IsApproved`.</span></span> <span data-ttu-id="4304a-160">Legen Sie die `AutoPostBack`-Eigenschaft auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="4304a-160">Set its `AutoPostBack` property to `true`.</span></span>
- <span data-ttu-id="4304a-161">Ein Label-Steuerelement zum Anzeigen des letzten gesperrten Datums des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="4304a-161">A Label control for displaying the user's last locked out date.</span></span> <span data-ttu-id="4304a-162">Benennen Sie diese Bezeichnung `LastLockedOutDateLabel`, und löschen Sie die `Text`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4304a-162">Name this Label `LastLockedOutDateLabel` and clear out its `Text` property.</span></span>
- <span data-ttu-id="4304a-163">Eine Schaltfläche zum Entsperren des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="4304a-163">A Button for unlocking the user.</span></span> <span data-ttu-id="4304a-164">Benennen Sie diese Schaltfläche `UnlockUserButton` und legen Sie die `Text`-Eigenschaft auf "Benutzer entsperren" fest.</span><span class="sxs-lookup"><span data-stu-id="4304a-164">Name this Button `UnlockUserButton` and set its `Text` property to "Unlock User".</span></span>
- <span data-ttu-id="4304a-165">Ein Label-Steuerelement zum Anzeigen von Statusmeldungen, z. b. "der genehmigte Status des Benutzers wurde aktualisiert."</span><span class="sxs-lookup"><span data-stu-id="4304a-165">A Label control for displaying status messages, such as, "The user's approved status has been updated."</span></span> <span data-ttu-id="4304a-166">Benennen Sie dieses Steuerelement `StatusMessage`, löschen Sie dessen `Text`-Eigenschaft, und legen Sie dessen Eigenschaft `CssClass` auf `Important`fest.</span><span class="sxs-lookup"><span data-stu-id="4304a-166">Name this control `StatusMessage`, clear out its `Text` property, and set its `CssClass` property to `Important`.</span></span> <span data-ttu-id="4304a-167">(Die `Important` CSS-Klasse wird in der `Styles.css` Stylesheet-Datei definiert. Sie zeigt den entsprechenden Text in einer großen, roten Schriftart an.)</span><span class="sxs-lookup"><span data-stu-id="4304a-167">(The `Important` CSS class is defined in the `Styles.css` stylesheet file; it displays the corresponding text in a large, red font.)</span></span>

<span data-ttu-id="4304a-168">Nach dem Hinzufügen dieser Steuerelemente sollte das Designansicht in Visual Studio ähnlich dem Screenshot in Abbildung 2 aussehen.</span><span class="sxs-lookup"><span data-stu-id="4304a-168">After adding these controls, the Design view in Visual Studio should look similar to the screen shot in Figure 2.</span></span>

<span data-ttu-id="4304a-169">[![erstellen Sie die Benutzeroberfläche für "UserInformation. aspx".](unlocking-and-approving-user-accounts-cs/_static/image5.png)](unlocking-and-approving-user-accounts-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-169">[![Create the User Interface for UserInformation.aspx](unlocking-and-approving-user-accounts-cs/_static/image5.png)](unlocking-and-approving-user-accounts-cs/_static/image4.png)</span></span>

<span data-ttu-id="4304a-170">**Abbildung 2**: Erstellen der Benutzeroberfläche für `UserInformation.aspx` ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="4304a-170">**Figure 2**: Create the User Interface for `UserInformation.aspx` ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image6.png))</span></span>

<span data-ttu-id="4304a-171">Wenn die Benutzeroberfläche fertig ist, besteht die nächste Aufgabe darin, das Kontrollkästchen "`IsApproved`" und andere Steuerelemente basierend auf den Informationen des ausgewählten Benutzers festzulegen.</span><span class="sxs-lookup"><span data-stu-id="4304a-171">With the user interface complete, our next task is to set the `IsApproved` CheckBox and other controls based on the selected user's information.</span></span> <span data-ttu-id="4304a-172">Erstellen Sie einen Ereignishandler für das `Load` Ereignis der Seite, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="4304a-172">Create an event handler for the page's `Load` event and add the following code:</span></span>

[!code-csharp[Main](unlocking-and-approving-user-accounts-cs/samples/sample1.cs)]

<span data-ttu-id="4304a-173">Der obige Code beginnt mit dem sicherstellen, dass dies der erste Besuch der Seite und kein nachfolgendes Postback ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-173">The above code starts by ensuring that this is the first visit to the page and not a subsequent postback.</span></span> <span data-ttu-id="4304a-174">Anschließend liest Sie den Benutzernamen, der durch das `user` QueryString-Feld weitergegeben wurde, und ruft Informationen zu diesem Benutzerkonto über die `Membership.GetUser(username)`-Methode ab.</span><span class="sxs-lookup"><span data-stu-id="4304a-174">It then reads the username passed through the `user` querystring field and retrieves information about that user account via the `Membership.GetUser(username)` method.</span></span> <span data-ttu-id="4304a-175">Wenn kein Benutzername über die QueryString angegeben wurde, oder wenn der angegebene Benutzer nicht gefunden wurde, wird der Administrator zurück an die `ManageUsers.aspx` Seite gesendet.</span><span class="sxs-lookup"><span data-stu-id="4304a-175">If no username was supplied through the querystring, or if the specified user could not be found, the administrator is sent back to the `ManageUsers.aspx` page.</span></span>

<span data-ttu-id="4304a-176">Der `UserName` Wert des `MembershipUser` Objekts wird dann im `UserNameLabel` angezeigt, und das Kontrollkästchen `IsApproved` wird anhand des `IsApproved`-Eigenschafts Werts geprüft.</span><span class="sxs-lookup"><span data-stu-id="4304a-176">The `MembershipUser` object's `UserName` value is then displayed in the `UserNameLabel` and the `IsApproved` CheckBox is checked based on the `IsApproved` property value.</span></span>

<span data-ttu-id="4304a-177">Die [`LastLockoutDate`-Eigenschaft](https://msdn.microsoft.com/library/system.web.security.membershipuser.lastlockoutdate.aspx) des `MembershipUser` Objekts gibt einen `DateTime` Wert zurück, der angibt, wann der Benutzer zuletzt gesperrt wurde. Wenn der Benutzer nie gesperrt wurde, hängt der zurückgegebene Wert vom Mitgliedschafts Anbieter ab.</span><span class="sxs-lookup"><span data-stu-id="4304a-177">The `MembershipUser` object's [`LastLockoutDate` property](https://msdn.microsoft.com/library/system.web.security.membershipuser.lastlockoutdate.aspx) returns a `DateTime` value indicating when the user was last locked out. If the user has never been locked out, the value returned depends on the Membership provider.</span></span> <span data-ttu-id="4304a-178">Wenn ein neues Konto erstellt wird, legt der `SqlMembershipProvider` das `LastLockoutDate` Feld der `aspnet_Membership` Tabelle auf `1754-01-01 12:00:00 AM`fest.</span><span class="sxs-lookup"><span data-stu-id="4304a-178">When a new account is created, the `SqlMembershipProvider` sets the `aspnet_Membership` table's `LastLockoutDate` field to `1754-01-01 12:00:00 AM`.</span></span> <span data-ttu-id="4304a-179">Der obige Code zeigt eine leere Zeichenfolge in der `LastLockoutDateLabel` an, wenn die `LastLockoutDate`-Eigenschaft vor Jahr 2000. Andernfalls wird der Datums Teil der `LastLockoutDate`-Eigenschaft in der Bezeichnung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="4304a-179">The above code displays an empty string in the `LastLockoutDateLabel` if the `LastLockoutDate` property occurs before year 2000; otherwise, the date portion of the `LastLockoutDate` property is displayed in the Label.</span></span> <span data-ttu-id="4304a-180">Die Eigenschaft "`UnlockUserButton'` s `Enabled`" wird auf den gesperrten Status des Benutzers festgelegt, was bedeutet, dass diese Schaltfläche nur aktiviert wird, wenn der Benutzer gesperrt ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-180">The `UnlockUserButton'` s `Enabled` property is set to the user's locked out status, meaning that this Button will only be enabled if the user is locked out.</span></span>

<span data-ttu-id="4304a-181">Nehmen Sie sich einen Moment Zeit, um die `UserInformation.aspx` Seite über einen Browser zu testen.</span><span class="sxs-lookup"><span data-stu-id="4304a-181">Take a moment to test the `UserInformation.aspx` page through a browser.</span></span> <span data-ttu-id="4304a-182">Sie müssen natürlich bei `ManageUsers.aspx` beginnen und ein Benutzerkonto auswählen, das verwaltet werden soll.</span><span class="sxs-lookup"><span data-stu-id="4304a-182">You will, of course, need to start at `ManageUsers.aspx` and select a user account to manage.</span></span> <span data-ttu-id="4304a-183">Beachten Sie, dass das Kontrollkästchen `IsApproved` bei der Ankunft bei `UserInformation.aspx`nur aktiviert ist, wenn der Benutzer genehmigt ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-183">Upon arriving at `UserInformation.aspx`, note that the `IsApproved` CheckBox is only checked if the user is approved.</span></span> <span data-ttu-id="4304a-184">Wenn der Benutzer jemals gesperrt wurde, wird das Datum der letzten Sperrung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="4304a-184">If the user has ever been locked out, their last locked out date is displayed.</span></span> <span data-ttu-id="4304a-185">Die Schaltfläche Benutzer entsperren ist nur aktiviert, wenn der Benutzer zurzeit gesperrt ist. Wenn Sie das `IsApproved` Kontrollkästchen aktivieren oder deaktivieren, oder indem Sie auf die Schaltfläche Benutzer entsperren klicken, wird ein Postback ausgelöst, aber es werden keine Änderungen am Benutzerkonto vorgenommen, da wir noch keine Ereignishandler für diese Ereignisse erstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="4304a-185">The Unlock User button is enabled only if the user is currently locked out. Checking or unchecking the `IsApproved` CheckBox or clicking the Unlock User button causes a postback, but no modifications are made to the user account because we've yet to create event handlers for these events.</span></span>

<span data-ttu-id="4304a-186">Kehren Sie zu Visual Studio zurück, und erstellen Sie Ereignishandler für das `CheckedChanged` Ereignis `IsApproved` und das `Click` Ereignis der `UnlockUser` Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="4304a-186">Return to Visual Studio and create event handlers for the `IsApproved` CheckBox's `CheckedChanged` event and the `UnlockUser` Button's `Click` event.</span></span> <span data-ttu-id="4304a-187">Legen Sie im Ereignishandler für `CheckedChanged` die `IsApproved`-Eigenschaft des Benutzers auf die `Checked`-Eigenschaft des Kontrollkästchens fest, und speichern Sie die Änderungen dann über einen-Befehl `Membership.UpdateUser`.</span><span class="sxs-lookup"><span data-stu-id="4304a-187">In the `CheckedChanged` event handler, set the user's `IsApproved` property to the `Checked` property of the CheckBox and then save the changes via a call to `Membership.UpdateUser`.</span></span> <span data-ttu-id="4304a-188">Im `Click`-Ereignishandler können Sie einfach die `UnlockUser`-Methode des `MembershipUser`-Objekts aufzurufen.</span><span class="sxs-lookup"><span data-stu-id="4304a-188">In the `Click` event handler, simply call the `MembershipUser` object's `UnlockUser` method.</span></span> <span data-ttu-id="4304a-189">Zeigen Sie in beiden Ereignis Handlern eine passende Meldung in der `StatusMessage` Bezeichnung an.</span><span class="sxs-lookup"><span data-stu-id="4304a-189">In both event handlers, display a suitable message in the `StatusMessage` Label.</span></span>

[!code-csharp[Main](unlocking-and-approving-user-accounts-cs/samples/sample2.cs)]

### <a name="testing-theuserinformationaspxpage"></a><span data-ttu-id="4304a-190">Testen der Seite "`UserInformation.aspx`"</span><span class="sxs-lookup"><span data-stu-id="4304a-190">Testing the`UserInformation.aspx`Page</span></span>

<span data-ttu-id="4304a-191">Wenn diese Ereignishandler vorhanden sind, besuchen Sie die Seite erneut, und wiederholen Sie die Genehmigung für einen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="4304a-191">With these event handlers in place, revisit the page and unapproved a user.</span></span> <span data-ttu-id="4304a-192">Wie in Abbildung 3 gezeigt, sollte auf der Seite eine kurze Meldung angezeigt werden, die anzeigt, dass die `IsApproved`-Eigenschaft des Benutzers erfolgreich geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="4304a-192">As Figure 3 shows, you should see a brief message on the page indicating that the user's `IsApproved` property was successfully modified.</span></span>

<span data-ttu-id="4304a-193">[![Chris wurde nicht genehmigt](unlocking-and-approving-user-accounts-cs/_static/image8.png)](unlocking-and-approving-user-accounts-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-193">[![Chris has been Unapproved](unlocking-and-approving-user-accounts-cs/_static/image8.png)](unlocking-and-approving-user-accounts-cs/_static/image7.png)</span></span>

<span data-ttu-id="4304a-194">**Abbildung 3**: Chris ist nicht genehmigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="4304a-194">**Figure 3**: Chris has been Unapproved  ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image9.png))</span></span>

<span data-ttu-id="4304a-195">Melden Sie sich als nächstes an, und melden Sie sich als der Benutzer an, dessen Konto soeben nicht genehmigt war.</span><span class="sxs-lookup"><span data-stu-id="4304a-195">Next, logout and try to login as the user whose account was just unapproved.</span></span> <span data-ttu-id="4304a-196">Da der Benutzer nicht genehmigt ist, kann er sich nicht anmelden.</span><span class="sxs-lookup"><span data-stu-id="4304a-196">Because the user is not approved, they cannot login.</span></span> <span data-ttu-id="4304a-197">Standardmäßig zeigt das Login-Steuerelement die gleiche Meldung an, wenn sich der Benutzer unabhängig von der Ursache nicht anmelden kann.</span><span class="sxs-lookup"><span data-stu-id="4304a-197">By default, the Login control displays the same message if the user cannot login, regardless of the reason.</span></span> <span data-ttu-id="4304a-198">Im <a id="Tutorial6"> </a>Tutorial überprüfen von [*Benutzer Anmelde Informationen anhand des Mitgliedschafts Benutzer Stores*](../membership/validating-user-credentials-against-the-membership-user-store-cs.md) haben wir uns jedoch mit der Verbesserung des Anmeldungs Steuer Elements für die Anzeige einer geeigneteren Nachricht beschäftigt.</span><span class="sxs-lookup"><span data-stu-id="4304a-198">But in the <a id="Tutorial6"></a>[*Validating User Credentials Against the Membership User Store*](../membership/validating-user-credentials-against-the-membership-user-store-cs.md) tutorial we looked at enhancing the Login control to display a more appropriate message.</span></span> <span data-ttu-id="4304a-199">Wie Abbildung 4 zeigt, wird Chris eine Meldung mit dem Hinweis angezeigt, dass er sich nicht anmelden kann, weil sein Konto noch nicht genehmigt wurde.</span><span class="sxs-lookup"><span data-stu-id="4304a-199">As Figure 4 shows, Chris is shown a message explaining that he cannot login because his account is not yet approved.</span></span>

<span data-ttu-id="4304a-200">[![Chris kann sich nicht anmelden, da das Konto nicht genehmigt ist.](unlocking-and-approving-user-accounts-cs/_static/image11.png)](unlocking-and-approving-user-accounts-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-200">[![Chris Cannot Login Because His Account is Unapproved](unlocking-and-approving-user-accounts-cs/_static/image11.png)](unlocking-and-approving-user-accounts-cs/_static/image10.png)</span></span>

<span data-ttu-id="4304a-201">**Abbildung 4**: Chris kann sich nicht anmelden, da das Konto nicht genehmigt ist ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="4304a-201">**Figure 4**: Chris Cannot Login Because His Account is Unapproved  ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image12.png))</span></span>

<span data-ttu-id="4304a-202">Um die ausgesperrte Funktionalität zu testen, versuchen Sie, sich als genehmigter Benutzer anzumelden, aber verwenden Sie ein falsches Kennwort.</span><span class="sxs-lookup"><span data-stu-id="4304a-202">To test the locked out functionality, attempt to login as an approved user, but use an incorrect password.</span></span> <span data-ttu-id="4304a-203">Wiederholen Sie diesen Vorgang so oft wie nötig, bis das Konto des Benutzers gesperrt wurde. Das Anmeldungs Steuerelement wurde ebenfalls aktualisiert und zeigt eine benutzerdefinierte Meldung an, wenn versucht wird, sich bei einem gesperrten Konto anzumelden.</span><span class="sxs-lookup"><span data-stu-id="4304a-203">Repeat this process the necessary number of times until the user's account has been locked out. The Login control was also updated to show a custom message if attempting to login from a locked out account.</span></span> <span data-ttu-id="4304a-204">Sie wissen, dass ein Konto gesperrt wurde, nachdem Sie die folgende Meldung auf der Anmeldeseite angezeigt haben: "Ihr Konto wurde aufgrund von zu vielen ungültigen Anmelde versuchen gesperrt.</span><span class="sxs-lookup"><span data-stu-id="4304a-204">You know that an account has been locked out once you start seeing the following message at the login page: "Your account has been locked out because of too many invalid login attempts.</span></span> <span data-ttu-id="4304a-205">Wenden Sie sich an den Administrator, damit das Konto entsperrt wird. "</span><span class="sxs-lookup"><span data-stu-id="4304a-205">Please contact the administrator to have your account unlocked."</span></span>

<span data-ttu-id="4304a-206">Kehren Sie zur Seite "`ManageUsers.aspx`" zurück, und klicken Sie auf den Link "verwalten" für den gesperrten Benutzer.</span><span class="sxs-lookup"><span data-stu-id="4304a-206">Return to the `ManageUsers.aspx` page and click the Manage link for the locked out user.</span></span> <span data-ttu-id="4304a-207">Wie in Abbildung 5 gezeigt, sollte ein Wert in der `LastLockedOutDateLabel` die Schaltfläche Unlock User aktiviert werden soll.</span><span class="sxs-lookup"><span data-stu-id="4304a-207">As Figure 5 shows, you should see a value in the `LastLockedOutDateLabel` the Unlock User button should be enabled.</span></span> <span data-ttu-id="4304a-208">Klicken Sie auf die Schaltfläche Benutzer entsperren, um das Benutzerkonto zu entsperren.</span><span class="sxs-lookup"><span data-stu-id="4304a-208">Click the Unlock User button to unlock the user account.</span></span> <span data-ttu-id="4304a-209">Nachdem Sie den Benutzer entsperrt haben, kann er sich erneut anmelden.</span><span class="sxs-lookup"><span data-stu-id="4304a-209">Once you have unlocked the user, they will be able to login again.</span></span>

<span data-ttu-id="4304a-210">[![Dave wurde aus dem System gesperrt.](unlocking-and-approving-user-accounts-cs/_static/image14.png)](unlocking-and-approving-user-accounts-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-210">[![Dave Has Been Locked Out of the System](unlocking-and-approving-user-accounts-cs/_static/image14.png)](unlocking-and-approving-user-accounts-cs/_static/image13.png)</span></span>

<span data-ttu-id="4304a-211">**Abbildung 5**: Dave wurde aus dem System gesperrt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="4304a-211">**Figure 5**: Dave Has Been Locked Out of the System  ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image15.png))</span></span>

## <a name="step-2-specifying-new-users-approved-status"></a><span data-ttu-id="4304a-212">Schritt 2: Angeben des genehmigten Status neuer Benutzer</span><span class="sxs-lookup"><span data-stu-id="4304a-212">Step 2: Specifying New Users' Approved Status</span></span>

<span data-ttu-id="4304a-213">Der genehmigte Status ist in Szenarios nützlich, in denen eine Aktion ausgeführt werden soll, bevor ein neuer Benutzer sich anmelden und auf die benutzerspezifischen Funktionen der Website zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="4304a-213">The approved status is useful in scenarios where you want some action to be performed before a new user is able to login and access the user-specific features of the site.</span></span> <span data-ttu-id="4304a-214">Beispielsweise können Sie eine private Website ausführen, auf der nur authentifizierte Benutzer auf alle Seiten mit Ausnahme der Anmelde-und Registrierungsseiten zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="4304a-214">For example, you may be running a private website where all pages, except for the login and signup pages, are accessible only to authenticated users.</span></span> <span data-ttu-id="4304a-215">Was passiert jedoch, wenn ein unbekannter Ihre Website erreicht, die Registrierungsseite findet und ein Konto erstellt?</span><span class="sxs-lookup"><span data-stu-id="4304a-215">But what happens if a stranger reaches your website, finds the signup page, and creates an account?</span></span> <span data-ttu-id="4304a-216">Um dies zu verhindern, können Sie die Registrierungsseite in einen `Administration` Ordner verschieben und verlangen, dass ein Administrator jedes Konto manuell erstellt.</span><span class="sxs-lookup"><span data-stu-id="4304a-216">To prevent this from happening you could move the signup page to an `Administration` folder, and require that an administrator manually create each account.</span></span> <span data-ttu-id="4304a-217">Alternativ können Sie allen Benutzern gestatten, sich zu registrieren, aber den Zugriff auf die Website zu verbieten, bis ein Administrator das Benutzerkonto genehmigt.</span><span class="sxs-lookup"><span data-stu-id="4304a-217">Alternatively, you could allow anyone to signup, but prohibit site access until an administrator approves the user account.</span></span>

<span data-ttu-id="4304a-218">Standardmäßig genehmigt das Steuerelement "kreateuserwizard" neue Konten.</span><span class="sxs-lookup"><span data-stu-id="4304a-218">By default, the CreateUserWizard control approves new accounts.</span></span> <span data-ttu-id="4304a-219">Sie können dieses Verhalten mithilfe der [`DisableCreatedUser`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx)des Steuer Elements konfigurieren.</span><span class="sxs-lookup"><span data-stu-id="4304a-219">You can configure this behavior using the control's [`DisableCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.disablecreateduser.aspx).</span></span> <span data-ttu-id="4304a-220">Legen Sie diese Eigenschaft auf `true` fest, um neue Benutzerkonten nicht zu genehmigen.</span><span class="sxs-lookup"><span data-stu-id="4304a-220">Set this property to `true` to not approve new user accounts.</span></span>

> [!NOTE]
> <span data-ttu-id="4304a-221">Standardmäßig protokolliert das Steuerelement "" von "kreateuserwizard" automatisch das neue Benutzerkonto.</span><span class="sxs-lookup"><span data-stu-id="4304a-221">By default the CreateUserWizard control automatically logs on the new user account.</span></span> <span data-ttu-id="4304a-222">Dieses Verhalten wird durch die [`LoginCreatedUser`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx)des Steuer Elements vorgegeben.</span><span class="sxs-lookup"><span data-stu-id="4304a-222">This behavior is dictated by the control's [`LoginCreatedUser` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.logincreateduser.aspx).</span></span> <span data-ttu-id="4304a-223">Da nicht genehmigte Benutzer sich nicht bei der Website anmelden können, wird `DisableCreatedUser` `true` das neue Benutzerkonto nicht bei der Website protokolliert, unabhängig vom Wert der `LoginCreatedUser`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4304a-223">Because unapproved users cannot login to the site, when `DisableCreatedUser` is `true` the new user account is not logged into the site, regardless of the value of the `LoginCreatedUser` property.</span></span>

<span data-ttu-id="4304a-224">Wenn Sie Programm gesteuert neue Benutzerkonten über die `Membership.CreateUser`-Methode erstellen, verwenden Sie zum Erstellen eines nicht genehmigten Benutzerkontos eine der-über Ladungen, die den `IsApproved`-Eigenschafts Wert des neuen Benutzers als Eingabeparameter akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="4304a-224">If you are programmatically creating new user accounts via the `Membership.CreateUser` method, to create an unapproved user account use one of the overloads that accept the new user's `IsApproved` property value as an input parameter.</span></span>

## <a name="step-3-approving-users-by-verifying-their-email-address"></a><span data-ttu-id="4304a-225">Schritt 3: Genehmigen von Benutzern durch Überprüfen Ihrer e-Mail-Adresse</span><span class="sxs-lookup"><span data-stu-id="4304a-225">Step 3: Approving Users By Verifying their Email Address</span></span>

<span data-ttu-id="4304a-226">Viele Websites, die Benutzerkonten unterstützen, genehmigen neue Benutzer erst, wenn Sie die bei der Registrierung angegebene e-Mail-Adresse überprüfen.</span><span class="sxs-lookup"><span data-stu-id="4304a-226">Many websites that support user accounts do not approve new users until they verify the email address they supplied when registering.</span></span> <span data-ttu-id="4304a-227">Dieser Überprüfungs Vorgang wird häufig zum vereiteln von Bots, Spammern und anderen or-do-Wells verwendet, da hierfür eine eindeutige, verifizierte e-Mail-Adresse erforderlich ist und ein zusätzlicher Schritt im Registrierungsprozess hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-227">This verification process is commonly used to thwart bots, spammers, and other ne'er-do-wells as it requires a unique, verified email address and adds an extra step in the signup process.</span></span> <span data-ttu-id="4304a-228">Bei diesem Modell wird eine e-Mail-Nachricht gesendet, die einen Link zu einer Überprüfungs Seite enthält, wenn ein neuer Benutzer sich anmeldet.</span><span class="sxs-lookup"><span data-stu-id="4304a-228">With this model, when a new user signs up they are sent an email message that includes a link to a verification page.</span></span> <span data-ttu-id="4304a-229">Durch den Besuch des Links hat der Benutzer bewiesen, dass er die e-Mail erhalten hat und dass die angegebene e-Mail-Adresse gültig ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-229">By visiting the link the user has proven that they received the email and, therefore, that the email address provided is valid.</span></span> <span data-ttu-id="4304a-230">Die Seite "Überprüfung" ist für die Genehmigung des Benutzers verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="4304a-230">The verification page is responsible for approving the user.</span></span> <span data-ttu-id="4304a-231">Dies kann automatisch erfolgen, wenn Sie alle Benutzer genehmigen, die diese Seite erreichen, oder wenn der Benutzer einige zusätzliche Informationen, z. b. eine [CAPTCHA](http://en.wikipedia.org/wiki/Captcha), bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="4304a-231">This may happen automatically, thereby approving any user who reaches this page, or only after the user provides some additional information, such as a [CAPTCHA](http://en.wikipedia.org/wiki/Captcha).</span></span>

<span data-ttu-id="4304a-232">Um diesem Workflow Rechnung zu tragen, müssen wir zuerst die Seite für die Kontoerstellung aktualisieren, damit neue Benutzer nicht genehmigt werden.</span><span class="sxs-lookup"><span data-stu-id="4304a-232">To accommodate this workflow, we need to first update the account creation page so that new users are unapproved.</span></span> <span data-ttu-id="4304a-233">Öffnen Sie die Seite `EnhancedCreateUserWizard.aspx` im Ordner `Membership`, und legen Sie die `DisableCreatedUser`-Eigenschaft des Steuer Elements für das-Steuerelement auf `true`fest.</span><span class="sxs-lookup"><span data-stu-id="4304a-233">Open the `EnhancedCreateUserWizard.aspx` page in the `Membership` folder and set the CreateUserWizard control's `DisableCreatedUser` property to `true`.</span></span>

<span data-ttu-id="4304a-234">Als nächstes müssen wir das Steuerelement "kreateuserwizard" so konfigurieren, dass eine e-Mail an den neuen Benutzer gesendet wird. dabei wird erläutert, wie das Konto überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-234">Next, we need to configure the CreateUserWizard control to send an email to the new user with instructions on how to verify their account.</span></span> <span data-ttu-id="4304a-235">Insbesondere fügen wir einen Link in die e-Mail auf die `Verification.aspx` Seite ein (die wir noch erstellen müssen), indem wir die `UserId` des neuen Benutzers über die QueryString übergeben.</span><span class="sxs-lookup"><span data-stu-id="4304a-235">In particular, we will include a link in the email to the `Verification.aspx` page (which we've yet to create), passing in the new user's `UserId` through the querystring.</span></span> <span data-ttu-id="4304a-236">Auf der Seite "`Verification.aspx`" wird der angegebene Benutzer gesucht und als "genehmigt" markiert.</span><span class="sxs-lookup"><span data-stu-id="4304a-236">The `Verification.aspx` page will lookup the specified user and mark them approved.</span></span>

### <a name="sending-a-verification-email-to-new-users"></a><span data-ttu-id="4304a-237">Senden einer Überprüfungs-e-Mail an neue Benutzer</span><span class="sxs-lookup"><span data-stu-id="4304a-237">Sending a Verification Email to New Users</span></span>

<span data-ttu-id="4304a-238">Um eine e-Mail aus dem Steuerelement "kreateuserwizard" zu senden, konfigurieren Sie die `MailDefinition`-Eigenschaft entsprechend.</span><span class="sxs-lookup"><span data-stu-id="4304a-238">To send an email from the CreateUserWizard control, configure its `MailDefinition` property appropriately.</span></span> <span data-ttu-id="4304a-239">Wie bereits im <a id="Tutorial13"> </a> [vorherigen Tutorial](recovering-and-changing-passwords-cs.md)erläutert, enthalten die Steuerelemente ChangePassword und PasswordRecovery eine [`MailDefinition`-Eigenschaft](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) , die auf die gleiche Weise funktioniert wie die des-Steuer Elements des-Steuer Elements des-Steuer Elements.</span><span class="sxs-lookup"><span data-stu-id="4304a-239">As discussed in the <a id="Tutorial13"></a>[previous tutorial](recovering-and-changing-passwords-cs.md), the ChangePassword and PasswordRecovery controls include a [`MailDefinition` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.maildefinition.aspx) that works in the same manner as the CreateUserWizard control's.</span></span>

> [!NOTE]
> <span data-ttu-id="4304a-240">Um die `MailDefinition`-Eigenschaft verwenden zu können, müssen Sie in `Web.config`e-Mail-Übermittlungs Optionen angeben.</span><span class="sxs-lookup"><span data-stu-id="4304a-240">To use the `MailDefinition` property you need to specify mail delivery options in `Web.config`.</span></span> <span data-ttu-id="4304a-241">Weitere Informationen finden Sie unter [Senden von e-Mails in ASP.net](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="4304a-241">For more information, refer to [Sending Email in ASP.NET](http://aspnet.4guysfromrolla.com/articles/072606-1.aspx).</span></span>

<span data-ttu-id="4304a-242">Erstellen Sie zunächst eine neue e-Mail-Vorlage mit dem Namen `CreateUserWizard.txt` im Ordner `EmailTemplates`.</span><span class="sxs-lookup"><span data-stu-id="4304a-242">Start by creating a new email template named `CreateUserWizard.txt` in the `EmailTemplates` folder.</span></span> <span data-ttu-id="4304a-243">Verwenden Sie für die Vorlage den folgenden Text:</span><span class="sxs-lookup"><span data-stu-id="4304a-243">Use the following text for the template:</span></span>

[!code-aspx[Main](unlocking-and-approving-user-accounts-cs/samples/sample3.aspx)]

<span data-ttu-id="4304a-244">Legen Sie die Eigenschaft "`MailDefinition'` s `BodyFileName`" auf "~/EmailTemplates/CreateUserWizard.txt" und deren `Subject`-Eigenschaft auf "Willkommen bei meiner Website!</span><span class="sxs-lookup"><span data-stu-id="4304a-244">Set the `MailDefinition'` s `BodyFileName` property to "~/EmailTemplates/CreateUserWizard.txt" and its `Subject` property to "Welcome to My Website!</span></span> <span data-ttu-id="4304a-245">Aktivieren Sie Ihr Konto. "</span><span class="sxs-lookup"><span data-stu-id="4304a-245">Please activate your account."</span></span>

<span data-ttu-id="4304a-246">Beachten Sie, dass die `CreateUserWizard.txt`-e-Mail-Vorlage einen `<%VerificationUrl%>` Platzhalter enthält.</span><span class="sxs-lookup"><span data-stu-id="4304a-246">Note that the `CreateUserWizard.txt` email template includes a `<%VerificationUrl%>` placeholder.</span></span> <span data-ttu-id="4304a-247">An dieser Stelle wird die URL für die `Verification.aspx` Seite platziert.</span><span class="sxs-lookup"><span data-stu-id="4304a-247">This is where the URL for the `Verification.aspx` page will be placed.</span></span> <span data-ttu-id="4304a-248">Der Benutzername und das Kennwort des neuen Kontos werden automatisch vom Assistenten für die `<%UserName%>` und `<%Password%>` ersetzt, es ist jedoch kein integrierter `<%VerificationUrl%>` Platzhalter vorhanden.</span><span class="sxs-lookup"><span data-stu-id="4304a-248">The CreateUserWizard automatically replaces the `<%UserName%>` and `<%Password%>` placeholders with the new account's username and password, but there is no built-in `<%VerificationUrl%>` placeholder.</span></span> <span data-ttu-id="4304a-249">Wir müssen ihn manuell durch die entsprechende Überprüfungs-URL ersetzen.</span><span class="sxs-lookup"><span data-stu-id="4304a-249">We need to manually replace it with the appropriate verification URL.</span></span>

<span data-ttu-id="4304a-250">Erstellen Sie hierzu einen Ereignishandler für das [`SendingMail`-Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.sendingmail.aspx) von "feateuserwizard", und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="4304a-250">To accomplish this, create an event handler for the CreateUserWizard's [`SendingMail` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.createuserwizard.sendingmail.aspx) and add the following code:</span></span>

[!code-csharp[Main](unlocking-and-approving-user-accounts-cs/samples/sample4.cs)]

<span data-ttu-id="4304a-251">Das `SendingMail`-Ereignis wird nach dem `CreatedUser`-Ereignis ausgelöst. Dies bedeutet, dass das neue Benutzerkonto zu dem Zeitpunkt, zu dem der obige Ereignishandler ausgeführt wird, bereits erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="4304a-251">The `SendingMail` event fires after the `CreatedUser` event, meaning that by the time the above event handler executes the new user account has already been created.</span></span> <span data-ttu-id="4304a-252">Sie können auf den `UserId` Wert des neuen Benutzers zugreifen, indem Sie die `Membership.GetUser`-Methode aufrufen und die `UserName` übergeben, die in das CreateUserWizard-Steuerelement eingegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="4304a-252">We can access the new user's `UserId` value by calling the `Membership.GetUser` method, passing in the `UserName` entered into the CreateUserWizard control.</span></span> <span data-ttu-id="4304a-253">Als nächstes wird die Überprüfungs-URL gebildet.</span><span class="sxs-lookup"><span data-stu-id="4304a-253">Next, the verification URL is formed.</span></span> <span data-ttu-id="4304a-254">Die-Anweisung `Request.Url.GetLeftPart(UriPartial.Authority)` gibt den `http://yourserver.com` Teil der URL zurück. `Request.ApplicationPath` gibt den Pfad zurück, in dem die Anwendung einen Stamm hat.</span><span class="sxs-lookup"><span data-stu-id="4304a-254">The statement `Request.Url.GetLeftPart(UriPartial.Authority)` returns the `http://yourserver.com` portion of the URL; `Request.ApplicationPath` returns path where the application is rooted.</span></span> <span data-ttu-id="4304a-255">Die Überprüfungs-URL wird dann als `Verification.aspx?ID=userId`definiert.</span><span class="sxs-lookup"><span data-stu-id="4304a-255">The verification URL is then defined as `Verification.aspx?ID=userId`.</span></span> <span data-ttu-id="4304a-256">Diese beiden Zeichen folgen werden dann verkettet, um die gesamte URL zu bilden.</span><span class="sxs-lookup"><span data-stu-id="4304a-256">These two strings are then concatenated to form the complete URL.</span></span> <span data-ttu-id="4304a-257">Zum Schluss hat der e-Mail-Nachrichtentext (`e.Message.Body`) alle Vorkommen von `<%VerificationUrl%>` durch die vollständige URL ersetzt.</span><span class="sxs-lookup"><span data-stu-id="4304a-257">Finally, the email message body (`e.Message.Body`) has all occurrences of `<%VerificationUrl%>` replaced with the full URL.</span></span>

<span data-ttu-id="4304a-258">Der Nettoeffekt ist, dass neue Benutzer nicht genehmigt werden, was bedeutet, dass Sie sich nicht bei der Website anmelden können.</span><span class="sxs-lookup"><span data-stu-id="4304a-258">The net effect is that new users are unapproved, meaning that they cannot log into the site.</span></span> <span data-ttu-id="4304a-259">Außerdem wird automatisch eine e-Mail mit einem Link zur Überprüfungs-URL gesendet (siehe Abbildung 6).</span><span class="sxs-lookup"><span data-stu-id="4304a-259">Furthermore, they are automatically sent an email with a link to the verification URL (see Figure 6).</span></span>

<span data-ttu-id="4304a-260">[![der neue Benutzer eine e-Mail mit einem Link zur Überprüfungs-URL erhält](unlocking-and-approving-user-accounts-cs/_static/image17.png)](unlocking-and-approving-user-accounts-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-260">[![The New User Receives an Email with a Link to the Verification URL](unlocking-and-approving-user-accounts-cs/_static/image17.png)](unlocking-and-approving-user-accounts-cs/_static/image16.png)</span></span>

<span data-ttu-id="4304a-261">**Abbildung 6**: der neue Benutzer erhält eine e-Mail mit einem Link zur Überprüfungs-URL ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="4304a-261">**Figure 6**: The New User Receives an Email with a Link to the Verification URL  ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image18.png))</span></span>

> [!NOTE]
> <span data-ttu-id="4304a-262">Der standardmäßige Vorgang für den Vorgang von "kreateuserwizard" des dashateuserwizard-Steuer Elements zeigt eine Meldung an, in der der Benutzer darüber informiert wird, dass sein Konto erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="4304a-262">The CreateUserWizard control's default CreateUserWizard step displays a message informing the user their account has been created and displays a Continue button.</span></span> <span data-ttu-id="4304a-263">Wenn Sie darauf klicken, wird der Benutzer zur URL, die von der `ContinueDestinationPageUrl`-Eigenschaft des Steuer Elements angegeben wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-263">Clicking this takes the user to the URL specified by the control's `ContinueDestinationPageUrl` property.</span></span> <span data-ttu-id="4304a-264">Der "deeuserwizard" in `EnhancedCreateUserWizard.aspx` ist so konfiguriert, dass neue Benutzer an die `~/Membership/AdditionalUserInfo.aspx`gesendet werden, die den Benutzer zur Eingabe ihrer Heimat-, Homepage-URL und Signatur auffordert.</span><span class="sxs-lookup"><span data-stu-id="4304a-264">The CreateUserWizard in `EnhancedCreateUserWizard.aspx` is configured to send new users to the `~/Membership/AdditionalUserInfo.aspx`, which prompts the user for their hometown, homepage URL, and signature.</span></span> <span data-ttu-id="4304a-265">Da diese Informationen nur von angemeldeten Benutzern hinzugefügt werden können, ist es sinnvoll, diese Eigenschaft zu aktualisieren, damit Benutzer an die Startseite der Website zurückgesendet werden (`~/Default.aspx`).</span><span class="sxs-lookup"><span data-stu-id="4304a-265">Because this information can only be added by logged on users, it makes sense to update this property to send users back to the site's homepage (`~/Default.aspx`).</span></span> <span data-ttu-id="4304a-266">Außerdem sollten die `EnhancedCreateUserWizard.aspx` Seite oder der Schritt "" von "kreateuserwizard" erweitert werden, um den Benutzer darüber zu informieren, dass ihm eine Verifizierungs-e-Mail gesendet wurde und sein Konto erst dann aktiviert wird, wenn die Anweisungen in dieser e-Mail befolgt werden.</span><span class="sxs-lookup"><span data-stu-id="4304a-266">Moreover, the `EnhancedCreateUserWizard.aspx` page or the CreateUserWizard step should be augmented to inform the user that they have been sent a verification email and their account won't be activated until they follow the instructions in this email.</span></span> <span data-ttu-id="4304a-267">Ich lasse diese Änderungen als Übung für den Reader aus.</span><span class="sxs-lookup"><span data-stu-id="4304a-267">I leave these modifications as an exercise for the reader.</span></span>

### <a name="creating-the-verification-page"></a><span data-ttu-id="4304a-268">Erstellen der Überprüfungs Seite</span><span class="sxs-lookup"><span data-stu-id="4304a-268">Creating the Verification Page</span></span>

<span data-ttu-id="4304a-269">Die letzte Aufgabe besteht darin, die `Verification.aspx` Seite zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="4304a-269">Our final task is to create the `Verification.aspx` page.</span></span> <span data-ttu-id="4304a-270">Fügen Sie diese Seite zum Stamm Ordner hinzu, und ordnen Sie Sie der `Site.master` Master Seite zu.</span><span class="sxs-lookup"><span data-stu-id="4304a-270">Add this page to the root folder, associating it with the `Site.master` master page.</span></span> <span data-ttu-id="4304a-271">Entfernen Sie das Inhalts Steuerelement, das auf die `LoginContent` contentplachalter verweist, damit die Inhaltsseite den Standard Inhalt der Master Seite verwendet, wie wir mit den meisten der zuvor hinzugefügten Inhaltsseiten durchgeführt haben.</span><span class="sxs-lookup"><span data-stu-id="4304a-271">As we've done with most of the previous content pages added to the site, remove the Content control that references the `LoginContent` ContentPlaceHolder so that the content page uses the master page's default content.</span></span>

<span data-ttu-id="4304a-272">Fügen Sie ein Label-websteuer Element zur Seite `Verification.aspx` hinzu, legen Sie dessen `ID` auf `StatusMessage`, und löschen Sie die Text-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="4304a-272">Add a Label Web control to the `Verification.aspx` page, set its `ID` to `StatusMessage` and clear out its text property.</span></span> <span data-ttu-id="4304a-273">Erstellen Sie als nächstes den `Page_Load`-Ereignishandler, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="4304a-273">Next, create the `Page_Load` event handler and add the following code:</span></span>

[!code-csharp[Main](unlocking-and-approving-user-accounts-cs/samples/sample5.cs)]

<span data-ttu-id="4304a-274">Der größte Teil des obigen Codes stellt sicher, dass die über QueryString bereitgestellte `UserId` vorhanden ist, dass es sich um einen gültigen `Guid` Wert handelt und dass Sie auf ein vorhandenes Benutzerkonto verweist.</span><span class="sxs-lookup"><span data-stu-id="4304a-274">The bulk of the above code verifies that the `UserId` supplied through the querystring exists, that it is a valid `Guid` value, and that it references an existing user account.</span></span> <span data-ttu-id="4304a-275">Wenn alle diese Prüfungen bestanden werden, wird das Benutzerkonto genehmigt. Andernfalls wird eine entsprechende Statusmeldung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="4304a-275">If all of these checks pass, the user account is approved; otherwise, a suitable status message is displayed.</span></span>

<span data-ttu-id="4304a-276">Abbildung 7 zeigt die `Verification.aspx` Seite, wenn Sie über einen Browser besucht werden.</span><span class="sxs-lookup"><span data-stu-id="4304a-276">Figure 7 shows the `Verification.aspx` page when visited through a browser.</span></span>

<span data-ttu-id="4304a-277">[![das Konto des neuen Benutzers jetzt genehmigt ist.](unlocking-and-approving-user-accounts-cs/_static/image20.png)](unlocking-and-approving-user-accounts-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="4304a-277">[![The New User's Account is Now Approved](unlocking-and-approving-user-accounts-cs/_static/image20.png)](unlocking-and-approving-user-accounts-cs/_static/image19.png)</span></span>

<span data-ttu-id="4304a-278">**Abbildung 7**: das neue Benutzerkonto ist nun genehmigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](unlocking-and-approving-user-accounts-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="4304a-278">**Figure 7**: The New User's Account is Now Approved  ([Click to view full-size image](unlocking-and-approving-user-accounts-cs/_static/image21.png))</span></span>

## <a name="summary"></a><span data-ttu-id="4304a-279">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="4304a-279">Summary</span></span>

<span data-ttu-id="4304a-280">Alle Mitgliedschafts Benutzerkonten haben zwei Statuswerte, die bestimmen, ob sich der Benutzer bei der Website anmelden kann: `IsLockedOut` und `IsApproved`.</span><span class="sxs-lookup"><span data-stu-id="4304a-280">All Membership user accounts have two statuses that determine whether the user can log into the site: `IsLockedOut` and `IsApproved`.</span></span> <span data-ttu-id="4304a-281">Beide Eigenschaften müssen für den Benutzer `true` werden, damit Sie sich anmelden können.</span><span class="sxs-lookup"><span data-stu-id="4304a-281">Both of these properties must be `true` for the user to login.</span></span>

<span data-ttu-id="4304a-282">Der Status "gesperrt" des Benutzers wird als Sicherheitsmaßnahme verwendet, um die Wahrscheinlichkeit zu verringern, dass ein Hacker durch Brute-Force-Methoden in eine Site verwandelt wird.</span><span class="sxs-lookup"><span data-stu-id="4304a-282">The user's locked out status is used as a security measure to reduce the likelihood of a hacker breaking into a site through brute force methods.</span></span> <span data-ttu-id="4304a-283">Insbesondere wird ein Benutzer gesperrt, wenn in einem bestimmten Zeitfenster eine bestimmte Anzahl von ungültigen Anmelde versuchen vorliegt.</span><span class="sxs-lookup"><span data-stu-id="4304a-283">Specifically, a user is locked out if there are a certain number of invalid login attempts within a certain window of time.</span></span> <span data-ttu-id="4304a-284">Diese Begrenzungen können mithilfe der Mitgliedschafts Anbieter Einstellungen in `Web.config`konfiguriert werden.</span><span class="sxs-lookup"><span data-stu-id="4304a-284">These bounds are configurable through the Membership provider settings in `Web.config`.</span></span>

<span data-ttu-id="4304a-285">Der genehmigte Status wird häufig als Mittel verwendet, um zu verhindern, dass sich neue Benutzer anmelden, bis eine Aktion aufgetreten ist.</span><span class="sxs-lookup"><span data-stu-id="4304a-285">The approved status is commonly used as a means to prohibit new users from logging in until some action has transpired.</span></span> <span data-ttu-id="4304a-286">Möglicherweise erfordert die Website, dass neue Konten zuerst vom Administrator oder, wie in Schritt 3 gezeigt, durch die Überprüfung Ihrer e-Mail-Adresse genehmigt werden.</span><span class="sxs-lookup"><span data-stu-id="4304a-286">Perhaps the site requires that new accounts first be approved by the administrator or, as we saw in Step 3, by verifying their email address.</span></span>

<span data-ttu-id="4304a-287">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="4304a-287">Happy Programming!</span></span>

### <a name="about-the-author"></a><span data-ttu-id="4304a-288">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="4304a-288">About the Author</span></span>

<span data-ttu-id="4304a-289">Scott Mitchell, Autor mehrerer ASP/ASP. net-Bücher und Gründer von 4GuysFromRolla.com, hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="4304a-289">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="4304a-290">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="4304a-290">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="4304a-291">Sein letztes Buch ist *[Sams Teach Yourself ASP.NET 2,0 in 24 Stunden](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="4304a-291">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="4304a-292">Scott kann über [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/)erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="4304a-292">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="4304a-293">Besonders vielen Dank...</span><span class="sxs-lookup"><span data-stu-id="4304a-293">Special Thanks To…</span></span>

<span data-ttu-id="4304a-294">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="4304a-294">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="4304a-295">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="4304a-295">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="4304a-296">Wenn dies der Fall ist, löschen Sie eine Zeile bei [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="4304a-296">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="4304a-297">[Zurück](recovering-and-changing-passwords-cs.md)
> [Weiter](building-an-interface-to-select-one-user-account-from-many-vb.md)</span><span class="sxs-lookup"><span data-stu-id="4304a-297">[Previous](recovering-and-changing-passwords-cs.md)
[Next](building-an-interface-to-select-one-user-account-from-many-vb.md)</span></span>
