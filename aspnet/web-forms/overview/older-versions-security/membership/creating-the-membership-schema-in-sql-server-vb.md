---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
title: Erstellen des Mitgliedschafts Schemas in SQL Server (VB) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial werden die Verfahren zum Hinzufügen des erforderlichen Schemas zur Datenbank erläutert, um den sqlmembership shipprovider zu verwenden. Danach können wir...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 112a674d-716f-41a6-99b8-4074d65a54c0
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-vb
msc.type: authoredcontent
ms.openlocfilehash: 96fd72d1f368b1f7947ef0a2293161d97aaf7065
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78513045"
---
# <a name="creating-the-membership-schema-in-sql-server-vb"></a><span data-ttu-id="dcfcf-104">Erstellen des Mitgliedschaftsschemas unter SQL Server (VB)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-104">Creating the Membership Schema in SQL Server (VB)</span></span>

<span data-ttu-id="dcfcf-105">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="dcfcf-106">[Code herunterladen](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) oder [PDF herunterladen](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-106">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_VB.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_vb.pdf)</span></span>

> <span data-ttu-id="dcfcf-107">In diesem Tutorial werden die Verfahren zum Hinzufügen des erforderlichen Schemas zur Datenbank erläutert, um den sqlmembership shipprovider zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="dcfcf-108">Danach untersuchen wir die Schlüsseltabellen im Schema und besprechen deren Zweck und Wichtigkeit.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="dcfcf-109">In diesem Tutorial wird erläutert, wie einer ASP.NET-Anwendung mitgeteilt wird, welchen Anbieter das Mitgliedschafts Framework verwenden sollte.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

## <a name="introduction"></a><span data-ttu-id="dcfcf-110">Einführung</span><span class="sxs-lookup"><span data-stu-id="dcfcf-110">Introduction</span></span>

<span data-ttu-id="dcfcf-111">Die vorherigen beiden Tutorials untersuchten die Verwendung der Formular Authentifizierung, um Website Besucher zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="dcfcf-112">Das Formular Authentifizierungs Framework erleichtert Entwicklern das Anmelden von Benutzern bei einer Website und die Verwendung von Authentifizierungs Tickets über den Seitenbesuch hinweg.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="dcfcf-113">Die `FormsAuthentication`-Klasse enthält Methoden zum Erstellen des Tickets und zum Hinzufügen des Tickets zu den Cookies des Besuchers.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="dcfcf-114">Der `FormsAuthenticationModule` untersucht alle eingehenden Anforderungen und erstellt und für diejenigen mit einem gültigen Authentifizierungs Ticket eine `GenericPrincipal` und ein `FormsIdentity`-Objekt der aktuellen Anforderung.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="dcfcf-115">Bei der Formular Authentifizierung handelt es sich lediglich um einen Mechanismus zum Gewähren eines Authentifizierungs Tickets an einen Besucher bei der Anmeldung und bei nachfolgenden Anforderungen, um das Ticket zu ermitteln und die Identität des Benutzers zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="dcfcf-116">Damit eine Webanwendung Benutzerkonten unterstützt, müssen wir immer noch einen Benutzerspeicher implementieren und Funktionen zum Überprüfen von Anmelde Informationen, Registrieren neuer Benutzer und der unzähligen anderen Benutzerkonto bezogenen Aufgaben hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="dcfcf-117">Vor ASP.NET 2,0 waren Entwickler bei der Implementierung all dieser Aufgaben im Zusammenhang mit dem Benutzerkonto auf dem Hook.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="dcfcf-118">Glücklicherweise hat das ASP.net-Team dieses Manko erkannt und das Mitgliedschafts Framework mit ASP.NET 2,0 eingeführt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="dcfcf-119">Das Mitgliedschafts Framework ist eine Reihe von Klassen in den .NET Framework, die eine programmgesteuerte Schnittstelle zum Ausführen von Aufgaben im Zusammenhang mit dem Benutzerkonto bereitstellen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="dcfcf-120">Dieses Framework basiert auf dem [Anbieter Modell](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), das es Entwicklern ermöglicht, eine angepasste Implementierung in eine standardisierte API zu integrieren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="dcfcf-121">Wie im Lernprogramm <a id="Tutorial1"> </a>zu den [*Sicherheitsgrundlagen und ASP.NET-Unterstützung*](../introduction/security-basics-and-asp-net-support-vb.md) erläutert, werden die .NET Framework mit zwei integrierten Mitgliedschafts Anbietern ausgeliefert: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) und [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-vb.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="dcfcf-122">Wie der Name schon sagt, verwendet die `SqlMembershipProvider` eine Microsoft SQL Server-Datenbank als Benutzerspeicher.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="dcfcf-123">Um diesen Anbieter in einer Anwendung verwenden zu können, müssen wir dem Anbieter mitteilen, welche Datenbank als Speicher verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="dcfcf-124">Wie Sie sich vorstellen können, erwartet die `SqlMembershipProvider`, dass die Benutzerspeicher-Datenbank bestimmte Datenbanktabellen, Sichten und gespeicherte Prozeduren besitzt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="dcfcf-125">Wir müssen dieses erwartete Schema der ausgewählten Datenbank hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="dcfcf-126">In diesem Tutorial werden zunächst Techniken zum Hinzufügen des erforderlichen Schemas zur-Datenbank erläutert, um die `SqlMembershipProvider`zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-127">Danach untersuchen wir die Schlüsseltabellen im Schema und besprechen deren Zweck und Wichtigkeit.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="dcfcf-128">In diesem Tutorial wird erläutert, wie einer ASP.NET-Anwendung mitgeteilt wird, welchen Anbieter das Mitgliedschafts Framework verwenden sollte.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="dcfcf-129">Erste Schritte</span><span class="sxs-lookup"><span data-stu-id="dcfcf-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="dcfcf-130">Schritt 1: entscheiden, wo der Benutzerspeicher platziert werden soll</span><span class="sxs-lookup"><span data-stu-id="dcfcf-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="dcfcf-131">Die Daten einer ASP.NET-Anwendung werden häufig in einer Reihe von Tabellen in einer Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="dcfcf-132">Beim Implementieren des `SqlMembershipProvider` Datenbankschemas müssen wir entscheiden, ob das Mitgliedschafts Schema in derselben Datenbank wie die Anwendungsdaten oder in einer alternativen Datenbank platziert werden soll.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="dcfcf-133">Aus den folgenden Gründen wird empfohlen, das Mitgliedschafts Schema in derselben Datenbank wie die Anwendungsdaten zu suchen:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="dcfcf-134">**Wartbarkeit** : eine Anwendung, deren Daten in einer Datenbank gekapselt sind, ist leichter zu verstehen, zu warten und bereitzustellen, als eine Anwendung, die über zwei separate Datenbanken verfügt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="dcfcf-135">**Relationale Integrität** Durchsuchen der Mitgliedschafts bezogenen Tabellen in derselben Datenbank wie die Anwendungs Tabellen ist es möglich, [Foreign Key-Einschränkungen](http://en.wikipedia.org/wiki/Foreign_key) zwischen den primär Schlüsseln in den Mitgliedschafts bezogenen Tabellen und den zugehörigen Anwendungs Tabellen herzustellen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="dcfcf-136">Die Entkopplung von Benutzerspeicher-und Anwendungsdaten in separate Datenbanken ist nur sinnvoll, wenn Sie über mehrere Anwendungen verfügen, die jeweils separate Datenbanken verwenden, aber einen gemeinsamen Benutzerspeicher freigeben müssen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="dcfcf-137">Erstellen einer Datenbank</span><span class="sxs-lookup"><span data-stu-id="dcfcf-137">Creating a Database</span></span>

<span data-ttu-id="dcfcf-138">Die Anwendung, die wir seit dem zweiten Tutorial aufgebaut haben, hat noch keine Datenbank benötigt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="dcfcf-139">Wir benötigen jedoch für den Benutzerspeicher jetzt ein solches.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="dcfcf-140">Erstellen Sie einen, und fügen Sie diesem dann das für den `SqlMembershipProvider` Anbieter erforderliche Schema hinzu (siehe Schritt 2).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-141">In dieser tutorialreihe wird eine [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) -Datenbank verwendet, um die Anwendungs Tabellen und das `SqlMembershipProvider` Schema zu speichern.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="dcfcf-142">Diese Entscheidung wurde aus zwei Gründen getroffen: Erstens, aufgrund der kostenlosen kostenlosen Express Edition, die die am weitesten lesbar zugängliche Version von SQL Server 2005; Zweitens können SQL Server 2005 Express Edition Datenbanken direkt in den `App_Data` Ordner der Webanwendung eingefügt werden. Dadurch wird die Datenbank und die Webanwendung in einer einzigen ZIP-Datei erstellt und ohne spezielle Installationsanweisungen oder Konfigurationsoptionen erneut bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="dcfcf-143">Wenn Sie lieber eine nicht Express Edition-Version von SQL Server befolgen möchten, können Sie es kostenlos tun.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="dcfcf-144">Die Schritte sind praktisch identisch.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-144">The steps are virtually identical.</span></span> <span data-ttu-id="dcfcf-145">Das `SqlMembershipProvider` Schema funktioniert mit jeder Version von Microsoft SQL Server 2000 und höher.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>

<span data-ttu-id="dcfcf-146">Klicken Sie im Projektmappen-Explorer mit der rechten Maustaste auf den Ordner `App_Data`, und wählen Sie neues Element hinzufügen aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="dcfcf-147">(Wenn ein `App_Data` Ordner in Ihrem Projekt nicht angezeigt wird, klicken Sie mit der rechten Maustaste auf das Projekt in Projektmappen-Explorer, wählen Sie Ordner hinzufügen aus, und wählen Sie `App_Data`aus.) Wählen Sie im Dialogfeld Neues Element hinzufügen eine neue SQL-Datenbank mit dem Namen `SecurityTutorials.mdf`hinzufügen aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="dcfcf-148">In diesem Tutorial fügen wir dieser Datenbank das `SqlMembershipProvider` Schema hinzu. in den nachfolgenden Tutorials werden weitere Tabellen erstellt, um die Anwendungsdaten zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>

<span data-ttu-id="dcfcf-149">[![dem Ordner "App_Data" eine neue SQL-Datenbank mit dem Namen "securitytutorials. mdf" hinzufügen](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-149">[![Add a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder](creating-the-membership-schema-in-sql-server-vb/_static/image2.png)](creating-the-membership-schema-in-sql-server-vb/_static/image1.png)</span></span>

<span data-ttu-id="dcfcf-150">**Abbildung 1**: Hinzufügen einer neuen SQL-Datenbank mit dem Namen `SecurityTutorials.mdf` Datenbank zum Ordner "`App_Data`" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image3.png))</span></span>

<span data-ttu-id="dcfcf-151">Wenn Sie dem `App_Data` Ordner eine Datenbank hinzufügen, wird dieser automatisch in der Datenbank-Explorer angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="dcfcf-152">(In der nicht Express Edition-Version von Visual Studio wird die Datenbank-Explorer als Server-Explorer bezeichnet.) Wechseln Sie zum Datenbank-Explorer, und erweitern Sie die soeben hinzugefügte `SecurityTutorials` Datenbank.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="dcfcf-153">Wenn die Datenbank-Explorer auf dem Bildschirm nicht angezeigt wird, klicken Sie auf das Menü Ansicht, und wählen Sie Datenbank-Explorer aus, oder drücken Sie STRG + ALT + S.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="dcfcf-154">Wie in Abbildung 2 gezeigt, ist die `SecurityTutorials` Datenbank leer. Sie enthält keine Tabellen, keine Sichten und keine gespeicherten Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>

<span data-ttu-id="dcfcf-155">[![die securitytutorials-Datenbank ist zurzeit leer.](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-155">[![The SecurityTutorials Database is Currently Empty](creating-the-membership-schema-in-sql-server-vb/_static/image5.png)](creating-the-membership-schema-in-sql-server-vb/_static/image4.png)</span></span>

<span data-ttu-id="dcfcf-156">**Abbildung 2**: die `SecurityTutorials` Datenbank ist zurzeit leer ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image6.png))</span></span>

## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="dcfcf-157">Schritt 2: Hinzufügen des`SqlMembershipProvider`Schemas zur Datenbank</span><span class="sxs-lookup"><span data-stu-id="dcfcf-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="dcfcf-158">Für den `SqlMembershipProvider` muss ein bestimmter Satz von Tabellen, Sichten und gespeicherten Prozeduren in der Benutzerspeicher-Datenbank installiert werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="dcfcf-159">Diese erforderlichen Datenbankobjekte können mithilfe des [`aspnet_regsql.exe` Tools](https://msdn.microsoft.com/library/ms229862.aspx)hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="dcfcf-160">Diese Datei befindet sich im Ordner "`%WINDIR%\Microsoft.Net\Framework\v2.0.50727\`".</span><span class="sxs-lookup"><span data-stu-id="dcfcf-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-161">Das `aspnet_regsql.exe` Tool verfügt sowohl über Befehlszeilen Funktionalität als auch über eine grafische Benutzeroberfläche.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="dcfcf-162">Die grafische Benutzeroberfläche ist benutzerfreundlicher und ist das, was wir in diesem Tutorial untersuchen werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="dcfcf-163">Die Befehlszeilenschnittstelle ist nützlich, wenn das Hinzufügen des `SqlMembershipProvider` Schemas automatisiert werden muss, z. b. in Buildskripts oder automatisierten Testszenarien.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>

<span data-ttu-id="dcfcf-164">Das `aspnet_regsql.exe` Tool wird verwendet, um ASP.net- *Anwendungsdienste* einer angegebenen SQL Server Datenbank hinzuzufügen oder zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="dcfcf-165">Die ASP.NET-Anwendungsdienste umfassen die Schemas für die `SqlMembershipProvider` und `SqlRoleProvider`zusammen mit den Schemas für die SQL-basierten Anbieter für andere ASP.NET 2,0-Frameworks.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="dcfcf-166">Wir müssen dem `aspnet_regsql.exe` Tool zwei Informationen bereitstellen:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="dcfcf-167">Ob wir Anwendungsdienste hinzufügen oder entfernen möchten, und</span><span class="sxs-lookup"><span data-stu-id="dcfcf-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="dcfcf-168">Die Datenbank, aus der das Anwendungs Dienst Schema hinzugefügt oder entfernt werden soll.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="dcfcf-169">Wenn Sie zur Eingabe der zu verwendenden Datenbank aufgefordert werden, werden wir vom `aspnet_regsql.exe` Tool aufgefordert, den Namen des Servers, auf dem sich die Datenbank befindet, die Sicherheits Anmelde Informationen für die Verbindung mit der Datenbank und den Datenbanknamen anzugeben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="dcfcf-170">Wenn Sie die nicht-Express-Edition von SQL Server verwenden, sollten Sie diese Informationen bereits kennen, da es sich dabei um die gleichen Informationen handelt, die Sie über eine Verbindungs Zeichenfolge bereitstellen müssen, wenn Sie die Datenbank über eine ASP.NET-Webseite verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="dcfcf-171">Es ist jedoch etwas komplizierter, den Server-und Datenbanknamen zu ermitteln, wenn Sie eine SQL Server 2005 Express Edition Datenbank im `App_Data` Ordner verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="dcfcf-172">Im folgenden Abschnitt wird eine einfache Möglichkeit zum Angeben des Server-und Daten Banknamens für eine SQL Server 2005 Express Edition Datenbank im Ordner `App_Data` untersucht.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="dcfcf-173">Wenn Sie SQL Server 2005 Express Edition nicht verwenden, können Sie mit dem Abschnitt Installieren des Anwendungsdienste fortfahren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theapp_datafolder"></a><span data-ttu-id="dcfcf-174">Bestimmen des Server-und Daten Banknamens für eine SQL Server 2005 Express Edition Datenbank im Ordner "`App_Data`"</span><span class="sxs-lookup"><span data-stu-id="dcfcf-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="dcfcf-175">Um das `aspnet_regsql.exe` Tool zu verwenden, müssen wir den Namen des Servers und der Datenbank kennen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="dcfcf-176">Der Servername ist `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="dcfcf-177">Höchstwahrscheinlich ist der *instanceName* `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="dcfcf-178">Wenn Sie SQL Server 2005 Express Edition jedoch manuell installiert haben (d. h., Sie haben Sie bei der Installation von Visual Studio nicht automatisch installiert), ist es möglich, dass Sie einen anderen Instanznamen ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="dcfcf-179">Der Datenbankname ist etwas schwieriger zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="dcfcf-180">Datenbanken im `App_Data` Ordner verfügen in der Regel über einen Datenbanknamen, der eine [Globally Unique Identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) zusammen mit dem Pfad zur Datenbankdatei enthält.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="dcfcf-181">Wir müssen diesen Datenbanknamen bestimmen, um das Anwendungs Dienst Schema über `aspnet_regsql.exe`hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="dcfcf-182">Die einfachste Möglichkeit, den Datenbanknamen zu ermitteln, besteht darin, ihn über SQL Server Management Studio zu untersuchen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="dcfcf-183">SQL Server Management Studio stellt eine grafische Benutzeroberfläche zum Verwalten von SQL Server 2005-Datenbanken bereit, wird jedoch nicht mit der Express-Edition von SQL Server 2005 ausgeliefert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="dcfcf-184">Die gute Nachricht ist, dass Sie die kostenlose Express-Edition von SQL Server Management Studio [herunterladen können](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) .</span><span class="sxs-lookup"><span data-stu-id="dcfcf-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-185">Wenn Sie auch eine nicht Express Edition-Version von SQL Server 2005 auf Ihrem Desktop installiert haben, ist die Vollversion der Management Studio wahrscheinlich installiert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="dcfcf-186">Sie können die Vollversion verwenden, um den Datenbanknamen zu ermitteln. Befolgen Sie dabei die unten aufgeführten Schritte für die Express Edition.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>

<span data-ttu-id="dcfcf-187">Schließen Sie zunächst Visual Studio, um sicherzustellen, dass alle Sperren, die von Visual Studio für die Datenbankdatei erzwungen werden, geschlossen werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="dcfcf-188">Starten Sie als nächstes SQL Server Management Studio, und stellen Sie eine Verbindung mit der `localhost\InstanceName` Datenbank für SQL Server 2005 Express Edition her.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="dcfcf-189">Wie bereits erwähnt, ist die Wahrscheinlichkeit, dass der Instanzname `SQLExpress`ist.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="dcfcf-190">Wählen Sie für die Option Authentifizierung die Option Windows-Authentifizierung aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-190">For the Authentication option, select Windows Authentication.</span></span>

<span data-ttu-id="dcfcf-191">[![Herstellen einer Verbindung mit der SQL Server 2005 Express Edition Instanz](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-191">[![Connect to the SQL Server 2005 Express Edition Instance](creating-the-membership-schema-in-sql-server-vb/_static/image8.png)](creating-the-membership-schema-in-sql-server-vb/_static/image7.png)</span></span>

<span data-ttu-id="dcfcf-192">**Abbildung 3**: Herstellen einer Verbindung mit der SQL Server 2005 Express Edition Instanz ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image9.png))</span></span>

<span data-ttu-id="dcfcf-193">Nach dem Herstellen einer Verbindung mit der SQL Server 2005 Express Edition Instanz werden Management Studio Ordner für die Datenbanken, die Sicherheitseinstellungen, die Server Objekte usw. angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="dcfcf-194">Wenn Sie die Registerkarte Datenbanken erweitern, sehen Sie, dass die `SecurityTutorials.mdf` Datenbank *nicht* in der Daten Bank Instanz registriert ist. Wir müssen zuerst die Datenbank anfügen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="dcfcf-195">Klicken Sie mit der rechten Maustaste auf den Ordner Datenbanken, und wählen Sie im Kontextmenü anfügen aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="dcfcf-196">Dadurch wird das Dialogfeld Datenbanken anfügen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="dcfcf-197">Klicken Sie hier auf die Schaltfläche hinzufügen, navigieren Sie zur `SecurityTutorials.mdf` Datenbank, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="dcfcf-198">Abbildung 4 zeigt das Dialogfeld Datenbanken anfügen, nachdem die `SecurityTutorials.mdf` Datenbank ausgewählt wurde.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="dcfcf-199">Abbildung 5 zeigt die Objekt-Explorer Management Studio, nachdem die Datenbank erfolgreich angefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>

<span data-ttu-id="dcfcf-200">[![Anfügen der Datenbank "securitytutorials. mdf"](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-200">[![Attach the SecurityTutorials.mdf Database](creating-the-membership-schema-in-sql-server-vb/_static/image11.png)](creating-the-membership-schema-in-sql-server-vb/_static/image10.png)</span></span>

<span data-ttu-id="dcfcf-201">**Abbildung 4**: Anfügen der `SecurityTutorials.mdf` Datenbank ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image12.png))</span></span>

<span data-ttu-id="dcfcf-202">[![die Datenbank "securitytutorials. mdf" im Ordner "Datenbanken" angezeigt wird.](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-202">[![The SecurityTutorials.mdf Database Appears in the Databases Folder](creating-the-membership-schema-in-sql-server-vb/_static/image14.png)](creating-the-membership-schema-in-sql-server-vb/_static/image13.png)</span></span>

<span data-ttu-id="dcfcf-203">**Abbildung 5**: die `SecurityTutorials.mdf` Datenbank wird im Ordner "Datenbanken" angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image15.png))</span></span>

<span data-ttu-id="dcfcf-204">Wie in Abbildung 5 zu sehen ist, verfügt die `SecurityTutorials.mdf`-Datenbank über einen Recht abstrusen Namen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="dcfcf-205">Ändern Sie den Namen in einen besser denkbarer (und einfacheren) Namen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="dcfcf-206">Klicken Sie mit der rechten Maustaste auf die Datenbank, wählen Sie im Kontextmenü Umbenennen aus, und benennen Sie Sie `SecurityTutorialsDatabase`um.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="dcfcf-207">Dadurch wird der Dateiname nicht geändert, sondern nur der Name, den die Datenbank verwendet, um sich selbst SQL Server zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>

<span data-ttu-id="dcfcf-208">[![die Datenbank in securitytutorialsdatabase umbenennen](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-208">[![Rename the Database to SecurityTutorialsDatabase](creating-the-membership-schema-in-sql-server-vb/_static/image17.png)](creating-the-membership-schema-in-sql-server-vb/_static/image16.png)</span></span>

<span data-ttu-id="dcfcf-209">**Abbildung 6**: Umbenennen der Datenbank in `SecurityTutorialsDatabase`([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image18.png))</span></span>

<span data-ttu-id="dcfcf-210">An diesem Punkt kennen wir die Server-und Datenbanknamen für die `SecurityTutorials.mdf` Datenbankdatei: `localhost\InstanceName` bzw. `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="dcfcf-211">Nun können Sie die Anwendungsdienste über das `aspnet_regsql.exe` Tool installieren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="dcfcf-212">Installieren des Anwendungsdienste</span><span class="sxs-lookup"><span data-stu-id="dcfcf-212">Installing the Application Services</span></span>

<span data-ttu-id="dcfcf-213">Um das `aspnet_regsql.exe` Tool zu starten, wechseln Sie zum Startmenü, und wählen Sie ausführen aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="dcfcf-214">Geben Sie `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` in das Textfeld ein, und klicken Sie auf OK.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="dcfcf-215">Alternativ können Sie Windows-Explorer verwenden, um einen Drilldown in den entsprechenden Ordner auszuführen und auf die `aspnet_regsql.exe` Datei zu doppelklicken.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="dcfcf-216">Bei beiden Ansätzen werden die gleichen Ergebnisse erzielt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-216">Either approach will net the same results.</span></span>

<span data-ttu-id="dcfcf-217">Wenn Sie das `aspnet_regsql.exe` Tool ohne Befehlszeilenargumente ausführen, wird die grafische Benutzeroberfläche ASP.NET SQL Server Setup-Assistenten gestartet.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="dcfcf-218">Der Assistent vereinfacht das Hinzufügen oder Entfernen der ASP.NET-Anwendungsdienste für eine angegebene Datenbank.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="dcfcf-219">Auf dem ersten Bildschirm des Assistenten, wie in Abbildung 7 dargestellt, wird der Zweck des Tools beschrieben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>

<span data-ttu-id="dcfcf-220">[![den SQL Server ASP.NET-Setup-Assistenten zum Hinzufügen des Mitgliedschafts Schemas verwenden](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-220">[![Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema](creating-the-membership-schema-in-sql-server-vb/_static/image20.png)](creating-the-membership-schema-in-sql-server-vb/_static/image19.png)</span></span>

<span data-ttu-id="dcfcf-221">**Abbildung 7**: Verwenden des ASP.NET-SQL Server Setup-Assistenten zum Hinzufügen des Mitgliedschafts Schemas ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image21.png))</span></span>

<span data-ttu-id="dcfcf-222">Im zweiten Schritt des Assistenten werden Sie gefragt, ob Sie die Anwendungsdienste hinzufügen oder entfernen möchten.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="dcfcf-223">Da wir die für das `SqlMembershipProvider`erforderlichen Tabellen, Sichten und gespeicherten Prozeduren hinzufügen möchten, wählen Sie die Option SQL Server für Anwendungsdienste konfigurieren aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="dcfcf-224">Wenn Sie dieses Schema später aus der Datenbank entfernen möchten, führen Sie diesen Assistenten erneut aus, und wählen Sie stattdessen die Option Anwendungs Dienst Informationen aus einer vorhandenen Datenbank entfernen aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>

<span data-ttu-id="dcfcf-225">[Wählen Sie ![die Option SQL Server für Anwendungsdienste konfigurieren aus.](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-225">[![Choose the Configure SQL Server for Application Services Option](creating-the-membership-schema-in-sql-server-vb/_static/image23.png)](creating-the-membership-schema-in-sql-server-vb/_static/image22.png)</span></span>

<span data-ttu-id="dcfcf-226">**Abbildung 8**: Auswählen der Option "SQL Server für Anwendungsdienste konfigurieren" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image24.png))</span></span>

<span data-ttu-id="dcfcf-227">Im dritten Schritt werden die Datenbankinformationen angezeigt: der Servername, die Authentifizierungsinformationen und der Datenbankname.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="dcfcf-228">Wenn Sie zusammen mit diesem Tutorial die `SecurityTutorials.mdf` Datenbank zu `App_Data`hinzugefügt, an `localhost\InstanceName`angefügt und in `SecurityTutorialsDatabase`umbenannt haben, verwenden Sie die folgenden Werte:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="dcfcf-229">Server: `localhost\InstanceName`</span><span class="sxs-lookup"><span data-stu-id="dcfcf-229">Server: `localhost\InstanceName`</span></span>
- <span data-ttu-id="dcfcf-230">Windows-Authentifizierung</span><span class="sxs-lookup"><span data-stu-id="dcfcf-230">Windows authentication</span></span>
- <span data-ttu-id="dcfcf-231">Datenbank: `SecurityTutorialsDatabase`</span><span class="sxs-lookup"><span data-stu-id="dcfcf-231">Database: `SecurityTutorialsDatabase`</span></span>

<span data-ttu-id="dcfcf-232">[Datenbankinformationen ![eingeben](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-232">[![Enter the Database Information](creating-the-membership-schema-in-sql-server-vb/_static/image26.png)](creating-the-membership-schema-in-sql-server-vb/_static/image25.png)</span></span>

<span data-ttu-id="dcfcf-233">**Abbildung 9**: eingeben der Datenbankinformationen ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image27.png))</span></span>

<span data-ttu-id="dcfcf-234">Nachdem Sie die Datenbankinformationen eingegeben haben, klicken Sie auf Weiter.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-234">After entering the database information, click Next.</span></span> <span data-ttu-id="dcfcf-235">Im letzten Schritt werden die Schritte zusammengefasst, die ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="dcfcf-236">Klicken Sie auf Weiter, um die Anwendungsdienste zu installieren, und schließen Sie dann den Assistenten ab.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-237">Wenn Sie Management Studio verwendet haben, um die Datenbank anzufügen und die Datenbankdatei umzubenennen, stellen Sie sicher, dass Sie die Datenbank trennen und Management Studio schließen, bevor Sie Visual Studio erneut öffnen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="dcfcf-238">Wenn Sie die `SecurityTutorialsDatabase` Datenbank trennen möchten, klicken Sie mit der rechten Maustaste auf den Datenbanknamen, und wählen Sie im Menü Aufgaben die Option trennen aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>

<span data-ttu-id="dcfcf-239">Wenn Sie den Assistenten abgeschlossen haben, kehren Sie zu Visual Studio zurück, und navigieren Sie zum Datenbank-Explorer.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="dcfcf-240">Erweitern Sie den Ordner Tabellen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-240">Expand the Tables folder.</span></span> <span data-ttu-id="dcfcf-241">Es sollte eine Reihe von Tabellen angezeigt werden, deren Namen mit dem Präfix `aspnet_`beginnen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="dcfcf-242">Ebenso finden Sie eine Vielzahl von Sichten und gespeicherten Prozeduren unter den Ordnern Sichten und gespeicherte Prozeduren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="dcfcf-243">Diese Datenbankobjekte bilden das Anwendungs Dienst Schema.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="dcfcf-244">Die Mitgliedschafts-und Rollen spezifischen Datenbankobjekte werden in Schritt 3 untersucht.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>

<span data-ttu-id="dcfcf-245">[![einer Datenbank wurden verschiedene Tabellen, Sichten und gespeicherte Prozeduren hinzugefügt.](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-245">[![A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database](creating-the-membership-schema-in-sql-server-vb/_static/image29.png)](creating-the-membership-schema-in-sql-server-vb/_static/image28.png)</span></span>

<span data-ttu-id="dcfcf-246">**Abbildung 10**: eine Vielzahl von Tabellen, Sichten und gespeicherten Prozeduren wurden der Datenbank hinzugefügt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image30.png))</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-247">Die grafische Benutzeroberfläche des `aspnet_regsql.exe` Tools installiert das gesamte Anwendungs Dienst Schema.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="dcfcf-248">Wenn Sie `aspnet_regsql.exe` von der Befehlszeile aus ausführen, können Sie jedoch angeben, welche Komponenten für bestimmte Anwendungsdienste installiert (oder entfernt) werden sollen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="dcfcf-249">Wenn Sie nur die Tabellen, Sichten und gespeicherten Prozeduren hinzufügen möchten, die für die `SqlMembershipProvider`-und `SqlRoleProvider`-Anbieter erforderlich sind, führen Sie `aspnet_regsql.exe` über die Befehlszeile aus.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="dcfcf-250">Alternativ können Sie die entsprechende Teilmenge von T-SQL-Skripts, die von `aspnet_regsql.exe`verwendet werden, manuell ausführen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="dcfcf-251">Diese Skripts befinden sich im `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` Ordner mit Namen wie `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`usw.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`, `InstallMembership.sql`, `InstallRoles.sql`, `InstallProfile.sql`, `InstallSqlState.sql`, and so on.</span></span>

<span data-ttu-id="dcfcf-252">An diesem Punkt haben wir die Datenbankobjekte erstellt, die vom `SqlMembershipProvider`benötigt werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-253">Wir müssen jedoch weiterhin das Mitgliedschafts Framework anweisen, dass es die `SqlMembershipProvider` verwenden soll (im Gegensatz zum `ActiveDirectoryMembershipProvider`) und dass die `SqlMembershipProvider` die `SecurityTutorials` Datenbank verwenden sollten.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="dcfcf-254">Wir sehen uns an, wie Sie angeben, welcher Anbieter verwendet werden soll, und wie die Einstellungen des ausgewählten Anbieters in Schritt 4 angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="dcfcf-255">Zuerst sehen wir uns die soeben erstellten Datenbankobjekte genauer an.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="dcfcf-256">Schritt 3: Untersuchen der Kern Tabellen des Schemas</span><span class="sxs-lookup"><span data-stu-id="dcfcf-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="dcfcf-257">Beim Arbeiten mit den Mitgliedschafts-und Rollen Frameworks in einer ASP.NET-Anwendung werden die Implementierungsdetails vom Anbieter gekapselt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="dcfcf-258">In zukünftigen Tutorials werden diese Frameworks über die `Membership`-und `Roles` Klassen der .NET Framework miteinander in eine Schnittstelle integriert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="dcfcf-259">Bei Verwendung dieser APIs auf hoher Ebene müssen wir uns nicht mit den Details auf niedriger Ebene befassen, wie z. b. welche Abfragen ausgeführt werden oder welche Tabellen durch die `SqlMembershipProvider` und `SqlRoleProvider`geändert werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="dcfcf-260">Wir könnten die Mitgliedschafts-und Rollen Frameworks zuverlässig verwenden, ohne das in Schritt 2 erstellte Datenbankschema zu untersucht.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="dcfcf-261">Beim Erstellen von Tabellen zum Speichern von Anwendungsdaten müssen wir jedoch möglicherweise Entitäten erstellen, die sich auf Benutzer oder Rollen beziehen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="dcfcf-262">Beim Einrichten von Foreign Key-Einschränkungen zwischen den Anwendungsdaten Tabellen und den Tabellen, die in Schritt 2 erstellt wurden, ist es hilfreich, sich mit den `SqlMembershipProvider`-und `SqlRoleProvider` Schemas vertraut zu machen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="dcfcf-263">In bestimmten seltenen Fällen müssen wir möglicherweise eine Schnittstelle mit den Benutzer-und Rollen speichern direkt auf Datenbankebene (anstelle der `Membership`-oder `Roles`-Klassen) verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="dcfcf-264">Partitionierung des Benutzer Stores in Anwendungen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="dcfcf-265">Die Mitgliedschafts-und Rollen-Frameworks sind so konzipiert, dass ein einzelner Benutzer und ein Rollen Speicher von vielen verschiedenen Anwendungen gemeinsam genutzt werden können.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="dcfcf-266">Eine ASP.NET-Anwendung, die die Mitgliedschafts-oder Rollen Framework verwendet, muss angeben, welche Anwendungs Partition verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="dcfcf-267">Kurz gesagt können mehrere Webanwendungen dieselben Benutzer-und Rollen Speicher verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="dcfcf-268">Abbildung 11 stellt Benutzer-und Rollen Speicher dar, die in drei Anwendungen partitioniert sind: hrsite, customersite und salessite.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="dcfcf-269">Diese drei Webanwendungen verfügen jeweils über eigene eindeutige Benutzer und Rollen, aber ihre Benutzerkonten-und Rollen Informationen werden in den gleichen Datenbanktabellen gespeichert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>

<span data-ttu-id="dcfcf-270">[![Benutzerkonten können über mehrere Anwendungen hinweg partitioniert werden.](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-270">[![User Accounts May Be Partitioned Across Multiple Applications](creating-the-membership-schema-in-sql-server-vb/_static/image32.png)](creating-the-membership-schema-in-sql-server-vb/_static/image31.png)</span></span>

<span data-ttu-id="dcfcf-271">**Abbildung 11**: Benutzerkonten können über mehrere Anwendungen hinweg partitioniert werden ([Klicken Sie, um das Bild in voller Größe anzuzeigen](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="dcfcf-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-vb/_static/image33.png))</span></span>

<span data-ttu-id="dcfcf-272">In der `aspnet_Applications` Tabelle werden diese Partitionen definiert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="dcfcf-273">Jede Anwendung, die die Datenbank zum Speichern von Benutzerkontoinformationen verwendet, wird durch eine Zeile in dieser Tabelle dargestellt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="dcfcf-274">Die `aspnet_Applications` Tabelle enthält vier Spalten: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`und `Description`.`ApplicationId`</span><span class="sxs-lookup"><span data-stu-id="dcfcf-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.`ApplicationId`</span></span> <span data-ttu-id="dcfcf-275">ist vom Typ [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) und ist der Primärschlüssel der Tabelle. `ApplicationName` bietet einen eindeutigen benutzerfreundlichen Namen für jede Anwendung.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="dcfcf-276">Die anderen Mitgliedschafts-und Rollen bezogenen Tabellen werden wieder mit dem `ApplicationId`-Feld in `aspnet_Applications`verknüpft.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="dcfcf-277">Beispielsweise verfügt die `aspnet_Users` Tabelle, die einen Datensatz für jedes Benutzerkonto enthält, über ein `ApplicationId` Fremdschlüssel Feld. Ditto für die `aspnet_Roles` Tabelle.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="dcfcf-278">Das `ApplicationId` Feld in diesen Tabellen gibt die Anwendungs Partition an, zu der das Benutzerkonto oder die Rolle gehört.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="dcfcf-279">Speichern von Benutzerkontoinformationen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-279">Storing User Account Information</span></span>

<span data-ttu-id="dcfcf-280">Die Benutzerkontoinformationen sind in zwei Tabellen untergebracht: `aspnet_Users` und `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="dcfcf-281">Die `aspnet_Users` Tabelle enthält Felder, die die wesentlichen Benutzerkontoinformationen enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="dcfcf-282">Die drei relevantesten Spalten lauten:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

<span data-ttu-id="dcfcf-283">`UserId` ist der Primärschlüssel (und vom Typ `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-283">`UserId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="dcfcf-284">`UserName` ist vom Typ `nvarchar(256)` und bildet zusammen mit dem Kennwort die Anmelde Informationen des Benutzers.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-284">`UserName` is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="dcfcf-285">(Das Kennwort eines Benutzers wird in der `aspnet_Membership` Tabelle gespeichert.) `ApplicationId` verknüpft das Benutzerkonto mit einer bestimmten Anwendung in `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="dcfcf-286">In den Spalten `UserName` und `ApplicationId` ist eine zusammengesetzte [`UNIQUE` Einschränkung](https://msdn.microsoft.com/library/ms191166.aspx) vorhanden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="dcfcf-287">Dadurch wird sichergestellt, dass in einer bestimmten Anwendung jeder Benutzername eindeutig ist, aber die gleiche `UserName` in verschiedenen Anwendungen verwendet werden kann.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="dcfcf-288">Die `aspnet_Membership` Tabelle enthält zusätzliche Benutzerkontoinformationen, wie z. b. das Kennwort des Benutzers, die e-Mail-Adresse, Datum und Uhrzeit der letzten Anmeldung usw.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="dcfcf-289">Zwischen den Datensätzen in den Tabellen "`aspnet_Users`" und "`aspnet_Membership`" besteht eine eins-zu-eins-Entsprechung.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="dcfcf-290">Diese Beziehung wird durch das `UserId`-Feld in `aspnet_Membership`gewährleistet, das als Primärschlüssel der Tabelle dient.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="dcfcf-291">Wie die `aspnet_Users` Tabelle enthält `aspnet_Membership` ein `ApplicationId` Feld, das diese Informationen an eine bestimmte Anwendungs Partition bindet.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="dcfcf-292">Sichern von Kenn Wörtern</span><span class="sxs-lookup"><span data-stu-id="dcfcf-292">Securing Passwords</span></span>

<span data-ttu-id="dcfcf-293">Die Kenn Wort Informationen werden in der `aspnet_Membership` Tabelle gespeichert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="dcfcf-294">Der `SqlMembershipProvider` ermöglicht das Speichern von Kenn Wörtern in der Datenbank mithilfe einer der folgenden drei Verfahren:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="dcfcf-295">**Clear** : das Kennwort wird in der Datenbank als Klartext gespeichert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="dcfcf-296">Ich empfehle dringend, diese Option zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-296">I strongly discourage using this option.</span></span> <span data-ttu-id="dcfcf-297">Wenn die Datenbank kompromittiert ist, wird Sie von einem Hacker gefunden, der eine Hintertür oder einen verärgerten-Mitarbeiter hat, der über Zugriff auf die Datenbank verfügt. die Anmelde Informationen für jeden einzelnen Benutzer sind für das nehmen vorhanden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="dcfcf-298">Hash **-Kenn** Wörter werden mithilfe eines unidirektionalen Hash Algorithmus und eines zufällig generierten Salt-Werts Hashwert erstellt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="dcfcf-299">Dieser Hashwert (zusammen mit dem Salt-Wert) wird in der-Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="dcfcf-300">**Verschlüsselt** : eine verschlüsselte Version des Kennworts wird in der Datenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="dcfcf-301">Die verwendete Kenn Wort Speichermethode hängt von den in `Web.config`angegebenen `SqlMembershipProvider` Einstellungen ab.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="dcfcf-302">Wir sehen uns an, wie die `SqlMembershipProvider` Einstellungen in Schritt 4 angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="dcfcf-303">Das Standardverhalten ist das Speichern des Hashwerts des Kennworts.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="dcfcf-304">Die für das Speichern des Kennworts Verantwortlichen Spalten sind `Password`, `PasswordFormat`und `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> <span data-ttu-id="dcfcf-305">`PasswordFormat` ist ein Feld vom Typ `int`, dessen Wert das Verfahren angibt, das zum Speichern des Kennworts verwendet wird: 0 für Clear; 1 für Hashwert; 2 für verschlüsselt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-305">`PasswordFormat` is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> <span data-ttu-id="dcfcf-306">`PasswordSalt` wird unabhängig von der verwendeten Kenn Wort Speichermethode eine zufällig generierte Zeichenfolge zugewiesen. der Wert von `PasswordSalt` wird nur beim Berechnen des Hashwerts des Kennworts verwendet.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-306">`PasswordSalt` is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="dcfcf-307">Zum Schluss enthält die Spalte "`Password`" die eigentlichen Kenn Wort Daten, das nur-Text-Kennwort, der Hashwert des Kennworts oder das verschlüsselte Kennwort.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="dcfcf-308">Tabelle 1 zeigt, wie diese drei Spalten für die verschiedenen Speichertechniken aussehen können, wenn das Kennwort MySecret gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="dcfcf-309">erforderlich.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-309">.</span></span>

| <span data-ttu-id="dcfcf-310">**Speichertechnik&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="dcfcf-310">**Storage Technique&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="dcfcf-311">**Kennwort&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="dcfcf-311">**Password&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="dcfcf-312">**PasswordFormat&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="dcfcf-312">**PasswordFormat&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="dcfcf-313">**PasswordSalt&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="dcfcf-313">**PasswordSalt&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="dcfcf-314">Clear</span><span class="sxs-lookup"><span data-stu-id="dcfcf-314">Clear</span></span> | <span data-ttu-id="dcfcf-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="dcfcf-315">MySecret!</span></span> | <span data-ttu-id="dcfcf-316">0</span><span class="sxs-lookup"><span data-stu-id="dcfcf-316">0</span></span> | <span data-ttu-id="dcfcf-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="dcfcf-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="dcfcf-318">Hash</span><span class="sxs-lookup"><span data-stu-id="dcfcf-318">Hashed</span></span> | <span data-ttu-id="dcfcf-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="dcfcf-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="dcfcf-320">1</span><span class="sxs-lookup"><span data-stu-id="dcfcf-320">1</span></span> | <span data-ttu-id="dcfcf-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="dcfcf-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="dcfcf-322">Verschlüsselt</span><span class="sxs-lookup"><span data-stu-id="dcfcf-322">Encrypted</span></span> | <span data-ttu-id="dcfcf-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="dcfcf-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="dcfcf-324">2</span><span class="sxs-lookup"><span data-stu-id="dcfcf-324">2</span></span> | <span data-ttu-id="dcfcf-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="dcfcf-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="dcfcf-326">**Tabelle 1**: Beispiel Werte für die Kenn Wort bezogenen Felder, wenn das Kennwort MySecret gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-327">Der von der `SqlMembershipProvider` verwendete Verschlüsselungs-oder Hash Algorithmus wird durch die Einstellungen im `<machineKey>`-Element bestimmt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="dcfcf-328">Dieses Konfigurationselement wurde in Schritt 3 des Tutorials <a id="Tutorial3"> </a> [*Konfiguration der Formular Authentifizierung und erweiterte Themen*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) erläutert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-vb.md) tutorial.</span></span>

### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="dcfcf-329">Speichern von Rollen und Rollen Zuordnungen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="dcfcf-330">Das Rollen Framework ermöglicht es Entwicklern, eine Gruppe von Rollen zu definieren und anzugeben, welche Benutzer zu welchen Rollen gehören.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="dcfcf-331">Diese Informationen werden in der-Datenbank über zwei Tabellen aufgezeichnet: `aspnet_Roles` und `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="dcfcf-332">Jeder Datensatz in der `aspnet_Roles` Tabelle stellt eine Rolle für eine bestimmte Anwendung dar.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="dcfcf-333">Ähnlich wie die `aspnet_Users` Tabelle enthält die `aspnet_Roles` Tabelle drei Spalten, die für unsere Diskussion relevant sind:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

<span data-ttu-id="dcfcf-334">`RoleId` ist der Primärschlüssel (und vom Typ `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-334">`RoleId` is the primary key (and of type `uniqueidentifier`).</span></span> <span data-ttu-id="dcfcf-335">`RoleName` ist vom Typ `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-335">`RoleName` is of type `nvarchar(256)`.</span></span> <span data-ttu-id="dcfcf-336">Und `ApplicationId` das Benutzerkonto mit einer bestimmten Anwendung in `aspnet_Applications`verknüpft.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="dcfcf-337">Es gibt eine zusammengesetzte `UNIQUE` Einschränkung für die `RoleName`-und `ApplicationId` Spalten, die sicherstellen, dass in einer bestimmten Anwendung jeder Rollenname eindeutig ist.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="dcfcf-338">Die `aspnet_UsersInRoles` Tabelle dient als Zuordnung zwischen Benutzern und Rollen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="dcfcf-339">Es gibt nur zwei Spalten `UserId` und `RoleId` und zusammen bilden Sie einen zusammengesetzten Primärschlüssel.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="dcfcf-340">Schritt 4: Angeben des Anbieters und Anpassen der Einstellungen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="dcfcf-341">Alle Frameworks, die das Anbieter Modell unterstützen (z. b. die Mitgliedschafts-und Rollen-Frameworks), fehlen Implementierungsdetails selbst und delegieren diese Aufgabe stattdessen an eine Anbieter Klasse.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="dcfcf-342">Im Fall des Mitgliedschafts-Frameworks definiert die `Membership`-Klasse die API zum Verwalten von Benutzerkonten, aber Sie interagiert nicht direkt mit einem Benutzerspeicher.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="dcfcf-343">Stattdessen übergeben die Methoden der `Membership` Klasse die Anforderung an den konfigurierten Anbieter. Wir verwenden den `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-344">Wie weiß das Mitgliedschafts Framework beim Aufrufen einer der Methoden in der `Membership`-Klasse, dass der Aufruf an den `SqlMembershipProvider`delegiert werden soll?</span><span class="sxs-lookup"><span data-stu-id="dcfcf-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="dcfcf-345">Die `Membership`-Klasse verfügt über eine [`Providers`-Eigenschaft](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) , die einen Verweis auf alle registrierten Anbieter Klassen enthält, die für die Verwendung durch das Mitgliedschafts Framework verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="dcfcf-346">Jeder registrierte Anbieter verfügt über einen zugeordneten Namen und Typ.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="dcfcf-347">Der Name bietet eine benutzerfreundliche Möglichkeit, auf einen bestimmten Anbieter in der `Providers` Auflistung zu verweisen, während der Typ die Anbieter Klasse identifiziert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="dcfcf-348">Außerdem kann jeder registrierte Anbieter Konfigurationseinstellungen enthalten.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="dcfcf-349">Zu den Konfigurationseinstellungen für das Mitgliedschafts Framework zählen unter anderem `PasswordFormat` und `requiresUniqueEmail`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-349">Configuration settings for the Membership framework include `PasswordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="dcfcf-350">Eine umfassende Liste der vom `SqlMembershipProvider`verwendeten Konfigurationseinstellungen finden Sie in Tabelle 2.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="dcfcf-351">Der Inhalt der `Providers` Eigenschaft wird durch die Konfigurationseinstellungen der Webanwendung angegeben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="dcfcf-352">Standardmäßig verfügen alle Webanwendungen über einen Anbieter mit dem Namen `AspNetSqlMembershipProvider` vom Typ `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-353">Dieser Standard Mitgliedschafts Anbieter wird in `machine.config` (unter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`) registriert:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG`):</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample1.xml)]

<span data-ttu-id="dcfcf-354">Wie das obige Markup zeigt, definiert das [`<membership>`-Element](https://msdn.microsoft.com/library/1b9hw62f.aspx) die Konfigurationseinstellungen für das Mitgliedschafts Framework, während das`<providers>` untergeordnete [Element](https://msdn.microsoft.com/library/6d4936ht.aspx) die registrierten Anbieter angibt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="dcfcf-355">Anbieter können mithilfe der [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) oder [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) Elementen hinzugefügt oder entfernt werden. Verwenden Sie das [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) -Element, um alle zurzeit registrierten Anbieter zu entfernen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="dcfcf-356">Wie das obige Markup zeigt, fügt `machine.config` einen Anbieter mit dem Namen `AspNetSqlMembershipProvider` vom Typ `SqlMembershipProvider`hinzu.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="dcfcf-357">Zusätzlich zu den `name`-und `type` Attributen enthält das `<add>`-Element Attribute, die die Werte für verschiedene Konfigurationseinstellungen definieren.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="dcfcf-358">In Tabelle 2 werden die verfügbaren `SqlMembershipProvider`spezifischen Konfigurationseinstellungen zusammen mit einer Beschreibung aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-359">Alle in Tabelle 2 notierten Standardwerte verweisen auf die Standardwerte, die in der `SqlMembershipProvider`-Klasse definiert sind.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="dcfcf-360">Beachten Sie, dass nicht alle Konfigurationseinstellungen in `AspNetSqlMembershipProvider` den Standardwerten der `SqlMembershipProvider`-Klasse entsprechen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="dcfcf-361">Wenn z. b. in einem Mitgliedschafts Anbieter nicht angegeben wird, wird für die `requiresUniqueEmail` Einstellung standardmäßig true festgelegt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="dcfcf-362">Der `AspNetSqlMembershipProvider` überschreibt diesen Standardwert jedoch durch explizites angeben des Werts `false`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>

| <span data-ttu-id="dcfcf-363">**Festlegen von&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="dcfcf-363">**Setting&lt;\_o3a\_p /&gt;**</span></span> | <span data-ttu-id="dcfcf-364">**Beschreibung&lt;\_o3a\_p/&gt;**</span><span class="sxs-lookup"><span data-stu-id="dcfcf-364">**Description&lt;\_o3a\_p /&gt;**</span></span> |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="dcfcf-365">Beachten Sie, dass das Mitgliedschafts Framework ermöglicht, dass ein einzelner Benutzerspeicher über mehrere Anwendungen hinweg partitioniert werden kann.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="dcfcf-366">Diese Einstellung gibt den Namen der Anwendungs Partition an, die vom Mitgliedschafts Anbieter verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="dcfcf-367">Wenn dieser Wert nicht explizit angegeben wird, wird er zur Laufzeit auf den Wert des virtuellen Stammpfad der Anwendung festgelegt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="dcfcf-368">Gibt den Timeout Wert für den SQL-Befehl (in Sekunden) an.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="dcfcf-369">Der Standardwert ist 30.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="dcfcf-370">Der Name der Verbindungs Zeichenfolge im `<connectionStrings>`-Element, das zum Herstellen einer Verbindung mit der Benutzerspeicher-Datenbank verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="dcfcf-371">Dieser Wert ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="dcfcf-372">Stellt eine benutzerfreundliche Beschreibung des registrierten Anbieters bereit.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="dcfcf-373">Gibt an, ob Benutzer ihr vergessenes Kennwort abrufen dürfen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="dcfcf-374">Standardwert: `false`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="dcfcf-375">Gibt an, ob Benutzer Ihr Kennwort zurücksetzen können.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="dcfcf-376">Wird standardmäßig auf `true` festgelegt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="dcfcf-377">Die maximale Anzahl von erfolglosen Anmelde versuchen, die für einen bestimmten Benutzer während des angegebenen `passwordAttemptWindow` auftreten können, bevor der Benutzer gesperrt wird. Der Standardwert ist 5.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="dcfcf-378">Die Mindestanzahl nicht alphanumerischer Zeichen, die im Kennwort eines Benutzers angezeigt werden müssen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="dcfcf-379">Dieser Wert muss zwischen 0 und 128 liegen. der Standardwert ist 1.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="dcfcf-380">Die Mindestanzahl von Zeichen, die in einem Kennwort erforderlich sind.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="dcfcf-381">Dieser Wert muss zwischen 0 und 128 liegen. der Standardwert ist 7.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="dcfcf-382">Der Name des registrierten Anbieters.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-382">The name of the registered provider.</span></span> <span data-ttu-id="dcfcf-383">Dieser Wert ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="dcfcf-384">Die Anzahl der Minuten, während der fehlgeschlagene Anmeldeversuche nachverfolgt werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="dcfcf-385">Wenn ein Benutzer innerhalb dieses angegebenen Fensters `maxInvalidPasswordAttempts` Zeiten ungültige Anmelde Informationen angibt, werden diese gesperrt. Der Standardwert ist 10.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="dcfcf-386">Das Kenn Wort Speicherformat: `Clear`, `Hashed`oder `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="dcfcf-387">Der Standardwert lautet `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="dcfcf-388">Wenn angegeben, wird dieser reguläre Ausdruck zum Auswerten der Stärke des ausgewählten Kennworts des Benutzers verwendet, wenn ein neues Konto erstellt oder das Kennwort geändert wird.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="dcfcf-389">Der Standardwert ist eine leere Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="dcfcf-390">Gibt an, ob ein Benutzer seine Sicherheitsfrage beim Abrufen oder Zurücksetzen seines Kennworts beantworten muss.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="dcfcf-391">Standardwert: `true`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="dcfcf-392">Gibt an, ob alle Benutzerkonten in einer bestimmten Anwendungs Partition über eine eindeutige e-Mail-Adresse verfügen müssen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="dcfcf-393">Standardwert: `true`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="dcfcf-394">Gibt den Typ des Anbieters an.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-394">Specifies the type of the provider.</span></span> <span data-ttu-id="dcfcf-395">Dieser Wert ist erforderlich.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-395">This value is required.</span></span> |

<span data-ttu-id="dcfcf-396">**Tabelle 2**: Mitgliedschafts-und `SqlMembershipProvider` Konfigurationseinstellungen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="dcfcf-397">Zusätzlich zu `AspNetSqlMembershipProvider`können andere Mitgliedschafts Anbieter auf Anwendungs Basis registriert werden, indem der `Web.config` Datei ein ähnliches Markup hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-398">Das Framework für Rollen funktioniert ähnlich: Es gibt einen standardmäßigen registrierten Rollen Anbieter in `machine.config`, und die registrierten Anbieter können in `Web.config`auf Anwendungs Basis angepasst werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="dcfcf-399">In einem zukünftigen Tutorial werden das Rollen Framework und das dazugehörige Konfigurations Markup ausführlich erläutert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>

### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="dcfcf-400">Anpassen der`SqlMembershipProvider`Einstellungen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="dcfcf-401">Für den Standard `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) ist das `connectionStringName`-Attribut auf `LocalSqlServer`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="dcfcf-402">Wie der `AspNetSqlMembershipProvider`-Anbieter wird der Name der Verbindungs Zeichenfolge `LocalSqlServer` in `machine.config`definiert.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample2.xml)]

<span data-ttu-id="dcfcf-403">Wie Sie sehen können, definiert diese Verbindungs Zeichenfolge eine SQL 2005 Express Edition-Datenbank unter | DataDirectory | aspnetdb. mdf.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf.</span></span> <span data-ttu-id="dcfcf-404">Die Zeichenfolge | DataDirectory | wird zur Laufzeit übersetzt, um auf das `~/App_Data/` Verzeichnis zu verweisen, sodass der Daten bankpfad | DataDirectory | aspnetdb. mdf wird in `~/App_Data`/`aspnet.mdf`übersetzt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-404">The string |DataDirectory| is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="dcfcf-405">Wenn in der `Web.config` Datei der Anwendung keine Mitgliedschafts Anbieter Informationen angegeben wurden, verwendet die Anwendung den standardmäßigen registrierten Mitgliedschafts Anbieter `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-406">Wenn die `~/App_Data/aspnet.mdf` Datenbank nicht vorhanden ist, wird Sie von der ASP.NET-Laufzeit automatisch erstellt und das Anwendungs Dienst Schema hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="dcfcf-407">Wir möchten jedoch nicht die `aspnet.mdf` Datenbank verwenden. Stattdessen möchten wir die `SecurityTutorials.mdf` Datenbank verwenden, die wir in Schritt 2 erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="dcfcf-408">Diese Änderung kann auf zwei Arten durchgeführt werden:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="dcfcf-409">Geben Sie in`Web.config`<strong>einen Wert für den Namen der</strong> <strong>`LocalSqlServer`</strong> <strong>Verbindungs Zeichenfolge an</strong> <strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="dcfcf-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="dcfcf-410">Wenn Sie den Wert `LocalSqlServer` Verbindungs Zeichenfolgen-Name in `Web.config`überschreiben, können wir den standardmäßigen registrierten Mitgliedschafts Anbieter (`AspNetSqlMembershipProvider`) verwenden und ihn ordnungsgemäß mit der `SecurityTutorials.mdf` Datenbank arbeiten lassen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="dcfcf-411">Diese Vorgehensweise ist in Ordnung, wenn Sie Inhalte mit den von `AspNetSqlMembershipProvider`angegebenen Konfigurationseinstellungen haben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-412">Weitere Informationen zu dieser Technik finden Sie im Blogbeitrag von [Scott Guthrie](https://weblogs.asp.net/scottgu/), [Konfigurieren von ASP.NET 2,0 Anwendungsdienste für die Verwendung von SQL Server 2000 oder SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="dcfcf-413"><strong>Fügen Sie einen neuen registrierten Anbieter vom Typ</strong> <strong>`SqlMembershipProvider`</strong>hinzu, <strong>und konfigurieren Sie seine</strong> <strong>`connectionStringName`</strong> <strong>Einstellungen so, dass er auf die</strong> <strong>`SecurityTutorials.mdf`</strong> <strong>Datenbank verweist.</strong></span><span class="sxs-lookup"><span data-stu-id="dcfcf-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="dcfcf-414">Diese Vorgehensweise ist nützlich in Szenarien, in denen andere Konfigurations Eigenschaften zusätzlich zur Daten bankverbindungs Zeichenfolge angepasst werden sollen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="dcfcf-415">In meinen eigenen Projekten verwende ich diesen Ansatz immer aufgrund seiner Flexibilität und Lesbarkeit.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="dcfcf-416">Bevor ein neuer registrierter Anbieter hinzugefügt werden kann, der auf die `SecurityTutorials.mdf` Datenbank verweist, müssen wir zunächst im Abschnitt `<connectionStrings>` in `Web.config`einen entsprechenden Wert für die Verbindungs Zeichenfolge hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="dcfcf-417">Das folgende Markup fügt eine neue Verbindungs Zeichenfolge mit dem Namen `SecurityTutorialsConnectionString` hinzu, die auf die SQL Server 2005 Express Edition `SecurityTutorials.mdf` Datenbank im `App_Data` Ordner verweist.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="dcfcf-418">Wenn Sie eine Alternative Datenbankdatei verwenden, aktualisieren Sie die Verbindungs Zeichenfolge nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="dcfcf-419">Weitere Informationen zum bilden der richtigen Verbindungs Zeichenfolge finden Sie unter [connectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="dcfcf-420">Fügen Sie als nächstes das folgende Mitgliedschafts Konfigurations Markup zur `Web.config` Datei hinzu.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="dcfcf-421">Dieses Markup registriert einen neuen Anbieter mit dem Namen `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-vb/samples/sample4.xml)]

<span data-ttu-id="dcfcf-422">Zusätzlich zum Registrieren des `SecurityTutorialsSqlMembershipProvider` Anbieters definiert das obige Markup das `SecurityTutorialsSqlMembershipProvider` als Standardanbieter (über das `defaultProvider`-Attribut im `<membership>`-Element).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="dcfcf-423">Denken Sie daran, dass das Mitgliedschafts Framework mehrere registrierte Anbieter aufweisen kann.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="dcfcf-424">Da `AspNetSqlMembershipProvider` als erster Anbieter in `machine.config`registriert ist, fungiert er als Standardanbieter, sofern nicht anders angegeben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="dcfcf-425">Derzeit verfügt unsere Anwendung über zwei registrierte Anbieter: `AspNetSqlMembershipProvider` und `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-426">Vor dem Registrieren des `SecurityTutorialsSqlMembershipProvider` Anbieters konnten wir jedoch alle zuvor registrierten Anbieter durch Hinzufügen eines [`<clear />` Elements](https://msdn.microsoft.com/library/t062y6yc.aspx) direkt vor dem `<add>`-Element löschen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="dcfcf-427">Dadurch wird die `AspNetSqlMembershipProvider` aus der Liste der registrierten Anbieter gelöscht, was bedeutet, dass die `SecurityTutorialsSqlMembershipProvider` der einzige registrierte Mitgliedschafts Anbieter ist.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="dcfcf-428">Wenn Sie diesen Ansatz verwenden, müssen wir die `SecurityTutorialsSqlMembershipProvider` nicht als Standardanbieter markieren, da dies der einzige registrierte Mitgliedschafts Anbieter wäre.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="dcfcf-429">Weitere Informationen zur Verwendung von `<clear />`finden Sie unter [Verwenden von `<clear />` beim Hinzufügen von Anbietern](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-429">For more information on using `<clear />`, see [Using `<clear />` When Adding providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="dcfcf-430">Beachten Sie, dass die `connectionStringName` Einstellung des `SecurityTutorialsSqlMembershipProvider`auf den soeben hinzugefügten `SecurityTutorialsConnectionString` Verbindungs Zeichenfolgen-Namen verweist und dass seine `applicationName` Einstellung auf den Wert securitytutorials festgelegt wurde.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="dcfcf-431">Außerdem wurde die `requiresUniqueEmail` Einstellung auf `true`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="dcfcf-432">Alle anderen Konfigurationsoptionen sind identisch mit den Werten in `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="dcfcf-433">Wenn Sie möchten, können Sie an dieser Stelle jederzeit Änderungen an der Konfiguration vornehmen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="dcfcf-434">Beispielsweise können Sie die Kenn Wort Sicherheit erhöhen, indem Sie anstelle eines der beiden nicht-alphanumerischen Zeichen zwei nicht-alphanumerische Zeichen benötigen, oder indem Sie die Kenn Wort Länge auf acht Zeichen anstelle von 7 erhöhen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="dcfcf-435">Beachten Sie, dass das Mitgliedschafts Framework ermöglicht, dass ein einzelner Benutzerspeicher über mehrere Anwendungen hinweg partitioniert werden kann.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="dcfcf-436">Die `applicationName` Einstellung des Mitgliedschafts Anbieters gibt an, welche Anwendung der Anbieter bei der Arbeit mit dem Benutzerspeicher verwendet.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="dcfcf-437">Es ist wichtig, dass Sie explizit einen Wert für die `applicationName` Konfigurationseinstellung festlegen, denn wenn die `applicationName` nicht explizit festgelegt ist, wird Sie zur Laufzeit dem virtuellen Stammpfad der Webanwendung zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="dcfcf-438">Dies funktioniert einwandfrei, solange der virtuelle Stammpfad der Anwendung nicht geändert wird. Wenn Sie die Anwendung jedoch in einen anderen Pfad verschieben, ändert sich auch die `applicationName` Einstellung.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="dcfcf-439">In diesem Fall wird der Mitgliedschafts Anbieter mit einer anderen Anwendungs Partition arbeiten, als zuvor verwendet wurde.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="dcfcf-440">Benutzerkonten, die vor dem Verschieben erstellt wurden, befinden sich in einer anderen Anwendungs Partition, und diese Benutzer können sich nicht mehr bei der Website anmelden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="dcfcf-441">Eine ausführlichere Erläuterung zu diesem Thema finden Sie unter [Festlegen der `applicationName`-Eigenschaft beim Konfigurieren der ASP.NET 2,0-Mitgliedschaft und anderer Anbieter](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="dcfcf-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers](https://weblogs.asp.net/scottgu/443634).</span></span>

## <a name="summary"></a><span data-ttu-id="dcfcf-442">Zusammenfassung</span><span class="sxs-lookup"><span data-stu-id="dcfcf-442">Summary</span></span>

<span data-ttu-id="dcfcf-443">An dieser Stelle verfügen wir über eine Datenbank mit den konfigurierten Anwendungsdiensten (`SecurityTutorials.mdf`) und haben die Webanwendung so konfiguriert, dass das Mitgliedschafts Framework den `SecurityTutorialsSqlMembershipProvider` Anbieter verwendet, den wir gerade registriert haben.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="dcfcf-444">Dieser registrierte Anbieter weist den Typ "`SqlMembershipProvider`" auf und ist dessen `connectionStringName` auf die entsprechende Verbindungs Zeichenfolge (`SecurityTutorialsConnectionString`) und dessen `applicationName` Wert explizit festgelegt.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="dcfcf-445">Wir sind nun bereit, das Mitgliedschafts Framework aus unserer Anwendung zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="dcfcf-446">Im nächsten Tutorial wird erläutert, wie neue Benutzerkonten erstellt werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="dcfcf-447">Im folgenden erfahren Sie, wie Sie die Authentifizierung von Benutzern, die Durchführung einer benutzerbasierten Autorisierung und das Speichern zusätzlicher Benutzer bezogener Informationen in der-Datenbank untersuchen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="dcfcf-448">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="dcfcf-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="dcfcf-449">Weitere nützliche Informationen</span><span class="sxs-lookup"><span data-stu-id="dcfcf-449">Further Reading</span></span>

<span data-ttu-id="dcfcf-450">Weitere Informationen zu den in diesem Tutorial behandelten Themen finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="dcfcf-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="dcfcf-451">Legen Sie die `applicationName`-Eigenschaft beim Konfigurieren der ASP.NET 2,0-Mitgliedschaft und anderer Anbieter immer fest.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="dcfcf-452">Konfigurieren von ASP.NET 2,0 Anwendungsdienste für die Verwendung SQL Server 2000 oder SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="dcfcf-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="dcfcf-453">Herunterladen von SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="dcfcf-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="dcfcf-454">Untersuchen von ASP.NET 2,0 s Mitgliedschaft, Rollen und profile</span><span class="sxs-lookup"><span data-stu-id="dcfcf-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="dcfcf-455">Das `<add>`-Element für Anbieter für die Mitgliedschaft.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-455">The `<add>` Element for providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="dcfcf-456">Das `<membership>`-Element</span><span class="sxs-lookup"><span data-stu-id="dcfcf-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="dcfcf-457">Das `<providers>` Element für die Mitgliedschaft.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="dcfcf-458">Verwenden von `<clear />` beim Hinzufügen von Anbietern</span><span class="sxs-lookup"><span data-stu-id="dcfcf-458">Using `<clear />` When Adding providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="dcfcf-459">Direktes Arbeiten mit dem `SqlMembershipProvider`</span><span class="sxs-lookup"><span data-stu-id="dcfcf-459">Working Directly with the `SqlMembershipProvider`</span></span>](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="dcfcf-460">Video Schulung zu Themen in diesem Tutorial</span><span class="sxs-lookup"><span data-stu-id="dcfcf-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="dcfcf-461">Grundlegendes zu ASP.NET-Mitgliedschaften</span><span class="sxs-lookup"><span data-stu-id="dcfcf-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="dcfcf-462">Konfigurieren von SQL für die Arbeit mit Mitgliedschaftsschemas</span><span class="sxs-lookup"><span data-stu-id="dcfcf-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="dcfcf-463">Ändern der Mitgliedschaftseinstellungen im Mitgliedschaftsschema</span><span class="sxs-lookup"><span data-stu-id="dcfcf-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="dcfcf-464">Zum Autor</span><span class="sxs-lookup"><span data-stu-id="dcfcf-464">About the Author</span></span>

<span data-ttu-id="dcfcf-465">Scott Mitchell, Autor mehrerer ASP/ASP. net-Bücher und Gründer von 4GuysFromRolla.com, hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="dcfcf-466">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="dcfcf-467">Sein letztes Buch ist *[Sams Teach Yourself ASP.NET 2,0 in 24 Stunden](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="dcfcf-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="dcfcf-468">Scott kann über [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/)erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="dcfcf-469">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="dcfcf-469">Special Thanks To</span></span>

<span data-ttu-id="dcfcf-470">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="dcfcf-471">Lead Reviewer für dieses Tutorial war Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="dcfcf-472">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="dcfcf-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="dcfcf-473">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)ablegen.</span><span class="sxs-lookup"><span data-stu-id="dcfcf-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="dcfcf-474">[Zurück](storing-additional-user-information-cs.md)
> [Weiter](creating-user-accounts-vb.md)</span><span class="sxs-lookup"><span data-stu-id="dcfcf-474">[Previous](storing-additional-user-information-cs.md)
[Next](creating-user-accounts-vb.md)</span></span>
