---
uid: web-forms/overview/older-versions-security/membership/user-based-authorization-cs
title: Benutzerbasierte Autorisierung (C#) | Microsoft-Dokumentation
author: rick-anderson
description: In diesem Tutorial erfahren Sie, wie Sie den Zugriff auf Seiten einschränken und Funktionen auf Seitenebene durch eine Vielzahl von Verfahren einschränken.
ms.author: riande
ms.date: 01/18/2008
ms.assetid: 3c815a9e-2296-4b9b-b945-776d54989daa
msc.legacyurl: /web-forms/overview/older-versions-security/membership/user-based-authorization-cs
msc.type: authoredcontent
ms.openlocfilehash: 059dbf42956268884dcfdade696491ac39e32da9
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 11/28/2019
ms.locfileid: "74614432"
---
# <a name="user-based-authorization-c"></a><span data-ttu-id="8cb4f-103">Benutzerbasierte Autorisierung (C#)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-103">User-Based Authorization (C#)</span></span>

<span data-ttu-id="8cb4f-104">von [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8cb4f-105">[Code herunterladen](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_07_CS.zip) oder [PDF herunterladen](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial07_UserAuth_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-105">[Download Code](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_07_CS.zip) or [Download PDF](https://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial07_UserAuth_cs.pdf)</span></span>

> <span data-ttu-id="8cb4f-106">In diesem Tutorial erfahren Sie, wie Sie den Zugriff auf Seiten einschränken und Funktionen auf Seitenebene durch eine Vielzahl von Verfahren einschränken.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-106">In this tutorial we will look at limiting access to pages and restricting page-level functionality through a variety of techniques.</span></span>

## <a name="introduction"></a><span data-ttu-id="8cb4f-107">Einführung</span><span class="sxs-lookup"><span data-stu-id="8cb4f-107">Introduction</span></span>

<span data-ttu-id="8cb4f-108">Die meisten Webanwendungen, die Benutzerkonten anbieten, sind so Teil, um bestimmte Besucher daran zu hindern, auf bestimmte Seiten innerhalb der Site zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-108">Most web applications that offer user accounts do so in part to restrict certain visitors from accessing certain pages within the site.</span></span> <span data-ttu-id="8cb4f-109">In den meisten Online-Messageboard-Sites können z. b. alle Benutzer anonym und authentifiziert die Beiträge des Messageboards anzeigen, aber nur authentifizierte Benutzer können die Webseite besuchen, um einen neuen Beitrag zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-109">In most online messageboard sites, for example, all users - anonymous and authenticated - are able to view the messageboard's posts, but only authenticated users can visit the web page to create a new post.</span></span> <span data-ttu-id="8cb4f-110">Es können auch Verwaltungs Seiten vorhanden sein, auf die nur ein bestimmter Benutzer (oder eine bestimmte Gruppe von Benutzern) zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-110">And there may be administrative pages that are only accessible to a particular user (or a particular set of users).</span></span> <span data-ttu-id="8cb4f-111">Darüber hinaus können Funktionen auf Seitenebene von Benutzer zu Benutzer-Basis abweichen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-111">Moreover, page-level functionality can differ on a user-by-user basis.</span></span> <span data-ttu-id="8cb4f-112">Beim Anzeigen einer Liste von Beiträgen wird den authentifizierten Benutzern eine Schnittstelle für die Bewertung der einzelnen Beiträge angezeigt, während diese Schnittstelle für anonyme Besucher nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-112">When viewing a list of posts, authenticated users are shown an interface for rating each post, whereas this interface is not available to anonymous visitors.</span></span>

<span data-ttu-id="8cb4f-113">ASP.NET vereinfacht die Definition Benutzer basierter Autorisierungs Regeln.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-113">ASP.NET makes it easy to define user-based authorization rules.</span></span> <span data-ttu-id="8cb4f-114">Mit nur einem Markup in `Web.config`können bestimmte Webseiten oder gesamte Verzeichnisse gesperrt werden, sodass nur eine bestimmte Teilmenge von Benutzern zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-114">With just a bit of markup in `Web.config`, specific web pages or entire directories can be locked down so that they are only accessible to a specified subset of users.</span></span> <span data-ttu-id="8cb4f-115">Funktionen auf Seitenebene können basierend auf dem aktuell angemeldeten Benutzer durch programmgesteuerte und deklarative Mittel aktiviert oder deaktiviert werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-115">Page-level functionality can be turned on or off based on the currently logged in user through programmatic and declarative means.</span></span>

<span data-ttu-id="8cb4f-116">In diesem Tutorial erfahren Sie, wie Sie den Zugriff auf Seiten einschränken und Funktionen auf Seitenebene durch eine Vielzahl von Verfahren einschränken.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-116">In this tutorial we will look at limiting access to pages and restricting page-level functionality through a variety of techniques.</span></span> <span data-ttu-id="8cb4f-117">Fangen wir an!</span><span class="sxs-lookup"><span data-stu-id="8cb4f-117">Let's get started!</span></span>

## <a name="a-look-at-the-url-authorization-workflow"></a><span data-ttu-id="8cb4f-118">Ein Blick auf den URL-Autorisierungs Workflow</span><span class="sxs-lookup"><span data-stu-id="8cb4f-118">A Look at the URL Authorization Workflow</span></span>

<span data-ttu-id="8cb4f-119">Wie in der Übersicht über das Tutorial zur [*Formular Authentifizierung*](../introduction/an-overview-of-forms-authentication-cs.md) erläutert, werden bei der Verarbeitung einer Anforderung für eine ASP.NET-Ressource die Anforderung eine Reihe von Ereignissen während des Lebenszyklus auslöst.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-119">As discussed in the [*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, when the ASP.NET runtime processes a request for an ASP.NET resource the request raises a number of events during its lifecycle.</span></span> <span data-ttu-id="8cb4f-120">*HTTP-Module* sind verwaltete Klassen, deren Code als Reaktion auf ein bestimmtes Ereignis im Anforderungs Lebenszyklus ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-120">*HTTP Modules* are managed classes whose code is executed in response to a particular event in the request lifecycle.</span></span> <span data-ttu-id="8cb4f-121">ASP.net wird mit einer Reihe von HTTP-Modulen ausgeliefert, die wichtige Aufgaben im Hintergrund ausführen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-121">ASP.NET ships with a number of HTTP Modules that perform essential tasks behind the scenes.</span></span>

<span data-ttu-id="8cb4f-122">Ein solches HTTP-Modul ist [`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-122">One such HTTP Module is [`FormsAuthenticationModule`](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx).</span></span> <span data-ttu-id="8cb4f-123">Wie in den vorherigen Tutorials erläutert, besteht die primäre Funktion des `FormsAuthenticationModule` darin, die Identität der aktuellen Anforderung zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-123">As discussed in previous tutorials, the primary function of the `FormsAuthenticationModule` is to determine the identity of the current request.</span></span> <span data-ttu-id="8cb4f-124">Dies wird erreicht, indem das Formular Authentifizierungs Ticket überprüft wird, das sich entweder in einem Cookie befindet oder in die URL eingebettet ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-124">This is accomplished by inspecting the forms authentication ticket, which is either located in a cookie or embedded within the URL.</span></span> <span data-ttu-id="8cb4f-125">Diese Identifikation findet während des [`AuthenticateRequest` Ereignisses](https://msdn.microsoft.com/library/system.web.httpapplication.authenticaterequest.aspx)statt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-125">This identification takes place during the [`AuthenticateRequest` event](https://msdn.microsoft.com/library/system.web.httpapplication.authenticaterequest.aspx).</span></span>

<span data-ttu-id="8cb4f-126">Ein weiteres wichtiges HTTP-Modul ist die [`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx), die als Reaktion auf das [`AuthorizeRequest`-Ereignis](https://msdn.microsoft.com/library/system.web.httpapplication.authorizerequest.aspx) ausgelöst wird (das nach dem `AuthenticateRequest`-Ereignis erfolgt).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-126">Another important HTTP Module is the [`UrlAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx), which is raised in response to the [`AuthorizeRequest` event](https://msdn.microsoft.com/library/system.web.httpapplication.authorizerequest.aspx) (which happens after the `AuthenticateRequest` event).</span></span> <span data-ttu-id="8cb4f-127">Der `UrlAuthorizationModule` überprüft das Konfigurations Markup in `Web.config`, um zu bestimmen, ob die aktuelle Identität über die Berechtigung verfügt, die angegebene Seite zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-127">The `UrlAuthorizationModule` examines configuration markup in `Web.config` to determine whether the current identity has authority to visit the specified page.</span></span> <span data-ttu-id="8cb4f-128">Dieser Prozess wird als URL- *Autorisierung*bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-128">This process is referred to as *URL authorization*.</span></span>

<span data-ttu-id="8cb4f-129">Wir untersuchen die Syntax für die URL-Autorisierungs Regeln in Schritt 1, aber zunächst sehen wir uns an, was die `UrlAuthorizationModule` hat, je nachdem, ob die Anforderung autorisiert ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-129">We'll examine the syntax for the URL authorization rules in Step 1, but first let's look at what the `UrlAuthorizationModule` does depending on whether the request is authorized or not.</span></span> <span data-ttu-id="8cb4f-130">Wenn die `UrlAuthorizationModule` feststellt, dass die Anforderung autorisiert ist, wird keine Aktion durchgeführt, und die Anforderung wird durch den Lebenszyklus der Anforderung fortgesetzt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-130">If the `UrlAuthorizationModule` determines that the request is authorized, then it does nothing, and the request continues through its lifecycle.</span></span> <span data-ttu-id="8cb4f-131">Wenn die Anforderung jedoch *nicht* autorisiert ist, bricht der `UrlAuthorizationModule` den Lebenszyklus ab und weist das `Response` Objekt an, den Status " [HTTP 401 nicht autorisiert](http://www.checkupdown.com/status/E401.html) " zurückzugeben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-131">However, if the request is *not* authorized, then the `UrlAuthorizationModule` aborts the lifecycle and instructs the `Response` object to return an [HTTP 401 Unauthorized](http://www.checkupdown.com/status/E401.html) status.</span></span> <span data-ttu-id="8cb4f-132">Wenn Sie die Formular Authentifizierung verwenden, wird dieser HTTP 401-Status niemals an den Client zurückgegeben, denn wenn die `FormsAuthenticationModule` einen 401 HTTP-Status erkennt, wird der HTTP-Status in [HTTP 302](http://www.checkupdown.com/status/E302.html) an die Anmeldeseite umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-132">When using forms authentication this HTTP 401 status is never returned to the client because if the `FormsAuthenticationModule` detects an HTTP 401 status is modifies it to an [HTTP 302 Redirect](http://www.checkupdown.com/status/E302.html) to the login page.</span></span>

<span data-ttu-id="8cb4f-133">Abbildung 1 veranschaulicht den Workflow der ASP.NET-Pipeline, die `FormsAuthenticationModule`und die `UrlAuthorizationModule`, wenn eine nicht autorisierte Anforderung eingeht.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-133">Figure 1 illustrates the workflow of the ASP.NET pipeline, the `FormsAuthenticationModule`, and the `UrlAuthorizationModule` when an unauthorized request arrives.</span></span> <span data-ttu-id="8cb4f-134">In Abbildung 1 wird insbesondere eine Anforderung eines anonymen Besuchers für `ProtectedPage.aspx`angezeigt. dabei handelt es sich um eine Seite, die den Zugriff auf anonyme Benutzer verweigert.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-134">In particular, Figure 1 shows a request by an anonymous visitor for `ProtectedPage.aspx`, which is a page that denies access to anonymous users.</span></span> <span data-ttu-id="8cb4f-135">Da der Besucher anonym ist, wird die Anforderung vom `UrlAuthorizationModule` abgebrochen, und es wird der Status "http 401 nicht autorisiert" zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-135">Since the visitor is anonymous, the `UrlAuthorizationModule` aborts the request and returns an HTTP 401 Unauthorized status.</span></span> <span data-ttu-id="8cb4f-136">Anschließend konvertiert der `FormsAuthenticationModule` den Status 401 in eine 302-Umleitung zur Anmeldeseite.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-136">The `FormsAuthenticationModule` then converts the 401 status into a 302 Redirect to login page.</span></span> <span data-ttu-id="8cb4f-137">Nachdem der Benutzer über die Anmeldeseite authentifiziert wurde, wird er zu `ProtectedPage.aspx`umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-137">After the user is authenticated via the login page, he is redirected to `ProtectedPage.aspx`.</span></span> <span data-ttu-id="8cb4f-138">Dieses Mal identifiziert der `FormsAuthenticationModule` den Benutzer basierend auf seinem Authentifizierungs Ticket.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-138">This time the `FormsAuthenticationModule` identifies the user based on his authentication ticket.</span></span> <span data-ttu-id="8cb4f-139">Nachdem der Besucher authentifiziert wurde, ermöglicht das `UrlAuthorizationModule` den Zugriff auf die Seite.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-139">Now that the visitor is authenticated, the `UrlAuthorizationModule` permits access to the page.</span></span>

<span data-ttu-id="8cb4f-140">[![des Workflows zur Formular Authentifizierung und URL-Autorisierung](user-based-authorization-cs/_static/image2.png)](user-based-authorization-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-140">[![The Forms Authentication and URL Authorization Workflow](user-based-authorization-cs/_static/image2.png)](user-based-authorization-cs/_static/image1.png)</span></span>

<span data-ttu-id="8cb4f-141">**Abbildung 1**: der Workflow zur Formular Authentifizierung und URL-Autorisierung ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-141">**Figure 1**: The Forms Authentication and URL Authorization Workflow  ([Click to view full-size image](user-based-authorization-cs/_static/image3.png))</span></span>

<span data-ttu-id="8cb4f-142">Abbildung 1 zeigt die Interaktion, die auftritt, wenn ein anonymer Besucher versucht, auf eine Ressource zuzugreifen, die für anonyme Benutzer nicht verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-142">Figure 1 depicts the interaction that occurs when an anonymous visitor attempts to access a resource that is not available to anonymous users.</span></span> <span data-ttu-id="8cb4f-143">In einem solchen Fall wird der anonyme Besucher an die Anmeldeseite umgeleitet, auf der die von ihm besuchte Seite in der Abfrage Zeichenfolge angegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-143">In such a case, the anonymous visitor is redirected to the login page with the page she attempted to visit specified in the querystring.</span></span> <span data-ttu-id="8cb4f-144">Nachdem sich der Benutzer erfolgreich angemeldet hat, wird er automatisch an die Ressource umgeleitet, die er anfänglich versucht hat.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-144">Once the user has successfully logged on, she will be automatically redirected back to the resource she was initially attempting to view.</span></span>

<span data-ttu-id="8cb4f-145">Wenn die nicht autorisierte Anforderung von einem anonymen Benutzer durchgeführt wird, ist dieser Workflow unkompliziert und für den Besucher leicht zu verstehen, was passiert ist und warum.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-145">When the unauthorized request is made by an anonymous user, this workflow is straightforward and is easy for the visitor to understand what has happened and why.</span></span> <span data-ttu-id="8cb4f-146">Beachten Sie jedoch, dass der `FormsAuthenticationModule` *alle nicht* autorisierten Benutzer auf die Anmeldeseite umleitet, selbst wenn die Anforderung von einem authentifizierten Benutzer gestellt wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-146">But keep in mind that the `FormsAuthenticationModule` will redirect *any* unauthorized user to the login page, even if the request is made by an authenticated user.</span></span> <span data-ttu-id="8cb4f-147">Dies kann zu einer verwirrenden Benutzer Darstellung führen, wenn ein authentifizierter Benutzer versucht, eine Seite zu besuchen, für die er nicht über die Berechtigung verfügt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-147">This can result in a confusing user experience if an authenticated user attempts to visit a page for which she lacks authority.</span></span>

<span data-ttu-id="8cb4f-148">Stellen Sie sich vor, dass die URL-Autorisierungs Regeln für unsere Website so konfiguriert wurden, dass die ASP.NET-Seite `OnlyTito.aspx` nur in Tito zugänglich war.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-148">Imagine that our website had its URL authorization rules configured such that the ASP.NET page `OnlyTito.aspx` was accessibly only to Tito.</span></span> <span data-ttu-id="8cb4f-149">Stellen Sie sich nun vor, dass Sam die Website besucht, sich anmeldet und dann versucht, `OnlyTito.aspx`zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-149">Now, imagine that Sam visits the site, logs on, and then attempts to visit `OnlyTito.aspx`.</span></span> <span data-ttu-id="8cb4f-150">Der `UrlAuthorizationModule` hält den Anforderungs Lebenszyklus an und gibt den Status "http 401 nicht autorisiert" zurück, der vom `FormsAuthenticationModule` erkannt und dann Sam an die Anmeldeseite umgeleitet wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-150">The `UrlAuthorizationModule` will halt the request lifecycle and return an HTTP 401 Unauthorized status, which the `FormsAuthenticationModule` will detect and then redirect Sam to the login page.</span></span> <span data-ttu-id="8cb4f-151">Da Sam sich bereits angemeldet hat, kann er sich jedoch Fragen, warum er zurück an die Anmeldeseite gesendet wurde.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-151">Since Sam has already logged in, though, she may wonder why she has been sent back to the login page.</span></span> <span data-ttu-id="8cb4f-152">Dies könnte daran liegen, dass Ihre Anmelde Informationen irgendwie verloren gegangen sind oder dass Sie ungültige Anmelde Informationen eingegeben hat.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-152">She might reason that her login credentials were lost somehow, or that she entered invalid credentials.</span></span> <span data-ttu-id="8cb4f-153">Wenn Sam Ihre Anmelde Informationen von der Anmeldeseite wieder eingibt, wird Sie angemeldet (erneut) und an `OnlyTito.aspx`umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-153">If Sam reenters her credentials from the login page she will be logged on (again) and redirected to `OnlyTito.aspx`.</span></span> <span data-ttu-id="8cb4f-154">Die `UrlAuthorizationModule` erkennt, dass Sam diese Seite nicht besuchen kann, und Sie wird zur Anmeldeseite zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-154">The `UrlAuthorizationModule` will detect that Sam cannot visit this page and she will be returned to the login page.</span></span>

<span data-ttu-id="8cb4f-155">Abbildung 2 zeigt diesen verwirrenden Workflow.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-155">Figure 2 depicts this confusing workflow.</span></span>

<span data-ttu-id="8cb4f-156">[![der Standard Workflow zu einem verwirrenden Durchlauf führen kann](user-based-authorization-cs/_static/image5.png)](user-based-authorization-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-156">[![The Default Workflow Can Lead to a Confusing Cycle](user-based-authorization-cs/_static/image5.png)](user-based-authorization-cs/_static/image4.png)</span></span>

<span data-ttu-id="8cb4f-157">**Abbildung 2**: der Standard Workflow kann zu einem verwirrenden Durchlauf führen ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-157">**Figure 2**: The Default Workflow Can Lead to a Confusing Cycle  ([Click to view full-size image](user-based-authorization-cs/_static/image6.png))</span></span>

<span data-ttu-id="8cb4f-158">Der in Abbildung 2 dargestellte Workflow kann den meisten Computer versierten Besucher schnell verwirren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-158">The workflow illustrated in Figure 2 can quickly befuddle even the most computer savvy visitor.</span></span> <span data-ttu-id="8cb4f-159">Wir sehen uns die Möglichkeiten an, diesen verwirrenden Zeitraum in Schritt 2 zu vermeiden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-159">We will look at ways to prevent this confusing cycle in Step 2.</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-160">ASP.NET verwendet zwei Mechanismen, um zu bestimmen, ob der aktuelle Benutzer auf eine bestimmte Webseite zugreifen kann: URL-Autorisierung und Datei Autorisierung.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-160">ASP.NET uses two mechanisms to determine whether the current user can access a particular web page: URL authorization and file authorization.</span></span> <span data-ttu-id="8cb4f-161">Die Datei Autorisierung wird durch das [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx)implementiert, das die Autorität bestimmt, indem die angeforderten Datei-ACLs konsultiert werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-161">File authorization is implemented by the [`FileAuthorizationModule`](https://msdn.microsoft.com/library/system.web.security.fileauthorizationmodule.aspx), which determines authority by consulting the requested file(s) ACLs.</span></span> <span data-ttu-id="8cb4f-162">Die Datei Autorisierung wird am häufigsten bei der Windows-Authentifizierung verwendet, da ACLs Berechtigungen sind, die für Windows-Konten gelten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-162">File authorization is most commonly used with Windows authentication because ACLs are permissions that apply to Windows accounts.</span></span> <span data-ttu-id="8cb4f-163">Wenn Sie die Formular Authentifizierung verwenden, werden alle Anforderungen an das Betriebssystem und die Datei auf Systemebene vom gleichen Windows-Konto ausgeführt, unabhängig vom Benutzer, der die Website besucht.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-163">When using forms authentication, all operating system- and file system-level requests are executed by the same Windows account, regardless of the user visiting the site.</span></span> <span data-ttu-id="8cb4f-164">Da sich diese tutorialreihe auf die Formular Authentifizierung konzentriert, wird die Datei Autorisierung nicht erörtert.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-164">Since this tutorial series focuses on forms authentication, we will not be discussing file authorization.</span></span>

### <a name="the-scope-of-url-authorization"></a><span data-ttu-id="8cb4f-165">Gültigkeitsbereich der URL-Autorisierung</span><span class="sxs-lookup"><span data-stu-id="8cb4f-165">The Scope of URL Authorization</span></span>

<span data-ttu-id="8cb4f-166">Der `UrlAuthorizationModule` ist verwalteter Code, der Teil der ASP.NET-Laufzeit ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-166">The `UrlAuthorizationModule` is managed code that is part of the ASP.NET runtime.</span></span> <span data-ttu-id="8cb4f-167">Vor Version 7 des Microsoft- [Internetinformationsdienste (IIS)](https://www.iis.net/) -Webservers gab es eine eindeutige Barriere zwischen der HTTP-Pipeline von IIS und der ASP.net-Lauf Zeit Pipeline.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-167">Prior to version 7 of Microsoft's [Internet Information Services (IIS)](https://www.iis.net/) web server, there was a distinct barrier between IIS's HTTP pipeline and the ASP.NET runtime's pipeline.</span></span> <span data-ttu-id="8cb4f-168">Kurz gesagt: in IIS 6 und früher ASP. Die `UrlAuthorizationModule` des Netzes wird nur ausgeführt, wenn eine Anforderung von IIS an die ASP.NET-Laufzeit delegiert wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-168">In short, in IIS 6 and earlier, ASP.NET's `UrlAuthorizationModule` only executes when a request is delegated from IIS to the ASP.NET runtime.</span></span> <span data-ttu-id="8cb4f-169">Standardmäßig verarbeitet IIS statische Inhalte selbst, z. b. HTML-Seiten und CSS-, JavaScript-und Bilddateien und übergibt nur Anforderungen an die ASP.NET-Laufzeit, wenn eine Seite mit einer Erweiterung von `.aspx`, `.asmx`oder `.ashx` angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-169">By default, IIS processes static content itself - like HTML pages and CSS, JavaScript, and image files - and only hands off requests to the ASP.NET runtime when a page with an extension of `.aspx`, `.asmx`, or `.ashx` is requested.</span></span>

<span data-ttu-id="8cb4f-170">IIS 7 ermöglicht jedoch integrierte IIS-und ASP.net-Pipelines.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-170">IIS 7, however, allows for integrated IIS and ASP.NET pipelines.</span></span> <span data-ttu-id="8cb4f-171">Mit einigen Konfigurationseinstellungen können Sie IIS 7 einrichten, um die `UrlAuthorizationModule` für *alle* Anforderungen aufzurufen. Dies bedeutet, dass URL-Autorisierungs Regeln für Dateien eines beliebigen Typs definiert werden können.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-171">With a few configuration settings you can setup IIS 7 to invoke the `UrlAuthorizationModule` for *all* requests, meaning that URL authorization rules can be defined for files of any type.</span></span> <span data-ttu-id="8cb4f-172">Darüber hinaus enthält IIS 7 eine eigene URL-Autorisierungs-Engine.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-172">Additionally, IIS 7 includes its own URL authorization engine.</span></span> <span data-ttu-id="8cb4f-173">Weitere Informationen zur ASP.NET-Integration und zur nativen URL-Autorisierungs Funktion von IIS 7 finden Sie unter [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-173">For more information on ASP.NET integration and IIS 7's native URL authorization functionality, see [Understanding IIS7 URL Authorization](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization).</span></span> <span data-ttu-id="8cb4f-174">Eine ausführlichere Betrachtung der ASP.net-und IIS 7-Integration erhalten Sie, wenn Sie eine Kopie des Buchs von Shahram Khosravi, *Professional IIS 7 und ASP.NET Integrated Programming* (ISBN: 978-0470152539), abrufen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-174">For a more in-depth look at ASP.NET and IIS 7 integration, pick up a copy of Shahram Khosravi's book, *Professional IIS 7 and ASP.NET Integrated Programming* (ISBN: 978-0470152539).</span></span>

<span data-ttu-id="8cb4f-175">Kurz gesagt: in Versionen vor IIS 7 gelten URL-Autorisierungs Regeln nur für Ressourcen, die von der ASP.NET-Laufzeit behandelt werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-175">In a nutshell, in versions prior to IIS 7, URL authorization rules are only applied to resources handled by the ASP.NET runtime.</span></span> <span data-ttu-id="8cb4f-176">Aber mit IIS 7 ist es möglich, das Native URL-Autorisierungs Feature von IIS zu verwenden oder ASP zu integrieren. NET ist `UrlAuthorizationModule` in die HTTP-Pipeline von IIS, um diese Funktionalität auf alle Anforderungen auszuweiten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-176">But with IIS 7 it is possible to use IIS's native URL authorization feature or to integrate ASP.NET's `UrlAuthorizationModule` into IIS's HTTP pipeline, thereby extending this functionality to all requests.</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-177">Es gibt einige feine, aber wichtige Unterschiede bei der Verwendung von ASP. Der `UrlAuthorizationModule` von .net und die URL-Autorisierungs Funktion von IIS 7 verarbeiten die Autorisierungs Regeln.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-177">There are some subtle yet important differences in how ASP.NET's `UrlAuthorizationModule` and IIS 7's URL authorization feature process the authorization rules.</span></span> <span data-ttu-id="8cb4f-178">In diesem Tutorial werden die URL-Autorisierungs Funktionen von IIS 7 oder die Unterschiede beim Analysieren von Autorisierungs Regeln im Vergleich zum `UrlAuthorizationModule`nicht untersucht.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-178">This tutorial does not examine IIS 7's URL authorization functionality or the differences in how it parses authorization rules compared to the `UrlAuthorizationModule`.</span></span> <span data-ttu-id="8cb4f-179">Weitere Informationen zu diesen Themen finden Sie in der IIS 7-Dokumentation auf MSDN oder unter [www.IIS.net](https://www.iis.net/).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-179">For more information on these topics, refer to the IIS 7 documentation on MSDN or at [www.iis.net](https://www.iis.net/).</span></span>

## <a name="step-1-defining-url-authorization-rules-inwebconfig"></a><span data-ttu-id="8cb4f-180">Schritt 1: Definieren von URL-Autorisierungs Regeln in`Web.config`</span><span class="sxs-lookup"><span data-stu-id="8cb4f-180">Step 1: Defining URL Authorization Rules in`Web.config`</span></span>

<span data-ttu-id="8cb4f-181">Der `UrlAuthorizationModule` bestimmt, ob der Zugriff auf eine angeforderte Ressource für eine bestimmte Identität basierend auf den in der Konfiguration der Anwendung definierten URL-Autorisierungs Regeln gewährt oder verweigert wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-181">The `UrlAuthorizationModule` determines whether to grant or deny access to a requested resource for a particular identity based on the URL authorization rules defined in the application's configuration.</span></span> <span data-ttu-id="8cb4f-182">Die Autorisierungs Regeln werden im`<authorization>`- [Element](https://msdn.microsoft.com/library/8d82143t.aspx) in Form von `<allow>` und `<deny>` untergeordneten Elementen ausgeschrieben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-182">The authorization rules are spelled out in the [`<authorization>` element](https://msdn.microsoft.com/library/8d82143t.aspx) in the form of `<allow>` and `<deny>` child elements.</span></span> <span data-ttu-id="8cb4f-183">Jedes `<allow>` und `<deny>` untergeordnete Element kann Folgendes angeben:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-183">Each `<allow>` and `<deny>` child element can specify:</span></span>

- <span data-ttu-id="8cb4f-184">Ein bestimmter Benutzer</span><span class="sxs-lookup"><span data-stu-id="8cb4f-184">A particular user</span></span>
- <span data-ttu-id="8cb4f-185">Eine durch Trennzeichen getrennte Liste von Benutzern</span><span class="sxs-lookup"><span data-stu-id="8cb4f-185">A comma-delimited list of users</span></span>
- <span data-ttu-id="8cb4f-186">Alle anonymen Benutzer, die durch ein Fragezeichen (?) gekennzeichnet sind</span><span class="sxs-lookup"><span data-stu-id="8cb4f-186">All anonymous users, denoted by a question mark (?)</span></span>
- <span data-ttu-id="8cb4f-187">Alle Benutzer, angegeben durch ein Sternchen (\*)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-187">All users, denoted by an asterisk (\*)</span></span>

<span data-ttu-id="8cb4f-188">Das folgende Markup veranschaulicht, wie die URL-Autorisierungs Regeln verwendet werden, um Benutzern Tito und Scott zu gestatten und alle anderen abzulehnen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-188">The following markup illustrates how to use the URL authorization rules to allow users Tito and Scott and deny all others:</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample1.xml)]

<span data-ttu-id="8cb4f-189">Das `<allow>`-Element definiert, welche Benutzer zulässig sind (Tito und Scott), während das `<deny>`-Element anweist, dass *alle* Benutzer verweigert werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-189">The `<allow>` element defines what users are permitted - Tito and Scott - while the `<deny>` element instructs that *all* users are denied.</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-190">Mit den `<allow>`-und `<deny>` Elementen können auch Autorisierungs Regeln für Rollen angegeben werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-190">The `<allow>` and `<deny>` elements can also specify authorization rules for roles.</span></span> <span data-ttu-id="8cb4f-191">Wir werden die rollenbasierte Autorisierung in einem zukünftigen Tutorial untersuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-191">We will examine role-based authorization in a future tutorial.</span></span>

<span data-ttu-id="8cb4f-192">Die folgende Einstellung gewährt allen anderen Benutzern Zugriff auf Sam (einschließlich anonymer Besucher):</span><span class="sxs-lookup"><span data-stu-id="8cb4f-192">The following setting grants access to anyone other than Sam (including anonymous visitors):</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample2.xml)]

<span data-ttu-id="8cb4f-193">Um nur authentifizierte Benutzer zuzulassen, verwenden Sie die folgende Konfiguration, die den Zugriff auf alle anonymen Benutzer verweigert:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-193">To allow only authenticated users, use the following configuration, which denies access to all anonymous users:</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample3.xml)]

<span data-ttu-id="8cb4f-194">Die Autorisierungs Regeln werden innerhalb des `<system.web>`-Elements in `Web.config` definiert und gelten für alle ASP.NET-Ressourcen in der Webanwendung.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-194">The authorization rules are defined within the `<system.web>` element in `Web.config` and apply to all of the ASP.NET resources in the web application.</span></span> <span data-ttu-id="8cb4f-195">Oft hat eine Anwendung verschiedene Autorisierungs Regeln für verschiedene Abschnitte.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-195">Oftentimes, an application has different authorization rules for different sections.</span></span> <span data-ttu-id="8cb4f-196">Beispielsweise können alle Besucher an einer e-Commerce-Website die Produkte nutzen, Informationen zu Produkten anzeigen, den Katalog durchsuchen usw.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-196">For example, at an eCommerce site, all visitors may peruse the products, see product reviews, search the catalog, and so on.</span></span> <span data-ttu-id="8cb4f-197">Allerdings können nur authentifizierte Benutzer das Auschecken oder die Seiten erreichen, um den Versand Verlauf eines einzelnen zu verwalten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-197">However, only authenticated users may reach the checkout or the pages to manage one's shipping history.</span></span> <span data-ttu-id="8cb4f-198">Darüber hinaus gibt es möglicherweise Teile der Website, auf die nur ausgewählte Benutzer zugreifen können, z. b. Website Administratoren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-198">Moreover, there may be portions of the site that are only accessible by select users, such as site administrators.</span></span>

<span data-ttu-id="8cb4f-199">ASP.NET erleichtert das Definieren verschiedener Autorisierungs Regeln für verschiedene Dateien und Ordner auf der Website.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-199">ASP.NET makes it easy to define different authorization rules for different files and folders in the site.</span></span> <span data-ttu-id="8cb4f-200">Die in der `Web.config` Datei des Stamm Ordners angegebenen Autorisierungs Regeln gelten für alle ASP.NET-Ressourcen des Standorts.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-200">The authorization rules specified in the root folder's `Web.config` file apply to all ASP.NET resources in the site.</span></span> <span data-ttu-id="8cb4f-201">Diese Standard Autorisierungs Einstellungen können jedoch für einen bestimmten Ordner überschrieben werden, indem ein `Web.config` mit einem `<authorization>` Abschnitt hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-201">However, these default authorization settings can be overridden for a particular folder by adding a `Web.config` with an `<authorization>` section.</span></span>

<span data-ttu-id="8cb4f-202">Wir aktualisieren unsere Website so, dass nur authentifizierte Benutzer die ASP.NET-Seiten im Ordner "`Membership`" besuchen können.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-202">Let's update our website so that only authenticated users can visit the ASP.NET pages in the `Membership` folder.</span></span> <span data-ttu-id="8cb4f-203">Um dies zu erreichen, müssen wir dem Ordner "`Membership`" eine `Web.config`-Datei hinzufügen und die Autorisierungs Einstellungen so festlegen, dass anonyme Benutzer verweigert werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-203">To accomplish this we need to add a `Web.config` file to the `Membership` folder and set its authorization settings to deny anonymous users.</span></span> <span data-ttu-id="8cb4f-204">Klicken Sie mit der rechten Maustaste auf den Ordner `Membership` im Projektmappen-Explorer, wählen Sie im Kontextmenü das Menü neues Element hinzufügen aus, und fügen Sie eine neue Webkonfigurationsdatei mit dem Namen `Web.config`hinzu.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-204">Right-click the `Membership` folder in the Solution Explorer, choose the Add New Item menu from the context menu, and add a new Web Configuration File named `Web.config`.</span></span>

<span data-ttu-id="8cb4f-205">[![dem Mitgliedschafts Ordner eine Web. config-Datei hinzufügen](user-based-authorization-cs/_static/image8.png)](user-based-authorization-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-205">[![Add a Web.config File to the Membership Folder](user-based-authorization-cs/_static/image8.png)](user-based-authorization-cs/_static/image7.png)</span></span>

<span data-ttu-id="8cb4f-206">**Abbildung 3**: Hinzufügen einer `Web.config` Datei zum Ordner "`Membership`" ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-206">**Figure 3**: Add a `Web.config` File to the `Membership` Folder  ([Click to view full-size image](user-based-authorization-cs/_static/image9.png))</span></span>

<span data-ttu-id="8cb4f-207">An diesem Punkt sollte das Projekt zwei `Web.config` Dateien enthalten: eine im Stammverzeichnis und eine im Ordner "`Membership`".</span><span class="sxs-lookup"><span data-stu-id="8cb4f-207">At this point your project should contain two `Web.config` files: one in the root directory and one in the `Membership` folder.</span></span>

<span data-ttu-id="8cb4f-208">[![Ihre Anwendung nun zwei Web. config-Dateien enthalten soll.](user-based-authorization-cs/_static/image11.png)](user-based-authorization-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-208">[![Your Application Should Now Contain Two Web.config Files](user-based-authorization-cs/_static/image11.png)](user-based-authorization-cs/_static/image10.png)</span></span>

<span data-ttu-id="8cb4f-209">**Abbildung 4**: Ihre Anwendung sollte nun zwei `Web.config` Dateien enthalten ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-209">**Figure 4**: Your Application Should Now Contain Two `Web.config` Files  ([Click to view full-size image](user-based-authorization-cs/_static/image12.png))</span></span>

<span data-ttu-id="8cb4f-210">Aktualisieren Sie die Konfigurationsdatei im Ordner "`Membership`", damit Sie den Zugriff auf anonyme Benutzer untersagt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-210">Update the configuration file in the `Membership` folder so that it prohibits access to anonymous users.</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample4.xml)]

<span data-ttu-id="8cb4f-211">Das ist schon alles!</span><span class="sxs-lookup"><span data-stu-id="8cb4f-211">That's all there is to it!</span></span>

<span data-ttu-id="8cb4f-212">Um diese Änderung zu testen, besuchen Sie die Homepage in einem Browser, und stellen Sie sicher, dass Sie sich abgemeldet haben. Da das Standardverhalten einer ASP.NET-Anwendung darin besteht, alle Besucher zuzulassen, und da wir keine Autorisierungs Änderungen an der `Web.config` Datei des Stamm Verzeichnisses vorgenommen haben, können wir die Dateien im Stammverzeichnis als anonymer Besucher besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-212">To test out this change, visit the homepage in a browser and make sure you are logged out. Since the default behavior of an ASP.NET application is to allow all visitors, and since we didn't make any authorization modifications to the root directory's `Web.config` file, we are able to visit the files in the root directory as an anonymous visitor.</span></span>

<span data-ttu-id="8cb4f-213">Klicken Sie in der linken Spalte auf den Link Benutzerkonten erstellen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-213">Click on the Creating User Accounts link found in the left column.</span></span> <span data-ttu-id="8cb4f-214">Dadurch gelangen Sie zum `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-214">This will take you to the `~/Membership/CreatingUserAccounts.aspx`.</span></span> <span data-ttu-id="8cb4f-215">Da die `Web.config` Datei im Ordner "`Membership`" Autorisierungs Regeln definiert, um den anonymen Zugriff zu verhindern, bricht der `UrlAuthorizationModule` die Anforderung ab und gibt den Status "http 401 nicht autorisiert" zurück.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-215">Since the `Web.config` file in the `Membership` folder defines authorization rules to prohibit anonymous access, the `UrlAuthorizationModule` aborts the request and returns an HTTP 401 Unauthorized status.</span></span> <span data-ttu-id="8cb4f-216">Der `FormsAuthenticationModule` ändert diesen in einen 302-Umleitungs Status, der uns an die Anmeldeseite sendet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-216">The `FormsAuthenticationModule` modifies this to a 302 Redirect status, sending us to the login page.</span></span> <span data-ttu-id="8cb4f-217">Beachten Sie, dass die Seite, auf die wir zugreifen wollten (`CreatingUserAccounts.aspx`), über den `ReturnUrl` QueryString-Parameter an die Anmeldeseite übergeben wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-217">Note that the page we were attempting to access (`CreatingUserAccounts.aspx`) is passed to the login page via the `ReturnUrl` querystring parameter.</span></span>

<span data-ttu-id="8cb4f-218">[![da die URL-Autorisierungs Regeln den anonymen Zugriff verbieten, werden wir zur Anmeldeseite umgeleitet.](user-based-authorization-cs/_static/image14.png)](user-based-authorization-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-218">[![Since the URL Authorization Rules Prohibit Anonymous Access, We are Redirected to the Login Page](user-based-authorization-cs/_static/image14.png)](user-based-authorization-cs/_static/image13.png)</span></span>

<span data-ttu-id="8cb4f-219">**Abbildung 5**: da die URL-Autorisierungs Regeln den anonymen Zugriff verbieten, werden wir zur Anmeldeseite umgeleitet ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image15.png)).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-219">**Figure 5**: Since the URL Authorization Rules Prohibit Anonymous Access, We are Redirected to the Login Page  ([Click to view full-size image](user-based-authorization-cs/_static/image15.png))</span></span>

<span data-ttu-id="8cb4f-220">Nach erfolgreicher Anmeldung werden wir auf die Seite "`CreatingUserAccounts.aspx`" umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-220">Upon successfully logging in, we are redirected to the `CreatingUserAccounts.aspx` page.</span></span> <span data-ttu-id="8cb4f-221">Dieses Mal ermöglicht das `UrlAuthorizationModule` den Zugriff auf die Seite, da wir nicht mehr anonym sind.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-221">This time the `UrlAuthorizationModule` permits access to the page because we are no longer anonymous.</span></span>

### <a name="applying-url-authorization-rules-to-a-specific-location"></a><span data-ttu-id="8cb4f-222">Anwenden von URL-Autorisierungs Regeln auf einen bestimmten Speicherort</span><span class="sxs-lookup"><span data-stu-id="8cb4f-222">Applying URL Authorization Rules to a Specific Location</span></span>

<span data-ttu-id="8cb4f-223">Die im `<system.web>` Abschnitt von `Web.config` definierten Autorisierungs Einstellungen gelten für alle ASP.NET-Ressourcen in diesem Verzeichnis und seinen Unterverzeichnissen (bis anderweitig von einer anderen `Web.config` Datei überschrieben).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-223">The authorization settings defined in the `<system.web>` section of `Web.config` apply to all of the ASP.NET resources in that directory and its subdirectories (until otherwise overridden by another `Web.config` file).</span></span> <span data-ttu-id="8cb4f-224">In einigen Fällen kann es jedoch sein, dass alle ASP.NET-Ressourcen in einem bestimmten Verzeichnis über eine bestimmte Autorisierungs Konfiguration verfügen, außer für eine oder zwei bestimmte Seiten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-224">In some cases, though, we may want all ASP.NET resources in a given directory to have a particular authorization configuration except for one or two specific pages.</span></span> <span data-ttu-id="8cb4f-225">Dies kann erreicht werden, indem Sie in `Web.config`ein `<location>` Element hinzufügen, auf die Datei verweisen, deren Autorisierungs Regeln voneinander abweichen, und die darin enthaltenen eindeutigen Autorisierungs Regeln definieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-225">This can be achieved by adding a `<location>` element in `Web.config`, pointing it to the file whose authorization rules differ, and defining its unique authorization rules therein.</span></span>

<span data-ttu-id="8cb4f-226">Um die Verwendung des `<location>`-Elements zum Überschreiben der Konfigurationseinstellungen für eine bestimmte Ressource zu veranschaulichen, passen Sie die Autorisierungs Einstellungen so an, dass nur Tito `CreatingUserAccounts.aspx`besuchen kann.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-226">To illustrate using the `<location>` element to override the configuration settings for a specific resource, let's customize the authorization settings so that only Tito can visit `CreatingUserAccounts.aspx`.</span></span> <span data-ttu-id="8cb4f-227">Fügen Sie hierzu der `Web.config` Datei des `Membership` Ordners ein `<location>`-Element hinzu, und aktualisieren Sie das zugehörige Markup so, dass es wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-227">To accomplish this, add a `<location>` element to the `Membership` folder's `Web.config` file and update its markup so that it looks like the following:</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample5.xml)]

<span data-ttu-id="8cb4f-228">Das `<authorization>`-Element in `<system.web>` definiert die Standard-URL-Autorisierungs Regeln für ASP.NET-Ressourcen im `Membership`-Ordner und seinen Unterordnern.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-228">The `<authorization>` element in `<system.web>` defines the default URL authorization rules for ASP.NET resources in the `Membership` folder and its subfolders.</span></span> <span data-ttu-id="8cb4f-229">Mit dem `<location>`-Element können diese Regeln für eine bestimmte Ressource überschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-229">The `<location>` element allows us to override these rules for a particular resource.</span></span> <span data-ttu-id="8cb4f-230">Im obigen Markup verweist das `<location>` Element auf die `CreatingUserAccounts.aspx` Seite und gibt seine Autorisierungs Regeln an, z. b., um Tito zuzulassen, aber alle anderen abzulehnen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-230">In the above markup the `<location>` element references the `CreatingUserAccounts.aspx` page and specifies its authorization rules such as to allow Tito, but deny everyone else.</span></span>

<span data-ttu-id="8cb4f-231">Um diese Autorisierungs Änderung zu testen, besuchen Sie zunächst die Website als anonymer Benutzer.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-231">To test out this authorization change, start by visiting the website as an anonymous user.</span></span> <span data-ttu-id="8cb4f-232">Wenn Sie versuchen, eine beliebige Seite im `Membership` Ordner (z. b. `UserBasedAuthorization.aspx`) aufzurufen, wird die Anforderung vom `UrlAuthorizationModule` verweigert, und Sie werden zur Anmeldeseite umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-232">If you attempt to visit any page in the `Membership` folder, such as `UserBasedAuthorization.aspx`, the `UrlAuthorizationModule` will deny the request and you will be redirected to the login page.</span></span> <span data-ttu-id="8cb4f-233">Wenn Sie sich als, z.b. Scott, anmelden, können Sie eine beliebige Seite im Ordner "`Membership`" aufrufen, *mit Ausnahme* von `CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-233">After logging in as, say, Scott, you can visit any page in the `Membership` folder *except* for `CreatingUserAccounts.aspx`.</span></span> <span data-ttu-id="8cb4f-234">Wenn Sie versuchen, `CreatingUserAccounts.aspx`, die als Person, aber Tito angemeldet sind, zu besuchen, führt dies zu einem nicht autorisierten Zugriffs Versuch, der Sie zur Anmeldeseite umleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-234">Attempting to visit `CreatingUserAccounts.aspx` logged on as anyone but Tito will result in an unauthorized access attempt, redirecting you back to the login page.</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-235">Das `<location>` Element muss außerhalb des `<system.web>` Elements der Konfiguration angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-235">The `<location>` element must appear outside of the configuration's `<system.web>` element.</span></span> <span data-ttu-id="8cb4f-236">Sie müssen für jede Ressource, deren Autorisierungs Einstellungen Sie außer Kraft setzen möchten, ein separates `<location>`-Element verwenden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-236">You need to use a separate `<location>` element for each resource whose authorization settings you want to override.</span></span>

### <a name="a-look-at-how-theurlauthorizationmoduleuses-the-authorization-rules-to-grant-or-deny-access"></a><span data-ttu-id="8cb4f-237">Es wird erläutert, wie das`UrlAuthorizationModule`die Autorisierungs Regeln verwendet, um den Zugriff zu gewähren oder zu verweigern.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-237">A Look at How the`UrlAuthorizationModule`Uses the Authorization Rules to Grant or Deny Access</span></span>

<span data-ttu-id="8cb4f-238">Der `UrlAuthorizationModule` bestimmt, ob eine bestimmte Identität für eine bestimmte URL autorisiert werden soll, indem die URL-Autorisierungs Regeln nacheinander analysiert werden, beginnend mit dem ersten und durchlaufen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-238">The `UrlAuthorizationModule` determines whether to authorize a particular identity for a particular URL by analyzing the URL authorization rules one at a time, starting from the first one and working its way down.</span></span> <span data-ttu-id="8cb4f-239">Sobald eine Entsprechung gefunden wird, wird dem Benutzer der Zugriff gewährt oder verweigert, abhängig davon, ob die Entsprechung in einem `<allow>` oder `<deny>` Element gefunden wurde.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-239">As soon as a match is found, the user is granted or denied access, depending on if the match was found in an `<allow>` or `<deny>` element.</span></span> <span data-ttu-id="8cb4f-240"><strong>Wenn keine Entsprechung gefunden wird, wird dem Benutzer der Zugriff gewährt.</strong></span><span class="sxs-lookup"><span data-stu-id="8cb4f-240"><strong>If no match is found, the user is granted access.</strong></span></span> <span data-ttu-id="8cb4f-241">Wenn Sie den Zugriff einschränken möchten, müssen Sie daher unbedingt ein `<deny>`-Element als letztes Element in der URL-Autorisierungs Konfiguration verwenden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-241">Consequently, if you want to restrict access, it is imperative that you use a `<deny>` element as the last element in the URL authorization configuration.</span></span> <span data-ttu-id="8cb4f-242"><strong>Wenn Sie ein</strong> <strong>`<deny>`</strong>-Element weglassen <strong>, wird allen Benutzern der Zugriff gewährt.</strong></span><span class="sxs-lookup"><span data-stu-id="8cb4f-242"><strong>If you omit a</strong><strong>`<deny>`</strong><strong>element, all users will be granted access.</strong></span></span>

<span data-ttu-id="8cb4f-243">Zum besseren Verständnis des Prozesses, der vom `UrlAuthorizationModule` zur Bestimmung der Zertifizierungsstelle verwendet wird, sollten Sie sich die Beispiel-URL-Autorisierungs Regeln ansehen, die wir zuvor in diesem Schritt</span><span class="sxs-lookup"><span data-stu-id="8cb4f-243">To better understand the process used by the `UrlAuthorizationModule` to determine authority, consider the example URL authorization rules we looked at earlier in this step.</span></span> <span data-ttu-id="8cb4f-244">Die erste Regel ist ein `<allow>` Element, das den Zugriff auf Tito und Scott ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-244">The first rule is an `<allow>` element that allows access to Tito and Scott.</span></span> <span data-ttu-id="8cb4f-245">Die zweite Regel ist ein `<deny>` Element, das allen Benutzern den Zugriff verweigert.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-245">The second rules is a `<deny>` element that denies access to everyone.</span></span> <span data-ttu-id="8cb4f-246">Wenn ein anonymer Benutzer besucht, wird die `UrlAuthorizationModule` mit der Frage, ob anonym entweder Scott oder Tito ist?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-246">If an anonymous user visits, the `UrlAuthorizationModule` starts by asking, Is anonymous either Scott or Tito?</span></span> <span data-ttu-id="8cb4f-247">Die Antwort ist offensichtlich Nein, sodass Sie mit der zweiten Regel fort fährt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-247">The answer, obviously, is No, so it proceeds to the second rule.</span></span> <span data-ttu-id="8cb4f-248">Ist im Satz aller anonym?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-248">Is anonymous in the set of everybody?</span></span> <span data-ttu-id="8cb4f-249">Da die Antwort hier "Ja" lautet, wird die `<deny>` Regel wirksam, und der Besucher wird an die Anmeldeseite umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-249">Since the answer here is Yes, the `<deny>` rule is put in effect and the visitor is redirected to the login page.</span></span> <span data-ttu-id="8cb4f-250">Wenn jisun beispielsweise besucht wird, wird der `UrlAuthorizationModule` zunächst gefragt, ob jisun entweder Scott oder Tito ist?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-250">Similarly, if Jisun is visiting, the `UrlAuthorizationModule` starts by asking, Is Jisun either Scott or Tito?</span></span> <span data-ttu-id="8cb4f-251">Da Sie nicht ist, geht der `UrlAuthorizationModule` zur zweiten Frage, ist jisun im Satz von allen?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-251">Since she is not, the `UrlAuthorizationModule` proceeds to the second question, Is Jisun in the set of everybody?</span></span> <span data-ttu-id="8cb4f-252">Sie ist, dass Ihnen auch der Zugriff verweigert wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-252">She is, so she, too, is denied access.</span></span> <span data-ttu-id="8cb4f-253">Schließlich ist die erste Frage, die von der `UrlAuthorizationModule` gestellt wird, eine positive Antwort, damit Tito Zugriff erhält.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-253">Finally, if Tito visits, the first question posed by the `UrlAuthorizationModule` is an affirmative answer, so Tito is granted access.</span></span>

<span data-ttu-id="8cb4f-254">Da der `UrlAuthorizationModule` die Autorisierungs Regeln von oben nach unten verarbeitet und bei jeder beliebigen Entsprechung anhält, ist es wichtig, dass die spezifischeren Regeln vor den weniger spezifischen Regeln stehen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-254">Since the `UrlAuthorizationModule` processes the authorization rules from the top down, stopping at any match, it is important to have the more specific rules come before the less specific ones.</span></span> <span data-ttu-id="8cb4f-255">Das heißt, um Autorisierungs Regeln zu definieren, die jisun und anonyme Benutzer verbieten, aber alle anderen authentifizierten Benutzer zulassen, beginnen Sie mit der spezifischsten Regel, die sich auf jisun auswirkt, und fahren Sie dann mit den weniger spezifischen Regeln fort, die alle anderen authentifizierte Benutzer, verweigern aller anonymen Benutzer.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-255">That is, to define authorization rules that forbid Jisun and anonymous users, but allow all other authenticated users, you would start with the most specific rule - the one impacting Jisun - and then proceed to the less specific rules - those allowing all other authenticated users, but denying all anonymous users.</span></span> <span data-ttu-id="8cb4f-256">Die folgenden URL-Autorisierungs Regeln implementieren diese Richtlinie, indem Sie zuerst jisun verweigern und dann allen anonymen Benutzern verweigern.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-256">The following URL authorization rules implements this policy by first denying Jisun, and then denying any anonymous user.</span></span> <span data-ttu-id="8cb4f-257">Alle anderen authentifizierten Benutzer als jisun erhalten Zugriff, da keine dieser `<deny>` Anweisungen abgleichen wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-257">Any authenticated user other than Jisun will be granted access because neither of these `<deny>` statements will match.</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample6.xml)]

## <a name="step-2-fixing-the-workflow-for-unauthorized-authenticated-users"></a><span data-ttu-id="8cb4f-258">Schritt 2: Reparieren des Workflows für nicht autorisierte authentifizierte Benutzer</span><span class="sxs-lookup"><span data-stu-id="8cb4f-258">Step 2: Fixing the Workflow for Unauthorized, Authenticated Users</span></span>

<span data-ttu-id="8cb4f-259">Wie bereits weiter oben in diesem Tutorial im Abschnitt "betrachten des URL-Autorisierungs Workflows" erläutert, wird die Anforderung vom `UrlAuthorizationModule` abgebrochen und der Status "http 401 nicht autorisiert" zurückgegeben, wenn eine nicht autorisierte Anforderung auftritt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-259">As we discussed earlier in this tutorial in the A Look at the URL Authorization Workflow section, anytime an unauthorized request transpires, the `UrlAuthorizationModule` aborts the request and returns an HTTP 401 Unauthorized status.</span></span> <span data-ttu-id="8cb4f-260">Dieser 401-Status wird vom `FormsAuthenticationModule` in einen 302-Umleitungs Status geändert, der den Benutzer an die Anmeldeseite sendet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-260">This 401 status is modified by the `FormsAuthenticationModule` into a 302 Redirect status that sends the user to the login page.</span></span> <span data-ttu-id="8cb4f-261">Dieser Workflow tritt bei allen nicht autorisierten Anforderungen auf, auch wenn der Benutzer authentifiziert ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-261">This workflow occurs on any unauthorized request, even if the user is authenticated.</span></span>

<span data-ttu-id="8cb4f-262">Wenn Sie einen authentifizierten Benutzer an die Anmeldeseite zurückgeben, werden diese wahrscheinlich verwechselt, da Sie sich bereits beim System angemeldet haben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-262">Returning an authenticated user to the login page is likely to confuse them since they have already logged into the system.</span></span> <span data-ttu-id="8cb4f-263">Mit etwas Arbeit können wir diesen Workflow verbessern, indem Sie authentifizierte Benutzer, die nicht autorisierte Anforderungen ausführen, an eine Seite weiterleiten, die darauf angreift, dass Sie versucht haben, auf eine eingeschränkte Seite zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-263">With a little bit of work we can improve this workflow by redirecting authenticated users who make unauthorized requests to a page that explains that they have attempted to access a restricted page.</span></span>

<span data-ttu-id="8cb4f-264">Beginnen Sie, indem Sie im Stamm Ordner der Webanwendung mit dem Namen `UnauthorizedAccess.aspx`eine neue ASP.NET-Seite erstellen. vergessen Sie nicht, diese Seite der `Site.master` Master Seite zuzuordnen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-264">Start by creating a new ASP.NET page in the web application's root folder named `UnauthorizedAccess.aspx`; don't forget to associate this page with the `Site.master` master page.</span></span> <span data-ttu-id="8cb4f-265">Nachdem Sie diese Seite erstellt haben, entfernen Sie das Inhalts Steuerelement, das auf die `LoginContent` contentplachalter verweist, sodass der Standard Inhalt der Master Seite angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-265">After creating this page, remove the Content control that references the `LoginContent` ContentPlaceHolder so that the master page's default content will be displayed.</span></span> <span data-ttu-id="8cb4f-266">Fügen Sie als nächstes eine Meldung hinzu, in der die Situation erläutert wird, nämlich, dass der Benutzer versucht hat, auf eine geschützte Ressource zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-266">Next, add a message that explains the situation, namely that the user attempted to access a protected resource.</span></span> <span data-ttu-id="8cb4f-267">Nach dem Hinzufügen einer solchen Nachricht sollte das deklarative Markup der `UnauthorizedAccess.aspx` Seite in etwa wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-267">After adding such a message, the `UnauthorizedAccess.aspx` page's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](user-based-authorization-cs/samples/sample7.aspx)]

<span data-ttu-id="8cb4f-268">Wir müssen den Workflow jetzt ändern, damit eine nicht autorisierte Anforderung von einem authentifizierten Benutzer an die `UnauthorizedAccess.aspx` Seite anstatt an die Anmeldeseite gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-268">We now need to alter the workflow so that if an unauthorized request is performed by an authenticated user they are sent to the `UnauthorizedAccess.aspx` page instead of the login page.</span></span> <span data-ttu-id="8cb4f-269">Die Logik, die nicht autorisierte Anforderungen an die Anmeldeseite umleitet, wird in einer privaten Methode der `FormsAuthenticationModule`-Klasse verborgen, sodass dieses Verhalten nicht angepasst werden kann.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-269">The logic that redirects unauthorized requests to the login page is buried within a private method of the `FormsAuthenticationModule` class, so we cannot customize this behavior.</span></span> <span data-ttu-id="8cb4f-270">Wir können jedoch unserer Anmeldeseite unsere eigene Logik hinzufügen, die den Benutzer bei Bedarf an `UnauthorizedAccess.aspx`umleitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-270">What we can do, however, is add our own logic to the login page that redirects the user to `UnauthorizedAccess.aspx`, if needed.</span></span>

<span data-ttu-id="8cb4f-271">Wenn der `FormsAuthenticationModule` einen nicht autorisierten Besucher an die Anmeldeseite umleitet, fügt er die angeforderte, nicht autorisierte URL an die QueryString mit dem Namen `ReturnUrl`an.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-271">When the `FormsAuthenticationModule` redirects an unauthorized visitor to the login page it appends the requested, unauthorized URL to the querystring with the name `ReturnUrl`.</span></span> <span data-ttu-id="8cb4f-272">Wenn z. b. ein nicht autorisierter Benutzer versucht hat, `OnlyTito.aspx`zu besuchen, werden die `FormsAuthenticationModule` Sie zu `Login.aspx?ReturnUrl=OnlyTito.aspx`umleiten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-272">For example, if an unauthorized user attempted to visit `OnlyTito.aspx`, the `FormsAuthenticationModule` would redirect them to `Login.aspx?ReturnUrl=OnlyTito.aspx`.</span></span> <span data-ttu-id="8cb4f-273">Wenn die Anmeldeseite durch einen authentifizierten Benutzer mit einer QueryString erreicht wird, die den `ReturnUrl`-Parameter enthält, dann wissen wir, dass dieser nicht authentifizierte Benutzer nur versucht hat, eine Seite zu besuchen, die nicht zum Anzeigen autorisiert ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-273">Therefore, if the login page is reached by an authenticated user with a querystring that includes the `ReturnUrl` parameter, then we know that this unauthenticated user just attempted to visit a page she is not authorized to view.</span></span> <span data-ttu-id="8cb4f-274">In diesem Fall möchten wir Sie an `UnauthorizedAccess.aspx`umleiten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-274">In such a case, we want to redirect her to `UnauthorizedAccess.aspx`.</span></span>

<span data-ttu-id="8cb4f-275">Fügen Sie hierzu den folgenden Code zum `Page_Load` Ereignishandler der Anmeldeseite hinzu:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-275">To accomplish this, add the following code to the login page's `Page_Load` event handler:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample8.cs)]

<span data-ttu-id="8cb4f-276">Der obige Code leitet authentifizierte, nicht autorisierte Benutzer an die `UnauthorizedAccess.aspx` Seite um.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-276">The above code redirects authenticated, unauthorized users to the `UnauthorizedAccess.aspx` page.</span></span> <span data-ttu-id="8cb4f-277">Um diese Logik in Aktion zu sehen, besuchen Sie die Website als anonymer Besucher, und klicken Sie in der linken Spalte auf den Link Erstellen von Benutzerkonten.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-277">To see this logic in action, visit the site as an anonymous visitor and click on the Creating User Accounts link in the left column.</span></span> <span data-ttu-id="8cb4f-278">Dadurch gelangen Sie zu der Seite "`~/Membership/CreatingUserAccounts.aspx`", die Sie in Schritt 1 so konfiguriert haben, dass nur der Zugriff auf Tito zugelassen wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-278">This will take you to the `~/Membership/CreatingUserAccounts.aspx` page, which in Step 1 we configured to only permit access to Tito.</span></span> <span data-ttu-id="8cb4f-279">Da anonyme Benutzer nicht zulässig sind, leitet der `FormsAuthenticationModule` zurück zur Anmeldeseite.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-279">Since anonymous users are prohibited, the `FormsAuthenticationModule` redirects us back to the login page.</span></span>

<span data-ttu-id="8cb4f-280">An diesem Punkt sind wir anonym, sodass `Request.IsAuthenticated` `false` zurückgibt und wir nicht an `UnauthorizedAccess.aspx`umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-280">At this point we are anonymous, so `Request.IsAuthenticated` returns `false` and we are not redirected to `UnauthorizedAccess.aspx`.</span></span> <span data-ttu-id="8cb4f-281">Stattdessen wird die Anmeldeseite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-281">Instead, the login page is displayed.</span></span> <span data-ttu-id="8cb4f-282">Melden Sie sich als ein anderer Benutzer als Tito an, z. b. "Bruce".</span><span class="sxs-lookup"><span data-stu-id="8cb4f-282">Log in as a user other than Tito, such as Bruce.</span></span> <span data-ttu-id="8cb4f-283">Nachdem Sie die entsprechenden Anmelde Informationen eingegeben haben, leitet Sie die Anmeldeseite zurück an `~/Membership/CreatingUserAccounts.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-283">After entering the appropriate credentials, the login page redirects us back to `~/Membership/CreatingUserAccounts.aspx`.</span></span> <span data-ttu-id="8cb4f-284">Da diese Seite jedoch nur für Tito zugänglich ist, sind wir nicht autorisiert, Sie anzuzeigen und werden umgehend zur Anmeldeseite zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-284">However, since this page is only accessible to Tito, we are unauthorized to view it and are promptly returned to the login page.</span></span> <span data-ttu-id="8cb4f-285">Diesmal gibt `Request.IsAuthenticated` jedoch `true` zurück (und der `ReturnUrl` QueryString-Parameter ist vorhanden), sodass wir zur `UnauthorizedAccess.aspx` Seite umgeleitet werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-285">This time, however, `Request.IsAuthenticated` returns `true` (and the `ReturnUrl` querystring parameter exists), so we are redirected to the `UnauthorizedAccess.aspx` page.</span></span>

<span data-ttu-id="8cb4f-286">[![authentifiziert werden nicht autorisierte Benutzer an "unauthorizedaccess. aspx" umgeleitet.](user-based-authorization-cs/_static/image17.png)](user-based-authorization-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-286">[![Authenticated, Unauthorized Users are Redirected to UnauthorizedAccess.aspx](user-based-authorization-cs/_static/image17.png)](user-based-authorization-cs/_static/image16.png)</span></span>

<span data-ttu-id="8cb4f-287">**Abbildung 6**: authentifizierte, nicht autorisierte Benutzer werden zu `UnauthorizedAccess.aspx` umgeleitet ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-287">**Figure 6**: Authenticated, Unauthorized Users are Redirected to `UnauthorizedAccess.aspx` ([Click to view full-size image](user-based-authorization-cs/_static/image18.png))</span></span>

<span data-ttu-id="8cb4f-288">Dieser angepasste Workflow bietet eine sinnvolle und unkomplizierte Benutzer Darstellung, indem der in Abbildung 2 dargestellte Prozess kurz umschließt wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-288">This customized workflow presents a more sensible and straightforward user experience by short circuiting the cycle depicted in Figure 2.</span></span>

## <a name="step-3-limiting-functionality-based-on-the-currently-logged-in-user"></a><span data-ttu-id="8cb4f-289">Schritt 3: Einschränken der Funktionalität basierend auf dem aktuell angemeldeten Benutzer</span><span class="sxs-lookup"><span data-stu-id="8cb4f-289">Step 3: Limiting Functionality Based on the Currently Logged In User</span></span>

<span data-ttu-id="8cb4f-290">Mit der URL-Autorisierung können Sie ganz einfach grobe Autorisierungs Regeln angeben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-290">URL authorization makes it easy to specify coarse authorization rules.</span></span> <span data-ttu-id="8cb4f-291">Wie in Schritt 1 gezeigt, können wir mit der URL-Autorisierung kurz angeben, welche Identitäten zulässig sind und welche verweigert werden, wenn eine bestimmte Seite oder alle Seiten in einem Ordner angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-291">As we saw in Step 1, with URL authorization we can succinctly state what identities are permitted and which ones are denied from viewing a particular page or all pages in a folder.</span></span> <span data-ttu-id="8cb4f-292">In bestimmten Szenarien empfiehlt es sich jedoch, allen Benutzern zu gestatten, eine Seite zu besuchen, aber die Funktionalität der Seite auf der Grundlage des von Ihnen besuchten Benutzers einzuschränken.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-292">In certain scenarios, however, we may want to allow all users to visit a page, but limit the page's functionality based on the user visiting it.</span></span>

<span data-ttu-id="8cb4f-293">Betrachten Sie den Fall einer e-Commerce-Website, mit der authentifizierte Besucher Ihre Produkte überprüfen können.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-293">Consider the case of an eCommerce website that allows authenticated visitors to review their products.</span></span> <span data-ttu-id="8cb4f-294">Wenn ein anonymer Benutzer auf die Seite eines Produkts zugreift, werden ihm nur die Produktinformationen angezeigt, und es wird nicht die Gelegenheit gegeben, eine Überprüfung zu hinterlassen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-294">When an anonymous user visits a product's page, they would see just the product information and would not be given the opportunity to leave a review.</span></span> <span data-ttu-id="8cb4f-295">Ein authentifizierter Benutzer, der dieselbe Seite besucht, würde jedoch die Überprüfungs Schnittstelle sehen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-295">However, an authenticated user visiting the same page would see the reviewing interface.</span></span> <span data-ttu-id="8cb4f-296">Wenn der authentifizierte Benutzer dieses Produkt noch nicht überprüft hat, würde die Schnittstelle es Ihnen ermöglichen, einen Review zu übermitteln. Andernfalls würden Sie Ihnen den zuvor übermittelten Review zeigen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-296">If the authenticated user had not yet reviewed this product, the interface would enable them to submit a review; otherwise it would show them their previously-submitted review.</span></span> <span data-ttu-id="8cb4f-297">Um dieses Szenario noch einen Schritt weiter zu machen, werden auf der Produktseite möglicherweise zusätzliche Informationen angezeigt, und es werden erweiterte Features für die Benutzer angeboten, die für das eCommerce-Unternehmen funktionieren</span><span class="sxs-lookup"><span data-stu-id="8cb4f-297">To take this scenario a step further, the product page might show additional information and offer extended features for those users that work for the eCommerce company.</span></span> <span data-ttu-id="8cb4f-298">Beispielsweise kann auf der Produktseite die Inventur in der Aktienliste angezeigt werden, um den Preis und die Beschreibung des Produkts zu bearbeiten, wenn Sie von einem Mitarbeiter besucht werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-298">For example, the product page might list the inventory in stock and include options to edit the product's price and description when visited by an employee.</span></span>

<span data-ttu-id="8cb4f-299">Solche differenzierten Autorisierungs Regeln können entweder deklarativ oder Programm gesteuert (oder mithilfe einer Kombination der beiden) implementiert werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-299">Such fine grain authorization rules can be implemented either declaratively or programmatically (or through some combination of the two).</span></span> <span data-ttu-id="8cb4f-300">Im nächsten Abschnitt erfahren Sie, wie Sie eine feine granulare Autorisierung über das LoginView-Steuerelement implementieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-300">In the next section we will see how to implement fine grain authorization via the LoginView control.</span></span> <span data-ttu-id="8cb4f-301">Danach werden die programmgesteuerten Verfahren erläutert.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-301">Following that, we will explore programmatic techniques.</span></span> <span data-ttu-id="8cb4f-302">Bevor wir uns mit dem Anwenden von Regeln für die differenzierte Autorisierung befassen, müssen wir zunächst eine Seite erstellen, deren Funktionalität vom Benutzer abhängt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-302">Before we can look at applying fine grain authorization rules, however, we first need to create a page whose functionality depends on the user visiting it.</span></span>

<span data-ttu-id="8cb4f-303">Wir erstellen eine Seite, auf der die Dateien in einem bestimmten Verzeichnis innerhalb einer GridView aufgeführt sind.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-303">Let's create a page that lists the files in a particular directory within a GridView.</span></span> <span data-ttu-id="8cb4f-304">Zusammen mit der Auflistung von Namen, Größe und anderen Informationen für jede Datei enthält die GridView zwei Spalten von LinkButtons: eine mit der Bezeichnung "View" und eine mit dem Titel "Delete".</span><span class="sxs-lookup"><span data-stu-id="8cb4f-304">Along with listing each file's name, size, and other information, the GridView will include two columns of LinkButtons: one titled View and one titled Delete.</span></span> <span data-ttu-id="8cb4f-305">Wenn auf den Link Button anzeigen geklickt wird, wird der Inhalt der ausgewählten Datei angezeigt. Wenn auf die Schaltfläche "Link löschen" geklickt wird, wird die Datei gelöscht.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-305">If the View LinkButton is clicked, the contents of the selected file will be displayed; if the Delete LinkButton is clicked, the file will be deleted.</span></span> <span data-ttu-id="8cb4f-306">Zunächst erstellen wir diese Seite so, dass Ihre Ansicht-und Löschfunktionen für alle Benutzer verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-306">Let's initially create this page such that its view and delete functionality is available to all users.</span></span> <span data-ttu-id="8cb4f-307">Im Abschnitt Verwenden des LoginView-Steuer Elements und des programmgesteuerten Einschränkungs Limits wird beschrieben, wie Sie diese Features basierend auf den Benutzern, die die Seite besuchen, aktivieren oder deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-307">In the Using the LoginView Control and Programmatically Limiting Functionality sections we will see how to enable or disable these features based on the user visiting the page.</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-308">Auf der ASP.NET Seite, die wir gerade erstellen, wird ein GridView-Steuerelement verwendet, um eine Liste mit Dateien anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-308">The ASP.NET page we are about to build uses a GridView control to display a list of files.</span></span> <span data-ttu-id="8cb4f-309">Da sich diese tutorialreihe auf Formular Authentifizierung, Autorisierung, Benutzerkonten und Rollen konzentriert, möchte ich nicht zu viel Zeit aufwenden, um die interne Funktionsweise des GridView-Steuer Elements zu erörtern.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-309">Since this tutorial series focuses on forms authentication, authorization, user accounts, and roles, I do not want to spend too much time discussing the inner workings of the GridView control.</span></span> <span data-ttu-id="8cb4f-310">In diesem Tutorial finden Sie eine ausführliche Anleitung zum Einrichten dieser Seite. es wird jedoch nicht ausführlich erläutert, warum bestimmte Optionen getroffen wurden oder welche Auswirkungen bestimmte Eigenschaften auf die gerenderte Ausgabe haben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-310">While this tutorial provides specific step-by-step instructions for setting up this page, it does not delve into the details of why certain choices were made, or what effect particular properties have on the rendered output.</span></span> <span data-ttu-id="8cb4f-311">Eine gründliche Untersuchung des GridView-Steuer Elements finden Sie in der tutorialreihe *[Arbeiten mit Daten in ASP.NET 2,0](../../data-access/index.md)* .</span><span class="sxs-lookup"><span data-stu-id="8cb4f-311">For a thorough examination of the GridView control, consult my *[Working with Data in ASP.NET 2.0](../../data-access/index.md)* tutorial series.</span></span>

<span data-ttu-id="8cb4f-312">Öffnen Sie zunächst die Datei `UserBasedAuthorization.aspx` im Ordner `Membership`, und fügen Sie der Seite mit dem Namen `FilesGrid`ein GridView-Steuerelement hinzu.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-312">Start by opening the `UserBasedAuthorization.aspx` file in the `Membership` folder and adding a GridView control to the page named `FilesGrid`.</span></span> <span data-ttu-id="8cb4f-313">Klicken Sie in der GridView-Smarttag auf den Link Spalten bearbeiten, um das Dialogfeld Felder zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-313">From the GridView's Smart Tag, click the Edit Columns link to launch the Fields dialog box.</span></span> <span data-ttu-id="8cb4f-314">Deaktivieren Sie in der linken unteren Ecke das Kontrollkästchen Felder automatisch generieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-314">From here, uncheck the Auto-generate fields checkbox in the lower left corner.</span></span> <span data-ttu-id="8cb4f-315">Fügen Sie als nächstes eine Schaltfläche auswählen, eine Schaltfläche Löschen und zwei boundfields aus der oberen linken Ecke hinzu (die Schaltflächen auswählen und löschen finden Sie unter dem CommandField-Typ).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-315">Next, add a Select button, a Delete button, and two BoundFields from the upper left corner (the Select and Delete buttons can be found under the CommandField type).</span></span> <span data-ttu-id="8cb4f-316">Legen Sie die `SelectText`-Eigenschaft der Select-Schaltfläche auf View und die Eigenschaften `HeaderText` und `DataField` des ersten BoundField auf Name fest.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-316">Set the Select button's `SelectText` property to View and the first BoundField's `HeaderText` and `DataField` properties to Name.</span></span> <span data-ttu-id="8cb4f-317">Legen Sie die `HeaderText`-Eigenschaft des zweiten BoundField auf size in Bytes, die `DataField`-Eigenschaft auf length, die `DataFormatString`-Eigenschaft auf {0:N0} und deren `HtmlEncode`-Eigenschaft auf false fest.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-317">Set the second BoundField's `HeaderText` property to Size in Bytes, its `DataField` property to Length, its `DataFormatString` property to {0:N0} and its `HtmlEncode` property to False.</span></span>

<span data-ttu-id="8cb4f-318">Nachdem Sie die Spalten der GridView konfiguriert haben, klicken Sie auf OK, um das Dialogfeld Felder zu schließen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-318">After configuring the GridView's columns, click OK to close the Fields dialog box.</span></span> <span data-ttu-id="8cb4f-319">Legen Sie im Eigenschaftenfenster die `DataKeyNames`-Eigenschaft der GridView auf `FullName`fest.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-319">From the Properties window, set the GridView's `DataKeyNames` property to `FullName`.</span></span> <span data-ttu-id="8cb4f-320">An diesem Punkt sollte das deklarative Markup der GridView wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-320">At this point the GridView's declarative markup should look like the following:</span></span>

[!code-aspx[Main](user-based-authorization-cs/samples/sample9.aspx)]

<span data-ttu-id="8cb4f-321">Wenn das Markup der GridView erstellt wurde, können wir den Code schreiben, der die Dateien in einem bestimmten Verzeichnis abruft und an die GridView bindet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-321">With the GridView's markup created, we're ready to write the code that will retrieve the files in a particular directory and bind them to the GridView.</span></span> <span data-ttu-id="8cb4f-322">Fügen Sie den folgenden Code zum `Page_Load`-Ereignishandler der Seite hinzu:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-322">Add the following code to the page's `Page_Load` event handler:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample10.cs)]

<span data-ttu-id="8cb4f-323">Der obige Code verwendet die [`DirectoryInfo`-Klasse](https://msdn.microsoft.com/library/system.io.directoryinfo.aspx) , um eine Liste der Dateien im Stamm Ordner der Anwendung abzurufen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-323">The above code uses the [`DirectoryInfo` class](https://msdn.microsoft.com/library/system.io.directoryinfo.aspx) to obtain a list of the files in the application's root folder.</span></span> <span data-ttu-id="8cb4f-324">Die [`GetFiles()`-Methode](https://msdn.microsoft.com/library/system.io.directoryinfo.getfiles.aspx) gibt alle Dateien im Verzeichnis als Array von [`FileInfo` Objekten](https://msdn.microsoft.com/library/system.io.fileinfo.aspx)zurück, die dann an die GridView gebunden werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-324">The [`GetFiles()` method](https://msdn.microsoft.com/library/system.io.directoryinfo.getfiles.aspx) returns all of the files in the directory as an array of [`FileInfo` objects](https://msdn.microsoft.com/library/system.io.fileinfo.aspx), which is then bound to the GridView.</span></span> <span data-ttu-id="8cb4f-325">Das `FileInfo`-Objekt verfügt unter anderem über eine Reihe von Eigenschaften, z. b. `Name`, `Length`und `IsReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-325">The `FileInfo` object has an assortment of properties, such as `Name`, `Length`, and `IsReadOnly`, among others.</span></span> <span data-ttu-id="8cb4f-326">Wie Sie aus dem deklarativen Markup erkennen können, werden in der GridView nur die Eigenschaften "`Name`" und "`Length`" angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-326">As you can see from its declarative markup, the GridView displays just the `Name` and `Length` properties.</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-327">Die Klassen `DirectoryInfo` und `FileInfo` befinden sich im [`System.IO`-Namespace](https://msdn.microsoft.com/library/system.io.aspx).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-327">The `DirectoryInfo` and `FileInfo` classes are found in the [`System.IO` namespace](https://msdn.microsoft.com/library/system.io.aspx).</span></span> <span data-ttu-id="8cb4f-328">Daher müssen Sie diese Klassennamen entweder Ihren Namespace Namen voranstellen oder den Namespace in die Klassendatei importieren lassen (über `using System.IO`).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-328">Therefore, you will either need to preface these class names with their namespace names or have the namespace imported into the class file (via `using System.IO`).</span></span>

<span data-ttu-id="8cb4f-329">Nehmen Sie sich einen Moment Zeit, um diese Seite über einen Browser zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-329">Take a moment to visit this page through a browser.</span></span> <span data-ttu-id="8cb4f-330">Dadurch wird die Liste der Dateien angezeigt, die sich im Stammverzeichnis der Anwendung befinden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-330">It will display the list of files residing in the application's root directory.</span></span> <span data-ttu-id="8cb4f-331">Wenn Sie auf eine der Schaltflächen "anzeigen" oder "Löschen" klicken, wird ein Postback ausgelöst, aber es erfolgt keine Aktion, da wir noch die erforderlichen Ereignishandler erstellen müssen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-331">Clicking any of the View or Delete LinkButtons will cause a postback, but no action will occur because we've yet to create the necessary event handlers.</span></span>

<span data-ttu-id="8cb4f-332">[![die GridView die Dateien im Stammverzeichnis der Webanwendung auflistet.](user-based-authorization-cs/_static/image20.png)](user-based-authorization-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-332">[![The GridView Lists the Files in the Web Application's Root Directory](user-based-authorization-cs/_static/image20.png)](user-based-authorization-cs/_static/image19.png)</span></span>

<span data-ttu-id="8cb4f-333">**Abbildung 7**: die GridView listet die Dateien im Stammverzeichnis der Webanwendung auf ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-333">**Figure 7**: The GridView Lists the Files in the Web Application's Root Directory  ([Click to view full-size image](user-based-authorization-cs/_static/image21.png))</span></span>

<span data-ttu-id="8cb4f-334">Wir benötigen eine Möglichkeit, den Inhalt der ausgewählten Datei anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-334">We need a means to display the contents of the selected file.</span></span> <span data-ttu-id="8cb4f-335">Kehren Sie zu Visual Studio zurück, und fügen Sie ein Textfeld mit dem Namen `FileContents` oberhalb der GridView hinzu.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-335">Return to Visual Studio and add a TextBox named `FileContents` above the GridView.</span></span> <span data-ttu-id="8cb4f-336">Legen Sie die `TextMode`-Eigenschaft auf `MultiLine` und deren `Columns` und `Rows` Eigenschaften auf 95% bzw. 10 fest.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-336">Set its `TextMode` property to `MultiLine` and its `Columns` and `Rows` properties to 95% and 10, respectively.</span></span>

[!code-aspx[Main](user-based-authorization-cs/samples/sample11.aspx)]

<span data-ttu-id="8cb4f-337">Erstellen Sie als nächstes einen Ereignishandler für das [`SelectedIndexChanged` Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx) der GridView, und fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-337">Next, create an event handler for the GridView's [`SelectedIndexChanged` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx) and add the following code:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample12.cs)]

<span data-ttu-id="8cb4f-338">In diesem Code wird die `SelectedValue`-Eigenschaft der GridView verwendet, um den vollständigen Dateinamen der ausgewählten Datei zu bestimmen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-338">This code uses the GridView's `SelectedValue` property to determine the full file name of the selected file.</span></span> <span data-ttu-id="8cb4f-339">Intern wird auf die `DataKeys` Auflistung verwiesen, um die `SelectedValue`abzurufen. Daher ist es zwingend erforderlich, dass Sie die `DataKeyNames`-Eigenschaft der GridView auf "Name" festlegen, wie zuvor in diesem Schritt beschrieben.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-339">Internally, the `DataKeys` collection is referenced in order to obtain the `SelectedValue`, so it is imperative that you set the GridView's `DataKeyNames` property to Name, as described earlier in this step.</span></span> <span data-ttu-id="8cb4f-340">Die [`File`-Klasse](https://msdn.microsoft.com/library/system.io.file.aspx) wird verwendet, um den Inhalt der ausgewählten Datei in eine Zeichenfolge zu lesen, die dann der `Text`-Eigenschaft des `FileContents`-Textfelds zugewiesen wird. auf diese Weise wird der Inhalt der ausgewählten Datei auf der Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-340">The [`File` class](https://msdn.microsoft.com/library/system.io.file.aspx) is used to read the selected file's contents into a string, which is then assigned to the `FileContents` TextBox's `Text` property, thereby displaying the contents of the selected file on the page.</span></span>

<span data-ttu-id="8cb4f-341">[![der Inhalt der ausgewählten Datei im Textfeld angezeigt wird.](user-based-authorization-cs/_static/image23.png)](user-based-authorization-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-341">[![The Selected File's Contents are Displayed in the TextBox](user-based-authorization-cs/_static/image23.png)](user-based-authorization-cs/_static/image22.png)</span></span>

<span data-ttu-id="8cb4f-342">**Abbildung 8**: der Inhalt der ausgewählten Datei wird im Textfeld angezeigt ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-342">**Figure 8**: The Selected File's Contents are Displayed in the TextBox  ([Click to view full-size image](user-based-authorization-cs/_static/image24.png))</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-343">Wenn Sie den Inhalt einer Datei anzeigen, die HTML-Markup enthält, und dann versuchen, eine Datei anzuzeigen oder zu löschen, erhalten Sie einen `HttpRequestValidationException` Fehler.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-343">If you view the contents of a file that contains HTML markup, and then attempt to view or delete a file, you will receive an `HttpRequestValidationException` error.</span></span> <span data-ttu-id="8cb4f-344">Dies liegt daran, dass beim Postback der Inhalt des Textfelds zurück an den Webserver gesendet wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-344">This occurs because on postback the TextBox's contents are sent back to the web server.</span></span> <span data-ttu-id="8cb4f-345">Standardmäßig löst ASP.net immer dann einen `HttpRequestValidationException` Fehler aus, wenn potenziell gefährliche Post Back Inhalte erkannt werden, z. b. HTML-Markup.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-345">By default, ASP.NET raises an `HttpRequestValidationException` error whenever potentially dangerous postback content, such as HTML markup, is detected.</span></span> <span data-ttu-id="8cb4f-346">Deaktivieren Sie die Anforderungs Überprüfung für die Seite, indem Sie `ValidateRequest="false"` der `@Page`-Direktive hinzufügen, um diesen Fehler zu deaktivieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-346">To disable this error from occurring, turn off request validation for the page by adding `ValidateRequest="false"` to the `@Page` directive.</span></span> <span data-ttu-id="8cb4f-347">Weitere Informationen zu den Vorteilen der Anforderungs Überprüfung sowie zu den Vorsichtsmaßnahmen, die Sie bei der Deaktivierung treffen sollten, finden Sie unter über [Prüfung der Anforderung-verhindern von Skript Angriffen](https://asp.net/learn/whitepapers/request-validation/).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-347">For more information on the benefits of request validation as well as what precautions you should take when disabling it, read [Request Validation - Preventing Script Attacks](https://asp.net/learn/whitepapers/request-validation/).</span></span>

<span data-ttu-id="8cb4f-348">Fügen Sie abschließend einen Ereignishandler mit dem folgenden Code für das [`RowDeleting`-Ereignis](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowdeleting.aspx)der GridView hinzu:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-348">Finally, add an event handler with the following code for the GridView's [`RowDeleting` event](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.rowdeleting.aspx):</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample13.cs)]

<span data-ttu-id="8cb4f-349">Der Code zeigt einfach den vollständigen Namen der zu löschenden Datei im Textfeld `FileContents` an, *ohne* die Datei tatsächlich zu löschen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-349">The code simply displays the full name of the file to delete in the `FileContents` TextBox *without* actually deleting the file.</span></span>

<span data-ttu-id="8cb4f-350">[durch ![klicken auf die Schaltfläche "Löschen" wird die Datei nicht gelöscht.](user-based-authorization-cs/_static/image26.png)](user-based-authorization-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-350">[![Clicking the Delete Button Does Not Actually Delete the File](user-based-authorization-cs/_static/image26.png)](user-based-authorization-cs/_static/image25.png)</span></span>

<span data-ttu-id="8cb4f-351">**Abbildung 9**: durch Klicken auf die Schaltfläche "Löschen" wird die Datei nicht gelöscht ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-351">**Figure 9**: Clicking the Delete Button Does Not Actually Delete the File  ([Click to view full-size image](user-based-authorization-cs/_static/image27.png))</span></span>

<span data-ttu-id="8cb4f-352">In Schritt 1 haben wir die URL-Autorisierungs Regeln so konfiguriert, dass anonyme Benutzer die Seiten im `Membership` Ordner nicht anzeigen können.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-352">In Step 1 we configured the URL authorization rules to prohibit anonymous users from viewing the pages in the `Membership` folder.</span></span> <span data-ttu-id="8cb4f-353">Um die fein Körnung der Granularität zu verbessern, gestatten wir anonymen Benutzern das Besuchen der Seite "`UserBasedAuthorization.aspx`", aber mit eingeschränkter Funktionalität.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-353">In order to better exhibit fine grain authentication, let's allow anonymous users to visit the `UserBasedAuthorization.aspx` page, but with limited functionality.</span></span> <span data-ttu-id="8cb4f-354">Um diese Seite zu öffnen, auf der alle Benutzer zugreifen können, fügen Sie der `Web.config`-Datei im `Membership` Ordner Folgendes `<location>`-Element hinzu:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-354">To open this page up to be accessed by all users, add the following `<location>` element to the `Web.config` file in the `Membership` folder:</span></span>

[!code-xml[Main](user-based-authorization-cs/samples/sample14.xml)]

<span data-ttu-id="8cb4f-355">Nachdem Sie dieses `<location>` Element hinzugefügt haben, testen Sie die neuen URL-Autorisierungs Regeln, indem Sie sich von der Website abmelden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-355">After adding this `<location>` element, test the new URL authorization rules by logging out of the site.</span></span> <span data-ttu-id="8cb4f-356">Als anonymer Benutzer empfiehlt es sich, die `UserBasedAuthorization.aspx` Seite zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-356">As an anonymous user you should be permitted to visit the `UserBasedAuthorization.aspx` page.</span></span>

<span data-ttu-id="8cb4f-357">Derzeit können alle authentifizierten oder anonymen Benutzer die `UserBasedAuthorization.aspx` Seite besuchen und Dateien anzeigen oder löschen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-357">Currently, any authenticated or anonymous user can visit the `UserBasedAuthorization.aspx` page and view or delete files.</span></span> <span data-ttu-id="8cb4f-358">Wir legen dies so fest, dass nur authentifizierte Benutzer den Inhalt einer Datei anzeigen können, sodass nur eine Datei von Tito gelöscht werden kann.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-358">Let's make it so that only authenticated users can view contents of a file and only Tito can delete a file.</span></span> <span data-ttu-id="8cb4f-359">Solche differenzierten Autorisierungs Regeln können deklarativ, Programm gesteuert oder über eine Kombination beider Methoden angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-359">Such fine grain authorization rules can be applied declaratively, programmatically, or through a combination of both methods.</span></span> <span data-ttu-id="8cb4f-360">Wir verwenden den deklarativen Ansatz, um einzuschränken, wer den Inhalt einer Datei anzeigen kann. Wir verwenden den programmatischen Ansatz, um einzuschränken, wer eine Datei löschen kann.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-360">Let's use the declarative approach to limit who can view the contents of a file; we'll use the programmatic approach to limit who can delete a file.</span></span>

### <a name="using-the-loginview-control"></a><span data-ttu-id="8cb4f-361">Verwenden des LoginView-Steuer Elements</span><span class="sxs-lookup"><span data-stu-id="8cb4f-361">Using the LoginView Control</span></span>

<span data-ttu-id="8cb4f-362">Wie bereits in den vorherigen Tutorials gezeigt, eignet sich das LoginView-Steuerelement zum Anzeigen verschiedener Schnittstellen für authentifizierte und anonyme Benutzer und bietet eine einfache Möglichkeit, die Funktionalität auszublenden, die für anonyme Benutzer nicht zugänglich ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-362">As we've seen in past tutorials, the LoginView control is useful for displaying different interfaces for authenticated and anonymous users, and offers an easy way to hide functionality that is not accessible to anonymous users.</span></span> <span data-ttu-id="8cb4f-363">Da anonyme Benutzer Dateien nicht anzeigen oder löschen können, muss nur das `FileContents` Textfeld angezeigt werden, wenn die Seite von einem authentifizierten Benutzer besucht wird.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-363">Since anonymous users cannot view or delete files, we only need to show the `FileContents` TextBox when the page is visited by an authenticated user.</span></span> <span data-ttu-id="8cb4f-364">Um dies zu erreichen, fügen Sie der Seite ein LoginView-Steuerelement hinzu, benennen Sie `LoginViewForFileContentsTextBox`, und verschieben Sie das deklarative Markup des `FileContents` Textfelds in die `LoggedInTemplate`des LoginView-Steuer Elements.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-364">To achieve this, add a LoginView control to the page, name it `LoginViewForFileContentsTextBox`, and move the `FileContents` TextBox's declarative markup into the LoginView control's `LoggedInTemplate`.</span></span>

[!code-aspx[Main](user-based-authorization-cs/samples/sample15.aspx)]

<span data-ttu-id="8cb4f-365">Auf die websteuer Elemente in den Vorlagen von LoginView kann nicht mehr direkt aus der Code Behind-Klasse zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-365">The Web controls in the LoginView's templates are no longer directly accessible from the code-behind class.</span></span> <span data-ttu-id="8cb4f-366">Beispielsweise verweisen die `SelectedIndexChanged`-und `RowDeleting` Ereignishandler der `FilesGrid` GridView aktuell auf das `FileContents` TextBox-Steuerelement mit Code wie:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-366">For example, the `FilesGrid` GridView's `SelectedIndexChanged` and `RowDeleting` event handlers currently reference the `FileContents` TextBox control with code like:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample16.cs)]

<span data-ttu-id="8cb4f-367">Dieser Code ist jedoch nicht mehr gültig.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-367">However, this code is no longer valid.</span></span> <span data-ttu-id="8cb4f-368">Wenn Sie das Textfeld `FileContents` in den `LoggedInTemplate` verschieben, kann auf das Textfeld nicht direkt zugegriffen werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-368">By moving the `FileContents` TextBox into the `LoggedInTemplate` the TextBox cannot be directly accessed.</span></span> <span data-ttu-id="8cb4f-369">Stattdessen müssen wir die `FindControl("controlId")`-Methode verwenden, um Programm gesteuert auf das Steuerelement zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-369">Instead, we must use the `FindControl("controlId")` method to programmatically reference the control.</span></span> <span data-ttu-id="8cb4f-370">Aktualisieren Sie die `FilesGrid` Ereignishandler so, dass Sie wie folgt auf das Textfeld verweisen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-370">Update the `FilesGrid` event handlers to reference the TextBox like so:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample17.cs)]

<span data-ttu-id="8cb4f-371">Nachdem Sie das Textfeld in den `LoggedInTemplate` von LoginView verschoben und den Code der Seite aktualisiert haben, um mithilfe des `FindControl("controlId")` Musters auf das Textfeld zu verweisen, besuchen Sie die Seite als anonymer Benutzer.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-371">After moving the TextBox to the LoginView's `LoggedInTemplate` and updating the page's code to reference the TextBox using the `FindControl("controlId")` pattern, visit the page as an anonymous user.</span></span> <span data-ttu-id="8cb4f-372">Wie Abbildung 10 zeigt, wird das Textfeld `FileContents` nicht angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-372">As Figure 10 shows, the `FileContents` TextBox is not displayed.</span></span> <span data-ttu-id="8cb4f-373">Der Link Button anzeigen wird jedoch weiterhin angezeigt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-373">However, the View LinkButton is still displayed.</span></span>

<span data-ttu-id="8cb4f-374">[![das LoginView-Steuerelement nur das FileContent-Textfeld für authentifizierte Benutzer rendert.](user-based-authorization-cs/_static/image29.png)](user-based-authorization-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-374">[![The LoginView Control Only Renders the FileContents TextBox for Authenticated Users](user-based-authorization-cs/_static/image29.png)](user-based-authorization-cs/_static/image28.png)</span></span>

<span data-ttu-id="8cb4f-375">**Abbildung 10**: das LoginView-Steuerelement rendert nur das Textfeld "`FileContents`" für authentifizierte Benutzer ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-375">**Figure 10**: The LoginView Control Only Renders the `FileContents` TextBox for Authenticated Users  ([Click to view full-size image](user-based-authorization-cs/_static/image30.png))</span></span>

<span data-ttu-id="8cb4f-376">Eine Möglichkeit zum Ausblenden der Ansichts Schaltfläche für anonyme Benutzer besteht darin, das GridView-Feld in ein TemplateField-Element zu konvertieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-376">One way to hide the View button for anonymous users is to convert the GridView field into a TemplateField.</span></span> <span data-ttu-id="8cb4f-377">Dadurch wird eine Vorlage generiert, die das deklarative Markup für die Link Schaltfläche "View" enthält.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-377">This will generate a template that contains the declarative markup for the View LinkButton.</span></span> <span data-ttu-id="8cb4f-378">Anschließend können Sie ein LoginView-Steuerelement zum TemplateField hinzufügen und den LinkButton innerhalb der `LoggedInTemplate`von LoginView platzieren. Dadurch wird die Schaltfläche Ansicht von anonymen Besuchern ausgeblendet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-378">We can then add a LoginView control to the TemplateField and place the LinkButton within the LoginView's `LoggedInTemplate`, thereby hiding the View button from anonymous visitors.</span></span> <span data-ttu-id="8cb4f-379">Um dies zu erreichen, klicken Sie auf den Link Spalten bearbeiten des Smarttags von GridView, um das Dialogfeld Felder zu öffnen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-379">To accomplish this, click on the Edit Columns link from the GridView's Smart Tag to launch the Fields dialog box.</span></span> <span data-ttu-id="8cb4f-380">Wählen Sie anschließend in der Liste in der unteren linken Ecke die Schaltfläche auswählen aus, und klicken Sie dann auf den Link dieses Feld in einen TemplateField-Link konvertieren.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-380">Next, select the Select button from the list in the lower left corner and then click the Convert this field to a TemplateField link.</span></span> <span data-ttu-id="8cb4f-381">Dadurch wird das deklarative Markup des Felds geändert von:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-381">Doing so will modify the field's declarative markup from:</span></span>

[!code-aspx[Main](user-based-authorization-cs/samples/sample18.aspx)]

 <span data-ttu-id="8cb4f-382">Bis:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-382">To:</span></span> 

[!code-aspx[Main](user-based-authorization-cs/samples/sample19.aspx)]

<span data-ttu-id="8cb4f-383">An diesem Punkt können wir eine LoginView zum TemplateField hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-383">At this point, we can add a LoginView to the TemplateField.</span></span> <span data-ttu-id="8cb4f-384">Das folgende Markup zeigt den Link Button anzeigen nur für authentifizierte Benutzer an.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-384">The following markup displays the View LinkButton only for authenticated users.</span></span>

[!code-aspx[Main](user-based-authorization-cs/samples/sample20.aspx)]

<span data-ttu-id="8cb4f-385">Wie in Abbildung 11 dargestellt, ist das Endergebnis nicht so schön, dass die Spalte "View" weiterhin angezeigt wird, auch wenn die Ansicht "LinkButtons" in der Spalte ausgeblendet ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-385">As Figure 11 shows, the end result is not that pretty as the View column is still displayed even though the View LinkButtons within the column are hidden.</span></span> <span data-ttu-id="8cb4f-386">Im nächsten Abschnitt erfahren Sie, wie Sie die gesamte GridView-Spalte (und nicht nur die LinkButton-Spalte) ausblenden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-386">We will look at how to hide the entire GridView column (and not just the LinkButton) in the next section.</span></span>

<span data-ttu-id="8cb4f-387">[![das LoginView-Steuerelement die Linkschaltflächen für anonyme Besucher ausblenden](user-based-authorization-cs/_static/image32.png)](user-based-authorization-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-387">[![The LoginView Control Hides the View LinkButtons for Anonymous Visitors](user-based-authorization-cs/_static/image32.png)](user-based-authorization-cs/_static/image31.png)</span></span>

<span data-ttu-id="8cb4f-388">**Abbildung 11**: das LoginView-Steuerelement blendet die Linkschaltflächen für anonyme Besucher aus ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-388">**Figure 11**: The LoginView Control Hides the View LinkButtons for Anonymous Visitors  ([Click to view full-size image](user-based-authorization-cs/_static/image33.png))</span></span>

### <a name="programmatically-limiting-functionality"></a><span data-ttu-id="8cb4f-389">Programmgesteuerte Einschränkung der Funktionalität</span><span class="sxs-lookup"><span data-stu-id="8cb4f-389">Programmatically Limiting Functionality</span></span>

<span data-ttu-id="8cb4f-390">In einigen Fällen reichen die deklarativen Techniken nicht aus, um die Funktionalität auf eine Seite zu beschränken.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-390">In some circumstances, declarative techniques are insufficient for limiting functionality to a page.</span></span> <span data-ttu-id="8cb4f-391">Beispielsweise kann es sein, dass die Verfügbarkeit bestimmter Seitenfunktionen von den Kriterien abhängig ist, über die der Benutzer, der die Seite besucht, anonym oder authentifiziert ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-391">For example, the availability of certain page functionality may be dependent on criteria beyond whether the user visiting the page is anonymous or authenticated.</span></span> <span data-ttu-id="8cb4f-392">In solchen Fällen können die verschiedenen Elemente der Benutzeroberfläche durch programmgesteuerte Mittel angezeigt oder ausgeblendet werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-392">In such cases, the various user interface elements can be displayed or hidden through programmatic means.</span></span>

<span data-ttu-id="8cb4f-393">Um die Funktionalität Programm gesteuert einzuschränken, müssen wir zwei Aufgaben ausführen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-393">In order to limit the functionality programmatically, we need to perform two tasks:</span></span>

1. <span data-ttu-id="8cb4f-394">Bestimmen Sie, ob der Benutzer, der die Seite besucht, auf die Funktionen zugreifen kann.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-394">Determine whether the user visiting the page can access the functionality, and</span></span>
2. <span data-ttu-id="8cb4f-395">Programm gesteuertes Ändern der Benutzeroberfläche basierend darauf, ob der Benutzer Zugriff auf die betreffende Funktionalität hat.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-395">Programmatically modify the user interface based on whether the user has access to the functionality in question.</span></span>

<span data-ttu-id="8cb4f-396">Um die Anwendung dieser beiden Aufgaben zu veranschaulichen, dürfen Sie nur die Dateien aus der GridView löschen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-396">To demonstrate the application of these two tasks, let's only allow Tito to delete files from the GridView.</span></span> <span data-ttu-id="8cb4f-397">Die erste Aufgabe besteht darin, zu bestimmen, ob es Tito ist, die Seite zu besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-397">Our first task, then, is to determine whether it is Tito visiting the page.</span></span> <span data-ttu-id="8cb4f-398">Nachdem dies festgelegt wurde, müssen wir die Delete-Spalte der GridView ausblenden (oder anzeigen).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-398">Once that has been determined, we need to hide (or show) the GridView's Delete column.</span></span> <span data-ttu-id="8cb4f-399">Der Zugriff auf die Spalten der GridView erfolgt über Ihre `Columns`-Eigenschaft. eine Spalte wird nur gerendert, wenn die `Visible`-Eigenschaft auf `true` (Standard) festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-399">The GridView's columns are accessible through its `Columns` property; a column is only rendered if its `Visible` property is set to `true` (the default).</span></span>

<span data-ttu-id="8cb4f-400">Fügen Sie den folgenden Code in den `Page_Load`-Ereignishandler ein, bevor Sie die Daten an das GridView-Ereignis binden:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-400">Add the following code to the `Page_Load` event handler prior to binding the data to the GridView:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample21.cs)]

<span data-ttu-id="8cb4f-401">Wie in der Übersicht über das Tutorial zur [*Formular Authentifizierung*](../introduction/an-overview-of-forms-authentication-cs.md) erläutert, gibt `User.Identity.Name` den Namen der Identität zurück.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-401">As we discussed in the [*An Overview of Forms Authentication*](../introduction/an-overview-of-forms-authentication-cs.md) tutorial, `User.Identity.Name` returns the identity's name.</span></span> <span data-ttu-id="8cb4f-402">Dies entspricht dem Benutzernamen, der im Login-Steuerelement eingegeben wurde.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-402">This corresponds to the username entered in the Login control.</span></span> <span data-ttu-id="8cb4f-403">Wenn es sich um einen Besuch der Seite handelt, wird die `Visible`-Eigenschaft der zweiten Spalte der GridView auf `true`festgelegt. Andernfalls wird Sie auf `false`festgelegt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-403">If it is Tito visiting the page, the GridView's second column's `Visible` property is set to `true`; otherwise, it is set to `false`.</span></span> <span data-ttu-id="8cb4f-404">Das Ergebnis ist, dass die Spalte löschen nicht gerendert wird (siehe Abbildung 12), wenn jemand anderes als Tito die Seite besucht, entweder einen anderen authentifizierten Benutzer oder einen anonymen Benutzer. Wenn Tito jedoch die Seite besucht, ist die Spalte löschen vorhanden (siehe Abbildung 13).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-404">The net result is that when someone other than Tito visits the page, either another authenticated user or an anonymous user, the Delete column is not rendered (see Figure 12); however, when Tito visits the page, the Delete column is present (see Figure 13).</span></span>

<span data-ttu-id="8cb4f-405">[![die Spalte löschen nicht gerendert wird, wenn Sie von einem anderen Benutzer als Tito (z. b. Bruce) besucht wird](user-based-authorization-cs/_static/image35.png)](user-based-authorization-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-405">[![The Delete Column is Not Rendered When Visited By Someone Other Than Tito (Such as Bruce)](user-based-authorization-cs/_static/image35.png)](user-based-authorization-cs/_static/image34.png)</span></span>

<span data-ttu-id="8cb4f-406">**Abbildung 12**: die Spalte löschen wird nicht gerendert, wenn Sie von einem anderen Benutzer als Tito (z. b. Bruce) besucht wird ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-406">**Figure 12**: The Delete Column is Not Rendered When Visited By Someone Other Than Tito (Such as Bruce)  ([Click to view full-size image](user-based-authorization-cs/_static/image36.png))</span></span>

<span data-ttu-id="8cb4f-407">[![die Delete-Spalte für Tito gerendert wird.](user-based-authorization-cs/_static/image38.png)](user-based-authorization-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-407">[![The Delete Column is Rendered for Tito](user-based-authorization-cs/_static/image38.png)](user-based-authorization-cs/_static/image37.png)</span></span>

<span data-ttu-id="8cb4f-408">**Abbildung 13**: die Spalte löschen wird für Tito gerendert ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="8cb4f-408">**Figure 13**: The Delete Column is Rendered for Tito  ([Click to view full-size image](user-based-authorization-cs/_static/image39.png))</span></span>

## <a name="step-4-applying-authorization-rules-to-classes-and-methods"></a><span data-ttu-id="8cb4f-409">Schritt 4: Anwenden von Autorisierungs Regeln auf Klassen und Methoden</span><span class="sxs-lookup"><span data-stu-id="8cb4f-409">Step 4: Applying Authorization Rules to Classes and Methods</span></span>

<span data-ttu-id="8cb4f-410">In Schritt 3 haben wir den anonymen Benutzern untersagt, den Inhalt einer Datei anzuzeigen, und alle Benutzer, die das Löschen von Dateien untersagt haben, sind nicht zulässig.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-410">In Step 3 we disallowed anonymous users from viewing a file's contents and prohibited all users but Tito from deleting files.</span></span> <span data-ttu-id="8cb4f-411">Dies wurde erreicht, indem die zugehörigen Benutzeroberflächen Elemente für nicht autorisierte Besucher durch deklarative und programmgesteuerte Techniken ausgeblendet wurden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-411">This was accomplished by hiding the associated user interface elements for unauthorized visitors through declarative and programmatic techniques.</span></span> <span data-ttu-id="8cb4f-412">In unserem einfachen Beispiel war das ordnungsgemäße Ausblenden der Benutzeroberflächen Elemente unkompliziert, aber was ist mit komplexeren Websites, bei denen es möglicherweise viele verschiedene Möglichkeiten gibt, dieselbe Funktionalität auszuführen?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-412">For our simple example, properly hiding the user interface elements was straightforward, but what about more complex sites where there may be many different ways to perform the same functionality?</span></span> <span data-ttu-id="8cb4f-413">Was geschieht, wenn Sie diese Funktionalität auf nicht autorisierte Benutzer beschränken, wenn Sie vergessen, alle anwendbaren Elemente der Benutzeroberfläche auszublenden oder zu deaktivieren?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-413">In limiting that functionality to unauthorized users, what happens if we forget to hide or disable all of the applicable user interface elements?</span></span>

<span data-ttu-id="8cb4f-414">Eine einfache Möglichkeit, um sicherzustellen, dass ein bestimmtes Element nicht von einem nicht autorisierten Benutzer aufgerufen werden kann, besteht darin, diese Klasse oder Methode mit dem [`PrincipalPermission`-Attribut](https://msdn.microsoft.com/library/system.security.permissions.principalpermissionattribute.aspx)zu ergänzen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-414">An easy way to ensure that a particular piece of functionality cannot be accessed by an unauthorized user is to decorate that class or method with the [`PrincipalPermission` attribute](https://msdn.microsoft.com/library/system.security.permissions.principalpermissionattribute.aspx).</span></span> <span data-ttu-id="8cb4f-415">Wenn die .NET-Runtime eine-Klasse verwendet oder eine ihrer Methoden ausführt, wird überprüft, ob der aktuelle Sicherheitskontext über die Berechtigung zum Verwenden der-Klasse oder die Ausführung der-Methode verfügt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-415">When the .NET runtime uses a class or executes one of its methods, it checks to ensure that the current security context has permission to use the class or execute the method.</span></span> <span data-ttu-id="8cb4f-416">Das `PrincipalPermission`-Attribut stellt einen Mechanismus bereit, mit dem diese Regeln definiert werden können.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-416">The `PrincipalPermission` attribute provides a mechanism through which we can define these rules.</span></span>

<span data-ttu-id="8cb4f-417">Im folgenden wird veranschaulicht, wie Sie das `PrincipalPermission`-Attribut für die `SelectedIndexChanged` von GridView und `RowDeleting` Ereignishandler verwenden, um die Ausführung durch anonyme Benutzer und andere Benutzer als Tito zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-417">Let's demonstrate using the `PrincipalPermission` attribute on the GridView's `SelectedIndexChanged` and `RowDeleting` event handlers to prohibit execution by anonymous users and users other than Tito, respectively.</span></span> <span data-ttu-id="8cb4f-418">Wir müssen lediglich das entsprechende Attribut für jede Funktionsdefinition hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-418">All we need to do is add the appropriate attribute atop each function definition:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample22.cs)]

<span data-ttu-id="8cb4f-419">Das-Attribut für den `SelectedIndexChanged`-Ereignishandler legt fest, dass nur authentifizierte Benutzer den Ereignishandler ausführen können, wobei das-Attribut des `RowDeleting`-Ereignis Handlers die Ausführung auf Tito einschränkt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-419">The attribute for the `SelectedIndexChanged` event handler dictates that only authenticated users can execute the event handler, where as the attribute on the `RowDeleting` event handler limits the execution to Tito.</span></span>

<span data-ttu-id="8cb4f-420">Wenn ein anderer Benutzer als Tito versucht, den `RowDeleting` Ereignishandler auszuführen, oder wenn ein nicht authentifizierter Benutzer versucht, den `SelectedIndexChanged`-Ereignishandler auszuführen, gibt die .NET-Laufzeit eine `SecurityException`aus.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-420">If, somehow, a user other than Tito attempts to execute the `RowDeleting` event handler or a non-authenticated user attempts to execute the `SelectedIndexChanged` event handler, the .NET runtime will raise a `SecurityException`.</span></span>

<span data-ttu-id="8cb4f-421">[![wenn der Sicherheitskontext nicht zum Ausführen der Methode autorisiert ist, wird eine SecurityException ausgelöst.](user-based-authorization-cs/_static/image41.png)](user-based-authorization-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-421">[![If the Security Context is not Authorized to Execute the Method, a SecurityException is Thrown](user-based-authorization-cs/_static/image41.png)](user-based-authorization-cs/_static/image40.png)</span></span>

<span data-ttu-id="8cb4f-422">**Abbildung 14**: Wenn der Sicherheitskontext nicht zum Ausführen der Methode autorisiert ist, wird ein `SecurityException` ausgelöst ([Klicken Sie, um das Bild in voller Größe anzuzeigen](user-based-authorization-cs/_static/image42.png)).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-422">**Figure 14**: If the Security Context is not Authorized to Execute the Method, a `SecurityException` is Thrown  ([Click to view full-size image](user-based-authorization-cs/_static/image42.png))</span></span>

> [!NOTE]
> <span data-ttu-id="8cb4f-423">Um mehreren Sicherheits Kontexten den Zugriff auf eine Klasse oder Methode zu gestatten, ergänzen Sie die Klasse oder Methode mit einem `PrincipalPermission`-Attribut für jeden Sicherheitskontext.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-423">To allow multiple security contexts to access a class or method, decorate the class or method with a `PrincipalPermission` attribute for each security context.</span></span> <span data-ttu-id="8cb4f-424">Das heißt, damit sowohl Tito als auch Bruce den `RowDeleting` Ereignishandler ausführen kann, fügen Sie *zwei* `PrincipalPermission` Attribute hinzu:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-424">That is, to allow both Tito and Bruce to execute the `RowDeleting` event handler, add *two* `PrincipalPermission` attributes:</span></span>

[!code-csharp[Main](user-based-authorization-cs/samples/sample23.cs)]

<span data-ttu-id="8cb4f-425">Neben ASP.NET Seiten verfügen viele Anwendungen auch über eine Architektur, die verschiedene Ebenen umfasst, z. b. Geschäftslogik und Datenzugriffsebenen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-425">In addition to ASP.NET pages, many applications also have an architecture that includes various layers, such as Business Logic and Data Access Layers.</span></span> <span data-ttu-id="8cb4f-426">Diese Ebenen werden in der Regel als Klassenbibliotheken implementiert und bieten Klassen und Methoden zum Ausführen von Geschäftslogik-und datenbezogenen Funktionen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-426">These layers are typically implemented as Class Libraries and offer classes and methods for performing business logic- and data-related functionality.</span></span> <span data-ttu-id="8cb4f-427">Das `PrincipalPermission`-Attribut eignet sich zum Anwenden von Autorisierungs Regeln auf diese Ebenen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-427">The `PrincipalPermission` attribute is useful for applying authorization rules to these layers.</span></span>

<span data-ttu-id="8cb4f-428">Weitere Informationen zur Verwendung des `PrincipalPermission`-Attributs zum Definieren von Autorisierungs Regeln für Klassen und Methoden finden Sie im Blogbeitrag von [Scott Guthrie](https://weblogs.asp.net/scottgu/)( [Hinzufügen von Autorisierungs Regeln zu Geschäfts-und Daten Ebenen mit `PrincipalPermissionAttributes`](https://weblogs.asp.net/scottgu/archive/2006/10/04/Tip_2F00_Trick_3A00_-Adding-Authorization-Rules-to-Business-and-Data-Layers-using-PrincipalPermissionAttributes.aspx)).</span><span class="sxs-lookup"><span data-stu-id="8cb4f-428">For more information on using the `PrincipalPermission` attribute to define authorization rules on classes and methods, refer to [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry [Adding Authorization Rules to Business and Data Layers Using `PrincipalPermissionAttributes`](https://weblogs.asp.net/scottgu/archive/2006/10/04/Tip_2F00_Trick_3A00_-Adding-Authorization-Rules-to-Business-and-Data-Layers-using-PrincipalPermissionAttributes.aspx).</span></span>

## <a name="summary"></a><span data-ttu-id="8cb4f-429">Summary</span><span class="sxs-lookup"><span data-stu-id="8cb4f-429">Summary</span></span>

<span data-ttu-id="8cb4f-430">In diesem Tutorial haben wir uns mit dem Anwenden von benutzerbasierten Autorisierungs Regeln beschäftigt.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-430">In this tutorial we looked at how to apply user-based authorization rules.</span></span> <span data-ttu-id="8cb4f-431">Wir haben mit einem Blick auf ASP begonnen. Das URL-Autorisierungs Framework von net.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-431">We started with a look at ASP.NET's URL authorization framework.</span></span> <span data-ttu-id="8cb4f-432">Bei jeder Anforderung überprüft das `UrlAuthorizationModule` der ASP.net-Engine die URL-Autorisierungs Regeln, die in der Konfiguration der Anwendung definiert sind, um zu bestimmen, ob die Identität für den Zugriff auf die angeforderte Ressource autorisiert ist.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-432">On each request, the ASP.NET engine's `UrlAuthorizationModule` inspects the URL authorization rules defined in the application's configuration to determine whether the identity is authorized to access the requested resource.</span></span> <span data-ttu-id="8cb4f-433">Kurz gesagt: die URL-Autorisierung vereinfacht das Angeben von Autorisierungs Regeln für eine bestimmte Seite oder für alle Seiten in einem bestimmten Verzeichnis.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-433">In short, URL authorization makes it easy to specify authorization rules for a specific page or for all pages in a particular directory.</span></span>

<span data-ttu-id="8cb4f-434">Das URL-Autorisierungs Framework wendet Autorisierungs Regeln Seite für Seite an.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-434">The URL authorization framework applies authorization rules on a page-by-page basis.</span></span> <span data-ttu-id="8cb4f-435">Bei der URL-Autorisierung ist entweder die Anforderungs Identität für den Zugriff auf eine bestimmte Ressource autorisiert.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-435">With URL authorization, either the requesting identity is authorized to access a particular resource or not.</span></span> <span data-ttu-id="8cb4f-436">Viele Szenarien erfordern jedoch eine präzisere Autorisierungs Regel.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-436">Many scenarios, however, call for more fine grain authorization rules.</span></span> <span data-ttu-id="8cb4f-437">Anstatt zu definieren, wer auf eine Seite zugreifen darf, müssen wir möglicherweise allen Benutzern den Zugriff auf eine Seite erlauben, um unterschiedliche Daten anzuzeigen oder andere Funktionen anzubieten, je nachdem, welche Benutzer die Seite besuchen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-437">Rather than defining who is permitted to access a page, we may need to let everyone access a page, but to show different data or offer different functionality depending on the user visiting the page.</span></span> <span data-ttu-id="8cb4f-438">Die Autorisierung auf Seitenebene umfasst in der Regel das Ausblenden bestimmter Benutzeroberflächen Elemente, um zu verhindern, dass nicht autorisierte Benutzer auf unzulässige Funktionen zugreifen</span><span class="sxs-lookup"><span data-stu-id="8cb4f-438">Page-level authorization usually involves hiding specific user interface elements in order to prevent unauthorized users from accessing prohibited functionality.</span></span> <span data-ttu-id="8cb4f-439">Außerdem ist es möglich, Attribute zu verwenden, um den Zugriff auf Klassen und die Ausführung ihrer Methoden für bestimmte Benutzer einzuschränken.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-439">Additionally, it is possible to use attributes to restrict access to classes and execution of its methods for certain users.</span></span>

<span data-ttu-id="8cb4f-440">Fröhliche Programmierung!</span><span class="sxs-lookup"><span data-stu-id="8cb4f-440">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="8cb4f-441">Weiterführende Themen</span><span class="sxs-lookup"><span data-stu-id="8cb4f-441">Further Reading</span></span>

<span data-ttu-id="8cb4f-442">Weitere Informationen zu den in diesem Tutorial behandelten Themen finden Sie in den folgenden Ressourcen:</span><span class="sxs-lookup"><span data-stu-id="8cb4f-442">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="8cb4f-443">Hinzufügen von Autorisierungs Regeln zu Geschäfts-und Daten Ebenen mithilfe von `PrincipalPermissionAttributes`</span><span class="sxs-lookup"><span data-stu-id="8cb4f-443">Adding Authorization Rules to Business and Data Layers Using `PrincipalPermissionAttributes`</span></span>](https://weblogs.asp.net/scottgu/archive/2006/10/04/Tip_2F00_Trick_3A00_-Adding-Authorization-Rules-to-Business-and-Data-Layers-using-PrincipalPermissionAttributes.aspx)
- [<span data-ttu-id="8cb4f-444">ASP.NET-Autorisierung</span><span class="sxs-lookup"><span data-stu-id="8cb4f-444">ASP.NET Authorization</span></span>](https://msdn.microsoft.com/library/wce3kxhd.aspx)
- [<span data-ttu-id="8cb4f-445">Änderungen zwischen IIS6-und IIS7-Sicherheit</span><span class="sxs-lookup"><span data-stu-id="8cb4f-445">Changes Between IIS6 and IIS7 Security</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/Changes-between-IIS6-and-IIS7-Security)
- [<span data-ttu-id="8cb4f-446">Konfigurieren bestimmter Dateien und Unterverzeichnisse</span><span class="sxs-lookup"><span data-stu-id="8cb4f-446">Configuring Specific Files and Subdirectories</span></span>](https://msdn.microsoft.com/library/6hbkh9s7.aspx)
- [<span data-ttu-id="8cb4f-447">Einschränken der Daten Änderungs Funktionalität basierend auf dem Benutzer</span><span class="sxs-lookup"><span data-stu-id="8cb4f-447">Limiting Data Modification Functionality Based on the User</span></span>](../../data-access/editing-inserting-and-deleting-data/limiting-data-modification-functionality-based-on-the-user-cs.md)
- [<span data-ttu-id="8cb4f-448">Schnellstarts für LoginView-Steuerelemente</span><span class="sxs-lookup"><span data-stu-id="8cb4f-448">LoginView Control QuickStarts</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/login/loginview.aspx)
- [<span data-ttu-id="8cb4f-449">Grundlegendes zum IIS7 URL Authorization</span><span class="sxs-lookup"><span data-stu-id="8cb4f-449">Understanding IIS7 URL Authorization</span></span>](https://www.iis.net/articles/view.aspx/IIS7/Managing-IIS7/Configuring-Security/URL-Authorization/Understanding-IIS7-URL-Authorization)
- [<span data-ttu-id="8cb4f-450">`UrlAuthorizationModule` technische Dokumentation</span><span class="sxs-lookup"><span data-stu-id="8cb4f-450">`UrlAuthorizationModule` Technical Documentation</span></span>](https://msdn.microsoft.com/library/system.web.security.urlauthorizationmodule.aspx)
- [<span data-ttu-id="8cb4f-451">Arbeiten mit Daten in ASP.NET 2,0</span><span class="sxs-lookup"><span data-stu-id="8cb4f-451">Working with Data in ASP.NET 2.0</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="8cb4f-452">Informationen zum Autor</span><span class="sxs-lookup"><span data-stu-id="8cb4f-452">About the Author</span></span>

<span data-ttu-id="8cb4f-453">Scott Mitchell, Autor mehrerer ASP/ASP. net-Bücher und Gründer von 4GuysFromRolla.com, hat seit 1998 mit Microsoft-Webtechnologien gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-453">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8cb4f-454">Scott arbeitet als unabhängiger Berater, Ausbilder und Writer.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-454">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8cb4f-455">Sein letztes Buch ist *[Sams Teach Yourself ASP.NET 2,0 in 24 Stunden](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)* .</span><span class="sxs-lookup"><span data-stu-id="8cb4f-455">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="8cb4f-456">Scott kann über [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) oder über seinen Blog unter [http://ScottOnWriting.NET](http://scottonwriting.net/)erreicht werden.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-456">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="8cb4f-457">Besonders vielen Dank</span><span class="sxs-lookup"><span data-stu-id="8cb4f-457">Special Thanks To</span></span>

<span data-ttu-id="8cb4f-458">Diese tutorialreihe wurde von vielen hilfreichen Reviewern geprüft.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-458">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8cb4f-459">Möchten Sie meine bevorstehenden MSDN-Artikel überprüfen?</span><span class="sxs-lookup"><span data-stu-id="8cb4f-459">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8cb4f-460">Wenn dies der Fall ist, können Sie eine Zeile in [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)ablegen.</span><span class="sxs-lookup"><span data-stu-id="8cb4f-460">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8cb4f-461">[Zurück](validating-user-credentials-against-the-membership-user-store-cs.md)
> [Weiter](storing-additional-user-information-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8cb4f-461">[Previous](validating-user-credentials-against-the-membership-user-store-cs.md)
[Next](storing-additional-user-information-cs.md)</span></span>
