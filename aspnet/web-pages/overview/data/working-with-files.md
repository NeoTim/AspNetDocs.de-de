---
uid: web-pages/overview/data/working-with-files
title: Arbeiten mit Dateien auf einer ASP.net Web Pages-(Razor-) Website | Microsoft-Dokumentation
author: Rick-Anderson
description: In diesem Kapitel wird erläutert, wie Sie Dateien lesen, schreiben, anfügen, löschen und hochladen.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: eee916e4-ba4c-439a-a24e-68df7d45a569
msc.legacyurl: /web-pages/overview/data/working-with-files
msc.type: authoredcontent
ms.openlocfilehash: 684c47a8a8480dc040e5144144577c94c35d39e5
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78521883"
---
# <a name="working-with-files-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="1ddb6-103">Arbeiten mit Dateien auf einer ASP.net Web Pages-(Razor-) Website</span><span class="sxs-lookup"><span data-stu-id="1ddb6-103">Working with Files in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="1ddb6-104">von [Tom fitzmacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="1ddb6-105">In diesem Artikel wird erläutert, wie Sie Dateien auf einer ASP.net Web Pages (Razor-Website) lesen, schreiben, anfügen, löschen und hochladen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-105">This article explains how to read, write, append, delete, and upload files in an ASP.NET Web Pages (Razor) site.</span></span>
> 
> > [!NOTE]
> > <span data-ttu-id="1ddb6-106">Wenn Sie Bilder hochladen und bearbeiten möchten (z. b. kippen oder Ändern der Größe), finden Sie weitere Informationen unter [Arbeiten mit Images an einer ASP.net Web Pages Website](/aspnet/web-pages/overview/ui-layouts-and-themes/9-working-with-images).</span><span class="sxs-lookup"><span data-stu-id="1ddb6-106">If you want to upload images and manipulate them (for example, flip or resize them), see [Working with Images in an ASP.NET Web Pages Site](/aspnet/web-pages/overview/ui-layouts-and-themes/9-working-with-images).</span></span>
> 
> 
> <span data-ttu-id="1ddb6-107">**Lernen Sie Folgendes:**</span><span class="sxs-lookup"><span data-stu-id="1ddb6-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="1ddb6-108">Es wird erläutert, wie Sie eine Textdatei erstellen und Daten in diese schreiben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-108">How to create a text file and write data to it.</span></span>
> - <span data-ttu-id="1ddb6-109">Informationen zum Anfügen von Daten an eine vorhandene Datei.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-109">How to append data to an existing file.</span></span>
> - <span data-ttu-id="1ddb6-110">Lesen einer Datei und anzeigen aus dieser Datei.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-110">How to read a file and display from it.</span></span>
> - <span data-ttu-id="1ddb6-111">Löschen von Dateien von einer Website.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-111">How to delete files from a website.</span></span>
> - <span data-ttu-id="1ddb6-112">So können Sie Benutzern das Hochladen einer Datei oder mehrerer Dateien ermöglichen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-112">How to let users upload one file or multiple files.</span></span>
> 
> <span data-ttu-id="1ddb6-113">Dies sind die ASP.net-Programmierfunktionen, die im Artikel eingeführt wurden:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="1ddb6-114">Das `File`-Objekt, das eine Möglichkeit zum Verwalten von Dateien bietet.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-114">The `File` object, which provides a way to manage files.</span></span>
> - <span data-ttu-id="1ddb6-115">Das `FileUpload`-Hilfsprogramm.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-115">The `FileUpload` helper.</span></span>
> - <span data-ttu-id="1ddb6-116">Das `Path`-Objekt, das Methoden bereitstellt, mit denen Sie Pfad-und Dateinamen bearbeiten können.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-116">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="1ddb6-117">Im Tutorial verwendete Software Versionen</span><span class="sxs-lookup"><span data-stu-id="1ddb6-117">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="1ddb6-118">ASP.net Web Pages (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="1ddb6-118">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="1ddb6-119">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="1ddb6-119">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="1ddb6-120">Dieses Tutorial funktioniert auch mit webmatrix 3.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-120">This tutorial also works with WebMatrix 3.</span></span>

<a id="Creating_a_Text_File"></a>
## <a name="creating-a-text-file-and-writing-data-to-it"></a><span data-ttu-id="1ddb6-121">Erstellen einer Textdatei und Schreiben von Daten in diese Datei</span><span class="sxs-lookup"><span data-stu-id="1ddb6-121">Creating a Text File and Writing Data to It</span></span>

<span data-ttu-id="1ddb6-122">Sie können nicht nur eine Datenbank auf Ihrer Website verwenden, sondern auch mit Dateien arbeiten.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-122">In addition to using a database in your website, you might work with files.</span></span> <span data-ttu-id="1ddb6-123">Beispielsweise können Sie Textdateien als einfache Methode zum Speichern von Daten für die Website verwenden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-123">For example, you might use text files as a simple way to store data for the site.</span></span> <span data-ttu-id="1ddb6-124">(Eine Textdatei, die zum Speichern von Daten verwendet wird, wird manchmal als *Flatfile*bezeichnet.) Text Dateien können sich in unterschiedlichen Formaten befinden, z. b *. txt*-, *XML*-oder *CSV* -Dateien (durch Trennzeichen getrennte Werte).</span><span class="sxs-lookup"><span data-stu-id="1ddb6-124">(A text file that's used to store data is sometimes called a *flat file*.) Text files can be in different formats, like *.txt*, *.xml*, or *.csv* (comma-delimited values).</span></span>

<span data-ttu-id="1ddb6-125">Wenn Sie Daten in einer Textdatei speichern möchten, können Sie die `File.WriteAllText`-Methode verwenden, um die zu erstellende Datei und die Daten anzugeben, die in die Datei geschrieben werden sollen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-125">If you want to store data in a text file, you can use the `File.WriteAllText` method to specify the file to create and the data to write to it.</span></span> <span data-ttu-id="1ddb6-126">In diesem Verfahren erstellen Sie eine Seite, die ein einfaches Formular mit drei `input` Elementen (Vorname, Nachname und e-Mail-Adresse) und einer Schaltfläche zum **senden** enthält.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-126">In this procedure, you'll create a page that contains a simple form with three `input` elements (first name, last name, and email address) and a **Submit** button.</span></span> <span data-ttu-id="1ddb6-127">Wenn der Benutzer das Formular sendet, speichern Sie die Eingabe des Benutzers in einer Textdatei.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-127">When the user submits the form, you'll store the user's input in a text file.</span></span>

1. <span data-ttu-id="1ddb6-128">Erstellen Sie einen neuen Ordner mit dem Namen *App\_Daten*, wenn dieser noch nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-128">Create a new folder named *App\_Data*, if it doesn't exist already.</span></span>
2. <span data-ttu-id="1ddb6-129">Erstellen Sie im Stammverzeichnis Ihrer Website eine neue Datei mit dem Namen " *UserData. cshtml*".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-129">At the root of your website, create a new file named *UserData.cshtml*.</span></span>
3. <span data-ttu-id="1ddb6-130">Ersetzen Sie den vorhandenen Inhalt durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-130">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample1.cshtml)]

    <span data-ttu-id="1ddb6-131">Das HTML-Markup erstellt das Formular mit den drei Textfeldern.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-131">The HTML markup creates the form with the three text boxes.</span></span> <span data-ttu-id="1ddb6-132">Im Code verwenden Sie die `IsPost`-Eigenschaft, um zu bestimmen, ob die Seite übermittelt wurde, bevor Sie mit der Verarbeitung beginnen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-132">In the code, you use the `IsPost` property to determine whether the page has been submitted before you start processing.</span></span>

    <span data-ttu-id="1ddb6-133">Die erste Aufgabe besteht darin, die Benutzereingaben zu erhalten und Variablen zuzuweisen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-133">The first task is to get the user input and assign it to variables.</span></span> <span data-ttu-id="1ddb6-134">Der Code verkettet dann die Werte der separaten Variablen zu einer durch Trennzeichen getrennten Zeichenfolge, die dann in einer anderen Variablen gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-134">The code then concatenates the values of the separate variables into one comma-delimited string, which is then stored in a different variable.</span></span> <span data-ttu-id="1ddb6-135">Beachten Sie, dass das Komma Trennzeichen eine Zeichenfolge ist, die in Anführungszeichen (",") enthalten ist, da Sie buchstäblich ein Komma in die große Zeichenfolge einbetten, die Sie erstellen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-135">Notice that the comma separator is a string contained in quotation marks (","), because you're literally embedding a comma into the big string that you're creating.</span></span> <span data-ttu-id="1ddb6-136">Am Ende der Daten, die Sie miteinander verketten, fügen Sie `Environment.NewLine`hinzu.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-136">At the end of the data that you concatenate together, you add `Environment.NewLine`.</span></span> <span data-ttu-id="1ddb6-137">Dadurch wird ein Zeilenumbruch (ein Zeilenumbruch Zeichen) hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-137">This adds a line break (a newline character).</span></span> <span data-ttu-id="1ddb6-138">Die Erstellung mit all dieser Verkettung ist eine Zeichenfolge, die wie folgt aussieht:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-138">What you're creating with all this concatenation is a string that looks like this:</span></span>

    [!code-css[Main](working-with-files/samples/sample2.css)]

    <span data-ttu-id="1ddb6-139">(Mit einem unsichtbaren Zeilenumbruch am Ende.)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-139">(With an invisible line break at the end.)</span></span>

    <span data-ttu-id="1ddb6-140">Anschließend erstellen Sie eine Variable (`dataFile`), die den Speicherort und den Namen der Datei enthält, in der die Daten gespeichert werden sollen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-140">You then create a variable (`dataFile`) that contains the location and name of the file to store the data in.</span></span> <span data-ttu-id="1ddb6-141">Das Festlegen des Speicher Orts erfordert eine besondere Behandlung.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-141">Setting the location requires some special handling.</span></span> <span data-ttu-id="1ddb6-142">In Websites ist es eine bewährte Methode, Code auf absolute Pfade wie " *c:\folder\file.txt* " für Dateien auf dem Webserver zu verweisen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-142">In websites, it's a bad practice to refer in code to absolute paths like *C:\Folder\File.txt* for files on the web server.</span></span> <span data-ttu-id="1ddb6-143">Wenn eine Website verschoben wird, ist ein absoluter Pfad falsch.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-143">If a website is moved, an absolute path will be wrong.</span></span> <span data-ttu-id="1ddb6-144">Darüber hinaus wissen Sie für eine gehostete Site (im Gegensatz zu auf Ihrem eigenen Computer) in der Regel nicht einmal, was der richtige Pfad ist, wenn Sie den Code schreiben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-144">Moreover, for a hosted site (as opposed to on your own computer) you typically don't even know what the correct path is when you're writing the code.</span></span>

    <span data-ttu-id="1ddb6-145">Manchmal benötigen Sie jedoch einen kompletten Pfad, um eine Datei zu schreiben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-145">But sometimes (like now, for writing a file) you do need a complete path.</span></span> <span data-ttu-id="1ddb6-146">Die Lösung besteht darin, die `MapPath`-Methode des `Server`-Objekts zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-146">The solution is to use the `MapPath` method of the `Server` object.</span></span> <span data-ttu-id="1ddb6-147">Dadurch wird der gesamte Pfad zu Ihrer Website zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-147">This returns the complete path to your website.</span></span> <span data-ttu-id="1ddb6-148">Wenn Sie den Pfad für den Website Stamm erhalten möchten, können Sie den `~`-Operator (um das virtuelle Stammverzeichnis der Site erneut vorzugeben), um `MapPath`zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-148">To get the path for the website root, you user the `~` operator (to represen the site's virtual root) to `MapPath`.</span></span> <span data-ttu-id="1ddb6-149">(Sie können auch einen Unterordner Namen an ihn übergeben, z. b. *~/App\_Data/* , um den Pfad für diesen Unterordner zu erhalten.) Anschließend können Sie zusätzliche Informationen zu den von der Methode zurückgegebenen Informationen verketten, um einen vollständigen Pfad zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-149">(You can also pass a subfolder name to it, like *~/App\_Data/*, to get the path for that subfolder.) You can then concatenate additional information onto whatever the method returns in order to create a complete path.</span></span> <span data-ttu-id="1ddb6-150">In diesem Beispiel fügen Sie einen Dateinamen hinzu.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-150">In this example, you add a file name.</span></span> <span data-ttu-id="1ddb6-151">(Weitere Informationen zum Arbeiten mit Datei-und Ordner Pfaden finden Sie unter [Einführung in ASP.net Web Pages Programmierung mithilfe der Razor-Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-151">(You can read more about how to work with file and folder paths in [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="1ddb6-152">Die Datei wird im Ordner *App\_Data* gespeichert.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-152">The file is saved in the *App\_Data* folder.</span></span> <span data-ttu-id="1ddb6-153">Dieser Ordner ist ein spezieller Ordner in ASP.net, der zum Speichern von Datendateien verwendet wird, wie unter Einführung in das [Arbeiten mit einer Datenbank an ASP.net Web Pages Websites](https://go.microsoft.com/fwlink/?LinkId=195209)beschrieben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-153">This folder is a special folder in ASP.NET that's used to store data files, as described in [Introduction to Working with a Database in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=195209).</span></span>

    <span data-ttu-id="1ddb6-154">Die `WriteAllText`-Methode des `File`-Objekts schreibt die Daten in die Datei.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-154">The `WriteAllText` method of the `File` object writes the data to the file.</span></span> <span data-ttu-id="1ddb6-155">Diese Methode nimmt zwei Parameter an: den Namen (mit Pfad) der Datei, in die geschrieben werden soll, und die tatsächlich zu schreibenden Daten.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-155">This method takes two parameters: the name (with path) of the file to write to, and the actual data to write.</span></span> <span data-ttu-id="1ddb6-156">Beachten Sie, dass der Name des ersten Parameters ein `@` Zeichen als Präfix aufweist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-156">Notice that the name of the first parameter has an `@` character as a prefix.</span></span> <span data-ttu-id="1ddb6-157">Dies weist ASP.net an, dass Sie einen ausführlichen Zeichenfolgenliteralen bereitstellen und dass Zeichen wie "/" nicht auf besondere Weise interpretiert werden sollten.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-157">This tells ASP.NET that you're providing a verbatim string literal, and that characters like "/" should not be interpreted in special ways.</span></span> <span data-ttu-id="1ddb6-158">(Weitere Informationen finden Sie unter [Einführung in die ASP.net-Webprogrammierung mit der Razor-Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-158">(For more information, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=195205#ID_WorkingWithFileAndFolderPaths).)</span></span>

    > [!NOTE]
    > <span data-ttu-id="1ddb6-159">Damit Ihr Code Dateien im *App-\_Daten* Ordner speichert, benötigt die Anwendung Lese-/Schreibberechtigungen für diesen Ordner.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-159">In order for your code to save files in the *App\_Data* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="1ddb6-160">Auf dem Entwicklungs Computer ist dies in der Regel kein Problem.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-160">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="1ddb6-161">Wenn Sie Ihre Website jedoch auf dem Webserver eines hostinganbieters veröffentlichen, müssen Sie diese Berechtigungen möglicherweise explizit festlegen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-161">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="1ddb6-162">Wenn Sie diesen Code auf dem Server eines hostinganbieters ausführen und Fehler erhalten, wenden Sie sich an den Hostinganbieter, um herauszufinden, wie diese Berechtigungen festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-162">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

- <span data-ttu-id="1ddb6-163">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-163">Run the page in a browser.</span></span> 

    ![](working-with-files/_static/image1.jpg)
- <span data-ttu-id="1ddb6-164">Geben Sie Werte in die Felder ein, und klicken Sie dann auf **senden**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-164">Enter values into the fields and then click **Submit**.</span></span>
- <span data-ttu-id="1ddb6-165">Schließen Sie den Browser.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-165">Close the browser.</span></span>
- <span data-ttu-id="1ddb6-166">Kehren Sie zum Projekt zurück, und aktualisieren Sie die Ansicht.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-166">Return to the project and refresh the view.</span></span>
- <span data-ttu-id="1ddb6-167">Öffnen Sie die Datei " *Data. txt* ".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-167">Open the *data.txt* file.</span></span> <span data-ttu-id="1ddb6-168">Die Daten, die Sie im Formular übermittelt haben, befinden sich in der Datei.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-168">The data you submitted in the form is in the file.</span></span> 

    ![Klang](working-with-files/_static/image2.jpg)
- <span data-ttu-id="1ddb6-170">Schließen Sie die Datei " *Data. txt* ".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-170">Close the *data.txt* file.</span></span>

<a id="Appending_Data"></a>
## <a name="appending-data-to-an-existing-file"></a><span data-ttu-id="1ddb6-171">Anfügen von Daten an eine vorhandene Datei</span><span class="sxs-lookup"><span data-stu-id="1ddb6-171">Appending Data to an Existing File</span></span>

<span data-ttu-id="1ddb6-172">Im vorherigen Beispiel haben Sie `WriteAllText` verwendet, um eine Textdatei zu erstellen, die nur eine Datenquelle hat.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-172">In the previous example, you used `WriteAllText` to create a text file that's got just one piece of data in it.</span></span> <span data-ttu-id="1ddb6-173">Wenn Sie die Methode erneut aufzurufen und denselben Dateinamen übergeben, wird die vorhandene Datei vollständig überschrieben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-173">If you call the method again and pass it the same file name, the existing file is completely overwritten.</span></span> <span data-ttu-id="1ddb6-174">Nachdem Sie jedoch eine Datei erstellt haben, möchten Sie häufig neue Daten am Ende der Datei hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-174">However, after you've created a file you often want to add new data to the end of the file.</span></span> <span data-ttu-id="1ddb6-175">Hierfür können Sie die `AppendAllText`-Methode des `File`-Objekts verwenden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-175">You can do that using the `AppendAllText` method of the `File` object.</span></span>

1. <span data-ttu-id="1ddb6-176">Erstellen Sie auf der Website eine Kopie der Datei " *UserData. cshtml* ", und benennen Sie die Kopie " *userdatamultiple. cshtml*".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-176">In the website, make a copy of the *UserData.cshtml* file and name the copy *UserDataMultiple.cshtml*.</span></span>
2. <span data-ttu-id="1ddb6-177">Ersetzen Sie den Codeblock vor dem öffnenden `<!DOCTYPE html>`-Tag durch den folgenden Codeblock:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-177">Replace the code block before the opening `<!DOCTYPE html>` tag with the following code block:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample3.cshtml)]

    <span data-ttu-id="1ddb6-178">Dieser Code weist eine Änderung im vorherigen Beispiel auf.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-178">This code has one change in it from the previous example.</span></span> <span data-ttu-id="1ddb6-179">Anstatt `WriteAllText`zu verwenden, wird `the AppendAllText` Methode verwendet.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-179">Instead of using `WriteAllText`, it uses `the AppendAllText` method.</span></span> <span data-ttu-id="1ddb6-180">Die Methoden sind ähnlich, mit dem Unterschied, dass `AppendAllText` die Daten am Ende der Datei hinzufügt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-180">The methods are similar, except that `AppendAllText` adds the data to the end of the file.</span></span> <span data-ttu-id="1ddb6-181">Wie bei `WriteAllText`erstellt `AppendAllText` die Datei, wenn Sie nicht bereits vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-181">As with `WriteAllText`, `AppendAllText` creates the file if it doesn't already exist.</span></span>
3. <span data-ttu-id="1ddb6-182">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-182">Run the page in a browser.</span></span>
4. <span data-ttu-id="1ddb6-183">Geben Sie Werte für die Felder ein, und klicken Sie dann auf **senden**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-183">Enter values for the fields and then click **Submit**.</span></span>
5. <span data-ttu-id="1ddb6-184">Fügen Sie weitere Daten hinzu, und senden Sie das Formular erneut.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-184">Add more data and submit the form again.</span></span>
6. <span data-ttu-id="1ddb6-185">Kehren Sie zum Projekt zurück, klicken Sie mit der rechten Maustaste auf den Projektordner, und klicken Sie dann auf **Aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-185">Return to your project, right-click the project folder, and then click **Refresh**.</span></span>
7. <span data-ttu-id="1ddb6-186">Öffnen Sie die Datei " *Data. txt* ".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-186">Open the *data.txt* file.</span></span> <span data-ttu-id="1ddb6-187">Sie enthält jetzt die neuen Daten, die Sie soeben eingegeben haben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-187">It now contains the new data that you just entered.</span></span> 

    ![Klang](working-with-files/_static/image3.jpg)

<a id="Reading_and_Displaying_Data"></a>
## <a name="reading-and-displaying-data-from-a-file"></a><span data-ttu-id="1ddb6-189">Lesen und Anzeigen von Daten aus einer Datei</span><span class="sxs-lookup"><span data-stu-id="1ddb6-189">Reading and Displaying Data from a File</span></span>

<span data-ttu-id="1ddb6-190">Auch wenn Sie keine Daten in eine Textdatei schreiben müssen, müssen Sie möglicherweise manchmal Daten aus einer Datei lesen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-190">Even if you don't need to write data to a text file, you'll probably sometimes need to read data from one.</span></span> <span data-ttu-id="1ddb6-191">Zu diesem Zweck können Sie das `File`-Objekt wieder verwenden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-191">To do this, you can again use the `File` object.</span></span> <span data-ttu-id="1ddb6-192">Sie können das `File`-Objekt verwenden, um jede Zeile einzeln (durch Zeilenumbrüche getrennt) zu lesen oder um einzelne Elemente unabhängig davon zu lesen, wie Sie getrennt sind.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-192">You can use the `File` object to read each line individually (separated by line breaks) or to read individual item no matter how they're separated.</span></span>

<span data-ttu-id="1ddb6-193">In diesem Verfahren wird gezeigt, wie Sie die Daten lesen und anzeigen, die Sie im vorherigen Beispiel erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-193">This procedure shows you how to read and display the data that you created in the previous example.</span></span>

1. <span data-ttu-id="1ddb6-194">Erstellen Sie im Stammverzeichnis Ihrer Website eine neue Datei mit dem Namen " *displayData. cshtml*".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-194">At the root of your website, create a new file named *DisplayData.cshtml*.</span></span>
2. <span data-ttu-id="1ddb6-195">Ersetzen Sie den vorhandenen Inhalt durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-195">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample4.cshtml)]

    <span data-ttu-id="1ddb6-196">Der Code beginnt mit dem Lesen der im vorherigen Beispiel erstellten Datei in eine Variable namens `userData`mithilfe dieses Methoden Aufrufes:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-196">The code starts by reading the file that you created in the previous example into a variable named `userData`, using this method call:</span></span>

    [!code-css[Main](working-with-files/samples/sample5.css)]

    <span data-ttu-id="1ddb6-197">Der Code hierfür ist innerhalb einer `if`-Anweisung.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-197">The code to do this is inside an `if` statement.</span></span> <span data-ttu-id="1ddb6-198">Wenn Sie eine Datei lesen möchten, empfiehlt es sich, die `File.Exists`-Methode zu verwenden, um zuerst festzustellen, ob die Datei verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-198">When you want to read a file, it's a good idea to use the `File.Exists` method to determine first whether the file is available.</span></span> <span data-ttu-id="1ddb6-199">Der Code überprüft außerdem, ob die Datei leer ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-199">The code also checks whether the file is empty.</span></span>

    <span data-ttu-id="1ddb6-200">Der Text der Seite enthält zwei `foreach` Schleifen, von denen eine in der anderen geschachtelt ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-200">The body of the page contains two `foreach` loops, one nested inside the other.</span></span> <span data-ttu-id="1ddb6-201">Die äußere `foreach` Schleife erhält jeweils eine Zeile aus der Datendatei.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-201">The outer `foreach` loop gets one line at a time from the data file.</span></span> <span data-ttu-id="1ddb6-202">In diesem Fall werden die Zeilen in der Datei &#8212; durch Zeilenumbrüche definiert, d. h., jedes Datenelement befindet sich in einer eigenen Zeile.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-202">In this case, the lines are defined by line breaks in the file &#8212; that is, each data item is on its own line.</span></span> <span data-ttu-id="1ddb6-203">Die äußere Schleife erstellt ein neues Element (`<li>`-Element) in einer geordneten Liste (`<ol>`-Element).</span><span class="sxs-lookup"><span data-stu-id="1ddb6-203">The outer loop creates a new item (`<li>` element) inside an ordered list (`<ol>` element).</span></span>

    <span data-ttu-id="1ddb6-204">Die innere Schleife teilt jede Daten Zeile mithilfe eines Kommas als Trennzeichen in Elemente (Felder).</span><span class="sxs-lookup"><span data-stu-id="1ddb6-204">The inner loop splits each data line into items (fields) using a comma as a delimiter.</span></span> <span data-ttu-id="1ddb6-205">(Auf der Grundlage des vorherigen Beispiels bedeutet dies, dass jede Zeile drei Felder &#8212; mit dem Vornamen, Nachnamen und der e-Mail-Adresse enthält, die jeweils durch ein Komma getrennt sind.) Die innere Schleife erstellt außerdem eine `<ul>` Liste und zeigt ein Listenelement für jedes Feld in der Daten Zeile an.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-205">(Based on the previous example, this means that each line contains three fields &#8212; the first name, last name, and email address, each separated by a comma.) The inner loop also creates a `<ul>` list and displays one list item for each field in the data line.</span></span>

    <span data-ttu-id="1ddb6-206">Der Code veranschaulicht, wie zwei Datentypen verwendet werden, ein Array und der `char` Datentyp.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-206">The code illustrates how to use two data types, an array and the `char` data type.</span></span> <span data-ttu-id="1ddb6-207">Das Array ist erforderlich, da die `File.ReadAllLines`-Methode Daten als Array zurückgibt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-207">The array is required because the `File.ReadAllLines` method returns data as an array.</span></span> <span data-ttu-id="1ddb6-208">Der `char`-Datentyp ist erforderlich, da die `Split`-Methode eine `array` zurückgibt, in der jedes Element vom Typ `char`ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-208">The `char` data type is required because the `Split` method returns an `array` in which each element is of the type `char`.</span></span> <span data-ttu-id="1ddb6-209">(Informationen zu Arrays finden Sie unter [Einführung in die ASP.net-Webprogrammierung mithilfe der Razor-Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-209">(For information about arrays, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_CollectionsAndObjects).)</span></span>
3. <span data-ttu-id="1ddb6-210">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-210">Run the page in a browser.</span></span> <span data-ttu-id="1ddb6-211">Die Daten, die Sie für die vorherigen Beispiele eingegeben haben, werden angezeigt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-211">The data you entered for the previous examples is displayed.</span></span> 

    ![Klang](working-with-files/_static/image4.jpg)

> [!TIP] 
> 
> <span data-ttu-id="1ddb6-213">**Anzeigen von Daten aus einer durch Trennzeichen getrennten Microsoft Excel-Datei**</span><span class="sxs-lookup"><span data-stu-id="1ddb6-213">**Displaying Data from a Microsoft Excel Comma-Delimited File**</span></span>
> 
> <span data-ttu-id="1ddb6-214">Sie können Microsoft Excel verwenden, um die in einer Kalkulations Tabelle enthaltenen Daten als durch Trennzeichen getrennte Datei (*CSV* -Datei) zu speichern.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-214">You can use Microsoft Excel to save the data contained in a spreadsheet as a comma-delimited file (*.csv* file).</span></span> <span data-ttu-id="1ddb6-215">Wenn Sie dies tun, wird die Datei im nur-Text-Format gespeichert, nicht im Excel-Format.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-215">When you do, the file is saved in plain text, not in Excel format.</span></span> <span data-ttu-id="1ddb6-216">Jede Zeile in der Tabelle wird durch einen Zeilenumbruch in der Textdatei getrennt, und jedes Datenelement wird durch ein Komma getrennt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-216">Each row in the spreadsheet is separated by a line break in the text file, and each data item is separated by a comma.</span></span> <span data-ttu-id="1ddb6-217">Sie können den im vorherigen Beispiel gezeigten Code verwenden, um eine durch Kommas getrennte Excel-Datei zu lesen, indem Sie einfach den Namen der Datendatei im Code ändern.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-217">You can use the code shown in the previous example to read an Excel comma-delimited file just by changing the name of the data file in your code.</span></span>

<a id="Deleting_Files"></a>
## <a name="deleting-files"></a><span data-ttu-id="1ddb6-218">Löschen von Dateien</span><span class="sxs-lookup"><span data-stu-id="1ddb6-218">Deleting Files</span></span>

<span data-ttu-id="1ddb6-219">Zum Löschen von Dateien von Ihrer Website können Sie die `File.Delete`-Methode verwenden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-219">To delete files from your website, you can use the `File.Delete` method.</span></span> <span data-ttu-id="1ddb6-220">In diesem Verfahren wird gezeigt, wie Sie es Benutzern ermöglichen, ein Image (*JPG* -Datei) aus einem Ordner " *Images* " zu löschen, wenn Sie den Namen der Datei kennen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-220">This procedure shows how to let users delete an image (*.jpg* file) from an *images* folder if they know the name of the file.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="1ddb6-221">**Wichtig** In einer Produktions Website beschränken Sie in der Regel, wer Änderungen an den Daten vornehmen darf.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-221">**Important** In a production website, you typically restrict who's allowed to make changes to the data.</span></span> <span data-ttu-id="1ddb6-222">Informationen zum Einrichten der Mitgliedschaft und zu Methoden zum Autorisieren von Benutzern für die Ausführung von Aufgaben auf dem Standort finden Sie unter [Hinzufügen von Sicherheit und Mitgliedschaft zu einem ASP.net Web Pages-Standort](https://go.microsoft.com/fwlink/?LinkId=202904).</span><span class="sxs-lookup"><span data-stu-id="1ddb6-222">For information about how to set up membership and about ways to authorize users to perform tasks on the site, see [Adding Security and Membership to an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202904).</span></span>

1. <span data-ttu-id="1ddb6-223">Erstellen Sie auf der Website einen Unterordner mit dem Namen *Images*.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-223">In the website, create a subfolder named *images*.</span></span>
2. <span data-ttu-id="1ddb6-224">Kopieren Sie mindestens eine *JPG* -Datei in den Ordner *Images* .</span><span class="sxs-lookup"><span data-stu-id="1ddb6-224">Copy one or more *.jpg* files into the *images* folder.</span></span>
3. <span data-ttu-id="1ddb6-225">Erstellen Sie im Stammverzeichnis der Website eine neue Datei mit dem Namen " *filedelete. cshtml*".</span><span class="sxs-lookup"><span data-stu-id="1ddb6-225">In the root of the website, create a new file named *FileDelete.cshtml*.</span></span>
4. <span data-ttu-id="1ddb6-226">Ersetzen Sie den vorhandenen Inhalt durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-226">Replace the existing content with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample6.cshtml)]

    <span data-ttu-id="1ddb6-227">Diese Seite enthält ein Formular, in dem Benutzer den Namen einer Bilddatei eingeben können.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-227">This page contains a form where users can enter the name of an image file.</span></span> <span data-ttu-id="1ddb6-228">Sie geben die Dateinamenerweiterung *. jpg* nicht ein. indem Sie den Dateinamen auf diese Weise einschränken, verhindern Sie, dass Benutzer beliebige Dateien auf Ihrer Website löschen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-228">They don't enter the *.jpg* file-name extension; by restricting the file name like this, you help prevents users from deleting arbitrary files on your site.</span></span>

    <span data-ttu-id="1ddb6-229">Der Code liest den Dateinamen, den der Benutzer eingegeben hat, und erstellt dann einen kompletten Pfad.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-229">The code reads the file name that the user has entered and then constructs a complete path.</span></span> <span data-ttu-id="1ddb6-230">Um den Pfad zu erstellen, verwendet der Code den aktuellen Website Pfad (wie von der `Server.MapPath`-Methode zurückgegeben), den Ordnernamen des *Images* , den Namen, den der Benutzer bereitgestellt hat, und ". jpg" als Literalzeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-230">To create the path, the code uses the current website path (as returned by the `Server.MapPath` method), the *images* folder name, the name that the user has provided, and ".jpg" as a literal string.</span></span>

    <span data-ttu-id="1ddb6-231">Um die Datei zu löschen, ruft der Code die `File.Delete`-Methode auf und übergibt dabei den vollständigen Pfad, den Sie soeben erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-231">To delete the file, the code calls the `File.Delete` method, passing it the full path that you just constructed.</span></span> <span data-ttu-id="1ddb6-232">Am Ende des Markups zeigt der Code eine Bestätigungsmeldung an, dass die Datei gelöscht wurde.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-232">At the end of the markup, code displays a confirmation message that the file was deleted.</span></span>
5. <span data-ttu-id="1ddb6-233">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-233">Run the page in a browser.</span></span> 

    ![Klang](working-with-files/_static/image5.jpg)
6. <span data-ttu-id="1ddb6-235">Geben Sie den Namen der zu löschenden Datei ein, und klicken Sie dann auf **senden**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-235">Enter the name of the file to delete and then click **Submit**.</span></span> <span data-ttu-id="1ddb6-236">Wenn die Datei gelöscht wurde, wird der Name der Datei am unteren Rand der Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-236">If the file was deleted, the name of the file is displayed at the bottom of the page.</span></span>

<a id="Letting_Users_Upload_a_File"></a>
## <a name="letting-users-upload-a-file"></a><span data-ttu-id="1ddb6-237">Zulassen, dass Benutzer eine Datei hochladen</span><span class="sxs-lookup"><span data-stu-id="1ddb6-237">Letting Users Upload a File</span></span>

<span data-ttu-id="1ddb6-238">Mit dem `FileUpload`-Hilfsprogramm können Benutzer Dateien auf Ihre Website hochladen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-238">The `FileUpload` helper lets users upload files to your website.</span></span> <span data-ttu-id="1ddb6-239">Das folgende Verfahren zeigt, wie Sie es Benutzern ermöglichen können, eine einzelne Datei hochzuladen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-239">The procedure below shows you how to let users upload a single file.</span></span>

1. <span data-ttu-id="1ddb6-240">Fügen Sie die ASP.net-webhilfsbibliothek Ihrer Website hinzu, wie unter [Installieren von Hilfsprogrammen an einer ASP.net Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372)beschrieben, wenn Sie Sie noch nicht hinzugefügt haben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-240">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you didn't add it previously.</span></span>
2. <span data-ttu-id="1ddb6-241">Erstellen Sie im Ordner *App\_Data* einen neuen Ordner, und nennen Sie ihn *UploadedFiles*.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-241">In the *App\_Data* folder, create a new a folder and name it *UploadedFiles*.</span></span>
3. <span data-ttu-id="1ddb6-242">Erstellen Sie im Stammverzeichnis eine neue Datei mit dem Namen *FileUpload. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-242">In the root, create a new file named *FileUpload.cshtml*.</span></span>
4. <span data-ttu-id="1ddb6-243">Ersetzen Sie den vorhandenen Inhalt auf der Seite durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-243">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](working-with-files/samples/sample7.cshtml)]

    <span data-ttu-id="1ddb6-244">Der Textteil der Seite verwendet das `FileUpload`-Hilfsprogramm, um das uploadfeld und die Schaltflächen zu erstellen, mit denen Sie wahrscheinlich vertraut sind:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-244">The body portion of the page uses the `FileUpload` helper to create the upload box and buttons that you're probably familiar with:</span></span>

    ![Klang](working-with-files/_static/image6.jpg)

    <span data-ttu-id="1ddb6-246">Die Eigenschaften, die Sie für das `FileUpload`-Hilfsprogramm festlegen, geben an, dass ein einzelnes Feld für die Datei hochgeladen werden soll und dass die Schaltfläche "Senden" den **Upload**lesen soll.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-246">The properties that you set for the `FileUpload` helper specify that you want a single box for the file to upload and that you want the submit button to read **Upload**.</span></span> <span data-ttu-id="1ddb6-247">(Weitere Felder werden später in diesem Artikel hinzugefügt.)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-247">(You'll add more boxes later in the article.)</span></span>

    <span data-ttu-id="1ddb6-248">Wenn der Benutzer auf **hochladen**klickt, ruft der Code am oberen Rand der Seite die Datei ab und speichert Sie.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-248">When the user clicks **Upload**, the code at the top of the page gets the file and saves it.</span></span> <span data-ttu-id="1ddb6-249">Das `Request` Objekt, das Sie normalerweise zum erhalten von Werten aus Formularfeldern verwenden, verfügt auch über ein `Files` Array, das die hochgeladenen Dateien (oder Dateien) enthält.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-249">The `Request` object that you normally use to get values from form fields also has a `Files` array that contains the file (or files) that have been uploaded.</span></span> <span data-ttu-id="1ddb6-250">Sie können einzelne Dateien aus bestimmten Positionen im Array &#8212; abgleichen, um beispielsweise die erste hochgeladene Datei zu erhalten. Sie erhalten `Request.Files[0]`, um die zweite Datei zu erhalten, `Request.Files[1]`und so weiter.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-250">You can get individual files out of specific positions in the array &#8212; for example, to get the first uploaded file, you get `Request.Files[0]`, to get the second file, you get `Request.Files[1]`, and so on.</span></span> <span data-ttu-id="1ddb6-251">(Beachten Sie, dass beim Programmieren die Zählung in der Regel bei Null beginnt.)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-251">(Remember that in programming, counting usually starts at zero.)</span></span>

    <span data-ttu-id="1ddb6-252">Wenn Sie eine hochgeladene Datei abrufen, platzieren Sie Sie in einer Variablen (hier `uploadedFile`), damit Sie Sie bearbeiten können.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-252">When you fetch an uploaded file, you put it in a variable (here, `uploadedFile`) so that you can manipulate it.</span></span> <span data-ttu-id="1ddb6-253">Zum Ermitteln des Namens der hochgeladenen Datei erhalten Sie einfach die `FileName`-Eigenschaft.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-253">To determine the name of the uploaded file, you just get its `FileName` property.</span></span> <span data-ttu-id="1ddb6-254">Wenn der Benutzer jedoch eine Datei hochlädt, enthält `FileName` den ursprünglichen Namen des Benutzers, der den gesamten Pfad enthält.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-254">However, when the user uploads a file, `FileName` contains the user's original name, which includes the entire path.</span></span> <span data-ttu-id="1ddb6-255">Dies könnte wie folgt aussehen:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-255">It might look like this:</span></span>

    <span data-ttu-id="1ddb6-256">*C:\users\public\sample.txt*</span><span class="sxs-lookup"><span data-stu-id="1ddb6-256">*C:\Users\Public\Sample.txt*</span></span>

    <span data-ttu-id="1ddb6-257">Sie möchten jedoch nicht alle Pfadinformationen, da dies der Pfad auf dem Computer des Benutzers ist, nicht auf Ihrem Server.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-257">You don't want all that path information, though, because that's the path on the user's computer, not for your server.</span></span> <span data-ttu-id="1ddb6-258">Sie möchten nur den eigentlichen Dateinamen (*Sample. txt*).</span><span class="sxs-lookup"><span data-stu-id="1ddb6-258">You just want the actual file name (*Sample.txt*).</span></span> <span data-ttu-id="1ddb6-259">Sie können nur die Datei aus einem Pfad entfernen, indem Sie die `Path.GetFileName`-Methode wie folgt verwenden:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-259">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample8.cs)]

    <span data-ttu-id="1ddb6-260">Das `Path`-Objekt ist ein Hilfsprogramm, das über eine Reihe von Methoden verfügt, die Sie zum Entfernen von Pfaden, Kombinieren von Pfaden usw. verwenden können.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-260">The `Path` object is a utility that has a number of methods like this that you can use to strip paths, combine paths, and so on.</span></span>

    <span data-ttu-id="1ddb6-261">Nachdem Sie den Namen der hochgeladenen Datei erhalten haben, können Sie einen neuen Pfad erstellen, in dem Sie die hochgeladene Datei auf Ihrer Website speichern möchten.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-261">Once you've gotten the name of the uploaded file, you can build a new path for where you want to store the uploaded file in your website.</span></span> <span data-ttu-id="1ddb6-262">In diesem Fall kombinieren Sie `Server.MapPath`, die Ordnernamen (*App\_Data/UploadedFiles*) und den neu entfernen Dateinamen, um einen neuen Pfad zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-262">In this case, you combine `Server.MapPath`, the folder names (*App\_Data/UploadedFiles*), and the newly stripped file name to create a new path.</span></span> <span data-ttu-id="1ddb6-263">Sie können dann die `SaveAs`-Methode der hochgeladenen Datei aufzurufen, um die Datei zu speichern.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-263">You can then call the uploaded file's `SaveAs` method to actually save the file.</span></span>
5. <span data-ttu-id="1ddb6-264">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-264">Run the page in a browser.</span></span> 

    ![Klang](working-with-files/_static/image7.jpg)
6. <span data-ttu-id="1ddb6-266">Klicken Sie auf **Durchsuchen** , und wählen Sie eine Datei zum Hochladen aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-266">Click **Browse** and then select a file to upload.</span></span> 

    ![Klang](working-with-files/_static/image8.jpg)

    <span data-ttu-id="1ddb6-268">Das Textfeld neben der Schaltfläche **Durchsuchen** enthält den Pfad und den Datei Speicherort.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-268">The text box next to the **Browse** button will contain the path and file location.</span></span>

    ![Klang](working-with-files/_static/image9.jpg)
7. <span data-ttu-id="1ddb6-270">Klicken Sie auf **Hochladen**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-270">Click **Upload**.</span></span>
8. <span data-ttu-id="1ddb6-271">Klicken Sie auf der Website mit der rechten Maustaste auf den Projektordner, und klicken Sie dann auf **Aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-271">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="1ddb6-272">Öffnen Sie den Ordner *UploadedFiles* .</span><span class="sxs-lookup"><span data-stu-id="1ddb6-272">Open the *UploadedFiles* folder.</span></span> <span data-ttu-id="1ddb6-273">Die Datei, die Sie hochgeladen haben, befindet sich im Ordner.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-273">The file that you uploaded is in the folder.</span></span> 

    ![Klang](working-with-files/_static/image10.jpg)

<a id="Letting_Users_Upload_Multiple_Files"></a>
## <a name="letting-users-upload-multiple-files"></a><span data-ttu-id="1ddb6-275">Zulassen, dass Benutzer mehrere Dateien hochladen</span><span class="sxs-lookup"><span data-stu-id="1ddb6-275">Letting Users Upload Multiple Files</span></span>

<span data-ttu-id="1ddb6-276">Im vorherigen Beispiel können Benutzer eine Datei hochladen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-276">In the previous example, you let users upload one file.</span></span> <span data-ttu-id="1ddb6-277">Sie können jedoch die `FileUpload`-Hilfsprogramm verwenden, um mehrere Dateien gleichzeitig hochzuladen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-277">But you can use the `FileUpload` helper to upload more than one file at a time.</span></span> <span data-ttu-id="1ddb6-278">Dies ist praktisch für Szenarien wie das Hochladen von Fotos, bei denen das Hochladen einer Datei zu einem Zeitpunkt mühsam ist.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-278">This is handy for scenarios like uploading photos, where uploading one file at a time is tedious.</span></span> <span data-ttu-id="1ddb6-279">(Informationen zum Hochladen von Fotos bei der [Arbeit mit Bildern finden Sie auf einer ASP.net Web Pages-Website](https://go.microsoft.com/fwlink/?LinkId=202897).) In diesem Beispiel wird gezeigt, wie Sie es den Benutzern ermöglichen, zwei gleichzeitig hochzuladen. Sie können jedoch auch das gleiche Verfahren verwenden, um mehr als das hochzuladen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-279">(You can read about uploading photos in [Working with Images in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=202897).) This example shows how to let users upload two at a time, although you can use the same technique to upload more than that.</span></span>

1. <span data-ttu-id="1ddb6-280">Fügen Sie die ASP.net-webhilfsbibliothek Ihrer Website hinzu, wie unter [Installieren von Hilfsprogrammen an einer ASP.net Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372)beschrieben, falls Sie dies noch nicht getan haben.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-280">Add the ASP.NET Web Helpers Library to your website as described in [Installing Helpers in an ASP.NET Web Pages Site](https://go.microsoft.com/fwlink/?LinkId=252372), if you haven't already.</span></span>
2. <span data-ttu-id="1ddb6-281">Erstellen Sie eine neue Seite mit dem Namen *fileuploadmultiple. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-281">Create a new page named *FileUploadMultiple.cshtml*.</span></span>
3. <span data-ttu-id="1ddb6-282">Ersetzen Sie den vorhandenen Inhalt auf der Seite durch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-282">Replace the existing content in the page with the following:</span></span>  

    [!code-cshtml[Main](working-with-files/samples/sample9.cshtml)]

    <span data-ttu-id="1ddb6-283">In diesem Beispiel ist das `FileUpload`-Hilfsprogramm im Text der Seite so konfiguriert, dass Benutzer standardmäßig zwei Dateien hochladen können.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-283">In this example, the `FileUpload` helper in the body of the page is configured to let users upload two files by default.</span></span> <span data-ttu-id="1ddb6-284">Da `allowMoreFilesToBeAdded` auf `true`festgelegt ist, rendert das Hilfsprogramm einen Link, mit dem Benutzer weitere Uploadfelder hinzufügen können:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-284">Because `allowMoreFilesToBeAdded` is set to `true`, the helper renders a link that lets user add more upload boxes:</span></span>

    ![Klang](working-with-files/_static/image11.jpg)

    <span data-ttu-id="1ddb6-286">Zum Verarbeiten der Dateien, die der Benutzer hochlädt, verwendet der Code die gleiche grundlegende Technik, die Sie im &#8212; vorherigen Beispiel verwendet haben, um eine Datei aus `Request.Files` zu erhalten und dann zu speichern.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-286">To process the files that the user uploads, the code uses the same basic technique that you used in the previous example &#8212; get a file from `Request.Files` and then save it.</span></span> <span data-ttu-id="1ddb6-287">(Einschließlich der verschiedenen Dinge, die Sie tun müssen, um den richtigen Dateinamen und-Pfad zu erhalten.) Die Innovation ist dieses Mal, dass der Benutzer möglicherweise mehrere Dateien hochlädt, und Sie wissen nicht viele.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-287">(Including the various things you need to do to get the right file name and path.) The innovation this time is that the user might be uploading multiple files and you don't know many.</span></span> <span data-ttu-id="1ddb6-288">Um dies zu ermitteln, können Sie `Request.Files.Count`abrufen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-288">To find out, you can get `Request.Files.Count`.</span></span>

    <span data-ttu-id="1ddb6-289">Mit dieser Zahl können Sie durch `Request.Files`Schleifen, jede Datei abrufen und speichern.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-289">With this number in hand, you can loop through `Request.Files`, fetch each file in turn, and save it.</span></span> <span data-ttu-id="1ddb6-290">Wenn Sie eine Reihe bekannter Zeiten durch eine Auflistung Schleifen möchten, können Sie wie folgt eine `for`-Schleife verwenden:</span><span class="sxs-lookup"><span data-stu-id="1ddb6-290">When you want to loop a known number of times through a collection, you can use a `for` loop, like this:</span></span>

    [!code-csharp[Main](working-with-files/samples/sample10.cs)]

    <span data-ttu-id="1ddb6-291">Die Variable `i` ist nur ein temporärer Wert, der von 0 (null) zu der von Ihnen festgelegten Obergrenze wechselt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-291">The variable `i` is just a temporary counter that will go from zero to whatever upper limit you set.</span></span> <span data-ttu-id="1ddb6-292">In diesem Fall ist die Obergrenze die Anzahl von Dateien.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-292">In this case, the upper limit is the number of files.</span></span> <span data-ttu-id="1ddb6-293">Aber da der Zähler bei Null beginnt, wie es für das zählen von Szenarien in ASP.net typisch ist, ist die Obergrenze tatsächlich ein kleiner als die Dateianzahl.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-293">But because the counter starts at zero, as is typical for counting scenarios in ASP.NET, the upper limit is actually one less than the file count.</span></span> <span data-ttu-id="1ddb6-294">(Wenn drei Dateien hochgeladen werden, ist die Anzahl 0 (null) bis 2.)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-294">(If three files are uploaded, the count is zero to 2.)</span></span>

    <span data-ttu-id="1ddb6-295">Die `uploadedCount` Variable umfasst alle Dateien, die erfolgreich hochgeladen und gespeichert wurden.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-295">The `uploadedCount` variable totals all the files that are successfully uploaded and saved.</span></span> <span data-ttu-id="1ddb6-296">Mit diesem Code wird die Möglichkeit berücksichtigt, dass eine erwartete Datei möglicherweise nicht hochgeladen werden kann.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-296">This code accounts for the possibility that an expected file may not be able to be uploaded.</span></span>
4. <span data-ttu-id="1ddb6-297">Führen Sie die Seite in einem Browser aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-297">Run the page in a browser.</span></span> <span data-ttu-id="1ddb6-298">Der Browser zeigt die Seite und die beiden Upload-Felder an.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-298">The browser displays the page and its two upload boxes.</span></span>
5. <span data-ttu-id="1ddb6-299">Wählen Sie zwei hoch zuladende Dateien aus.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-299">Select two files to upload.</span></span>
6. <span data-ttu-id="1ddb6-300">Klicken Sie auf **weitere Datei hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-300">Click **Add another file**.</span></span> <span data-ttu-id="1ddb6-301">Auf der Seite wird ein neues uploadfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-301">The page displays a new upload box.</span></span> 

    ![Klang](working-with-files/_static/image12.jpg)
7. <span data-ttu-id="1ddb6-303">Klicken Sie auf **Hochladen**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-303">Click **Upload**.</span></span>
8. <span data-ttu-id="1ddb6-304">Klicken Sie auf der Website mit der rechten Maustaste auf den Projektordner, und klicken Sie dann auf **Aktualisieren**.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-304">In the website, right-click the project folder and then click **Refresh**.</span></span>
9. <span data-ttu-id="1ddb6-305">Öffnen Sie den Ordner *UploadedFiles* , um die erfolgreich hochgeladenen Dateien anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="1ddb6-305">Open the *UploadedFiles* folder to see the successfully uploaded files.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="1ddb6-306">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="1ddb6-306">Additional Resources</span></span>

[<span data-ttu-id="1ddb6-307">Arbeiten mit Images an einer ASP.net Web Pages Site</span><span class="sxs-lookup"><span data-stu-id="1ddb6-307">Working with Images in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202897)

[<span data-ttu-id="1ddb6-308">Exporting to a CSV File (Exportieren als CSV-Datei)</span><span class="sxs-lookup"><span data-stu-id="1ddb6-308">Exporting to a CSV File</span></span>](https://msdn.microsoft.com/library/ms155919.aspx)
