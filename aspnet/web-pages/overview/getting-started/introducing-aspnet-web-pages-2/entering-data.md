---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Einführung in ASP.net Web Pages die Eingabe von Datenbankdaten mithilfe von Formularen | Microsoft-Dokumentation
author: Rick-Anderson
description: In diesem Tutorial wird gezeigt, wie Sie ein Eingabeformular erstellen und dann die Daten, die Sie aus dem Formular erhalten, in eine Datenbanktabelle eingeben, wenn Sie ASP.net Web Pages (...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78506601"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="6373a-103">Einführung in ASP.net Web Pages Datenbankdaten mithilfe von Formularen</span><span class="sxs-lookup"><span data-stu-id="6373a-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="6373a-104">von [Tom fitzmacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="6373a-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="6373a-105">In diesem Tutorial wird gezeigt, wie Sie ein Eingabeformular erstellen und dann die Daten, die Sie aus dem Formular erhalten, in eine Datenbanktabelle eingeben, wenn Sie ASP.net Web Pages (Razor) verwenden.</span><span class="sxs-lookup"><span data-stu-id="6373a-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="6373a-106">Dabei wird davon ausgegangen, dass Sie die Reihe durch [Grundlagen von HTML-Formularen in ASP.net Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581)abgeschlossen haben.</span><span class="sxs-lookup"><span data-stu-id="6373a-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="6373a-107">Sie lernen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="6373a-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="6373a-108">Weitere Informationen zum Verarbeiten von Eingabe Formularen.</span><span class="sxs-lookup"><span data-stu-id="6373a-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="6373a-109">Vorgehensweise beim Hinzufügen (einfügen) von Daten in einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="6373a-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="6373a-110">Stellen Sie sicher, dass Benutzer einen erforderlichen Wert in einem Formular eingegeben haben (Überprüfen von Benutzereingaben).</span><span class="sxs-lookup"><span data-stu-id="6373a-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="6373a-111">Vorgehensweise beim Anzeigen von Validierungs Fehlern</span><span class="sxs-lookup"><span data-stu-id="6373a-111">How to display validation errors.</span></span>
> - <span data-ttu-id="6373a-112">Springen zu einer anderen Seite von der aktuellen Seite.</span><span class="sxs-lookup"><span data-stu-id="6373a-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="6373a-113">Erörterte Features und Technologien:</span><span class="sxs-lookup"><span data-stu-id="6373a-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="6373a-114">Die `Database.Execute` -Methode.</span><span class="sxs-lookup"><span data-stu-id="6373a-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="6373a-115">Die SQL `Insert Into`-Anweisung</span><span class="sxs-lookup"><span data-stu-id="6373a-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="6373a-116">Das `Validation`-Hilfsprogramm.</span><span class="sxs-lookup"><span data-stu-id="6373a-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="6373a-117">Die `Response.Redirect` -Methode.</span><span class="sxs-lookup"><span data-stu-id="6373a-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="6373a-118">Sie lernen Folgendes</span><span class="sxs-lookup"><span data-stu-id="6373a-118">What You'll Build</span></span>

<span data-ttu-id="6373a-119">In dem zuvor gezeigten Tutorial zum Erstellen einer Datenbank haben Sie Datenbankdaten eingegeben, indem Sie die Datenbank direkt in webmatrix bearbeitet haben und im Arbeitsbereich **Datenbank** arbeiten.</span><span class="sxs-lookup"><span data-stu-id="6373a-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="6373a-120">In den meisten apps ist dies keine praktische Möglichkeit, um Daten in die Datenbank einzufügen.</span><span class="sxs-lookup"><span data-stu-id="6373a-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="6373a-121">In diesem Tutorial erstellen Sie also eine webbasierte Oberfläche, mit der Sie oder alle Benutzerdaten eingeben und in der Datenbank speichern können.</span><span class="sxs-lookup"><span data-stu-id="6373a-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="6373a-122">Sie erstellen eine Seite, auf der Sie neue Filme eingeben können.</span><span class="sxs-lookup"><span data-stu-id="6373a-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="6373a-123">Die Seite enthält ein Eingabeformular mit Feldern (Textfeldern), in denen Sie einen Filmtitel, ein Genre und ein Jahr eingeben können.</span><span class="sxs-lookup"><span data-stu-id="6373a-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="6373a-124">Die Seite sieht wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-124">The page will look like this page:</span></span>

![Seite "Film hinzufügen" im Browser](entering-data/_static/image1.png)

<span data-ttu-id="6373a-126">Die Textfelder sind HTML-`<input>` Elemente, die wie dieses Markup aussehen:</span><span class="sxs-lookup"><span data-stu-id="6373a-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="6373a-127">Erstellen des grundlegenden Eingabeformulars</span><span class="sxs-lookup"><span data-stu-id="6373a-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="6373a-128">Erstellen Sie eine Seite mit dem Namen *addmovie. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="6373a-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="6373a-129">Ersetzen Sie die Elemente in der Datei durch das folgende Markup.</span><span class="sxs-lookup"><span data-stu-id="6373a-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="6373a-130">Alles überschreiben Sie fügen oben einen Codeblock hinzu.</span><span class="sxs-lookup"><span data-stu-id="6373a-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="6373a-131">Dieses Beispiel zeigt typische HTML-Code zum Erstellen eines Formulars.</span><span class="sxs-lookup"><span data-stu-id="6373a-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="6373a-132">Er verwendet `<input>` Elemente für die Textfelder und für die Schaltfläche "Senden".</span><span class="sxs-lookup"><span data-stu-id="6373a-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="6373a-133">Die Beschriftungen für die Textfelder werden mit Standard `<label>` Elementen erstellt.</span><span class="sxs-lookup"><span data-stu-id="6373a-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="6373a-134">Die `<fieldset>`-und `<legend>`-Elemente stellen ein schönes Feld um das Formular.</span><span class="sxs-lookup"><span data-stu-id="6373a-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="6373a-135">Beachten Sie, dass das `<form>`-Element auf dieser Seite `post` als Wert für das `method`-Attribut verwendet.</span><span class="sxs-lookup"><span data-stu-id="6373a-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="6373a-136">Im vorherigen Tutorial haben Sie ein Formular erstellt, das die `get`-Methode verwendet hat.</span><span class="sxs-lookup"><span data-stu-id="6373a-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="6373a-137">Das war richtig, denn obwohl das Formular Werte an den Server übermittelt hat, hat die Anforderung keine Änderungen vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="6373a-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="6373a-138">Alles konnte nicht auf unterschiedliche Weise abgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="6373a-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="6373a-139">Auf dieser Seite nehmen Sie jedoch Änderungen vor – *Sie werden neue* Datenbankdaten Sätze hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="6373a-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="6373a-140">Daher sollte in diesem Formular die `post`-Methode verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="6373a-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="6373a-141">(Weitere Informationen zu den Unterschieden zwischen `GET` und `POST` Vorgängen finden Sie in der Rand Leiste "[Get", "Post" und "http Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) " im vorherigen Tutorial.)</span><span class="sxs-lookup"><span data-stu-id="6373a-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="6373a-142">Beachten Sie, dass jedes Textfeld ein `name`-Element enthält (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="6373a-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="6373a-143">Wie Sie im vorherigen Tutorial gesehen haben, sind diese Namen wichtig, da Sie diese Namen haben müssen, damit Sie die Eingabe des Benutzers später erhalten können.</span><span class="sxs-lookup"><span data-stu-id="6373a-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="6373a-144">Sie können beliebige Namen verwenden.</span><span class="sxs-lookup"><span data-stu-id="6373a-144">You can use any names.</span></span> <span data-ttu-id="6373a-145">Es ist hilfreich, aussagekräftige Namen zu verwenden, die Ihnen helfen zu merken, mit welchen Daten Sie arbeiten.</span><span class="sxs-lookup"><span data-stu-id="6373a-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="6373a-146">Das `value`-Attribut jedes `<input>` Elements enthält ein wenig Razor-Code (z. b. `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="6373a-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="6373a-147">Sie haben im vorherigen Tutorial eine Version dieses Tricks kennengelernt, um den im Textfeld (sofern vorhanden) eingegebenen Wert beizubehalten, nachdem das Formular übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="6373a-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="6373a-148">Die Formular Werte werden erhalten.</span><span class="sxs-lookup"><span data-stu-id="6373a-148">Getting the Form Values</span></span>

<span data-ttu-id="6373a-149">Als Nächstes fügen Sie Code hinzu, der das Formular verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="6373a-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="6373a-150">Im Umriss führen Sie die folgenden Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="6373a-151">Überprüfen Sie, ob die Seite gesendet wird (wurde übermittelt).</span><span class="sxs-lookup"><span data-stu-id="6373a-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="6373a-152">Sie möchten, dass Ihr Code nur ausgeführt wird, wenn Benutzer auf die Schaltfläche geklickt haben, nicht, wenn die Seite zum ersten Mal ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="6373a-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="6373a-153">Gibt die Werte an, die der Benutzer in die Textfelder eingegeben hat.</span><span class="sxs-lookup"><span data-stu-id="6373a-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="6373a-154">Da in diesem Fall das Formular das `POST` Verb verwendet, werden die Formular Werte aus der `Request.Form` Auflistung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="6373a-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="6373a-155">Fügen Sie die Werte als neuen Datensatz in die Datenbanktabelle " *Movies* " ein.</span><span class="sxs-lookup"><span data-stu-id="6373a-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="6373a-156">Fügen Sie am Anfang der Datei den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="6373a-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="6373a-157">In den ersten Zeilen werden Variablen (`title`, `genre`und `year`) erstellt, um die Werte aus den Textfeldern zu speichern.</span><span class="sxs-lookup"><span data-stu-id="6373a-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="6373a-158">Die Zeile `if(IsPost)` stellt sicher, dass die Variablen *nur* festgelegt werden, wenn Benutzer auf die Schaltfläche **Film hinzufügen** klicken, d. –., wenn das Formular gepostet wurde.</span><span class="sxs-lookup"><span data-stu-id="6373a-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="6373a-159">Wie Sie in einem früheren Tutorial gesehen haben, können Sie den Wert eines Textfelds mit einem Ausdruck wie `Request.Form["name"]`erhalten, wobei *Name* der Name des `<input>` Elements ist.</span><span class="sxs-lookup"><span data-stu-id="6373a-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="6373a-160">Der Name der Variablen (`title`, `genre`und `year`) ist willkürlich.</span><span class="sxs-lookup"><span data-stu-id="6373a-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="6373a-161">Wie die Namen, die Sie `<input>` Elementen zuweisen, können Sie Sie beliebig benennen.</span><span class="sxs-lookup"><span data-stu-id="6373a-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="6373a-162">(Die Namen der Variablen müssen nicht den namens Attributen `<input>` Elemente im Formular entsprechen.) Wie bei den `<input>` Elementen empfiehlt es sich jedoch, Variablennamen zu verwenden, die die darin enthaltenen Daten widerspiegeln.</span><span class="sxs-lookup"><span data-stu-id="6373a-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="6373a-163">Wenn Sie Code schreiben, können Sie mit konsistenten Namen leichter merken, mit welchen Daten Sie arbeiten.</span><span class="sxs-lookup"><span data-stu-id="6373a-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="6373a-164">Hinzufügen von Daten zur Datenbank</span><span class="sxs-lookup"><span data-stu-id="6373a-164">Adding Data to the Database</span></span>

<span data-ttu-id="6373a-165">Fügen Sie im soeben hinzugefügten Codeblock direkt *innerhalb* der schließenden geschweiften Klammer (`}`) des `if`-Blocks (nicht nur innerhalb des Code Blocks) den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="6373a-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="6373a-166">Dieses Beispiel ähnelt dem Code, den Sie in einem vorherigen Tutorial zum Abrufen und Anzeigen von Daten verwendet haben.</span><span class="sxs-lookup"><span data-stu-id="6373a-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="6373a-167">Die Zeile, die mit `db =` beginnt, öffnet die Datenbank, wie zuvor, und die nächste Zeile definiert eine SQL-Anweisung, wie Sie zuvor gesehen haben.</span><span class="sxs-lookup"><span data-stu-id="6373a-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="6373a-168">Diesmal wird jedoch eine SQL `Insert Into`-Anweisung definiert.</span><span class="sxs-lookup"><span data-stu-id="6373a-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="6373a-169">Das folgende Beispiel zeigt die allgemeine Syntax der `Insert Into`-Anweisung:</span><span class="sxs-lookup"><span data-stu-id="6373a-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="6373a-170">Dies bedeutet, dass Sie die Tabelle angeben, in die eingefügt werden soll. Anschließend können Sie die einzufügenden Spalten auflisten und dann die einzufügenden Werte auflisten.</span><span class="sxs-lookup"><span data-stu-id="6373a-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="6373a-171">(Wie bereits erwähnt, wird bei SQL die Groß-/Kleinschreibung nicht beachtet, aber einige Personen haben die Schlüsselwörter groß geschrieben, um das Lesen des Befehls zu vereinfachen.)</span><span class="sxs-lookup"><span data-stu-id="6373a-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="6373a-172">Die Spalten, in die Sie eingefügt werden, sind bereits im Befehl – `(Title, Genre, Year)`aufgeführt.</span><span class="sxs-lookup"><span data-stu-id="6373a-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="6373a-173">Der interessante Teil ist, wie Sie die Werte aus den Textfeldern in den `VALUES` Teil des Befehls erhalten.</span><span class="sxs-lookup"><span data-stu-id="6373a-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="6373a-174">Anstelle von tatsächlichen Werten sehen Sie `@0`, `@1`und `@2`. Dies sind natürlich Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="6373a-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="6373a-175">Wenn Sie den Befehl ausführen (in der `db.Execute` Zeile), übergeben Sie die Werte, die Sie in den Textfeldern erhalten haben.</span><span class="sxs-lookup"><span data-stu-id="6373a-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="6373a-176">**Wichtig!**</span><span class="sxs-lookup"><span data-stu-id="6373a-176">**Important!**</span></span> <span data-ttu-id="6373a-177">Beachten Sie, dass die einzige Möglichkeit zum Einschließen von Daten, die von einem Benutzer in einer SQL-Anweisung Online eingegeben werden, die Verwendung von Platzhaltern ist, wie hier zu sehen ist (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="6373a-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="6373a-178">Wenn Sie Benutzereingaben in einer SQL-Anweisung verketten, öffnen Sie sich bei einem SQL-Injection-Angriff, wie in den [Grundlagen der Grundlagen in ASP.net Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (dem vorherigen Tutorial) erläutert.</span><span class="sxs-lookup"><span data-stu-id="6373a-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="6373a-179">Fügen Sie im `if`-Block nach der `db.Execute` Zeile die folgende Zeile ein:</span><span class="sxs-lookup"><span data-stu-id="6373a-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="6373a-180">Nachdem der neue Film in die Datenbank eingefügt wurde, springt Ihnen diese Zeile (Umleitungen) zur Seite " *Movies* " (Umleitungen), damit Sie den soeben eingegebenen Film sehen können.</span><span class="sxs-lookup"><span data-stu-id="6373a-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="6373a-181">Der `~`-Operator bedeutet "Root of the Website".</span><span class="sxs-lookup"><span data-stu-id="6373a-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="6373a-182">(Der `~`-Operator funktioniert nur in ASP.NET Seiten, im Allgemeinen nicht in HTML.)</span><span class="sxs-lookup"><span data-stu-id="6373a-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="6373a-183">Der gesamte Codeblock sieht wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="6373a-184">Testen des Einfügebefehls (bisher)</span><span class="sxs-lookup"><span data-stu-id="6373a-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="6373a-185">Sie sind noch nicht fertig, aber jetzt ist es ein guter Zeitpunkt, zu testen.</span><span class="sxs-lookup"><span data-stu-id="6373a-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="6373a-186">Klicken Sie in der Strukturansicht der Dateien in webmatrix mit der rechten Maustaste auf die Seite *addmovie. cshtml* , und klicken Sie dann auf **im Browser starten**.</span><span class="sxs-lookup"><span data-stu-id="6373a-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Seite "Film hinzufügen" im Browser](entering-data/_static/image2.png)

<span data-ttu-id="6373a-188">(Wenn im Browser eine andere Seite angezeigt wird, stellen Sie sicher, dass die URL `http://localhost:nnnnn/AddMovie`) ist, wobei *NNNNN* die von Ihnen verwendete Portnummer ist.)</span><span class="sxs-lookup"><span data-stu-id="6373a-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="6373a-189">Haben Sie eine Fehlerseite erhalten?</span><span class="sxs-lookup"><span data-stu-id="6373a-189">Did you get an error page?</span></span> <span data-ttu-id="6373a-190">Wenn dies der Fall ist, lesen Sie ihn sorgfältig durch, und stellen Sie sicher, dass der Code genau so aussieht wie zuvor.</span><span class="sxs-lookup"><span data-stu-id="6373a-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="6373a-191">Geben Sie im Formular einen Film ein, &mdash; z. b. "Bürger-Kane", "Drama" und "1941" zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="6373a-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="6373a-192">(Oder was auch immer.) Klicken Sie dann auf **Film hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="6373a-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="6373a-193">Wenn alles gut funktioniert, werden Sie zur Seite " *Filme* " umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="6373a-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="6373a-194">Stellen Sie sicher, dass Ihr neuer Film aufgeführt ist.</span><span class="sxs-lookup"><span data-stu-id="6373a-194">Make sure that your new movie is listed.</span></span>

![Filme Seite mit neu hinzugefügten Film](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="6373a-196">Überprüfen der Benutzereingabe</span><span class="sxs-lookup"><span data-stu-id="6373a-196">Validating User Input</span></span>

<span data-ttu-id="6373a-197">Wechseln Sie zurück zur Seite " *addmovie* ", oder führen Sie Sie erneut aus.</span><span class="sxs-lookup"><span data-stu-id="6373a-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="6373a-198">Geben Sie einen anderen Film ein, aber geben Sie diesmal nur den Titel ein, &mdash; z. b. "singini" in "Regen" eingeben.</span><span class="sxs-lookup"><span data-stu-id="6373a-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="6373a-199">Klicken Sie dann auf **Film hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="6373a-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="6373a-200">Sie werden erneut zur Seite " *Filme* " umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="6373a-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="6373a-201">Sie finden den neuen Film, aber er ist unvollständig.</span><span class="sxs-lookup"><span data-stu-id="6373a-201">You can find the new movie, but it's incomplete.</span></span>

![Seite "Filme" mit neuem Film, für den einige Werte fehlen](entering-data/_static/image4.png)

<span data-ttu-id="6373a-203">Beim Erstellen der *Filme* -Tabelle haben Sie explizit gesagt, dass keines der Felder NULL sein kann.</span><span class="sxs-lookup"><span data-stu-id="6373a-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="6373a-204">Hier haben Sie ein Eingabeformular für neue Filme, und Sie lassen Felder leer.</span><span class="sxs-lookup"><span data-stu-id="6373a-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="6373a-205">Das ist ein Fehler.</span><span class="sxs-lookup"><span data-stu-id="6373a-205">That's an error.</span></span>

<span data-ttu-id="6373a-206">In diesem Fall hat die Datenbank keinen Fehler ausgelöst *(oder ausgelöst*).</span><span class="sxs-lookup"><span data-stu-id="6373a-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="6373a-207">Sie haben kein Genre oder Jahr angegeben, daher hat der Code auf der *addmovie* -Seite diese Werte als so genannte *leere*Zeichen folgen behandelt.</span><span class="sxs-lookup"><span data-stu-id="6373a-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="6373a-208">Wenn der SQL `Insert Into`-Befehl ausgeführt wurde, hatten die Felder Genre und Year keine nützlichen Daten, aber Sie waren nicht NULL.</span><span class="sxs-lookup"><span data-stu-id="6373a-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="6373a-209">Natürlich sollten Sie nicht zulassen, dass Benutzer halb leere Filminformationen in die Datenbank eingeben.</span><span class="sxs-lookup"><span data-stu-id="6373a-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="6373a-210">Die Lösung besteht darin, die Eingabe des Benutzers zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="6373a-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="6373a-211">Anfänglich wird bei der Überprüfung einfach sichergestellt, dass der Benutzer einen Wert für alle Felder eingegeben hat (d. h., dass keiner der Felder eine leere Zeichenfolge enthält).</span><span class="sxs-lookup"><span data-stu-id="6373a-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="6373a-212">**NULL und leere Zeichen folgen**</span><span class="sxs-lookup"><span data-stu-id="6373a-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="6373a-213">Beim Programmieren gibt es einen Unterschied zwischen den verschiedenen Begriffen "kein Wert".</span><span class="sxs-lookup"><span data-stu-id="6373a-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="6373a-214">Im Allgemeinen ist ein Wert *null* , wenn er nie auf irgendeine Weise festgelegt oder initialisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="6373a-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="6373a-215">Im Gegensatz dazu kann eine Variable, die Zeichendaten (Zeichen folgen) erwartet, auf eine *leere Zeichenfolge*festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="6373a-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="6373a-216">In diesem Fall ist der Wert nicht NULL. Sie wurde nur explizit auf eine Zeichenfolge festgelegt, deren Länge 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="6373a-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="6373a-217">Diese beiden Anweisungen zeigen den Unterschied:</span><span class="sxs-lookup"><span data-stu-id="6373a-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="6373a-218">Es ist etwas komplizierter als das, aber der wichtigste Punkt ist, dass `null` eine Art nicht ermittelte Zustands darstellt.</span><span class="sxs-lookup"><span data-stu-id="6373a-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="6373a-219">Nun ist es wichtig, genau zu verstehen, wenn ein Wert NULL ist und wenn es sich nur um eine leere Zeichenfolge handelt.</span><span class="sxs-lookup"><span data-stu-id="6373a-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="6373a-220">Im Code für die *addmovie* -Seite erhalten Sie die Werte der Textfelder, indem Sie `Request.Form["title"]` usw. verwenden.</span><span class="sxs-lookup"><span data-stu-id="6373a-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="6373a-221">Wenn die Seite zum ersten Mal ausgeführt wird (bevor Sie auf die Schaltfläche klicken), ist der Wert von `Request.Form["title"]` NULL.</span><span class="sxs-lookup"><span data-stu-id="6373a-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="6373a-222">Wenn Sie jedoch das Formular senden, wird `Request.Form["title"]` den Wert des `title` Textfelds abrufen.</span><span class="sxs-lookup"><span data-stu-id="6373a-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="6373a-223">Es ist nicht offensichtlich, aber ein leeres Textfeld ist nicht NULL. darin ist nur eine leere Zeichenfolge angegeben.</span><span class="sxs-lookup"><span data-stu-id="6373a-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="6373a-224">Wenn der Code als Reaktion auf den Klick auf die Schaltfläche ausgeführt wird, enthält `Request.Form["title"]` eine leere Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="6373a-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="6373a-225">Warum ist dieser Unterschied wichtig?</span><span class="sxs-lookup"><span data-stu-id="6373a-225">Why is this distinction important?</span></span> <span data-ttu-id="6373a-226">Beim Erstellen der *Filme* -Tabelle haben Sie explizit gesagt, dass keines der Felder NULL sein kann.</span><span class="sxs-lookup"><span data-stu-id="6373a-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="6373a-227">Hier haben Sie jedoch ein Eingabeformular für neue Filme, und Sie lassen Felder leer.</span><span class="sxs-lookup"><span data-stu-id="6373a-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="6373a-228">Wenn Sie versuchen, neue Filme zu speichern, bei denen keine Werte für Genre oder Jahr vorhanden waren, sollten Sie davon ausgehen, dass sich die Datenbank beschwert.</span><span class="sxs-lookup"><span data-stu-id="6373a-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="6373a-229">Aber das ist der Punkt &mdash; auch wenn Sie diese Textfelder leer lassen, sind die Werte nicht NULL. Sie sind leere Zeichen folgen.</span><span class="sxs-lookup"><span data-stu-id="6373a-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="6373a-230">Daher können Sie neue Filme in der Datenbank speichern, wenn diese Spalten leer &mdash;, aber nicht NULL sind!</span><span class="sxs-lookup"><span data-stu-id="6373a-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="6373a-231">&mdash;-Werte sind.</span><span class="sxs-lookup"><span data-stu-id="6373a-231">&mdash; values.</span></span> <span data-ttu-id="6373a-232">Daher müssen Sie sicherstellen, dass Benutzer keine leere Zeichenfolge einreichen, was Sie tun können, indem Sie die Eingabe des Benutzers validieren.</span><span class="sxs-lookup"><span data-stu-id="6373a-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="6373a-233">Das Validierungs Hilfsprogramm</span><span class="sxs-lookup"><span data-stu-id="6373a-233">The Validation Helper</span></span>

<span data-ttu-id="6373a-234">ASP.net Web Pages enthält eine Hilfsobjekt &mdash; den `Validation` Helper-&mdash;, mit dem Sie sicherstellen können, dass Benutzerdaten eingeben, die Ihren Anforderungen entsprechen.</span><span class="sxs-lookup"><span data-stu-id="6373a-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="6373a-235">Das `Validation`-Hilfsprogramm ist eine der in ASP.net Web Pages integrierten Hilfsprogramme, sodass Sie es nicht als Paket mithilfe von nuget installieren müssen, wie Sie das Gravatar-Hilfsprogramm in einem früheren Tutorial installiert haben.</span><span class="sxs-lookup"><span data-stu-id="6373a-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="6373a-236">Um die Eingabe des Benutzers zu überprüfen, gehen Sie wie folgt vor:</span><span class="sxs-lookup"><span data-stu-id="6373a-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="6373a-237">Verwenden Sie Code, um anzugeben, dass Sie Werte in den Textfeldern auf der Seite benötigen.</span><span class="sxs-lookup"><span data-stu-id="6373a-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="6373a-238">Fügen Sie einen Test in den Code ein, sodass die Filminformationen nur dann zur Datenbank hinzugefügt werden, wenn alles ordnungsgemäß überprüft wird.</span><span class="sxs-lookup"><span data-stu-id="6373a-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="6373a-239">Fügen Sie Code in das Markup ein, um Fehlermeldungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6373a-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="6373a-240">Fügen Sie im Codeblock auf der *addmovie* -Seite am oberen Rand vor den Variablen Deklarationen den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="6373a-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="6373a-241">Sie können `Validation.RequireField` einmal für jedes Feld (`<input>` Element) abrufen, in dem Sie einen Eintrag benötigen.</span><span class="sxs-lookup"><span data-stu-id="6373a-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="6373a-242">Sie können auch eine benutzerdefinierte Fehlermeldung für jeden-Befehl hinzufügen, wie hier zu sehen.</span><span class="sxs-lookup"><span data-stu-id="6373a-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="6373a-243">(Wir haben die Nachrichten unterschiedlich geändert, um anzuzeigen, dass Sie dort beliebige Inhalte ablegen können.)</span><span class="sxs-lookup"><span data-stu-id="6373a-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="6373a-244">Wenn ein Problem vorliegt, sollten Sie verhindern, dass die neuen Filminformationen in die Datenbank eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="6373a-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="6373a-245">Verwenden Sie im `if(IsPost)`-Block `&&` (logisches and), um eine weitere Bedingung hinzuzufügen, mit der `Validation.IsValid()`getestet wird.</span><span class="sxs-lookup"><span data-stu-id="6373a-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="6373a-246">Wenn Sie fertig sind, sieht der gesamte `if(IsPost)`-Block wie der folgende Code aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="6373a-247">Wenn ein Überprüfungs Fehler mit einem der Felder vorliegt, die Sie mithilfe des `Validation`-Hilfsprogramms registriert haben, gibt die `Validation.IsValid`-Methode false zurück.</span><span class="sxs-lookup"><span data-stu-id="6373a-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="6373a-248">Und in diesem Fall wird kein Code in diesem Block ausgeführt, sodass keine ungültigen Film Einträge in die Datenbank eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="6373a-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="6373a-249">Und natürlich werden Sie nicht zur Seite " *Filme* " umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="6373a-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="6373a-250">Der gesamte Codeblock, einschließlich des Validierungs Codes, sieht nun wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="6373a-251">Anzeigen von Validierungs Fehlern</span><span class="sxs-lookup"><span data-stu-id="6373a-251">Displaying Validation Errors</span></span>

<span data-ttu-id="6373a-252">Der letzte Schritt besteht darin, Fehlermeldungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6373a-252">The last step is to display any error messages.</span></span> <span data-ttu-id="6373a-253">Sie können einzelne Meldungen für jeden Validierungs Fehler anzeigen, oder Sie können eine Zusammenfassung oder beides anzeigen.</span><span class="sxs-lookup"><span data-stu-id="6373a-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="6373a-254">In diesem Tutorial führen Sie beides aus, damit Sie sehen können, wie es funktioniert.</span><span class="sxs-lookup"><span data-stu-id="6373a-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="6373a-255">Nennen Sie neben jedem `<input>` Element, das Sie überprüfen, die `Html.ValidationMessage`-Methode, und übergeben Sie den Namen des `<input>` Elements, das Sie überprüfen.</span><span class="sxs-lookup"><span data-stu-id="6373a-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="6373a-256">Fügen Sie die `Html.ValidationMessage`-Methode an die Stelle, an der die Fehlermeldung angezeigt werden soll.</span><span class="sxs-lookup"><span data-stu-id="6373a-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="6373a-257">Wenn die Seite ausgeführt wird, rendert die `Html.ValidationMessage`-Methode ein `<span>` Element, bei dem der Überprüfungs Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="6373a-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="6373a-258">(Wenn kein Fehler vorliegt, wird das `<span>` Element gerendert, aber es ist kein Text vorhanden.)</span><span class="sxs-lookup"><span data-stu-id="6373a-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="6373a-259">Ändern Sie das Markup auf der Seite so, dass es eine `Html.ValidationMessage`-Methode für jedes der drei `<input>` Elemente auf der Seite enthält, wie in diesem Beispiel:</span><span class="sxs-lookup"><span data-stu-id="6373a-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="6373a-260">Fügen Sie das folgende Markup und den Code direkt hinter dem `<h1>Add a Movie</h1>`-Element auf der Seite ein, um zu sehen, wie die Zusammenfassung funktioniert:</span><span class="sxs-lookup"><span data-stu-id="6373a-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="6373a-261">Standardmäßig zeigt die `Html.ValidationSummary`-Methode alle Validierungs Nachrichten in einer Liste an (ein `<ul>` Element, das sich innerhalb eines `<div>`-Elements befindet).</span><span class="sxs-lookup"><span data-stu-id="6373a-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="6373a-262">Wie bei der `Html.ValidationMessage`-Methode wird das Markup für die Validierungs Zusammenfassung immer gerendert. Wenn keine Fehler vorliegen, werden keine Listenelemente gerendert.</span><span class="sxs-lookup"><span data-stu-id="6373a-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="6373a-263">Die Zusammenfassung kann eine alternative Möglichkeit zum Anzeigen von Validierungs Nachrichten anstelle von verwendet werden, um `Html.ValidationMessage` die einzelnen feldspezifischen Fehler anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="6373a-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="6373a-264">Sie können auch eine Zusammenfassung und die Details verwenden.</span><span class="sxs-lookup"><span data-stu-id="6373a-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="6373a-265">Oder Sie können die `Html.ValidationSummary`-Methode verwenden, um einen generischen Fehler anzuzeigen und dann einzelne `Html.ValidationMessage` Aufrufe zum Anzeigen von Details zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="6373a-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="6373a-266">Die Seite "Fertig" sieht nun wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="6373a-267">Das ist alles.</span><span class="sxs-lookup"><span data-stu-id="6373a-267">That's it.</span></span> <span data-ttu-id="6373a-268">Sie können die Seite jetzt testen, indem Sie einen Film hinzufügen, aber ein oder mehrere Felder verlassen.</span><span class="sxs-lookup"><span data-stu-id="6373a-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="6373a-269">Wenn Sie dies tun, wird die folgende Fehleranzeige angezeigt:</span><span class="sxs-lookup"><span data-stu-id="6373a-269">When you do, you see the following error display:</span></span>

![Hinzufügen einer Filmseite mit Validierungs Fehlermeldungen](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="6373a-271">Formatieren der Validierungs Fehlermeldungen</span><span class="sxs-lookup"><span data-stu-id="6373a-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="6373a-272">Sie sehen, dass Fehlermeldungen vorliegen, aber Sie sind nicht wirklich gut hervorragend.</span><span class="sxs-lookup"><span data-stu-id="6373a-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="6373a-273">Es gibt jedoch eine einfache Möglichkeit, die Fehlermeldungen zu formatieren.</span><span class="sxs-lookup"><span data-stu-id="6373a-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="6373a-274">Um die einzelnen Fehlermeldungen zu formatieren, die von `Html.ValidationMessage`angezeigt werden, erstellen Sie eine CSS-Formatklasse mit dem Namen `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="6373a-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="6373a-275">Um das Suchen nach der Validierungs Zusammenfassung zu definieren, erstellen Sie eine CSS-Formatklasse mit dem Namen `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="6373a-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="6373a-276">Um zu sehen, wie diese Technik funktioniert, fügen Sie im `<head>` Abschnitt der Seite ein `<style>` Element hinzu.</span><span class="sxs-lookup"><span data-stu-id="6373a-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="6373a-277">Definieren Sie dann Stil Klassen mit dem Namen `field-validation-error` und `validation-summary-errors`, die die folgenden Regeln enthalten:</span><span class="sxs-lookup"><span data-stu-id="6373a-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="6373a-278">Normalerweise würden Sie Formatierungsinformationen in eine separate *CSS* -Datei einfügen, aber aus Gründen der Einfachheit können Sie Sie jetzt auf der Seite ablegen.</span><span class="sxs-lookup"><span data-stu-id="6373a-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="6373a-279">(Später in diesem Tutorial verschieben Sie die CSS-Regeln in eine separate *CSS* -Datei.)</span><span class="sxs-lookup"><span data-stu-id="6373a-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="6373a-280">Wenn ein Validierungs Fehler vorliegt, rendert die `Html.ValidationMessage`-Methode ein `<span>` Element, das `class="field-validation-error"`enthält.</span><span class="sxs-lookup"><span data-stu-id="6373a-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="6373a-281">Indem Sie eine Format Definition für diese Klasse hinzufügen, können Sie konfigurieren, wie die Nachricht aussieht.</span><span class="sxs-lookup"><span data-stu-id="6373a-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="6373a-282">Wenn Fehler auftreten, rendert die `ValidationSummary`-Methode das Attribut ebenfalls dynamisch `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="6373a-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="6373a-283">Führen Sie die Seite erneut aus, und lassen Sie absichtlich einige Felder aus.</span><span class="sxs-lookup"><span data-stu-id="6373a-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="6373a-284">Die Fehler sind nun auffälliger.</span><span class="sxs-lookup"><span data-stu-id="6373a-284">The errors are now more noticeable.</span></span> <span data-ttu-id="6373a-285">(Tatsächlich sind Sie überladen, aber das ist nur, um zu zeigen, was Sie tun können.)</span><span class="sxs-lookup"><span data-stu-id="6373a-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Hinzufügen einer Filmseite mit Validierungs Fehlern, die formatiert wurden](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="6373a-287">Hinzufügen eines Links zur Seite "Filme"</span><span class="sxs-lookup"><span data-stu-id="6373a-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="6373a-288">Der letzte Schritt besteht darin, den Einstieg in die Seite " *addmovie* " aus der ursprünglichen Filmliste zu vereinfachen.</span><span class="sxs-lookup"><span data-stu-id="6373a-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="6373a-289">Öffnen Sie die Seite *Filme* erneut.</span><span class="sxs-lookup"><span data-stu-id="6373a-289">Open the *Movies* page again.</span></span> <span data-ttu-id="6373a-290">Fügen Sie nach dem schließenden `</div>` Tag, das auf das `WebGrid`-Hilfsprogramm folgt, das folgende Markup hinzu:</span><span class="sxs-lookup"><span data-stu-id="6373a-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="6373a-291">Wie Sie bereits gesehen haben, interpretiert ASP.NET den `~` Operator als das Stammverzeichnis der Website.</span><span class="sxs-lookup"><span data-stu-id="6373a-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="6373a-292">Sie müssen nicht den `~`-Operator verwenden. Sie können das Markup `<a href="./AddMovie">Add a movie</a>` oder eine andere Methode verwenden, um den Pfad zu definieren, den HTML versteht.</span><span class="sxs-lookup"><span data-stu-id="6373a-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="6373a-293">Der `~` Operator ist jedoch ein guter allgemeiner Ansatz, wenn Sie Verknüpfungen für Razor Pages erstellen, da die Website flexibler ist – wenn Sie die aktuelle Seite in einen Unterordner verschieben, wird der Link weiterhin zur *addmovie* -Seite weitergeleitet.</span><span class="sxs-lookup"><span data-stu-id="6373a-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="6373a-294">(Beachten Sie, dass der `~`-Operator nur auf *. cshtml* -Seiten funktioniert.</span><span class="sxs-lookup"><span data-stu-id="6373a-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="6373a-295">ASP.net versteht sie, aber es handelt sich nicht um Standard-HTML.)</span><span class="sxs-lookup"><span data-stu-id="6373a-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="6373a-296">Wenn Sie fertig sind, führen Sie die Seite *Filme* aus.</span><span class="sxs-lookup"><span data-stu-id="6373a-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="6373a-297">Diese Seite sieht wie folgt aus:</span><span class="sxs-lookup"><span data-stu-id="6373a-297">It will look like this page:</span></span>

![Seite "Filme" mit Link zur Seite "Filme hinzufügen"](entering-data/_static/image7.png)

<span data-ttu-id="6373a-299">Klicken Sie auf den Link **Film hinzufügen** , um sicherzustellen, dass er auf die Seite *addmovie* wechselt.</span><span class="sxs-lookup"><span data-stu-id="6373a-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="6373a-300">Nächste nächste</span><span class="sxs-lookup"><span data-stu-id="6373a-300">Coming Up Next</span></span>

<span data-ttu-id="6373a-301">Im nächsten Tutorial erfahren Sie, wie Sie Benutzern das Bearbeiten von Daten ermöglichen, die bereits in der Datenbank vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="6373a-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="6373a-302">Vervollständigen der Liste für die addmovie-Seite</span><span class="sxs-lookup"><span data-stu-id="6373a-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="6373a-303">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="6373a-303">Additional Resources</span></span>

- [<span data-ttu-id="6373a-304">Einführung in die ASP.net-Webprogrammierung mit der Razor-Syntax</span><span class="sxs-lookup"><span data-stu-id="6373a-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="6373a-305">[SQL INSERT INTO-Anweisung](http://www.w3schools.com/sql/sql_insert.asp) auf der W3Schools-Website</span><span class="sxs-lookup"><span data-stu-id="6373a-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="6373a-306">Überprüfen [der Benutzereingaben an ASP.net Web Pages Websites](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="6373a-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="6373a-307">Weitere Informationen zum Arbeiten mit dem `Validation`-Hilfsprogramm.</span><span class="sxs-lookup"><span data-stu-id="6373a-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="6373a-308">[Zurück](form-basics.md)
> [Weiter](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="6373a-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
