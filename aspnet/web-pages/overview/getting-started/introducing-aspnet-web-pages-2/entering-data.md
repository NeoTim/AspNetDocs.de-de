---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Einführung in ASP.NET Web Pages - eingeben von Datenbankdaten mithilfe von Formularen | Microsoft-Dokumentation
author: Rick-Anderson
description: In diesem Tutorial erfahren Sie, wie ein Anmeldeformular erstellen, und geben die Daten, die aus dem Formular in eine Datenbanktabelle bei Verwendung von ASP.NET Web Pages (...)
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: d76f607f1d5e779d43ee15d8f2d697e7b0f147ae
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 04/17/2019
ms.locfileid: "59380118"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="aa4ad-103">Einführung in ASP.NET Web Pages - eingeben von Datenbankdaten mithilfe von Formularen</span><span class="sxs-lookup"><span data-stu-id="aa4ad-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="aa4ad-104">durch [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="aa4ad-105">In diesem Tutorial erfahren Sie, wie ein Anmeldeformular erstellen, und geben dann auf die Daten, die aus dem Formular in eine Datenbanktabelle bei Verwendung von ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="aa4ad-106">Es wird vorausgesetzt, Sie haben die Reihe über [Grundlagen von HTML-Formularen in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="aa4ad-107">Sie lernen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="aa4ad-108">Weitere Informationen zum Verarbeiten von Dateneingabeformularen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="aa4ad-109">Das Hinzufügen von Daten (Einfügen) in einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="aa4ad-110">Informationen, um sicherzustellen, dass Benutzer einen erforderlichen Wert in einem Formular (Gewusst wie: Überprüfen von Benutzereingaben) eingegeben haben.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="aa4ad-111">Wie Validierungsfehler angezeigt.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-111">How to display validation errors.</span></span>
> - <span data-ttu-id="aa4ad-112">So wechseln Sie zu einer anderen Seite von der aktuellen Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="aa4ad-113">Features/Technologien erläutert:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="aa4ad-114">Die `Database.Execute` -Methode.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="aa4ad-115">Die SQL-Anweisung `Insert Into` Anweisung</span><span class="sxs-lookup"><span data-stu-id="aa4ad-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="aa4ad-116">Die `Validation` Helper.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="aa4ad-117">Die `Response.Redirect` -Methode.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-117">The `Response.Redirect` method.</span></span>


## <a name="what-youll-build"></a><span data-ttu-id="aa4ad-118">Sie lernen Folgendes</span><span class="sxs-lookup"><span data-stu-id="aa4ad-118">What You'll Build</span></span>

<span data-ttu-id="aa4ad-119">In diesem Tutorial weiter oben, die Sie wurde gezeigt, wie Sie eine Datenbank zu erstellen, eingegebene Daten durch Bearbeitung der Datenbank direkt in WebMatrix, arbeiten der **Datenbank** Arbeitsbereich.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="aa4ad-120">In den meisten apps ist, die nicht über eine praktische Möglichkeit zum Einfügen von Daten in die Datenbank jedoch.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="aa4ad-121">In diesem Tutorial haben erstelle Sie eine webbasierte Schnittstelle, mit dem Sie oder jemand die Daten eingeben und speichern Sie sie in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="aa4ad-122">Sie erstellen eine Seite, in dem Sie neue Filme eingeben können.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="aa4ad-123">Die Seite enthält ein Anmeldeformular, die Felder (Textfelder) verfügt, in dem Sie einen Filmtitel, "Genre" und das Jahr eingeben können.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="aa4ad-124">Die Seite sieht wie auf dieser Seite aus:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-124">The page will look like this page:</span></span>

![Seite im Browser "Film hinzufügen"](entering-data/_static/image1.png)

<span data-ttu-id="aa4ad-126">Textfelder werden HTML `<input>` Elemente, die sehen, wie dieses Markup:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="aa4ad-127">Erstellen das grundlegende Eintragsformular</span><span class="sxs-lookup"><span data-stu-id="aa4ad-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="aa4ad-128">Erstellen Sie eine Seite mit dem Namen *AddMovie.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="aa4ad-129">Ersetzen Sie dies, was in der Datei mit dem folgenden Markup ist.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="aa4ad-130">Überschreiben Sie alles, was; Sie müssen einen Codeblock in Kürze oben hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="aa4ad-131">Dieses Beispiel zeigt die typischen HTML zum Erstellen eines Formulars.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="aa4ad-132">Er verwendet `<input>` Elemente für die Textfelder und für die Schaltfläche "Senden".</span><span class="sxs-lookup"><span data-stu-id="aa4ad-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="aa4ad-133">Die Beschriftungen für die Textfelder werden mit standardmäßigen erstellt `<label>` Elemente.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="aa4ad-134">Die `<fieldset>` und `<legend>` Elemente fügen Sie einen guten Rahmen um das Formular herum.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="aa4ad-135">Beachten Sie, dass auf dieser Seite die `<form>` -Element verwendet `post` als Wert für die `method` Attribut.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="aa4ad-136">Im vorherigen Tutorial haben Sie ein Formular zum erstellt die `get` Methode.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="aa4ad-137">Das war richtig ist, da auch das Formular Werte an den Server gesendet, die Anforderung keine Änderungen vorgenommen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="aa4ad-138">Alles, was zuvor war Abrufen der Daten auf unterschiedliche Weise.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="aa4ad-139">Allerdings in dieser Seite *wird* Änderungen vornehmen – also Datenbank neue Datensätze hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="aa4ad-140">Daher sollte dieses Formular verwendet die `post` Methode.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="aa4ad-141">(Weitere Informationen zu den Unterschieden zwischen `GET` und `POST` Vorgänge, finden Sie unter den[GET, POST und HTTP-Verb Sicherheit](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) Randleiste im vorherigen Tutorial.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="aa4ad-142">Beachten Sie, dass jedes Textfeld einen `name` Element (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="aa4ad-143">Im vorherigen Tutorial haben Sie gesehen, werden diese Namen wichtig, da müssen Sie diesen Namen haben, sodass Sie die Eingabe des Benutzers später abrufen können.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="aa4ad-144">Sie können beliebige Namen verwenden.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-144">You can use any names.</span></span> <span data-ttu-id="aa4ad-145">Es ist hilfreich, verwenden Sie aussagekräftige Namen ein, mit denen Sie denken Sie daran, welche Daten Sie arbeiten.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="aa4ad-146">Die `value` -Attribut der einzelnen `<input>` Element enthält ein wenig mit Razor-Code (z. B. `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="aa4ad-147">Sie erfahren eine Version von diesen Trick im vorherigen Tutorial zur Beibehaltung des Werts in das Textfeld ein (sofern vorhanden) eingegeben haben, nachdem das Formular übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="aa4ad-148">Die Formularwerte abrufen</span><span class="sxs-lookup"><span data-stu-id="aa4ad-148">Getting the Form Values</span></span>

<span data-ttu-id="aa4ad-149">Als Nächstes fügen Sie Code, der das Formular verarbeitet.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="aa4ad-150">In der Gliederung müssen Sie Folgendes tun:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="aa4ad-151">Überprüfen Sie, ob die Seite zurückgesendet wird, wird (übermittelt).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="aa4ad-152">Sie möchten Ihren Code nur ausgeführt, wenn Benutzer auf die Schaltfläche geklickt haben, nicht verwendet werden, wenn die Seite zuerst ausgeführt wird.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="aa4ad-153">Die der Benutzer in die Textfelder eingegebenen Werte zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="aa4ad-154">In diesem Fall, da das Formular verwendet die `POST` -Verb, erhalten Sie die Formularwerte aus der `Request.Form` Auflistung.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="aa4ad-155">Fügen Sie die Werte als einen neuen Eintrag in der *Filme* Datenbanktabelle.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="aa4ad-156">Fügen Sie am Anfang der Datei den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="aa4ad-157">Die ersten Zeilen erstellen Sie Variablen (`title`, `genre`, und `year`) zum Speichern der Werte aus den Textfeldern.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="aa4ad-158">Die Zeile `if(IsPost)` stellt sicher, dass die Variablen festgelegt werden *nur* Benutzer beim Klicken auf die **Film hinzufügen** Schaltfläche – d. h., wenn das Formular gesendet wurde.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="aa4ad-159">In einem früheren Tutorial haben Sie gesehen, Sie erhalten den Wert eines Textfelds mithilfe eines Ausdrucks wie `Request.Form["name"]`, wobei *Namen* ist der Name des der `<input>` Element.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="aa4ad-160">Die Namen der Variablen (`title`, `genre`, und `year`) sind willkürlich.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="aa4ad-161">Wie Sie die Namen, die Sie zuweisen `<input>` Elemente, man kann anrufen beliebigen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="aa4ad-162">(Die Namen der Variablen nicht entsprechend die Attributen Name der haben `<input>` Elemente auf dem Formular.) Aber wie bei der `<input>` Elemente, es ist eine gute Idee, Variablennamen verwenden, die die Daten enthalten, die sie enthalten.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="aa4ad-163">Wenn Sie Code schreiben, erleichtern konsistente Namen für die Sie Daten speichern, mit dem Sie arbeiten.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="aa4ad-164">Hinzufügen von Daten in der Datenbank</span><span class="sxs-lookup"><span data-stu-id="aa4ad-164">Adding Data to the Database</span></span>

<span data-ttu-id="aa4ad-165">Im Code blockieren Sie die soeben hinzugefügte, nur die *in* die schließende geschweifte Klammer ( `}` ) von der `if` -Block (nicht nur in den Codeblock), fügen Sie den folgenden Code hinzu:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="aa4ad-166">In diesem Beispiel ähnelt der Code, den Sie in einem vorherigen Tutorial zum Abrufen und Anzeigen von Daten verwendet.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="aa4ad-167">Die Zeile, die mit beginnt `db =` geöffnet, die die Datenbank, z. B. vor, und die nächste Zeile definiert eine SQL-Anweisung erneut als Sie gesehen haben, bevor Sie.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="aa4ad-168">Dieses Mal es definiert jedoch eine SQL `Insert Into` Anweisung.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="aa4ad-169">Das folgende Beispiel zeigt die allgemeine Syntax von der `Insert Into` Anweisung:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="aa4ad-170">Das heißt, geben Sie die Tabelle einzufügen, führen Sie dann die Spalten zum Einfügen in und Liste klicken Sie dann auf die einzufügenden Werte.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="aa4ad-171">(Wie bereits erwähnt, ist SQL nicht Groß-/Kleinschreibung beachtet, aber manche profitieren, die Schlüsselwörter, um es zu vereinfachen, lesen den Befehl.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="aa4ad-172">Die Spalten, die Sie in einfügen bereits im Befehl angegeben werden – `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="aa4ad-173">Der interessante Teil befindet, wie Sie die Werte aus den Textfeldern in Abrufen der `VALUES` Teil des Befehls.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="aa4ad-174">Anstelle der tatsächlichen Werte angezeigt `@0`, `@1`, und `@2`, das sind natürlich Platzhalter.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="aa4ad-175">Wenn Sie den Befehl ausführen (auf der `db.Execute` Zeile), übergeben Sie die Werte, die Sie aus den Textfeldern erhalten haben.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="aa4ad-176">**Wichtig**</span><span class="sxs-lookup"><span data-stu-id="aa4ad-176">**Important!**</span></span> <span data-ttu-id="aa4ad-177">Beachten Sie, dass die einzige Möglichkeit, Sie sollte jemals enthalten Daten, die online von einem Benutzer in einer SQL-Anweisung eingegeben ist die Verwendung von Platzhaltern, wie Sie hier sehen (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="aa4ad-178">Wenn Sie auf der Benutzereingabe in eine SQL-Anweisung verketten, Sie öffnen, selbst für eine SQL-Injection-Angriff, wie unter [Form-Grundlagen in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (das vorherige Lernprogramm).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="aa4ad-179">Immer noch innerhalb der `if` blockieren, die folgende Zeile nach dem Hinzufügen der `db.Execute` Zeile:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="aa4ad-180">Nachdem der neue Film in die Datenbank eingefügt worden ist, springt dieser Zeile Sie (Umleitung) an die *Filme* Seite, damit Sie den Film sehen können, die Sie gerade eingegeben haben.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="aa4ad-181">Die `~` Operator bedeutet "Root der Website".</span><span class="sxs-lookup"><span data-stu-id="aa4ad-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="aa4ad-182">(Die `~` Operator funktioniert nur in ASP.NET-Seiten nicht in HTML-Code in der Regel.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="aa4ad-183">Der Block der vollständige Code sieht wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="aa4ad-184">Testen des Insert-Befehls (bisher)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="aa4ad-185">Sie sind noch nicht fertig, aber jetzt ist ein guter Zeitpunkt, zu testen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="aa4ad-186">In der Strukturansicht der Dateien in WebMatrix, mit der Maustaste der *AddMovie.cshtml* Seite, und klicken Sie dann auf **in Browser starten**.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Seite im Browser "Film hinzufügen"](entering-data/_static/image2.png)

<span data-ttu-id="aa4ad-188">(Wenn Sie sich mit einer anderen Seite im Browser beenden, stellen Sie sicher, dass die URL `http://localhost:nnnnn/AddMovie`), wobei *Nnnnn* ist die Portnummer, die Sie verwenden.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="aa4ad-189">Haben Sie eine Fehlerseite erhalten?</span><span class="sxs-lookup"><span data-stu-id="aa4ad-189">Did you get an error page?</span></span> <span data-ttu-id="aa4ad-190">Wenn dies der Fall ist, lesen Sie sie sorgfältig, und stellen Sie sicher, dass der Code genau wie weiter oben aufgeführt wurde.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="aa4ad-191">Geben Sie einen Film in der Form &mdash; verwenden, z. B. "Citizen Kane", "Drama" und "1941".</span><span class="sxs-lookup"><span data-stu-id="aa4ad-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="aa4ad-192">(Oder was auch immer.) Klicken Sie dann auf **Film hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="aa4ad-193">Wenn alles gut geht, werden Sie umgeleitet, um die *Filme* Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="aa4ad-194">Stellen Sie sicher, dass Ihre neue Film aufgeführt ist.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-194">Make sure that your new movie is listed.</span></span>

![Seite "Movies" mit neu hinzugefügt Film](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="aa4ad-196">Überprüfen der Benutzereingabe</span><span class="sxs-lookup"><span data-stu-id="aa4ad-196">Validating User Input</span></span>

<span data-ttu-id="aa4ad-197">Wechseln Sie zurück zu den *AddMovie* Seite, oder führen Sie es noch mal.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="aa4ad-198">Geben Sie einen anderen Film, aber dieses Mal ein, geben Sie nur den Titel &mdash; Geben Sie beispielsweise "Einloggen ' in der Rain".</span><span class="sxs-lookup"><span data-stu-id="aa4ad-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="aa4ad-199">Klicken Sie dann auf **Film hinzufügen**.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="aa4ad-200">Sie werden umgeleitet, um die *Filme* Seite erneut.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="aa4ad-201">Sie finden den neuen Film, jedoch ist es unvollständig.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-201">You can find the new movie, but it's incomplete.</span></span>

![Filme Seite mit neuen Film, die einige Werte fehlen](entering-data/_static/image4.png)

<span data-ttu-id="aa4ad-203">Bei der Erstellung der *Filme* Tabelle Sie explizit angegeben, dass keines der Felder null sein kann.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="aa4ad-204">Hier haben Sie ein Anmeldeformular für neue Filme, und Sie können Felder leer lassen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="aa4ad-205">Dies ist ein Fehler.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-205">That's an error.</span></span>

<span data-ttu-id="aa4ad-206">In diesem Fall nicht die Datenbank tatsächlich auslösen (oder *auslösen*) einen Fehler.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="aa4ad-207">Sie nicht angegeben haben einen "Genre" oder ein Jahr, also den Code in die *AddMovie* Seite behandelt diese Werte als so genannten *leere Zeichenfolgen*.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="aa4ad-208">Wenn die SQL-Anweisung `Insert Into` -Befehl ausgeführt haben, der Felder für "Genre" und das Jahr nicht nützliche Daten darin enthalten, aber sie waren nicht null.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="aa4ad-209">Natürlich möchten keine Benutzer, die Hälfte leere Filminformationen in die Datenbank eingeben können.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="aa4ad-210">Die Lösung ist die Eingabe des Benutzers zu überprüfen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="aa4ad-211">Zunächst die Überprüfung stellt einfach sicher, dass der Benutzer einen Wert für alle Felder eingegeben hat (d. h. keine davon enthält eine leere Zeichenfolge).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="aa4ad-212">**NULL und leere Zeichenfolgen**</span><span class="sxs-lookup"><span data-stu-id="aa4ad-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="aa4ad-213">Bei der Programmierung wird unterschieden zwischen verschiedenen Arten von "kein Wert."</span><span class="sxs-lookup"><span data-stu-id="aa4ad-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="aa4ad-214">Ein Wert in der Regel ist *null* Wenn nicht festgelegt oder in keiner Weise initialisiert wurde.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="aa4ad-215">Im Gegensatz dazu kann eine Variable, die Zeichendaten (Zeichenfolgen) erwartet festgelegt werden, um eine *eine leere Zeichenfolge*.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="aa4ad-216">In diesem Fall ist der Wert nicht null; Es wird nur explizit auf eine Zeichenfolge mit Zeichen festgelegt wurde, dessen Länge 0 (null) ist.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="aa4ad-217">Diese beiden Anweisungen zeigen die Unterschiede:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="aa4ad-218">Es wurde ein wenig komplizierter als die, aber der wichtigste Punkt ist, die `null` eine Art unbestimmten Zustand darstellt.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="aa4ad-219">Und wieder ist es wichtig zu wissen genau, wenn ein Wert null ist und wenn es nur eine leere Zeichenfolge ist.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="aa4ad-220">Im Code für die *AddMovie* Seite erhalten Sie die Werte der Textfelder mit `Request.Form["title"]` und so weiter.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="aa4ad-221">Wenn die Seite zuerst ausgeführt wird, (bevor Sie die Schaltfläche klicken), wird der Wert des `Request.Form["title"]` ist null.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="aa4ad-222">Aber wenn Sie das Formular übermitteln `Request.Form["title"]` Ruft den Wert des der `title` Textfeld.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="aa4ad-223">Ist es nicht offensichtlich, aber ein leeres Textfeld ist nicht null; Es enthält nur eine leere Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="aa4ad-224">Klicken Sie daher beim Ausführen des Codes als Reaktion auf die Schaltfläche auf, `Request.Form["title"]` verfügt über eine leere Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="aa4ad-225">Warum ist diese Unterscheidung wichtig?</span><span class="sxs-lookup"><span data-stu-id="aa4ad-225">Why is this distinction important?</span></span> <span data-ttu-id="aa4ad-226">Bei der Erstellung der *Filme* Tabelle Sie explizit angegeben, dass keines der Felder null sein kann.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="aa4ad-227">Aber hier haben Sie ein Anmeldeformular für neue Filme, und Sie können Felder leer lassen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="aa4ad-228">Sie erwarten einigermaßen die Datenbank, sich zu beschweren, bei dem Versuch neuer Filme zu speichern, die Werte für "Genre" oder ein Jahr nicht hatten.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="aa4ad-229">Aber darum geht es &mdash; , auch wenn Sie diese Textfelder leer lassen, nicht die Werte null sind; sie leere Zeichenfolgen sind.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="aa4ad-230">Sie sind daher Speichern neuer Filme auf die Datenbank mit diesen Spalten leer &mdash; jedoch nicht null.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="aa4ad-231">&mdash;-Werte sind.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-231">&mdash; values.</span></span> <span data-ttu-id="aa4ad-232">Aus diesem Grund müssen Sie sicherstellen, dass Benutzer keine leere Zeichenfolge ist,, dies können Sie senden durch die Eingabe des Benutzers überprüfen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>


### <a name="the-validation-helper"></a><span data-ttu-id="aa4ad-233">Der Überprüfungshelfer</span><span class="sxs-lookup"><span data-stu-id="aa4ad-233">The Validation Helper</span></span>

<span data-ttu-id="aa4ad-234">ASP.NET Web Pages enthält eine Hilfsprogramm &mdash; der `Validation` Helper &mdash; , Sie verwenden können, um sicherzustellen, dass Benutzer Daten eingeben, die Ihren Anforderungen entspricht.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="aa4ad-235">Die `Validation` Hilfsprogramm ist eine der Hilfsprogramme, die für ASP.NET Web Pages, sodass Sie keine installieren Sie es als ein Paket mithilfe von NuGet, die Möglichkeit, die Installation der Gravatar-Hilfe in einem früheren Tutorial enthalten ist.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="aa4ad-236">Um die Eingabe des Benutzers zu überprüfen, müssen Sie Folgendes tun:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="aa4ad-237">Verwenden Sie Code, um anzugeben, dass die Werte in die Textfelder auf der Seite erforderlich sein soll.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="aa4ad-238">Fügen Sie einen Test in den Code, damit die Filminformationen in der Datenbank hinzugefügt wird, nur dann, wenn alles ordnungsgemäß überprüft.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="aa4ad-239">Fügen Sie Code in das Markup zum Anzeigen von Fehlermeldungen an.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="aa4ad-240">In den Codeblock in die *AddMovie* Seite, fügen Sie oben rechts oben Variablendeklarationen, bevor Sie den folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="aa4ad-241">Rufen Sie `Validation.RequireField` einmal für jedes Feld (`<input>` Element), in dem einen Eintrag erstellt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="aa4ad-242">Sie können auch eine benutzerdefinierte Fehlermeldung für jeden Aufruf, wie Sie hier hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="aa4ad-243">(Wir verschiedene Nachrichten nur an, dass Sie einfügen können beliebig vorhanden.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="aa4ad-244">Wenn ein Problem vorliegt, möchten Sie verhindern, dass der neue Filminformationen in der Datenbank eingefügt wird.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="aa4ad-245">In der `if(IsPost)` -Block `&&` (logisches AND), um eine andere Bedingung hinzuzufügen, die testet `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="aa4ad-246">Wenn Sie fertig sind, die gesamte `if(IsPost)` Block sieht aus wie im folgenden Code:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="aa4ad-247">Wenn ein Validierungsfehler mit einem der Felder, die Sie registriert den `Validation` Hilfsprogramms, des der `Validation.IsValid` Methode gibt false zurück.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="aa4ad-248">Und in diesem Fall kein Teil des Codes in diesen Block wird ausgeführt, damit keine ungültigen Movie-Einträge in der Datenbank eingefügt werden.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="aa4ad-249">Und Sie sind natürlich nicht weitergeleitet die *Filme* Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="aa4ad-250">Der vollständigen Code-Block, einschließlich des Validierungscodes, sieht nun wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="aa4ad-251">Anzeigen von Überprüfungsfehlern</span><span class="sxs-lookup"><span data-stu-id="aa4ad-251">Displaying Validation Errors</span></span>

<span data-ttu-id="aa4ad-252">Im letzte Schritt werden alle Fehlermeldungen angezeigt.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-252">The last step is to display any error messages.</span></span> <span data-ttu-id="aa4ad-253">Können Sie einzelne Nachrichten für jede Validierungsfehler anzeigen, oder Sie können eine Zusammenfassung oder beides anzeigen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="aa4ad-254">Für dieses Tutorial müssen Sie beide Methoden verwenden, damit Sie sehen, wie es funktioniert.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="aa4ad-255">Neben den jeweiligen `<input>` -Element, das Sie überprüfen können, rufen die `Html.ValidationMessage` Methode und übergeben sie den Namen der der `<input>` Element, die Sie überprüfen können.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="aa4ad-256">Sie fügen die `Html.ValidationMessage` Methode rechts, in dem die Fehlermeldung angezeigt werden sollen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="aa4ad-257">Wenn die Seite ausgeführt wird, wird die `Html.ValidationMessage` -Methode rendert ein `<span>` Element, in dem der Validierungsfehler geht.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="aa4ad-258">(Wenn kein Fehler vorliegt, die `<span>` Element gerendert wird, aber es ist kein Text darin.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="aa4ad-259">Ändern Sie das Markup auf der Seite, sodass es enthält eine `Html.ValidationMessage` -Methode für jede der drei `<input>` Elemente auf der Seite, wie im folgenden Beispiel:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="aa4ad-260">Um die Funktionsweise der Zusammenfassung angezeigt wird, außerdem fügen Sie das folgende Markup und code direkt nach der `<h1>Add a Movie</h1>` Element auf der Seite:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="aa4ad-261">In der Standardeinstellung die `Html.ValidationSummary` Methode zeigt alle Nachrichten für die Validierung in einer Liste (ein `<ul>` Elements in einer `<div>` Element).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="aa4ad-262">Wie bei der `Html.ValidationMessage` -Methode, das Markup für die Zusammenfassung der Validierung wird immer gerendert; Wenn keine Fehler vorliegen, werden keine Listenelemente gerendert.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="aa4ad-263">Die Zusammenfassung kann eine alternative Möglichkeit zum validierungsmeldungen werden nicht angezeigt werden die `Html.ValidationMessage` Methode, um jedes Feld-spezifischer Fehler anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="aa4ad-264">Sie können auch sowohl eine Zusammenfassung als auch die Details.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="aa4ad-265">Sie können auch die `Html.ValidationSummary` Methode, um eine generische Fehlermeldung angezeigt, und verwenden Sie dann auf einzelne `Html.ValidationMessage` aufrufen, um Details anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="aa4ad-266">Auf der Seite abgeschlossen sieht nun wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="aa4ad-267">Das ist alles.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-267">That's it.</span></span> <span data-ttu-id="aa4ad-268">Sie können die Seite jetzt testen, durch das Hinzufügen eines Films, aber eine oder mehrere Felder auslassen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="aa4ad-269">Wenn Sie dies tun, sehen Sie den folgenden Fehler angezeigt:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-269">When you do, you see the following error display:</span></span>

![Hinzufügen von Film-Seite, die mit der Überprüfung Fehlermeldungen](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="aa4ad-271">Die Validierungsfehlermeldungen formatieren</span><span class="sxs-lookup"><span data-stu-id="aa4ad-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="aa4ad-272">Sie können sehen, dass Fehlermeldungen, aber sie nicht wirklich sehr gut hervorstechen.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="aa4ad-273">Es ist eine einfache Möglichkeit, die Fehlermeldungen, jedoch zu formatieren.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="aa4ad-274">So formatieren Sie die einzelne Fehlermeldungen, die angezeigt werden `Html.ValidationMessage`, erstellen Sie eine CSS-Formatklasse `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="aa4ad-275">Um das Aussehen für die Zusammenfassung der Validierung zu definieren, erstellen Sie eine CSS-Formatklasse `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="aa4ad-276">Um zu sehen, wie dieses Verfahren funktioniert, fügen einen `<style>` Element innerhalb der `<head>` Abschnitt der Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="aa4ad-277">Definieren Sie dann die Style-Klassen, die mit dem Namen `field-validation-error` und `validation-summary-errors` , enthalten die folgenden Regeln:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="aa4ad-278">Normalerweise legen Sie wahrscheinlich Formatinformationen in einer separaten *CSS* -Datei, aber aus Gründen der Einfachheit Sie können sie auf der Seite jetzt.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="aa4ad-279">(Weiter unten in diesem Tutorial festgelegt, verschieben Sie die CSS-Regeln in einer separaten *CSS* Datei.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="aa4ad-280">Wenn ein Validierungsfehler, die `Html.ValidationMessage` -Methode rendert ein `<span>` -Element, das umfasst `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="aa4ad-281">Durch Hinzufügen einer Formatdefinition für diese Klasse, können Sie konfigurieren, wie die Nachricht aussieht.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="aa4ad-282">Wenn Fehler vorliegen, die `ValidationSummary` Methode entsprechend dynamisch rendert das Attribut `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="aa4ad-283">Führen Sie die Seite erneut aus, und lassen Sie absichtlich ein Paar Felder aus.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="aa4ad-284">Die Fehler sind jetzt auffälliger.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-284">The errors are now more noticeable.</span></span> <span data-ttu-id="aa4ad-285">(In der Tat sie overdone sind, aber das ist um zu zeigen, was Sie tun können.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Anzeigen von Validierungsfehlern, die Formatvorlage wurde Film-Seite hinzufügen](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="aa4ad-287">Hinzufügen eines Links zu der Seite "Movies"</span><span class="sxs-lookup"><span data-stu-id="aa4ad-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="aa4ad-288">Ein letzter Schritt ist, es praktisch sein, die zum Abrufen der *AddMovie* Seite aus dem ursprünglichen Movie-Angebot.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="aa4ad-289">Öffnen der *Filme* Seite erneut.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-289">Open the *Movies* page again.</span></span> <span data-ttu-id="aa4ad-290">Nach dem schließenden `</div>` Tag, das folgt der `WebGrid` Helper, fügen Sie das folgende Markup hinzu:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="aa4ad-291">Wie Sie bereits gesehen haben, ASP.NET interpretiert die `~` Operator als Stamm der Website.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="aa4ad-292">Sie müssen keine verwenden die `~` Operator ist; können Sie das Markup `<a href="./AddMovie">Add a movie</a>` oder eine andere Möglichkeit, den Pfad zu definieren, die HTML versteht.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="aa4ad-293">Aber die `~` Operator ist ein guter allgemeiner Ansatz bei der Erstellung von Links für Razor-Seiten, da die Website eine flexiblere ist – Wenn Sie die aktuelle Seite in einen Unterordner verschieben, wechseln weiterhin der Link zur der *AddMovie* Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="aa4ad-294">(Beachten Sie, dass die `~` Operator funktioniert nur in *.cshtml* Seiten.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="aa4ad-295">ASP.NET verstanden werden, aber es ist keine standard-HTML.)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="aa4ad-296">Wenn Sie fertig sind, führen Sie die *Filme* Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="aa4ad-297">Es sieht so aus wie auf dieser Seite:</span><span class="sxs-lookup"><span data-stu-id="aa4ad-297">It will look like this page:</span></span>

![Seite "Movies" mit Link zur Seite "Movies hinzufügen" "](entering-data/_static/image7.png)

<span data-ttu-id="aa4ad-299">Klicken Sie auf die **fügen Sie einen Film** Link, um sicherzustellen, dass darin auf die *AddMovie* Seite.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="aa4ad-300">Als Nächstes kommen</span><span class="sxs-lookup"><span data-stu-id="aa4ad-300">Coming Up Next</span></span>

<span data-ttu-id="aa4ad-301">Im nächsten Tutorial erfahren Sie, wie, damit Benutzer Daten zu bearbeiten, die bereits in der Datenbank vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="aa4ad-302">Vollständige Liste für AddMovie-Seite</span><span class="sxs-lookup"><span data-stu-id="aa4ad-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="aa4ad-303">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="aa4ad-303">Additional Resources</span></span>

- [<span data-ttu-id="aa4ad-304">Einführung in ASP.NET-Webprogrammierung mithilfe der Razor-Syntax</span><span class="sxs-lookup"><span data-stu-id="aa4ad-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="aa4ad-305">[SQL INSERT INTO-Anweisung](http://www.w3schools.com/sql/sql_insert.asp) auf der Website W3Schools</span><span class="sxs-lookup"><span data-stu-id="aa4ad-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="aa4ad-306">[Überprüfen der Benutzereingabe in der ASP.NET Web Pages-Websites](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="aa4ad-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="aa4ad-307">Weitere Informationen zum Arbeiten mit der `Validation` Helper.</span><span class="sxs-lookup"><span data-stu-id="aa4ad-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="aa4ad-308">[Zurück](form-basics.md)
> [Weiter](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="aa4ad-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>
