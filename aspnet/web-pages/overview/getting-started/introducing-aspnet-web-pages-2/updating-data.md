---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/updating-data
title: Einführung in ASP.net Web Pages Aktualisieren von Datenbankdaten | Microsoft-Dokumentation
author: Rick-Anderson
description: In diesem Tutorial wird gezeigt, wie Sie einen vorhandenen Datenbankeintrag aktualisieren (ändern), wenn Sie ASP.net Web Pages (Razor) verwenden. Dabei wird davon ausgegangen, dass Sie die Reihe...
ms.author: riande
ms.date: 01/02/2018
ms.assetid: ac86ec9c-6b69-485b-b9e0-8b9127b13e6b
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/updating-data
msc.type: authoredcontent
ms.openlocfilehash: 8f8bcfb7d9d2416a2699776cadbdaae8e12415ba
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78463491"
---
# <a name="introducing-aspnet-web-pages---updating-database-data"></a><span data-ttu-id="e21ca-104">Einführung in ASP.net Web Pages Aktualisieren von Datenbankdaten</span><span class="sxs-lookup"><span data-stu-id="e21ca-104">Introducing ASP.NET Web Pages - Updating Database Data</span></span>

<span data-ttu-id="e21ca-105">von [Tom fitzmacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="e21ca-105">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="e21ca-106">In diesem Tutorial wird gezeigt, wie Sie einen vorhandenen Datenbankeintrag aktualisieren (ändern), wenn Sie ASP.net Web Pages (Razor) verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-106">This tutorial shows you how to update (change) an existing database entry when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="e21ca-107">Dabei wird davon ausgegangen, dass Sie die Reihe durch die [Eingabe von Daten mithilfe von Formularen mit ASP.net Web Pages](entering-data.md)abgeschlossen haben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-107">It assumes you have completed the series through [Entering Data by Using Forms Using ASP.NET Web Pages](entering-data.md).</span></span>
> 
> <span data-ttu-id="e21ca-108">Sie lernen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="e21ca-108">What you'll learn:</span></span>
> 
> - <span data-ttu-id="e21ca-109">Auswählen eines einzelnen Datensatzes in der `WebGrid`-Hilfsprogramm.</span><span class="sxs-lookup"><span data-stu-id="e21ca-109">How to select an individual record in the `WebGrid` helper.</span></span>
> - <span data-ttu-id="e21ca-110">Lesen eines einzelnen Datensatzes aus einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="e21ca-110">How to read a single record from a database.</span></span>
> - <span data-ttu-id="e21ca-111">Vorab Laden eines Formulars mit Werten aus dem Datenbankdaten Satz.</span><span class="sxs-lookup"><span data-stu-id="e21ca-111">How to preload a form with values from the database record.</span></span>
> - <span data-ttu-id="e21ca-112">Aktualisieren eines vorhandenen Datensatzes in einer Datenbank.</span><span class="sxs-lookup"><span data-stu-id="e21ca-112">How to update an existing record in a database.</span></span>
> - <span data-ttu-id="e21ca-113">Informationen zum Speichern von Informationen auf der Seite, ohne diese anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-113">How to store information in the page without displaying it.</span></span>
> - <span data-ttu-id="e21ca-114">Verwenden eines ausgeblendeten Felds zum Speichern von Informationen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-114">How to use a hidden field to store information.</span></span>
>   
> 
> <span data-ttu-id="e21ca-115">Erörterte Features und Technologien:</span><span class="sxs-lookup"><span data-stu-id="e21ca-115">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="e21ca-116">Das `WebGrid`-Hilfsprogramm.</span><span class="sxs-lookup"><span data-stu-id="e21ca-116">The `WebGrid` helper.</span></span>
> - <span data-ttu-id="e21ca-117">Der SQL `Update`-Befehl.</span><span class="sxs-lookup"><span data-stu-id="e21ca-117">The SQL `Update` command.</span></span>
> - <span data-ttu-id="e21ca-118">Die `Database.Execute` -Methode.</span><span class="sxs-lookup"><span data-stu-id="e21ca-118">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="e21ca-119">Ausgeblendete Felder (`<input type="hidden">`).</span><span class="sxs-lookup"><span data-stu-id="e21ca-119">Hidden fields (`<input type="hidden">`).</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="e21ca-120">Sie lernen Folgendes</span><span class="sxs-lookup"><span data-stu-id="e21ca-120">What You'll Build</span></span>

<span data-ttu-id="e21ca-121">Im vorherigen Tutorial haben Sie gelernt, wie Sie einer Datenbank einen Datensatz hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-121">In the previous tutorial, you learned how to add a record to a database.</span></span> <span data-ttu-id="e21ca-122">Hier erfahren Sie, wie Sie einen Datensatz für die Bearbeitung anzeigen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-122">Here, you'll learn how to display a record for editing.</span></span> <span data-ttu-id="e21ca-123">Auf der Seite *Filme* aktualisieren Sie das `WebGrid` Hilfsprogramm, sodass neben den einzelnen Filmen ein Link **Bearbeiten** angezeigt wird:</span><span class="sxs-lookup"><span data-stu-id="e21ca-123">In the *Movies* page, you'll update the `WebGrid` helper so that it displays an **Edit** link next to each movie:</span></span>

![WebGrid-Anzeige einschließlich eines "Bearbeiten"-Links für die einzelnen Filme](updating-data/_static/image1.png)

<span data-ttu-id="e21ca-125">Wenn Sie auf den Link " **Bearbeiten** " klicken, gelangen Sie zu einer anderen Seite, auf der sich die Filminformationen bereits in einem Formular befinden:</span><span class="sxs-lookup"><span data-stu-id="e21ca-125">When you click the **Edit** link, it takes you to a different page, where the movie information is already in a form:</span></span>

![Movie Page bearbeiten, die den zu bearbeitenden Film anzeigt](updating-data/_static/image2.png)

<span data-ttu-id="e21ca-127">Sie können alle Werte ändern.</span><span class="sxs-lookup"><span data-stu-id="e21ca-127">You can change any of the values.</span></span> <span data-ttu-id="e21ca-128">Wenn Sie die Änderungen übermitteln, aktualisiert der Code auf der Seite die Datenbank und führt Sie zurück zur filmauflistung.</span><span class="sxs-lookup"><span data-stu-id="e21ca-128">When you submit the changes, the code in the page updates the database and takes you back to the movie listing.</span></span>

<span data-ttu-id="e21ca-129">Dieser Teil des Prozesses funktioniert fast genauso wie die Seite " *addmovie. cshtml* ", die Sie im vorherigen Tutorial erstellt haben. der Großteil dieses Lernprogramms wird Ihnen sehr vertraut sein.</span><span class="sxs-lookup"><span data-stu-id="e21ca-129">This part of the process works almost exactly like the *AddMovie.cshtml* page you created in the previous tutorial, so much of this tutorial will be familiar.</span></span>

<span data-ttu-id="e21ca-130">Es gibt mehrere Möglichkeiten, wie Sie eine Möglichkeit zum Bearbeiten eines einzelnen Films implementieren können.</span><span class="sxs-lookup"><span data-stu-id="e21ca-130">There are several ways you could implement a way to edit an individual movie.</span></span> <span data-ttu-id="e21ca-131">Der angezeigte Ansatz wurde gewählt, da er einfach zu implementieren und leicht verständlich ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-131">The approach shown was chosen because it's easy to implement and easy to understand.</span></span>

## <a name="adding-an-edit-link-to-the-movie-listing"></a><span data-ttu-id="e21ca-132">Hinzufügen eines Bearbeitungs Links zur Movie-Auflistung</span><span class="sxs-lookup"><span data-stu-id="e21ca-132">Adding an Edit Link to the Movie Listing</span></span>

<span data-ttu-id="e21ca-133">Um zu beginnen, aktualisieren Sie die Seite " *Filme* ", sodass jede Filmliste auch einen **Bearbeitungs** Link enthält.</span><span class="sxs-lookup"><span data-stu-id="e21ca-133">To begin, you'll update the *Movies* page so that each movie listing also contains an **Edit** link.</span></span>

<span data-ttu-id="e21ca-134">Öffnen Sie die Datei *Movies. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="e21ca-134">Open the *Movies.cshtml* file.</span></span>

<span data-ttu-id="e21ca-135">Ändern Sie im Text der Seite das `WebGrid` Markup, indem Sie eine Spalte hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-135">In the body of the page, change the `WebGrid` markup by adding a column.</span></span> <span data-ttu-id="e21ca-136">Hier ist das geänderte Markup:</span><span class="sxs-lookup"><span data-stu-id="e21ca-136">Here's the modified markup:</span></span>

[!code-html[Main](updating-data/samples/sample1.html?highlight=6)]

<span data-ttu-id="e21ca-137">Die neue Spalte lautet wie folgt:</span><span class="sxs-lookup"><span data-stu-id="e21ca-137">The new column is this one:</span></span>

[!code-html[Main](updating-data/samples/sample2.html)]

<span data-ttu-id="e21ca-138">Der Punkt dieser Spalte besteht darin, einen Link (`<a>`-Element) anzuzeigen, dessen Text "Edit" lautet.</span><span class="sxs-lookup"><span data-stu-id="e21ca-138">The point of this column is to show a link (`<a>` element) whose text says "Edit".</span></span> <span data-ttu-id="e21ca-139">Nachfolgend wird ein Link erstellt, der wie folgt aussieht, wenn die Seite ausgeführt wird, wobei der `id` Wert für die einzelnen Filme anders ist:</span><span class="sxs-lookup"><span data-stu-id="e21ca-139">What we're after is to create a link that looks like the following when the page runs, with the `id` value different for each movie:</span></span>

[!code-css[Main](updating-data/samples/sample3.css)]

<span data-ttu-id="e21ca-140">Mit diesem Link wird eine Seite mit dem Namen " *editmovie*" aufgerufen, die die Abfrage Zeichenfolge `?id=7` an diese Seite übergibt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-140">This link will invoke a page named *EditMovie*, and it will pass the query string `?id=7` to that page.</span></span>

<span data-ttu-id="e21ca-141">Die Syntax für die neue Spalte kann etwas kompliziert aussehen, aber das ist nur, weil Sie mehrere Elemente vereint.</span><span class="sxs-lookup"><span data-stu-id="e21ca-141">The syntax for the new column might look a bit complex, but that's only because it puts together several elements.</span></span> <span data-ttu-id="e21ca-142">Jedes einzelne Element ist unkompliziert.</span><span class="sxs-lookup"><span data-stu-id="e21ca-142">Each individual element is straightforward.</span></span> <span data-ttu-id="e21ca-143">Wenn Sie sich nur auf das `<a>` Element konzentrieren, sehen Sie dieses Markup:</span><span class="sxs-lookup"><span data-stu-id="e21ca-143">If you concentrate on just the `<a>` element, you see this markup:</span></span>

[!code-html[Main](updating-data/samples/sample4.html)]

<span data-ttu-id="e21ca-144">Hintergrundinformationen zur Funktionsweise des Rasters: im Raster werden Zeilen angezeigt, eine für jeden Daten Bank Datensatz und Spalten für jedes Feld im Datenbankdaten Satz.</span><span class="sxs-lookup"><span data-stu-id="e21ca-144">Some background about how the grid works: the grid displays rows, one for each database record, and it displays columns for each field in the database record.</span></span> <span data-ttu-id="e21ca-145">Während die einzelnen Raster Zeilen erstellt werden, enthält das `item` Objekt den Datenbankdaten Satz (Item) für diese Zeile.</span><span class="sxs-lookup"><span data-stu-id="e21ca-145">While each grid row is being constructed, the `item` object contains the database record (item) for that row.</span></span> <span data-ttu-id="e21ca-146">Diese Anordnung ermöglicht es Ihnen, die Daten für diese Zeile im Code zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e21ca-146">This arrangement gives you a way in code to get at the data for that row.</span></span> <span data-ttu-id="e21ca-147">Dies sehen Sie hier: der Ausdruck `item.ID` den ID-Wert des aktuellen Daten Bank Elements erhält.</span><span class="sxs-lookup"><span data-stu-id="e21ca-147">That's what you see here: the expression `item.ID` is getting the ID value of the current database item.</span></span> <span data-ttu-id="e21ca-148">Mit `item.Title`, `item.Genre`oder `item.Year`können Sie alle Daten Bankwerte (Titel, Genre oder Jahr) auf dieselbe Weise erhalten.</span><span class="sxs-lookup"><span data-stu-id="e21ca-148">You could get any of the database values (title, genre, or year) the same way by using `item.Title`, `item.Genre`, or `item.Year`.</span></span>

<span data-ttu-id="e21ca-149">Der Ausdruck `"~/EditMovie?id=@item.ID` kombiniert den hart codierten Teil der Ziel-URL (`~/EditMovie?id=`) mit dieser dynamisch abgeleiteten ID.</span><span class="sxs-lookup"><span data-stu-id="e21ca-149">The expression `"~/EditMovie?id=@item.ID` combines the hard-coded part of the target URL (`~/EditMovie?id=`) with this dynamically derived ID.</span></span> <span data-ttu-id="e21ca-150">(Im vorherigen Tutorial haben Sie den `~`-Operator gesehen; es handelt sich um einen ASP.net-Operator, der den aktuellen Website Stamm darstellt.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-150">(You saw the `~` operator in the previous tutorial; it's an ASP.NET operator that represents the current website root.)</span></span>

<span data-ttu-id="e21ca-151">Das Ergebnis ist, dass dieser Teil des Markups in der-Spalte zur Laufzeit einfach etwas wie das folgende Markup erzeugt:</span><span class="sxs-lookup"><span data-stu-id="e21ca-151">The result is that this part of the markup in the column simply produces something like the following markup at run time:</span></span>

[!code-xml[Main](updating-data/samples/sample5.xml)]

<span data-ttu-id="e21ca-152">Natürlich ist der tatsächliche Wert `id` für jede Zeile unterschiedlich.</span><span class="sxs-lookup"><span data-stu-id="e21ca-152">Naturally, the actual value of `id` will be different for each row.</span></span>

## <a name="creating-a-custom-display-for-a-grid-column"></a><span data-ttu-id="e21ca-153">Erstellen einer benutzerdefinierten Anzeige für eine Raster Spalte</span><span class="sxs-lookup"><span data-stu-id="e21ca-153">Creating a Custom Display for a Grid Column</span></span>

<span data-ttu-id="e21ca-154">Nun zurück zur Raster Spalte.</span><span class="sxs-lookup"><span data-stu-id="e21ca-154">Now back to the grid column.</span></span> <span data-ttu-id="e21ca-155">Die drei Spalten, die Sie ursprünglich im Raster besaßen, haben nur Datenwerte (Titel, Genre und Jahr) angezeigt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-155">The three columns you originally had in the grid displayed only data values (title, genre, and year).</span></span> <span data-ttu-id="e21ca-156">Sie haben diese Anzeige angegeben, indem Sie den Namen der Daten Bank Spalte übergeben &mdash; z. b. `grid.Column("Title")`.</span><span class="sxs-lookup"><span data-stu-id="e21ca-156">You specified this display by passing the name of the database column &mdash; for example, `grid.Column("Title")`.</span></span>

<span data-ttu-id="e21ca-157">Diese neue Spalte zum **Bearbeiten** des Links ist unterschiedlich.</span><span class="sxs-lookup"><span data-stu-id="e21ca-157">This new **Edit** link column is different.</span></span> <span data-ttu-id="e21ca-158">Anstatt einen Spaltennamen anzugeben, übergeben Sie einen `format` Parameter.</span><span class="sxs-lookup"><span data-stu-id="e21ca-158">Instead of specifying a column name, you're passing a `format` parameter.</span></span> <span data-ttu-id="e21ca-159">Mithilfe dieses Parameters können Sie Markup definieren, das vom `WebGrid`-Hilfsprogramm zusammen mit dem `item` Wert dargestellt wird, um die Spaltendaten Fett oder grün oder in einem beliebigen Format anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-159">This parameter lets you define markup that the `WebGrid` helper will render along with the `item` value to display the column data as bold or green or in whatever format that you want.</span></span> <span data-ttu-id="e21ca-160">Wenn Sie z. b. möchten, dass der Titel fett angezeigt wird, können Sie eine Spalte wie im folgenden Beispiel erstellen:</span><span class="sxs-lookup"><span data-stu-id="e21ca-160">For example, if you wanted the title to appear bold, you could create a column like this example:</span></span>

[!code-html[Main](updating-data/samples/sample6.html)]

<span data-ttu-id="e21ca-161">(Die verschiedenen `@` Zeichen, die Sie in der `format`-Eigenschaft sehen, markieren den Übergang zwischen Markup und einem Codewert.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-161">(The various `@` characters you see in the `format` property mark the transition between markup and a code value.)</span></span>

<span data-ttu-id="e21ca-162">Wenn Sie die `format`-Eigenschaft kennen, ist es leichter zu verstehen, wie die neue Spalte zum **Bearbeiten** von Links zusammengestellt wird:</span><span class="sxs-lookup"><span data-stu-id="e21ca-162">Once you know about the `format` property, it's easier to understand how the new **Edit** link column is put together:</span></span>

[!code-html[Main](updating-data/samples/sample7.html)]

<span data-ttu-id="e21ca-163">Die Spalte besteht *nur* aus dem Markup, das den Link rendert, sowie aus einigen Informationen (der ID), die aus dem Datenbankdaten Satz für die Zeile extrahiert werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-163">The column consists *only* of the markup that renders the link, plus some information (the ID) that's extracted from the database record for the row.</span></span>

> [!TIP]
> 
> <span data-ttu-id="e21ca-164">**Benannte Parameter und Positions Parameter für eine Methode**</span><span class="sxs-lookup"><span data-stu-id="e21ca-164">**Named Parameters and Positional Parameters for a Method**</span></span>
> 
> <span data-ttu-id="e21ca-165">Viele Male, wenn Sie eine Methode aufgerufen und Parameter an diese übergeben haben, haben Sie einfach die durch Kommas getrennten Parameterwerte aufgelistet.</span><span class="sxs-lookup"><span data-stu-id="e21ca-165">Many times when you've called a method and passed parameters to it, you've simply listed the parameter values separated by commas.</span></span> <span data-ttu-id="e21ca-166">Hier sind einige Beispiele angegeben:</span><span class="sxs-lookup"><span data-stu-id="e21ca-166">Here are a couple of examples:</span></span>
> 
> `db.Execute(insertCommand, title, genre, year)`
> 
> `Validation.RequireField("title", "You must enter a title")`
> 
> <span data-ttu-id="e21ca-167">Wir haben das Problem beim ersten Mal in diesem Code nicht erwähnt, aber in jedem Fall übergeben Sie Parameter an die Methoden in einer bestimmten Reihenfolge &mdash; nämlich die Reihenfolge, in der die Parameter in dieser Methode definiert werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-167">We didn't mention the issue when you first saw this code, but in each case, you're passing parameters to the methods in a specific order &mdash; namely, the order in which the parameters are defined in that method.</span></span> <span data-ttu-id="e21ca-168">Wenn Sie für `db.Execute` und `Validation.RequireFields`die Reihenfolge der übergebenen Werte gemischt haben, erhalten Sie eine Fehlermeldung, wenn die Seite ausgeführt wird, oder zumindest einige seltsame Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="e21ca-168">For `db.Execute` and `Validation.RequireFields`, if you mixed up the order of the values you pass, you'd get an error message when the page runs, or at least some strange results.</span></span> <span data-ttu-id="e21ca-169">Natürlich müssen Sie die Reihenfolge kennen, in der die Parameter übergeben werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-169">Clearly, you have to know the order to pass the parameters in.</span></span> <span data-ttu-id="e21ca-170">(In webmatrix kann IntelliSense Ihnen helfen, den Namen, den Typ und die Reihenfolge der Parameter zu ermitteln.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-170">(In WebMatrix, IntelliSense can help you learn figure out the name, type, and order of the parameters.)</span></span>
> 
> <span data-ttu-id="e21ca-171">Anstatt Werte in der Reihenfolge zu übergeben, können Sie *benannte Parameter*verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-171">As an alternative to passing values in order, you can use *named parameters*.</span></span> <span data-ttu-id="e21ca-172">(Das Übergeben von Parametern in der Reihenfolge wird als Verwenden von *Positions Parametern*bezeichnet.) Bei benannten Parametern fügen Sie den Namen des Parameters explizit ein, wenn Sie seinen Wert übergeben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-172">(Passing parameters in order is known as using *positional parameters*.) For named parameters, you explicitly include the name of the parameter when passing its value.</span></span> <span data-ttu-id="e21ca-173">In diesen Tutorials haben Sie benannte Parameter bereits mehrmals verwendet.</span><span class="sxs-lookup"><span data-stu-id="e21ca-173">You've used named parameters already a number of times in these tutorials.</span></span> <span data-ttu-id="e21ca-174">Beispiel:</span><span class="sxs-lookup"><span data-stu-id="e21ca-174">For example:</span></span>
> 
> [!code-csharp[Main](updating-data/samples/sample8.cs)]
> 
> <span data-ttu-id="e21ca-175">und</span><span class="sxs-lookup"><span data-stu-id="e21ca-175">and</span></span>
> 
> [!code-css[Main](updating-data/samples/sample9.css)]
> 
> <span data-ttu-id="e21ca-176">Benannte Parameter sind in einigen Situationen praktisch, insbesondere dann, wenn eine Methode viele Parameter annimmt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-176">Named parameters are handy for a couple of situations, especially when a method takes many parameters.</span></span> <span data-ttu-id="e21ca-177">Eine ist, wenn Sie nur einen oder zwei Parameter übergeben möchten, aber die Werte, die Sie übergeben möchten, nicht zu den ersten Positionen in der Parameterliste gehören.</span><span class="sxs-lookup"><span data-stu-id="e21ca-177">One is when you want to pass only one or two parameters, but the values you want to pass are not among the first positions in the parameter list.</span></span> <span data-ttu-id="e21ca-178">Eine andere Situation ist, wenn Sie den Code besser lesbar machen möchten, indem Sie die Parameter in der Reihenfolge übergeben, die für Sie am sinnvollsten ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-178">Another situation is when you want to make your code more readable by passing the parameters in the order that makes the most sense to you.</span></span>
> 
> <span data-ttu-id="e21ca-179">Um benannte Parameter zu verwenden, müssen Sie die Namen der Parameter kennen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-179">Obviously, to use named parameters, you have to know the names of the parameters.</span></span> <span data-ttu-id="e21ca-180">Webmatrix IntelliSense kann die Namen *anzeigen* , aber Sie kann Sie zurzeit nicht für Sie ausfüllen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-180">WebMatrix IntelliSense can *show* you the names, but it cannot currently fill them in for you.</span></span>

## <a name="creating-the-edit-page"></a><span data-ttu-id="e21ca-181">Erstellen der Seite "Bearbeiten"</span><span class="sxs-lookup"><span data-stu-id="e21ca-181">Creating the Edit Page</span></span>

<span data-ttu-id="e21ca-182">Nun können Sie die *editmovie* -Seite erstellen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-182">Now you can create the *EditMovie* page.</span></span> <span data-ttu-id="e21ca-183">Wenn Benutzer auf den Link " **Bearbeiten** " klicken, werden Sie auf dieser Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-183">When users click the **Edit** link, they'll end up on this page.</span></span>

<span data-ttu-id="e21ca-184">Erstellen Sie eine Seite mit dem Namen " *editmovie. cshtml* ", und ersetzen Sie die Elemente in der Datei durch das folgende Markup:</span><span class="sxs-lookup"><span data-stu-id="e21ca-184">Create a page named *EditMovie.cshtml* and replace what's in the file with the following markup:</span></span>

[!code-cshtml[Main](updating-data/samples/sample10.cshtml)]

<span data-ttu-id="e21ca-185">Dieses Markup und dieser Code ähneln denen, die Sie auf der Seite " *addmovie* " haben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-185">This markup and code is similar to what you have in the *AddMovie* page.</span></span> <span data-ttu-id="e21ca-186">Es gibt einen kleinen Unterschied im Text für die Schaltfläche "Senden".</span><span class="sxs-lookup"><span data-stu-id="e21ca-186">There's a small difference in the text for the submit button.</span></span> <span data-ttu-id="e21ca-187">Wie bei der *addmovie* -Seite gibt es einen `Html.ValidationSummary`-Befehl, der Validierungs Fehler anzeigt, sofern vorhanden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-187">As with the *AddMovie* page, there's an `Html.ValidationSummary` call that will display validation errors if there are any.</span></span> <span data-ttu-id="e21ca-188">Diesmal lassen wir Aufrufe an `Validation.Message`aus, da Fehler in der Validierungs Zusammenfassung angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-188">This time we're leaving out calls to `Validation.Message`, since errors will be displayed in the validation summary.</span></span> <span data-ttu-id="e21ca-189">Wie bereits im vorherigen Tutorial erwähnt, können Sie die Validierungs Zusammenfassung und die einzelnen Fehlermeldungen in verschiedenen Kombinationen verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-189">As noted in the previous tutorial, you can use the validation summary and the individual error messages in various combinations.</span></span>

<span data-ttu-id="e21ca-190">Beachten Sie, dass das `method`-Attribut des `<form>`-Elements auf `post`festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-190">Notice again that the `method` attribute of the `<form>` element is set to `post`.</span></span> <span data-ttu-id="e21ca-191">Wie bei der *addmovie. cshtml* -Seite nimmt diese Seite Änderungen an der-Datenbank vor.</span><span class="sxs-lookup"><span data-stu-id="e21ca-191">As with the *AddMovie.cshtml* page, this page makes changes to the database.</span></span> <span data-ttu-id="e21ca-192">Daher sollte in diesem Formular ein `POST` Vorgang durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-192">Therefore, this form should perform a `POST` operation.</span></span> <span data-ttu-id="e21ca-193">(Weitere Informationen zum Unterschied zwischen `GET` und `POST` Vorgängen finden Sie in der Rand Leiste " [Get", "Post" und "http Verb Safety](form-basics.md#GET,_POST,_and_HTTP_Verb_Safety) " im Tutorial zu HTML-Formularen.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-193">(For more about the difference between `GET` and `POST` operations, see the [GET, POST, and HTTP Verb Safety](form-basics.md#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the tutorial on HTML forms.)</span></span>

<span data-ttu-id="e21ca-194">Wie Sie in einem früheren Tutorial gesehen haben, werden die `value` Attribute der Textfelder mit Razor-Code festgelegt, um Sie vorab zu laden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-194">As you saw in an earlier tutorial, the `value` attributes of the text boxes are being set with Razor code in order to preload them.</span></span> <span data-ttu-id="e21ca-195">Dieses Mal verwenden Sie jedoch Variablen wie `title` und `genre` für diese Aufgabe anstelle `Request.Form["title"]`:</span><span class="sxs-lookup"><span data-stu-id="e21ca-195">This time, though, you're using variables like `title` and `genre` for that task instead of `Request.Form["title"]`:</span></span>

`<input type="text" name="title" value="@title" />`

<span data-ttu-id="e21ca-196">Wie zuvor lädt dieses Markup die Textfeld-Werte mit den Film Werten vorab.</span><span class="sxs-lookup"><span data-stu-id="e21ca-196">As before, this markup will preload the text box values with the movie values.</span></span> <span data-ttu-id="e21ca-197">Sie werden in Kürze sehen, warum es praktisch ist, Variablen zu verwenden, anstatt das `Request` Objekt zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-197">You'll see in a moment why it's handy to use variables this time instead of using the `Request` object.</span></span>

<span data-ttu-id="e21ca-198">Auf dieser Seite ist auch ein `<input type="hidden">`-Element vorhanden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-198">There's also a `<input type="hidden">` element on this page.</span></span> <span data-ttu-id="e21ca-199">Dieses Element speichert die Film-ID, ohne Sie auf der Seite sichtbar zu machen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-199">This element stores the movie ID without making it visible on the page.</span></span> <span data-ttu-id="e21ca-200">Die ID wird zunächst mithilfe eines Abfrage Zeichenfolgen-Werts (`?id=7` oder ähnlich in der URL) an die Seite übermittelt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-200">The ID is initially passed to the page by using a query string value (`?id=7` or similar in the URL).</span></span> <span data-ttu-id="e21ca-201">Wenn Sie den ID-Wert in ein ausgeblendetes Feld einfügen, können Sie sicherstellen, dass es verfügbar ist, wenn das Formular übermittelt wird, auch wenn Sie nicht mehr auf die ursprüngliche URL zugreifen können, mit der die Seite aufgerufen wurde.</span><span class="sxs-lookup"><span data-stu-id="e21ca-201">By putting the ID value into a hidden field, you can make sure that it's available when the form is submitted, even if you no longer have access to the original URL that the page was invoked with.</span></span>

<span data-ttu-id="e21ca-202">Im Gegensatz zur *addmovie* -Seite verfügt der Code für die *editmovie* -Seite über zwei unterschiedliche Funktionen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-202">Unlike the *AddMovie* page, the code for the *EditMovie* page has two distinct functions.</span></span> <span data-ttu-id="e21ca-203">Die erste Funktion ist, dass der Code die Film-ID aus der Abfrage Zeichenfolge abruft, wenn die Seite zum ersten Mal angezeigt wird (und *nur* dann).</span><span class="sxs-lookup"><span data-stu-id="e21ca-203">The first function is that when the page is displayed for the first time (and *only* then), the code gets the movie ID from the query string.</span></span> <span data-ttu-id="e21ca-204">Der Code verwendet die ID dann, um den entsprechenden Film aus der Datenbank zu lesen und ihn in den Textfeldern anzuzeigen (vorab zu laden).</span><span class="sxs-lookup"><span data-stu-id="e21ca-204">The code then uses the ID to read the corresponding movie out of the database and display (preload) it in the text boxes.</span></span>

<span data-ttu-id="e21ca-205">Die zweite Funktion besteht darin, dass der Code, wenn der Benutzer auf die Schaltfläche " **Änderungen übermitteln** " klickt, die Werte der Textfelder lesen und diese überprüfen muss.</span><span class="sxs-lookup"><span data-stu-id="e21ca-205">The second function is that when the user clicks the **Submit Changes** button, the code has to read the values of the text boxes and validate them.</span></span> <span data-ttu-id="e21ca-206">Der Code muss auch das Daten Bank Element mit den neuen Werten aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e21ca-206">The code also has to update the database item with the new values.</span></span> <span data-ttu-id="e21ca-207">Dieses Verfahren ähnelt dem Hinzufügen eines Datensatzes, wie Sie in *addmovie*gesehen haben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-207">This technique is similar to adding a record, as you saw in *AddMovie*.</span></span>

## <a name="adding-code-to-read-a-single-movie"></a><span data-ttu-id="e21ca-208">Hinzufügen von Code zum Lesen eines einzelnen Films</span><span class="sxs-lookup"><span data-stu-id="e21ca-208">Adding Code to Read a Single Movie</span></span>

<span data-ttu-id="e21ca-209">Fügen Sie den folgenden Code am Anfang der Seite ein, um die erste Funktion auszuführen:</span><span class="sxs-lookup"><span data-stu-id="e21ca-209">To perform the first function, add this code to the top of the page:</span></span>

[!code-cshtml[Main](updating-data/samples/sample11.cshtml)]

<span data-ttu-id="e21ca-210">Der größte Teil dieses Codes befindet sich in einem Block, der `if(!IsPost)`startet.</span><span class="sxs-lookup"><span data-stu-id="e21ca-210">Most of this code is inside a block that starts `if(!IsPost)`.</span></span> <span data-ttu-id="e21ca-211">Der `!`-Operator bedeutet "Not". der Ausdruck bedeutet, dass *es sich bei dieser Anforderung nicht um eine Post-Übermittlung handelt*. Dies ist eine indirekte Methode, um zu sagen, *ob diese Anforderung zum ersten Mal ausgeführt*wurde.</span><span class="sxs-lookup"><span data-stu-id="e21ca-211">The `!` operator means "not," so the expression means *if this request is not a post submission*, which is an indirect way of saying *if this request is the first time that this page has been run*.</span></span> <span data-ttu-id="e21ca-212">Wie bereits erwähnt, sollte dieser Code *nur* bei der erstmaligen Ausführung der Seite ausgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-212">As noted earlier, this code should run *only* the first time the page runs.</span></span> <span data-ttu-id="e21ca-213">Wenn Sie den Code nicht in `if(!IsPost)`eingeschlossen haben, wird er jedes Mal ausgeführt, wenn die Seite aufgerufen wird, egal ob beim ersten Mal oder als Reaktion auf einen Klick auf eine Schaltfläche.</span><span class="sxs-lookup"><span data-stu-id="e21ca-213">If you didn't enclose the code in `if(!IsPost)`, it would run every time the page is invoked, whether the first time or in response to a button click.</span></span>

<span data-ttu-id="e21ca-214">Beachten Sie, dass der Code einen `else` Block This Time enthält.</span><span class="sxs-lookup"><span data-stu-id="e21ca-214">Notice that the code includes an `else` block this time.</span></span> <span data-ttu-id="e21ca-215">Wie bereits erwähnt, wenn wir `if` Blöcke eingeführt haben, möchten Sie manchmal alternativen Code ausführen, wenn die zu testende Bedingung nicht wahr ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-215">As we said when we introduced `if` blocks, sometimes you want to run alternative code if the condition you're testing isn't true.</span></span> <span data-ttu-id="e21ca-216">Das ist hier der Fall.</span><span class="sxs-lookup"><span data-stu-id="e21ca-216">That's the case here.</span></span> <span data-ttu-id="e21ca-217">Wenn die Bedingung erfüllt ist (d. h., wenn die an die Seite übergebenen ID in Ordnung ist), lesen Sie eine Zeile aus der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="e21ca-217">If the condition passes (that is, if the ID passed to the page is ok), you read a row from the database.</span></span> <span data-ttu-id="e21ca-218">Wenn die Bedingung jedoch nicht erfüllt ist, wird der `else`-Block ausgeführt, und der Code legt eine Fehlermeldung fest.</span><span class="sxs-lookup"><span data-stu-id="e21ca-218">However, if the condition doesn't pass, the `else` block runs and the code sets an error message.</span></span>

## <a name="validating-a-value-passed-to-the-page"></a><span data-ttu-id="e21ca-219">Validieren eines an die Seite übergebenen Werts</span><span class="sxs-lookup"><span data-stu-id="e21ca-219">Validating a Value Passed to the Page</span></span>

<span data-ttu-id="e21ca-220">Der Code verwendet `Request.QueryString["id"]`, um die ID zu erhalten, die an die Seite übermittelt wird.</span><span class="sxs-lookup"><span data-stu-id="e21ca-220">The code uses `Request.QueryString["id"]` to get the ID that's passed to the page.</span></span> <span data-ttu-id="e21ca-221">Der Code stellt sicher, dass für die ID tatsächlich ein Wert übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="e21ca-221">The code makes sure that a value was actually passed for the ID.</span></span> <span data-ttu-id="e21ca-222">Wenn kein Wert bestanden wurde, legt der Code einen Validierungs Fehler fest.</span><span class="sxs-lookup"><span data-stu-id="e21ca-222">If no value was passed, the code sets a validation error.</span></span>

<span data-ttu-id="e21ca-223">Dieser Code zeigt eine andere Möglichkeit zum Überprüfen von Informationen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-223">This code shows a different way to validate information.</span></span> <span data-ttu-id="e21ca-224">Im vorherigen Tutorial haben Sie mit dem `Validation`-Hilfsprogramm gearbeitet.</span><span class="sxs-lookup"><span data-stu-id="e21ca-224">In the previous tutorial, you worked with the `Validation` helper.</span></span> <span data-ttu-id="e21ca-225">Sie haben die zu validierenden Felder registriert, und ASP.net hat die Überprüfung automatisch durchgeführt und die Fehler angezeigt, indem Sie `Html.ValidationMessage` und `Html.ValidationSummary`</span><span class="sxs-lookup"><span data-stu-id="e21ca-225">You registered fields to validate, and ASP.NET automatically did the validation and displayed errors by using `Html.ValidationMessage` and `Html.ValidationSummary`.</span></span> <span data-ttu-id="e21ca-226">In diesem Fall überprüfen Sie jedoch nicht wirklich die Benutzereingaben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-226">In this case, however, you're not really validating user input.</span></span> <span data-ttu-id="e21ca-227">Stattdessen validieren Sie einen Wert, der von an anderer Stelle an die Seite übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="e21ca-227">Instead, you're validating a value that was passed to the page from elsewhere.</span></span> <span data-ttu-id="e21ca-228">Das `Validation`-Hilfsprogramm führt dies nicht für Sie aus.</span><span class="sxs-lookup"><span data-stu-id="e21ca-228">The `Validation` helper doesn't do that for you.</span></span>

<span data-ttu-id="e21ca-229">Daher überprüfen Sie den Wert selbst, indem Sie ihn mit `if(!Request.QueryString["ID"].IsEmpty()`) testen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-229">Therefore, you check the value yourself, by testing it with `if(!Request.QueryString["ID"].IsEmpty()`).</span></span> <span data-ttu-id="e21ca-230">Wenn ein Problem vorliegt, können Sie den Fehler wie beim `Validation`-Hilfsprogramm mithilfe von `Html.ValidationSummary`anzeigen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-230">If there's a problem, you can display the error by using `Html.ValidationSummary`, as you did with the `Validation` helper.</span></span> <span data-ttu-id="e21ca-231">Dazu wird `Validation.AddFormError` aufgerufen und eine Meldung an die Anzeige übergeben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-231">To do that, you call `Validation.AddFormError` and pass it a message to display.</span></span> <span data-ttu-id="e21ca-232">`Validation.AddFormError` ist eine integrierte Methode, mit der Sie benutzerdefinierte Meldungen definieren können, die mit dem bereits vertrauten Validierungssystem verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="e21ca-232">`Validation.AddFormError` is a built-in method that lets you define custom messages that tie in with the validation system you're already familiar with.</span></span> <span data-ttu-id="e21ca-233">(Später in diesem Tutorial wird erläutert, wie Sie diesen Validierungsprozess etwas stabiler machen.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-233">(Later in this tutorial we'll talk about how to make this validation process a little more robust.)</span></span>

<span data-ttu-id="e21ca-234">Nachdem Sie sichergestellt haben, dass eine ID für den Film vorhanden ist, liest der Code die Datenbank und sucht nur nach einem einzelnen Daten Bank Element.</span><span class="sxs-lookup"><span data-stu-id="e21ca-234">After making sure that there's an ID for the movie, the code reads the database, looking for only a single database item.</span></span> <span data-ttu-id="e21ca-235">(Wahrscheinlich haben Sie das allgemeine Muster für Daten Bank Vorgänge bemerkt: Öffnen Sie die Datenbank, definieren Sie eine SQL-Anweisung, und führen Sie die Anweisung aus.) Dieses Mal enthält die SQL `Select`-Anweisung `WHERE ID = @0`.</span><span class="sxs-lookup"><span data-stu-id="e21ca-235">(You probably have noticed the general pattern for database operations: open the database, define a SQL statement, and run the statement.) This time, the SQL `Select` statement includes `WHERE ID = @0`.</span></span> <span data-ttu-id="e21ca-236">Da die ID eindeutig ist, kann nur ein Datensatz zurückgegeben werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-236">Because the ID is unique, only one record can be returned.</span></span>

<span data-ttu-id="e21ca-237">Die Abfrage wird mit `db.QuerySingle` ausgeführt (nicht `db.Query`, wie Sie für die filmauflistung verwendet haben), und der Code fügt das Ergebnis in die `row` Variable ein.</span><span class="sxs-lookup"><span data-stu-id="e21ca-237">The query is performed by using `db.QuerySingle` (not `db.Query`, as you used for the movie listing), and the code puts the result into the `row` variable.</span></span> <span data-ttu-id="e21ca-238">Der Name `row` ist willkürlich. Sie können die Variablen beliebig benennen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-238">The name `row` is arbitrary; you can name the variables anything you like.</span></span> <span data-ttu-id="e21ca-239">Die Variablen, die oben initialisiert werden, werden dann mit den Filmdetails gefüllt, sodass diese Werte in den Textfeldern angezeigt werden können.</span><span class="sxs-lookup"><span data-stu-id="e21ca-239">The variables initialized at the top are then filled with the movie details so that these values can be displayed in the text boxes.</span></span>

## <a name="testing-the-edit-page-so-far"></a><span data-ttu-id="e21ca-240">Testen der Bearbeitungsseite (bisher)</span><span class="sxs-lookup"><span data-stu-id="e21ca-240">Testing the Edit Page (So Far)</span></span>

<span data-ttu-id="e21ca-241">Wenn Sie Ihre Seite testen möchten, führen Sie jetzt die Seite *Filme* aus, und klicken Sie auf einen Link **Bearbeiten** neben jedem Film.</span><span class="sxs-lookup"><span data-stu-id="e21ca-241">If you'd like to test your page, run the *Movies* page now and click an **Edit** link next to any movie.</span></span> <span data-ttu-id="e21ca-242">Die Seite *editmovie* wird mit den Details für den ausgewählten Film angezeigt:</span><span class="sxs-lookup"><span data-stu-id="e21ca-242">You'll see the *EditMovie* page with the details filled in for the movie you selected:</span></span>

![Movie Page bearbeiten, die den zu bearbeitenden Film anzeigt](updating-data/_static/image3.png)

<span data-ttu-id="e21ca-244">Beachten Sie, dass die URL der Seite etwas wie `?id=10` (oder eine andere Zahl) enthält.</span><span class="sxs-lookup"><span data-stu-id="e21ca-244">Notice that the URL of the page includes something like `?id=10` (or some other number).</span></span> <span data-ttu-id="e21ca-245">Bisher haben Sie das **Bearbeiten** von Links auf der Seite " *Movie* " getestet, dass die Seite die ID aus der Abfrage Zeichenfolge liest und dass die Datenbankabfrage zum erhalten eines einzelnen Film Datensatzes funktioniert.</span><span class="sxs-lookup"><span data-stu-id="e21ca-245">So far you've tested that **Edit** links in the *Movie* page work, that your page is reading the ID from the query string, and that the database query to get a single movie record is working.</span></span>

<span data-ttu-id="e21ca-246">Sie können die Filminformationen ändern, aber nichts passiert, wenn Sie auf **Änderungen übermitteln**klicken.</span><span class="sxs-lookup"><span data-stu-id="e21ca-246">You can change the movie information, but nothing happens when you click **Submit Changes**.</span></span>

## <a name="adding-code-to-update-the-movie-with-the-users-changes"></a><span data-ttu-id="e21ca-247">Hinzufügen von Code zum Aktualisieren des Films mit den Änderungen des Benutzers</span><span class="sxs-lookup"><span data-stu-id="e21ca-247">Adding Code to Update the Movie with the User's Changes</span></span>

<span data-ttu-id="e21ca-248">Fügen Sie in der Datei *editmovie. cshtml* zum Implementieren der zweiten Funktion (Speichern von Änderungen) den folgenden Code direkt innerhalb der schließenden geschweiften Klammer des `@` Blocks hinzu.</span><span class="sxs-lookup"><span data-stu-id="e21ca-248">In the *EditMovie.cshtml* file, to implement the second function (saving changes), add the following code just inside the closing brace of the `@` block.</span></span> <span data-ttu-id="e21ca-249">(Wenn Sie nicht genau wissen, wo der Code abgelegt werden soll, sehen Sie sich die [komplette Codeliste für die Seite "Movie bearbeiten](#Complete_Page_Listing_for_EditMovie) " an, die am Ende dieses Lernprogramms angezeigt wird.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-249">(If you're not sure exactly where to put the code, you can look at the [complete code listing for the Edit Movie page](#Complete_Page_Listing_for_EditMovie) that appears at the end of this tutorial.)</span></span>

[!code-csharp[Main](updating-data/samples/sample12.cs)]

<span data-ttu-id="e21ca-250">Dieses Markup und dieser Code ähneln dem Code in *addmovie*.</span><span class="sxs-lookup"><span data-stu-id="e21ca-250">Again, this markup and code is similar to the code in *AddMovie*.</span></span> <span data-ttu-id="e21ca-251">Der Code befindet sich in einem `if(IsPost)`-Block, da dieser Code nur ausgeführt wird, wenn der Benutzer auf die Schaltfläche " **Änderungen übermitteln** " klickt &mdash; d. h., wann (und nur wenn) das Formular gepostet wurde.</span><span class="sxs-lookup"><span data-stu-id="e21ca-251">The code is in an `if(IsPost)` block, because this code runs only when the user clicks the **Submit Changes** button &mdash; that is, when (and only when) the form has been posted.</span></span> <span data-ttu-id="e21ca-252">In diesem Fall verwenden Sie keinen Test wie `if(IsPost && Validation.IsValid())`– d. h. Sie kombinieren nicht beide Tests mithilfe von und.</span><span class="sxs-lookup"><span data-stu-id="e21ca-252">In this case, you're not using a test like `if(IsPost && Validation.IsValid())`— that is, you're not combining both tests by using AND.</span></span> <span data-ttu-id="e21ca-253">Auf dieser Seite legen Sie zuerst fest, ob eine Formular Übermittlung (`if(IsPost)`) vorhanden ist, und registrieren dann nur die Felder für die Validierung.</span><span class="sxs-lookup"><span data-stu-id="e21ca-253">In this page, you first determine whether there's a form submission (`if(IsPost)`), and only then register the fields for validation.</span></span> <span data-ttu-id="e21ca-254">Anschließend können Sie die Validierungs Ergebnisse (`if(Validation.IsValid()`) testen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-254">Then you can test the validation results (`if(Validation.IsValid()`).</span></span> <span data-ttu-id="e21ca-255">Der Flow unterscheidet sich geringfügig von der Seite " *addmovie. cshtml* ", aber der Effekt ist identisch.</span><span class="sxs-lookup"><span data-stu-id="e21ca-255">The flow is slightly different than in the *AddMovie.cshtml* page, but the effect is the same.</span></span>

<span data-ttu-id="e21ca-256">Sie erhalten die Werte der Textfelder, indem Sie `Request.Form["title"]` und ähnlichen Code für die anderen `<input>` Elemente verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-256">You get the values of the text boxes by using `Request.Form["title"]` and similar code for the other `<input>` elements.</span></span> <span data-ttu-id="e21ca-257">Beachten Sie, dass der Code die Film-ID aus dem ausgeblendeten Feld (`<input type="hidden">`) abruft.</span><span class="sxs-lookup"><span data-stu-id="e21ca-257">Notice that this time, the code gets the movie ID out of the hidden field (`<input type="hidden">`).</span></span> <span data-ttu-id="e21ca-258">Wenn die Seite zum ersten Mal ausgeführt wurde, erhielt der Code die ID aus der Abfrage Zeichenfolge.</span><span class="sxs-lookup"><span data-stu-id="e21ca-258">When the page ran the first time, the code got the ID out of the query string.</span></span> <span data-ttu-id="e21ca-259">Sie erhalten den Wert aus dem ausgeblendeten Feld, um sicherzustellen, dass Sie die ID des Films erhalten, der ursprünglich angezeigt wurde, für den Fall, dass die Abfrage Zeichenfolge seitdem geändert wurde.</span><span class="sxs-lookup"><span data-stu-id="e21ca-259">You get the value from the hidden field to make sure that you're getting the ID of the movie that was originally displayed, in case the query string was somehow altered since then.</span></span>

<span data-ttu-id="e21ca-260">Der wirklich wichtige Unterschied zwischen dem *addmovie* -Code und diesem Code besteht darin, dass Sie in diesem Code die SQL `Update`-Anweisung anstelle der `Insert Into`-Anweisung verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-260">The really important difference between the *AddMovie* code and this code is that in this code you use the SQL `Update` statement instead of the `Insert Into` statement.</span></span> <span data-ttu-id="e21ca-261">Das folgende Beispiel zeigt die Syntax der SQL `Update`-Anweisung:</span><span class="sxs-lookup"><span data-stu-id="e21ca-261">The following example shows the syntax of the SQL `Update` statement:</span></span>

`UPDATE table SET col1="value", col2="value", col3="value" ... WHERE ID = value`

<span data-ttu-id="e21ca-262">Sie können beliebige Spalten in beliebiger Reihenfolge angeben, und Sie müssen nicht unbedingt jede Spalte während eines `Update` Vorgangs aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="e21ca-262">You can specify any columns in any order, and you don't necessarily have to update every column during an `Update` operation.</span></span> <span data-ttu-id="e21ca-263">(Sie können die ID selbst nicht aktualisieren, da dadurch der Datensatz als neuer Datensatz gespeichert wird, was für einen `Update` Vorgang nicht zulässig ist.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-263">(You cannot update the ID itself, because that would in effect save the record as a new record, and that's not allowed for an `Update` operation.)</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e21ca-264">**Wichtig** Die `Where`-Klausel mit der ID ist sehr wichtig, da die Datenbank weiß, welcher Daten Bank Datensatz Sie aktualisieren möchten.</span><span class="sxs-lookup"><span data-stu-id="e21ca-264">**Important** The `Where` clause with the ID is very important, because that's how the database knows which database record you want to update.</span></span> <span data-ttu-id="e21ca-265">Wenn Sie die `Where`-Klausel ausgelassen haben, aktualisiert die Datenbank *jeden* Datensatz in der Datenbank.</span><span class="sxs-lookup"><span data-stu-id="e21ca-265">If you left off the `Where` clause, the database would update *every* record in the database.</span></span> <span data-ttu-id="e21ca-266">In den meisten Fällen wäre dies ein Notfall.</span><span class="sxs-lookup"><span data-stu-id="e21ca-266">In most cases, that would be a disaster.</span></span>

<span data-ttu-id="e21ca-267">Im Code werden die zu aktualisierenden Werte mithilfe von Platzhaltern an die SQL-Anweisung übermittelt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-267">In the code, the values to update are passed to the SQL statement by using placeholders.</span></span> <span data-ttu-id="e21ca-268">Um zu wiederholen, was wir vorhergesagt haben: aus Sicherheitsgründen verwenden Sie *nur* Platzhalter, um Werte an eine SQL-Anweisung zu übergeben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-268">To repeat what we've said before: for security reasons, *only* use placeholders to pass values to a SQL statement.</span></span>

<span data-ttu-id="e21ca-269">Nachdem der Code `db.Execute` verwendet hat, um die `Update` Anweisung auszuführen, wird er zurück zur Listenseite umgeleitet, auf der Sie die Änderungen sehen können.</span><span class="sxs-lookup"><span data-stu-id="e21ca-269">After the code uses `db.Execute` to run the `Update` statement, it redirects back to the listing page, where you can see the changes.</span></span>

> [!TIP] 
> 
> <span data-ttu-id="e21ca-270">**Verschiedene SQL-Anweisungen, verschiedene Methoden**</span><span class="sxs-lookup"><span data-stu-id="e21ca-270">**Different SQL Statements, Different Methods**</span></span>
> 
> <span data-ttu-id="e21ca-271">Möglicherweise haben Sie bemerkt, dass Sie leicht unterschiedliche Methoden verwenden, um verschiedene SQL-Anweisungen auszuführen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-271">You might have noticed that you use slightly different methods to run different SQL statements.</span></span> <span data-ttu-id="e21ca-272">Um eine `Select` Abfrage auszuführen, die potenziell mehrere Datensätze zurückgibt, verwenden Sie die `Query`-Methode.</span><span class="sxs-lookup"><span data-stu-id="e21ca-272">To run a `Select` query that potentially returns multiple records, you use the `Query` method.</span></span> <span data-ttu-id="e21ca-273">Um eine `Select` Abfrage auszuführen, von der Sie wissen, dass nur ein Daten Bank Element zurückgegeben wird, verwenden Sie die `QuerySingle`-Methode.</span><span class="sxs-lookup"><span data-stu-id="e21ca-273">To run a `Select` query that you know will return only one database item, you use the `QuerySingle` method.</span></span> <span data-ttu-id="e21ca-274">Zum Ausführen von Befehlen, die Änderungen vornehmen, aber keine Datenbankelemente zurückgeben, verwenden Sie die `Execute`-Methode.</span><span class="sxs-lookup"><span data-stu-id="e21ca-274">To run commands that make changes but that don't return database items, you use the `Execute` method.</span></span>
> 
> <span data-ttu-id="e21ca-275">Sie müssen über verschiedene Methoden verfügen, da jeder von Ihnen andere Ergebnisse zurückgibt, wie Sie bereits im Unterschied zwischen `Query` und `QuerySingle`gesehen haben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-275">You have to have different methods because each of them returns different results, as you saw already in the difference between `Query` and `QuerySingle`.</span></span> <span data-ttu-id="e21ca-276">(Die `Execute`-Methode gibt auch einen-Wert zurück, der die Anzahl der vom &mdash; Befehl betroffenen Daten Bank Zeilen &mdash;, aber Sie haben das bisher ignoriert.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-276">(The `Execute` method actually returns a value also &mdash; namely, the number of database rows that were affected by the command &mdash; but you've been ignoring that so far.)</span></span>
> 
> <span data-ttu-id="e21ca-277">Natürlich kann die `Query`-Methode nur eine Datenbankzeile zurückgeben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-277">Of course, the `Query` method might return only one database row.</span></span> <span data-ttu-id="e21ca-278">ASP.NET behandelt die Ergebnisse der `Query` Methode jedoch immer als eine Auflistung.</span><span class="sxs-lookup"><span data-stu-id="e21ca-278">However, ASP.NET always treats the results of the `Query` method as a collection.</span></span> <span data-ttu-id="e21ca-279">Auch wenn die Methode nur eine Zeile zurückgibt, müssen Sie diese einzelne Zeile aus der Auflistung extrahieren.</span><span class="sxs-lookup"><span data-stu-id="e21ca-279">Even if the method returns just one row, you have to extract that single row from the collection.</span></span> <span data-ttu-id="e21ca-280">Daher ist es in Situationen, in denen Sie *wissen, dass* Sie nur eine Zeile zurückerhalten, etwas bequemer, `QuerySingle`zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-280">Therefore, in situations where you *know* you'll get back only one row, it's a bit more convenient to use `QuerySingle`.</span></span>
> 
> <span data-ttu-id="e21ca-281">Es gibt einige andere Methoden, mit denen bestimmte Typen von Daten Bank Vorgängen durchgeführt werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-281">There are a few other methods that perform specific types of database operations.</span></span> <span data-ttu-id="e21ca-282">Eine Liste der datenbankmethoden finden Sie in der [ASP.net Web Pages-API-kurz](../../api-reference/asp-net-web-pages-api-reference.md#Data)Übersicht.</span><span class="sxs-lookup"><span data-stu-id="e21ca-282">You can find a listing of database methods in the [ASP.NET Web Pages API Quick Reference](../../api-reference/asp-net-web-pages-api-reference.md#Data).</span></span>

## <a name="making-validation-for-the-id-more-robust"></a><span data-ttu-id="e21ca-283">Die Überprüfung der ID ist robuster.</span><span class="sxs-lookup"><span data-stu-id="e21ca-283">Making Validation for the ID More Robust</span></span>

<span data-ttu-id="e21ca-284">Wenn die Seite das erste Mal ausgeführt wird, erhalten Sie die Film-ID aus der Abfrage Zeichenfolge, sodass Sie diesen Film aus der Datenbank holen können.</span><span class="sxs-lookup"><span data-stu-id="e21ca-284">The first time that the page runs, you get the movie ID from the query string so that you can go get that movie from the database.</span></span> <span data-ttu-id="e21ca-285">Sie haben sichergestellt, dass es tatsächlich einen Wert gibt, den Sie mit diesem Code erstellt haben:</span><span class="sxs-lookup"><span data-stu-id="e21ca-285">You made sure that there actually was a value to go look for, which you did by using this code:</span></span>

[!code-csharp[Main](updating-data/samples/sample13.cs)]

<span data-ttu-id="e21ca-286">Sie haben diesen Code verwendet, um sicherzustellen, dass die Seite eine benutzerfreundliche Fehlermeldung anzeigt, wenn ein Benutzer auf die *editmovies* -Seite gelangt, ohne zuvor einen Film auf der Seite " *Filme* " auszuwählen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-286">You used this code to make sure that if a user gets to the *EditMovies* page without first selecting a movie in the *Movies* page, the page would display a user-friendly error message.</span></span> <span data-ttu-id="e21ca-287">(Andernfalls wird Benutzern eine Fehlermeldung angezeigt, die Sie wahrscheinlich nur verwirren würde.)</span><span class="sxs-lookup"><span data-stu-id="e21ca-287">(Otherwise, users would see an error that would probably just confuse them.)</span></span>

<span data-ttu-id="e21ca-288">Diese Validierung ist jedoch nicht sehr robust.</span><span class="sxs-lookup"><span data-stu-id="e21ca-288">However, this validation isn't very robust.</span></span> <span data-ttu-id="e21ca-289">Die Seite kann auch mit folgenden Fehlern aufgerufen werden:</span><span class="sxs-lookup"><span data-stu-id="e21ca-289">The page might also be invoked with these errors:</span></span>

- <span data-ttu-id="e21ca-290">Die ID ist keine Zahl.</span><span class="sxs-lookup"><span data-stu-id="e21ca-290">The ID isn't a number.</span></span> <span data-ttu-id="e21ca-291">Beispielsweise könnte die Seite mit einer URL wie `http://localhost:nnnnn/EditMovie?id=abc`aufgerufen werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-291">For example, the page could be invoked with a URL like `http://localhost:nnnnn/EditMovie?id=abc`.</span></span>
- <span data-ttu-id="e21ca-292">Die ID ist eine Zahl, verweist jedoch auf einen Film, der nicht vorhanden ist (z. b. `http://localhost:nnnnn/EditMovie?id=100934`).</span><span class="sxs-lookup"><span data-stu-id="e21ca-292">The ID is a number, but it references a movie that doesn't exist (for example, `http://localhost:nnnnn/EditMovie?id=100934`).</span></span>

<span data-ttu-id="e21ca-293">Wenn Sie die Fehler, die sich aus diesen URLs ergeben, anzeigen möchten, führen Sie die Seite *Filme* aus.</span><span class="sxs-lookup"><span data-stu-id="e21ca-293">If you're curious to see the errors that result from these URLs, run the *Movies* page.</span></span> <span data-ttu-id="e21ca-294">Wählen Sie einen zu bearbeitenden Film aus, und ändern Sie dann die URL der *editmovie* -Seite in eine URL, die eine alphabetische ID oder die ID eines nicht vorhandenen Films enthält.</span><span class="sxs-lookup"><span data-stu-id="e21ca-294">Select a movie to edit, and then change the URL of the *EditMovie* page to a URL that contains an alphabetic ID or the ID of a non-existent movie.</span></span>

<span data-ttu-id="e21ca-295">Was sollten Sie also tun?</span><span class="sxs-lookup"><span data-stu-id="e21ca-295">So what should you do?</span></span> <span data-ttu-id="e21ca-296">Der erste Fix besteht darin, sicherzustellen, dass nicht nur eine ID an die Seite, sondern eine ganze Zahl ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-296">The first fix is to make sure that not only is an ID passed to the page, but that the ID is an integer.</span></span> <span data-ttu-id="e21ca-297">Ändern Sie den Code für den `!IsPost` Test so, dass er wie in diesem Beispiel aussieht:</span><span class="sxs-lookup"><span data-stu-id="e21ca-297">Change the code for the `!IsPost` test to look like this example:</span></span>

[!code-csharp[Main](updating-data/samples/sample14.cs)]

<span data-ttu-id="e21ca-298">Sie haben dem `IsEmpty` Test eine zweite Bedingung hinzugefügt, die mit `&&` (logisches and) verknüpft ist:</span><span class="sxs-lookup"><span data-stu-id="e21ca-298">You've added a second condition to the `IsEmpty` test, linked with `&&` (logical AND):</span></span>

[!code-csharp[Main](updating-data/samples/sample15.cs)]

<span data-ttu-id="e21ca-299">Möglicherweise erinnern Sie sich von der [Einführung in ASP.net Web Pages Programming](../introducing-razor-syntax-c.md) Tutorial, dass Methoden wie `AsBool` ein `AsInt` eine Zeichenfolge in einen anderen Datentyp konvertieren.</span><span class="sxs-lookup"><span data-stu-id="e21ca-299">You might remember from the [Introduction to ASP.NET Web Pages Programming](../introducing-razor-syntax-c.md) tutorial that methods like `AsBool` an `AsInt` convert a character string to some other data type.</span></span> <span data-ttu-id="e21ca-300">Die `IsInt`-Methode (und andere, wie `IsBool` und `IsDateTime`) sind ähnlich.</span><span class="sxs-lookup"><span data-stu-id="e21ca-300">The `IsInt` method (and others, like `IsBool` and `IsDateTime`) are similar.</span></span> <span data-ttu-id="e21ca-301">Allerdings wird nur getestet, ob Sie die Zeichenfolge konvertieren *können* , ohne die Konvertierung tatsächlich auszuführen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-301">However, they test only whether you *can* convert the string, without actually performing the conversion.</span></span> <span data-ttu-id="e21ca-302">Hier sagen Sie im Grunde *, ob der Wert der Abfrage Zeichenfolge in eine ganze Zahl konvertiert werden kann...*</span><span class="sxs-lookup"><span data-stu-id="e21ca-302">So here you're essentially saying *If the query string value can be converted to an integer ...*.</span></span>

<span data-ttu-id="e21ca-303">Das andere potenzielle Problem ist die Suche nach einem Film, der nicht vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-303">The other potential problem is looking for a movie that doesn't exist.</span></span> <span data-ttu-id="e21ca-304">Der Code zum erhalten eines Films sieht wie der folgende Code aus:</span><span class="sxs-lookup"><span data-stu-id="e21ca-304">The code to get a movie looks like this code:</span></span>

[!code-csharp[Main](updating-data/samples/sample16.cs)]

<span data-ttu-id="e21ca-305">Wenn Sie einen `movieId` Wert an die `QuerySingle`-Methode übergeben, die keinem tatsächlichen Film entspricht, wird nichts zurückgegeben, und die folgenden Anweisungen (z. b. `title=row.Title`) führen zu Fehlern.</span><span class="sxs-lookup"><span data-stu-id="e21ca-305">If you pass a `movieId` value to the `QuerySingle` method that doesn't correspond to an actual movie, nothing is returned and the statements that follow (for example, `title=row.Title`) result in errors.</span></span>

<span data-ttu-id="e21ca-306">Auch hier gibt es eine einfache Lösung.</span><span class="sxs-lookup"><span data-stu-id="e21ca-306">Again there's an easy fix.</span></span> <span data-ttu-id="e21ca-307">Wenn die `db.QuerySingle`-Methode keine Ergebnisse zurückgibt, ist die `row` Variable NULL.</span><span class="sxs-lookup"><span data-stu-id="e21ca-307">If the `db.QuerySingle` method returns no results, the `row` variable will be null.</span></span> <span data-ttu-id="e21ca-308">Sie können also überprüfen, ob die `row` Variable NULL ist, bevor Sie versuchen, Werte daraus zu erhalten.</span><span class="sxs-lookup"><span data-stu-id="e21ca-308">So you can check whether the `row` variable is null before you try to get values from it.</span></span> <span data-ttu-id="e21ca-309">Der folgende Code fügt einen `if`-Block um die-Anweisungen hinzu, die die Werte aus dem `row`-Objekt erhalten:</span><span class="sxs-lookup"><span data-stu-id="e21ca-309">The following code adds an `if` block around the statements that get the values out of the `row` object:</span></span>

[!code-csharp[Main](updating-data/samples/sample17.cs)]

<span data-ttu-id="e21ca-310">Mit diesen beiden zusätzlichen Validierungstests wird die Seite stärker Aufzählungs Zeichen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-310">With these two additional validation tests, the page becomes more bullet-proof.</span></span> <span data-ttu-id="e21ca-311">Der gesamte Code für den `!IsPost` Branch sieht nun wie im folgenden Beispiel aus:</span><span class="sxs-lookup"><span data-stu-id="e21ca-311">The complete code for the `!IsPost` branch now looks like this example:</span></span>

[!code-csharp[Main](updating-data/samples/sample18.cs)]

<span data-ttu-id="e21ca-312">Beachten Sie, dass diese Aufgabe eine gute Verwendung für einen `else`-Block ist.</span><span class="sxs-lookup"><span data-stu-id="e21ca-312">We'll note once more that this task is a good use for an `else` block.</span></span> <span data-ttu-id="e21ca-313">Wenn die Tests nicht bestanden werden, werden vom `else` Blöcke Fehlermeldungen festgelegt.</span><span class="sxs-lookup"><span data-stu-id="e21ca-313">If the tests don't pass, the `else` blocks set error messages.</span></span>

## <a name="adding-a-link-to-return-to-the-movies-page"></a><span data-ttu-id="e21ca-314">Hinzufügen eines Links zum zurückkehren zur Seite "Filme"</span><span class="sxs-lookup"><span data-stu-id="e21ca-314">Adding a Link to Return to the Movies Page</span></span>

<span data-ttu-id="e21ca-315">Ein letztes und hilfreiches Detail ist das Hinzufügen eines Links zurück zur Seite " *Filme* ".</span><span class="sxs-lookup"><span data-stu-id="e21ca-315">A final and helpful detail is to add a link back to the *Movies* page.</span></span> <span data-ttu-id="e21ca-316">Im normalen Ablauf von Ereignissen beginnen Benutzer auf der Seite " *Filme* " und klicken auf den Link " **Bearbeiten** ".</span><span class="sxs-lookup"><span data-stu-id="e21ca-316">In the ordinary flow of events, users will start at the *Movies* page and click an **Edit** link.</span></span> <span data-ttu-id="e21ca-317">Damit gelangen Sie auf die Seite *editmovie* , wo Sie den Film bearbeiten und auf die Schaltfläche klicken können.</span><span class="sxs-lookup"><span data-stu-id="e21ca-317">That brings them to the *EditMovie* page, where they can edit the movie and click the button.</span></span> <span data-ttu-id="e21ca-318">Nachdem der Code die Änderung verarbeitet hat, wird er zurück an die Seite " *Movies* " umgeleitet.</span><span class="sxs-lookup"><span data-stu-id="e21ca-318">After the code processes the change, it redirects back to the *Movies* page.</span></span>

<span data-ttu-id="e21ca-319">Dabei gilt jedoch Folgendes:</span><span class="sxs-lookup"><span data-stu-id="e21ca-319">However:</span></span>

- <span data-ttu-id="e21ca-320">Der Benutzer kann sich entscheiden, nichts zu ändern.</span><span class="sxs-lookup"><span data-stu-id="e21ca-320">The user might decide not to change anything.</span></span>
- <span data-ttu-id="e21ca-321">Der Benutzer ist möglicherweise auf diese Seite gelangt, ohne zuvor auf der Seite " *Filme* " auf den Link " **Bearbeiten** " zu klicken.</span><span class="sxs-lookup"><span data-stu-id="e21ca-321">The user might have gotten to this page without first clicking an **Edit** link in the *Movies* page.</span></span>

<span data-ttu-id="e21ca-322">In jedem Fall möchten Sie es Ihnen erleichtern, zur Haupt Auflistung zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="e21ca-322">Either way, you want to make it easy for them to return to the main listing.</span></span> <span data-ttu-id="e21ca-323">Es ist eine einfache Lösung, &mdash; das folgende Markup direkt hinter dem schließenden `</form>`-Tag im Markup hinzuzufügen:</span><span class="sxs-lookup"><span data-stu-id="e21ca-323">It's an easy fix &mdash; add the following markup just after the closing `</form>` tag in the markup:</span></span>

[!code-html[Main](updating-data/samples/sample19.html)]

<span data-ttu-id="e21ca-324">Dieses Markup verwendet die gleiche Syntax für ein `<a>` Element, das Sie an anderer Stelle gesehen haben.</span><span class="sxs-lookup"><span data-stu-id="e21ca-324">This markup uses the same syntax for an `<a>` element that you've seen elsewhere.</span></span> <span data-ttu-id="e21ca-325">Die URL enthält `~` "Stamm der Website".</span><span class="sxs-lookup"><span data-stu-id="e21ca-325">The URL includes `~` to mean "root of the website."</span></span>

## <a name="testing-the-movie-update-process"></a><span data-ttu-id="e21ca-326">Testen des Film Aktualisierungsprozesses</span><span class="sxs-lookup"><span data-stu-id="e21ca-326">Testing the Movie Update Process</span></span>

<span data-ttu-id="e21ca-327">Jetzt können Sie testen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-327">Now you can test.</span></span> <span data-ttu-id="e21ca-328">Führen Sie die Seite *Filme* aus, und klicken Sie auf **Bearbeiten** neben einem Film.</span><span class="sxs-lookup"><span data-stu-id="e21ca-328">Run the *Movies* page, and click **Edit** next to a movie.</span></span> <span data-ttu-id="e21ca-329">Wenn die Seite *editmovie* angezeigt wird, nehmen Sie Änderungen am Film vor, und klicken Sie auf **Änderungen übermitteln**.</span><span class="sxs-lookup"><span data-stu-id="e21ca-329">When the *EditMovie* page appears, make changes to the movie and click **Submit Changes**.</span></span> <span data-ttu-id="e21ca-330">Wenn die Film Auflistung angezeigt wird, stellen Sie sicher, dass Ihre Änderungen angezeigt werden.</span><span class="sxs-lookup"><span data-stu-id="e21ca-330">When the movie listing appears, make sure that your changes are shown.</span></span>

<span data-ttu-id="e21ca-331">Um sicherzustellen, dass die Überprüfung funktioniert, klicken Sie auf **Bearbeiten** für einen anderen Film.</span><span class="sxs-lookup"><span data-stu-id="e21ca-331">To make sure that validation is working, click **Edit** for another movie.</span></span> <span data-ttu-id="e21ca-332">Wenn Sie auf die Seite *editmovie* gelangen, löschen Sie das Feld **Genre** (oder das Feld **Jahr** oder beides), und versuchen Sie, die Änderungen zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="e21ca-332">When you get to the *EditMovie* page, clear the **Genre** field (or **Year** field, or both) and try to submit your changes.</span></span> <span data-ttu-id="e21ca-333">Wie Sie erwarten, wird ein Fehler angezeigt:</span><span class="sxs-lookup"><span data-stu-id="e21ca-333">You'll see an error, as you'd expect:</span></span>

![Movie Page bearbeiten zeigt Validierungs Fehler an](updating-data/_static/image4.png)

<span data-ttu-id="e21ca-335">Klicken Sie auf den Link **zum Listen Link zurückkehren** , um die Änderungen zu verwerfen und zur Seite *Filme* zurückzukehren.</span><span class="sxs-lookup"><span data-stu-id="e21ca-335">Click the **Return to movie listing** link to abandon your changes and return to the *Movies* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="e21ca-336">Nächste nächste</span><span class="sxs-lookup"><span data-stu-id="e21ca-336">Coming Up Next</span></span>

<span data-ttu-id="e21ca-337">Im nächsten Tutorial erfahren Sie, wie Sie einen Film Daten Satz löschen.</span><span class="sxs-lookup"><span data-stu-id="e21ca-337">In the next tutorial, you'll see how to delete a movie record.</span></span>

## <a name="complete-listing-for-movie-page-updated-with-edit-links"></a><span data-ttu-id="e21ca-338">Vervollständigen der Auflistung für Movie Page (aktualisiert mit Links bearbeiten)</span><span class="sxs-lookup"><span data-stu-id="e21ca-338">Complete Listing for Movie Page (Updated with Edit Links)</span></span>

[!code-cshtml[Main](updating-data/samples/sample20.cshtml)]

<a id="Complete_Page_Listing_for_EditMovie"></a>
## <a name="complete-page-listing-for-edit-movie-page"></a><span data-ttu-id="e21ca-339">Complete Page Listing for Movie Page Page</span><span class="sxs-lookup"><span data-stu-id="e21ca-339">Complete Page Listing for Edit Movie Page</span></span>

[!code-cshtml[Main](updating-data/samples/sample21.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="e21ca-340">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="e21ca-340">Additional Resources</span></span>

- [<span data-ttu-id="e21ca-341">Einführung in die ASP.net-Webprogrammierung mithilfe der Razor-Syntax</span><span class="sxs-lookup"><span data-stu-id="e21ca-341">Introduction to ASP.NET Web Programming by Using the Razor Syntax</span></span>](../../getting-started/introducing-razor-syntax-c.md)
- <span data-ttu-id="e21ca-342">[SQL Update-Anweisung](http://www.w3schools.com/sql/sql_update.asp) auf der W3Schools-Website</span><span class="sxs-lookup"><span data-stu-id="e21ca-342">[SQL UPDATE Statement](http://www.w3schools.com/sql/sql_update.asp) on the W3Schools site</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="e21ca-343">[Zurück](entering-data.md)
> [Weiter](deleting-data.md)</span><span class="sxs-lookup"><span data-stu-id="e21ca-343">[Previous](entering-data.md)
[Next](deleting-data.md)</span></span>
