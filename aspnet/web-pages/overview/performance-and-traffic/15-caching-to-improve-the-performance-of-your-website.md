---
uid: web-pages/overview/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website
title: Zwischenspeichern von Daten in einer ASP.NET Web-Website (Razor) für eine bessere Leistung von Seiten | Microsoft-Dokumentation
author: Rick-Anderson
description: Sie können beschleunigen, Ihre Website, dass – d. h. Speichern von Cache – die Ergebnisse der Daten, die normalerweise dauern würde sehr viel Zeit zum Abrufen oder Verarbeiten einer...
ms.author: riande
ms.date: 02/14/2014
ms.assetid: 961e525b-7700-469e-8a68-d7010b6fb68c
msc.legacyurl: /web-pages/overview/performance-and-traffic/15-caching-to-improve-the-performance-of-your-website
msc.type: authoredcontent
ms.openlocfilehash: 01796d3ca699a6af5d9162b22a926551435c2040
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 05/06/2019
ms.locfileid: "65134581"
---
# <a name="caching-data-in-an-aspnet-web-pages-razor-site-for-better-performance"></a><span data-ttu-id="9ed6b-103">Zwischenspeichern von Daten in einer ASP.NET Web Pages (Razor)-Website für eine bessere Leistung</span><span class="sxs-lookup"><span data-stu-id="9ed6b-103">Caching Data in an ASP.NET Web Pages (Razor) Site for Better Performance</span></span>

<span data-ttu-id="9ed6b-104">durch [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="9ed6b-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="9ed6b-105">In diesem Artikel wird erläutert, wie eine Hilfsprogramm, mit dem Cache-Informationen für eine bessere Leistung auf einer Website für ASP.NET Web Pages (Razor) verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-105">This article explains how to use a helper to cache information for faster performance in an ASP.NET Web Pages (Razor) website.</span></span> <span data-ttu-id="9ed6b-106">Sie können Ihre Website, dass speichern beschleunigen &#8212; zwischenspeichern, d. h. &#8212; die Ergebnisse der Daten, die normalerweise würde erhebliche Zeit in Anspruch nehmen abrufen oder verarbeiten, die nicht häufig ändern.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-106">You can speed up your website by having it store &#8212; that is, cache &#8212; the results of data that ordinarily would take considerable time to retrieve or process and that does not change often.</span></span>
> 
> <span data-ttu-id="9ed6b-107">**Sie lernen Folgendes:**</span><span class="sxs-lookup"><span data-stu-id="9ed6b-107">**What you'll learn:**</span></span> 
> 
> - <span data-ttu-id="9ed6b-108">Informationen zur Verwendung von caching zur Verbesserung der Reaktionsfähigkeit Ihrer Website.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-108">How to use caching to improve the responsiveness of your website.</span></span>
> 
> <span data-ttu-id="9ed6b-109">Dies sind die Funktionen von ASP.NET in diesem Artikel:</span><span class="sxs-lookup"><span data-stu-id="9ed6b-109">These are the ASP.NET features introduced in the article:</span></span>
> 
> - <span data-ttu-id="9ed6b-110">Die `WebCache` Helper.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-110">The `WebCache` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="9ed6b-111">Softwareversionen, die in diesem Tutorial verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="9ed6b-112">ASP.NET Web Pages (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="9ed6b-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="9ed6b-113">In diesem Tutorial funktioniert auch mit ASP.NET Web Pages 2.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<span data-ttu-id="9ed6b-114">Jedes Mal, wenn ein Benutzer auf Ihrer Website eine Seite anfordert, muss der Webserver einiges zu tun, um die Anforderung zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-114">Every time someone requests a page from your site, the web server has to do some work in order to fulfill the request.</span></span> <span data-ttu-id="9ed6b-115">Der Server möglicherweise für einige Ihrer Seiten Aufgaben, die ein (relativ) wie das Abrufen von Daten aus einer Datenbank dauern.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-115">For some of your pages, the server might have to perform tasks that take a (comparatively) long time, such as retrieving data from a database.</span></span> <span data-ttu-id="9ed6b-116">Auch wenn diese Aufgaben lange in absoluten Ausdrücken erfordern, wenn Ihre Website viel Datenverkehr auftritt, kann eine ganze Reihe von einzelnen Anforderungen, die dazu führen, den Webserver dass für die langsam oder komplizierte Aufgabe bis zu sehr viel Arbeit hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-116">Even if these tasks don't take long in absolute terms, if your site experiences a lot of traffic, a whole series of individual requests that cause the web server to perform the complicated or slow task can add up to a lot of work.</span></span> <span data-ttu-id="9ed6b-117">Dies kann letztlich die Leistung der Website beeinträchtigen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-117">This can ultimately affect the performance of the site.</span></span>

<span data-ttu-id="9ed6b-118">Eine Möglichkeit zur Verbesserung der Leistung Ihrer Website unter Umständen wie folgt, ist zum Zwischenspeichern von Daten.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-118">One way to improve the performance of your website in circumstances like this is to cache data.</span></span> <span data-ttu-id="9ed6b-119">Wenn Ihre Website wiederholte Anforderungen für dieselben Informationen angezeigt Ruft, die Informationen muss nicht für jede Person, die geändert werden und kann nicht Zeit vertraulich, anstatt erneut abgerufen oder neu zu berechnen, können die Daten einmal abrufen und speichern Sie die Ergebnisse.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-119">If your site gets repeated requests for the same information, and the information does not need to be modified for each person, and it's not time sensitive, instead of re-fetching or recalculating it, you can fetch the data once and then store the results.</span></span> <span data-ttu-id="9ed6b-120">Das nächste Mal, das eine Anforderung für diesen eingeht, machen Informationen Sie sich einfach sie aus dem Cache.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-120">The next time a request comes in for that information, you just get it out of the cache.</span></span>

<span data-ttu-id="9ed6b-121">Im Allgemeinen Zwischenspeichern Sie Informationen, die nicht häufig ändern.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-121">In general, you cache information that doesn't change frequently.</span></span> <span data-ttu-id="9ed6b-122">Wenn Sie die Informationen im Cache ablegen, wird es im Arbeitsspeicher auf dem Webserver gespeichert.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-122">When you put information in the cache, it's stored in memory on the web server.</span></span> <span data-ttu-id="9ed6b-123">Sie können angeben, wie lange es, von Sekunden auf Tage zwischengespeichert werden soll.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-123">You can specify how long it should be cached, from seconds to days.</span></span> <span data-ttu-id="9ed6b-124">Nach Ablauf des Zeitraums der Zwischenspeicherung ist die Informationen automatisch aus dem Cache entfernt.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-124">When the caching period expires, the information is automatically removed from the cache.</span></span>

> [!NOTE]
> <span data-ttu-id="9ed6b-125">Einträge im Cache möglicherweise Gründen außer entfernt, die abgelaufen sind.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-125">Entries in the cache might be removed for reasons other than that they've expired.</span></span> <span data-ttu-id="9ed6b-126">Beispielsweise der Webserver kann vorübergehend führen mit niedriger Arbeitsspeicher, und eine Möglichkeit, die er Speicher freigeben kann, ist durch das Auslösen von Einträgen aus dem Cache.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-126">For example, the web server might temporarily run low on memory, and one way it can reclaim memory is by throwing entries out of the cache.</span></span> <span data-ttu-id="9ed6b-127">Sie sehen auch, wenn Sie die Informationen in den Cache eingefügt haben, müssen Sie sicherstellen, dass sie immer noch vorhanden ist, wenn Sie sie benötigen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-127">As you'll see, even if you've put information into the cache, you have to check to be sure it's still there when you need it.</span></span>

<span data-ttu-id="9ed6b-128">Angenommen Sie, Ihre Website eine Seite enthält, die die aktuelle Temperatur und die Wettervorhersage anzeigt.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-128">Imagine your website has a page that displays the current temperature and weather forecast.</span></span> <span data-ttu-id="9ed6b-129">Um diese Art von Informationen zu erhalten, können Sie eine Anforderung an einen externen Dienst senden.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-129">To get this type of information, you might send a request to an external service.</span></span> <span data-ttu-id="9ed6b-130">Da diese Informationen nicht viel (innerhalb eines zweistündigen Zeitraums, z. B.) ändert, und da externer Aufrufe Zeit und Bandbreite erforderlich ist, ist es ein guter Kandidat für die Zwischenspeicherung.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-130">Since this information doesn't change much (within a two-hour time period, for example) and since external calls require time and bandwidth, it's a good candidate for caching.</span></span>

## <a name="adding-caching-to-a-page"></a><span data-ttu-id="9ed6b-131">Hinzufügen von Caching zu einer Seite</span><span class="sxs-lookup"><span data-stu-id="9ed6b-131">Adding Caching to a Page</span></span>

<span data-ttu-id="9ed6b-132">ASP.NET umfasst eine `WebCache` Hilfsmethode, die Zwischenspeicherung auf Ihrer Website hinzufügen und Hinzufügen von Daten in den Cache erleichtert.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-132">ASP.NET includes a `WebCache` helper that makes it easy to add caching to your site and add data to the cache.</span></span> <span data-ttu-id="9ed6b-133">In diesem Verfahren erstellen Sie eine Seite, die die aktuelle Zeit zwischenspeichert.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-133">In this procedure, you'll create a page that caches the current time.</span></span> <span data-ttu-id="9ed6b-134">Dies ist ein praktisches Beispiel, nicht, da die aktuelle Uhrzeit etwas ist, das häufig ändert, und, die darüber hinaus ist nicht komplex zu berechnen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-134">This isn't a real-world example, since the current time is something that does change often, and that moreover isn't complex to calculate.</span></span> <span data-ttu-id="9ed6b-135">Es ist jedoch eine gute Möglichkeit zur Zwischenspeicherung in Aktion zu veranschaulichen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-135">However, it's a good way to illustrate caching in action.</span></span>

1. <span data-ttu-id="9ed6b-136">Hinzufügen einer neuen Seite, die mit dem Namen *WebCache.cshtml* auf der Website.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-136">Add a new page named *WebCache.cshtml* to the website.</span></span>
2. <span data-ttu-id="9ed6b-137">Im folgenden Code und Markup der Seite hinzufügen:</span><span class="sxs-lookup"><span data-stu-id="9ed6b-137">Add the following code and markup to the page:</span></span>

    [!code-cshtml[Main](15-caching-to-improve-the-performance-of-your-website/samples/sample1.cshtml)]

    <span data-ttu-id="9ed6b-138">Wenn Sie die Daten zwischenspeichern, fügen Sie es den Cache unter Verwendung eines Namens Dies ist für die Website eindeutig.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-138">When you cache data, you put it into the cache using a name this is unique across the website.</span></span> <span data-ttu-id="9ed6b-139">In diesem Fall verwenden Sie einen Cacheeintrag mit dem Namen `CachedTime`.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-139">In this case, you'll use a cache entry named `CachedTime`.</span></span> <span data-ttu-id="9ed6b-140">Dies ist die `cacheItemKey` im Codebeispiel gezeigt.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-140">This is the `cacheItemKey` shown in the code example.</span></span>

    <span data-ttu-id="9ed6b-141">Der Code zuerst liest die `CachedTime` des Cacheeintrags.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-141">The code first reads the `CachedTime` cache entry.</span></span> <span data-ttu-id="9ed6b-142">Wenn ein Wert zurückgegeben wird (d.h., wenn der Cacheeintrag nicht null ist), legt der Code den Wert der Zeitvariablen nur die Daten im Cache fest.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-142">If a value is returned (that is, if the cache entry isn't null), the code just sets the value of the time variable to the cache data.</span></span>

    <span data-ttu-id="9ed6b-143">Aber wenn der Cacheeintrag nicht vorhanden ist (d. h. es ist null), der Code legt den Time-Wert, fügt es dem Cache hinzu und einem Ablaufwert auf eine Minute.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-143">However, if the cache entry doesn't exist (that is, it's null), the code sets the time value, adds it to the cache, and sets an expiration value to one minute.</span></span> <span data-ttu-id="9ed6b-144">Nach einer Minute wird der Cacheeintrag verworfen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-144">After one minute, the cache entry is discarded.</span></span> <span data-ttu-id="9ed6b-145">(Der Standardwert für die Ablaufzeit für ein Element im Cache ist 20 Minuten.) Der Befehl `WebCache.Set(cacheItemKey, time, 1, false)` zeigt, wie der Cache den aktuellen Wert der Zeit hinzu, und die Ablaufzeit auf 1 Minute festgelegt.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-145">(The default expiration value for an item in the cache is 20 minutes.) The command `WebCache.Set(cacheItemKey, time, 1, false)` shows how to add the current time value to the cache and set its expiration to 1 minute.</span></span> <span data-ttu-id="9ed6b-146">Festlegen der *SlidingExpiration* Parameter `false` bedeutet, dass die Ablaufzeit wird nicht jedes Mal, die sie angefordert wird verlängert.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-146">Setting the *slidingExpiration* parameter to `false` means the expiration time is not renewed each time it is requested.</span></span> <span data-ttu-id="9ed6b-147">Läuft es genau 1 Minute, nachdem er ursprünglich mit dem Cache hinzugefügt wurde.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-147">It will expire exactly 1 minute after it was originally added to the cache.</span></span> <span data-ttu-id="9ed6b-148">Wenn Sie diesen Wert, um festlegen `true` die Ablaufzeit für eine Minute wird jedes Mal zurückgesetzt, der Wert aus dem Cache angefordert wird.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-148">If you set this value to `true` the 1 minute expiration time is reset each time the value is requested from the cache.</span></span>

    <span data-ttu-id="9ed6b-149">Dieser Code veranschaulicht das Muster, das Sie beim Zwischenspeichern von Daten immer verwenden sollten.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-149">This code illustrates the pattern you should always use when you cache data.</span></span> <span data-ttu-id="9ed6b-150">Bevor Sie etwas aus dem Cache erhalten, überprüfen Sie immer zuerst, ob die `WebCache.Get` Methode hat null zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-150">Before you get something out of the cache, always check first whether the `WebCache.Get` method has returned null.</span></span> <span data-ttu-id="9ed6b-151">Denken Sie daran, dass der Cacheeintrag möglicherweise abgelaufen oder möglicherweise einem anderen Grund, entfernt wurde sodass jeder Eintrag garantiert nie im Cache ist.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-151">Remember that the cache entry might have expired or might have been removed for some other reason, so any given entry is never guaranteed to be in the cache.</span></span>
3. <span data-ttu-id="9ed6b-152">Führen Sie *WebCache.cshtml* in einem Browser.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-152">Run *WebCache.cshtml* in a browser.</span></span> <span data-ttu-id="9ed6b-153">(Stellen Sie sicher, dass die Seite ist ausgewählt, der **Dateien** Arbeitsbereich vor der Ausführung.) Beim ersten der Seite abrufen, die Time-Daten nicht im Cache sind, und der Code muss in der Time-Werten in den Cache hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-153">(Make sure the page is selected in the **Files** workspace before you run it.) The first time you request the page, the time data isn't in the cache, and the code has to add the time value to the cache.</span></span>

    ![Cache-1](15-caching-to-improve-the-performance-of-your-website/_static/image1.jpg)
4. <span data-ttu-id="9ed6b-155">Aktualisieren Sie *WebCache.cshtml* im Browser.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-155">Refresh *WebCache.cshtml* in the browser.</span></span> <span data-ttu-id="9ed6b-156">Diesmal ist die Zeitdaten im Cache.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-156">This time, the time data is in the cache.</span></span> <span data-ttu-id="9ed6b-157">Beachten Sie, dass die Zeit seit dem letzten geändert hat, Sie auf die Seite angezeigt.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-157">Notice that the time hasn't changed since the last time you viewed the page.</span></span>

    ![Cache-2](15-caching-to-improve-the-performance-of-your-website/_static/image2.jpg)
5. <span data-ttu-id="9ed6b-159">Warten Sie eine Minute, bis der Cache geleert werden, und klicken Sie dann aktualisieren Sie die Seite.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-159">Wait one minute for the cache to be emptied, and then refresh the page.</span></span> <span data-ttu-id="9ed6b-160">Die Seite gibt erneut an, dass die Zeitdaten wurde nicht im Cache gefunden, und die Uhrzeit der Aktualisierung wird aus dem Cache hinzugefügt.</span><span class="sxs-lookup"><span data-stu-id="9ed6b-160">The page again indicates that the time data wasn't found in the cache, and the updated time is added to the cache.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="9ed6b-161">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="9ed6b-161">Additional Resources</span></span>

- [<span data-ttu-id="9ed6b-162">Anzeigen von Daten in einem Diagramm</span><span class="sxs-lookup"><span data-stu-id="9ed6b-162">Displaying Data in a Chart</span></span>](https://go.microsoft.com/fwlink/?LinkId=202895)
- <span data-ttu-id="9ed6b-163">[WebCache-API-Referenz](https://msdn.microsoft.com/library/system.web.helpers.webcache(v=vs.99).aspx) (MSDN)</span><span class="sxs-lookup"><span data-stu-id="9ed6b-163">[WebCache API reference](https://msdn.microsoft.com/library/system.web.helpers.webcache(v=vs.99).aspx) (MSDN)</span></span>
