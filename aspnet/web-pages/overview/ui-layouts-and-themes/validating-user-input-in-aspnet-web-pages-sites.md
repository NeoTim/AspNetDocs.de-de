---
uid: web-pages/overview/ui-layouts-and-themes/validating-user-input-in-aspnet-web-pages-sites
title: Validieren von Benutzereingaben in ASP.net Web Pages (Razor)-Sites | Microsoft-Dokumentation
author: Rick-Anderson
description: In diesem Artikel wird erläutert, wie Sie Informationen überprüfen können, die Sie von Benutzern erhalten &mdash; d. h. um sicherzustellen, dass Benutzer gültige Informationen in HTML-Formularen in einem AS...
ms.author: riande
ms.date: 02/20/2014
ms.assetid: 4eb060cc-cf14-41ae-bab1-14a2c15332d0
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/validating-user-input-in-aspnet-web-pages-sites
msc.type: authoredcontent
ms.openlocfilehash: e6f8e1051d09d11f1756bfada44a73ba7c2a1db2
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: de-DE
ms.lasthandoff: 03/06/2020
ms.locfileid: "78454299"
---
# <a name="validating-user-input-in-aspnet-web-pages-razor-sites"></a><span data-ttu-id="bfa81-103">Überprüfen von Benutzereingaben in ASP.net Web Pages-Websites (Razor)</span><span class="sxs-lookup"><span data-stu-id="bfa81-103">Validating User Input in ASP.NET Web Pages (Razor) Sites</span></span>

<span data-ttu-id="bfa81-104">von [Tom fitzmacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="bfa81-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="bfa81-105">In diesem Artikel wird erläutert, wie Sie Informationen überprüfen können, die Sie von Benutzern erhalten &mdash; das heißt, um sicherzustellen, dass Benutzer gültige Informationen in HTML-Formularen auf einer ASP.net Web Pages (Razor)-Website eingeben.</span><span class="sxs-lookup"><span data-stu-id="bfa81-105">This article discusses how to validate information you get from users &mdash; that is, to make sure that users enter valid information in HTML forms in an ASP.NET Web Pages (Razor) site.</span></span>
> 
> <span data-ttu-id="bfa81-106">Sie lernen Folgendes:</span><span class="sxs-lookup"><span data-stu-id="bfa81-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="bfa81-107">Überprüfen, ob die Eingabe eines Benutzers mit den von Ihnen definierten Validierungs Kriterien übereinstimmt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-107">How to check that a user's input matches validation criteria that you define.</span></span>
> - <span data-ttu-id="bfa81-108">Bestimmen, ob alle Validierungstests bestanden wurden.</span><span class="sxs-lookup"><span data-stu-id="bfa81-108">How to determine whether all validation tests have passed.</span></span>
> - <span data-ttu-id="bfa81-109">Vorgehensweise beim Anzeigen von Validierungs Fehlern (und Formatierungs Fehlern).</span><span class="sxs-lookup"><span data-stu-id="bfa81-109">How to display validation errors (and how to format them).</span></span>
> - <span data-ttu-id="bfa81-110">Validieren von Daten, die nicht direkt von Benutzern stammen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-110">How to validate data that doesn't come directly from users.</span></span>
> 
> <span data-ttu-id="bfa81-111">Dies sind die ASP.net-Programmier Konzepte, die im Artikel vorgestellt werden:</span><span class="sxs-lookup"><span data-stu-id="bfa81-111">These are the ASP.NET programming concepts introduced in the article:</span></span>
> 
> - <span data-ttu-id="bfa81-112">Das `Validation`-Hilfsprogramm.</span><span class="sxs-lookup"><span data-stu-id="bfa81-112">The `Validation` helper.</span></span>
> - <span data-ttu-id="bfa81-113">Die Methoden `Html.ValidationSummary` und `Html.ValidationMessage`.</span><span class="sxs-lookup"><span data-stu-id="bfa81-113">The `Html.ValidationSummary` and `Html.ValidationMessage` methods.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="bfa81-114">Im Tutorial verwendete Software Versionen</span><span class="sxs-lookup"><span data-stu-id="bfa81-114">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="bfa81-115">ASP.net Web Pages (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="bfa81-115">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="bfa81-116">Dieses Tutorial funktioniert auch mit ASP.net Web Pages 2.</span><span class="sxs-lookup"><span data-stu-id="bfa81-116">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<span data-ttu-id="bfa81-117">Dieser Artikel enthält folgende Abschnitte:</span><span class="sxs-lookup"><span data-stu-id="bfa81-117">This article contains the following sections:</span></span>

- [<span data-ttu-id="bfa81-118">Übersicht über die Überprüfung der Benutzereingaben</span><span class="sxs-lookup"><span data-stu-id="bfa81-118">Overview of User Input Validation</span></span>](#Overview_of_User_Input_Validation)
- [<span data-ttu-id="bfa81-119">Überprüfen der Benutzereingabe</span><span class="sxs-lookup"><span data-stu-id="bfa81-119">Validating User Input</span></span>](#Validating_User_Input)
- [<span data-ttu-id="bfa81-120">Hinzufügen der Client seitigen Validierung</span><span class="sxs-lookup"><span data-stu-id="bfa81-120">Adding Client-Side Validation</span></span>](#Adding_Client-Side_Validation)
- [<span data-ttu-id="bfa81-121">Formatieren von Validierungs Fehlern</span><span class="sxs-lookup"><span data-stu-id="bfa81-121">Formatting Validation Errors</span></span>](#Formatting_Validation_Errors)
- [<span data-ttu-id="bfa81-122">Validieren von Daten, die nicht direkt von Benutzern stammen</span><span class="sxs-lookup"><span data-stu-id="bfa81-122">Validating Data That Doesn't Come Directly from Users</span></span>](#Validating_Data_That_Doesnt_Come_Directly_from_Users)

<a id="Overview_of_User_Input_Validation"></a>
## <a name="overview-of-user-input-validation"></a><span data-ttu-id="bfa81-123">Übersicht über die Überprüfung der Benutzereingaben</span><span class="sxs-lookup"><span data-stu-id="bfa81-123">Overview of User Input Validation</span></span>

<span data-ttu-id="bfa81-124">Wenn Sie Benutzer dazu auffordern, Informationen in eine Seite einzugeben, z. –. in ein Formular – müssen Sie sicherstellen, dass die eingegebenen Werte gültig sind.</span><span class="sxs-lookup"><span data-stu-id="bfa81-124">If you ask users to enter information in a page — for example, into a form — it's important to make sure that the values that they enter are valid.</span></span> <span data-ttu-id="bfa81-125">Sie möchten z. b. nicht ein Formular verarbeiten, das wichtige Informationen fehlt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-125">For example, you don't want to process a form that's missing critical information.</span></span>

<span data-ttu-id="bfa81-126">Wenn Benutzer Werte in ein HTML-Formular eingeben, sind die Werte, die Sie eingeben, Zeichen folgen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-126">When users enter values into an HTML form, the values that they enter are strings.</span></span> <span data-ttu-id="bfa81-127">In vielen Fällen sind die Werte, die Sie benötigen, einige andere Datentypen, wie z. b. ganze Zahlen oder Datumsangaben.</span><span class="sxs-lookup"><span data-stu-id="bfa81-127">In many cases, the values you need are some other data types, like integers or dates.</span></span> <span data-ttu-id="bfa81-128">Daher müssen Sie auch sicherstellen, dass die von Benutzern eingegebenen Werte ordnungsgemäß in die entsprechenden Datentypen konvertiert werden können.</span><span class="sxs-lookup"><span data-stu-id="bfa81-128">Therefore, you also have to make sure that the values that users enter can be correctly converted to the appropriate data types.</span></span>

<span data-ttu-id="bfa81-129">Möglicherweise haben Sie auch bestimmte Einschränkungen für die Werte.</span><span class="sxs-lookup"><span data-stu-id="bfa81-129">You might also have certain restrictions on the values.</span></span> <span data-ttu-id="bfa81-130">Auch wenn Benutzer eine ganze Zahl ordnungsgemäß eingeben, müssen Sie möglicherweise sicherstellen, dass der Wert innerhalb eines bestimmten Bereichs liegt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-130">Even if users correctly enter an integer, for example, you might need to make sure that the value falls within a certain range.</span></span>

![Validierungs Fehler, die CSS-Stil Klassen verwenden](validating-user-input-in-aspnet-web-pages-sites/_static/image1.png)

> [!NOTE] 
> 
> <span data-ttu-id="bfa81-132">**Wichtig** Die Überprüfung von Benutzereingaben ist auch wichtig für die Sicherheit.</span><span class="sxs-lookup"><span data-stu-id="bfa81-132">**Important** Validating user input is also important for security.</span></span> <span data-ttu-id="bfa81-133">Wenn Sie die Werte einschränken, die Benutzer in Formularen eingeben können, verringern Sie die Wahrscheinlichkeit, dass ein Benutzer einen Wert eingeben kann, der die Sicherheit Ihrer Website beeinträchtigen kann.</span><span class="sxs-lookup"><span data-stu-id="bfa81-133">When you restrict the values that users can enter in forms, you reduce the chance that someone can enter a value that can compromise the security of your site.</span></span>

<a id="Validating_User_Input"></a>
## <a name="validating-user-input"></a><span data-ttu-id="bfa81-134">Überprüfen der Benutzereingabe</span><span class="sxs-lookup"><span data-stu-id="bfa81-134">Validating User Input</span></span>

<span data-ttu-id="bfa81-135">In ASP.net Web Pages 2 können Sie das `Validator`-Hilfsprogramm verwenden, um Benutzereingaben zu testen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-135">In ASP.NET Web Pages 2, you can use the `Validator` helper to test user input.</span></span> <span data-ttu-id="bfa81-136">Die grundlegende Vorgehensweise besteht darin, die folgenden Schritte durchzuführen:</span><span class="sxs-lookup"><span data-stu-id="bfa81-136">The basic approach is to do the following:</span></span>

1. <span data-ttu-id="bfa81-137">Bestimmen Sie, welche Eingabeelemente (Felder) Sie überprüfen möchten.</span><span class="sxs-lookup"><span data-stu-id="bfa81-137">Determine which input elements (fields) you want to validate.</span></span>

    <span data-ttu-id="bfa81-138">In der Regel werden Werte in `<input>` Elementen in einem Formular überprüft.</span><span class="sxs-lookup"><span data-stu-id="bfa81-138">You typically validate values in `<input>` elements in a form.</span></span> <span data-ttu-id="bfa81-139">Es empfiehlt sich jedoch, alle Eingaben zu validieren, auch Eingaben, die von einem eingeschränkten Element wie einer `<select>` Liste stammen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-139">However, it's a good practice to validate all input, even input that comes from a constrained element like a `<select>` list.</span></span> <span data-ttu-id="bfa81-140">Dadurch wird sichergestellt, dass die Benutzer die Steuerelemente auf einer Seite nicht umgehen und ein Formular übermitteln.</span><span class="sxs-lookup"><span data-stu-id="bfa81-140">This helps to make sure that users don't bypass the controls on a page and submit a form.</span></span>
2. <span data-ttu-id="bfa81-141">Fügen Sie im Seitencode individuelle Validierungs Überprüfungen für jedes Eingabe Element hinzu, indem Sie Methoden des `Validation` Hilfsprogramms verwenden.</span><span class="sxs-lookup"><span data-stu-id="bfa81-141">In the page code, add individual validation checks for each input element by using methods of the `Validation` helper.</span></span>

    <span data-ttu-id="bfa81-142">Um die erforderlichen Felder zu überprüfen, verwenden Sie `Validation.RequireField(field, [error message])` (für ein einzelnes Feld) oder `Validation.RequireFields(field1, field2, ...))` (für eine Liste von Feldern).</span><span class="sxs-lookup"><span data-stu-id="bfa81-142">To check for required fields, use `Validation.RequireField(field, [error message])` (for an individual field) or `Validation.RequireFields(field1, field2, ...))` (for a list of fields).</span></span> <span data-ttu-id="bfa81-143">Verwenden Sie für andere Validierungs Typen `Validation.Add(field, ValidationType)`.</span><span class="sxs-lookup"><span data-stu-id="bfa81-143">For other types of validation, use `Validation.Add(field, ValidationType)`.</span></span> <span data-ttu-id="bfa81-144">Für `ValidationType`können Sie die folgenden Optionen verwenden:</span><span class="sxs-lookup"><span data-stu-id="bfa81-144">For `ValidationType`, you can use these options:</span></span>

    `Validator.DateTime ([error message])`  
   `Validator.Decimal([error message])`  
   `Validator.EqualsTo(otherField [, error message])`  
   `Validator.Float([error message])`  
   `Validator.Integer([error message])`  
   `Validator.Range(min, max [, error message])`  
   `Validator.RegEx(pattern [, error message])`  
   `Validator.Required([error message])`  
   `Validator.StringLength(length)`  
   `Validator.Url([error message])`
3. <span data-ttu-id="bfa81-145">Wenn die Seite übermittelt wird, überprüfen Sie, ob die Überprüfung erfolgreich war, indem Sie `Validation.IsValid`:</span><span class="sxs-lookup"><span data-stu-id="bfa81-145">When the page is submitted, check whether validation has passed by checking `Validation.IsValid`:</span></span>

    [!code-csharp[Main](validating-user-input-in-aspnet-web-pages-sites/samples/sample1.cs)]

    <span data-ttu-id="bfa81-146">Wenn Validierungs Fehler vorliegen, überspringen Sie die normale Seiten Verarbeitung.</span><span class="sxs-lookup"><span data-stu-id="bfa81-146">If there are any validation errors, you skip normal page processing.</span></span> <span data-ttu-id="bfa81-147">Wenn z. b. der Zweck der Seite darin besteht, eine Datenbank zu aktualisieren, tun Sie dies erst, wenn alle Validierungs Fehler behoben wurden.</span><span class="sxs-lookup"><span data-stu-id="bfa81-147">For example, if the purpose of the page is to update a database, you don't do that until all validation errors have been fixed.</span></span>
4. <span data-ttu-id="bfa81-148">Wenn Validierungs Fehler vorliegen, zeigen Sie die Fehlermeldungen im Markup der Seite an, indem Sie `Html.ValidationSummary` oder `Html.ValidationMessage`oder beides verwenden.</span><span class="sxs-lookup"><span data-stu-id="bfa81-148">If there are validation errors, display error messages in the page's markup by using `Html.ValidationSummary` or `Html.ValidationMessage`, or both.</span></span>

<span data-ttu-id="bfa81-149">Das folgende Beispiel zeigt eine Seite, die diese Schritte veranschaulicht.</span><span class="sxs-lookup"><span data-stu-id="bfa81-149">The following example shows a page that illustrates these steps.</span></span>

[!code-cshtml[Main](validating-user-input-in-aspnet-web-pages-sites/samples/sample2.cshtml)]

<span data-ttu-id="bfa81-150">Um zu sehen, wie die Validierung funktioniert, führen Sie diese Seite aus und führen absichtlich zu Fehlern.</span><span class="sxs-lookup"><span data-stu-id="bfa81-150">To see how validation works, run this page and deliberately make mistakes.</span></span> <span data-ttu-id="bfa81-151">So sieht die Seite z. b. aus, wenn Sie vergessen, einen Kursnamen einzugeben, wenn Sie einen eingeben und ein ungültiges Datum eingeben:</span><span class="sxs-lookup"><span data-stu-id="bfa81-151">For example, here's what the page looks like if you forget to enter a course name, if you enter an, and if you enter an invalid date:</span></span>

![Validierungs Fehler auf der gerenderten Seite](validating-user-input-in-aspnet-web-pages-sites/_static/image2.png)

<a id="Adding_Client-Side_Validation"></a>
## <a name="adding-client-side-validation"></a><span data-ttu-id="bfa81-153">Hinzufügen der Client seitigen Validierung</span><span class="sxs-lookup"><span data-stu-id="bfa81-153">Adding Client-Side Validation</span></span>

<span data-ttu-id="bfa81-154">Standardmäßig wird die Benutzereingabe überprüft, nachdem die Benutzer die Seite gesendet haben – das heißt, die Überprüfung wird im Servercode ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-154">By default, user input is validated after users submit the page — that is, the validation is performed in server code.</span></span> <span data-ttu-id="bfa81-155">Ein Nachteil dieses Ansatzes ist, dass die Benutzer wissen, dass Sie erst nach dem Senden der Seite einen Fehler ausgegeben haben.</span><span class="sxs-lookup"><span data-stu-id="bfa81-155">A disadvantage of this approach is that users don't know that they've made an error until after they submit the page.</span></span> <span data-ttu-id="bfa81-156">Wenn ein Formular lang oder komplex ist, kann es für den Benutzer unpraktisch sein, Fehler zu melden, nachdem die Seite übermittelt wurde.</span><span class="sxs-lookup"><span data-stu-id="bfa81-156">If a form is long or complex, reporting errors only after the page is submitted can be inconvenient to the user.</span></span>

<span data-ttu-id="bfa81-157">Sie können Unterstützung hinzufügen, um die Validierung in Client Skripts auszuführen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-157">You can add support to perform validation in client script.</span></span> <span data-ttu-id="bfa81-158">In diesem Fall wird die Überprüfung ausgeführt, wenn Benutzer im Browser arbeiten.</span><span class="sxs-lookup"><span data-stu-id="bfa81-158">In that case, the validation is performed as users work in the browser.</span></span> <span data-ttu-id="bfa81-159">Angenommen, Sie geben an, dass ein Wert eine ganze Zahl sein soll.</span><span class="sxs-lookup"><span data-stu-id="bfa81-159">For example, suppose you specify that a value should be an integer.</span></span> <span data-ttu-id="bfa81-160">Wenn ein Benutzer einen nicht ganzzahligen Wert eingibt, wird der Fehler angezeigt, sobald der Benutzer das Eingabefeld verlässt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-160">If a user enters a non-integer value, the error is reported as soon as the user leaves the entry field.</span></span> <span data-ttu-id="bfa81-161">Benutzer erhalten sofortiges Feedback, was für Sie praktisch ist.</span><span class="sxs-lookup"><span data-stu-id="bfa81-161">Users get immediate feedback, which is convenient for them.</span></span> <span data-ttu-id="bfa81-162">Die Client basierte Validierung kann auch die Häufigkeit verringern, mit der der Benutzer das Formular einreichen muss, um mehrere Fehler zu beheben.</span><span class="sxs-lookup"><span data-stu-id="bfa81-162">Client-based validation can also reduce the number of times that the user has to submit the form to correct multiple errors.</span></span>

> [!NOTE]
> <span data-ttu-id="bfa81-163">Auch wenn Sie die Client seitige Validierung verwenden, wird die Validierung immer auch im Servercode ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-163">Even if you use client-side validation, validation is always also performed in server code.</span></span> <span data-ttu-id="bfa81-164">Das Durchführen der Validierung in Servercode ist eine Sicherheitsmaßnahme, wenn Benutzer die Client basierte Validierung umgehen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-164">Performing validation in server code is a security measure, in case users bypass client-based validation.</span></span>

1. <span data-ttu-id="bfa81-165">Registrieren Sie die folgenden JavaScript-Bibliotheken auf der Seite:</span><span class="sxs-lookup"><span data-stu-id="bfa81-165">Register the following JavaScript libraries in the page:</span></span>  

    [!code-html[Main](validating-user-input-in-aspnet-web-pages-sites/samples/sample3.html)]

   <span data-ttu-id="bfa81-166">Zwei der Bibliotheken können aus einem Content Delivery Network (CDN) geladen werden, sodass Sie nicht unbedingt auf dem Computer oder Server vorhanden sein müssen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-166">Two of the libraries are loadable from a content delivery network (CDN), so you don't necessarily have to have them on your computer or server.</span></span> <span data-ttu-id="bfa81-167">Sie müssen jedoch über eine lokale Kopie von *jQuery. Validate. Unaufdring. js*verfügen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-167">However, you must have a local copy of *jquery.validate.unobtrusive.js*.</span></span> <span data-ttu-id="bfa81-168">Wenn Sie noch nicht mit einer webmatrix-Vorlage (z. b. einer **Starter Site** ) arbeiten, die die Bibliothek enthält, erstellen Sie eine Web Pages-Website, die auf der **Starter Site**basiert.</span><span class="sxs-lookup"><span data-stu-id="bfa81-168">If you are not already working with a WebMatrix template (like **Starter Site** ) that includes the library, create a Web Pages site that's based on **Starter Site**.</span></span> <span data-ttu-id="bfa81-169">Kopieren Sie dann die *js* -Datei auf die aktuelle Website.</span><span class="sxs-lookup"><span data-stu-id="bfa81-169">Then copy the *.js* file to your current site.</span></span>
2. <span data-ttu-id="bfa81-170">Fügen Sie im Markup für jedes Element, das Sie überprüfen, einen-`Validation.For(field)`hinzu.</span><span class="sxs-lookup"><span data-stu-id="bfa81-170">In markup, for each element that you're validating, add a call to `Validation.For(field)`.</span></span> <span data-ttu-id="bfa81-171">Diese Methode gibt Attribute aus, die von der Client seitigen Validierung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bfa81-171">This method emits attributes that are used by client-side validation.</span></span> <span data-ttu-id="bfa81-172">(Anstelle von tatsächlichem JavaScript-Code gibt die-Methode Attribute wie `data-val-...`aus.</span><span class="sxs-lookup"><span data-stu-id="bfa81-172">(Rather than emitting actual JavaScript code, the method emits attributes like `data-val-...`.</span></span> <span data-ttu-id="bfa81-173">Diese Attribute unterstützen unaufdringliche Client Validierung, bei der jQuery verwendet wird, um die Arbeit zu erledigen.)</span><span class="sxs-lookup"><span data-stu-id="bfa81-173">These attributes support unobtrusive client validation that uses jQuery to do the work.)</span></span>

<span data-ttu-id="bfa81-174">Auf der folgenden Seite wird gezeigt, wie Sie dem oben gezeigten Beispiel Client Validierungs Funktionen hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-174">The following page shows how to add client validation features to the example shown earlier.</span></span>

[!code-cshtml[Main](validating-user-input-in-aspnet-web-pages-sites/samples/sample4.cshtml?highlight=35-39,51,61,71)]

<span data-ttu-id="bfa81-175">Nicht alle Validierungs Überprüfungen werden auf dem Client ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-175">Not all validation checks run on the client.</span></span> <span data-ttu-id="bfa81-176">Insbesondere wird die Datentyp Validierung (Integer, Date usw.) nicht auf dem Client ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-176">In particular, data-type validation (integer, date, and so on) don't run on the client.</span></span> <span data-ttu-id="bfa81-177">Die folgenden Überprüfungen funktionieren sowohl auf dem Client als auch auf dem Server:</span><span class="sxs-lookup"><span data-stu-id="bfa81-177">The following checks work on both the client and server:</span></span>

- `Required`
- `Range(minValue, maxValue)`
- `StringLength(maxLength[, minLength])`
- `Regex(pattern)`
- `EqualsTo(otherField)`

<span data-ttu-id="bfa81-178">In diesem Beispiel funktioniert der Test für ein gültiges Datum nicht im Client Code.</span><span class="sxs-lookup"><span data-stu-id="bfa81-178">In this example, the test for a valid date won't work in client code.</span></span> <span data-ttu-id="bfa81-179">Der Test wird jedoch im Servercode ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-179">However, the test will be performed in server code.</span></span>

<a id="Formatting_Validation_Errors"></a>
## <a name="formatting-validation-errors"></a><span data-ttu-id="bfa81-180">Formatieren von Validierungs Fehlern</span><span class="sxs-lookup"><span data-stu-id="bfa81-180">Formatting Validation Errors</span></span>

<span data-ttu-id="bfa81-181">Sie können steuern, wie Validierungs Fehler angezeigt werden, indem Sie CSS-Klassen definieren, die die folgenden reservierten Namen haben:</span><span class="sxs-lookup"><span data-stu-id="bfa81-181">You can control how validation errors are displayed by defining CSS classes that have the following reserved names:</span></span>

- <span data-ttu-id="bfa81-182">[https://login.microsoftonline.com/consumers/](`field-validation-error`).</span><span class="sxs-lookup"><span data-stu-id="bfa81-182">`field-validation-error`.</span></span> <span data-ttu-id="bfa81-183">Definiert die Ausgabe der `Html.ValidationMessage` Methode, wenn ein Fehler angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="bfa81-183">Defines the output of the `Html.ValidationMessage` method when it's displaying an error.</span></span>
- <span data-ttu-id="bfa81-184">[https://login.microsoftonline.com/consumers/](`field-validation-valid`).</span><span class="sxs-lookup"><span data-stu-id="bfa81-184">`field-validation-valid`.</span></span> <span data-ttu-id="bfa81-185">Definiert die Ausgabe der `Html.ValidationMessage` Methode, wenn kein Fehler vorliegt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-185">Defines the output of the `Html.ValidationMessage` method when there is no error.</span></span>
- <span data-ttu-id="bfa81-186">[https://login.microsoftonline.com/consumers/](`input-validation-error`).</span><span class="sxs-lookup"><span data-stu-id="bfa81-186">`input-validation-error`.</span></span> <span data-ttu-id="bfa81-187">Definiert, wie `<input>` Elemente gerendert werden, wenn ein Fehler auftritt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-187">Defines how `<input>` elements are rendered when there's an error.</span></span> <span data-ttu-id="bfa81-188">(Sie können diese Klasse z. b. verwenden, um die Hintergrundfarbe einer &lt;Eingabe&gt;-Elements auf eine andere Farbe festzulegen, wenn der Wert ungültig ist.) Diese CSS-Klasse wird nur während der Client Validierung verwendet (in ASP.net Web Pages 2).</span><span class="sxs-lookup"><span data-stu-id="bfa81-188">(For example, you can use this class to set the background color of an &lt;input&gt; element to a different color if its value is invalid.) This CSS class is used only during client validation (in ASP.NET Web Pages 2).</span></span>
- <span data-ttu-id="bfa81-189">[https://login.microsoftonline.com/consumers/](`input-validation-valid`).</span><span class="sxs-lookup"><span data-stu-id="bfa81-189">`input-validation-valid`.</span></span> <span data-ttu-id="bfa81-190">Definiert die Darstellung von `<input>` Elementen, wenn kein Fehler vorliegt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-190">Defines the appearance of `<input>` elements when there is no error.</span></span>
- <span data-ttu-id="bfa81-191">[https://login.microsoftonline.com/consumers/](`validation-summary-errors`).</span><span class="sxs-lookup"><span data-stu-id="bfa81-191">`validation-summary-errors`.</span></span> <span data-ttu-id="bfa81-192">Definiert die Ausgabe der `Html.ValidationSummary` Methode, die eine Liste von Fehlern anzeigt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-192">Defines the output of the `Html.ValidationSummary` method it's displaying a list of errors.</span></span>
- <span data-ttu-id="bfa81-193">[https://login.microsoftonline.com/consumers/](`validation-summary-valid`).</span><span class="sxs-lookup"><span data-stu-id="bfa81-193">`validation-summary-valid`.</span></span> <span data-ttu-id="bfa81-194">Definiert die Ausgabe der `Html.ValidationSummary` Methode, wenn kein Fehler vorliegt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-194">Defines the output of the `Html.ValidationSummary` method when there is no error.</span></span>

<span data-ttu-id="bfa81-195">Der folgende `<style>` Block zeigt Regeln für Fehlerbedingungen an.</span><span class="sxs-lookup"><span data-stu-id="bfa81-195">The following `<style>` block shows rules for error conditions.</span></span>

[!code-css[Main](validating-user-input-in-aspnet-web-pages-sites/samples/sample5.css)]

<span data-ttu-id="bfa81-196">Wenn Sie diesen Stilblock in den Beispielseiten von weiter oben in diesem Artikel einfügen, sieht die Fehleranzeige wie in der folgenden Abbildung aus:</span><span class="sxs-lookup"><span data-stu-id="bfa81-196">If you include this style block in the example pages from earlier in the article, the error display will look like the following illustration:</span></span>

![Validierungs Fehler, die CSS-Stil Klassen verwenden](validating-user-input-in-aspnet-web-pages-sites/_static/image3.png)

> [!NOTE]
> <span data-ttu-id="bfa81-198">Wenn Sie die Client Validierung nicht in ASP.net Web Pages 2 verwenden, haben die CSS-Klassen für die `<input>` Elemente (`input-validation-error` und `input-validation-valid` keine Auswirkung.</span><span class="sxs-lookup"><span data-stu-id="bfa81-198">If you're not using client validation in ASP.NET Web Pages 2, the CSS classes for the `<input>` elements (`input-validation-error` and `input-validation-valid` don't have any effect.</span></span>

### <a name="static-and-dynamic-error-display"></a><span data-ttu-id="bfa81-199">Statische und dynamische Fehleranzeige</span><span class="sxs-lookup"><span data-stu-id="bfa81-199">Static and Dynamic Error Display</span></span>

<span data-ttu-id="bfa81-200">Die CSS-Regeln treten paarweise auf, z. b. `validation-summary-errors` und `validation-summary-valid`.</span><span class="sxs-lookup"><span data-stu-id="bfa81-200">The CSS rules come in pairs, such as `validation-summary-errors` and `validation-summary-valid`.</span></span> <span data-ttu-id="bfa81-201">Mit diesen Paaren können Sie Regeln für beide Bedingungen definieren: eine Fehlerbedingung und eine "normale" Bedingung (nicht fehlerhaft).</span><span class="sxs-lookup"><span data-stu-id="bfa81-201">These pairs let you define rules for both conditions: an error condition and a "normal" (non-error) condition.</span></span> <span data-ttu-id="bfa81-202">Es ist wichtig zu verstehen, dass das Markup für die Fehleranzeige immer gerendert wird, auch wenn keine Fehler vorliegen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-202">It's important to understand that the markup for the error display is always rendered, even if there are no errors.</span></span> <span data-ttu-id="bfa81-203">Wenn eine Seite z. b. über eine `Html.ValidationSummary`-Methode im Markup verfügt, enthält die Seitenquelle das folgende Markup, auch wenn die Seite zum ersten Mal angefordert wird:</span><span class="sxs-lookup"><span data-stu-id="bfa81-203">For example, if a page has an `Html.ValidationSummary` method in the markup, the page source will contain the following markup even when the page is requested for the first time:</span></span>

`<div class="validation-summary-valid" data-valmsg-summary="true"><ul></ul></div>`

<span data-ttu-id="bfa81-204">Mit anderen Worten, die `Html.ValidationSummary`-Methode rendert immer ein `<div>` Element und eine Liste, auch wenn die Fehlerliste leer ist.</span><span class="sxs-lookup"><span data-stu-id="bfa81-204">In other words, the `Html.ValidationSummary` method always renders a `<div>` element and a list, even if the error list is empty.</span></span> <span data-ttu-id="bfa81-205">Ebenso rendert die `Html.ValidationMessage`-Methode immer ein `<span>`-Element als Platzhalter für einen einzelnen Feld Fehler, auch wenn kein Fehler vorliegt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-205">Similarly, the `Html.ValidationMessage` method always renders a `<span>` element as a placeholder for an individual field error, even if there is no error.</span></span>

<span data-ttu-id="bfa81-206">In einigen Situationen kann das Anzeigen einer Fehlermeldung bewirken, dass die Seite erneut fließt und die Elemente auf der Seite verschoben werden können.</span><span class="sxs-lookup"><span data-stu-id="bfa81-206">In some situations, displaying an error message can cause the page to reflow and can cause elements on the page to move around.</span></span> <span data-ttu-id="bfa81-207">Die CSS-Regeln, die auf `-valid` enden, ermöglichen es Ihnen, ein Layout zu definieren, das zur Vermeidung dieses Problems beiträgt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-207">The CSS rules that end in `-valid` let you define a layout that can help prevent this problem.</span></span> <span data-ttu-id="bfa81-208">Beispielsweise können Sie `field-validation-error` und `field-validation-valid` definieren, sodass beide die gleiche festgelegte Größe aufweisen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-208">For example, you can define `field-validation-error` and `field-validation-valid` to both have the same fixed size.</span></span> <span data-ttu-id="bfa81-209">Auf diese Weise ist der Anzeigebereich für das Feld statisch und ändert den Seiten Fluss nicht, wenn eine Fehlermeldung angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="bfa81-209">That way, the display area for the field is static and won't change the page flow if an error message is displayed.</span></span>

<a id="Validating_Data_That_Doesnt_Come_Directly_from_Users"></a>
## <a name="validating-data-that-doesnt-come-directly-from-users"></a><span data-ttu-id="bfa81-210">Validieren von Daten, die nicht direkt von Benutzern stammen</span><span class="sxs-lookup"><span data-stu-id="bfa81-210">Validating Data That Doesn't Come Directly from Users</span></span>

<span data-ttu-id="bfa81-211">Manchmal müssen Sie Informationen überprüfen, die nicht direkt aus einem HTML-Formular stammen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-211">Sometimes you have to validate information that doesn't come directly from an HTML form.</span></span> <span data-ttu-id="bfa81-212">Ein typisches Beispiel ist eine Seite, bei der ein Wert in einer Abfrage Zeichenfolge wie im folgenden Beispiel dargestellt wird:</span><span class="sxs-lookup"><span data-stu-id="bfa81-212">A typical example is a page where a value is passed in a query string, as in the following example:</span></span>

`http://server/myapp/EditClassInformation?classid=1022`

<span data-ttu-id="bfa81-213">In diesem Fall müssen Sie sicherstellen, dass der Wert, der an die Seite (hier 1022 für den Wert von `classid`), an die Seite übermittelt wird, gültig ist.</span><span class="sxs-lookup"><span data-stu-id="bfa81-213">In this case, you want to make sure that the value that's passed to the page (here, 1022 for the value of `classid`) is valid.</span></span> <span data-ttu-id="bfa81-214">Sie können das `Validation`-Hilfsprogramm nicht direkt verwenden, um diese Validierung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-214">You can't directly use the `Validation` helper to perform this validation.</span></span> <span data-ttu-id="bfa81-215">Sie können jedoch auch andere Funktionen des validierungssystems verwenden, z. b. die Möglichkeit, Validierungs Fehlermeldungen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-215">However, you can use other features of the validation system, like the ability to display validation error messages.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="bfa81-216">**Wichtig** Überprüfen Sie immer die Werte, die Sie aus *beliebigen* Quellen erhalten, einschließlich Formular Feldwerten, Werte von Abfrage Zeichenfolgen und Cookie-Werten.</span><span class="sxs-lookup"><span data-stu-id="bfa81-216">**Important** Always validate values that you get from *any* source, including form-field values, query-string values, and cookie values.</span></span> <span data-ttu-id="bfa81-217">Es ist einfach, dass die Benutzer diese Werte ändern können (vielleicht für böswillige Zwecke).</span><span class="sxs-lookup"><span data-stu-id="bfa81-217">It's easy for people to change these values (perhaps for malicious purposes).</span></span> <span data-ttu-id="bfa81-218">Sie müssen diese Werte also überprüfen, um Ihre Anwendung zu schützen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-218">So you must check these values in order to protect your application.</span></span>

<span data-ttu-id="bfa81-219">Im folgenden Beispiel wird gezeigt, wie Sie einen Wert validieren können, der in einer Abfrage Zeichenfolge übermittelt wird.</span><span class="sxs-lookup"><span data-stu-id="bfa81-219">The following example shows how you might validate a value that's passed in a query string.</span></span> <span data-ttu-id="bfa81-220">Der Code testet, ob der Wert nicht leer ist und eine ganze Zahl ist.</span><span class="sxs-lookup"><span data-stu-id="bfa81-220">The code tests that the value is not empty and that it's an integer.</span></span>

[!code-csharp[Main](validating-user-input-in-aspnet-web-pages-sites/samples/sample6.cs)]

<span data-ttu-id="bfa81-221">Beachten Sie, dass der Test ausgeführt wird, wenn es sich bei der Anforderung nicht um eine Formular Übermittlung (`if(!IsPost)`) handelt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-221">Notice that the test is performed when the request is not a form submission (`if(!IsPost)`).</span></span> <span data-ttu-id="bfa81-222">Dieser Test wird bei der ersten Anforderung der Seite bestanden, jedoch nicht, wenn es sich bei der Anforderung um eine Formular Übermittlung handelt.</span><span class="sxs-lookup"><span data-stu-id="bfa81-222">This test would pass the first time that the page is requested, but not when the request is a form submission.</span></span>

<span data-ttu-id="bfa81-223">Zum Anzeigen dieses Fehlers können Sie den Fehler der Liste der Validierungs Fehler hinzufügen, indem Sie `Validation.AddFormError("message")`aufrufen.</span><span class="sxs-lookup"><span data-stu-id="bfa81-223">To display this error, you can add the error to the list of validation errors by calling `Validation.AddFormError("message")`.</span></span> <span data-ttu-id="bfa81-224">Wenn die Seite einen aufzurufenden `Html.ValidationSummary` Methode enthält, wird der Fehler an dieser Stelle angezeigt, genau wie bei einem Validierungs Fehler bei der Benutzereingabe.</span><span class="sxs-lookup"><span data-stu-id="bfa81-224">If the page contains a call to the `Html.ValidationSummary` method, the error is displayed there, just like a user-input validation error.</span></span>

<a id="AdditionalResources"></a>
## <a name="additional-resources"></a><span data-ttu-id="bfa81-225">Zusätzliche Ressourcen</span><span class="sxs-lookup"><span data-stu-id="bfa81-225">Additional Resources</span></span>

[<span data-ttu-id="bfa81-226">Arbeiten mit HTML-Formularen an ASP.net Web Pages Websites</span><span class="sxs-lookup"><span data-stu-id="bfa81-226">Working with HTML Forms in ASP.NET Web Pages Sites</span></span>](https://go.microsoft.com/fwlink/?LinkID=202892)
